var Pp=Object.defineProperty;var Op=(me,u,t)=>u in me?Pp(me,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):me[u]=t;var Bp=(me,u)=>()=>(u||me((u={exports:{}}).exports,u),u.exports);var wt=(me,u,t)=>Op(me,typeof u!="symbol"?u+"":u,t);var Mp=Bp((exports,module)=>{function _mergeNamespaces(me,u){for(var t=0;t<u.length;t++){const de=u[t];if(typeof de!="string"&&!Array.isArray(de)){for(const pe in de)if(pe!=="default"&&!(pe in me)){const Le=Object.getOwnPropertyDescriptor(de,pe);Le&&Object.defineProperty(me,pe,Le.get?Le:{enumerable:!0,get:()=>de[pe]})}}}return Object.freeze(Object.defineProperty(me,Symbol.toStringTag,{value:"Module"}))}(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const pe of document.querySelectorAll('link[rel="modulepreload"]'))de(pe);new MutationObserver(pe=>{for(const Le of pe)if(Le.type==="childList")for(const Ye of Le.addedNodes)Ye.tagName==="LINK"&&Ye.rel==="modulepreload"&&de(Ye)}).observe(document,{childList:!0,subtree:!0});function t(pe){const Le={};return pe.integrity&&(Le.integrity=pe.integrity),pe.referrerPolicy&&(Le.referrerPolicy=pe.referrerPolicy),pe.crossOrigin==="use-credentials"?Le.credentials="include":pe.crossOrigin==="anonymous"?Le.credentials="omit":Le.credentials="same-origin",Le}function de(pe){if(pe.ep)return;pe.ep=!0;const Le=t(pe);fetch(pe.href,Le)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(me){return me&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var me=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function t(de,pe,Le){var Ye=null;if(Le!==void 0&&(Ye=""+Le),pe.key!==void 0&&(Ye=""+pe.key),"key"in pe){Le={};for(var tt in pe)tt!=="key"&&(Le[tt]=pe[tt])}else Le=pe;return pe=Le.ref,{$$typeof:me,type:de,key:Ye,ref:pe!==void 0?pe:null,props:Le}}return reactJsxRuntime_production.Fragment=u,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var me=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),Le=Symbol.for("react.consumer"),Ye=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),ht=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),gt=Symbol.iterator;function bt(Vt){return Vt===null||typeof Vt!="object"?null:(Vt=gt&&Vt[gt]||Vt["@@iterator"],typeof Vt=="function"?Vt:null)}var _t={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vt=Object.assign,Tt={};function St(Vt,en,cn){this.props=Vt,this.context=en,this.refs=Tt,this.updater=cn||_t}St.prototype.isReactComponent={},St.prototype.setState=function(Vt,en){if(typeof Vt!="object"&&typeof Vt!="function"&&Vt!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Vt,en,"setState")},St.prototype.forceUpdate=function(Vt){this.updater.enqueueForceUpdate(this,Vt,"forceUpdate")};function Rt(){}Rt.prototype=St.prototype;function Pt(Vt,en,cn){this.props=Vt,this.context=en,this.refs=Tt,this.updater=cn||_t}var Ot=Pt.prototype=new Rt;Ot.constructor=Pt,vt(Ot,St.prototype),Ot.isPureReactComponent=!0;var Mt=Array.isArray,Bt={H:null,A:null,T:null,S:null,V:null},Dt=Object.prototype.hasOwnProperty;function $t(Vt,en,cn,nn,sn,un){return cn=un.ref,{$$typeof:me,type:Vt,key:en,ref:cn!==void 0?cn:null,props:un}}function kt(Vt,en){return $t(Vt.type,en,void 0,void 0,void 0,Vt.props)}function Et(Vt){return typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===me}function At(Vt){var en={"=":"=0",":":"=2"};return"$"+Vt.replace(/[=:]/g,function(cn){return en[cn]})}var Ft=/\/+/g;function zt(Vt,en){return typeof Vt=="object"&&Vt!==null&&Vt.key!=null?At(""+Vt.key):en.toString(36)}function Ut(){}function qt(Vt){switch(Vt.status){case"fulfilled":return Vt.value;case"rejected":throw Vt.reason;default:switch(typeof Vt.status=="string"?Vt.then(Ut,Ut):(Vt.status="pending",Vt.then(function(en){Vt.status==="pending"&&(Vt.status="fulfilled",Vt.value=en)},function(en){Vt.status==="pending"&&(Vt.status="rejected",Vt.reason=en)})),Vt.status){case"fulfilled":return Vt.value;case"rejected":throw Vt.reason}}throw Vt}function Gt(Vt,en,cn,nn,sn){var un=typeof Vt;(un==="undefined"||un==="boolean")&&(Vt=null);var dn=!1;if(Vt===null)dn=!0;else switch(un){case"bigint":case"string":case"number":dn=!0;break;case"object":switch(Vt.$$typeof){case me:case u:dn=!0;break;case mt:return dn=Vt._init,Gt(dn(Vt._payload),en,cn,nn,sn)}}if(dn)return sn=sn(Vt),dn=nn===""?"."+zt(Vt,0):nn,Mt(sn)?(cn="",dn!=null&&(cn=dn.replace(Ft,"$&/")+"/"),Gt(sn,en,cn,"",function(In){return In})):sn!=null&&(Et(sn)&&(sn=kt(sn,cn+(sn.key==null||Vt&&Vt.key===sn.key?"":(""+sn.key).replace(Ft,"$&/")+"/")+dn)),en.push(sn)),1;dn=0;var Rn=nn===""?".":nn+":";if(Mt(Vt))for(var _n=0;_n<Vt.length;_n++)nn=Vt[_n],un=Rn+zt(nn,_n),dn+=Gt(nn,en,cn,un,sn);else if(_n=bt(Vt),typeof _n=="function")for(Vt=_n.call(Vt),_n=0;!(nn=Vt.next()).done;)nn=nn.value,un=Rn+zt(nn,_n++),dn+=Gt(nn,en,cn,un,sn);else if(un==="object"){if(typeof Vt.then=="function")return Gt(qt(Vt),en,cn,nn,sn);throw en=String(Vt),Error("Objects are not valid as a React child (found: "+(en==="[object Object]"?"object with keys {"+Object.keys(Vt).join(", ")+"}":en)+"). If you meant to render a collection of children, use an array instead.")}return dn}function Nt(Vt,en,cn){if(Vt==null)return Vt;var nn=[],sn=0;return Gt(Vt,nn,"","",function(un){return en.call(cn,un,sn++)}),nn}function jt(Vt){if(Vt._status===-1){var en=Vt._result;en=en(),en.then(function(cn){(Vt._status===0||Vt._status===-1)&&(Vt._status=1,Vt._result=cn)},function(cn){(Vt._status===0||Vt._status===-1)&&(Vt._status=2,Vt._result=cn)}),Vt._status===-1&&(Vt._status=0,Vt._result=en)}if(Vt._status===1)return Vt._result.default;throw Vt._result}var Qt=typeof reportError=="function"?reportError:function(Vt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var en=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Vt=="object"&&Vt!==null&&typeof Vt.message=="string"?String(Vt.message):String(Vt),error:Vt});if(!window.dispatchEvent(en))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Vt);return}console.error(Vt)};function Kt(){}return react_production.Children={map:Nt,forEach:function(Vt,en,cn){Nt(Vt,function(){en.apply(this,arguments)},cn)},count:function(Vt){var en=0;return Nt(Vt,function(){en++}),en},toArray:function(Vt){return Nt(Vt,function(en){return en})||[]},only:function(Vt){if(!Et(Vt))throw Error("React.Children.only expected to receive a single React element child.");return Vt}},react_production.Component=St,react_production.Fragment=t,react_production.Profiler=pe,react_production.PureComponent=Pt,react_production.StrictMode=de,react_production.Suspense=st,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Bt,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Vt){return Bt.H.useMemoCache(Vt)}},react_production.cache=function(Vt){return function(){return Vt.apply(null,arguments)}},react_production.cloneElement=function(Vt,en,cn){if(Vt==null)throw Error("The argument must be a React element, but you passed "+Vt+".");var nn=vt({},Vt.props),sn=Vt.key,un=void 0;if(en!=null)for(dn in en.ref!==void 0&&(un=void 0),en.key!==void 0&&(sn=""+en.key),en)!Dt.call(en,dn)||dn==="key"||dn==="__self"||dn==="__source"||dn==="ref"&&en.ref===void 0||(nn[dn]=en[dn]);var dn=arguments.length-2;if(dn===1)nn.children=cn;else if(1<dn){for(var Rn=Array(dn),_n=0;_n<dn;_n++)Rn[_n]=arguments[_n+2];nn.children=Rn}return $t(Vt.type,sn,void 0,void 0,un,nn)},react_production.createContext=function(Vt){return Vt={$$typeof:Ye,_currentValue:Vt,_currentValue2:Vt,_threadCount:0,Provider:null,Consumer:null},Vt.Provider=Vt,Vt.Consumer={$$typeof:Le,_context:Vt},Vt},react_production.createElement=function(Vt,en,cn){var nn,sn={},un=null;if(en!=null)for(nn in en.key!==void 0&&(un=""+en.key),en)Dt.call(en,nn)&&nn!=="key"&&nn!=="__self"&&nn!=="__source"&&(sn[nn]=en[nn]);var dn=arguments.length-2;if(dn===1)sn.children=cn;else if(1<dn){for(var Rn=Array(dn),_n=0;_n<dn;_n++)Rn[_n]=arguments[_n+2];sn.children=Rn}if(Vt&&Vt.defaultProps)for(nn in dn=Vt.defaultProps,dn)sn[nn]===void 0&&(sn[nn]=dn[nn]);return $t(Vt,un,void 0,void 0,null,sn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Vt){return{$$typeof:tt,render:Vt}},react_production.isValidElement=Et,react_production.lazy=function(Vt){return{$$typeof:mt,_payload:{_status:-1,_result:Vt},_init:jt}},react_production.memo=function(Vt,en){return{$$typeof:ht,type:Vt,compare:en===void 0?null:en}},react_production.startTransition=function(Vt){var en=Bt.T,cn={};Bt.T=cn;try{var nn=Vt(),sn=Bt.S;sn!==null&&sn(cn,nn),typeof nn=="object"&&nn!==null&&typeof nn.then=="function"&&nn.then(Kt,Qt)}catch(un){Qt(un)}finally{Bt.T=en}},react_production.unstable_useCacheRefresh=function(){return Bt.H.useCacheRefresh()},react_production.use=function(Vt){return Bt.H.use(Vt)},react_production.useActionState=function(Vt,en,cn){return Bt.H.useActionState(Vt,en,cn)},react_production.useCallback=function(Vt,en){return Bt.H.useCallback(Vt,en)},react_production.useContext=function(Vt){return Bt.H.useContext(Vt)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Vt,en){return Bt.H.useDeferredValue(Vt,en)},react_production.useEffect=function(Vt,en,cn){var nn=Bt.H;if(typeof cn=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nn.useEffect(Vt,en)},react_production.useId=function(){return Bt.H.useId()},react_production.useImperativeHandle=function(Vt,en,cn){return Bt.H.useImperativeHandle(Vt,en,cn)},react_production.useInsertionEffect=function(Vt,en){return Bt.H.useInsertionEffect(Vt,en)},react_production.useLayoutEffect=function(Vt,en){return Bt.H.useLayoutEffect(Vt,en)},react_production.useMemo=function(Vt,en){return Bt.H.useMemo(Vt,en)},react_production.useOptimistic=function(Vt,en){return Bt.H.useOptimistic(Vt,en)},react_production.useReducer=function(Vt,en,cn){return Bt.H.useReducer(Vt,en,cn)},react_production.useRef=function(Vt){return Bt.H.useRef(Vt)},react_production.useState=function(Vt){return Bt.H.useState(Vt)},react_production.useSyncExternalStore=function(Vt,en,cn){return Bt.H.useSyncExternalStore(Vt,en,cn)},react_production.useTransition=function(){return Bt.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(me){function u(Nt,jt){var Qt=Nt.length;Nt.push(jt);e:for(;0<Qt;){var Kt=Qt-1>>>1,Vt=Nt[Kt];if(0<pe(Vt,jt))Nt[Kt]=jt,Nt[Qt]=Vt,Qt=Kt;else break e}}function t(Nt){return Nt.length===0?null:Nt[0]}function de(Nt){if(Nt.length===0)return null;var jt=Nt[0],Qt=Nt.pop();if(Qt!==jt){Nt[0]=Qt;e:for(var Kt=0,Vt=Nt.length,en=Vt>>>1;Kt<en;){var cn=2*(Kt+1)-1,nn=Nt[cn],sn=cn+1,un=Nt[sn];if(0>pe(nn,Qt))sn<Vt&&0>pe(un,nn)?(Nt[Kt]=un,Nt[sn]=Qt,Kt=sn):(Nt[Kt]=nn,Nt[cn]=Qt,Kt=cn);else if(sn<Vt&&0>pe(un,Qt))Nt[Kt]=un,Nt[sn]=Qt,Kt=sn;else break e}}return jt}function pe(Nt,jt){var Qt=Nt.sortIndex-jt.sortIndex;return Qt!==0?Qt:Nt.id-jt.id}if(me.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Le=performance;me.unstable_now=function(){return Le.now()}}else{var Ye=Date,tt=Ye.now();me.unstable_now=function(){return Ye.now()-tt}}var st=[],ht=[],mt=1,gt=null,bt=3,_t=!1,vt=!1,Tt=!1,St=!1,Rt=typeof setTimeout=="function"?setTimeout:null,Pt=typeof clearTimeout=="function"?clearTimeout:null,Ot=typeof setImmediate<"u"?setImmediate:null;function Mt(Nt){for(var jt=t(ht);jt!==null;){if(jt.callback===null)de(ht);else if(jt.startTime<=Nt)de(ht),jt.sortIndex=jt.expirationTime,u(st,jt);else break;jt=t(ht)}}function Bt(Nt){if(Tt=!1,Mt(Nt),!vt)if(t(st)!==null)vt=!0,Dt||(Dt=!0,zt());else{var jt=t(ht);jt!==null&&Gt(Bt,jt.startTime-Nt)}}var Dt=!1,$t=-1,kt=5,Et=-1;function At(){return St?!0:!(me.unstable_now()-Et<kt)}function Ft(){if(St=!1,Dt){var Nt=me.unstable_now();Et=Nt;var jt=!0;try{e:{vt=!1,Tt&&(Tt=!1,Pt($t),$t=-1),_t=!0;var Qt=bt;try{t:{for(Mt(Nt),gt=t(st);gt!==null&&!(gt.expirationTime>Nt&&At());){var Kt=gt.callback;if(typeof Kt=="function"){gt.callback=null,bt=gt.priorityLevel;var Vt=Kt(gt.expirationTime<=Nt);if(Nt=me.unstable_now(),typeof Vt=="function"){gt.callback=Vt,Mt(Nt),jt=!0;break t}gt===t(st)&&de(st),Mt(Nt)}else de(st);gt=t(st)}if(gt!==null)jt=!0;else{var en=t(ht);en!==null&&Gt(Bt,en.startTime-Nt),jt=!1}}break e}finally{gt=null,bt=Qt,_t=!1}jt=void 0}}finally{jt?zt():Dt=!1}}}var zt;if(typeof Ot=="function")zt=function(){Ot(Ft)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,qt=Ut.port2;Ut.port1.onmessage=Ft,zt=function(){qt.postMessage(null)}}else zt=function(){Rt(Ft,0)};function Gt(Nt,jt){$t=Rt(function(){Nt(me.unstable_now())},jt)}me.unstable_IdlePriority=5,me.unstable_ImmediatePriority=1,me.unstable_LowPriority=4,me.unstable_NormalPriority=3,me.unstable_Profiling=null,me.unstable_UserBlockingPriority=2,me.unstable_cancelCallback=function(Nt){Nt.callback=null},me.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<Nt?Math.floor(1e3/Nt):5},me.unstable_getCurrentPriorityLevel=function(){return bt},me.unstable_next=function(Nt){switch(bt){case 1:case 2:case 3:var jt=3;break;default:jt=bt}var Qt=bt;bt=jt;try{return Nt()}finally{bt=Qt}},me.unstable_requestPaint=function(){St=!0},me.unstable_runWithPriority=function(Nt,jt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Qt=bt;bt=Nt;try{return jt()}finally{bt=Qt}},me.unstable_scheduleCallback=function(Nt,jt,Qt){var Kt=me.unstable_now();switch(typeof Qt=="object"&&Qt!==null?(Qt=Qt.delay,Qt=typeof Qt=="number"&&0<Qt?Kt+Qt:Kt):Qt=Kt,Nt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=Qt+Vt,Nt={id:mt++,callback:jt,priorityLevel:Nt,startTime:Qt,expirationTime:Vt,sortIndex:-1},Qt>Kt?(Nt.sortIndex=Qt,u(ht,Nt),t(st)===null&&Nt===t(ht)&&(Tt?(Pt($t),$t=-1):Tt=!0,Gt(Bt,Qt-Kt))):(Nt.sortIndex=Vt,u(st,Nt),vt||_t||(vt=!0,Dt||(Dt=!0,zt()))),Nt},me.unstable_shouldYield=At,me.unstable_wrapCallback=function(Nt){var jt=bt;return function(){var Qt=bt;bt=jt;try{return Nt.apply(this,arguments)}finally{bt=Qt}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var me=requireReact();function u(st){var ht="https://react.dev/errors/"+st;if(1<arguments.length){ht+="?args[]="+encodeURIComponent(arguments[1]);for(var mt=2;mt<arguments.length;mt++)ht+="&args[]="+encodeURIComponent(arguments[mt])}return"Minified React error #"+st+"; visit "+ht+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var de={d:{f:t,r:function(){throw Error(u(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},pe=Symbol.for("react.portal");function Le(st,ht,mt){var gt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:gt==null?null:""+gt,children:st,containerInfo:ht,implementation:mt}}var Ye=me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function tt(st,ht){if(st==="font")return"";if(typeof ht=="string")return ht==="use-credentials"?ht:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,reactDom_production.createPortal=function(st,ht){var mt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ht||ht.nodeType!==1&&ht.nodeType!==9&&ht.nodeType!==11)throw Error(u(299));return Le(st,ht,null,mt)},reactDom_production.flushSync=function(st){var ht=Ye.T,mt=de.p;try{if(Ye.T=null,de.p=2,st)return st()}finally{Ye.T=ht,de.p=mt,de.d.f()}},reactDom_production.preconnect=function(st,ht){typeof st=="string"&&(ht?(ht=ht.crossOrigin,ht=typeof ht=="string"?ht==="use-credentials"?ht:"":void 0):ht=null,de.d.C(st,ht))},reactDom_production.prefetchDNS=function(st){typeof st=="string"&&de.d.D(st)},reactDom_production.preinit=function(st,ht){if(typeof st=="string"&&ht&&typeof ht.as=="string"){var mt=ht.as,gt=tt(mt,ht.crossOrigin),bt=typeof ht.integrity=="string"?ht.integrity:void 0,_t=typeof ht.fetchPriority=="string"?ht.fetchPriority:void 0;mt==="style"?de.d.S(st,typeof ht.precedence=="string"?ht.precedence:void 0,{crossOrigin:gt,integrity:bt,fetchPriority:_t}):mt==="script"&&de.d.X(st,{crossOrigin:gt,integrity:bt,fetchPriority:_t,nonce:typeof ht.nonce=="string"?ht.nonce:void 0})}},reactDom_production.preinitModule=function(st,ht){if(typeof st=="string")if(typeof ht=="object"&&ht!==null){if(ht.as==null||ht.as==="script"){var mt=tt(ht.as,ht.crossOrigin);de.d.M(st,{crossOrigin:mt,integrity:typeof ht.integrity=="string"?ht.integrity:void 0,nonce:typeof ht.nonce=="string"?ht.nonce:void 0})}}else ht==null&&de.d.M(st)},reactDom_production.preload=function(st,ht){if(typeof st=="string"&&typeof ht=="object"&&ht!==null&&typeof ht.as=="string"){var mt=ht.as,gt=tt(mt,ht.crossOrigin);de.d.L(st,mt,{crossOrigin:gt,integrity:typeof ht.integrity=="string"?ht.integrity:void 0,nonce:typeof ht.nonce=="string"?ht.nonce:void 0,type:typeof ht.type=="string"?ht.type:void 0,fetchPriority:typeof ht.fetchPriority=="string"?ht.fetchPriority:void 0,referrerPolicy:typeof ht.referrerPolicy=="string"?ht.referrerPolicy:void 0,imageSrcSet:typeof ht.imageSrcSet=="string"?ht.imageSrcSet:void 0,imageSizes:typeof ht.imageSizes=="string"?ht.imageSizes:void 0,media:typeof ht.media=="string"?ht.media:void 0})}},reactDom_production.preloadModule=function(st,ht){if(typeof st=="string")if(ht){var mt=tt(ht.as,ht.crossOrigin);de.d.m(st,{as:typeof ht.as=="string"&&ht.as!=="script"?ht.as:void 0,crossOrigin:mt,integrity:typeof ht.integrity=="string"?ht.integrity:void 0})}else de.d.m(st)},reactDom_production.requestFormReset=function(st){de.d.r(st)},reactDom_production.unstable_batchedUpdates=function(st,ht){return st(ht)},reactDom_production.useFormState=function(st,ht,mt){return Ye.H.useFormState(st,ht,mt)},reactDom_production.useFormStatus=function(){return Ye.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function me(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(me)}catch(u){console.error(u)}}return me(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var me=requireScheduler(),u=requireReact(),t=requireReactDom();function de(nt){var ot="https://react.dev/errors/"+nt;if(1<arguments.length){ot+="?args[]="+encodeURIComponent(arguments[1]);for(var ft=2;ft<arguments.length;ft++)ot+="&args[]="+encodeURIComponent(arguments[ft])}return"Minified React error #"+nt+"; visit "+ot+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pe(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11)}function Le(nt){var ot=nt,ft=nt;if(nt.alternate)for(;ot.return;)ot=ot.return;else{nt=ot;do ot=nt,(ot.flags&4098)!==0&&(ft=ot.return),nt=ot.return;while(nt)}return ot.tag===3?ft:null}function Ye(nt){if(nt.tag===13){var ot=nt.memoizedState;if(ot===null&&(nt=nt.alternate,nt!==null&&(ot=nt.memoizedState)),ot!==null)return ot.dehydrated}return null}function tt(nt){if(Le(nt)!==nt)throw Error(de(188))}function st(nt){var ot=nt.alternate;if(!ot){if(ot=Le(nt),ot===null)throw Error(de(188));return ot!==nt?null:nt}for(var ft=nt,xt=ot;;){var yt=ft.return;if(yt===null)break;var Ct=yt.alternate;if(Ct===null){if(xt=yt.return,xt!==null){ft=xt;continue}break}if(yt.child===Ct.child){for(Ct=yt.child;Ct;){if(Ct===ft)return tt(yt),nt;if(Ct===xt)return tt(yt),ot;Ct=Ct.sibling}throw Error(de(188))}if(ft.return!==xt.return)ft=yt,xt=Ct;else{for(var It=!1,Lt=yt.child;Lt;){if(Lt===ft){It=!0,ft=yt,xt=Ct;break}if(Lt===xt){It=!0,xt=yt,ft=Ct;break}Lt=Lt.sibling}if(!It){for(Lt=Ct.child;Lt;){if(Lt===ft){It=!0,ft=Ct,xt=yt;break}if(Lt===xt){It=!0,xt=Ct,ft=yt;break}Lt=Lt.sibling}if(!It)throw Error(de(189))}}if(ft.alternate!==xt)throw Error(de(190))}if(ft.tag!==3)throw Error(de(188));return ft.stateNode.current===ft?nt:ot}function ht(nt){var ot=nt.tag;if(ot===5||ot===26||ot===27||ot===6)return nt;for(nt=nt.child;nt!==null;){if(ot=ht(nt),ot!==null)return ot;nt=nt.sibling}return null}var mt=Object.assign,gt=Symbol.for("react.element"),bt=Symbol.for("react.transitional.element"),_t=Symbol.for("react.portal"),vt=Symbol.for("react.fragment"),Tt=Symbol.for("react.strict_mode"),St=Symbol.for("react.profiler"),Rt=Symbol.for("react.provider"),Pt=Symbol.for("react.consumer"),Ot=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),Bt=Symbol.for("react.suspense"),Dt=Symbol.for("react.suspense_list"),$t=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Et=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),Ft=Symbol.iterator;function zt(nt){return nt===null||typeof nt!="object"?null:(nt=Ft&&nt[Ft]||nt["@@iterator"],typeof nt=="function"?nt:null)}var Ut=Symbol.for("react.client.reference");function qt(nt){if(nt==null)return null;if(typeof nt=="function")return nt.$$typeof===Ut?null:nt.displayName||nt.name||null;if(typeof nt=="string")return nt;switch(nt){case vt:return"Fragment";case St:return"Profiler";case Tt:return"StrictMode";case Bt:return"Suspense";case Dt:return"SuspenseList";case Et:return"Activity"}if(typeof nt=="object")switch(nt.$$typeof){case _t:return"Portal";case Ot:return(nt.displayName||"Context")+".Provider";case Pt:return(nt._context.displayName||"Context")+".Consumer";case Mt:var ot=nt.render;return nt=nt.displayName,nt||(nt=ot.displayName||ot.name||"",nt=nt!==""?"ForwardRef("+nt+")":"ForwardRef"),nt;case $t:return ot=nt.displayName||null,ot!==null?ot:qt(nt.type)||"Memo";case kt:ot=nt._payload,nt=nt._init;try{return qt(nt(ot))}catch{}}return null}var Gt=Array.isArray,Nt=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jt=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qt={pending:!1,data:null,method:null,action:null},Kt=[],Vt=-1;function en(nt){return{current:nt}}function cn(nt){0>Vt||(nt.current=Kt[Vt],Kt[Vt]=null,Vt--)}function nn(nt,ot){Vt++,Kt[Vt]=nt.current,nt.current=ot}var sn=en(null),un=en(null),dn=en(null),Rn=en(null);function _n(nt,ot){switch(nn(dn,ot),nn(un,nt),nn(sn,null),ot.nodeType){case 9:case 11:nt=(nt=ot.documentElement)&&(nt=nt.namespaceURI)?Uf(nt):0;break;default:if(nt=ot.tagName,ot=ot.namespaceURI)ot=Uf(ot),nt=zf(ot,nt);else switch(nt){case"svg":nt=1;break;case"math":nt=2;break;default:nt=0}}cn(sn),nn(sn,nt)}function In(){cn(sn),cn(un),cn(dn)}function yn(nt){nt.memoizedState!==null&&nn(Rn,nt);var ot=sn.current,ft=zf(ot,nt.type);ot!==ft&&(nn(un,nt),nn(sn,ft))}function vn(nt){un.current===nt&&(cn(sn),cn(un)),Rn.current===nt&&(cn(Rn),jr._currentValue=Qt)}var wn=Object.prototype.hasOwnProperty,Jn=me.unstable_scheduleCallback,Sn=me.unstable_cancelCallback,Hn=me.unstable_shouldYield,ki=me.unstable_requestPaint,Wn=me.unstable_now,ri=me.unstable_getCurrentPriorityLevel,ji=me.unstable_ImmediatePriority,gi=me.unstable_UserBlockingPriority,Gn=me.unstable_NormalPriority,pn=me.unstable_LowPriority,is=me.unstable_IdlePriority,pi=me.log,_s=me.unstable_setDisableYieldValue,qi=null,ii=null;function wi(nt){if(typeof pi=="function"&&_s(nt),ii&&typeof ii.setStrictMode=="function")try{ii.setStrictMode(qi,nt)}catch{}}var ei=Math.clz32?Math.clz32:vs,ss=Math.log,Un=Math.LN2;function vs(nt){return nt>>>=0,nt===0?32:31-(ss(nt)/Un|0)|0}var Xi=256,Gs=4194304;function mn(nt){var ot=nt&42;if(ot!==0)return ot;switch(nt&-nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nt&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return nt&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return nt}}function Bn(nt,ot,ft){var xt=nt.pendingLanes;if(xt===0)return 0;var yt=0,Ct=nt.suspendedLanes,It=nt.pingedLanes;nt=nt.warmLanes;var Lt=xt&134217727;return Lt!==0?(xt=Lt&~Ct,xt!==0?yt=mn(xt):(It&=Lt,It!==0?yt=mn(It):ft||(ft=Lt&~nt,ft!==0&&(yt=mn(ft))))):(Lt=xt&~Ct,Lt!==0?yt=mn(Lt):It!==0?yt=mn(It):ft||(ft=xt&~nt,ft!==0&&(yt=mn(ft)))),yt===0?0:ot!==0&&ot!==yt&&(ot&Ct)===0&&(Ct=yt&-yt,ft=ot&-ot,Ct>=ft||Ct===32&&(ft&4194048)!==0)?ot:yt}function qn(nt,ot){return(nt.pendingLanes&~(nt.suspendedLanes&~nt.pingedLanes)&ot)===0}function Cs(nt,ot){switch(nt){case 1:case 2:case 4:case 8:case 64:return ot+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ot+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var nt=Xi;return Xi<<=1,(Xi&4194048)===0&&(Xi=256),nt}function Eu(){var nt=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),nt}function hl(nt){for(var ot=[],ft=0;31>ft;ft++)ot.push(nt);return ot}function tr(nt,ot){nt.pendingLanes|=ot,ot!==268435456&&(nt.suspendedLanes=0,nt.pingedLanes=0,nt.warmLanes=0)}function wm(nt,ot,ft,xt,yt,Ct){var It=nt.pendingLanes;nt.pendingLanes=ft,nt.suspendedLanes=0,nt.pingedLanes=0,nt.warmLanes=0,nt.expiredLanes&=ft,nt.entangledLanes&=ft,nt.errorRecoveryDisabledLanes&=ft,nt.shellSuspendCounter=0;var Lt=nt.entanglements,Ht=nt.expirationTimes,Xt=nt.hiddenUpdates;for(ft=It&~ft;0<ft;){var rn=31-ei(ft),ln=1<<rn;Lt[rn]=0,Ht[rn]=-1;var Jt=Xt[rn];if(Jt!==null)for(Xt[rn]=null,rn=0;rn<Jt.length;rn++){var tn=Jt[rn];tn!==null&&(tn.lane&=-536870913)}ft&=~ln}xt!==0&&Tu(nt,xt,0),Ct!==0&&yt===0&&nt.tag!==0&&(nt.suspendedLanes|=Ct&~(It&~ot))}function Tu(nt,ot,ft){nt.pendingLanes|=ot,nt.suspendedLanes&=~ot;var xt=31-ei(ot);nt.entangledLanes|=ot,nt.entanglements[xt]=nt.entanglements[xt]|1073741824|ft&4194090}function ku(nt,ot){var ft=nt.entangledLanes|=ot;for(nt=nt.entanglements;ft;){var xt=31-ei(ft),yt=1<<xt;yt&ot|nt[xt]&ot&&(nt[xt]|=ot),ft&=~yt}}function fl(nt){switch(nt){case 2:nt=1;break;case 8:nt=4;break;case 32:nt=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:nt=128;break;case 268435456:nt=134217728;break;default:nt=0}return nt}function ml(nt){return nt&=-nt,2<nt?8<nt?(nt&134217727)!==0?32:268435456:8:2}function Su(){var nt=jt.p;return nt!==0?nt:(nt=window.event,nt===void 0?32:am(nt.type))}function ym(nt,ot){var ft=jt.p;try{return jt.p=nt,ot()}finally{jt.p=ft}}var Es=Math.random().toString(36).slice(2),xi="__reactFiber$"+Es,_i="__reactProps$"+Es,fo="__reactContainer$"+Es,gl="__reactEvents$"+Es,_m="__reactListeners$"+Es,vm="__reactHandles$"+Es,Au="__reactResources$"+Es,nr="__reactMarker$"+Es;function pl(nt){delete nt[xi],delete nt[_i],delete nt[gl],delete nt[_m],delete nt[vm]}function mo(nt){var ot=nt[xi];if(ot)return ot;for(var ft=nt.parentNode;ft;){if(ot=ft[fo]||ft[xi]){if(ft=ot.alternate,ot.child!==null||ft!==null&&ft.child!==null)for(nt=qf(nt);nt!==null;){if(ft=nt[xi])return ft;nt=qf(nt)}return ot}nt=ft,ft=nt.parentNode}return null}function go(nt){if(nt=nt[xi]||nt[fo]){var ot=nt.tag;if(ot===5||ot===6||ot===13||ot===26||ot===27||ot===3)return nt}return null}function ir(nt){var ot=nt.tag;if(ot===5||ot===26||ot===27||ot===6)return nt.stateNode;throw Error(de(33))}function po(nt){var ot=nt[Au];return ot||(ot=nt[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),ot}function ai(nt){nt[nr]=!0}var Ru=new Set,Iu={};function Zs(nt,ot){xo(nt,ot),xo(nt+"Capture",ot)}function xo(nt,ot){for(Iu[nt]=ot,nt=0;nt<ot.length;nt++)Ru.add(ot[nt])}var Cm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},Ou={};function Em(nt){return wn.call(Ou,nt)?!0:wn.call(Pu,nt)?!1:Cm.test(nt)?Ou[nt]=!0:(Pu[nt]=!0,!1)}function Xr(nt,ot,ft){if(Em(ot))if(ft===null)nt.removeAttribute(ot);else{switch(typeof ft){case"undefined":case"function":case"symbol":nt.removeAttribute(ot);return;case"boolean":var xt=ot.toLowerCase().slice(0,5);if(xt!=="data-"&&xt!=="aria-"){nt.removeAttribute(ot);return}}nt.setAttribute(ot,""+ft)}}function Qr(nt,ot,ft){if(ft===null)nt.removeAttribute(ot);else{switch(typeof ft){case"undefined":case"function":case"symbol":case"boolean":nt.removeAttribute(ot);return}nt.setAttribute(ot,""+ft)}}function os(nt,ot,ft,xt){if(xt===null)nt.removeAttribute(ft);else{switch(typeof xt){case"undefined":case"function":case"symbol":case"boolean":nt.removeAttribute(ft);return}nt.setAttributeNS(ot,ft,""+xt)}}var xl,Bu;function bo(nt){if(xl===void 0)try{throw Error()}catch(ft){var ot=ft.stack.trim().match(/\n( *(at )?)/);xl=ot&&ot[1]||"",Bu=-1<ft.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ft.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xl+nt+Bu}var bl=!1;function wl(nt,ot){if(!nt||bl)return"";bl=!0;var ft=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var xt={DetermineComponentFrameRoot:function(){try{if(ot){var ln=function(){throw Error()};if(Object.defineProperty(ln.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ln,[])}catch(tn){var Jt=tn}Reflect.construct(nt,[],ln)}else{try{ln.call()}catch(tn){Jt=tn}nt.call(ln.prototype)}}else{try{throw Error()}catch(tn){Jt=tn}(ln=nt())&&typeof ln.catch=="function"&&ln.catch(function(){})}}catch(tn){if(tn&&Jt&&typeof tn.stack=="string")return[tn.stack,Jt.stack]}return[null,null]}};xt.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var yt=Object.getOwnPropertyDescriptor(xt.DetermineComponentFrameRoot,"name");yt&&yt.configurable&&Object.defineProperty(xt.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ct=xt.DetermineComponentFrameRoot(),It=Ct[0],Lt=Ct[1];if(It&&Lt){var Ht=It.split(`
`),Xt=Lt.split(`
`);for(yt=xt=0;xt<Ht.length&&!Ht[xt].includes("DetermineComponentFrameRoot");)xt++;for(;yt<Xt.length&&!Xt[yt].includes("DetermineComponentFrameRoot");)yt++;if(xt===Ht.length||yt===Xt.length)for(xt=Ht.length-1,yt=Xt.length-1;1<=xt&&0<=yt&&Ht[xt]!==Xt[yt];)yt--;for(;1<=xt&&0<=yt;xt--,yt--)if(Ht[xt]!==Xt[yt]){if(xt!==1||yt!==1)do if(xt--,yt--,0>yt||Ht[xt]!==Xt[yt]){var rn=`
`+Ht[xt].replace(" at new "," at ");return nt.displayName&&rn.includes("<anonymous>")&&(rn=rn.replace("<anonymous>",nt.displayName)),rn}while(1<=xt&&0<=yt);break}}}finally{bl=!1,Error.prepareStackTrace=ft}return(ft=nt?nt.displayName||nt.name:"")?bo(ft):""}function Tm(nt){switch(nt.tag){case 26:case 27:case 5:return bo(nt.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 15:return wl(nt.type,!1);case 11:return wl(nt.type.render,!1);case 1:return wl(nt.type,!0);case 31:return bo("Activity");default:return""}}function Mu(nt){try{var ot="";do ot+=Tm(nt),nt=nt.return;while(nt);return ot}catch(ft){return`
Error generating stack: `+ft.message+`
`+ft.stack}}function Li(nt){switch(typeof nt){case"bigint":case"boolean":case"number":case"string":case"undefined":return nt;case"object":return nt;default:return""}}function Lu(nt){var ot=nt.type;return(nt=nt.nodeName)&&nt.toLowerCase()==="input"&&(ot==="checkbox"||ot==="radio")}function km(nt){var ot=Lu(nt)?"checked":"value",ft=Object.getOwnPropertyDescriptor(nt.constructor.prototype,ot),xt=""+nt[ot];if(!nt.hasOwnProperty(ot)&&typeof ft<"u"&&typeof ft.get=="function"&&typeof ft.set=="function"){var yt=ft.get,Ct=ft.set;return Object.defineProperty(nt,ot,{configurable:!0,get:function(){return yt.call(this)},set:function(It){xt=""+It,Ct.call(this,It)}}),Object.defineProperty(nt,ot,{enumerable:ft.enumerable}),{getValue:function(){return xt},setValue:function(It){xt=""+It},stopTracking:function(){nt._valueTracker=null,delete nt[ot]}}}}function Jr(nt){nt._valueTracker||(nt._valueTracker=km(nt))}function Vu(nt){if(!nt)return!1;var ot=nt._valueTracker;if(!ot)return!0;var ft=ot.getValue(),xt="";return nt&&(xt=Lu(nt)?nt.checked?"true":"false":nt.value),nt=xt,nt!==ft?(ot.setValue(nt),!0):!1}function ea(nt){if(nt=nt||(typeof document<"u"?document:void 0),typeof nt>"u")return null;try{return nt.activeElement||nt.body}catch{return nt.body}}var Sm=/[\n"\\]/g;function Vi(nt){return nt.replace(Sm,function(ot){return"\\"+ot.charCodeAt(0).toString(16)+" "})}function yl(nt,ot,ft,xt,yt,Ct,It,Lt){nt.name="",It!=null&&typeof It!="function"&&typeof It!="symbol"&&typeof It!="boolean"?nt.type=It:nt.removeAttribute("type"),ot!=null?It==="number"?(ot===0&&nt.value===""||nt.value!=ot)&&(nt.value=""+Li(ot)):nt.value!==""+Li(ot)&&(nt.value=""+Li(ot)):It!=="submit"&&It!=="reset"||nt.removeAttribute("value"),ot!=null?_l(nt,It,Li(ot)):ft!=null?_l(nt,It,Li(ft)):xt!=null&&nt.removeAttribute("value"),yt==null&&Ct!=null&&(nt.defaultChecked=!!Ct),yt!=null&&(nt.checked=yt&&typeof yt!="function"&&typeof yt!="symbol"),Lt!=null&&typeof Lt!="function"&&typeof Lt!="symbol"&&typeof Lt!="boolean"?nt.name=""+Li(Lt):nt.removeAttribute("name")}function Nu(nt,ot,ft,xt,yt,Ct,It,Lt){if(Ct!=null&&typeof Ct!="function"&&typeof Ct!="symbol"&&typeof Ct!="boolean"&&(nt.type=Ct),ot!=null||ft!=null){if(!(Ct!=="submit"&&Ct!=="reset"||ot!=null))return;ft=ft!=null?""+Li(ft):"",ot=ot!=null?""+Li(ot):ft,Lt||ot===nt.value||(nt.value=ot),nt.defaultValue=ot}xt=xt??yt,xt=typeof xt!="function"&&typeof xt!="symbol"&&!!xt,nt.checked=Lt?nt.checked:!!xt,nt.defaultChecked=!!xt,It!=null&&typeof It!="function"&&typeof It!="symbol"&&typeof It!="boolean"&&(nt.name=It)}function _l(nt,ot,ft){ot==="number"&&ea(nt.ownerDocument)===nt||nt.defaultValue===""+ft||(nt.defaultValue=""+ft)}function wo(nt,ot,ft,xt){if(nt=nt.options,ot){ot={};for(var yt=0;yt<ft.length;yt++)ot["$"+ft[yt]]=!0;for(ft=0;ft<nt.length;ft++)yt=ot.hasOwnProperty("$"+nt[ft].value),nt[ft].selected!==yt&&(nt[ft].selected=yt),yt&&xt&&(nt[ft].defaultSelected=!0)}else{for(ft=""+Li(ft),ot=null,yt=0;yt<nt.length;yt++){if(nt[yt].value===ft){nt[yt].selected=!0,xt&&(nt[yt].defaultSelected=!0);return}ot!==null||nt[yt].disabled||(ot=nt[yt])}ot!==null&&(ot.selected=!0)}}function Du(nt,ot,ft){if(ot!=null&&(ot=""+Li(ot),ot!==nt.value&&(nt.value=ot),ft==null)){nt.defaultValue!==ot&&(nt.defaultValue=ot);return}nt.defaultValue=ft!=null?""+Li(ft):""}function $u(nt,ot,ft,xt){if(ot==null){if(xt!=null){if(ft!=null)throw Error(de(92));if(Gt(xt)){if(1<xt.length)throw Error(de(93));xt=xt[0]}ft=xt}ft==null&&(ft=""),ot=ft}ft=Li(ot),nt.defaultValue=ft,xt=nt.textContent,xt===ft&&xt!==""&&xt!==null&&(nt.value=xt)}function yo(nt,ot){if(ot){var ft=nt.firstChild;if(ft&&ft===nt.lastChild&&ft.nodeType===3){ft.nodeValue=ot;return}}nt.textContent=ot}var Am=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fu(nt,ot,ft){var xt=ot.indexOf("--")===0;ft==null||typeof ft=="boolean"||ft===""?xt?nt.setProperty(ot,""):ot==="float"?nt.cssFloat="":nt[ot]="":xt?nt.setProperty(ot,ft):typeof ft!="number"||ft===0||Am.has(ot)?ot==="float"?nt.cssFloat=ft:nt[ot]=(""+ft).trim():nt[ot]=ft+"px"}function Uu(nt,ot,ft){if(ot!=null&&typeof ot!="object")throw Error(de(62));if(nt=nt.style,ft!=null){for(var xt in ft)!ft.hasOwnProperty(xt)||ot!=null&&ot.hasOwnProperty(xt)||(xt.indexOf("--")===0?nt.setProperty(xt,""):xt==="float"?nt.cssFloat="":nt[xt]="");for(var yt in ot)xt=ot[yt],ot.hasOwnProperty(yt)&&ft[yt]!==xt&&Fu(nt,yt,xt)}else for(var Ct in ot)ot.hasOwnProperty(Ct)&&Fu(nt,Ct,ot[Ct])}function vl(nt){if(nt.indexOf("-")===-1)return!1;switch(nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Im=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(nt){return Im.test(""+nt)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":nt}var Cl=null;function El(nt){return nt=nt.target||nt.srcElement||window,nt.correspondingUseElement&&(nt=nt.correspondingUseElement),nt.nodeType===3?nt.parentNode:nt}var _o=null,vo=null;function zu(nt){var ot=go(nt);if(ot&&(nt=ot.stateNode)){var ft=nt[_i]||null;e:switch(nt=ot.stateNode,ot.type){case"input":if(yl(nt,ft.value,ft.defaultValue,ft.defaultValue,ft.checked,ft.defaultChecked,ft.type,ft.name),ot=ft.name,ft.type==="radio"&&ot!=null){for(ft=nt;ft.parentNode;)ft=ft.parentNode;for(ft=ft.querySelectorAll('input[name="'+Vi(""+ot)+'"][type="radio"]'),ot=0;ot<ft.length;ot++){var xt=ft[ot];if(xt!==nt&&xt.form===nt.form){var yt=xt[_i]||null;if(!yt)throw Error(de(90));yl(xt,yt.value,yt.defaultValue,yt.defaultValue,yt.checked,yt.defaultChecked,yt.type,yt.name)}}for(ot=0;ot<ft.length;ot++)xt=ft[ot],xt.form===nt.form&&Vu(xt)}break e;case"textarea":Du(nt,ft.value,ft.defaultValue);break e;case"select":ot=ft.value,ot!=null&&wo(nt,!!ft.multiple,ot,!1)}}}var Tl=!1;function Hu(nt,ot,ft){if(Tl)return nt(ot,ft);Tl=!0;try{var xt=nt(ot);return xt}finally{if(Tl=!1,(_o!==null||vo!==null)&&(Fa(),_o&&(ot=_o,nt=vo,vo=_o=null,zu(ot),nt)))for(ot=0;ot<nt.length;ot++)zu(nt[ot])}}function sr(nt,ot){var ft=nt.stateNode;if(ft===null)return null;var xt=ft[_i]||null;if(xt===null)return null;ft=xt[ot];e:switch(ot){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(xt=!xt.disabled)||(nt=nt.type,xt=!(nt==="button"||nt==="input"||nt==="select"||nt==="textarea")),nt=!xt;break e;default:nt=!1}if(nt)return null;if(ft&&typeof ft!="function")throw Error(de(231,ot,typeof ft));return ft}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=!1;if(rs)try{var or={};Object.defineProperty(or,"passive",{get:function(){kl=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{kl=!1}var Ts=null,Sl=null,na=null;function Wu(){if(na)return na;var nt,ot=Sl,ft=ot.length,xt,yt="value"in Ts?Ts.value:Ts.textContent,Ct=yt.length;for(nt=0;nt<ft&&ot[nt]===yt[nt];nt++);var It=ft-nt;for(xt=1;xt<=It&&ot[ft-xt]===yt[Ct-xt];xt++);return na=yt.slice(nt,1<xt?1-xt:void 0)}function ia(nt){var ot=nt.keyCode;return"charCode"in nt?(nt=nt.charCode,nt===0&&ot===13&&(nt=13)):nt=ot,nt===10&&(nt=13),32<=nt||nt===13?nt:0}function sa(){return!0}function ju(){return!1}function vi(nt){function ot(ft,xt,yt,Ct,It){this._reactName=ft,this._targetInst=yt,this.type=xt,this.nativeEvent=Ct,this.target=It,this.currentTarget=null;for(var Lt in nt)nt.hasOwnProperty(Lt)&&(ft=nt[Lt],this[Lt]=ft?ft(Ct):Ct[Lt]);return this.isDefaultPrevented=(Ct.defaultPrevented!=null?Ct.defaultPrevented:Ct.returnValue===!1)?sa:ju,this.isPropagationStopped=ju,this}return mt(ot.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ft=this.nativeEvent;ft&&(ft.preventDefault?ft.preventDefault():typeof ft.returnValue!="unknown"&&(ft.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var ft=this.nativeEvent;ft&&(ft.stopPropagation?ft.stopPropagation():typeof ft.cancelBubble!="unknown"&&(ft.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),ot}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(nt){return nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=vi(Ys),rr=mt({},Ys,{view:0,detail:0}),Pm=vi(rr),Al,Rl,ar,ra=mt({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(nt){return nt.relatedTarget===void 0?nt.fromElement===nt.srcElement?nt.toElement:nt.fromElement:nt.relatedTarget},movementX:function(nt){return"movementX"in nt?nt.movementX:(nt!==ar&&(ar&&nt.type==="mousemove"?(Al=nt.screenX-ar.screenX,Rl=nt.screenY-ar.screenY):Rl=Al=0,ar=nt),Al)},movementY:function(nt){return"movementY"in nt?nt.movementY:Rl}}),qu=vi(ra),Om=mt({},ra,{dataTransfer:0}),Bm=vi(Om),Mm=mt({},rr,{relatedTarget:0}),Il=vi(Mm),Lm=mt({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Vm=vi(Lm),Nm=mt({},Ys,{clipboardData:function(nt){return"clipboardData"in nt?nt.clipboardData:window.clipboardData}}),Dm=vi(Nm),$m=mt({},Ys,{data:0}),Ku=vi($m),Fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hm(nt){var ot=this.nativeEvent;return ot.getModifierState?ot.getModifierState(nt):(nt=zm[nt])?!!ot[nt]:!1}function Pl(){return Hm}var Wm=mt({},rr,{key:function(nt){if(nt.key){var ot=Fm[nt.key]||nt.key;if(ot!=="Unidentified")return ot}return nt.type==="keypress"?(nt=ia(nt),nt===13?"Enter":String.fromCharCode(nt)):nt.type==="keydown"||nt.type==="keyup"?Um[nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(nt){return nt.type==="keypress"?ia(nt):0},keyCode:function(nt){return nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0},which:function(nt){return nt.type==="keypress"?ia(nt):nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0}}),jm=vi(Wm),qm=mt({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=vi(qm),Km=mt({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),Gm=vi(Km),Zm=mt({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ym=vi(Zm),Xm=mt({},ra,{deltaX:function(nt){return"deltaX"in nt?nt.deltaX:"wheelDeltaX"in nt?-nt.wheelDeltaX:0},deltaY:function(nt){return"deltaY"in nt?nt.deltaY:"wheelDeltaY"in nt?-nt.wheelDeltaY:"wheelDelta"in nt?-nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Qm=vi(Xm),Jm=mt({},Ys,{newState:0,oldState:0}),eg=vi(Jm),tg=[9,13,27,32],Ol=rs&&"CompositionEvent"in window,lr=null;rs&&"documentMode"in document&&(lr=document.documentMode);var ng=rs&&"TextEvent"in window&&!lr,Zu=rs&&(!Ol||lr&&8<lr&&11>=lr),Yu=" ",Xu=!1;function Qu(nt,ot){switch(nt){case"keyup":return tg.indexOf(ot.keyCode)!==-1;case"keydown":return ot.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(nt){return nt=nt.detail,typeof nt=="object"&&"data"in nt?nt.data:null}var Co=!1;function ig(nt,ot){switch(nt){case"compositionend":return Ju(ot);case"keypress":return ot.which!==32?null:(Xu=!0,Yu);case"textInput":return nt=ot.data,nt===Yu&&Xu?null:nt;default:return null}}function sg(nt,ot){if(Co)return nt==="compositionend"||!Ol&&Qu(nt,ot)?(nt=Wu(),na=Sl=Ts=null,Co=!1,nt):null;switch(nt){case"paste":return null;case"keypress":if(!(ot.ctrlKey||ot.altKey||ot.metaKey)||ot.ctrlKey&&ot.altKey){if(ot.char&&1<ot.char.length)return ot.char;if(ot.which)return String.fromCharCode(ot.which)}return null;case"compositionend":return Zu&&ot.locale!=="ko"?null:ot.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(nt){var ot=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return ot==="input"?!!og[nt.type]:ot==="textarea"}function td(nt,ot,ft,xt){_o?vo?vo.push(xt):vo=[xt]:_o=xt,ot=qa(ot,"onChange"),0<ot.length&&(ft=new oa("onChange","change",null,ft,xt),nt.push({event:ft,listeners:ot}))}var cr=null,ur=null;function rg(nt){Vf(nt,0)}function aa(nt){var ot=ir(nt);if(Vu(ot))return nt}function nd(nt,ot){if(nt==="change")return ot}var id=!1;if(rs){var Bl;if(rs){var Ml="oninput"in document;if(!Ml){var sd=document.createElement("div");sd.setAttribute("oninput","return;"),Ml=typeof sd.oninput=="function"}Bl=Ml}else Bl=!1;id=Bl&&(!document.documentMode||9<document.documentMode)}function od(){cr&&(cr.detachEvent("onpropertychange",rd),ur=cr=null)}function rd(nt){if(nt.propertyName==="value"&&aa(ur)){var ot=[];td(ot,ur,nt,El(nt)),Hu(rg,ot)}}function ag(nt,ot,ft){nt==="focusin"?(od(),cr=ot,ur=ft,cr.attachEvent("onpropertychange",rd)):nt==="focusout"&&od()}function lg(nt){if(nt==="selectionchange"||nt==="keyup"||nt==="keydown")return aa(ur)}function cg(nt,ot){if(nt==="click")return aa(ot)}function ug(nt,ot){if(nt==="input"||nt==="change")return aa(ot)}function dg(nt,ot){return nt===ot&&(nt!==0||1/nt===1/ot)||nt!==nt&&ot!==ot}var Si=typeof Object.is=="function"?Object.is:dg;function dr(nt,ot){if(Si(nt,ot))return!0;if(typeof nt!="object"||nt===null||typeof ot!="object"||ot===null)return!1;var ft=Object.keys(nt),xt=Object.keys(ot);if(ft.length!==xt.length)return!1;for(xt=0;xt<ft.length;xt++){var yt=ft[xt];if(!wn.call(ot,yt)||!Si(nt[yt],ot[yt]))return!1}return!0}function ad(nt){for(;nt&&nt.firstChild;)nt=nt.firstChild;return nt}function ld(nt,ot){var ft=ad(nt);nt=0;for(var xt;ft;){if(ft.nodeType===3){if(xt=nt+ft.textContent.length,nt<=ot&&xt>=ot)return{node:ft,offset:ot-nt};nt=xt}e:{for(;ft;){if(ft.nextSibling){ft=ft.nextSibling;break e}ft=ft.parentNode}ft=void 0}ft=ad(ft)}}function cd(nt,ot){return nt&&ot?nt===ot?!0:nt&&nt.nodeType===3?!1:ot&&ot.nodeType===3?cd(nt,ot.parentNode):"contains"in nt?nt.contains(ot):nt.compareDocumentPosition?!!(nt.compareDocumentPosition(ot)&16):!1:!1}function ud(nt){nt=nt!=null&&nt.ownerDocument!=null&&nt.ownerDocument.defaultView!=null?nt.ownerDocument.defaultView:window;for(var ot=ea(nt.document);ot instanceof nt.HTMLIFrameElement;){try{var ft=typeof ot.contentWindow.location.href=="string"}catch{ft=!1}if(ft)nt=ot.contentWindow;else break;ot=ea(nt.document)}return ot}function Ll(nt){var ot=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return ot&&(ot==="input"&&(nt.type==="text"||nt.type==="search"||nt.type==="tel"||nt.type==="url"||nt.type==="password")||ot==="textarea"||nt.contentEditable==="true")}var hg=rs&&"documentMode"in document&&11>=document.documentMode,Eo=null,Vl=null,hr=null,Nl=!1;function dd(nt,ot,ft){var xt=ft.window===ft?ft.document:ft.nodeType===9?ft:ft.ownerDocument;Nl||Eo==null||Eo!==ea(xt)||(xt=Eo,"selectionStart"in xt&&Ll(xt)?xt={start:xt.selectionStart,end:xt.selectionEnd}:(xt=(xt.ownerDocument&&xt.ownerDocument.defaultView||window).getSelection(),xt={anchorNode:xt.anchorNode,anchorOffset:xt.anchorOffset,focusNode:xt.focusNode,focusOffset:xt.focusOffset}),hr&&dr(hr,xt)||(hr=xt,xt=qa(Vl,"onSelect"),0<xt.length&&(ot=new oa("onSelect","select",null,ot,ft),nt.push({event:ot,listeners:xt}),ot.target=Eo)))}function Xs(nt,ot){var ft={};return ft[nt.toLowerCase()]=ot.toLowerCase(),ft["Webkit"+nt]="webkit"+ot,ft["Moz"+nt]="moz"+ot,ft}var To={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Dl={},hd={};rs&&(hd=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Qs(nt){if(Dl[nt])return Dl[nt];if(!To[nt])return nt;var ot=To[nt],ft;for(ft in ot)if(ot.hasOwnProperty(ft)&&ft in hd)return Dl[nt]=ot[ft];return nt}var fd=Qs("animationend"),md=Qs("animationiteration"),gd=Qs("animationstart"),fg=Qs("transitionrun"),mg=Qs("transitionstart"),gg=Qs("transitioncancel"),pd=Qs("transitionend"),xd=new Map,$l="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$l.push("scrollEnd");function Ki(nt,ot){xd.set(nt,ot),Zs(ot,[nt])}var bd=new WeakMap;function Ni(nt,ot){if(typeof nt=="object"&&nt!==null){var ft=bd.get(nt);return ft!==void 0?ft:(ot={value:nt,source:ot,stack:Mu(ot)},bd.set(nt,ot),ot)}return{value:nt,source:ot,stack:Mu(ot)}}var Di=[],ko=0,Fl=0;function la(){for(var nt=ko,ot=Fl=ko=0;ot<nt;){var ft=Di[ot];Di[ot++]=null;var xt=Di[ot];Di[ot++]=null;var yt=Di[ot];Di[ot++]=null;var Ct=Di[ot];if(Di[ot++]=null,xt!==null&&yt!==null){var It=xt.pending;It===null?yt.next=yt:(yt.next=It.next,It.next=yt),xt.pending=yt}Ct!==0&&wd(ft,yt,Ct)}}function ca(nt,ot,ft,xt){Di[ko++]=nt,Di[ko++]=ot,Di[ko++]=ft,Di[ko++]=xt,Fl|=xt,nt.lanes|=xt,nt=nt.alternate,nt!==null&&(nt.lanes|=xt)}function Ul(nt,ot,ft,xt){return ca(nt,ot,ft,xt),ua(nt)}function So(nt,ot){return ca(nt,null,null,ot),ua(nt)}function wd(nt,ot,ft){nt.lanes|=ft;var xt=nt.alternate;xt!==null&&(xt.lanes|=ft);for(var yt=!1,Ct=nt.return;Ct!==null;)Ct.childLanes|=ft,xt=Ct.alternate,xt!==null&&(xt.childLanes|=ft),Ct.tag===22&&(nt=Ct.stateNode,nt===null||nt._visibility&1||(yt=!0)),nt=Ct,Ct=Ct.return;return nt.tag===3?(Ct=nt.stateNode,yt&&ot!==null&&(yt=31-ei(ft),nt=Ct.hiddenUpdates,xt=nt[yt],xt===null?nt[yt]=[ot]:xt.push(ot),ot.lane=ft|536870912),Ct):null}function ua(nt){if(50<Nr)throw Nr=0,Kc=null,Error(de(185));for(var ot=nt.return;ot!==null;)nt=ot,ot=nt.return;return nt.tag===3?nt.stateNode:null}var Ao={};function pg(nt,ot,ft,xt){this.tag=nt,this.key=ft,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=ot,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(nt,ot,ft,xt){return new pg(nt,ot,ft,xt)}function zl(nt){return nt=nt.prototype,!(!nt||!nt.isReactComponent)}function as(nt,ot){var ft=nt.alternate;return ft===null?(ft=Ai(nt.tag,ot,nt.key,nt.mode),ft.elementType=nt.elementType,ft.type=nt.type,ft.stateNode=nt.stateNode,ft.alternate=nt,nt.alternate=ft):(ft.pendingProps=ot,ft.type=nt.type,ft.flags=0,ft.subtreeFlags=0,ft.deletions=null),ft.flags=nt.flags&65011712,ft.childLanes=nt.childLanes,ft.lanes=nt.lanes,ft.child=nt.child,ft.memoizedProps=nt.memoizedProps,ft.memoizedState=nt.memoizedState,ft.updateQueue=nt.updateQueue,ot=nt.dependencies,ft.dependencies=ot===null?null:{lanes:ot.lanes,firstContext:ot.firstContext},ft.sibling=nt.sibling,ft.index=nt.index,ft.ref=nt.ref,ft.refCleanup=nt.refCleanup,ft}function yd(nt,ot){nt.flags&=65011714;var ft=nt.alternate;return ft===null?(nt.childLanes=0,nt.lanes=ot,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=ft.childLanes,nt.lanes=ft.lanes,nt.child=ft.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=ft.memoizedProps,nt.memoizedState=ft.memoizedState,nt.updateQueue=ft.updateQueue,nt.type=ft.type,ot=ft.dependencies,nt.dependencies=ot===null?null:{lanes:ot.lanes,firstContext:ot.firstContext}),nt}function da(nt,ot,ft,xt,yt,Ct){var It=0;if(xt=nt,typeof nt=="function")zl(nt)&&(It=1);else if(typeof nt=="string")It=bp(nt,ft,sn.current)?26:nt==="html"||nt==="head"||nt==="body"?27:5;else e:switch(nt){case Et:return nt=Ai(31,ft,ot,yt),nt.elementType=Et,nt.lanes=Ct,nt;case vt:return Js(ft.children,yt,Ct,ot);case Tt:It=8,yt|=24;break;case St:return nt=Ai(12,ft,ot,yt|2),nt.elementType=St,nt.lanes=Ct,nt;case Bt:return nt=Ai(13,ft,ot,yt),nt.elementType=Bt,nt.lanes=Ct,nt;case Dt:return nt=Ai(19,ft,ot,yt),nt.elementType=Dt,nt.lanes=Ct,nt;default:if(typeof nt=="object"&&nt!==null)switch(nt.$$typeof){case Rt:case Ot:It=10;break e;case Pt:It=9;break e;case Mt:It=11;break e;case $t:It=14;break e;case kt:It=16,xt=null;break e}It=29,ft=Error(de(130,nt===null?"null":typeof nt,"")),xt=null}return ot=Ai(It,ft,ot,yt),ot.elementType=nt,ot.type=xt,ot.lanes=Ct,ot}function Js(nt,ot,ft,xt){return nt=Ai(7,nt,xt,ot),nt.lanes=ft,nt}function Hl(nt,ot,ft){return nt=Ai(6,nt,null,ot),nt.lanes=ft,nt}function Wl(nt,ot,ft){return ot=Ai(4,nt.children!==null?nt.children:[],nt.key,ot),ot.lanes=ft,ot.stateNode={containerInfo:nt.containerInfo,pendingChildren:null,implementation:nt.implementation},ot}var Ro=[],Io=0,ha=null,fa=0,$i=[],Fi=0,eo=null,ls=1,cs="";function to(nt,ot){Ro[Io++]=fa,Ro[Io++]=ha,ha=nt,fa=ot}function _d(nt,ot,ft){$i[Fi++]=ls,$i[Fi++]=cs,$i[Fi++]=eo,eo=nt;var xt=ls;nt=cs;var yt=32-ei(xt)-1;xt&=~(1<<yt),ft+=1;var Ct=32-ei(ot)+yt;if(30<Ct){var It=yt-yt%5;Ct=(xt&(1<<It)-1).toString(32),xt>>=It,yt-=It,ls=1<<32-ei(ot)+yt|ft<<yt|xt,cs=Ct+nt}else ls=1<<Ct|ft<<yt|xt,cs=nt}function jl(nt){nt.return!==null&&(to(nt,1),_d(nt,1,0))}function ql(nt){for(;nt===ha;)ha=Ro[--Io],Ro[Io]=null,fa=Ro[--Io],Ro[Io]=null;for(;nt===eo;)eo=$i[--Fi],$i[Fi]=null,cs=$i[--Fi],$i[Fi]=null,ls=$i[--Fi],$i[Fi]=null}var yi=null,Zn=null,On=!1,no=null,Qi=!1,Kl=Error(de(519));function io(nt){var ot=Error(de(418,""));throw gr(Ni(ot,nt)),Kl}function vd(nt){var ot=nt.stateNode,ft=nt.type,xt=nt.memoizedProps;switch(ot[xi]=nt,ot[_i]=xt,ft){case"dialog":kn("cancel",ot),kn("close",ot);break;case"iframe":case"object":case"embed":kn("load",ot);break;case"video":case"audio":for(ft=0;ft<$r.length;ft++)kn($r[ft],ot);break;case"source":kn("error",ot);break;case"img":case"image":case"link":kn("error",ot),kn("load",ot);break;case"details":kn("toggle",ot);break;case"input":kn("invalid",ot),Nu(ot,xt.value,xt.defaultValue,xt.checked,xt.defaultChecked,xt.type,xt.name,!0),Jr(ot);break;case"select":kn("invalid",ot);break;case"textarea":kn("invalid",ot),$u(ot,xt.value,xt.defaultValue,xt.children),Jr(ot)}ft=xt.children,typeof ft!="string"&&typeof ft!="number"&&typeof ft!="bigint"||ot.textContent===""+ft||xt.suppressHydrationWarning===!0||Ff(ot.textContent,ft)?(xt.popover!=null&&(kn("beforetoggle",ot),kn("toggle",ot)),xt.onScroll!=null&&kn("scroll",ot),xt.onScrollEnd!=null&&kn("scrollend",ot),xt.onClick!=null&&(ot.onclick=Ka),ot=!0):ot=!1,ot||io(nt)}function Cd(nt){for(yi=nt.return;yi;)switch(yi.tag){case 5:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:yi=yi.return}}function fr(nt){if(nt!==yi)return!1;if(!On)return Cd(nt),On=!0,!1;var ot=nt.tag,ft;if((ft=ot!==3&&ot!==27)&&((ft=ot===5)&&(ft=nt.type,ft=!(ft!=="form"&&ft!=="button")||cu(nt.type,nt.memoizedProps)),ft=!ft),ft&&Zn&&io(nt),Cd(nt),ot===13){if(nt=nt.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(de(317));e:{for(nt=nt.nextSibling,ot=0;nt;){if(nt.nodeType===8)if(ft=nt.data,ft==="/$"){if(ot===0){Zn=Zi(nt.nextSibling);break e}ot--}else ft!=="$"&&ft!=="$!"&&ft!=="$?"||ot++;nt=nt.nextSibling}Zn=null}}else ot===27?(ot=Zn,Us(nt.type)?(nt=fu,fu=null,Zn=nt):Zn=ot):Zn=yi?Zi(nt.stateNode.nextSibling):null;return!0}function mr(){Zn=yi=null,On=!1}function Ed(){var nt=no;return nt!==null&&(Ti===null?Ti=nt:Ti.push.apply(Ti,nt),no=null),nt}function gr(nt){no===null?no=[nt]:no.push(nt)}var Gl=en(null),so=null,us=null;function ks(nt,ot,ft){nn(Gl,ot._currentValue),ot._currentValue=ft}function ds(nt){nt._currentValue=Gl.current,cn(Gl)}function Zl(nt,ot,ft){for(;nt!==null;){var xt=nt.alternate;if((nt.childLanes&ot)!==ot?(nt.childLanes|=ot,xt!==null&&(xt.childLanes|=ot)):xt!==null&&(xt.childLanes&ot)!==ot&&(xt.childLanes|=ot),nt===ft)break;nt=nt.return}}function Yl(nt,ot,ft,xt){var yt=nt.child;for(yt!==null&&(yt.return=nt);yt!==null;){var Ct=yt.dependencies;if(Ct!==null){var It=yt.child;Ct=Ct.firstContext;e:for(;Ct!==null;){var Lt=Ct;Ct=yt;for(var Ht=0;Ht<ot.length;Ht++)if(Lt.context===ot[Ht]){Ct.lanes|=ft,Lt=Ct.alternate,Lt!==null&&(Lt.lanes|=ft),Zl(Ct.return,ft,nt),xt||(It=null);break e}Ct=Lt.next}}else if(yt.tag===18){if(It=yt.return,It===null)throw Error(de(341));It.lanes|=ft,Ct=It.alternate,Ct!==null&&(Ct.lanes|=ft),Zl(It,ft,nt),It=null}else It=yt.child;if(It!==null)It.return=yt;else for(It=yt;It!==null;){if(It===nt){It=null;break}if(yt=It.sibling,yt!==null){yt.return=It.return,It=yt;break}It=It.return}yt=It}}function pr(nt,ot,ft,xt){nt=null;for(var yt=ot,Ct=!1;yt!==null;){if(!Ct){if((yt.flags&524288)!==0)Ct=!0;else if((yt.flags&262144)!==0)break}if(yt.tag===10){var It=yt.alternate;if(It===null)throw Error(de(387));if(It=It.memoizedProps,It!==null){var Lt=yt.type;Si(yt.pendingProps.value,It.value)||(nt!==null?nt.push(Lt):nt=[Lt])}}else if(yt===Rn.current){if(It=yt.alternate,It===null)throw Error(de(387));It.memoizedState.memoizedState!==yt.memoizedState.memoizedState&&(nt!==null?nt.push(jr):nt=[jr])}yt=yt.return}nt!==null&&Yl(ot,nt,ft,xt),ot.flags|=262144}function ma(nt){for(nt=nt.firstContext;nt!==null;){if(!Si(nt.context._currentValue,nt.memoizedValue))return!0;nt=nt.next}return!1}function oo(nt){so=nt,us=null,nt=nt.dependencies,nt!==null&&(nt.firstContext=null)}function bi(nt){return Td(so,nt)}function ga(nt,ot){return so===null&&oo(nt),Td(nt,ot)}function Td(nt,ot){var ft=ot._currentValue;if(ot={context:ot,memoizedValue:ft,next:null},us===null){if(nt===null)throw Error(de(308));us=ot,nt.dependencies={lanes:0,firstContext:ot},nt.flags|=524288}else us=us.next=ot;return ft}var xg=typeof AbortController<"u"?AbortController:function(){var nt=[],ot=this.signal={aborted:!1,addEventListener:function(ft,xt){nt.push(xt)}};this.abort=function(){ot.aborted=!0,nt.forEach(function(ft){return ft()})}},bg=me.unstable_scheduleCallback,wg=me.unstable_NormalPriority,si={$$typeof:Ot,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xl(){return{controller:new xg,data:new Map,refCount:0}}function xr(nt){nt.refCount--,nt.refCount===0&&bg(wg,function(){nt.controller.abort()})}var br=null,Ql=0,Po=0,Oo=null;function yg(nt,ot){if(br===null){var ft=br=[];Ql=0,Po=eu(),Oo={status:"pending",value:void 0,then:function(xt){ft.push(xt)}}}return Ql++,ot.then(kd,kd),ot}function kd(){if(--Ql===0&&br!==null){Oo!==null&&(Oo.status="fulfilled");var nt=br;br=null,Po=0,Oo=null;for(var ot=0;ot<nt.length;ot++)(0,nt[ot])()}}function _g(nt,ot){var ft=[],xt={status:"pending",value:null,reason:null,then:function(yt){ft.push(yt)}};return nt.then(function(){xt.status="fulfilled",xt.value=ot;for(var yt=0;yt<ft.length;yt++)(0,ft[yt])(ot)},function(yt){for(xt.status="rejected",xt.reason=yt,yt=0;yt<ft.length;yt++)(0,ft[yt])(void 0)}),xt}var Sd=Nt.S;Nt.S=function(nt,ot){typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&yg(nt,ot),Sd!==null&&Sd(nt,ot)};var ro=en(null);function Jl(){var nt=ro.current;return nt!==null?nt:zn.pooledCache}function pa(nt,ot){ot===null?nn(ro,ro.current):nn(ro,ot.pool)}function Ad(){var nt=Jl();return nt===null?null:{parent:si._currentValue,pool:nt}}var wr=Error(de(460)),Rd=Error(de(474)),xa=Error(de(542)),ec={then:function(){}};function Id(nt){return nt=nt.status,nt==="fulfilled"||nt==="rejected"}function ba(){}function Pd(nt,ot,ft){switch(ft=nt[ft],ft===void 0?nt.push(ot):ft!==ot&&(ot.then(ba,ba),ot=ft),ot.status){case"fulfilled":return ot.value;case"rejected":throw nt=ot.reason,Bd(nt),nt;default:if(typeof ot.status=="string")ot.then(ba,ba);else{if(nt=zn,nt!==null&&100<nt.shellSuspendCounter)throw Error(de(482));nt=ot,nt.status="pending",nt.then(function(xt){if(ot.status==="pending"){var yt=ot;yt.status="fulfilled",yt.value=xt}},function(xt){if(ot.status==="pending"){var yt=ot;yt.status="rejected",yt.reason=xt}})}switch(ot.status){case"fulfilled":return ot.value;case"rejected":throw nt=ot.reason,Bd(nt),nt}throw yr=ot,wr}}var yr=null;function Od(){if(yr===null)throw Error(de(459));var nt=yr;return yr=null,nt}function Bd(nt){if(nt===wr||nt===xa)throw Error(de(483))}var Ss=!1;function tc(nt){nt.updateQueue={baseState:nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nc(nt,ot){nt=nt.updateQueue,ot.updateQueue===nt&&(ot.updateQueue={baseState:nt.baseState,firstBaseUpdate:nt.firstBaseUpdate,lastBaseUpdate:nt.lastBaseUpdate,shared:nt.shared,callbacks:null})}function As(nt){return{lane:nt,tag:0,payload:null,callback:null,next:null}}function Rs(nt,ot,ft){var xt=nt.updateQueue;if(xt===null)return null;if(xt=xt.shared,(Mn&2)!==0){var yt=xt.pending;return yt===null?ot.next=ot:(ot.next=yt.next,yt.next=ot),xt.pending=ot,ot=ua(nt),wd(nt,null,ft),ot}return ca(nt,xt,ot,ft),ua(nt)}function _r(nt,ot,ft){if(ot=ot.updateQueue,ot!==null&&(ot=ot.shared,(ft&4194048)!==0)){var xt=ot.lanes;xt&=nt.pendingLanes,ft|=xt,ot.lanes=ft,ku(nt,ft)}}function ic(nt,ot){var ft=nt.updateQueue,xt=nt.alternate;if(xt!==null&&(xt=xt.updateQueue,ft===xt)){var yt=null,Ct=null;if(ft=ft.firstBaseUpdate,ft!==null){do{var It={lane:ft.lane,tag:ft.tag,payload:ft.payload,callback:null,next:null};Ct===null?yt=Ct=It:Ct=Ct.next=It,ft=ft.next}while(ft!==null);Ct===null?yt=Ct=ot:Ct=Ct.next=ot}else yt=Ct=ot;ft={baseState:xt.baseState,firstBaseUpdate:yt,lastBaseUpdate:Ct,shared:xt.shared,callbacks:xt.callbacks},nt.updateQueue=ft;return}nt=ft.lastBaseUpdate,nt===null?ft.firstBaseUpdate=ot:nt.next=ot,ft.lastBaseUpdate=ot}var sc=!1;function vr(){if(sc){var nt=Oo;if(nt!==null)throw nt}}function Cr(nt,ot,ft,xt){sc=!1;var yt=nt.updateQueue;Ss=!1;var Ct=yt.firstBaseUpdate,It=yt.lastBaseUpdate,Lt=yt.shared.pending;if(Lt!==null){yt.shared.pending=null;var Ht=Lt,Xt=Ht.next;Ht.next=null,It===null?Ct=Xt:It.next=Xt,It=Ht;var rn=nt.alternate;rn!==null&&(rn=rn.updateQueue,Lt=rn.lastBaseUpdate,Lt!==It&&(Lt===null?rn.firstBaseUpdate=Xt:Lt.next=Xt,rn.lastBaseUpdate=Ht))}if(Ct!==null){var ln=yt.baseState;It=0,rn=Xt=Ht=null,Lt=Ct;do{var Jt=Lt.lane&-536870913,tn=Jt!==Lt.lane;if(tn?(An&Jt)===Jt:(xt&Jt)===Jt){Jt!==0&&Jt===Po&&(sc=!0),rn!==null&&(rn=rn.next={lane:0,tag:Lt.tag,payload:Lt.payload,callback:null,next:null});e:{var bn=nt,gn=Lt;Jt=ot;var Dn=ft;switch(gn.tag){case 1:if(bn=gn.payload,typeof bn=="function"){ln=bn.call(Dn,ln,Jt);break e}ln=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=gn.payload,Jt=typeof bn=="function"?bn.call(Dn,ln,Jt):bn,Jt==null)break e;ln=mt({},ln,Jt);break e;case 2:Ss=!0}}Jt=Lt.callback,Jt!==null&&(nt.flags|=64,tn&&(nt.flags|=8192),tn=yt.callbacks,tn===null?yt.callbacks=[Jt]:tn.push(Jt))}else tn={lane:Jt,tag:Lt.tag,payload:Lt.payload,callback:Lt.callback,next:null},rn===null?(Xt=rn=tn,Ht=ln):rn=rn.next=tn,It|=Jt;if(Lt=Lt.next,Lt===null){if(Lt=yt.shared.pending,Lt===null)break;tn=Lt,Lt=tn.next,tn.next=null,yt.lastBaseUpdate=tn,yt.shared.pending=null}}while(!0);rn===null&&(Ht=ln),yt.baseState=Ht,yt.firstBaseUpdate=Xt,yt.lastBaseUpdate=rn,Ct===null&&(yt.shared.lanes=0),Ns|=It,nt.lanes=It,nt.memoizedState=ln}}function Md(nt,ot){if(typeof nt!="function")throw Error(de(191,nt));nt.call(ot)}function Ld(nt,ot){var ft=nt.callbacks;if(ft!==null)for(nt.callbacks=null,nt=0;nt<ft.length;nt++)Md(ft[nt],ot)}var Bo=en(null),wa=en(0);function Vd(nt,ot){nt=bs,nn(wa,nt),nn(Bo,ot),bs=nt|ot.baseLanes}function oc(){nn(wa,bs),nn(Bo,Bo.current)}function rc(){bs=wa.current,cn(Bo),cn(wa)}var Is=0,Cn=null,Vn=null,ti=null,ya=!1,Mo=!1,ao=!1,_a=0,Er=0,Lo=null,vg=0;function Xn(){throw Error(de(321))}function ac(nt,ot){if(ot===null)return!1;for(var ft=0;ft<ot.length&&ft<nt.length;ft++)if(!Si(nt[ft],ot[ft]))return!1;return!0}function lc(nt,ot,ft,xt,yt,Ct){return Is=Ct,Cn=ot,ot.memoizedState=null,ot.updateQueue=null,ot.lanes=0,Nt.H=nt===null||nt.memoizedState===null?wh:yh,ao=!1,Ct=ft(xt,yt),ao=!1,Mo&&(Ct=Dd(ot,ft,xt,yt)),Nd(nt),Ct}function Nd(nt){Nt.H=Sa;var ot=Vn!==null&&Vn.next!==null;if(Is=0,ti=Vn=Cn=null,ya=!1,Er=0,Lo=null,ot)throw Error(de(300));nt===null||li||(nt=nt.dependencies,nt!==null&&ma(nt)&&(li=!0))}function Dd(nt,ot,ft,xt){Cn=nt;var yt=0;do{if(Mo&&(Lo=null),Er=0,Mo=!1,25<=yt)throw Error(de(301));if(yt+=1,ti=Vn=null,nt.updateQueue!=null){var Ct=nt.updateQueue;Ct.lastEffect=null,Ct.events=null,Ct.stores=null,Ct.memoCache!=null&&(Ct.memoCache.index=0)}Nt.H=Rg,Ct=ot(ft,xt)}while(Mo);return Ct}function Cg(){var nt=Nt.H,ot=nt.useState()[0];return ot=typeof ot.then=="function"?Tr(ot):ot,nt=nt.useState()[0],(Vn!==null?Vn.memoizedState:null)!==nt&&(Cn.flags|=1024),ot}function cc(){var nt=_a!==0;return _a=0,nt}function uc(nt,ot,ft){ot.updateQueue=nt.updateQueue,ot.flags&=-2053,nt.lanes&=~ft}function dc(nt){if(ya){for(nt=nt.memoizedState;nt!==null;){var ot=nt.queue;ot!==null&&(ot.pending=null),nt=nt.next}ya=!1}Is=0,ti=Vn=Cn=null,Mo=!1,Er=_a=0,Lo=null}function Ci(){var nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?Cn.memoizedState=ti=nt:ti=ti.next=nt,ti}function ni(){if(Vn===null){var nt=Cn.alternate;nt=nt!==null?nt.memoizedState:null}else nt=Vn.next;var ot=ti===null?Cn.memoizedState:ti.next;if(ot!==null)ti=ot,Vn=nt;else{if(nt===null)throw Cn.alternate===null?Error(de(467)):Error(de(310));Vn=nt,nt={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},ti===null?Cn.memoizedState=ti=nt:ti=ti.next=nt}return ti}function hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tr(nt){var ot=Er;return Er+=1,Lo===null&&(Lo=[]),nt=Pd(Lo,nt,ot),ot=Cn,(ti===null?ot.memoizedState:ti.next)===null&&(ot=ot.alternate,Nt.H=ot===null||ot.memoizedState===null?wh:yh),nt}function va(nt){if(nt!==null&&typeof nt=="object"){if(typeof nt.then=="function")return Tr(nt);if(nt.$$typeof===Ot)return bi(nt)}throw Error(de(438,String(nt)))}function fc(nt){var ot=null,ft=Cn.updateQueue;if(ft!==null&&(ot=ft.memoCache),ot==null){var xt=Cn.alternate;xt!==null&&(xt=xt.updateQueue,xt!==null&&(xt=xt.memoCache,xt!=null&&(ot={data:xt.data.map(function(yt){return yt.slice()}),index:0})))}if(ot==null&&(ot={data:[],index:0}),ft===null&&(ft=hc(),Cn.updateQueue=ft),ft.memoCache=ot,ft=ot.data[ot.index],ft===void 0)for(ft=ot.data[ot.index]=Array(nt),xt=0;xt<nt;xt++)ft[xt]=At;return ot.index++,ft}function hs(nt,ot){return typeof ot=="function"?ot(nt):ot}function Ca(nt){var ot=ni();return mc(ot,Vn,nt)}function mc(nt,ot,ft){var xt=nt.queue;if(xt===null)throw Error(de(311));xt.lastRenderedReducer=ft;var yt=nt.baseQueue,Ct=xt.pending;if(Ct!==null){if(yt!==null){var It=yt.next;yt.next=Ct.next,Ct.next=It}ot.baseQueue=yt=Ct,xt.pending=null}if(Ct=nt.baseState,yt===null)nt.memoizedState=Ct;else{ot=yt.next;var Lt=It=null,Ht=null,Xt=ot,rn=!1;do{var ln=Xt.lane&-536870913;if(ln!==Xt.lane?(An&ln)===ln:(Is&ln)===ln){var Jt=Xt.revertLane;if(Jt===0)Ht!==null&&(Ht=Ht.next={lane:0,revertLane:0,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null}),ln===Po&&(rn=!0);else if((Is&Jt)===Jt){Xt=Xt.next,Jt===Po&&(rn=!0);continue}else ln={lane:0,revertLane:Xt.revertLane,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null},Ht===null?(Lt=Ht=ln,It=Ct):Ht=Ht.next=ln,Cn.lanes|=Jt,Ns|=Jt;ln=Xt.action,ao&&ft(Ct,ln),Ct=Xt.hasEagerState?Xt.eagerState:ft(Ct,ln)}else Jt={lane:ln,revertLane:Xt.revertLane,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null},Ht===null?(Lt=Ht=Jt,It=Ct):Ht=Ht.next=Jt,Cn.lanes|=ln,Ns|=ln;Xt=Xt.next}while(Xt!==null&&Xt!==ot);if(Ht===null?It=Ct:Ht.next=Lt,!Si(Ct,nt.memoizedState)&&(li=!0,rn&&(ft=Oo,ft!==null)))throw ft;nt.memoizedState=Ct,nt.baseState=It,nt.baseQueue=Ht,xt.lastRenderedState=Ct}return yt===null&&(xt.lanes=0),[nt.memoizedState,xt.dispatch]}function gc(nt){var ot=ni(),ft=ot.queue;if(ft===null)throw Error(de(311));ft.lastRenderedReducer=nt;var xt=ft.dispatch,yt=ft.pending,Ct=ot.memoizedState;if(yt!==null){ft.pending=null;var It=yt=yt.next;do Ct=nt(Ct,It.action),It=It.next;while(It!==yt);Si(Ct,ot.memoizedState)||(li=!0),ot.memoizedState=Ct,ot.baseQueue===null&&(ot.baseState=Ct),ft.lastRenderedState=Ct}return[Ct,xt]}function $d(nt,ot,ft){var xt=Cn,yt=ni(),Ct=On;if(Ct){if(ft===void 0)throw Error(de(407));ft=ft()}else ft=ot();var It=!Si((Vn||yt).memoizedState,ft);It&&(yt.memoizedState=ft,li=!0),yt=yt.queue;var Lt=zd.bind(null,xt,yt,nt);if(kr(2048,8,Lt,[nt]),yt.getSnapshot!==ot||It||ti!==null&&ti.memoizedState.tag&1){if(xt.flags|=2048,Vo(9,Ea(),Ud.bind(null,xt,yt,ft,ot),null),zn===null)throw Error(de(349));Ct||(Is&124)!==0||Fd(xt,ot,ft)}return ft}function Fd(nt,ot,ft){nt.flags|=16384,nt={getSnapshot:ot,value:ft},ot=Cn.updateQueue,ot===null?(ot=hc(),Cn.updateQueue=ot,ot.stores=[nt]):(ft=ot.stores,ft===null?ot.stores=[nt]:ft.push(nt))}function Ud(nt,ot,ft,xt){ot.value=ft,ot.getSnapshot=xt,Hd(ot)&&Wd(nt)}function zd(nt,ot,ft){return ft(function(){Hd(ot)&&Wd(nt)})}function Hd(nt){var ot=nt.getSnapshot;nt=nt.value;try{var ft=ot();return!Si(nt,ft)}catch{return!0}}function Wd(nt){var ot=So(nt,2);ot!==null&&Bi(ot,nt,2)}function pc(nt){var ot=Ci();if(typeof nt=="function"){var ft=nt;if(nt=ft(),ao){wi(!0);try{ft()}finally{wi(!1)}}}return ot.memoizedState=ot.baseState=nt,ot.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:nt},ot}function jd(nt,ot,ft,xt){return nt.baseState=ft,mc(nt,Vn,typeof xt=="function"?xt:hs)}function Eg(nt,ot,ft,xt,yt){if(ka(nt))throw Error(de(485));if(nt=ot.action,nt!==null){var Ct={payload:yt,action:nt,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(It){Ct.listeners.push(It)}};Nt.T!==null?ft(!0):Ct.isTransition=!1,xt(Ct),ft=ot.pending,ft===null?(Ct.next=ot.pending=Ct,qd(ot,Ct)):(Ct.next=ft.next,ot.pending=ft.next=Ct)}}function qd(nt,ot){var ft=ot.action,xt=ot.payload,yt=nt.state;if(ot.isTransition){var Ct=Nt.T,It={};Nt.T=It;try{var Lt=ft(yt,xt),Ht=Nt.S;Ht!==null&&Ht(It,Lt),Kd(nt,ot,Lt)}catch(Xt){xc(nt,ot,Xt)}finally{Nt.T=Ct}}else try{Ct=ft(yt,xt),Kd(nt,ot,Ct)}catch(Xt){xc(nt,ot,Xt)}}function Kd(nt,ot,ft){ft!==null&&typeof ft=="object"&&typeof ft.then=="function"?ft.then(function(xt){Gd(nt,ot,xt)},function(xt){return xc(nt,ot,xt)}):Gd(nt,ot,ft)}function Gd(nt,ot,ft){ot.status="fulfilled",ot.value=ft,Zd(ot),nt.state=ft,ot=nt.pending,ot!==null&&(ft=ot.next,ft===ot?nt.pending=null:(ft=ft.next,ot.next=ft,qd(nt,ft)))}function xc(nt,ot,ft){var xt=nt.pending;if(nt.pending=null,xt!==null){xt=xt.next;do ot.status="rejected",ot.reason=ft,Zd(ot),ot=ot.next;while(ot!==xt)}nt.action=null}function Zd(nt){nt=nt.listeners;for(var ot=0;ot<nt.length;ot++)(0,nt[ot])()}function Yd(nt,ot){return ot}function Xd(nt,ot){if(On){var ft=zn.formState;if(ft!==null){e:{var xt=Cn;if(On){if(Zn){t:{for(var yt=Zn,Ct=Qi;yt.nodeType!==8;){if(!Ct){yt=null;break t}if(yt=Zi(yt.nextSibling),yt===null){yt=null;break t}}Ct=yt.data,yt=Ct==="F!"||Ct==="F"?yt:null}if(yt){Zn=Zi(yt.nextSibling),xt=yt.data==="F!";break e}}io(xt)}xt=!1}xt&&(ot=ft[0])}}return ft=Ci(),ft.memoizedState=ft.baseState=ot,xt={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:ot},ft.queue=xt,ft=ph.bind(null,Cn,xt),xt.dispatch=ft,xt=pc(!1),Ct=vc.bind(null,Cn,!1,xt.queue),xt=Ci(),yt={state:ot,dispatch:null,action:nt,pending:null},xt.queue=yt,ft=Eg.bind(null,Cn,yt,Ct,ft),yt.dispatch=ft,xt.memoizedState=nt,[ot,ft,!1]}function Qd(nt){var ot=ni();return Jd(ot,Vn,nt)}function Jd(nt,ot,ft){if(ot=mc(nt,ot,Yd)[0],nt=Ca(hs)[0],typeof ot=="object"&&ot!==null&&typeof ot.then=="function")try{var xt=Tr(ot)}catch(It){throw It===wr?xa:It}else xt=ot;ot=ni();var yt=ot.queue,Ct=yt.dispatch;return ft!==ot.memoizedState&&(Cn.flags|=2048,Vo(9,Ea(),Tg.bind(null,yt,ft),null)),[xt,Ct,nt]}function Tg(nt,ot){nt.action=ot}function eh(nt){var ot=ni(),ft=Vn;if(ft!==null)return Jd(ot,ft,nt);ni(),ot=ot.memoizedState,ft=ni();var xt=ft.queue.dispatch;return ft.memoizedState=nt,[ot,xt,!1]}function Vo(nt,ot,ft,xt){return nt={tag:nt,create:ft,deps:xt,inst:ot,next:null},ot=Cn.updateQueue,ot===null&&(ot=hc(),Cn.updateQueue=ot),ft=ot.lastEffect,ft===null?ot.lastEffect=nt.next=nt:(xt=ft.next,ft.next=nt,nt.next=xt,ot.lastEffect=nt),nt}function Ea(){return{destroy:void 0,resource:void 0}}function th(){return ni().memoizedState}function Ta(nt,ot,ft,xt){var yt=Ci();xt=xt===void 0?null:xt,Cn.flags|=nt,yt.memoizedState=Vo(1|ot,Ea(),ft,xt)}function kr(nt,ot,ft,xt){var yt=ni();xt=xt===void 0?null:xt;var Ct=yt.memoizedState.inst;Vn!==null&&xt!==null&&ac(xt,Vn.memoizedState.deps)?yt.memoizedState=Vo(ot,Ct,ft,xt):(Cn.flags|=nt,yt.memoizedState=Vo(1|ot,Ct,ft,xt))}function nh(nt,ot){Ta(8390656,8,nt,ot)}function ih(nt,ot){kr(2048,8,nt,ot)}function sh(nt,ot){return kr(4,2,nt,ot)}function oh(nt,ot){return kr(4,4,nt,ot)}function rh(nt,ot){if(typeof ot=="function"){nt=nt();var ft=ot(nt);return function(){typeof ft=="function"?ft():ot(null)}}if(ot!=null)return nt=nt(),ot.current=nt,function(){ot.current=null}}function ah(nt,ot,ft){ft=ft!=null?ft.concat([nt]):null,kr(4,4,rh.bind(null,ot,nt),ft)}function bc(){}function lh(nt,ot){var ft=ni();ot=ot===void 0?null:ot;var xt=ft.memoizedState;return ot!==null&&ac(ot,xt[1])?xt[0]:(ft.memoizedState=[nt,ot],nt)}function ch(nt,ot){var ft=ni();ot=ot===void 0?null:ot;var xt=ft.memoizedState;if(ot!==null&&ac(ot,xt[1]))return xt[0];if(xt=nt(),ao){wi(!0);try{nt()}finally{wi(!1)}}return ft.memoizedState=[xt,ot],xt}function wc(nt,ot,ft){return ft===void 0||(Is&1073741824)!==0?nt.memoizedState=ot:(nt.memoizedState=ft,nt=ff(),Cn.lanes|=nt,Ns|=nt,ft)}function uh(nt,ot,ft,xt){return Si(ft,ot)?ft:Bo.current!==null?(nt=wc(nt,ft,xt),Si(nt,ot)||(li=!0),nt):(Is&42)===0?(li=!0,nt.memoizedState=ft):(nt=ff(),Cn.lanes|=nt,Ns|=nt,ot)}function dh(nt,ot,ft,xt,yt){var Ct=jt.p;jt.p=Ct!==0&&8>Ct?Ct:8;var It=Nt.T,Lt={};Nt.T=Lt,vc(nt,!1,ot,ft);try{var Ht=yt(),Xt=Nt.S;if(Xt!==null&&Xt(Lt,Ht),Ht!==null&&typeof Ht=="object"&&typeof Ht.then=="function"){var rn=_g(Ht,xt);Sr(nt,ot,rn,Oi(nt))}else Sr(nt,ot,xt,Oi(nt))}catch(ln){Sr(nt,ot,{then:function(){},status:"rejected",reason:ln},Oi())}finally{jt.p=Ct,Nt.T=It}}function kg(){}function yc(nt,ot,ft,xt){if(nt.tag!==5)throw Error(de(476));var yt=hh(nt).queue;dh(nt,yt,ot,Qt,ft===null?kg:function(){return fh(nt),ft(xt)})}function hh(nt){var ot=nt.memoizedState;if(ot!==null)return ot;ot={memoizedState:Qt,baseState:Qt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:Qt},next:null};var ft={};return ot.next={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:ft},next:null},nt.memoizedState=ot,nt=nt.alternate,nt!==null&&(nt.memoizedState=ot),ot}function fh(nt){var ot=hh(nt).next.queue;Sr(nt,ot,{},Oi())}function _c(){return bi(jr)}function mh(){return ni().memoizedState}function gh(){return ni().memoizedState}function Sg(nt){for(var ot=nt.return;ot!==null;){switch(ot.tag){case 24:case 3:var ft=Oi();nt=As(ft);var xt=Rs(ot,nt,ft);xt!==null&&(Bi(xt,ot,ft),_r(xt,ot,ft)),ot={cache:Xl()},nt.payload=ot;return}ot=ot.return}}function Ag(nt,ot,ft){var xt=Oi();ft={lane:xt,revertLane:0,action:ft,hasEagerState:!1,eagerState:null,next:null},ka(nt)?xh(ot,ft):(ft=Ul(nt,ot,ft,xt),ft!==null&&(Bi(ft,nt,xt),bh(ft,ot,xt)))}function ph(nt,ot,ft){var xt=Oi();Sr(nt,ot,ft,xt)}function Sr(nt,ot,ft,xt){var yt={lane:xt,revertLane:0,action:ft,hasEagerState:!1,eagerState:null,next:null};if(ka(nt))xh(ot,yt);else{var Ct=nt.alternate;if(nt.lanes===0&&(Ct===null||Ct.lanes===0)&&(Ct=ot.lastRenderedReducer,Ct!==null))try{var It=ot.lastRenderedState,Lt=Ct(It,ft);if(yt.hasEagerState=!0,yt.eagerState=Lt,Si(Lt,It))return ca(nt,ot,yt,0),zn===null&&la(),!1}catch{}finally{}if(ft=Ul(nt,ot,yt,xt),ft!==null)return Bi(ft,nt,xt),bh(ft,ot,xt),!0}return!1}function vc(nt,ot,ft,xt){if(xt={lane:2,revertLane:eu(),action:xt,hasEagerState:!1,eagerState:null,next:null},ka(nt)){if(ot)throw Error(de(479))}else ot=Ul(nt,ft,xt,2),ot!==null&&Bi(ot,nt,2)}function ka(nt){var ot=nt.alternate;return nt===Cn||ot!==null&&ot===Cn}function xh(nt,ot){Mo=ya=!0;var ft=nt.pending;ft===null?ot.next=ot:(ot.next=ft.next,ft.next=ot),nt.pending=ot}function bh(nt,ot,ft){if((ft&4194048)!==0){var xt=ot.lanes;xt&=nt.pendingLanes,ft|=xt,ot.lanes=ft,ku(nt,ft)}}var Sa={readContext:bi,use:va,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn,useHostTransitionStatus:Xn,useFormState:Xn,useActionState:Xn,useOptimistic:Xn,useMemoCache:Xn,useCacheRefresh:Xn},wh={readContext:bi,use:va,useCallback:function(nt,ot){return Ci().memoizedState=[nt,ot===void 0?null:ot],nt},useContext:bi,useEffect:nh,useImperativeHandle:function(nt,ot,ft){ft=ft!=null?ft.concat([nt]):null,Ta(4194308,4,rh.bind(null,ot,nt),ft)},useLayoutEffect:function(nt,ot){return Ta(4194308,4,nt,ot)},useInsertionEffect:function(nt,ot){Ta(4,2,nt,ot)},useMemo:function(nt,ot){var ft=Ci();ot=ot===void 0?null:ot;var xt=nt();if(ao){wi(!0);try{nt()}finally{wi(!1)}}return ft.memoizedState=[xt,ot],xt},useReducer:function(nt,ot,ft){var xt=Ci();if(ft!==void 0){var yt=ft(ot);if(ao){wi(!0);try{ft(ot)}finally{wi(!1)}}}else yt=ot;return xt.memoizedState=xt.baseState=yt,nt={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nt,lastRenderedState:yt},xt.queue=nt,nt=nt.dispatch=Ag.bind(null,Cn,nt),[xt.memoizedState,nt]},useRef:function(nt){var ot=Ci();return nt={current:nt},ot.memoizedState=nt},useState:function(nt){nt=pc(nt);var ot=nt.queue,ft=ph.bind(null,Cn,ot);return ot.dispatch=ft,[nt.memoizedState,ft]},useDebugValue:bc,useDeferredValue:function(nt,ot){var ft=Ci();return wc(ft,nt,ot)},useTransition:function(){var nt=pc(!1);return nt=dh.bind(null,Cn,nt.queue,!0,!1),Ci().memoizedState=nt,[!1,nt]},useSyncExternalStore:function(nt,ot,ft){var xt=Cn,yt=Ci();if(On){if(ft===void 0)throw Error(de(407));ft=ft()}else{if(ft=ot(),zn===null)throw Error(de(349));(An&124)!==0||Fd(xt,ot,ft)}yt.memoizedState=ft;var Ct={value:ft,getSnapshot:ot};return yt.queue=Ct,nh(zd.bind(null,xt,Ct,nt),[nt]),xt.flags|=2048,Vo(9,Ea(),Ud.bind(null,xt,Ct,ft,ot),null),ft},useId:function(){var nt=Ci(),ot=zn.identifierPrefix;if(On){var ft=cs,xt=ls;ft=(xt&~(1<<32-ei(xt)-1)).toString(32)+ft,ot=""+ot+"R"+ft,ft=_a++,0<ft&&(ot+="H"+ft.toString(32)),ot+=""}else ft=vg++,ot=""+ot+"r"+ft.toString(32)+"";return nt.memoizedState=ot},useHostTransitionStatus:_c,useFormState:Xd,useActionState:Xd,useOptimistic:function(nt){var ot=Ci();ot.memoizedState=ot.baseState=nt;var ft={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return ot.queue=ft,ot=vc.bind(null,Cn,!0,ft),ft.dispatch=ot,[nt,ot]},useMemoCache:fc,useCacheRefresh:function(){return Ci().memoizedState=Sg.bind(null,Cn)}},yh={readContext:bi,use:va,useCallback:lh,useContext:bi,useEffect:ih,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:oh,useMemo:ch,useReducer:Ca,useRef:th,useState:function(){return Ca(hs)},useDebugValue:bc,useDeferredValue:function(nt,ot){var ft=ni();return uh(ft,Vn.memoizedState,nt,ot)},useTransition:function(){var nt=Ca(hs)[0],ot=ni().memoizedState;return[typeof nt=="boolean"?nt:Tr(nt),ot]},useSyncExternalStore:$d,useId:mh,useHostTransitionStatus:_c,useFormState:Qd,useActionState:Qd,useOptimistic:function(nt,ot){var ft=ni();return jd(ft,Vn,nt,ot)},useMemoCache:fc,useCacheRefresh:gh},Rg={readContext:bi,use:va,useCallback:lh,useContext:bi,useEffect:ih,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:oh,useMemo:ch,useReducer:gc,useRef:th,useState:function(){return gc(hs)},useDebugValue:bc,useDeferredValue:function(nt,ot){var ft=ni();return Vn===null?wc(ft,nt,ot):uh(ft,Vn.memoizedState,nt,ot)},useTransition:function(){var nt=gc(hs)[0],ot=ni().memoizedState;return[typeof nt=="boolean"?nt:Tr(nt),ot]},useSyncExternalStore:$d,useId:mh,useHostTransitionStatus:_c,useFormState:eh,useActionState:eh,useOptimistic:function(nt,ot){var ft=ni();return Vn!==null?jd(ft,Vn,nt,ot):(ft.baseState=nt,[nt,ft.queue.dispatch])},useMemoCache:fc,useCacheRefresh:gh},No=null,Ar=0;function Aa(nt){var ot=Ar;return Ar+=1,No===null&&(No=[]),Pd(No,nt,ot)}function Rr(nt,ot){ot=ot.props.ref,nt.ref=ot!==void 0?ot:null}function Ra(nt,ot){throw ot.$$typeof===gt?Error(de(525)):(nt=Object.prototype.toString.call(ot),Error(de(31,nt==="[object Object]"?"object with keys {"+Object.keys(ot).join(", ")+"}":nt)))}function _h(nt){var ot=nt._init;return ot(nt._payload)}function vh(nt){function ot(Zt,Wt){if(nt){var Yt=Zt.deletions;Yt===null?(Zt.deletions=[Wt],Zt.flags|=16):Yt.push(Wt)}}function ft(Zt,Wt){if(!nt)return null;for(;Wt!==null;)ot(Zt,Wt),Wt=Wt.sibling;return null}function xt(Zt){for(var Wt=new Map;Zt!==null;)Zt.key!==null?Wt.set(Zt.key,Zt):Wt.set(Zt.index,Zt),Zt=Zt.sibling;return Wt}function yt(Zt,Wt){return Zt=as(Zt,Wt),Zt.index=0,Zt.sibling=null,Zt}function Ct(Zt,Wt,Yt){return Zt.index=Yt,nt?(Yt=Zt.alternate,Yt!==null?(Yt=Yt.index,Yt<Wt?(Zt.flags|=67108866,Wt):Yt):(Zt.flags|=67108866,Wt)):(Zt.flags|=1048576,Wt)}function It(Zt){return nt&&Zt.alternate===null&&(Zt.flags|=67108866),Zt}function Lt(Zt,Wt,Yt,an){return Wt===null||Wt.tag!==6?(Wt=Hl(Yt,Zt.mode,an),Wt.return=Zt,Wt):(Wt=yt(Wt,Yt),Wt.return=Zt,Wt)}function Ht(Zt,Wt,Yt,an){var hn=Yt.type;return hn===vt?rn(Zt,Wt,Yt.props.children,an,Yt.key):Wt!==null&&(Wt.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===kt&&_h(hn)===Wt.type)?(Wt=yt(Wt,Yt.props),Rr(Wt,Yt),Wt.return=Zt,Wt):(Wt=da(Yt.type,Yt.key,Yt.props,null,Zt.mode,an),Rr(Wt,Yt),Wt.return=Zt,Wt)}function Xt(Zt,Wt,Yt,an){return Wt===null||Wt.tag!==4||Wt.stateNode.containerInfo!==Yt.containerInfo||Wt.stateNode.implementation!==Yt.implementation?(Wt=Wl(Yt,Zt.mode,an),Wt.return=Zt,Wt):(Wt=yt(Wt,Yt.children||[]),Wt.return=Zt,Wt)}function rn(Zt,Wt,Yt,an,hn){return Wt===null||Wt.tag!==7?(Wt=Js(Yt,Zt.mode,an,hn),Wt.return=Zt,Wt):(Wt=yt(Wt,Yt),Wt.return=Zt,Wt)}function ln(Zt,Wt,Yt){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint")return Wt=Hl(""+Wt,Zt.mode,Yt),Wt.return=Zt,Wt;if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case bt:return Yt=da(Wt.type,Wt.key,Wt.props,null,Zt.mode,Yt),Rr(Yt,Wt),Yt.return=Zt,Yt;case _t:return Wt=Wl(Wt,Zt.mode,Yt),Wt.return=Zt,Wt;case kt:var an=Wt._init;return Wt=an(Wt._payload),ln(Zt,Wt,Yt)}if(Gt(Wt)||zt(Wt))return Wt=Js(Wt,Zt.mode,Yt,null),Wt.return=Zt,Wt;if(typeof Wt.then=="function")return ln(Zt,Aa(Wt),Yt);if(Wt.$$typeof===Ot)return ln(Zt,ga(Zt,Wt),Yt);Ra(Zt,Wt)}return null}function Jt(Zt,Wt,Yt,an){var hn=Wt!==null?Wt.key:null;if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint")return hn!==null?null:Lt(Zt,Wt,""+Yt,an);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case bt:return Yt.key===hn?Ht(Zt,Wt,Yt,an):null;case _t:return Yt.key===hn?Xt(Zt,Wt,Yt,an):null;case kt:return hn=Yt._init,Yt=hn(Yt._payload),Jt(Zt,Wt,Yt,an)}if(Gt(Yt)||zt(Yt))return hn!==null?null:rn(Zt,Wt,Yt,an,null);if(typeof Yt.then=="function")return Jt(Zt,Wt,Aa(Yt),an);if(Yt.$$typeof===Ot)return Jt(Zt,Wt,ga(Zt,Yt),an);Ra(Zt,Yt)}return null}function tn(Zt,Wt,Yt,an,hn){if(typeof an=="string"&&an!==""||typeof an=="number"||typeof an=="bigint")return Zt=Zt.get(Yt)||null,Lt(Wt,Zt,""+an,hn);if(typeof an=="object"&&an!==null){switch(an.$$typeof){case bt:return Zt=Zt.get(an.key===null?Yt:an.key)||null,Ht(Wt,Zt,an,hn);case _t:return Zt=Zt.get(an.key===null?Yt:an.key)||null,Xt(Wt,Zt,an,hn);case kt:var En=an._init;return an=En(an._payload),tn(Zt,Wt,Yt,an,hn)}if(Gt(an)||zt(an))return Zt=Zt.get(Yt)||null,rn(Wt,Zt,an,hn,null);if(typeof an.then=="function")return tn(Zt,Wt,Yt,Aa(an),hn);if(an.$$typeof===Ot)return tn(Zt,Wt,Yt,ga(Wt,an),hn);Ra(Wt,an)}return null}function bn(Zt,Wt,Yt,an){for(var hn=null,En=null,fn=Wt,xn=Wt=0,ui=null;fn!==null&&xn<Yt.length;xn++){fn.index>xn?(ui=fn,fn=null):ui=fn.sibling;var Pn=Jt(Zt,fn,Yt[xn],an);if(Pn===null){fn===null&&(fn=ui);break}nt&&fn&&Pn.alternate===null&&ot(Zt,fn),Wt=Ct(Pn,Wt,xn),En===null?hn=Pn:En.sibling=Pn,En=Pn,fn=ui}if(xn===Yt.length)return ft(Zt,fn),On&&to(Zt,xn),hn;if(fn===null){for(;xn<Yt.length;xn++)fn=ln(Zt,Yt[xn],an),fn!==null&&(Wt=Ct(fn,Wt,xn),En===null?hn=fn:En.sibling=fn,En=fn);return On&&to(Zt,xn),hn}for(fn=xt(fn);xn<Yt.length;xn++)ui=tn(fn,Zt,xn,Yt[xn],an),ui!==null&&(nt&&ui.alternate!==null&&fn.delete(ui.key===null?xn:ui.key),Wt=Ct(ui,Wt,xn),En===null?hn=ui:En.sibling=ui,En=ui);return nt&&fn.forEach(function(qs){return ot(Zt,qs)}),On&&to(Zt,xn),hn}function gn(Zt,Wt,Yt,an){if(Yt==null)throw Error(de(151));for(var hn=null,En=null,fn=Wt,xn=Wt=0,ui=null,Pn=Yt.next();fn!==null&&!Pn.done;xn++,Pn=Yt.next()){fn.index>xn?(ui=fn,fn=null):ui=fn.sibling;var qs=Jt(Zt,fn,Pn.value,an);if(qs===null){fn===null&&(fn=ui);break}nt&&fn&&qs.alternate===null&&ot(Zt,fn),Wt=Ct(qs,Wt,xn),En===null?hn=qs:En.sibling=qs,En=qs,fn=ui}if(Pn.done)return ft(Zt,fn),On&&to(Zt,xn),hn;if(fn===null){for(;!Pn.done;xn++,Pn=Yt.next())Pn=ln(Zt,Pn.value,an),Pn!==null&&(Wt=Ct(Pn,Wt,xn),En===null?hn=Pn:En.sibling=Pn,En=Pn);return On&&to(Zt,xn),hn}for(fn=xt(fn);!Pn.done;xn++,Pn=Yt.next())Pn=tn(fn,Zt,xn,Pn.value,an),Pn!==null&&(nt&&Pn.alternate!==null&&fn.delete(Pn.key===null?xn:Pn.key),Wt=Ct(Pn,Wt,xn),En===null?hn=Pn:En.sibling=Pn,En=Pn);return nt&&fn.forEach(function(Ip){return ot(Zt,Ip)}),On&&to(Zt,xn),hn}function Dn(Zt,Wt,Yt,an){if(typeof Yt=="object"&&Yt!==null&&Yt.type===vt&&Yt.key===null&&(Yt=Yt.props.children),typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case bt:e:{for(var hn=Yt.key;Wt!==null;){if(Wt.key===hn){if(hn=Yt.type,hn===vt){if(Wt.tag===7){ft(Zt,Wt.sibling),an=yt(Wt,Yt.props.children),an.return=Zt,Zt=an;break e}}else if(Wt.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===kt&&_h(hn)===Wt.type){ft(Zt,Wt.sibling),an=yt(Wt,Yt.props),Rr(an,Yt),an.return=Zt,Zt=an;break e}ft(Zt,Wt);break}else ot(Zt,Wt);Wt=Wt.sibling}Yt.type===vt?(an=Js(Yt.props.children,Zt.mode,an,Yt.key),an.return=Zt,Zt=an):(an=da(Yt.type,Yt.key,Yt.props,null,Zt.mode,an),Rr(an,Yt),an.return=Zt,Zt=an)}return It(Zt);case _t:e:{for(hn=Yt.key;Wt!==null;){if(Wt.key===hn)if(Wt.tag===4&&Wt.stateNode.containerInfo===Yt.containerInfo&&Wt.stateNode.implementation===Yt.implementation){ft(Zt,Wt.sibling),an=yt(Wt,Yt.children||[]),an.return=Zt,Zt=an;break e}else{ft(Zt,Wt);break}else ot(Zt,Wt);Wt=Wt.sibling}an=Wl(Yt,Zt.mode,an),an.return=Zt,Zt=an}return It(Zt);case kt:return hn=Yt._init,Yt=hn(Yt._payload),Dn(Zt,Wt,Yt,an)}if(Gt(Yt))return bn(Zt,Wt,Yt,an);if(zt(Yt)){if(hn=zt(Yt),typeof hn!="function")throw Error(de(150));return Yt=hn.call(Yt),gn(Zt,Wt,Yt,an)}if(typeof Yt.then=="function")return Dn(Zt,Wt,Aa(Yt),an);if(Yt.$$typeof===Ot)return Dn(Zt,Wt,ga(Zt,Yt),an);Ra(Zt,Yt)}return typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint"?(Yt=""+Yt,Wt!==null&&Wt.tag===6?(ft(Zt,Wt.sibling),an=yt(Wt,Yt),an.return=Zt,Zt=an):(ft(Zt,Wt),an=Hl(Yt,Zt.mode,an),an.return=Zt,Zt=an),It(Zt)):ft(Zt,Wt)}return function(Zt,Wt,Yt,an){try{Ar=0;var hn=Dn(Zt,Wt,Yt,an);return No=null,hn}catch(fn){if(fn===wr||fn===xa)throw fn;var En=Ai(29,fn,null,Zt.mode);return En.lanes=an,En.return=Zt,En}finally{}}}var Do=vh(!0),Ch=vh(!1),Ui=en(null),Ji=null;function Ps(nt){var ot=nt.alternate;nn(oi,oi.current&1),nn(Ui,nt),Ji===null&&(ot===null||Bo.current!==null||ot.memoizedState!==null)&&(Ji=nt)}function Eh(nt){if(nt.tag===22){if(nn(oi,oi.current),nn(Ui,nt),Ji===null){var ot=nt.alternate;ot!==null&&ot.memoizedState!==null&&(Ji=nt)}}else Os()}function Os(){nn(oi,oi.current),nn(Ui,Ui.current)}function fs(nt){cn(Ui),Ji===nt&&(Ji=null),cn(oi)}var oi=en(0);function Ia(nt){for(var ot=nt;ot!==null;){if(ot.tag===13){var ft=ot.memoizedState;if(ft!==null&&(ft=ft.dehydrated,ft===null||ft.data==="$?"||hu(ft)))return ot}else if(ot.tag===19&&ot.memoizedProps.revealOrder!==void 0){if((ot.flags&128)!==0)return ot}else if(ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===nt)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===nt)return null;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}return null}function Cc(nt,ot,ft,xt){ot=nt.memoizedState,ft=ft(xt,ot),ft=ft==null?ot:mt({},ot,ft),nt.memoizedState=ft,nt.lanes===0&&(nt.updateQueue.baseState=ft)}var Ec={enqueueSetState:function(nt,ot,ft){nt=nt._reactInternals;var xt=Oi(),yt=As(xt);yt.payload=ot,ft!=null&&(yt.callback=ft),ot=Rs(nt,yt,xt),ot!==null&&(Bi(ot,nt,xt),_r(ot,nt,xt))},enqueueReplaceState:function(nt,ot,ft){nt=nt._reactInternals;var xt=Oi(),yt=As(xt);yt.tag=1,yt.payload=ot,ft!=null&&(yt.callback=ft),ot=Rs(nt,yt,xt),ot!==null&&(Bi(ot,nt,xt),_r(ot,nt,xt))},enqueueForceUpdate:function(nt,ot){nt=nt._reactInternals;var ft=Oi(),xt=As(ft);xt.tag=2,ot!=null&&(xt.callback=ot),ot=Rs(nt,xt,ft),ot!==null&&(Bi(ot,nt,ft),_r(ot,nt,ft))}};function Th(nt,ot,ft,xt,yt,Ct,It){return nt=nt.stateNode,typeof nt.shouldComponentUpdate=="function"?nt.shouldComponentUpdate(xt,Ct,It):ot.prototype&&ot.prototype.isPureReactComponent?!dr(ft,xt)||!dr(yt,Ct):!0}function kh(nt,ot,ft,xt){nt=ot.state,typeof ot.componentWillReceiveProps=="function"&&ot.componentWillReceiveProps(ft,xt),typeof ot.UNSAFE_componentWillReceiveProps=="function"&&ot.UNSAFE_componentWillReceiveProps(ft,xt),ot.state!==nt&&Ec.enqueueReplaceState(ot,ot.state,null)}function lo(nt,ot){var ft=ot;if("ref"in ot){ft={};for(var xt in ot)xt!=="ref"&&(ft[xt]=ot[xt])}if(nt=nt.defaultProps){ft===ot&&(ft=mt({},ft));for(var yt in nt)ft[yt]===void 0&&(ft[yt]=nt[yt])}return ft}var Pa=typeof reportError=="function"?reportError:function(nt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ot=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof nt=="object"&&nt!==null&&typeof nt.message=="string"?String(nt.message):String(nt),error:nt});if(!window.dispatchEvent(ot))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",nt);return}console.error(nt)};function Sh(nt){Pa(nt)}function Ah(nt){console.error(nt)}function Rh(nt){Pa(nt)}function Oa(nt,ot){try{var ft=nt.onUncaughtError;ft(ot.value,{componentStack:ot.stack})}catch(xt){setTimeout(function(){throw xt})}}function Ih(nt,ot,ft){try{var xt=nt.onCaughtError;xt(ft.value,{componentStack:ft.stack,errorBoundary:ot.tag===1?ot.stateNode:null})}catch(yt){setTimeout(function(){throw yt})}}function Tc(nt,ot,ft){return ft=As(ft),ft.tag=3,ft.payload={element:null},ft.callback=function(){Oa(nt,ot)},ft}function Ph(nt){return nt=As(nt),nt.tag=3,nt}function Oh(nt,ot,ft,xt){var yt=ft.type.getDerivedStateFromError;if(typeof yt=="function"){var Ct=xt.value;nt.payload=function(){return yt(Ct)},nt.callback=function(){Ih(ot,ft,xt)}}var It=ft.stateNode;It!==null&&typeof It.componentDidCatch=="function"&&(nt.callback=function(){Ih(ot,ft,xt),typeof yt!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var Lt=xt.stack;this.componentDidCatch(xt.value,{componentStack:Lt!==null?Lt:""})})}function Ig(nt,ot,ft,xt,yt){if(ft.flags|=32768,xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){if(ot=ft.alternate,ot!==null&&pr(ot,ft,yt,!0),ft=Ui.current,ft!==null){switch(ft.tag){case 13:return Ji===null?Zc():ft.alternate===null&&Yn===0&&(Yn=3),ft.flags&=-257,ft.flags|=65536,ft.lanes=yt,xt===ec?ft.flags|=16384:(ot=ft.updateQueue,ot===null?ft.updateQueue=new Set([xt]):ot.add(xt),Xc(nt,xt,yt)),!1;case 22:return ft.flags|=65536,xt===ec?ft.flags|=16384:(ot=ft.updateQueue,ot===null?(ot={transitions:null,markerInstances:null,retryQueue:new Set([xt])},ft.updateQueue=ot):(ft=ot.retryQueue,ft===null?ot.retryQueue=new Set([xt]):ft.add(xt)),Xc(nt,xt,yt)),!1}throw Error(de(435,ft.tag))}return Xc(nt,xt,yt),Zc(),!1}if(On)return ot=Ui.current,ot!==null?((ot.flags&65536)===0&&(ot.flags|=256),ot.flags|=65536,ot.lanes=yt,xt!==Kl&&(nt=Error(de(422),{cause:xt}),gr(Ni(nt,ft)))):(xt!==Kl&&(ot=Error(de(423),{cause:xt}),gr(Ni(ot,ft))),nt=nt.current.alternate,nt.flags|=65536,yt&=-yt,nt.lanes|=yt,xt=Ni(xt,ft),yt=Tc(nt.stateNode,xt,yt),ic(nt,yt),Yn!==4&&(Yn=2)),!1;var Ct=Error(de(520),{cause:xt});if(Ct=Ni(Ct,ft),Vr===null?Vr=[Ct]:Vr.push(Ct),Yn!==4&&(Yn=2),ot===null)return!0;xt=Ni(xt,ft),ft=ot;do{switch(ft.tag){case 3:return ft.flags|=65536,nt=yt&-yt,ft.lanes|=nt,nt=Tc(ft.stateNode,xt,nt),ic(ft,nt),!1;case 1:if(ot=ft.type,Ct=ft.stateNode,(ft.flags&128)===0&&(typeof ot.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&(Ds===null||!Ds.has(Ct))))return ft.flags|=65536,yt&=-yt,ft.lanes|=yt,yt=Ph(yt),Oh(yt,nt,ft,xt),ic(ft,yt),!1}ft=ft.return}while(ft!==null);return!1}var Bh=Error(de(461)),li=!1;function hi(nt,ot,ft,xt){ot.child=nt===null?Ch(ot,null,ft,xt):Do(ot,nt.child,ft,xt)}function Mh(nt,ot,ft,xt,yt){ft=ft.render;var Ct=ot.ref;if("ref"in xt){var It={};for(var Lt in xt)Lt!=="ref"&&(It[Lt]=xt[Lt])}else It=xt;return oo(ot),xt=lc(nt,ot,ft,It,Ct,yt),Lt=cc(),nt!==null&&!li?(uc(nt,ot,yt),ms(nt,ot,yt)):(On&&Lt&&jl(ot),ot.flags|=1,hi(nt,ot,xt,yt),ot.child)}function Lh(nt,ot,ft,xt,yt){if(nt===null){var Ct=ft.type;return typeof Ct=="function"&&!zl(Ct)&&Ct.defaultProps===void 0&&ft.compare===null?(ot.tag=15,ot.type=Ct,Vh(nt,ot,Ct,xt,yt)):(nt=da(ft.type,null,xt,ot,ot.mode,yt),nt.ref=ot.ref,nt.return=ot,ot.child=nt)}if(Ct=nt.child,!Bc(nt,yt)){var It=Ct.memoizedProps;if(ft=ft.compare,ft=ft!==null?ft:dr,ft(It,xt)&&nt.ref===ot.ref)return ms(nt,ot,yt)}return ot.flags|=1,nt=as(Ct,xt),nt.ref=ot.ref,nt.return=ot,ot.child=nt}function Vh(nt,ot,ft,xt,yt){if(nt!==null){var Ct=nt.memoizedProps;if(dr(Ct,xt)&&nt.ref===ot.ref)if(li=!1,ot.pendingProps=xt=Ct,Bc(nt,yt))(nt.flags&131072)!==0&&(li=!0);else return ot.lanes=nt.lanes,ms(nt,ot,yt)}return kc(nt,ot,ft,xt,yt)}function Nh(nt,ot,ft){var xt=ot.pendingProps,yt=xt.children,Ct=nt!==null?nt.memoizedState:null;if(xt.mode==="hidden"){if((ot.flags&128)!==0){if(xt=Ct!==null?Ct.baseLanes|ft:ft,nt!==null){for(yt=ot.child=nt.child,Ct=0;yt!==null;)Ct=Ct|yt.lanes|yt.childLanes,yt=yt.sibling;ot.childLanes=Ct&~xt}else ot.childLanes=0,ot.child=null;return Dh(nt,ot,xt,ft)}if((ft&536870912)!==0)ot.memoizedState={baseLanes:0,cachePool:null},nt!==null&&pa(ot,Ct!==null?Ct.cachePool:null),Ct!==null?Vd(ot,Ct):oc(),Eh(ot);else return ot.lanes=ot.childLanes=536870912,Dh(nt,ot,Ct!==null?Ct.baseLanes|ft:ft,ft)}else Ct!==null?(pa(ot,Ct.cachePool),Vd(ot,Ct),Os(),ot.memoizedState=null):(nt!==null&&pa(ot,null),oc(),Os());return hi(nt,ot,yt,ft),ot.child}function Dh(nt,ot,ft,xt){var yt=Jl();return yt=yt===null?null:{parent:si._currentValue,pool:yt},ot.memoizedState={baseLanes:ft,cachePool:yt},nt!==null&&pa(ot,null),oc(),Eh(ot),nt!==null&&pr(nt,ot,xt,!0),null}function Ba(nt,ot){var ft=ot.ref;if(ft===null)nt!==null&&nt.ref!==null&&(ot.flags|=4194816);else{if(typeof ft!="function"&&typeof ft!="object")throw Error(de(284));(nt===null||nt.ref!==ft)&&(ot.flags|=4194816)}}function kc(nt,ot,ft,xt,yt){return oo(ot),ft=lc(nt,ot,ft,xt,void 0,yt),xt=cc(),nt!==null&&!li?(uc(nt,ot,yt),ms(nt,ot,yt)):(On&&xt&&jl(ot),ot.flags|=1,hi(nt,ot,ft,yt),ot.child)}function $h(nt,ot,ft,xt,yt,Ct){return oo(ot),ot.updateQueue=null,ft=Dd(ot,xt,ft,yt),Nd(nt),xt=cc(),nt!==null&&!li?(uc(nt,ot,Ct),ms(nt,ot,Ct)):(On&&xt&&jl(ot),ot.flags|=1,hi(nt,ot,ft,Ct),ot.child)}function Fh(nt,ot,ft,xt,yt){if(oo(ot),ot.stateNode===null){var Ct=Ao,It=ft.contextType;typeof It=="object"&&It!==null&&(Ct=bi(It)),Ct=new ft(xt,Ct),ot.memoizedState=Ct.state!==null&&Ct.state!==void 0?Ct.state:null,Ct.updater=Ec,ot.stateNode=Ct,Ct._reactInternals=ot,Ct=ot.stateNode,Ct.props=xt,Ct.state=ot.memoizedState,Ct.refs={},tc(ot),It=ft.contextType,Ct.context=typeof It=="object"&&It!==null?bi(It):Ao,Ct.state=ot.memoizedState,It=ft.getDerivedStateFromProps,typeof It=="function"&&(Cc(ot,ft,It,xt),Ct.state=ot.memoizedState),typeof ft.getDerivedStateFromProps=="function"||typeof Ct.getSnapshotBeforeUpdate=="function"||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(It=Ct.state,typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount(),It!==Ct.state&&Ec.enqueueReplaceState(Ct,Ct.state,null),Cr(ot,xt,Ct,yt),vr(),Ct.state=ot.memoizedState),typeof Ct.componentDidMount=="function"&&(ot.flags|=4194308),xt=!0}else if(nt===null){Ct=ot.stateNode;var Lt=ot.memoizedProps,Ht=lo(ft,Lt);Ct.props=Ht;var Xt=Ct.context,rn=ft.contextType;It=Ao,typeof rn=="object"&&rn!==null&&(It=bi(rn));var ln=ft.getDerivedStateFromProps;rn=typeof ln=="function"||typeof Ct.getSnapshotBeforeUpdate=="function",Lt=ot.pendingProps!==Lt,rn||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(Lt||Xt!==It)&&kh(ot,Ct,xt,It),Ss=!1;var Jt=ot.memoizedState;Ct.state=Jt,Cr(ot,xt,Ct,yt),vr(),Xt=ot.memoizedState,Lt||Jt!==Xt||Ss?(typeof ln=="function"&&(Cc(ot,ft,ln,xt),Xt=ot.memoizedState),(Ht=Ss||Th(ot,ft,Ht,xt,Jt,Xt,It))?(rn||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount()),typeof Ct.componentDidMount=="function"&&(ot.flags|=4194308)):(typeof Ct.componentDidMount=="function"&&(ot.flags|=4194308),ot.memoizedProps=xt,ot.memoizedState=Xt),Ct.props=xt,Ct.state=Xt,Ct.context=It,xt=Ht):(typeof Ct.componentDidMount=="function"&&(ot.flags|=4194308),xt=!1)}else{Ct=ot.stateNode,nc(nt,ot),It=ot.memoizedProps,rn=lo(ft,It),Ct.props=rn,ln=ot.pendingProps,Jt=Ct.context,Xt=ft.contextType,Ht=Ao,typeof Xt=="object"&&Xt!==null&&(Ht=bi(Xt)),Lt=ft.getDerivedStateFromProps,(Xt=typeof Lt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function")||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(It!==ln||Jt!==Ht)&&kh(ot,Ct,xt,Ht),Ss=!1,Jt=ot.memoizedState,Ct.state=Jt,Cr(ot,xt,Ct,yt),vr();var tn=ot.memoizedState;It!==ln||Jt!==tn||Ss||nt!==null&&nt.dependencies!==null&&ma(nt.dependencies)?(typeof Lt=="function"&&(Cc(ot,ft,Lt,xt),tn=ot.memoizedState),(rn=Ss||Th(ot,ft,rn,xt,Jt,tn,Ht)||nt!==null&&nt.dependencies!==null&&ma(nt.dependencies))?(Xt||typeof Ct.UNSAFE_componentWillUpdate!="function"&&typeof Ct.componentWillUpdate!="function"||(typeof Ct.componentWillUpdate=="function"&&Ct.componentWillUpdate(xt,tn,Ht),typeof Ct.UNSAFE_componentWillUpdate=="function"&&Ct.UNSAFE_componentWillUpdate(xt,tn,Ht)),typeof Ct.componentDidUpdate=="function"&&(ot.flags|=4),typeof Ct.getSnapshotBeforeUpdate=="function"&&(ot.flags|=1024)):(typeof Ct.componentDidUpdate!="function"||It===nt.memoizedProps&&Jt===nt.memoizedState||(ot.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||It===nt.memoizedProps&&Jt===nt.memoizedState||(ot.flags|=1024),ot.memoizedProps=xt,ot.memoizedState=tn),Ct.props=xt,Ct.state=tn,Ct.context=Ht,xt=rn):(typeof Ct.componentDidUpdate!="function"||It===nt.memoizedProps&&Jt===nt.memoizedState||(ot.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||It===nt.memoizedProps&&Jt===nt.memoizedState||(ot.flags|=1024),xt=!1)}return Ct=xt,Ba(nt,ot),xt=(ot.flags&128)!==0,Ct||xt?(Ct=ot.stateNode,ft=xt&&typeof ft.getDerivedStateFromError!="function"?null:Ct.render(),ot.flags|=1,nt!==null&&xt?(ot.child=Do(ot,nt.child,null,yt),ot.child=Do(ot,null,ft,yt)):hi(nt,ot,ft,yt),ot.memoizedState=Ct.state,nt=ot.child):nt=ms(nt,ot,yt),nt}function Uh(nt,ot,ft,xt){return mr(),ot.flags|=256,hi(nt,ot,ft,xt),ot.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ac(nt){return{baseLanes:nt,cachePool:Ad()}}function Rc(nt,ot,ft){return nt=nt!==null?nt.childLanes&~ft:0,ot&&(nt|=zi),nt}function zh(nt,ot,ft){var xt=ot.pendingProps,yt=!1,Ct=(ot.flags&128)!==0,It;if((It=Ct)||(It=nt!==null&&nt.memoizedState===null?!1:(oi.current&2)!==0),It&&(yt=!0,ot.flags&=-129),It=(ot.flags&32)!==0,ot.flags&=-33,nt===null){if(On){if(yt?Ps(ot):Os(),On){var Lt=Zn,Ht;if(Ht=Lt){e:{for(Ht=Lt,Lt=Qi;Ht.nodeType!==8;){if(!Lt){Lt=null;break e}if(Ht=Zi(Ht.nextSibling),Ht===null){Lt=null;break e}}Lt=Ht}Lt!==null?(ot.memoizedState={dehydrated:Lt,treeContext:eo!==null?{id:ls,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},Ht=Ai(18,null,null,0),Ht.stateNode=Lt,Ht.return=ot,ot.child=Ht,yi=ot,Zn=null,Ht=!0):Ht=!1}Ht||io(ot)}if(Lt=ot.memoizedState,Lt!==null&&(Lt=Lt.dehydrated,Lt!==null))return hu(Lt)?ot.lanes=32:ot.lanes=536870912,null;fs(ot)}return Lt=xt.children,xt=xt.fallback,yt?(Os(),yt=ot.mode,Lt=Ma({mode:"hidden",children:Lt},yt),xt=Js(xt,yt,ft,null),Lt.return=ot,xt.return=ot,Lt.sibling=xt,ot.child=Lt,yt=ot.child,yt.memoizedState=Ac(ft),yt.childLanes=Rc(nt,It,ft),ot.memoizedState=Sc,xt):(Ps(ot),Ic(ot,Lt))}if(Ht=nt.memoizedState,Ht!==null&&(Lt=Ht.dehydrated,Lt!==null)){if(Ct)ot.flags&256?(Ps(ot),ot.flags&=-257,ot=Pc(nt,ot,ft)):ot.memoizedState!==null?(Os(),ot.child=nt.child,ot.flags|=128,ot=null):(Os(),yt=xt.fallback,Lt=ot.mode,xt=Ma({mode:"visible",children:xt.children},Lt),yt=Js(yt,Lt,ft,null),yt.flags|=2,xt.return=ot,yt.return=ot,xt.sibling=yt,ot.child=xt,Do(ot,nt.child,null,ft),xt=ot.child,xt.memoizedState=Ac(ft),xt.childLanes=Rc(nt,It,ft),ot.memoizedState=Sc,ot=yt);else if(Ps(ot),hu(Lt)){if(It=Lt.nextSibling&&Lt.nextSibling.dataset,It)var Xt=It.dgst;It=Xt,xt=Error(de(419)),xt.stack="",xt.digest=It,gr({value:xt,source:null,stack:null}),ot=Pc(nt,ot,ft)}else if(li||pr(nt,ot,ft,!1),It=(ft&nt.childLanes)!==0,li||It){if(It=zn,It!==null&&(xt=ft&-ft,xt=(xt&42)!==0?1:fl(xt),xt=(xt&(It.suspendedLanes|ft))!==0?0:xt,xt!==0&&xt!==Ht.retryLane))throw Ht.retryLane=xt,So(nt,xt),Bi(It,nt,xt),Bh;Lt.data==="$?"||Zc(),ot=Pc(nt,ot,ft)}else Lt.data==="$?"?(ot.flags|=192,ot.child=nt.child,ot=null):(nt=Ht.treeContext,Zn=Zi(Lt.nextSibling),yi=ot,On=!0,no=null,Qi=!1,nt!==null&&($i[Fi++]=ls,$i[Fi++]=cs,$i[Fi++]=eo,ls=nt.id,cs=nt.overflow,eo=ot),ot=Ic(ot,xt.children),ot.flags|=4096);return ot}return yt?(Os(),yt=xt.fallback,Lt=ot.mode,Ht=nt.child,Xt=Ht.sibling,xt=as(Ht,{mode:"hidden",children:xt.children}),xt.subtreeFlags=Ht.subtreeFlags&65011712,Xt!==null?yt=as(Xt,yt):(yt=Js(yt,Lt,ft,null),yt.flags|=2),yt.return=ot,xt.return=ot,xt.sibling=yt,ot.child=xt,xt=yt,yt=ot.child,Lt=nt.child.memoizedState,Lt===null?Lt=Ac(ft):(Ht=Lt.cachePool,Ht!==null?(Xt=si._currentValue,Ht=Ht.parent!==Xt?{parent:Xt,pool:Xt}:Ht):Ht=Ad(),Lt={baseLanes:Lt.baseLanes|ft,cachePool:Ht}),yt.memoizedState=Lt,yt.childLanes=Rc(nt,It,ft),ot.memoizedState=Sc,xt):(Ps(ot),ft=nt.child,nt=ft.sibling,ft=as(ft,{mode:"visible",children:xt.children}),ft.return=ot,ft.sibling=null,nt!==null&&(It=ot.deletions,It===null?(ot.deletions=[nt],ot.flags|=16):It.push(nt)),ot.child=ft,ot.memoizedState=null,ft)}function Ic(nt,ot){return ot=Ma({mode:"visible",children:ot},nt.mode),ot.return=nt,nt.child=ot}function Ma(nt,ot){return nt=Ai(22,nt,null,ot),nt.lanes=0,nt.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},nt}function Pc(nt,ot,ft){return Do(ot,nt.child,null,ft),nt=Ic(ot,ot.pendingProps.children),nt.flags|=2,ot.memoizedState=null,nt}function Hh(nt,ot,ft){nt.lanes|=ot;var xt=nt.alternate;xt!==null&&(xt.lanes|=ot),Zl(nt.return,ot,ft)}function Oc(nt,ot,ft,xt,yt){var Ct=nt.memoizedState;Ct===null?nt.memoizedState={isBackwards:ot,rendering:null,renderingStartTime:0,last:xt,tail:ft,tailMode:yt}:(Ct.isBackwards=ot,Ct.rendering=null,Ct.renderingStartTime=0,Ct.last=xt,Ct.tail=ft,Ct.tailMode=yt)}function Wh(nt,ot,ft){var xt=ot.pendingProps,yt=xt.revealOrder,Ct=xt.tail;if(hi(nt,ot,xt.children,ft),xt=oi.current,(xt&2)!==0)xt=xt&1|2,ot.flags|=128;else{if(nt!==null&&(nt.flags&128)!==0)e:for(nt=ot.child;nt!==null;){if(nt.tag===13)nt.memoizedState!==null&&Hh(nt,ft,ot);else if(nt.tag===19)Hh(nt,ft,ot);else if(nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===ot)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===ot)break e;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}xt&=1}switch(nn(oi,xt),yt){case"forwards":for(ft=ot.child,yt=null;ft!==null;)nt=ft.alternate,nt!==null&&Ia(nt)===null&&(yt=ft),ft=ft.sibling;ft=yt,ft===null?(yt=ot.child,ot.child=null):(yt=ft.sibling,ft.sibling=null),Oc(ot,!1,yt,ft,Ct);break;case"backwards":for(ft=null,yt=ot.child,ot.child=null;yt!==null;){if(nt=yt.alternate,nt!==null&&Ia(nt)===null){ot.child=yt;break}nt=yt.sibling,yt.sibling=ft,ft=yt,yt=nt}Oc(ot,!0,ft,null,Ct);break;case"together":Oc(ot,!1,null,null,void 0);break;default:ot.memoizedState=null}return ot.child}function ms(nt,ot,ft){if(nt!==null&&(ot.dependencies=nt.dependencies),Ns|=ot.lanes,(ft&ot.childLanes)===0)if(nt!==null){if(pr(nt,ot,ft,!1),(ft&ot.childLanes)===0)return null}else return null;if(nt!==null&&ot.child!==nt.child)throw Error(de(153));if(ot.child!==null){for(nt=ot.child,ft=as(nt,nt.pendingProps),ot.child=ft,ft.return=ot;nt.sibling!==null;)nt=nt.sibling,ft=ft.sibling=as(nt,nt.pendingProps),ft.return=ot;ft.sibling=null}return ot.child}function Bc(nt,ot){return(nt.lanes&ot)!==0?!0:(nt=nt.dependencies,!!(nt!==null&&ma(nt)))}function Pg(nt,ot,ft){switch(ot.tag){case 3:_n(ot,ot.stateNode.containerInfo),ks(ot,si,nt.memoizedState.cache),mr();break;case 27:case 5:yn(ot);break;case 4:_n(ot,ot.stateNode.containerInfo);break;case 10:ks(ot,ot.type,ot.memoizedProps.value);break;case 13:var xt=ot.memoizedState;if(xt!==null)return xt.dehydrated!==null?(Ps(ot),ot.flags|=128,null):(ft&ot.child.childLanes)!==0?zh(nt,ot,ft):(Ps(ot),nt=ms(nt,ot,ft),nt!==null?nt.sibling:null);Ps(ot);break;case 19:var yt=(nt.flags&128)!==0;if(xt=(ft&ot.childLanes)!==0,xt||(pr(nt,ot,ft,!1),xt=(ft&ot.childLanes)!==0),yt){if(xt)return Wh(nt,ot,ft);ot.flags|=128}if(yt=ot.memoizedState,yt!==null&&(yt.rendering=null,yt.tail=null,yt.lastEffect=null),nn(oi,oi.current),xt)break;return null;case 22:case 23:return ot.lanes=0,Nh(nt,ot,ft);case 24:ks(ot,si,nt.memoizedState.cache)}return ms(nt,ot,ft)}function jh(nt,ot,ft){if(nt!==null)if(nt.memoizedProps!==ot.pendingProps)li=!0;else{if(!Bc(nt,ft)&&(ot.flags&128)===0)return li=!1,Pg(nt,ot,ft);li=(nt.flags&131072)!==0}else li=!1,On&&(ot.flags&1048576)!==0&&_d(ot,fa,ot.index);switch(ot.lanes=0,ot.tag){case 16:e:{nt=ot.pendingProps;var xt=ot.elementType,yt=xt._init;if(xt=yt(xt._payload),ot.type=xt,typeof xt=="function")zl(xt)?(nt=lo(xt,nt),ot.tag=1,ot=Fh(null,ot,xt,nt,ft)):(ot.tag=0,ot=kc(null,ot,xt,nt,ft));else{if(xt!=null){if(yt=xt.$$typeof,yt===Mt){ot.tag=11,ot=Mh(null,ot,xt,nt,ft);break e}else if(yt===$t){ot.tag=14,ot=Lh(null,ot,xt,nt,ft);break e}}throw ot=qt(xt)||xt,Error(de(306,ot,""))}}return ot;case 0:return kc(nt,ot,ot.type,ot.pendingProps,ft);case 1:return xt=ot.type,yt=lo(xt,ot.pendingProps),Fh(nt,ot,xt,yt,ft);case 3:e:{if(_n(ot,ot.stateNode.containerInfo),nt===null)throw Error(de(387));xt=ot.pendingProps;var Ct=ot.memoizedState;yt=Ct.element,nc(nt,ot),Cr(ot,xt,null,ft);var It=ot.memoizedState;if(xt=It.cache,ks(ot,si,xt),xt!==Ct.cache&&Yl(ot,[si],ft,!0),vr(),xt=It.element,Ct.isDehydrated)if(Ct={element:xt,isDehydrated:!1,cache:It.cache},ot.updateQueue.baseState=Ct,ot.memoizedState=Ct,ot.flags&256){ot=Uh(nt,ot,xt,ft);break e}else if(xt!==yt){yt=Ni(Error(de(424)),ot),gr(yt),ot=Uh(nt,ot,xt,ft);break e}else{switch(nt=ot.stateNode.containerInfo,nt.nodeType){case 9:nt=nt.body;break;default:nt=nt.nodeName==="HTML"?nt.ownerDocument.body:nt}for(Zn=Zi(nt.firstChild),yi=ot,On=!0,no=null,Qi=!0,ft=Ch(ot,null,xt,ft),ot.child=ft;ft;)ft.flags=ft.flags&-3|4096,ft=ft.sibling}else{if(mr(),xt===yt){ot=ms(nt,ot,ft);break e}hi(nt,ot,xt,ft)}ot=ot.child}return ot;case 26:return Ba(nt,ot),nt===null?(ft=Yf(ot.type,null,ot.pendingProps,null))?ot.memoizedState=ft:On||(ft=ot.type,nt=ot.pendingProps,xt=Ga(dn.current).createElement(ft),xt[xi]=ot,xt[_i]=nt,mi(xt,ft,nt),ai(xt),ot.stateNode=xt):ot.memoizedState=Yf(ot.type,nt.memoizedProps,ot.pendingProps,nt.memoizedState),null;case 27:return yn(ot),nt===null&&On&&(xt=ot.stateNode=Kf(ot.type,ot.pendingProps,dn.current),yi=ot,Qi=!0,yt=Zn,Us(ot.type)?(fu=yt,Zn=Zi(xt.firstChild)):Zn=yt),hi(nt,ot,ot.pendingProps.children,ft),Ba(nt,ot),nt===null&&(ot.flags|=4194304),ot.child;case 5:return nt===null&&On&&((yt=xt=Zn)&&(xt=op(xt,ot.type,ot.pendingProps,Qi),xt!==null?(ot.stateNode=xt,yi=ot,Zn=Zi(xt.firstChild),Qi=!1,yt=!0):yt=!1),yt||io(ot)),yn(ot),yt=ot.type,Ct=ot.pendingProps,It=nt!==null?nt.memoizedProps:null,xt=Ct.children,cu(yt,Ct)?xt=null:It!==null&&cu(yt,It)&&(ot.flags|=32),ot.memoizedState!==null&&(yt=lc(nt,ot,Cg,null,null,ft),jr._currentValue=yt),Ba(nt,ot),hi(nt,ot,xt,ft),ot.child;case 6:return nt===null&&On&&((nt=ft=Zn)&&(ft=rp(ft,ot.pendingProps,Qi),ft!==null?(ot.stateNode=ft,yi=ot,Zn=null,nt=!0):nt=!1),nt||io(ot)),null;case 13:return zh(nt,ot,ft);case 4:return _n(ot,ot.stateNode.containerInfo),xt=ot.pendingProps,nt===null?ot.child=Do(ot,null,xt,ft):hi(nt,ot,xt,ft),ot.child;case 11:return Mh(nt,ot,ot.type,ot.pendingProps,ft);case 7:return hi(nt,ot,ot.pendingProps,ft),ot.child;case 8:return hi(nt,ot,ot.pendingProps.children,ft),ot.child;case 12:return hi(nt,ot,ot.pendingProps.children,ft),ot.child;case 10:return xt=ot.pendingProps,ks(ot,ot.type,xt.value),hi(nt,ot,xt.children,ft),ot.child;case 9:return yt=ot.type._context,xt=ot.pendingProps.children,oo(ot),yt=bi(yt),xt=xt(yt),ot.flags|=1,hi(nt,ot,xt,ft),ot.child;case 14:return Lh(nt,ot,ot.type,ot.pendingProps,ft);case 15:return Vh(nt,ot,ot.type,ot.pendingProps,ft);case 19:return Wh(nt,ot,ft);case 31:return xt=ot.pendingProps,ft=ot.mode,xt={mode:xt.mode,children:xt.children},nt===null?(ft=Ma(xt,ft),ft.ref=ot.ref,ot.child=ft,ft.return=ot,ot=ft):(ft=as(nt.child,xt),ft.ref=ot.ref,ot.child=ft,ft.return=ot,ot=ft),ot;case 22:return Nh(nt,ot,ft);case 24:return oo(ot),xt=bi(si),nt===null?(yt=Jl(),yt===null&&(yt=zn,Ct=Xl(),yt.pooledCache=Ct,Ct.refCount++,Ct!==null&&(yt.pooledCacheLanes|=ft),yt=Ct),ot.memoizedState={parent:xt,cache:yt},tc(ot),ks(ot,si,yt)):((nt.lanes&ft)!==0&&(nc(nt,ot),Cr(ot,null,null,ft),vr()),yt=nt.memoizedState,Ct=ot.memoizedState,yt.parent!==xt?(yt={parent:xt,cache:xt},ot.memoizedState=yt,ot.lanes===0&&(ot.memoizedState=ot.updateQueue.baseState=yt),ks(ot,si,xt)):(xt=Ct.cache,ks(ot,si,xt),xt!==yt.cache&&Yl(ot,[si],ft,!0))),hi(nt,ot,ot.pendingProps.children,ft),ot.child;case 29:throw ot.pendingProps}throw Error(de(156,ot.tag))}function gs(nt){nt.flags|=4}function qh(nt,ot){if(ot.type!=="stylesheet"||(ot.state.loading&4)!==0)nt.flags&=-16777217;else if(nt.flags|=16777216,!tm(ot)){if(ot=Ui.current,ot!==null&&((An&4194048)===An?Ji!==null:(An&62914560)!==An&&(An&536870912)===0||ot!==Ji))throw yr=ec,Rd;nt.flags|=8192}}function La(nt,ot){ot!==null&&(nt.flags|=4),nt.flags&16384&&(ot=nt.tag!==22?Eu():536870912,nt.lanes|=ot,zo|=ot)}function Ir(nt,ot){if(!On)switch(nt.tailMode){case"hidden":ot=nt.tail;for(var ft=null;ot!==null;)ot.alternate!==null&&(ft=ot),ot=ot.sibling;ft===null?nt.tail=null:ft.sibling=null;break;case"collapsed":ft=nt.tail;for(var xt=null;ft!==null;)ft.alternate!==null&&(xt=ft),ft=ft.sibling;xt===null?ot||nt.tail===null?nt.tail=null:nt.tail.sibling=null:xt.sibling=null}}function Kn(nt){var ot=nt.alternate!==null&&nt.alternate.child===nt.child,ft=0,xt=0;if(ot)for(var yt=nt.child;yt!==null;)ft|=yt.lanes|yt.childLanes,xt|=yt.subtreeFlags&65011712,xt|=yt.flags&65011712,yt.return=nt,yt=yt.sibling;else for(yt=nt.child;yt!==null;)ft|=yt.lanes|yt.childLanes,xt|=yt.subtreeFlags,xt|=yt.flags,yt.return=nt,yt=yt.sibling;return nt.subtreeFlags|=xt,nt.childLanes=ft,ot}function Og(nt,ot,ft){var xt=ot.pendingProps;switch(ql(ot),ot.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(ot),null;case 1:return Kn(ot),null;case 3:return ft=ot.stateNode,xt=null,nt!==null&&(xt=nt.memoizedState.cache),ot.memoizedState.cache!==xt&&(ot.flags|=2048),ds(si),In(),ft.pendingContext&&(ft.context=ft.pendingContext,ft.pendingContext=null),(nt===null||nt.child===null)&&(fr(ot)?gs(ot):nt===null||nt.memoizedState.isDehydrated&&(ot.flags&256)===0||(ot.flags|=1024,Ed())),Kn(ot),null;case 26:return ft=ot.memoizedState,nt===null?(gs(ot),ft!==null?(Kn(ot),qh(ot,ft)):(Kn(ot),ot.flags&=-16777217)):ft?ft!==nt.memoizedState?(gs(ot),Kn(ot),qh(ot,ft)):(Kn(ot),ot.flags&=-16777217):(nt.memoizedProps!==xt&&gs(ot),Kn(ot),ot.flags&=-16777217),null;case 27:vn(ot),ft=dn.current;var yt=ot.type;if(nt!==null&&ot.stateNode!=null)nt.memoizedProps!==xt&&gs(ot);else{if(!xt){if(ot.stateNode===null)throw Error(de(166));return Kn(ot),null}nt=sn.current,fr(ot)?vd(ot):(nt=Kf(yt,xt,ft),ot.stateNode=nt,gs(ot))}return Kn(ot),null;case 5:if(vn(ot),ft=ot.type,nt!==null&&ot.stateNode!=null)nt.memoizedProps!==xt&&gs(ot);else{if(!xt){if(ot.stateNode===null)throw Error(de(166));return Kn(ot),null}if(nt=sn.current,fr(ot))vd(ot);else{switch(yt=Ga(dn.current),nt){case 1:nt=yt.createElementNS("http://www.w3.org/2000/svg",ft);break;case 2:nt=yt.createElementNS("http://www.w3.org/1998/Math/MathML",ft);break;default:switch(ft){case"svg":nt=yt.createElementNS("http://www.w3.org/2000/svg",ft);break;case"math":nt=yt.createElementNS("http://www.w3.org/1998/Math/MathML",ft);break;case"script":nt=yt.createElement("div"),nt.innerHTML="<script><\/script>",nt=nt.removeChild(nt.firstChild);break;case"select":nt=typeof xt.is=="string"?yt.createElement("select",{is:xt.is}):yt.createElement("select"),xt.multiple?nt.multiple=!0:xt.size&&(nt.size=xt.size);break;default:nt=typeof xt.is=="string"?yt.createElement(ft,{is:xt.is}):yt.createElement(ft)}}nt[xi]=ot,nt[_i]=xt;e:for(yt=ot.child;yt!==null;){if(yt.tag===5||yt.tag===6)nt.appendChild(yt.stateNode);else if(yt.tag!==4&&yt.tag!==27&&yt.child!==null){yt.child.return=yt,yt=yt.child;continue}if(yt===ot)break e;for(;yt.sibling===null;){if(yt.return===null||yt.return===ot)break e;yt=yt.return}yt.sibling.return=yt.return,yt=yt.sibling}ot.stateNode=nt;e:switch(mi(nt,ft,xt),ft){case"button":case"input":case"select":case"textarea":nt=!!xt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}nt&&gs(ot)}}return Kn(ot),ot.flags&=-16777217,null;case 6:if(nt&&ot.stateNode!=null)nt.memoizedProps!==xt&&gs(ot);else{if(typeof xt!="string"&&ot.stateNode===null)throw Error(de(166));if(nt=dn.current,fr(ot)){if(nt=ot.stateNode,ft=ot.memoizedProps,xt=null,yt=yi,yt!==null)switch(yt.tag){case 27:case 5:xt=yt.memoizedProps}nt[xi]=ot,nt=!!(nt.nodeValue===ft||xt!==null&&xt.suppressHydrationWarning===!0||Ff(nt.nodeValue,ft)),nt||io(ot)}else nt=Ga(nt).createTextNode(xt),nt[xi]=ot,ot.stateNode=nt}return Kn(ot),null;case 13:if(xt=ot.memoizedState,nt===null||nt.memoizedState!==null&&nt.memoizedState.dehydrated!==null){if(yt=fr(ot),xt!==null&&xt.dehydrated!==null){if(nt===null){if(!yt)throw Error(de(318));if(yt=ot.memoizedState,yt=yt!==null?yt.dehydrated:null,!yt)throw Error(de(317));yt[xi]=ot}else mr(),(ot.flags&128)===0&&(ot.memoizedState=null),ot.flags|=4;Kn(ot),yt=!1}else yt=Ed(),nt!==null&&nt.memoizedState!==null&&(nt.memoizedState.hydrationErrors=yt),yt=!0;if(!yt)return ot.flags&256?(fs(ot),ot):(fs(ot),null)}if(fs(ot),(ot.flags&128)!==0)return ot.lanes=ft,ot;if(ft=xt!==null,nt=nt!==null&&nt.memoizedState!==null,ft){xt=ot.child,yt=null,xt.alternate!==null&&xt.alternate.memoizedState!==null&&xt.alternate.memoizedState.cachePool!==null&&(yt=xt.alternate.memoizedState.cachePool.pool);var Ct=null;xt.memoizedState!==null&&xt.memoizedState.cachePool!==null&&(Ct=xt.memoizedState.cachePool.pool),Ct!==yt&&(xt.flags|=2048)}return ft!==nt&&ft&&(ot.child.flags|=8192),La(ot,ot.updateQueue),Kn(ot),null;case 4:return In(),nt===null&&su(ot.stateNode.containerInfo),Kn(ot),null;case 10:return ds(ot.type),Kn(ot),null;case 19:if(cn(oi),yt=ot.memoizedState,yt===null)return Kn(ot),null;if(xt=(ot.flags&128)!==0,Ct=yt.rendering,Ct===null)if(xt)Ir(yt,!1);else{if(Yn!==0||nt!==null&&(nt.flags&128)!==0)for(nt=ot.child;nt!==null;){if(Ct=Ia(nt),Ct!==null){for(ot.flags|=128,Ir(yt,!1),nt=Ct.updateQueue,ot.updateQueue=nt,La(ot,nt),ot.subtreeFlags=0,nt=ft,ft=ot.child;ft!==null;)yd(ft,nt),ft=ft.sibling;return nn(oi,oi.current&1|2),ot.child}nt=nt.sibling}yt.tail!==null&&Wn()>Da&&(ot.flags|=128,xt=!0,Ir(yt,!1),ot.lanes=4194304)}else{if(!xt)if(nt=Ia(Ct),nt!==null){if(ot.flags|=128,xt=!0,nt=nt.updateQueue,ot.updateQueue=nt,La(ot,nt),Ir(yt,!0),yt.tail===null&&yt.tailMode==="hidden"&&!Ct.alternate&&!On)return Kn(ot),null}else 2*Wn()-yt.renderingStartTime>Da&&ft!==536870912&&(ot.flags|=128,xt=!0,Ir(yt,!1),ot.lanes=4194304);yt.isBackwards?(Ct.sibling=ot.child,ot.child=Ct):(nt=yt.last,nt!==null?nt.sibling=Ct:ot.child=Ct,yt.last=Ct)}return yt.tail!==null?(ot=yt.tail,yt.rendering=ot,yt.tail=ot.sibling,yt.renderingStartTime=Wn(),ot.sibling=null,nt=oi.current,nn(oi,xt?nt&1|2:nt&1),ot):(Kn(ot),null);case 22:case 23:return fs(ot),rc(),xt=ot.memoizedState!==null,nt!==null?nt.memoizedState!==null!==xt&&(ot.flags|=8192):xt&&(ot.flags|=8192),xt?(ft&536870912)!==0&&(ot.flags&128)===0&&(Kn(ot),ot.subtreeFlags&6&&(ot.flags|=8192)):Kn(ot),ft=ot.updateQueue,ft!==null&&La(ot,ft.retryQueue),ft=null,nt!==null&&nt.memoizedState!==null&&nt.memoizedState.cachePool!==null&&(ft=nt.memoizedState.cachePool.pool),xt=null,ot.memoizedState!==null&&ot.memoizedState.cachePool!==null&&(xt=ot.memoizedState.cachePool.pool),xt!==ft&&(ot.flags|=2048),nt!==null&&cn(ro),null;case 24:return ft=null,nt!==null&&(ft=nt.memoizedState.cache),ot.memoizedState.cache!==ft&&(ot.flags|=2048),ds(si),Kn(ot),null;case 25:return null;case 30:return null}throw Error(de(156,ot.tag))}function Bg(nt,ot){switch(ql(ot),ot.tag){case 1:return nt=ot.flags,nt&65536?(ot.flags=nt&-65537|128,ot):null;case 3:return ds(si),In(),nt=ot.flags,(nt&65536)!==0&&(nt&128)===0?(ot.flags=nt&-65537|128,ot):null;case 26:case 27:case 5:return vn(ot),null;case 13:if(fs(ot),nt=ot.memoizedState,nt!==null&&nt.dehydrated!==null){if(ot.alternate===null)throw Error(de(340));mr()}return nt=ot.flags,nt&65536?(ot.flags=nt&-65537|128,ot):null;case 19:return cn(oi),null;case 4:return In(),null;case 10:return ds(ot.type),null;case 22:case 23:return fs(ot),rc(),nt!==null&&cn(ro),nt=ot.flags,nt&65536?(ot.flags=nt&-65537|128,ot):null;case 24:return ds(si),null;case 25:return null;default:return null}}function Kh(nt,ot){switch(ql(ot),ot.tag){case 3:ds(si),In();break;case 26:case 27:case 5:vn(ot);break;case 4:In();break;case 13:fs(ot);break;case 19:cn(oi);break;case 10:ds(ot.type);break;case 22:case 23:fs(ot),rc(),nt!==null&&cn(ro);break;case 24:ds(si)}}function Pr(nt,ot){try{var ft=ot.updateQueue,xt=ft!==null?ft.lastEffect:null;if(xt!==null){var yt=xt.next;ft=yt;do{if((ft.tag&nt)===nt){xt=void 0;var Ct=ft.create,It=ft.inst;xt=Ct(),It.destroy=xt}ft=ft.next}while(ft!==yt)}}catch(Lt){$n(ot,ot.return,Lt)}}function Bs(nt,ot,ft){try{var xt=ot.updateQueue,yt=xt!==null?xt.lastEffect:null;if(yt!==null){var Ct=yt.next;xt=Ct;do{if((xt.tag&nt)===nt){var It=xt.inst,Lt=It.destroy;if(Lt!==void 0){It.destroy=void 0,yt=ot;var Ht=ft,Xt=Lt;try{Xt()}catch(rn){$n(yt,Ht,rn)}}}xt=xt.next}while(xt!==Ct)}}catch(rn){$n(ot,ot.return,rn)}}function Gh(nt){var ot=nt.updateQueue;if(ot!==null){var ft=nt.stateNode;try{Ld(ot,ft)}catch(xt){$n(nt,nt.return,xt)}}}function Zh(nt,ot,ft){ft.props=lo(nt.type,nt.memoizedProps),ft.state=nt.memoizedState;try{ft.componentWillUnmount()}catch(xt){$n(nt,ot,xt)}}function Or(nt,ot){try{var ft=nt.ref;if(ft!==null){switch(nt.tag){case 26:case 27:case 5:var xt=nt.stateNode;break;case 30:xt=nt.stateNode;break;default:xt=nt.stateNode}typeof ft=="function"?nt.refCleanup=ft(xt):ft.current=xt}}catch(yt){$n(nt,ot,yt)}}function es(nt,ot){var ft=nt.ref,xt=nt.refCleanup;if(ft!==null)if(typeof xt=="function")try{xt()}catch(yt){$n(nt,ot,yt)}finally{nt.refCleanup=null,nt=nt.alternate,nt!=null&&(nt.refCleanup=null)}else if(typeof ft=="function")try{ft(null)}catch(yt){$n(nt,ot,yt)}else ft.current=null}function Yh(nt){var ot=nt.type,ft=nt.memoizedProps,xt=nt.stateNode;try{e:switch(ot){case"button":case"input":case"select":case"textarea":ft.autoFocus&&xt.focus();break e;case"img":ft.src?xt.src=ft.src:ft.srcSet&&(xt.srcset=ft.srcSet)}}catch(yt){$n(nt,nt.return,yt)}}function Mc(nt,ot,ft){try{var xt=nt.stateNode;ep(xt,nt.type,ft,ot),xt[_i]=ot}catch(yt){$n(nt,nt.return,yt)}}function Xh(nt){return nt.tag===5||nt.tag===3||nt.tag===26||nt.tag===27&&Us(nt.type)||nt.tag===4}function Lc(nt){e:for(;;){for(;nt.sibling===null;){if(nt.return===null||Xh(nt.return))return null;nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;nt.tag!==5&&nt.tag!==6&&nt.tag!==18;){if(nt.tag===27&&Us(nt.type)||nt.flags&2||nt.child===null||nt.tag===4)continue e;nt.child.return=nt,nt=nt.child}if(!(nt.flags&2))return nt.stateNode}}function Vc(nt,ot,ft){var xt=nt.tag;if(xt===5||xt===6)nt=nt.stateNode,ot?(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).insertBefore(nt,ot):(ot=ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft,ot.appendChild(nt),ft=ft._reactRootContainer,ft!=null||ot.onclick!==null||(ot.onclick=Ka));else if(xt!==4&&(xt===27&&Us(nt.type)&&(ft=nt.stateNode,ot=null),nt=nt.child,nt!==null))for(Vc(nt,ot,ft),nt=nt.sibling;nt!==null;)Vc(nt,ot,ft),nt=nt.sibling}function Va(nt,ot,ft){var xt=nt.tag;if(xt===5||xt===6)nt=nt.stateNode,ot?ft.insertBefore(nt,ot):ft.appendChild(nt);else if(xt!==4&&(xt===27&&Us(nt.type)&&(ft=nt.stateNode),nt=nt.child,nt!==null))for(Va(nt,ot,ft),nt=nt.sibling;nt!==null;)Va(nt,ot,ft),nt=nt.sibling}function Qh(nt){var ot=nt.stateNode,ft=nt.memoizedProps;try{for(var xt=nt.type,yt=ot.attributes;yt.length;)ot.removeAttributeNode(yt[0]);mi(ot,xt,ft),ot[xi]=nt,ot[_i]=ft}catch(Ct){$n(nt,nt.return,Ct)}}var ps=!1,Qn=!1,Nc=!1,Jh=typeof WeakSet=="function"?WeakSet:Set,ci=null;function Mg(nt,ot){if(nt=nt.containerInfo,au=el,nt=ud(nt),Ll(nt)){if("selectionStart"in nt)var ft={start:nt.selectionStart,end:nt.selectionEnd};else e:{ft=(ft=nt.ownerDocument)&&ft.defaultView||window;var xt=ft.getSelection&&ft.getSelection();if(xt&&xt.rangeCount!==0){ft=xt.anchorNode;var yt=xt.anchorOffset,Ct=xt.focusNode;xt=xt.focusOffset;try{ft.nodeType,Ct.nodeType}catch{ft=null;break e}var It=0,Lt=-1,Ht=-1,Xt=0,rn=0,ln=nt,Jt=null;t:for(;;){for(var tn;ln!==ft||yt!==0&&ln.nodeType!==3||(Lt=It+yt),ln!==Ct||xt!==0&&ln.nodeType!==3||(Ht=It+xt),ln.nodeType===3&&(It+=ln.nodeValue.length),(tn=ln.firstChild)!==null;)Jt=ln,ln=tn;for(;;){if(ln===nt)break t;if(Jt===ft&&++Xt===yt&&(Lt=It),Jt===Ct&&++rn===xt&&(Ht=It),(tn=ln.nextSibling)!==null)break;ln=Jt,Jt=ln.parentNode}ln=tn}ft=Lt===-1||Ht===-1?null:{start:Lt,end:Ht}}else ft=null}ft=ft||{start:0,end:0}}else ft=null;for(lu={focusedElem:nt,selectionRange:ft},el=!1,ci=ot;ci!==null;)if(ot=ci,nt=ot.child,(ot.subtreeFlags&1024)!==0&&nt!==null)nt.return=ot,ci=nt;else for(;ci!==null;){switch(ot=ci,Ct=ot.alternate,nt=ot.flags,ot.tag){case 0:break;case 11:case 15:break;case 1:if((nt&1024)!==0&&Ct!==null){nt=void 0,ft=ot,yt=Ct.memoizedProps,Ct=Ct.memoizedState,xt=ft.stateNode;try{var bn=lo(ft.type,yt,ft.elementType===ft.type);nt=xt.getSnapshotBeforeUpdate(bn,Ct),xt.__reactInternalSnapshotBeforeUpdate=nt}catch(gn){$n(ft,ft.return,gn)}}break;case 3:if((nt&1024)!==0){if(nt=ot.stateNode.containerInfo,ft=nt.nodeType,ft===9)du(nt);else if(ft===1)switch(nt.nodeName){case"HEAD":case"HTML":case"BODY":du(nt);break;default:nt.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((nt&1024)!==0)throw Error(de(163))}if(nt=ot.sibling,nt!==null){nt.return=ot.return,ci=nt;break}ci=ot.return}}function ef(nt,ot,ft){var xt=ft.flags;switch(ft.tag){case 0:case 11:case 15:Ms(nt,ft),xt&4&&Pr(5,ft);break;case 1:if(Ms(nt,ft),xt&4)if(nt=ft.stateNode,ot===null)try{nt.componentDidMount()}catch(It){$n(ft,ft.return,It)}else{var yt=lo(ft.type,ot.memoizedProps);ot=ot.memoizedState;try{nt.componentDidUpdate(yt,ot,nt.__reactInternalSnapshotBeforeUpdate)}catch(It){$n(ft,ft.return,It)}}xt&64&&Gh(ft),xt&512&&Or(ft,ft.return);break;case 3:if(Ms(nt,ft),xt&64&&(nt=ft.updateQueue,nt!==null)){if(ot=null,ft.child!==null)switch(ft.child.tag){case 27:case 5:ot=ft.child.stateNode;break;case 1:ot=ft.child.stateNode}try{Ld(nt,ot)}catch(It){$n(ft,ft.return,It)}}break;case 27:ot===null&&xt&4&&Qh(ft);case 26:case 5:Ms(nt,ft),ot===null&&xt&4&&Yh(ft),xt&512&&Or(ft,ft.return);break;case 12:Ms(nt,ft);break;case 13:Ms(nt,ft),xt&4&&sf(nt,ft),xt&64&&(nt=ft.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null&&(ft=Hg.bind(null,ft),ap(nt,ft))));break;case 22:if(xt=ft.memoizedState!==null||ps,!xt){ot=ot!==null&&ot.memoizedState!==null||Qn,yt=ps;var Ct=Qn;ps=xt,(Qn=ot)&&!Ct?Ls(nt,ft,(ft.subtreeFlags&8772)!==0):Ms(nt,ft),ps=yt,Qn=Ct}break;case 30:break;default:Ms(nt,ft)}}function tf(nt){var ot=nt.alternate;ot!==null&&(nt.alternate=null,tf(ot)),nt.child=null,nt.deletions=null,nt.sibling=null,nt.tag===5&&(ot=nt.stateNode,ot!==null&&pl(ot)),nt.stateNode=null,nt.return=null,nt.dependencies=null,nt.memoizedProps=null,nt.memoizedState=null,nt.pendingProps=null,nt.stateNode=null,nt.updateQueue=null}var jn=null,Ei=!1;function xs(nt,ot,ft){for(ft=ft.child;ft!==null;)nf(nt,ot,ft),ft=ft.sibling}function nf(nt,ot,ft){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(qi,ft)}catch{}switch(ft.tag){case 26:Qn||es(ft,ot),xs(nt,ot,ft),ft.memoizedState?ft.memoizedState.count--:ft.stateNode&&(ft=ft.stateNode,ft.parentNode.removeChild(ft));break;case 27:Qn||es(ft,ot);var xt=jn,yt=Ei;Us(ft.type)&&(jn=ft.stateNode,Ei=!1),xs(nt,ot,ft),Ur(ft.stateNode),jn=xt,Ei=yt;break;case 5:Qn||es(ft,ot);case 6:if(xt=jn,yt=Ei,jn=null,xs(nt,ot,ft),jn=xt,Ei=yt,jn!==null)if(Ei)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(ft.stateNode)}catch(Ct){$n(ft,ot,Ct)}else try{jn.removeChild(ft.stateNode)}catch(Ct){$n(ft,ot,Ct)}break;case 18:jn!==null&&(Ei?(nt=jn,jf(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt,ft.stateNode),Zr(nt)):jf(jn,ft.stateNode));break;case 4:xt=jn,yt=Ei,jn=ft.stateNode.containerInfo,Ei=!0,xs(nt,ot,ft),jn=xt,Ei=yt;break;case 0:case 11:case 14:case 15:Qn||Bs(2,ft,ot),Qn||Bs(4,ft,ot),xs(nt,ot,ft);break;case 1:Qn||(es(ft,ot),xt=ft.stateNode,typeof xt.componentWillUnmount=="function"&&Zh(ft,ot,xt)),xs(nt,ot,ft);break;case 21:xs(nt,ot,ft);break;case 22:Qn=(xt=Qn)||ft.memoizedState!==null,xs(nt,ot,ft),Qn=xt;break;default:xs(nt,ot,ft)}}function sf(nt,ot){if(ot.memoizedState===null&&(nt=ot.alternate,nt!==null&&(nt=nt.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null))))try{Zr(nt)}catch(ft){$n(ot,ot.return,ft)}}function Lg(nt){switch(nt.tag){case 13:case 19:var ot=nt.stateNode;return ot===null&&(ot=nt.stateNode=new Jh),ot;case 22:return nt=nt.stateNode,ot=nt._retryCache,ot===null&&(ot=nt._retryCache=new Jh),ot;default:throw Error(de(435,nt.tag))}}function Dc(nt,ot){var ft=Lg(nt);ot.forEach(function(xt){var yt=Wg.bind(null,nt,xt);ft.has(xt)||(ft.add(xt),xt.then(yt,yt))})}function Ri(nt,ot){var ft=ot.deletions;if(ft!==null)for(var xt=0;xt<ft.length;xt++){var yt=ft[xt],Ct=nt,It=ot,Lt=It;e:for(;Lt!==null;){switch(Lt.tag){case 27:if(Us(Lt.type)){jn=Lt.stateNode,Ei=!1;break e}break;case 5:jn=Lt.stateNode,Ei=!1;break e;case 3:case 4:jn=Lt.stateNode.containerInfo,Ei=!0;break e}Lt=Lt.return}if(jn===null)throw Error(de(160));nf(Ct,It,yt),jn=null,Ei=!1,Ct=yt.alternate,Ct!==null&&(Ct.return=null),yt.return=null}if(ot.subtreeFlags&13878)for(ot=ot.child;ot!==null;)of(ot,nt),ot=ot.sibling}var Gi=null;function of(nt,ot){var ft=nt.alternate,xt=nt.flags;switch(nt.tag){case 0:case 11:case 14:case 15:Ri(ot,nt),Ii(nt),xt&4&&(Bs(3,nt,nt.return),Pr(3,nt),Bs(5,nt,nt.return));break;case 1:Ri(ot,nt),Ii(nt),xt&512&&(Qn||ft===null||es(ft,ft.return)),xt&64&&ps&&(nt=nt.updateQueue,nt!==null&&(xt=nt.callbacks,xt!==null&&(ft=nt.shared.hiddenCallbacks,nt.shared.hiddenCallbacks=ft===null?xt:ft.concat(xt))));break;case 26:var yt=Gi;if(Ri(ot,nt),Ii(nt),xt&512&&(Qn||ft===null||es(ft,ft.return)),xt&4){var Ct=ft!==null?ft.memoizedState:null;if(xt=nt.memoizedState,ft===null)if(xt===null)if(nt.stateNode===null){e:{xt=nt.type,ft=nt.memoizedProps,yt=yt.ownerDocument||yt;t:switch(xt){case"title":Ct=yt.getElementsByTagName("title")[0],(!Ct||Ct[nr]||Ct[xi]||Ct.namespaceURI==="http://www.w3.org/2000/svg"||Ct.hasAttribute("itemprop"))&&(Ct=yt.createElement(xt),yt.head.insertBefore(Ct,yt.querySelector("head > title"))),mi(Ct,xt,ft),Ct[xi]=nt,ai(Ct),xt=Ct;break e;case"link":var It=Jf("link","href",yt).get(xt+(ft.href||""));if(It){for(var Lt=0;Lt<It.length;Lt++)if(Ct=It[Lt],Ct.getAttribute("href")===(ft.href==null||ft.href===""?null:ft.href)&&Ct.getAttribute("rel")===(ft.rel==null?null:ft.rel)&&Ct.getAttribute("title")===(ft.title==null?null:ft.title)&&Ct.getAttribute("crossorigin")===(ft.crossOrigin==null?null:ft.crossOrigin)){It.splice(Lt,1);break t}}Ct=yt.createElement(xt),mi(Ct,xt,ft),yt.head.appendChild(Ct);break;case"meta":if(It=Jf("meta","content",yt).get(xt+(ft.content||""))){for(Lt=0;Lt<It.length;Lt++)if(Ct=It[Lt],Ct.getAttribute("content")===(ft.content==null?null:""+ft.content)&&Ct.getAttribute("name")===(ft.name==null?null:ft.name)&&Ct.getAttribute("property")===(ft.property==null?null:ft.property)&&Ct.getAttribute("http-equiv")===(ft.httpEquiv==null?null:ft.httpEquiv)&&Ct.getAttribute("charset")===(ft.charSet==null?null:ft.charSet)){It.splice(Lt,1);break t}}Ct=yt.createElement(xt),mi(Ct,xt,ft),yt.head.appendChild(Ct);break;default:throw Error(de(468,xt))}Ct[xi]=nt,ai(Ct),xt=Ct}nt.stateNode=xt}else em(yt,nt.type,nt.stateNode);else nt.stateNode=Qf(yt,xt,nt.memoizedProps);else Ct!==xt?(Ct===null?ft.stateNode!==null&&(ft=ft.stateNode,ft.parentNode.removeChild(ft)):Ct.count--,xt===null?em(yt,nt.type,nt.stateNode):Qf(yt,xt,nt.memoizedProps)):xt===null&&nt.stateNode!==null&&Mc(nt,nt.memoizedProps,ft.memoizedProps)}break;case 27:Ri(ot,nt),Ii(nt),xt&512&&(Qn||ft===null||es(ft,ft.return)),ft!==null&&xt&4&&Mc(nt,nt.memoizedProps,ft.memoizedProps);break;case 5:if(Ri(ot,nt),Ii(nt),xt&512&&(Qn||ft===null||es(ft,ft.return)),nt.flags&32){yt=nt.stateNode;try{yo(yt,"")}catch(tn){$n(nt,nt.return,tn)}}xt&4&&nt.stateNode!=null&&(yt=nt.memoizedProps,Mc(nt,yt,ft!==null?ft.memoizedProps:yt)),xt&1024&&(Nc=!0);break;case 6:if(Ri(ot,nt),Ii(nt),xt&4){if(nt.stateNode===null)throw Error(de(162));xt=nt.memoizedProps,ft=nt.stateNode;try{ft.nodeValue=xt}catch(tn){$n(nt,nt.return,tn)}}break;case 3:if(Xa=null,yt=Gi,Gi=Za(ot.containerInfo),Ri(ot,nt),Gi=yt,Ii(nt),xt&4&&ft!==null&&ft.memoizedState.isDehydrated)try{Zr(ot.containerInfo)}catch(tn){$n(nt,nt.return,tn)}Nc&&(Nc=!1,rf(nt));break;case 4:xt=Gi,Gi=Za(nt.stateNode.containerInfo),Ri(ot,nt),Ii(nt),Gi=xt;break;case 12:Ri(ot,nt),Ii(nt);break;case 13:Ri(ot,nt),Ii(nt),nt.child.flags&8192&&nt.memoizedState!==null!=(ft!==null&&ft.memoizedState!==null)&&(Wc=Wn()),xt&4&&(xt=nt.updateQueue,xt!==null&&(nt.updateQueue=null,Dc(nt,xt)));break;case 22:yt=nt.memoizedState!==null;var Ht=ft!==null&&ft.memoizedState!==null,Xt=ps,rn=Qn;if(ps=Xt||yt,Qn=rn||Ht,Ri(ot,nt),Qn=rn,ps=Xt,Ii(nt),xt&8192)e:for(ot=nt.stateNode,ot._visibility=yt?ot._visibility&-2:ot._visibility|1,yt&&(ft===null||Ht||ps||Qn||co(nt)),ft=null,ot=nt;;){if(ot.tag===5||ot.tag===26){if(ft===null){Ht=ft=ot;try{if(Ct=Ht.stateNode,yt)It=Ct.style,typeof It.setProperty=="function"?It.setProperty("display","none","important"):It.display="none";else{Lt=Ht.stateNode;var ln=Ht.memoizedProps.style,Jt=ln!=null&&ln.hasOwnProperty("display")?ln.display:null;Lt.style.display=Jt==null||typeof Jt=="boolean"?"":(""+Jt).trim()}}catch(tn){$n(Ht,Ht.return,tn)}}}else if(ot.tag===6){if(ft===null){Ht=ot;try{Ht.stateNode.nodeValue=yt?"":Ht.memoizedProps}catch(tn){$n(Ht,Ht.return,tn)}}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===nt)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===nt)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===nt)break e;ft===ot&&(ft=null),ot=ot.return}ft===ot&&(ft=null),ot.sibling.return=ot.return,ot=ot.sibling}xt&4&&(xt=nt.updateQueue,xt!==null&&(ft=xt.retryQueue,ft!==null&&(xt.retryQueue=null,Dc(nt,ft))));break;case 19:Ri(ot,nt),Ii(nt),xt&4&&(xt=nt.updateQueue,xt!==null&&(nt.updateQueue=null,Dc(nt,xt)));break;case 30:break;case 21:break;default:Ri(ot,nt),Ii(nt)}}function Ii(nt){var ot=nt.flags;if(ot&2){try{for(var ft,xt=nt.return;xt!==null;){if(Xh(xt)){ft=xt;break}xt=xt.return}if(ft==null)throw Error(de(160));switch(ft.tag){case 27:var yt=ft.stateNode,Ct=Lc(nt);Va(nt,Ct,yt);break;case 5:var It=ft.stateNode;ft.flags&32&&(yo(It,""),ft.flags&=-33);var Lt=Lc(nt);Va(nt,Lt,It);break;case 3:case 4:var Ht=ft.stateNode.containerInfo,Xt=Lc(nt);Vc(nt,Xt,Ht);break;default:throw Error(de(161))}}catch(rn){$n(nt,nt.return,rn)}nt.flags&=-3}ot&4096&&(nt.flags&=-4097)}function rf(nt){if(nt.subtreeFlags&1024)for(nt=nt.child;nt!==null;){var ot=nt;rf(ot),ot.tag===5&&ot.flags&1024&&ot.stateNode.reset(),nt=nt.sibling}}function Ms(nt,ot){if(ot.subtreeFlags&8772)for(ot=ot.child;ot!==null;)ef(nt,ot.alternate,ot),ot=ot.sibling}function co(nt){for(nt=nt.child;nt!==null;){var ot=nt;switch(ot.tag){case 0:case 11:case 14:case 15:Bs(4,ot,ot.return),co(ot);break;case 1:es(ot,ot.return);var ft=ot.stateNode;typeof ft.componentWillUnmount=="function"&&Zh(ot,ot.return,ft),co(ot);break;case 27:Ur(ot.stateNode);case 26:case 5:es(ot,ot.return),co(ot);break;case 22:ot.memoizedState===null&&co(ot);break;case 30:co(ot);break;default:co(ot)}nt=nt.sibling}}function Ls(nt,ot,ft){for(ft=ft&&(ot.subtreeFlags&8772)!==0,ot=ot.child;ot!==null;){var xt=ot.alternate,yt=nt,Ct=ot,It=Ct.flags;switch(Ct.tag){case 0:case 11:case 15:Ls(yt,Ct,ft),Pr(4,Ct);break;case 1:if(Ls(yt,Ct,ft),xt=Ct,yt=xt.stateNode,typeof yt.componentDidMount=="function")try{yt.componentDidMount()}catch(Xt){$n(xt,xt.return,Xt)}if(xt=Ct,yt=xt.updateQueue,yt!==null){var Lt=xt.stateNode;try{var Ht=yt.shared.hiddenCallbacks;if(Ht!==null)for(yt.shared.hiddenCallbacks=null,yt=0;yt<Ht.length;yt++)Md(Ht[yt],Lt)}catch(Xt){$n(xt,xt.return,Xt)}}ft&&It&64&&Gh(Ct),Or(Ct,Ct.return);break;case 27:Qh(Ct);case 26:case 5:Ls(yt,Ct,ft),ft&&xt===null&&It&4&&Yh(Ct),Or(Ct,Ct.return);break;case 12:Ls(yt,Ct,ft);break;case 13:Ls(yt,Ct,ft),ft&&It&4&&sf(yt,Ct);break;case 22:Ct.memoizedState===null&&Ls(yt,Ct,ft),Or(Ct,Ct.return);break;case 30:break;default:Ls(yt,Ct,ft)}ot=ot.sibling}}function $c(nt,ot){var ft=null;nt!==null&&nt.memoizedState!==null&&nt.memoizedState.cachePool!==null&&(ft=nt.memoizedState.cachePool.pool),nt=null,ot.memoizedState!==null&&ot.memoizedState.cachePool!==null&&(nt=ot.memoizedState.cachePool.pool),nt!==ft&&(nt!=null&&nt.refCount++,ft!=null&&xr(ft))}function Fc(nt,ot){nt=null,ot.alternate!==null&&(nt=ot.alternate.memoizedState.cache),ot=ot.memoizedState.cache,ot!==nt&&(ot.refCount++,nt!=null&&xr(nt))}function ts(nt,ot,ft,xt){if(ot.subtreeFlags&10256)for(ot=ot.child;ot!==null;)af(nt,ot,ft,xt),ot=ot.sibling}function af(nt,ot,ft,xt){var yt=ot.flags;switch(ot.tag){case 0:case 11:case 15:ts(nt,ot,ft,xt),yt&2048&&Pr(9,ot);break;case 1:ts(nt,ot,ft,xt);break;case 3:ts(nt,ot,ft,xt),yt&2048&&(nt=null,ot.alternate!==null&&(nt=ot.alternate.memoizedState.cache),ot=ot.memoizedState.cache,ot!==nt&&(ot.refCount++,nt!=null&&xr(nt)));break;case 12:if(yt&2048){ts(nt,ot,ft,xt),nt=ot.stateNode;try{var Ct=ot.memoizedProps,It=Ct.id,Lt=Ct.onPostCommit;typeof Lt=="function"&&Lt(It,ot.alternate===null?"mount":"update",nt.passiveEffectDuration,-0)}catch(Ht){$n(ot,ot.return,Ht)}}else ts(nt,ot,ft,xt);break;case 13:ts(nt,ot,ft,xt);break;case 23:break;case 22:Ct=ot.stateNode,It=ot.alternate,ot.memoizedState!==null?Ct._visibility&2?ts(nt,ot,ft,xt):Br(nt,ot):Ct._visibility&2?ts(nt,ot,ft,xt):(Ct._visibility|=2,$o(nt,ot,ft,xt,(ot.subtreeFlags&10256)!==0)),yt&2048&&$c(It,ot);break;case 24:ts(nt,ot,ft,xt),yt&2048&&Fc(ot.alternate,ot);break;default:ts(nt,ot,ft,xt)}}function $o(nt,ot,ft,xt,yt){for(yt=yt&&(ot.subtreeFlags&10256)!==0,ot=ot.child;ot!==null;){var Ct=nt,It=ot,Lt=ft,Ht=xt,Xt=It.flags;switch(It.tag){case 0:case 11:case 15:$o(Ct,It,Lt,Ht,yt),Pr(8,It);break;case 23:break;case 22:var rn=It.stateNode;It.memoizedState!==null?rn._visibility&2?$o(Ct,It,Lt,Ht,yt):Br(Ct,It):(rn._visibility|=2,$o(Ct,It,Lt,Ht,yt)),yt&&Xt&2048&&$c(It.alternate,It);break;case 24:$o(Ct,It,Lt,Ht,yt),yt&&Xt&2048&&Fc(It.alternate,It);break;default:$o(Ct,It,Lt,Ht,yt)}ot=ot.sibling}}function Br(nt,ot){if(ot.subtreeFlags&10256)for(ot=ot.child;ot!==null;){var ft=nt,xt=ot,yt=xt.flags;switch(xt.tag){case 22:Br(ft,xt),yt&2048&&$c(xt.alternate,xt);break;case 24:Br(ft,xt),yt&2048&&Fc(xt.alternate,xt);break;default:Br(ft,xt)}ot=ot.sibling}}var Mr=8192;function Fo(nt){if(nt.subtreeFlags&Mr)for(nt=nt.child;nt!==null;)lf(nt),nt=nt.sibling}function lf(nt){switch(nt.tag){case 26:Fo(nt),nt.flags&Mr&&nt.memoizedState!==null&&yp(Gi,nt.memoizedState,nt.memoizedProps);break;case 5:Fo(nt);break;case 3:case 4:var ot=Gi;Gi=Za(nt.stateNode.containerInfo),Fo(nt),Gi=ot;break;case 22:nt.memoizedState===null&&(ot=nt.alternate,ot!==null&&ot.memoizedState!==null?(ot=Mr,Mr=16777216,Fo(nt),Mr=ot):Fo(nt));break;default:Fo(nt)}}function cf(nt){var ot=nt.alternate;if(ot!==null&&(nt=ot.child,nt!==null)){ot.child=null;do ot=nt.sibling,nt.sibling=null,nt=ot;while(nt!==null)}}function Lr(nt){var ot=nt.deletions;if((nt.flags&16)!==0){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var xt=ot[ft];ci=xt,df(xt,nt)}cf(nt)}if(nt.subtreeFlags&10256)for(nt=nt.child;nt!==null;)uf(nt),nt=nt.sibling}function uf(nt){switch(nt.tag){case 0:case 11:case 15:Lr(nt),nt.flags&2048&&Bs(9,nt,nt.return);break;case 3:Lr(nt);break;case 12:Lr(nt);break;case 22:var ot=nt.stateNode;nt.memoizedState!==null&&ot._visibility&2&&(nt.return===null||nt.return.tag!==13)?(ot._visibility&=-3,Na(nt)):Lr(nt);break;default:Lr(nt)}}function Na(nt){var ot=nt.deletions;if((nt.flags&16)!==0){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var xt=ot[ft];ci=xt,df(xt,nt)}cf(nt)}for(nt=nt.child;nt!==null;){switch(ot=nt,ot.tag){case 0:case 11:case 15:Bs(8,ot,ot.return),Na(ot);break;case 22:ft=ot.stateNode,ft._visibility&2&&(ft._visibility&=-3,Na(ot));break;default:Na(ot)}nt=nt.sibling}}function df(nt,ot){for(;ci!==null;){var ft=ci;switch(ft.tag){case 0:case 11:case 15:Bs(8,ft,ot);break;case 23:case 22:if(ft.memoizedState!==null&&ft.memoizedState.cachePool!==null){var xt=ft.memoizedState.cachePool.pool;xt!=null&&xt.refCount++}break;case 24:xr(ft.memoizedState.cache)}if(xt=ft.child,xt!==null)xt.return=ft,ci=xt;else e:for(ft=nt;ci!==null;){xt=ci;var yt=xt.sibling,Ct=xt.return;if(tf(xt),xt===ft){ci=null;break e}if(yt!==null){yt.return=Ct,ci=yt;break e}ci=Ct}}}var Vg={getCacheForType:function(nt){var ot=bi(si),ft=ot.data.get(nt);return ft===void 0&&(ft=nt(),ot.data.set(nt,ft)),ft}},Ng=typeof WeakMap=="function"?WeakMap:Map,Mn=0,zn=null,Tn=null,An=0,Ln=0,Pi=null,Vs=!1,Uo=!1,Uc=!1,bs=0,Yn=0,Ns=0,uo=0,zc=0,zi=0,zo=0,Vr=null,Ti=null,Hc=!1,Wc=0,Da=1/0,$a=null,Ds=null,fi=0,$s=null,Ho=null,Wo=0,jc=0,qc=null,hf=null,Nr=0,Kc=null;function Oi(){if((Mn&2)!==0&&An!==0)return An&-An;if(Nt.T!==null){var nt=Po;return nt!==0?nt:eu()}return Su()}function ff(){zi===0&&(zi=(An&536870912)===0||On?er():536870912);var nt=Ui.current;return nt!==null&&(nt.flags|=32),zi}function Bi(nt,ot,ft){(nt===zn&&(Ln===2||Ln===9)||nt.cancelPendingCommit!==null)&&(jo(nt,0),Fs(nt,An,zi,!1)),tr(nt,ft),((Mn&2)===0||nt!==zn)&&(nt===zn&&((Mn&2)===0&&(uo|=ft),Yn===4&&Fs(nt,An,zi,!1)),ns(nt))}function mf(nt,ot,ft){if((Mn&6)!==0)throw Error(de(327));var xt=!ft&&(ot&124)===0&&(ot&nt.expiredLanes)===0||qn(nt,ot),yt=xt?Fg(nt,ot):Yc(nt,ot,!0),Ct=xt;do{if(yt===0){Uo&&!xt&&Fs(nt,ot,0,!1);break}else{if(ft=nt.current.alternate,Ct&&!Dg(ft)){yt=Yc(nt,ot,!1),Ct=!1;continue}if(yt===2){if(Ct=ot,nt.errorRecoveryDisabledLanes&Ct)var It=0;else It=nt.pendingLanes&-536870913,It=It!==0?It:It&536870912?536870912:0;if(It!==0){ot=It;e:{var Lt=nt;yt=Vr;var Ht=Lt.current.memoizedState.isDehydrated;if(Ht&&(jo(Lt,It).flags|=256),It=Yc(Lt,It,!1),It!==2){if(Uc&&!Ht){Lt.errorRecoveryDisabledLanes|=Ct,uo|=Ct,yt=4;break e}Ct=Ti,Ti=yt,Ct!==null&&(Ti===null?Ti=Ct:Ti.push.apply(Ti,Ct))}yt=It}if(Ct=!1,yt!==2)continue}}if(yt===1){jo(nt,0),Fs(nt,ot,0,!0);break}e:{switch(xt=nt,Ct=yt,Ct){case 0:case 1:throw Error(de(345));case 4:if((ot&4194048)!==ot)break;case 6:Fs(xt,ot,zi,!Vs);break e;case 2:Ti=null;break;case 3:case 5:break;default:throw Error(de(329))}if((ot&62914560)===ot&&(yt=Wc+300-Wn(),10<yt)){if(Fs(xt,ot,zi,!Vs),Bn(xt,0,!0)!==0)break e;xt.timeoutHandle=Hf(gf.bind(null,xt,ft,Ti,$a,Hc,ot,zi,uo,zo,Vs,Ct,2,-0,0),yt);break e}gf(xt,ft,Ti,$a,Hc,ot,zi,uo,zo,Vs,Ct,0,-0,0)}}break}while(!0);ns(nt)}function gf(nt,ot,ft,xt,yt,Ct,It,Lt,Ht,Xt,rn,ln,Jt,tn){if(nt.timeoutHandle=-1,ln=ot.subtreeFlags,(ln&8192||(ln&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:wp},lf(ot),ln=_p(),ln!==null)){nt.cancelPendingCommit=ln(vf.bind(null,nt,ot,Ct,ft,xt,yt,It,Lt,Ht,rn,1,Jt,tn)),Fs(nt,Ct,It,!Xt);return}vf(nt,ot,Ct,ft,xt,yt,It,Lt,Ht)}function Dg(nt){for(var ot=nt;;){var ft=ot.tag;if((ft===0||ft===11||ft===15)&&ot.flags&16384&&(ft=ot.updateQueue,ft!==null&&(ft=ft.stores,ft!==null)))for(var xt=0;xt<ft.length;xt++){var yt=ft[xt],Ct=yt.getSnapshot;yt=yt.value;try{if(!Si(Ct(),yt))return!1}catch{return!1}}if(ft=ot.child,ot.subtreeFlags&16384&&ft!==null)ft.return=ot,ot=ft;else{if(ot===nt)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===nt)return!0;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}}return!0}function Fs(nt,ot,ft,xt){ot&=~zc,ot&=~uo,nt.suspendedLanes|=ot,nt.pingedLanes&=~ot,xt&&(nt.warmLanes|=ot),xt=nt.expirationTimes;for(var yt=ot;0<yt;){var Ct=31-ei(yt),It=1<<Ct;xt[Ct]=-1,yt&=~It}ft!==0&&Tu(nt,ft,ot)}function Fa(){return(Mn&6)===0?(Dr(0),!1):!0}function Gc(){if(Tn!==null){if(Ln===0)var nt=Tn.return;else nt=Tn,us=so=null,dc(nt),No=null,Ar=0,nt=Tn;for(;nt!==null;)Kh(nt.alternate,nt),nt=nt.return;Tn=null}}function jo(nt,ot){var ft=nt.timeoutHandle;ft!==-1&&(nt.timeoutHandle=-1,np(ft)),ft=nt.cancelPendingCommit,ft!==null&&(nt.cancelPendingCommit=null,ft()),Gc(),zn=nt,Tn=ft=as(nt.current,null),An=ot,Ln=0,Pi=null,Vs=!1,Uo=qn(nt,ot),Uc=!1,zo=zi=zc=uo=Ns=Yn=0,Ti=Vr=null,Hc=!1,(ot&8)!==0&&(ot|=ot&32);var xt=nt.entangledLanes;if(xt!==0)for(nt=nt.entanglements,xt&=ot;0<xt;){var yt=31-ei(xt),Ct=1<<yt;ot|=nt[yt],xt&=~Ct}return bs=ot,la(),ft}function pf(nt,ot){Cn=null,Nt.H=Sa,ot===wr||ot===xa?(ot=Od(),Ln=3):ot===Rd?(ot=Od(),Ln=4):Ln=ot===Bh?8:ot!==null&&typeof ot=="object"&&typeof ot.then=="function"?6:1,Pi=ot,Tn===null&&(Yn=1,Oa(nt,Ni(ot,nt.current)))}function xf(){var nt=Nt.H;return Nt.H=Sa,nt===null?Sa:nt}function bf(){var nt=Nt.A;return Nt.A=Vg,nt}function Zc(){Yn=4,Vs||(An&4194048)!==An&&Ui.current!==null||(Uo=!0),(Ns&134217727)===0&&(uo&134217727)===0||zn===null||Fs(zn,An,zi,!1)}function Yc(nt,ot,ft){var xt=Mn;Mn|=2;var yt=xf(),Ct=bf();(zn!==nt||An!==ot)&&($a=null,jo(nt,ot)),ot=!1;var It=Yn;e:do try{if(Ln!==0&&Tn!==null){var Lt=Tn,Ht=Pi;switch(Ln){case 8:Gc(),It=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(ot=!0);var Xt=Ln;if(Ln=0,Pi=null,qo(nt,Lt,Ht,Xt),ft&&Uo){It=0;break e}break;default:Xt=Ln,Ln=0,Pi=null,qo(nt,Lt,Ht,Xt)}}$g(),It=Yn;break}catch(rn){pf(nt,rn)}while(!0);return ot&&nt.shellSuspendCounter++,us=so=null,Mn=xt,Nt.H=yt,Nt.A=Ct,Tn===null&&(zn=null,An=0,la()),It}function $g(){for(;Tn!==null;)wf(Tn)}function Fg(nt,ot){var ft=Mn;Mn|=2;var xt=xf(),yt=bf();zn!==nt||An!==ot?($a=null,Da=Wn()+500,jo(nt,ot)):Uo=qn(nt,ot);e:do try{if(Ln!==0&&Tn!==null){ot=Tn;var Ct=Pi;t:switch(Ln){case 1:Ln=0,Pi=null,qo(nt,ot,Ct,1);break;case 2:case 9:if(Id(Ct)){Ln=0,Pi=null,yf(ot);break}ot=function(){Ln!==2&&Ln!==9||zn!==nt||(Ln=7),ns(nt)},Ct.then(ot,ot);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:Id(Ct)?(Ln=0,Pi=null,yf(ot)):(Ln=0,Pi=null,qo(nt,ot,Ct,7));break;case 5:var It=null;switch(Tn.tag){case 26:It=Tn.memoizedState;case 5:case 27:var Lt=Tn;if(!It||tm(It)){Ln=0,Pi=null;var Ht=Lt.sibling;if(Ht!==null)Tn=Ht;else{var Xt=Lt.return;Xt!==null?(Tn=Xt,Ua(Xt)):Tn=null}break t}}Ln=0,Pi=null,qo(nt,ot,Ct,5);break;case 6:Ln=0,Pi=null,qo(nt,ot,Ct,6);break;case 8:Gc(),Yn=6;break e;default:throw Error(de(462))}}Ug();break}catch(rn){pf(nt,rn)}while(!0);return us=so=null,Nt.H=xt,Nt.A=yt,Mn=ft,Tn!==null?0:(zn=null,An=0,la(),Yn)}function Ug(){for(;Tn!==null&&!Hn();)wf(Tn)}function wf(nt){var ot=jh(nt.alternate,nt,bs);nt.memoizedProps=nt.pendingProps,ot===null?Ua(nt):Tn=ot}function yf(nt){var ot=nt,ft=ot.alternate;switch(ot.tag){case 15:case 0:ot=$h(ft,ot,ot.pendingProps,ot.type,void 0,An);break;case 11:ot=$h(ft,ot,ot.pendingProps,ot.type.render,ot.ref,An);break;case 5:dc(ot);default:Kh(ft,ot),ot=Tn=yd(ot,bs),ot=jh(ft,ot,bs)}nt.memoizedProps=nt.pendingProps,ot===null?Ua(nt):Tn=ot}function qo(nt,ot,ft,xt){us=so=null,dc(ot),No=null,Ar=0;var yt=ot.return;try{if(Ig(nt,yt,ot,ft,An)){Yn=1,Oa(nt,Ni(ft,nt.current)),Tn=null;return}}catch(Ct){if(yt!==null)throw Tn=yt,Ct;Yn=1,Oa(nt,Ni(ft,nt.current)),Tn=null;return}ot.flags&32768?(On||xt===1?nt=!0:Uo||(An&536870912)!==0?nt=!1:(Vs=nt=!0,(xt===2||xt===9||xt===3||xt===6)&&(xt=Ui.current,xt!==null&&xt.tag===13&&(xt.flags|=16384))),_f(ot,nt)):Ua(ot)}function Ua(nt){var ot=nt;do{if((ot.flags&32768)!==0){_f(ot,Vs);return}nt=ot.return;var ft=Og(ot.alternate,ot,bs);if(ft!==null){Tn=ft;return}if(ot=ot.sibling,ot!==null){Tn=ot;return}Tn=ot=nt}while(ot!==null);Yn===0&&(Yn=5)}function _f(nt,ot){do{var ft=Bg(nt.alternate,nt);if(ft!==null){ft.flags&=32767,Tn=ft;return}if(ft=nt.return,ft!==null&&(ft.flags|=32768,ft.subtreeFlags=0,ft.deletions=null),!ot&&(nt=nt.sibling,nt!==null)){Tn=nt;return}Tn=nt=ft}while(nt!==null);Yn=6,Tn=null}function vf(nt,ot,ft,xt,yt,Ct,It,Lt,Ht){nt.cancelPendingCommit=null;do za();while(fi!==0);if((Mn&6)!==0)throw Error(de(327));if(ot!==null){if(ot===nt.current)throw Error(de(177));if(Ct=ot.lanes|ot.childLanes,Ct|=Fl,wm(nt,ft,Ct,It,Lt,Ht),nt===zn&&(Tn=zn=null,An=0),Ho=ot,$s=nt,Wo=ft,jc=Ct,qc=yt,hf=xt,(ot.subtreeFlags&10256)!==0||(ot.flags&10256)!==0?(nt.callbackNode=null,nt.callbackPriority=0,jg(Gn,function(){return Sf(),null})):(nt.callbackNode=null,nt.callbackPriority=0),xt=(ot.flags&13878)!==0,(ot.subtreeFlags&13878)!==0||xt){xt=Nt.T,Nt.T=null,yt=jt.p,jt.p=2,It=Mn,Mn|=4;try{Mg(nt,ot,ft)}finally{Mn=It,jt.p=yt,Nt.T=xt}}fi=1,Cf(),Ef(),Tf()}}function Cf(){if(fi===1){fi=0;var nt=$s,ot=Ho,ft=(ot.flags&13878)!==0;if((ot.subtreeFlags&13878)!==0||ft){ft=Nt.T,Nt.T=null;var xt=jt.p;jt.p=2;var yt=Mn;Mn|=4;try{of(ot,nt);var Ct=lu,It=ud(nt.containerInfo),Lt=Ct.focusedElem,Ht=Ct.selectionRange;if(It!==Lt&&Lt&&Lt.ownerDocument&&cd(Lt.ownerDocument.documentElement,Lt)){if(Ht!==null&&Ll(Lt)){var Xt=Ht.start,rn=Ht.end;if(rn===void 0&&(rn=Xt),"selectionStart"in Lt)Lt.selectionStart=Xt,Lt.selectionEnd=Math.min(rn,Lt.value.length);else{var ln=Lt.ownerDocument||document,Jt=ln&&ln.defaultView||window;if(Jt.getSelection){var tn=Jt.getSelection(),bn=Lt.textContent.length,gn=Math.min(Ht.start,bn),Dn=Ht.end===void 0?gn:Math.min(Ht.end,bn);!tn.extend&&gn>Dn&&(It=Dn,Dn=gn,gn=It);var Zt=ld(Lt,gn),Wt=ld(Lt,Dn);if(Zt&&Wt&&(tn.rangeCount!==1||tn.anchorNode!==Zt.node||tn.anchorOffset!==Zt.offset||tn.focusNode!==Wt.node||tn.focusOffset!==Wt.offset)){var Yt=ln.createRange();Yt.setStart(Zt.node,Zt.offset),tn.removeAllRanges(),gn>Dn?(tn.addRange(Yt),tn.extend(Wt.node,Wt.offset)):(Yt.setEnd(Wt.node,Wt.offset),tn.addRange(Yt))}}}}for(ln=[],tn=Lt;tn=tn.parentNode;)tn.nodeType===1&&ln.push({element:tn,left:tn.scrollLeft,top:tn.scrollTop});for(typeof Lt.focus=="function"&&Lt.focus(),Lt=0;Lt<ln.length;Lt++){var an=ln[Lt];an.element.scrollLeft=an.left,an.element.scrollTop=an.top}}el=!!au,lu=au=null}finally{Mn=yt,jt.p=xt,Nt.T=ft}}nt.current=ot,fi=2}}function Ef(){if(fi===2){fi=0;var nt=$s,ot=Ho,ft=(ot.flags&8772)!==0;if((ot.subtreeFlags&8772)!==0||ft){ft=Nt.T,Nt.T=null;var xt=jt.p;jt.p=2;var yt=Mn;Mn|=4;try{ef(nt,ot.alternate,ot)}finally{Mn=yt,jt.p=xt,Nt.T=ft}}fi=3}}function Tf(){if(fi===4||fi===3){fi=0,ki();var nt=$s,ot=Ho,ft=Wo,xt=hf;(ot.subtreeFlags&10256)!==0||(ot.flags&10256)!==0?fi=5:(fi=0,Ho=$s=null,kf(nt,nt.pendingLanes));var yt=nt.pendingLanes;if(yt===0&&(Ds=null),ml(ft),ot=ot.stateNode,ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(qi,ot,void 0,(ot.current.flags&128)===128)}catch{}if(xt!==null){ot=Nt.T,yt=jt.p,jt.p=2,Nt.T=null;try{for(var Ct=nt.onRecoverableError,It=0;It<xt.length;It++){var Lt=xt[It];Ct(Lt.value,{componentStack:Lt.stack})}}finally{Nt.T=ot,jt.p=yt}}(Wo&3)!==0&&za(),ns(nt),yt=nt.pendingLanes,(ft&4194090)!==0&&(yt&42)!==0?nt===Kc?Nr++:(Nr=0,Kc=nt):Nr=0,Dr(0)}}function kf(nt,ot){(nt.pooledCacheLanes&=ot)===0&&(ot=nt.pooledCache,ot!=null&&(nt.pooledCache=null,xr(ot)))}function za(nt){return Cf(),Ef(),Tf(),Sf()}function Sf(){if(fi!==5)return!1;var nt=$s,ot=jc;jc=0;var ft=ml(Wo),xt=Nt.T,yt=jt.p;try{jt.p=32>ft?32:ft,Nt.T=null,ft=qc,qc=null;var Ct=$s,It=Wo;if(fi=0,Ho=$s=null,Wo=0,(Mn&6)!==0)throw Error(de(331));var Lt=Mn;if(Mn|=4,uf(Ct.current),af(Ct,Ct.current,It,ft),Mn=Lt,Dr(0,!1),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(qi,Ct)}catch{}return!0}finally{jt.p=yt,Nt.T=xt,kf(nt,ot)}}function Af(nt,ot,ft){ot=Ni(ft,ot),ot=Tc(nt.stateNode,ot,2),nt=Rs(nt,ot,2),nt!==null&&(tr(nt,2),ns(nt))}function $n(nt,ot,ft){if(nt.tag===3)Af(nt,nt,ft);else for(;ot!==null;){if(ot.tag===3){Af(ot,nt,ft);break}else if(ot.tag===1){var xt=ot.stateNode;if(typeof ot.type.getDerivedStateFromError=="function"||typeof xt.componentDidCatch=="function"&&(Ds===null||!Ds.has(xt))){nt=Ni(ft,nt),ft=Ph(2),xt=Rs(ot,ft,2),xt!==null&&(Oh(ft,xt,ot,nt),tr(xt,2),ns(xt));break}}ot=ot.return}}function Xc(nt,ot,ft){var xt=nt.pingCache;if(xt===null){xt=nt.pingCache=new Ng;var yt=new Set;xt.set(ot,yt)}else yt=xt.get(ot),yt===void 0&&(yt=new Set,xt.set(ot,yt));yt.has(ft)||(Uc=!0,yt.add(ft),nt=zg.bind(null,nt,ot,ft),ot.then(nt,nt))}function zg(nt,ot,ft){var xt=nt.pingCache;xt!==null&&xt.delete(ot),nt.pingedLanes|=nt.suspendedLanes&ft,nt.warmLanes&=~ft,zn===nt&&(An&ft)===ft&&(Yn===4||Yn===3&&(An&62914560)===An&&300>Wn()-Wc?(Mn&2)===0&&jo(nt,0):zc|=ft,zo===An&&(zo=0)),ns(nt)}function Rf(nt,ot){ot===0&&(ot=Eu()),nt=So(nt,ot),nt!==null&&(tr(nt,ot),ns(nt))}function Hg(nt){var ot=nt.memoizedState,ft=0;ot!==null&&(ft=ot.retryLane),Rf(nt,ft)}function Wg(nt,ot){var ft=0;switch(nt.tag){case 13:var xt=nt.stateNode,yt=nt.memoizedState;yt!==null&&(ft=yt.retryLane);break;case 19:xt=nt.stateNode;break;case 22:xt=nt.stateNode._retryCache;break;default:throw Error(de(314))}xt!==null&&xt.delete(ot),Rf(nt,ft)}function jg(nt,ot){return Jn(nt,ot)}var Ha=null,Ko=null,Qc=!1,Wa=!1,Jc=!1,ho=0;function ns(nt){nt!==Ko&&nt.next===null&&(Ko===null?Ha=Ko=nt:Ko=Ko.next=nt),Wa=!0,Qc||(Qc=!0,Kg())}function Dr(nt,ot){if(!Jc&&Wa){Jc=!0;do for(var ft=!1,xt=Ha;xt!==null;){if(nt!==0){var yt=xt.pendingLanes;if(yt===0)var Ct=0;else{var It=xt.suspendedLanes,Lt=xt.pingedLanes;Ct=(1<<31-ei(42|nt)+1)-1,Ct&=yt&~(It&~Lt),Ct=Ct&201326741?Ct&201326741|1:Ct?Ct|2:0}Ct!==0&&(ft=!0,Bf(xt,Ct))}else Ct=An,Ct=Bn(xt,xt===zn?Ct:0,xt.cancelPendingCommit!==null||xt.timeoutHandle!==-1),(Ct&3)===0||qn(xt,Ct)||(ft=!0,Bf(xt,Ct));xt=xt.next}while(ft);Jc=!1}}function qg(){If()}function If(){Wa=Qc=!1;var nt=0;ho!==0&&(tp()&&(nt=ho),ho=0);for(var ot=Wn(),ft=null,xt=Ha;xt!==null;){var yt=xt.next,Ct=Pf(xt,ot);Ct===0?(xt.next=null,ft===null?Ha=yt:ft.next=yt,yt===null&&(Ko=ft)):(ft=xt,(nt!==0||(Ct&3)!==0)&&(Wa=!0)),xt=yt}Dr(nt)}function Pf(nt,ot){for(var ft=nt.suspendedLanes,xt=nt.pingedLanes,yt=nt.expirationTimes,Ct=nt.pendingLanes&-62914561;0<Ct;){var It=31-ei(Ct),Lt=1<<It,Ht=yt[It];Ht===-1?((Lt&ft)===0||(Lt&xt)!==0)&&(yt[It]=Cs(Lt,ot)):Ht<=ot&&(nt.expiredLanes|=Lt),Ct&=~Lt}if(ot=zn,ft=An,ft=Bn(nt,nt===ot?ft:0,nt.cancelPendingCommit!==null||nt.timeoutHandle!==-1),xt=nt.callbackNode,ft===0||nt===ot&&(Ln===2||Ln===9)||nt.cancelPendingCommit!==null)return xt!==null&&xt!==null&&Sn(xt),nt.callbackNode=null,nt.callbackPriority=0;if((ft&3)===0||qn(nt,ft)){if(ot=ft&-ft,ot===nt.callbackPriority)return ot;switch(xt!==null&&Sn(xt),ml(ft)){case 2:case 8:ft=gi;break;case 32:ft=Gn;break;case 268435456:ft=is;break;default:ft=Gn}return xt=Of.bind(null,nt),ft=Jn(ft,xt),nt.callbackPriority=ot,nt.callbackNode=ft,ot}return xt!==null&&xt!==null&&Sn(xt),nt.callbackPriority=2,nt.callbackNode=null,2}function Of(nt,ot){if(fi!==0&&fi!==5)return nt.callbackNode=null,nt.callbackPriority=0,null;var ft=nt.callbackNode;if(za()&&nt.callbackNode!==ft)return null;var xt=An;return xt=Bn(nt,nt===zn?xt:0,nt.cancelPendingCommit!==null||nt.timeoutHandle!==-1),xt===0?null:(mf(nt,xt,ot),Pf(nt,Wn()),nt.callbackNode!=null&&nt.callbackNode===ft?Of.bind(null,nt):null)}function Bf(nt,ot){if(za())return null;mf(nt,ot,!0)}function Kg(){ip(function(){(Mn&6)!==0?Jn(ji,qg):If()})}function eu(){return ho===0&&(ho=er()),ho}function Mf(nt){return nt==null||typeof nt=="symbol"||typeof nt=="boolean"?null:typeof nt=="function"?nt:ta(""+nt)}function Lf(nt,ot){var ft=ot.ownerDocument.createElement("input");return ft.name=ot.name,ft.value=ot.value,nt.id&&ft.setAttribute("form",nt.id),ot.parentNode.insertBefore(ft,ot),nt=new FormData(nt),ft.parentNode.removeChild(ft),nt}function Gg(nt,ot,ft,xt,yt){if(ot==="submit"&&ft&&ft.stateNode===yt){var Ct=Mf((yt[_i]||null).action),It=xt.submitter;It&&(ot=(ot=It[_i]||null)?Mf(ot.formAction):It.getAttribute("formAction"),ot!==null&&(Ct=ot,It=null));var Lt=new oa("action","action",null,xt,yt);nt.push({event:Lt,listeners:[{instance:null,listener:function(){if(xt.defaultPrevented){if(ho!==0){var Ht=It?Lf(yt,It):new FormData(yt);yc(ft,{pending:!0,data:Ht,method:yt.method,action:Ct},null,Ht)}}else typeof Ct=="function"&&(Lt.preventDefault(),Ht=It?Lf(yt,It):new FormData(yt),yc(ft,{pending:!0,data:Ht,method:yt.method,action:Ct},Ct,Ht))},currentTarget:yt}]})}}for(var tu=0;tu<$l.length;tu++){var nu=$l[tu],Zg=nu.toLowerCase(),Yg=nu[0].toUpperCase()+nu.slice(1);Ki(Zg,"on"+Yg)}Ki(fd,"onAnimationEnd"),Ki(md,"onAnimationIteration"),Ki(gd,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(fg,"onTransitionRun"),Ki(mg,"onTransitionStart"),Ki(gg,"onTransitionCancel"),Ki(pd,"onTransitionEnd"),xo("onMouseEnter",["mouseout","mouseover"]),xo("onMouseLeave",["mouseout","mouseover"]),xo("onPointerEnter",["pointerout","pointerover"]),xo("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($r));function Vf(nt,ot){ot=(ot&4)!==0;for(var ft=0;ft<nt.length;ft++){var xt=nt[ft],yt=xt.event;xt=xt.listeners;e:{var Ct=void 0;if(ot)for(var It=xt.length-1;0<=It;It--){var Lt=xt[It],Ht=Lt.instance,Xt=Lt.currentTarget;if(Lt=Lt.listener,Ht!==Ct&&yt.isPropagationStopped())break e;Ct=Lt,yt.currentTarget=Xt;try{Ct(yt)}catch(rn){Pa(rn)}yt.currentTarget=null,Ct=Ht}else for(It=0;It<xt.length;It++){if(Lt=xt[It],Ht=Lt.instance,Xt=Lt.currentTarget,Lt=Lt.listener,Ht!==Ct&&yt.isPropagationStopped())break e;Ct=Lt,yt.currentTarget=Xt;try{Ct(yt)}catch(rn){Pa(rn)}yt.currentTarget=null,Ct=Ht}}}}function kn(nt,ot){var ft=ot[gl];ft===void 0&&(ft=ot[gl]=new Set);var xt=nt+"__bubble";ft.has(xt)||(Nf(ot,nt,2,!1),ft.add(xt))}function iu(nt,ot,ft){var xt=0;ot&&(xt|=4),Nf(ft,nt,xt,ot)}var ja="_reactListening"+Math.random().toString(36).slice(2);function su(nt){if(!nt[ja]){nt[ja]=!0,Ru.forEach(function(ft){ft!=="selectionchange"&&(Xg.has(ft)||iu(ft,!1,nt),iu(ft,!0,nt))});var ot=nt.nodeType===9?nt:nt.ownerDocument;ot===null||ot[ja]||(ot[ja]=!0,iu("selectionchange",!1,ot))}}function Nf(nt,ot,ft,xt){switch(am(ot)){case 2:var yt=Ep;break;case 8:yt=Tp;break;default:yt=bu}ft=yt.bind(null,ot,ft,nt),yt=void 0,!kl||ot!=="touchstart"&&ot!=="touchmove"&&ot!=="wheel"||(yt=!0),xt?yt!==void 0?nt.addEventListener(ot,ft,{capture:!0,passive:yt}):nt.addEventListener(ot,ft,!0):yt!==void 0?nt.addEventListener(ot,ft,{passive:yt}):nt.addEventListener(ot,ft,!1)}function ou(nt,ot,ft,xt,yt){var Ct=xt;if((ot&1)===0&&(ot&2)===0&&xt!==null)e:for(;;){if(xt===null)return;var It=xt.tag;if(It===3||It===4){var Lt=xt.stateNode.containerInfo;if(Lt===yt)break;if(It===4)for(It=xt.return;It!==null;){var Ht=It.tag;if((Ht===3||Ht===4)&&It.stateNode.containerInfo===yt)return;It=It.return}for(;Lt!==null;){if(It=mo(Lt),It===null)return;if(Ht=It.tag,Ht===5||Ht===6||Ht===26||Ht===27){xt=Ct=It;continue e}Lt=Lt.parentNode}}xt=xt.return}Hu(function(){var Xt=Ct,rn=El(ft),ln=[];e:{var Jt=xd.get(nt);if(Jt!==void 0){var tn=oa,bn=nt;switch(nt){case"keypress":if(ia(ft)===0)break e;case"keydown":case"keyup":tn=jm;break;case"focusin":bn="focus",tn=Il;break;case"focusout":bn="blur",tn=Il;break;case"beforeblur":case"afterblur":tn=Il;break;case"click":if(ft.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tn=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tn=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tn=Gm;break;case fd:case md:case gd:tn=Vm;break;case pd:tn=Ym;break;case"scroll":case"scrollend":tn=Pm;break;case"wheel":tn=Qm;break;case"copy":case"cut":case"paste":tn=Dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tn=Gu;break;case"toggle":case"beforetoggle":tn=eg}var gn=(ot&4)!==0,Dn=!gn&&(nt==="scroll"||nt==="scrollend"),Zt=gn?Jt!==null?Jt+"Capture":null:Jt;gn=[];for(var Wt=Xt,Yt;Wt!==null;){var an=Wt;if(Yt=an.stateNode,an=an.tag,an!==5&&an!==26&&an!==27||Yt===null||Zt===null||(an=sr(Wt,Zt),an!=null&&gn.push(Fr(Wt,an,Yt))),Dn)break;Wt=Wt.return}0<gn.length&&(Jt=new tn(Jt,bn,null,ft,rn),ln.push({event:Jt,listeners:gn}))}}if((ot&7)===0){e:{if(Jt=nt==="mouseover"||nt==="pointerover",tn=nt==="mouseout"||nt==="pointerout",Jt&&ft!==Cl&&(bn=ft.relatedTarget||ft.fromElement)&&(mo(bn)||bn[fo]))break e;if((tn||Jt)&&(Jt=rn.window===rn?rn:(Jt=rn.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,tn?(bn=ft.relatedTarget||ft.toElement,tn=Xt,bn=bn?mo(bn):null,bn!==null&&(Dn=Le(bn),gn=bn.tag,bn!==Dn||gn!==5&&gn!==27&&gn!==6)&&(bn=null)):(tn=null,bn=Xt),tn!==bn)){if(gn=qu,an="onMouseLeave",Zt="onMouseEnter",Wt="mouse",(nt==="pointerout"||nt==="pointerover")&&(gn=Gu,an="onPointerLeave",Zt="onPointerEnter",Wt="pointer"),Dn=tn==null?Jt:ir(tn),Yt=bn==null?Jt:ir(bn),Jt=new gn(an,Wt+"leave",tn,ft,rn),Jt.target=Dn,Jt.relatedTarget=Yt,an=null,mo(rn)===Xt&&(gn=new gn(Zt,Wt+"enter",bn,ft,rn),gn.target=Yt,gn.relatedTarget=Dn,an=gn),Dn=an,tn&&bn)t:{for(gn=tn,Zt=bn,Wt=0,Yt=gn;Yt;Yt=Go(Yt))Wt++;for(Yt=0,an=Zt;an;an=Go(an))Yt++;for(;0<Wt-Yt;)gn=Go(gn),Wt--;for(;0<Yt-Wt;)Zt=Go(Zt),Yt--;for(;Wt--;){if(gn===Zt||Zt!==null&&gn===Zt.alternate)break t;gn=Go(gn),Zt=Go(Zt)}gn=null}else gn=null;tn!==null&&Df(ln,Jt,tn,gn,!1),bn!==null&&Dn!==null&&Df(ln,Dn,bn,gn,!0)}}e:{if(Jt=Xt?ir(Xt):window,tn=Jt.nodeName&&Jt.nodeName.toLowerCase(),tn==="select"||tn==="input"&&Jt.type==="file")var hn=nd;else if(ed(Jt))if(id)hn=ug;else{hn=lg;var En=ag}else tn=Jt.nodeName,!tn||tn.toLowerCase()!=="input"||Jt.type!=="checkbox"&&Jt.type!=="radio"?Xt&&vl(Xt.elementType)&&(hn=nd):hn=cg;if(hn&&(hn=hn(nt,Xt))){td(ln,hn,ft,rn);break e}En&&En(nt,Jt,Xt),nt==="focusout"&&Xt&&Jt.type==="number"&&Xt.memoizedProps.value!=null&&_l(Jt,"number",Jt.value)}switch(En=Xt?ir(Xt):window,nt){case"focusin":(ed(En)||En.contentEditable==="true")&&(Eo=En,Vl=Xt,hr=null);break;case"focusout":hr=Vl=Eo=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,dd(ln,ft,rn);break;case"selectionchange":if(hg)break;case"keydown":case"keyup":dd(ln,ft,rn)}var fn;if(Ol)e:{switch(nt){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Co?Qu(nt,ft)&&(xn="onCompositionEnd"):nt==="keydown"&&ft.keyCode===229&&(xn="onCompositionStart");xn&&(Zu&&ft.locale!=="ko"&&(Co||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Co&&(fn=Wu()):(Ts=rn,Sl="value"in Ts?Ts.value:Ts.textContent,Co=!0)),En=qa(Xt,xn),0<En.length&&(xn=new Ku(xn,nt,null,ft,rn),ln.push({event:xn,listeners:En}),fn?xn.data=fn:(fn=Ju(ft),fn!==null&&(xn.data=fn)))),(fn=ng?ig(nt,ft):sg(nt,ft))&&(xn=qa(Xt,"onBeforeInput"),0<xn.length&&(En=new Ku("onBeforeInput","beforeinput",null,ft,rn),ln.push({event:En,listeners:xn}),En.data=fn)),Gg(ln,nt,Xt,ft,rn)}Vf(ln,ot)})}function Fr(nt,ot,ft){return{instance:nt,listener:ot,currentTarget:ft}}function qa(nt,ot){for(var ft=ot+"Capture",xt=[];nt!==null;){var yt=nt,Ct=yt.stateNode;if(yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ct===null||(yt=sr(nt,ft),yt!=null&&xt.unshift(Fr(nt,yt,Ct)),yt=sr(nt,ot),yt!=null&&xt.push(Fr(nt,yt,Ct))),nt.tag===3)return xt;nt=nt.return}return[]}function Go(nt){if(nt===null)return null;do nt=nt.return;while(nt&&nt.tag!==5&&nt.tag!==27);return nt||null}function Df(nt,ot,ft,xt,yt){for(var Ct=ot._reactName,It=[];ft!==null&&ft!==xt;){var Lt=ft,Ht=Lt.alternate,Xt=Lt.stateNode;if(Lt=Lt.tag,Ht!==null&&Ht===xt)break;Lt!==5&&Lt!==26&&Lt!==27||Xt===null||(Ht=Xt,yt?(Xt=sr(ft,Ct),Xt!=null&&It.unshift(Fr(ft,Xt,Ht))):yt||(Xt=sr(ft,Ct),Xt!=null&&It.push(Fr(ft,Xt,Ht)))),ft=ft.return}It.length!==0&&nt.push({event:ot,listeners:It})}var Qg=/\r\n?/g,Jg=/\u0000|\uFFFD/g;function $f(nt){return(typeof nt=="string"?nt:""+nt).replace(Qg,`
`).replace(Jg,"")}function Ff(nt,ot){return ot=$f(ot),$f(nt)===ot}function Ka(){}function Nn(nt,ot,ft,xt,yt,Ct){switch(ft){case"children":typeof xt=="string"?ot==="body"||ot==="textarea"&&xt===""||yo(nt,xt):(typeof xt=="number"||typeof xt=="bigint")&&ot!=="body"&&yo(nt,""+xt);break;case"className":Qr(nt,"class",xt);break;case"tabIndex":Qr(nt,"tabindex",xt);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(nt,ft,xt);break;case"style":Uu(nt,xt,Ct);break;case"data":if(ot!=="object"){Qr(nt,"data",xt);break}case"src":case"href":if(xt===""&&(ot!=="a"||ft!=="href")){nt.removeAttribute(ft);break}if(xt==null||typeof xt=="function"||typeof xt=="symbol"||typeof xt=="boolean"){nt.removeAttribute(ft);break}xt=ta(""+xt),nt.setAttribute(ft,xt);break;case"action":case"formAction":if(typeof xt=="function"){nt.setAttribute(ft,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Ct=="function"&&(ft==="formAction"?(ot!=="input"&&Nn(nt,ot,"name",yt.name,yt,null),Nn(nt,ot,"formEncType",yt.formEncType,yt,null),Nn(nt,ot,"formMethod",yt.formMethod,yt,null),Nn(nt,ot,"formTarget",yt.formTarget,yt,null)):(Nn(nt,ot,"encType",yt.encType,yt,null),Nn(nt,ot,"method",yt.method,yt,null),Nn(nt,ot,"target",yt.target,yt,null)));if(xt==null||typeof xt=="symbol"||typeof xt=="boolean"){nt.removeAttribute(ft);break}xt=ta(""+xt),nt.setAttribute(ft,xt);break;case"onClick":xt!=null&&(nt.onclick=Ka);break;case"onScroll":xt!=null&&kn("scroll",nt);break;case"onScrollEnd":xt!=null&&kn("scrollend",nt);break;case"dangerouslySetInnerHTML":if(xt!=null){if(typeof xt!="object"||!("__html"in xt))throw Error(de(61));if(ft=xt.__html,ft!=null){if(yt.children!=null)throw Error(de(60));nt.innerHTML=ft}}break;case"multiple":nt.multiple=xt&&typeof xt!="function"&&typeof xt!="symbol";break;case"muted":nt.muted=xt&&typeof xt!="function"&&typeof xt!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(xt==null||typeof xt=="function"||typeof xt=="boolean"||typeof xt=="symbol"){nt.removeAttribute("xlink:href");break}ft=ta(""+xt),nt.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ft);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":xt!=null&&typeof xt!="function"&&typeof xt!="symbol"?nt.setAttribute(ft,""+xt):nt.removeAttribute(ft);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":xt&&typeof xt!="function"&&typeof xt!="symbol"?nt.setAttribute(ft,""):nt.removeAttribute(ft);break;case"capture":case"download":xt===!0?nt.setAttribute(ft,""):xt!==!1&&xt!=null&&typeof xt!="function"&&typeof xt!="symbol"?nt.setAttribute(ft,xt):nt.removeAttribute(ft);break;case"cols":case"rows":case"size":case"span":xt!=null&&typeof xt!="function"&&typeof xt!="symbol"&&!isNaN(xt)&&1<=xt?nt.setAttribute(ft,xt):nt.removeAttribute(ft);break;case"rowSpan":case"start":xt==null||typeof xt=="function"||typeof xt=="symbol"||isNaN(xt)?nt.removeAttribute(ft):nt.setAttribute(ft,xt);break;case"popover":kn("beforetoggle",nt),kn("toggle",nt),Xr(nt,"popover",xt);break;case"xlinkActuate":os(nt,"http://www.w3.org/1999/xlink","xlink:actuate",xt);break;case"xlinkArcrole":os(nt,"http://www.w3.org/1999/xlink","xlink:arcrole",xt);break;case"xlinkRole":os(nt,"http://www.w3.org/1999/xlink","xlink:role",xt);break;case"xlinkShow":os(nt,"http://www.w3.org/1999/xlink","xlink:show",xt);break;case"xlinkTitle":os(nt,"http://www.w3.org/1999/xlink","xlink:title",xt);break;case"xlinkType":os(nt,"http://www.w3.org/1999/xlink","xlink:type",xt);break;case"xmlBase":os(nt,"http://www.w3.org/XML/1998/namespace","xml:base",xt);break;case"xmlLang":os(nt,"http://www.w3.org/XML/1998/namespace","xml:lang",xt);break;case"xmlSpace":os(nt,"http://www.w3.org/XML/1998/namespace","xml:space",xt);break;case"is":Xr(nt,"is",xt);break;case"innerText":case"textContent":break;default:(!(2<ft.length)||ft[0]!=="o"&&ft[0]!=="O"||ft[1]!=="n"&&ft[1]!=="N")&&(ft=Rm.get(ft)||ft,Xr(nt,ft,xt))}}function ru(nt,ot,ft,xt,yt,Ct){switch(ft){case"style":Uu(nt,xt,Ct);break;case"dangerouslySetInnerHTML":if(xt!=null){if(typeof xt!="object"||!("__html"in xt))throw Error(de(61));if(ft=xt.__html,ft!=null){if(yt.children!=null)throw Error(de(60));nt.innerHTML=ft}}break;case"children":typeof xt=="string"?yo(nt,xt):(typeof xt=="number"||typeof xt=="bigint")&&yo(nt,""+xt);break;case"onScroll":xt!=null&&kn("scroll",nt);break;case"onScrollEnd":xt!=null&&kn("scrollend",nt);break;case"onClick":xt!=null&&(nt.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iu.hasOwnProperty(ft))e:{if(ft[0]==="o"&&ft[1]==="n"&&(yt=ft.endsWith("Capture"),ot=ft.slice(2,yt?ft.length-7:void 0),Ct=nt[_i]||null,Ct=Ct!=null?Ct[ft]:null,typeof Ct=="function"&&nt.removeEventListener(ot,Ct,yt),typeof xt=="function")){typeof Ct!="function"&&Ct!==null&&(ft in nt?nt[ft]=null:nt.hasAttribute(ft)&&nt.removeAttribute(ft)),nt.addEventListener(ot,xt,yt);break e}ft in nt?nt[ft]=xt:xt===!0?nt.setAttribute(ft,""):Xr(nt,ft,xt)}}}function mi(nt,ot,ft){switch(ot){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kn("error",nt),kn("load",nt);var xt=!1,yt=!1,Ct;for(Ct in ft)if(ft.hasOwnProperty(Ct)){var It=ft[Ct];if(It!=null)switch(Ct){case"src":xt=!0;break;case"srcSet":yt=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(de(137,ot));default:Nn(nt,ot,Ct,It,ft,null)}}yt&&Nn(nt,ot,"srcSet",ft.srcSet,ft,null),xt&&Nn(nt,ot,"src",ft.src,ft,null);return;case"input":kn("invalid",nt);var Lt=Ct=It=yt=null,Ht=null,Xt=null;for(xt in ft)if(ft.hasOwnProperty(xt)){var rn=ft[xt];if(rn!=null)switch(xt){case"name":yt=rn;break;case"type":It=rn;break;case"checked":Ht=rn;break;case"defaultChecked":Xt=rn;break;case"value":Ct=rn;break;case"defaultValue":Lt=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(de(137,ot));break;default:Nn(nt,ot,xt,rn,ft,null)}}Nu(nt,Ct,Lt,Ht,Xt,It,yt,!1),Jr(nt);return;case"select":kn("invalid",nt),xt=It=Ct=null;for(yt in ft)if(ft.hasOwnProperty(yt)&&(Lt=ft[yt],Lt!=null))switch(yt){case"value":Ct=Lt;break;case"defaultValue":It=Lt;break;case"multiple":xt=Lt;default:Nn(nt,ot,yt,Lt,ft,null)}ot=Ct,ft=It,nt.multiple=!!xt,ot!=null?wo(nt,!!xt,ot,!1):ft!=null&&wo(nt,!!xt,ft,!0);return;case"textarea":kn("invalid",nt),Ct=yt=xt=null;for(It in ft)if(ft.hasOwnProperty(It)&&(Lt=ft[It],Lt!=null))switch(It){case"value":xt=Lt;break;case"defaultValue":yt=Lt;break;case"children":Ct=Lt;break;case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(de(91));break;default:Nn(nt,ot,It,Lt,ft,null)}$u(nt,xt,yt,Ct),Jr(nt);return;case"option":for(Ht in ft)if(ft.hasOwnProperty(Ht)&&(xt=ft[Ht],xt!=null))switch(Ht){case"selected":nt.selected=xt&&typeof xt!="function"&&typeof xt!="symbol";break;default:Nn(nt,ot,Ht,xt,ft,null)}return;case"dialog":kn("beforetoggle",nt),kn("toggle",nt),kn("cancel",nt),kn("close",nt);break;case"iframe":case"object":kn("load",nt);break;case"video":case"audio":for(xt=0;xt<$r.length;xt++)kn($r[xt],nt);break;case"image":kn("error",nt),kn("load",nt);break;case"details":kn("toggle",nt);break;case"embed":case"source":case"link":kn("error",nt),kn("load",nt);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xt in ft)if(ft.hasOwnProperty(Xt)&&(xt=ft[Xt],xt!=null))switch(Xt){case"children":case"dangerouslySetInnerHTML":throw Error(de(137,ot));default:Nn(nt,ot,Xt,xt,ft,null)}return;default:if(vl(ot)){for(rn in ft)ft.hasOwnProperty(rn)&&(xt=ft[rn],xt!==void 0&&ru(nt,ot,rn,xt,ft,void 0));return}}for(Lt in ft)ft.hasOwnProperty(Lt)&&(xt=ft[Lt],xt!=null&&Nn(nt,ot,Lt,xt,ft,null))}function ep(nt,ot,ft,xt){switch(ot){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var yt=null,Ct=null,It=null,Lt=null,Ht=null,Xt=null,rn=null;for(tn in ft){var ln=ft[tn];if(ft.hasOwnProperty(tn)&&ln!=null)switch(tn){case"checked":break;case"value":break;case"defaultValue":Ht=ln;default:xt.hasOwnProperty(tn)||Nn(nt,ot,tn,null,xt,ln)}}for(var Jt in xt){var tn=xt[Jt];if(ln=ft[Jt],xt.hasOwnProperty(Jt)&&(tn!=null||ln!=null))switch(Jt){case"type":Ct=tn;break;case"name":yt=tn;break;case"checked":Xt=tn;break;case"defaultChecked":rn=tn;break;case"value":It=tn;break;case"defaultValue":Lt=tn;break;case"children":case"dangerouslySetInnerHTML":if(tn!=null)throw Error(de(137,ot));break;default:tn!==ln&&Nn(nt,ot,Jt,tn,xt,ln)}}yl(nt,It,Lt,Ht,Xt,rn,Ct,yt);return;case"select":tn=It=Lt=Jt=null;for(Ct in ft)if(Ht=ft[Ct],ft.hasOwnProperty(Ct)&&Ht!=null)switch(Ct){case"value":break;case"multiple":tn=Ht;default:xt.hasOwnProperty(Ct)||Nn(nt,ot,Ct,null,xt,Ht)}for(yt in xt)if(Ct=xt[yt],Ht=ft[yt],xt.hasOwnProperty(yt)&&(Ct!=null||Ht!=null))switch(yt){case"value":Jt=Ct;break;case"defaultValue":Lt=Ct;break;case"multiple":It=Ct;default:Ct!==Ht&&Nn(nt,ot,yt,Ct,xt,Ht)}ot=Lt,ft=It,xt=tn,Jt!=null?wo(nt,!!ft,Jt,!1):!!xt!=!!ft&&(ot!=null?wo(nt,!!ft,ot,!0):wo(nt,!!ft,ft?[]:"",!1));return;case"textarea":tn=Jt=null;for(Lt in ft)if(yt=ft[Lt],ft.hasOwnProperty(Lt)&&yt!=null&&!xt.hasOwnProperty(Lt))switch(Lt){case"value":break;case"children":break;default:Nn(nt,ot,Lt,null,xt,yt)}for(It in xt)if(yt=xt[It],Ct=ft[It],xt.hasOwnProperty(It)&&(yt!=null||Ct!=null))switch(It){case"value":Jt=yt;break;case"defaultValue":tn=yt;break;case"children":break;case"dangerouslySetInnerHTML":if(yt!=null)throw Error(de(91));break;default:yt!==Ct&&Nn(nt,ot,It,yt,xt,Ct)}Du(nt,Jt,tn);return;case"option":for(var bn in ft)if(Jt=ft[bn],ft.hasOwnProperty(bn)&&Jt!=null&&!xt.hasOwnProperty(bn))switch(bn){case"selected":nt.selected=!1;break;default:Nn(nt,ot,bn,null,xt,Jt)}for(Ht in xt)if(Jt=xt[Ht],tn=ft[Ht],xt.hasOwnProperty(Ht)&&Jt!==tn&&(Jt!=null||tn!=null))switch(Ht){case"selected":nt.selected=Jt&&typeof Jt!="function"&&typeof Jt!="symbol";break;default:Nn(nt,ot,Ht,Jt,xt,tn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gn in ft)Jt=ft[gn],ft.hasOwnProperty(gn)&&Jt!=null&&!xt.hasOwnProperty(gn)&&Nn(nt,ot,gn,null,xt,Jt);for(Xt in xt)if(Jt=xt[Xt],tn=ft[Xt],xt.hasOwnProperty(Xt)&&Jt!==tn&&(Jt!=null||tn!=null))switch(Xt){case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(de(137,ot));break;default:Nn(nt,ot,Xt,Jt,xt,tn)}return;default:if(vl(ot)){for(var Dn in ft)Jt=ft[Dn],ft.hasOwnProperty(Dn)&&Jt!==void 0&&!xt.hasOwnProperty(Dn)&&ru(nt,ot,Dn,void 0,xt,Jt);for(rn in xt)Jt=xt[rn],tn=ft[rn],!xt.hasOwnProperty(rn)||Jt===tn||Jt===void 0&&tn===void 0||ru(nt,ot,rn,Jt,xt,tn);return}}for(var Zt in ft)Jt=ft[Zt],ft.hasOwnProperty(Zt)&&Jt!=null&&!xt.hasOwnProperty(Zt)&&Nn(nt,ot,Zt,null,xt,Jt);for(ln in xt)Jt=xt[ln],tn=ft[ln],!xt.hasOwnProperty(ln)||Jt===tn||Jt==null&&tn==null||Nn(nt,ot,ln,Jt,xt,tn)}var au=null,lu=null;function Ga(nt){return nt.nodeType===9?nt:nt.ownerDocument}function Uf(nt){switch(nt){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zf(nt,ot){if(nt===0)switch(ot){case"svg":return 1;case"math":return 2;default:return 0}return nt===1&&ot==="foreignObject"?0:nt}function cu(nt,ot){return nt==="textarea"||nt==="noscript"||typeof ot.children=="string"||typeof ot.children=="number"||typeof ot.children=="bigint"||typeof ot.dangerouslySetInnerHTML=="object"&&ot.dangerouslySetInnerHTML!==null&&ot.dangerouslySetInnerHTML.__html!=null}var uu=null;function tp(){var nt=window.event;return nt&&nt.type==="popstate"?nt===uu?!1:(uu=nt,!0):(uu=null,!1)}var Hf=typeof setTimeout=="function"?setTimeout:void 0,np=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,ip=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(nt){return Wf.resolve(null).then(nt).catch(sp)}:Hf;function sp(nt){setTimeout(function(){throw nt})}function Us(nt){return nt==="head"}function jf(nt,ot){var ft=ot,xt=0,yt=0;do{var Ct=ft.nextSibling;if(nt.removeChild(ft),Ct&&Ct.nodeType===8)if(ft=Ct.data,ft==="/$"){if(0<xt&&8>xt){ft=xt;var It=nt.ownerDocument;if(ft&1&&Ur(It.documentElement),ft&2&&Ur(It.body),ft&4)for(ft=It.head,Ur(ft),It=ft.firstChild;It;){var Lt=It.nextSibling,Ht=It.nodeName;It[nr]||Ht==="SCRIPT"||Ht==="STYLE"||Ht==="LINK"&&It.rel.toLowerCase()==="stylesheet"||ft.removeChild(It),It=Lt}}if(yt===0){nt.removeChild(Ct),Zr(ot);return}yt--}else ft==="$"||ft==="$?"||ft==="$!"?yt++:xt=ft.charCodeAt(0)-48;else xt=0;ft=Ct}while(ft);Zr(ot)}function du(nt){var ot=nt.firstChild;for(ot&&ot.nodeType===10&&(ot=ot.nextSibling);ot;){var ft=ot;switch(ot=ot.nextSibling,ft.nodeName){case"HTML":case"HEAD":case"BODY":du(ft),pl(ft);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ft.rel.toLowerCase()==="stylesheet")continue}nt.removeChild(ft)}}function op(nt,ot,ft,xt){for(;nt.nodeType===1;){var yt=ft;if(nt.nodeName.toLowerCase()!==ot.toLowerCase()){if(!xt&&(nt.nodeName!=="INPUT"||nt.type!=="hidden"))break}else if(xt){if(!nt[nr])switch(ot){case"meta":if(!nt.hasAttribute("itemprop"))break;return nt;case"link":if(Ct=nt.getAttribute("rel"),Ct==="stylesheet"&&nt.hasAttribute("data-precedence"))break;if(Ct!==yt.rel||nt.getAttribute("href")!==(yt.href==null||yt.href===""?null:yt.href)||nt.getAttribute("crossorigin")!==(yt.crossOrigin==null?null:yt.crossOrigin)||nt.getAttribute("title")!==(yt.title==null?null:yt.title))break;return nt;case"style":if(nt.hasAttribute("data-precedence"))break;return nt;case"script":if(Ct=nt.getAttribute("src"),(Ct!==(yt.src==null?null:yt.src)||nt.getAttribute("type")!==(yt.type==null?null:yt.type)||nt.getAttribute("crossorigin")!==(yt.crossOrigin==null?null:yt.crossOrigin))&&Ct&&nt.hasAttribute("async")&&!nt.hasAttribute("itemprop"))break;return nt;default:return nt}}else if(ot==="input"&&nt.type==="hidden"){var Ct=yt.name==null?null:""+yt.name;if(yt.type==="hidden"&&nt.getAttribute("name")===Ct)return nt}else return nt;if(nt=Zi(nt.nextSibling),nt===null)break}return null}function rp(nt,ot,ft){if(ot==="")return null;for(;nt.nodeType!==3;)if((nt.nodeType!==1||nt.nodeName!=="INPUT"||nt.type!=="hidden")&&!ft||(nt=Zi(nt.nextSibling),nt===null))return null;return nt}function hu(nt){return nt.data==="$!"||nt.data==="$?"&&nt.ownerDocument.readyState==="complete"}function ap(nt,ot){var ft=nt.ownerDocument;if(nt.data!=="$?"||ft.readyState==="complete")ot();else{var xt=function(){ot(),ft.removeEventListener("DOMContentLoaded",xt)};ft.addEventListener("DOMContentLoaded",xt),nt._reactRetry=xt}}function Zi(nt){for(;nt!=null;nt=nt.nextSibling){var ot=nt.nodeType;if(ot===1||ot===3)break;if(ot===8){if(ot=nt.data,ot==="$"||ot==="$!"||ot==="$?"||ot==="F!"||ot==="F")break;if(ot==="/$")return null}}return nt}var fu=null;function qf(nt){nt=nt.previousSibling;for(var ot=0;nt;){if(nt.nodeType===8){var ft=nt.data;if(ft==="$"||ft==="$!"||ft==="$?"){if(ot===0)return nt;ot--}else ft==="/$"&&ot++}nt=nt.previousSibling}return null}function Kf(nt,ot,ft){switch(ot=Ga(ft),nt){case"html":if(nt=ot.documentElement,!nt)throw Error(de(452));return nt;case"head":if(nt=ot.head,!nt)throw Error(de(453));return nt;case"body":if(nt=ot.body,!nt)throw Error(de(454));return nt;default:throw Error(de(451))}}function Ur(nt){for(var ot=nt.attributes;ot.length;)nt.removeAttributeNode(ot[0]);pl(nt)}var Hi=new Map,Gf=new Set;function Za(nt){return typeof nt.getRootNode=="function"?nt.getRootNode():nt.nodeType===9?nt:nt.ownerDocument}var ws=jt.d;jt.d={f:lp,r:cp,D:up,C:dp,L:hp,m:fp,X:gp,S:mp,M:pp};function lp(){var nt=ws.f(),ot=Fa();return nt||ot}function cp(nt){var ot=go(nt);ot!==null&&ot.tag===5&&ot.type==="form"?fh(ot):ws.r(nt)}var Zo=typeof document>"u"?null:document;function Zf(nt,ot,ft){var xt=Zo;if(xt&&typeof ot=="string"&&ot){var yt=Vi(ot);yt='link[rel="'+nt+'"][href="'+yt+'"]',typeof ft=="string"&&(yt+='[crossorigin="'+ft+'"]'),Gf.has(yt)||(Gf.add(yt),nt={rel:nt,crossOrigin:ft,href:ot},xt.querySelector(yt)===null&&(ot=xt.createElement("link"),mi(ot,"link",nt),ai(ot),xt.head.appendChild(ot)))}}function up(nt){ws.D(nt),Zf("dns-prefetch",nt,null)}function dp(nt,ot){ws.C(nt,ot),Zf("preconnect",nt,ot)}function hp(nt,ot,ft){ws.L(nt,ot,ft);var xt=Zo;if(xt&&nt&&ot){var yt='link[rel="preload"][as="'+Vi(ot)+'"]';ot==="image"&&ft&&ft.imageSrcSet?(yt+='[imagesrcset="'+Vi(ft.imageSrcSet)+'"]',typeof ft.imageSizes=="string"&&(yt+='[imagesizes="'+Vi(ft.imageSizes)+'"]')):yt+='[href="'+Vi(nt)+'"]';var Ct=yt;switch(ot){case"style":Ct=Yo(nt);break;case"script":Ct=Xo(nt)}Hi.has(Ct)||(nt=mt({rel:"preload",href:ot==="image"&&ft&&ft.imageSrcSet?void 0:nt,as:ot},ft),Hi.set(Ct,nt),xt.querySelector(yt)!==null||ot==="style"&&xt.querySelector(zr(Ct))||ot==="script"&&xt.querySelector(Hr(Ct))||(ot=xt.createElement("link"),mi(ot,"link",nt),ai(ot),xt.head.appendChild(ot)))}}function fp(nt,ot){ws.m(nt,ot);var ft=Zo;if(ft&&nt){var xt=ot&&typeof ot.as=="string"?ot.as:"script",yt='link[rel="modulepreload"][as="'+Vi(xt)+'"][href="'+Vi(nt)+'"]',Ct=yt;switch(xt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Ct=Xo(nt)}if(!Hi.has(Ct)&&(nt=mt({rel:"modulepreload",href:nt},ot),Hi.set(Ct,nt),ft.querySelector(yt)===null)){switch(xt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ft.querySelector(Hr(Ct)))return}xt=ft.createElement("link"),mi(xt,"link",nt),ai(xt),ft.head.appendChild(xt)}}}function mp(nt,ot,ft){ws.S(nt,ot,ft);var xt=Zo;if(xt&&nt){var yt=po(xt).hoistableStyles,Ct=Yo(nt);ot=ot||"default";var It=yt.get(Ct);if(!It){var Lt={loading:0,preload:null};if(It=xt.querySelector(zr(Ct)))Lt.loading=5;else{nt=mt({rel:"stylesheet",href:nt,"data-precedence":ot},ft),(ft=Hi.get(Ct))&&mu(nt,ft);var Ht=It=xt.createElement("link");ai(Ht),mi(Ht,"link",nt),Ht._p=new Promise(function(Xt,rn){Ht.onload=Xt,Ht.onerror=rn}),Ht.addEventListener("load",function(){Lt.loading|=1}),Ht.addEventListener("error",function(){Lt.loading|=2}),Lt.loading|=4,Ya(It,ot,xt)}It={type:"stylesheet",instance:It,count:1,state:Lt},yt.set(Ct,It)}}}function gp(nt,ot){ws.X(nt,ot);var ft=Zo;if(ft&&nt){var xt=po(ft).hoistableScripts,yt=Xo(nt),Ct=xt.get(yt);Ct||(Ct=ft.querySelector(Hr(yt)),Ct||(nt=mt({src:nt,async:!0},ot),(ot=Hi.get(yt))&&gu(nt,ot),Ct=ft.createElement("script"),ai(Ct),mi(Ct,"link",nt),ft.head.appendChild(Ct)),Ct={type:"script",instance:Ct,count:1,state:null},xt.set(yt,Ct))}}function pp(nt,ot){ws.M(nt,ot);var ft=Zo;if(ft&&nt){var xt=po(ft).hoistableScripts,yt=Xo(nt),Ct=xt.get(yt);Ct||(Ct=ft.querySelector(Hr(yt)),Ct||(nt=mt({src:nt,async:!0,type:"module"},ot),(ot=Hi.get(yt))&&gu(nt,ot),Ct=ft.createElement("script"),ai(Ct),mi(Ct,"link",nt),ft.head.appendChild(Ct)),Ct={type:"script",instance:Ct,count:1,state:null},xt.set(yt,Ct))}}function Yf(nt,ot,ft,xt){var yt=(yt=dn.current)?Za(yt):null;if(!yt)throw Error(de(446));switch(nt){case"meta":case"title":return null;case"style":return typeof ft.precedence=="string"&&typeof ft.href=="string"?(ot=Yo(ft.href),ft=po(yt).hoistableStyles,xt=ft.get(ot),xt||(xt={type:"style",instance:null,count:0,state:null},ft.set(ot,xt)),xt):{type:"void",instance:null,count:0,state:null};case"link":if(ft.rel==="stylesheet"&&typeof ft.href=="string"&&typeof ft.precedence=="string"){nt=Yo(ft.href);var Ct=po(yt).hoistableStyles,It=Ct.get(nt);if(It||(yt=yt.ownerDocument||yt,It={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Ct.set(nt,It),(Ct=yt.querySelector(zr(nt)))&&!Ct._p&&(It.instance=Ct,It.state.loading=5),Hi.has(nt)||(ft={rel:"preload",as:"style",href:ft.href,crossOrigin:ft.crossOrigin,integrity:ft.integrity,media:ft.media,hrefLang:ft.hrefLang,referrerPolicy:ft.referrerPolicy},Hi.set(nt,ft),Ct||xp(yt,nt,ft,It.state))),ot&&xt===null)throw Error(de(528,""));return It}if(ot&&xt!==null)throw Error(de(529,""));return null;case"script":return ot=ft.async,ft=ft.src,typeof ft=="string"&&ot&&typeof ot!="function"&&typeof ot!="symbol"?(ot=Xo(ft),ft=po(yt).hoistableScripts,xt=ft.get(ot),xt||(xt={type:"script",instance:null,count:0,state:null},ft.set(ot,xt)),xt):{type:"void",instance:null,count:0,state:null};default:throw Error(de(444,nt))}}function Yo(nt){return'href="'+Vi(nt)+'"'}function zr(nt){return'link[rel="stylesheet"]['+nt+"]"}function Xf(nt){return mt({},nt,{"data-precedence":nt.precedence,precedence:null})}function xp(nt,ot,ft,xt){nt.querySelector('link[rel="preload"][as="style"]['+ot+"]")?xt.loading=1:(ot=nt.createElement("link"),xt.preload=ot,ot.addEventListener("load",function(){return xt.loading|=1}),ot.addEventListener("error",function(){return xt.loading|=2}),mi(ot,"link",ft),ai(ot),nt.head.appendChild(ot))}function Xo(nt){return'[src="'+Vi(nt)+'"]'}function Hr(nt){return"script[async]"+nt}function Qf(nt,ot,ft){if(ot.count++,ot.instance===null)switch(ot.type){case"style":var xt=nt.querySelector('style[data-href~="'+Vi(ft.href)+'"]');if(xt)return ot.instance=xt,ai(xt),xt;var yt=mt({},ft,{"data-href":ft.href,"data-precedence":ft.precedence,href:null,precedence:null});return xt=(nt.ownerDocument||nt).createElement("style"),ai(xt),mi(xt,"style",yt),Ya(xt,ft.precedence,nt),ot.instance=xt;case"stylesheet":yt=Yo(ft.href);var Ct=nt.querySelector(zr(yt));if(Ct)return ot.state.loading|=4,ot.instance=Ct,ai(Ct),Ct;xt=Xf(ft),(yt=Hi.get(yt))&&mu(xt,yt),Ct=(nt.ownerDocument||nt).createElement("link"),ai(Ct);var It=Ct;return It._p=new Promise(function(Lt,Ht){It.onload=Lt,It.onerror=Ht}),mi(Ct,"link",xt),ot.state.loading|=4,Ya(Ct,ft.precedence,nt),ot.instance=Ct;case"script":return Ct=Xo(ft.src),(yt=nt.querySelector(Hr(Ct)))?(ot.instance=yt,ai(yt),yt):(xt=ft,(yt=Hi.get(Ct))&&(xt=mt({},ft),gu(xt,yt)),nt=nt.ownerDocument||nt,yt=nt.createElement("script"),ai(yt),mi(yt,"link",xt),nt.head.appendChild(yt),ot.instance=yt);case"void":return null;default:throw Error(de(443,ot.type))}else ot.type==="stylesheet"&&(ot.state.loading&4)===0&&(xt=ot.instance,ot.state.loading|=4,Ya(xt,ft.precedence,nt));return ot.instance}function Ya(nt,ot,ft){for(var xt=ft.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),yt=xt.length?xt[xt.length-1]:null,Ct=yt,It=0;It<xt.length;It++){var Lt=xt[It];if(Lt.dataset.precedence===ot)Ct=Lt;else if(Ct!==yt)break}Ct?Ct.parentNode.insertBefore(nt,Ct.nextSibling):(ot=ft.nodeType===9?ft.head:ft,ot.insertBefore(nt,ot.firstChild))}function mu(nt,ot){nt.crossOrigin==null&&(nt.crossOrigin=ot.crossOrigin),nt.referrerPolicy==null&&(nt.referrerPolicy=ot.referrerPolicy),nt.title==null&&(nt.title=ot.title)}function gu(nt,ot){nt.crossOrigin==null&&(nt.crossOrigin=ot.crossOrigin),nt.referrerPolicy==null&&(nt.referrerPolicy=ot.referrerPolicy),nt.integrity==null&&(nt.integrity=ot.integrity)}var Xa=null;function Jf(nt,ot,ft){if(Xa===null){var xt=new Map,yt=Xa=new Map;yt.set(ft,xt)}else yt=Xa,xt=yt.get(ft),xt||(xt=new Map,yt.set(ft,xt));if(xt.has(nt))return xt;for(xt.set(nt,null),ft=ft.getElementsByTagName(nt),yt=0;yt<ft.length;yt++){var Ct=ft[yt];if(!(Ct[nr]||Ct[xi]||nt==="link"&&Ct.getAttribute("rel")==="stylesheet")&&Ct.namespaceURI!=="http://www.w3.org/2000/svg"){var It=Ct.getAttribute(ot)||"";It=nt+It;var Lt=xt.get(It);Lt?Lt.push(Ct):xt.set(It,[Ct])}}return xt}function em(nt,ot,ft){nt=nt.ownerDocument||nt,nt.head.insertBefore(ft,ot==="title"?nt.querySelector("head > title"):null)}function bp(nt,ot,ft){if(ft===1||ot.itemProp!=null)return!1;switch(nt){case"meta":case"title":return!0;case"style":if(typeof ot.precedence!="string"||typeof ot.href!="string"||ot.href==="")break;return!0;case"link":if(typeof ot.rel!="string"||typeof ot.href!="string"||ot.href===""||ot.onLoad||ot.onError)break;switch(ot.rel){case"stylesheet":return nt=ot.disabled,typeof ot.precedence=="string"&&nt==null;default:return!0}case"script":if(ot.async&&typeof ot.async!="function"&&typeof ot.async!="symbol"&&!ot.onLoad&&!ot.onError&&ot.src&&typeof ot.src=="string")return!0}return!1}function tm(nt){return!(nt.type==="stylesheet"&&(nt.state.loading&3)===0)}var Wr=null;function wp(){}function yp(nt,ot,ft){if(Wr===null)throw Error(de(475));var xt=Wr;if(ot.type==="stylesheet"&&(typeof ft.media!="string"||matchMedia(ft.media).matches!==!1)&&(ot.state.loading&4)===0){if(ot.instance===null){var yt=Yo(ft.href),Ct=nt.querySelector(zr(yt));if(Ct){nt=Ct._p,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"&&(xt.count++,xt=Qa.bind(xt),nt.then(xt,xt)),ot.state.loading|=4,ot.instance=Ct,ai(Ct);return}Ct=nt.ownerDocument||nt,ft=Xf(ft),(yt=Hi.get(yt))&&mu(ft,yt),Ct=Ct.createElement("link"),ai(Ct);var It=Ct;It._p=new Promise(function(Lt,Ht){It.onload=Lt,It.onerror=Ht}),mi(Ct,"link",ft),ot.instance=Ct}xt.stylesheets===null&&(xt.stylesheets=new Map),xt.stylesheets.set(ot,nt),(nt=ot.state.preload)&&(ot.state.loading&3)===0&&(xt.count++,ot=Qa.bind(xt),nt.addEventListener("load",ot),nt.addEventListener("error",ot))}}function _p(){if(Wr===null)throw Error(de(475));var nt=Wr;return nt.stylesheets&&nt.count===0&&pu(nt,nt.stylesheets),0<nt.count?function(ot){var ft=setTimeout(function(){if(nt.stylesheets&&pu(nt,nt.stylesheets),nt.unsuspend){var xt=nt.unsuspend;nt.unsuspend=null,xt()}},6e4);return nt.unsuspend=ot,function(){nt.unsuspend=null,clearTimeout(ft)}}:null}function Qa(){if(this.count--,this.count===0){if(this.stylesheets)pu(this,this.stylesheets);else if(this.unsuspend){var nt=this.unsuspend;this.unsuspend=null,nt()}}}var Ja=null;function pu(nt,ot){nt.stylesheets=null,nt.unsuspend!==null&&(nt.count++,Ja=new Map,ot.forEach(vp,nt),Ja=null,Qa.call(nt))}function vp(nt,ot){if(!(ot.state.loading&4)){var ft=Ja.get(nt);if(ft)var xt=ft.get(null);else{ft=new Map,Ja.set(nt,ft);for(var yt=nt.querySelectorAll("link[data-precedence],style[data-precedence]"),Ct=0;Ct<yt.length;Ct++){var It=yt[Ct];(It.nodeName==="LINK"||It.getAttribute("media")!=="not all")&&(ft.set(It.dataset.precedence,It),xt=It)}xt&&ft.set(null,xt)}yt=ot.instance,It=yt.getAttribute("data-precedence"),Ct=ft.get(It)||xt,Ct===xt&&ft.set(null,yt),ft.set(It,yt),this.count++,xt=Qa.bind(this),yt.addEventListener("load",xt),yt.addEventListener("error",xt),Ct?Ct.parentNode.insertBefore(yt,Ct.nextSibling):(nt=nt.nodeType===9?nt.head:nt,nt.insertBefore(yt,nt.firstChild)),ot.state.loading|=4}}var jr={$$typeof:Ot,Provider:null,Consumer:null,_currentValue:Qt,_currentValue2:Qt,_threadCount:0};function Cp(nt,ot,ft,xt,yt,Ct,It,Lt){this.tag=1,this.containerInfo=nt,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.hiddenUpdates=hl(null),this.identifierPrefix=xt,this.onUncaughtError=yt,this.onCaughtError=Ct,this.onRecoverableError=It,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Lt,this.incompleteTransitions=new Map}function nm(nt,ot,ft,xt,yt,Ct,It,Lt,Ht,Xt,rn,ln){return nt=new Cp(nt,ot,ft,It,Lt,Ht,Xt,ln),ot=1,Ct===!0&&(ot|=24),Ct=Ai(3,null,null,ot),nt.current=Ct,Ct.stateNode=nt,ot=Xl(),ot.refCount++,nt.pooledCache=ot,ot.refCount++,Ct.memoizedState={element:xt,isDehydrated:ft,cache:ot},tc(Ct),nt}function im(nt){return nt?(nt=Ao,nt):Ao}function sm(nt,ot,ft,xt,yt,Ct){yt=im(yt),xt.context===null?xt.context=yt:xt.pendingContext=yt,xt=As(ot),xt.payload={element:ft},Ct=Ct===void 0?null:Ct,Ct!==null&&(xt.callback=Ct),ft=Rs(nt,xt,ot),ft!==null&&(Bi(ft,nt,ot),_r(ft,nt,ot))}function om(nt,ot){if(nt=nt.memoizedState,nt!==null&&nt.dehydrated!==null){var ft=nt.retryLane;nt.retryLane=ft!==0&&ft<ot?ft:ot}}function xu(nt,ot){om(nt,ot),(nt=nt.alternate)&&om(nt,ot)}function rm(nt){if(nt.tag===13){var ot=So(nt,67108864);ot!==null&&Bi(ot,nt,67108864),xu(nt,67108864)}}var el=!0;function Ep(nt,ot,ft,xt){var yt=Nt.T;Nt.T=null;var Ct=jt.p;try{jt.p=2,bu(nt,ot,ft,xt)}finally{jt.p=Ct,Nt.T=yt}}function Tp(nt,ot,ft,xt){var yt=Nt.T;Nt.T=null;var Ct=jt.p;try{jt.p=8,bu(nt,ot,ft,xt)}finally{jt.p=Ct,Nt.T=yt}}function bu(nt,ot,ft,xt){if(el){var yt=wu(xt);if(yt===null)ou(nt,ot,xt,tl,ft),lm(nt,xt);else if(Sp(yt,nt,ot,ft,xt))xt.stopPropagation();else if(lm(nt,xt),ot&4&&-1<kp.indexOf(nt)){for(;yt!==null;){var Ct=go(yt);if(Ct!==null)switch(Ct.tag){case 3:if(Ct=Ct.stateNode,Ct.current.memoizedState.isDehydrated){var It=mn(Ct.pendingLanes);if(It!==0){var Lt=Ct;for(Lt.pendingLanes|=2,Lt.entangledLanes|=2;It;){var Ht=1<<31-ei(It);Lt.entanglements[1]|=Ht,It&=~Ht}ns(Ct),(Mn&6)===0&&(Da=Wn()+500,Dr(0))}}break;case 13:Lt=So(Ct,2),Lt!==null&&Bi(Lt,Ct,2),Fa(),xu(Ct,2)}if(Ct=wu(xt),Ct===null&&ou(nt,ot,xt,tl,ft),Ct===yt)break;yt=Ct}yt!==null&&xt.stopPropagation()}else ou(nt,ot,xt,null,ft)}}function wu(nt){return nt=El(nt),yu(nt)}var tl=null;function yu(nt){if(tl=null,nt=mo(nt),nt!==null){var ot=Le(nt);if(ot===null)nt=null;else{var ft=ot.tag;if(ft===13){if(nt=Ye(ot),nt!==null)return nt;nt=null}else if(ft===3){if(ot.stateNode.current.memoizedState.isDehydrated)return ot.tag===3?ot.stateNode.containerInfo:null;nt=null}else ot!==nt&&(nt=null)}}return tl=nt,null}function am(nt){switch(nt){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ri()){case ji:return 2;case gi:return 8;case Gn:case pn:return 32;case is:return 268435456;default:return 32}default:return 32}}var _u=!1,zs=null,Hs=null,Ws=null,qr=new Map,Kr=new Map,js=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lm(nt,ot){switch(nt){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":qr.delete(ot.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(ot.pointerId)}}function Gr(nt,ot,ft,xt,yt,Ct){return nt===null||nt.nativeEvent!==Ct?(nt={blockedOn:ot,domEventName:ft,eventSystemFlags:xt,nativeEvent:Ct,targetContainers:[yt]},ot!==null&&(ot=go(ot),ot!==null&&rm(ot)),nt):(nt.eventSystemFlags|=xt,ot=nt.targetContainers,yt!==null&&ot.indexOf(yt)===-1&&ot.push(yt),nt)}function Sp(nt,ot,ft,xt,yt){switch(ot){case"focusin":return zs=Gr(zs,nt,ot,ft,xt,yt),!0;case"dragenter":return Hs=Gr(Hs,nt,ot,ft,xt,yt),!0;case"mouseover":return Ws=Gr(Ws,nt,ot,ft,xt,yt),!0;case"pointerover":var Ct=yt.pointerId;return qr.set(Ct,Gr(qr.get(Ct)||null,nt,ot,ft,xt,yt)),!0;case"gotpointercapture":return Ct=yt.pointerId,Kr.set(Ct,Gr(Kr.get(Ct)||null,nt,ot,ft,xt,yt)),!0}return!1}function cm(nt){var ot=mo(nt.target);if(ot!==null){var ft=Le(ot);if(ft!==null){if(ot=ft.tag,ot===13){if(ot=Ye(ft),ot!==null){nt.blockedOn=ot,ym(nt.priority,function(){if(ft.tag===13){var xt=Oi();xt=fl(xt);var yt=So(ft,xt);yt!==null&&Bi(yt,ft,xt),xu(ft,xt)}});return}}else if(ot===3&&ft.stateNode.current.memoizedState.isDehydrated){nt.blockedOn=ft.tag===3?ft.stateNode.containerInfo:null;return}}}nt.blockedOn=null}function nl(nt){if(nt.blockedOn!==null)return!1;for(var ot=nt.targetContainers;0<ot.length;){var ft=wu(nt.nativeEvent);if(ft===null){ft=nt.nativeEvent;var xt=new ft.constructor(ft.type,ft);Cl=xt,ft.target.dispatchEvent(xt),Cl=null}else return ot=go(ft),ot!==null&&rm(ot),nt.blockedOn=ft,!1;ot.shift()}return!0}function um(nt,ot,ft){nl(nt)&&ft.delete(ot)}function Ap(){_u=!1,zs!==null&&nl(zs)&&(zs=null),Hs!==null&&nl(Hs)&&(Hs=null),Ws!==null&&nl(Ws)&&(Ws=null),qr.forEach(um),Kr.forEach(um)}function il(nt,ot){nt.blockedOn===ot&&(nt.blockedOn=null,_u||(_u=!0,me.unstable_scheduleCallback(me.unstable_NormalPriority,Ap)))}var sl=null;function dm(nt){sl!==nt&&(sl=nt,me.unstable_scheduleCallback(me.unstable_NormalPriority,function(){sl===nt&&(sl=null);for(var ot=0;ot<nt.length;ot+=3){var ft=nt[ot],xt=nt[ot+1],yt=nt[ot+2];if(typeof xt!="function"){if(yu(xt||ft)===null)continue;break}var Ct=go(ft);Ct!==null&&(nt.splice(ot,3),ot-=3,yc(Ct,{pending:!0,data:yt,method:ft.method,action:xt},xt,yt))}}))}function Zr(nt){function ot(Ht){return il(Ht,nt)}zs!==null&&il(zs,nt),Hs!==null&&il(Hs,nt),Ws!==null&&il(Ws,nt),qr.forEach(ot),Kr.forEach(ot);for(var ft=0;ft<js.length;ft++){var xt=js[ft];xt.blockedOn===nt&&(xt.blockedOn=null)}for(;0<js.length&&(ft=js[0],ft.blockedOn===null);)cm(ft),ft.blockedOn===null&&js.shift();if(ft=(nt.ownerDocument||nt).$$reactFormReplay,ft!=null)for(xt=0;xt<ft.length;xt+=3){var yt=ft[xt],Ct=ft[xt+1],It=yt[_i]||null;if(typeof Ct=="function")It||dm(ft);else if(It){var Lt=null;if(Ct&&Ct.hasAttribute("formAction")){if(yt=Ct,It=Ct[_i]||null)Lt=It.formAction;else if(yu(yt)!==null)continue}else Lt=It.action;typeof Lt=="function"?ft[xt+1]=Lt:(ft.splice(xt,3),xt-=3),dm(ft)}}}function vu(nt){this._internalRoot=nt}ol.prototype.render=vu.prototype.render=function(nt){var ot=this._internalRoot;if(ot===null)throw Error(de(409));var ft=ot.current,xt=Oi();sm(ft,xt,nt,ot,null,null)},ol.prototype.unmount=vu.prototype.unmount=function(){var nt=this._internalRoot;if(nt!==null){this._internalRoot=null;var ot=nt.containerInfo;sm(nt.current,2,null,nt,null,null),Fa(),ot[fo]=null}};function ol(nt){this._internalRoot=nt}ol.prototype.unstable_scheduleHydration=function(nt){if(nt){var ot=Su();nt={blockedOn:null,target:nt,priority:ot};for(var ft=0;ft<js.length&&ot!==0&&ot<js[ft].priority;ft++);js.splice(ft,0,nt),ft===0&&cm(nt)}};var hm=u.version;if(hm!=="19.1.0")throw Error(de(527,hm,"19.1.0"));jt.findDOMNode=function(nt){var ot=nt._reactInternals;if(ot===void 0)throw typeof nt.render=="function"?Error(de(188)):(nt=Object.keys(nt).join(","),Error(de(268,nt)));return nt=st(ot),nt=nt!==null?ht(nt):null,nt=nt===null?null:nt.stateNode,nt};var Rp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Nt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{qi=rl.inject(Rp),ii=rl}catch{}}return reactDomClient_production.createRoot=function(nt,ot){if(!pe(nt))throw Error(de(299));var ft=!1,xt="",yt=Sh,Ct=Ah,It=Rh,Lt=null;return ot!=null&&(ot.unstable_strictMode===!0&&(ft=!0),ot.identifierPrefix!==void 0&&(xt=ot.identifierPrefix),ot.onUncaughtError!==void 0&&(yt=ot.onUncaughtError),ot.onCaughtError!==void 0&&(Ct=ot.onCaughtError),ot.onRecoverableError!==void 0&&(It=ot.onRecoverableError),ot.unstable_transitionCallbacks!==void 0&&(Lt=ot.unstable_transitionCallbacks)),ot=nm(nt,1,!1,null,null,ft,xt,yt,Ct,It,Lt,null),nt[fo]=ot.current,su(nt),new vu(ot)},reactDomClient_production.hydrateRoot=function(nt,ot,ft){if(!pe(nt))throw Error(de(299));var xt=!1,yt="",Ct=Sh,It=Ah,Lt=Rh,Ht=null,Xt=null;return ft!=null&&(ft.unstable_strictMode===!0&&(xt=!0),ft.identifierPrefix!==void 0&&(yt=ft.identifierPrefix),ft.onUncaughtError!==void 0&&(Ct=ft.onUncaughtError),ft.onCaughtError!==void 0&&(It=ft.onCaughtError),ft.onRecoverableError!==void 0&&(Lt=ft.onRecoverableError),ft.unstable_transitionCallbacks!==void 0&&(Ht=ft.unstable_transitionCallbacks),ft.formState!==void 0&&(Xt=ft.formState)),ot=nm(nt,1,!0,ot,ft??null,xt,yt,Ct,It,Lt,Ht,Xt),ot.context=im(null),ft=ot.current,xt=Oi(),xt=fl(xt),yt=As(xt),yt.callback=null,Rs(ft,yt,xt),ft=xt,ot.current.lanes=ft,tr(ot,ft),ns(ot),nt[fo]=ot.current,su(nt),new ol(ot)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function me(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(me)}catch(u){console.error(u)}}return me(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const common={black:"#000",white:"#fff"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function formatMuiErrorMessage(me,...u){const t=new URL(`https://mui.com/production-error/?code=${me}`);return u.forEach(de=>t.searchParams.append("args[]",de)),`Minified MUI error #${me}; visit ${t} for the full message.`}const THEME_ID="$$material";function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(me){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var de in t)({}).hasOwnProperty.call(t,de)&&(me[de]=t[de])}return me},_extends$1.apply(null,arguments)}function sheetForTag(me){if(me.sheet)return me.sheet;for(var u=0;u<document.styleSheets.length;u++)if(document.styleSheets[u].ownerNode===me)return document.styleSheets[u]}function createStyleElement(me){var u=document.createElement("style");return u.setAttribute("data-emotion",me.key),me.nonce!==void 0&&u.setAttribute("nonce",me.nonce),u.appendChild(document.createTextNode("")),u.setAttribute("data-s",""),u}var StyleSheet=function(){function me(t){var de=this;this._insertTag=function(pe){var Le;de.tags.length===0?de.insertionPoint?Le=de.insertionPoint.nextSibling:de.prepend?Le=de.container.firstChild:Le=de.before:Le=de.tags[de.tags.length-1].nextSibling,de.container.insertBefore(pe,Le),de.tags.push(pe)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var u=me.prototype;return u.hydrate=function(de){de.forEach(this._insertTag)},u.insert=function(de){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var pe=this.tags[this.tags.length-1];if(this.isSpeedy){var Le=sheetForTag(pe);try{Le.insertRule(de,Le.cssRules.length)}catch{}}else pe.appendChild(document.createTextNode(de));this.ctr++},u.flush=function(){this.tags.forEach(function(de){var pe;return(pe=de.parentNode)==null?void 0:pe.removeChild(de)}),this.tags=[],this.ctr=0},me}(),MS$1="-ms-",MOZ$1="-moz-",WEBKIT$1="-webkit-",COMMENT$1="comm",RULESET$1="rule",DECLARATION$1="decl",IMPORT$1="@import",KEYFRAMES$1="@keyframes",LAYER$1="@layer",abs$1=Math.abs,from$1=String.fromCharCode,assign$1=Object.assign;function hash$1(me,u){return charat$1(me,0)^45?(((u<<2^charat$1(me,0))<<2^charat$1(me,1))<<2^charat$1(me,2))<<2^charat$1(me,3):0}function trim$2(me){return me.trim()}function match$1(me,u){return(me=u.exec(me))?me[0]:me}function replace$1(me,u,t){return me.replace(u,t)}function indexof$1(me,u){return me.indexOf(u)}function charat$1(me,u){return me.charCodeAt(u)|0}function substr$1(me,u,t){return me.slice(u,t)}function strlen$1(me){return me.length}function sizeof$1(me){return me.length}function append$1(me,u){return u.push(me),me}function combine$1(me,u){return me.map(u).join("")}var line$1=1,column$1=1,length$2=0,position$1=0,character$1=0,characters$1="";function node$1(me,u,t,de,pe,Le,Ye){return{value:me,root:u,parent:t,type:de,props:pe,children:Le,line:line$1,column:column$1,length:Ye,return:""}}function copy$1(me,u){return assign$1(node$1("",null,null,"",null,null,0),me,{length:-me.length},u)}function char$1(){return character$1}function prev$2(){return character$1=position$1>0?charat$1(characters$1,--position$1):0,column$1--,character$1===10&&(column$1=1,line$1--),character$1}function next$1(){return character$1=position$1<length$2?charat$1(characters$1,position$1++):0,column$1++,character$1===10&&(column$1=1,line$1++),character$1}function peek$1(){return charat$1(characters$1,position$1)}function caret$1(){return position$1}function slice$1(me,u){return substr$1(characters$1,me,u)}function token$1(me){switch(me){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc$1(me){return line$1=column$1=1,length$2=strlen$1(characters$1=me),position$1=0,[]}function dealloc$1(me){return characters$1="",me}function delimit$1(me){return trim$2(slice$1(position$1-1,delimiter$1(me===91?me+2:me===40?me+1:me)))}function whitespace$1(me){for(;(character$1=peek$1())&&character$1<33;)next$1();return token$1(me)>2||token$1(character$1)>3?"":" "}function escaping$1(me,u){for(;--u&&next$1()&&!(character$1<48||character$1>102||character$1>57&&character$1<65||character$1>70&&character$1<97););return slice$1(me,caret$1()+(u<6&&peek$1()==32&&next$1()==32))}function delimiter$1(me){for(;next$1();)switch(character$1){case me:return position$1;case 34:case 39:me!==34&&me!==39&&delimiter$1(character$1);break;case 40:me===41&&delimiter$1(me);break;case 92:next$1();break}return position$1}function commenter$1(me,u){for(;next$1()&&me+character$1!==57;)if(me+character$1===84&&peek$1()===47)break;return"/*"+slice$1(u,position$1-1)+"*"+from$1(me===47?me:next$1())}function identifier$1(me){for(;!token$1(peek$1());)next$1();return slice$1(me,position$1)}function compile$1(me){return dealloc$1(parse$3("",null,null,null,[""],me=alloc$1(me),0,[0],me))}function parse$3(me,u,t,de,pe,Le,Ye,tt,st){for(var ht=0,mt=0,gt=Ye,bt=0,_t=0,vt=0,Tt=1,St=1,Rt=1,Pt=0,Ot="",Mt=pe,Bt=Le,Dt=de,$t=Ot;St;)switch(vt=Pt,Pt=next$1()){case 40:if(vt!=108&&charat$1($t,gt-1)==58){indexof$1($t+=replace$1(delimit$1(Pt),"&","&\f"),"&\f")!=-1&&(Rt=-1);break}case 34:case 39:case 91:$t+=delimit$1(Pt);break;case 9:case 10:case 13:case 32:$t+=whitespace$1(vt);break;case 92:$t+=escaping$1(caret$1()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append$1(comment$1(commenter$1(next$1(),caret$1()),u,t),st);break;default:$t+="/"}break;case 123*Tt:tt[ht++]=strlen$1($t)*Rt;case 125*Tt:case 59:case 0:switch(Pt){case 0:case 125:St=0;case 59+mt:Rt==-1&&($t=replace$1($t,/\f/g,"")),_t>0&&strlen$1($t)-gt&&append$1(_t>32?declaration$1($t+";",de,t,gt-1):declaration$1(replace$1($t," ","")+";",de,t,gt-2),st);break;case 59:$t+=";";default:if(append$1(Dt=ruleset$1($t,u,t,ht,mt,pe,tt,Ot,Mt=[],Bt=[],gt),Le),Pt===123)if(mt===0)parse$3($t,u,Dt,Dt,Mt,Le,gt,tt,Bt);else switch(bt===99&&charat$1($t,3)===110?100:bt){case 100:case 108:case 109:case 115:parse$3(me,Dt,Dt,de&&append$1(ruleset$1(me,Dt,Dt,0,0,pe,tt,Ot,pe,Mt=[],gt),Bt),pe,Bt,gt,tt,de?Mt:Bt);break;default:parse$3($t,Dt,Dt,Dt,[""],Bt,0,tt,Bt)}}ht=mt=_t=0,Tt=Rt=1,Ot=$t="",gt=Ye;break;case 58:gt=1+strlen$1($t),_t=vt;default:if(Tt<1){if(Pt==123)--Tt;else if(Pt==125&&Tt++==0&&prev$2()==125)continue}switch($t+=from$1(Pt),Pt*Tt){case 38:Rt=mt>0?1:($t+="\f",-1);break;case 44:tt[ht++]=(strlen$1($t)-1)*Rt,Rt=1;break;case 64:peek$1()===45&&($t+=delimit$1(next$1())),bt=peek$1(),mt=gt=strlen$1(Ot=$t+=identifier$1(caret$1())),Pt++;break;case 45:vt===45&&strlen$1($t)==2&&(Tt=0)}}return Le}function ruleset$1(me,u,t,de,pe,Le,Ye,tt,st,ht,mt){for(var gt=pe-1,bt=pe===0?Le:[""],_t=sizeof$1(bt),vt=0,Tt=0,St=0;vt<de;++vt)for(var Rt=0,Pt=substr$1(me,gt+1,gt=abs$1(Tt=Ye[vt])),Ot=me;Rt<_t;++Rt)(Ot=trim$2(Tt>0?bt[Rt]+" "+Pt:replace$1(Pt,/&\f/g,bt[Rt])))&&(st[St++]=Ot);return node$1(me,u,t,pe===0?RULESET$1:tt,st,ht,mt)}function comment$1(me,u,t){return node$1(me,u,t,COMMENT$1,from$1(char$1()),substr$1(me,2,-2),0)}function declaration$1(me,u,t,de){return node$1(me,u,t,DECLARATION$1,substr$1(me,0,de),substr$1(me,de+1,-1),de)}function serialize$1(me,u){for(var t="",de=sizeof$1(me),pe=0;pe<de;pe++)t+=u(me[pe],pe,me,u)||"";return t}function stringify$1(me,u,t,de){switch(me.type){case LAYER$1:if(me.children.length)break;case IMPORT$1:case DECLARATION$1:return me.return=me.return||me.value;case COMMENT$1:return"";case KEYFRAMES$1:return me.return=me.value+"{"+serialize$1(me.children,de)+"}";case RULESET$1:me.value=me.props.join(",")}return strlen$1(t=serialize$1(me.children,de))?me.return=me.value+"{"+t+"}":""}function middleware$1(me){var u=sizeof$1(me);return function(t,de,pe,Le){for(var Ye="",tt=0;tt<u;tt++)Ye+=me[tt](t,de,pe,Le)||"";return Ye}}function rulesheet$1(me){return function(u){u.root||(u=u.return)&&me(u)}}function memoize$2(me){var u=Object.create(null);return function(t){return u[t]===void 0&&(u[t]=me(t)),u[t]}}var identifierWithPointTracking=function(u,t,de){for(var pe=0,Le=0;pe=Le,Le=peek$1(),pe===38&&Le===12&&(t[de]=1),!token$1(Le);)next$1();return slice$1(u,position$1)},toRules=function(u,t){var de=-1,pe=44;do switch(token$1(pe)){case 0:pe===38&&peek$1()===12&&(t[de]=1),u[de]+=identifierWithPointTracking(position$1-1,t,de);break;case 2:u[de]+=delimit$1(pe);break;case 4:if(pe===44){u[++de]=peek$1()===58?"&\f":"",t[de]=u[de].length;break}default:u[de]+=from$1(pe)}while(pe=next$1());return u},getRules=function(u,t){return dealloc$1(toRules(alloc$1(u),t))},fixedElements=new WeakMap,compat=function(u){if(!(u.type!=="rule"||!u.parent||u.length<1)){for(var t=u.value,de=u.parent,pe=u.column===de.column&&u.line===de.line;de.type!=="rule";)if(de=de.parent,!de)return;if(!(u.props.length===1&&t.charCodeAt(0)!==58&&!fixedElements.get(de))&&!pe){fixedElements.set(u,!0);for(var Le=[],Ye=getRules(t,Le),tt=de.props,st=0,ht=0;st<Ye.length;st++)for(var mt=0;mt<tt.length;mt++,ht++)u.props[ht]=Le[st]?Ye[st].replace(/&\f/g,tt[mt]):tt[mt]+" "+Ye[st]}}},removeLabel=function(u){if(u.type==="decl"){var t=u.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(u.return="",u.value="")}};function prefix$1(me,u){switch(hash$1(me,u)){case 5103:return WEBKIT$1+"print-"+me+me;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT$1+me+me;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT$1+me+MOZ$1+me+MS$1+me+me;case 6828:case 4268:return WEBKIT$1+me+MS$1+me+me;case 6165:return WEBKIT$1+me+MS$1+"flex-"+me+me;case 5187:return WEBKIT$1+me+replace$1(me,/(\w+).+(:[^]+)/,WEBKIT$1+"box-$1$2"+MS$1+"flex-$1$2")+me;case 5443:return WEBKIT$1+me+MS$1+"flex-item-"+replace$1(me,/flex-|-self/,"")+me;case 4675:return WEBKIT$1+me+MS$1+"flex-line-pack"+replace$1(me,/align-content|flex-|-self/,"")+me;case 5548:return WEBKIT$1+me+MS$1+replace$1(me,"shrink","negative")+me;case 5292:return WEBKIT$1+me+MS$1+replace$1(me,"basis","preferred-size")+me;case 6060:return WEBKIT$1+"box-"+replace$1(me,"-grow","")+WEBKIT$1+me+MS$1+replace$1(me,"grow","positive")+me;case 4554:return WEBKIT$1+replace$1(me,/([^-])(transform)/g,"$1"+WEBKIT$1+"$2")+me;case 6187:return replace$1(replace$1(replace$1(me,/(zoom-|grab)/,WEBKIT$1+"$1"),/(image-set)/,WEBKIT$1+"$1"),me,"")+me;case 5495:case 3959:return replace$1(me,/(image-set\([^]*)/,WEBKIT$1+"$1$`$1");case 4968:return replace$1(replace$1(me,/(.+:)(flex-)?(.*)/,WEBKIT$1+"box-pack:$3"+MS$1+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT$1+me+me;case 4095:case 3583:case 4068:case 2532:return replace$1(me,/(.+)-inline(.+)/,WEBKIT$1+"$1$2")+me;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen$1(me)-1-u>6)switch(charat$1(me,u+1)){case 109:if(charat$1(me,u+4)!==45)break;case 102:return replace$1(me,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT$1+"$2-$3$1"+MOZ$1+(charat$1(me,u+3)==108?"$3":"$2-$3"))+me;case 115:return~indexof$1(me,"stretch")?prefix$1(replace$1(me,"stretch","fill-available"),u)+me:me}break;case 4949:if(charat$1(me,u+1)!==115)break;case 6444:switch(charat$1(me,strlen$1(me)-3-(~indexof$1(me,"!important")&&10))){case 107:return replace$1(me,":",":"+WEBKIT$1)+me;case 101:return replace$1(me,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT$1+(charat$1(me,14)===45?"inline-":"")+"box$3$1"+WEBKIT$1+"$2$3$1"+MS$1+"$2box$3")+me}break;case 5936:switch(charat$1(me,u+11)){case 114:return WEBKIT$1+me+MS$1+replace$1(me,/[svh]\w+-[tblr]{2}/,"tb")+me;case 108:return WEBKIT$1+me+MS$1+replace$1(me,/[svh]\w+-[tblr]{2}/,"tb-rl")+me;case 45:return WEBKIT$1+me+MS$1+replace$1(me,/[svh]\w+-[tblr]{2}/,"lr")+me}return WEBKIT$1+me+MS$1+me+me}return me}var prefixer$1=function(u,t,de,pe){if(u.length>-1&&!u.return)switch(u.type){case DECLARATION$1:u.return=prefix$1(u.value,u.length);break;case KEYFRAMES$1:return serialize$1([copy$1(u,{value:replace$1(u.value,"@","@"+WEBKIT$1)})],pe);case RULESET$1:if(u.length)return combine$1(u.props,function(Le){switch(match$1(Le,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy$1(u,{props:[replace$1(Le,/:(read-\w+)/,":"+MOZ$1+"$1")]})],pe);case"::placeholder":return serialize$1([copy$1(u,{props:[replace$1(Le,/:(plac\w+)/,":"+WEBKIT$1+"input-$1")]}),copy$1(u,{props:[replace$1(Le,/:(plac\w+)/,":"+MOZ$1+"$1")]}),copy$1(u,{props:[replace$1(Le,/:(plac\w+)/,MS$1+"input-$1")]})],pe)}return""})}},defaultStylisPlugins=[prefixer$1],createCache=function(u){var t=u.key;if(t==="css"){var de=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(de,function(Tt){var St=Tt.getAttribute("data-emotion");St.indexOf(" ")!==-1&&(document.head.appendChild(Tt),Tt.setAttribute("data-s",""))})}var pe=u.stylisPlugins||defaultStylisPlugins,Le={},Ye,tt=[];Ye=u.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(Tt){for(var St=Tt.getAttribute("data-emotion").split(" "),Rt=1;Rt<St.length;Rt++)Le[St[Rt]]=!0;tt.push(Tt)});var st,ht=[compat,removeLabel];{var mt,gt=[stringify$1,rulesheet$1(function(Tt){mt.insert(Tt)})],bt=middleware$1(ht.concat(pe,gt)),_t=function(St){return serialize$1(compile$1(St),bt)};st=function(St,Rt,Pt,Ot){mt=Pt,_t(St?St+"{"+Rt.styles+"}":Rt.styles),Ot&&(vt.inserted[Rt.name]=!0)}}var vt={key:t,sheet:new StyleSheet({key:t,container:Ye,nonce:u.nonce,speedy:u.speedy,prepend:u.prepend,insertionPoint:u.insertionPoint}),nonce:u.nonce,inserted:Le,registered:{},insert:st};return vt.sheet.hydrate(tt),vt},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var me=typeof Symbol=="function"&&Symbol.for,u=me?Symbol.for("react.element"):60103,t=me?Symbol.for("react.portal"):60106,de=me?Symbol.for("react.fragment"):60107,pe=me?Symbol.for("react.strict_mode"):60108,Le=me?Symbol.for("react.profiler"):60114,Ye=me?Symbol.for("react.provider"):60109,tt=me?Symbol.for("react.context"):60110,st=me?Symbol.for("react.async_mode"):60111,ht=me?Symbol.for("react.concurrent_mode"):60111,mt=me?Symbol.for("react.forward_ref"):60112,gt=me?Symbol.for("react.suspense"):60113,bt=me?Symbol.for("react.suspense_list"):60120,_t=me?Symbol.for("react.memo"):60115,vt=me?Symbol.for("react.lazy"):60116,Tt=me?Symbol.for("react.block"):60121,St=me?Symbol.for("react.fundamental"):60117,Rt=me?Symbol.for("react.responder"):60118,Pt=me?Symbol.for("react.scope"):60119;function Ot(Bt){if(typeof Bt=="object"&&Bt!==null){var Dt=Bt.$$typeof;switch(Dt){case u:switch(Bt=Bt.type,Bt){case st:case ht:case de:case Le:case pe:case gt:return Bt;default:switch(Bt=Bt&&Bt.$$typeof,Bt){case tt:case mt:case vt:case _t:case Ye:return Bt;default:return Dt}}case t:return Dt}}}function Mt(Bt){return Ot(Bt)===ht}return reactIs_production_min.AsyncMode=st,reactIs_production_min.ConcurrentMode=ht,reactIs_production_min.ContextConsumer=tt,reactIs_production_min.ContextProvider=Ye,reactIs_production_min.Element=u,reactIs_production_min.ForwardRef=mt,reactIs_production_min.Fragment=de,reactIs_production_min.Lazy=vt,reactIs_production_min.Memo=_t,reactIs_production_min.Portal=t,reactIs_production_min.Profiler=Le,reactIs_production_min.StrictMode=pe,reactIs_production_min.Suspense=gt,reactIs_production_min.isAsyncMode=function(Bt){return Mt(Bt)||Ot(Bt)===st},reactIs_production_min.isConcurrentMode=Mt,reactIs_production_min.isContextConsumer=function(Bt){return Ot(Bt)===tt},reactIs_production_min.isContextProvider=function(Bt){return Ot(Bt)===Ye},reactIs_production_min.isElement=function(Bt){return typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===u},reactIs_production_min.isForwardRef=function(Bt){return Ot(Bt)===mt},reactIs_production_min.isFragment=function(Bt){return Ot(Bt)===de},reactIs_production_min.isLazy=function(Bt){return Ot(Bt)===vt},reactIs_production_min.isMemo=function(Bt){return Ot(Bt)===_t},reactIs_production_min.isPortal=function(Bt){return Ot(Bt)===t},reactIs_production_min.isProfiler=function(Bt){return Ot(Bt)===Le},reactIs_production_min.isStrictMode=function(Bt){return Ot(Bt)===pe},reactIs_production_min.isSuspense=function(Bt){return Ot(Bt)===gt},reactIs_production_min.isValidElementType=function(Bt){return typeof Bt=="string"||typeof Bt=="function"||Bt===de||Bt===ht||Bt===Le||Bt===pe||Bt===gt||Bt===bt||typeof Bt=="object"&&Bt!==null&&(Bt.$$typeof===vt||Bt.$$typeof===_t||Bt.$$typeof===Ye||Bt.$$typeof===tt||Bt.$$typeof===mt||Bt.$$typeof===St||Bt.$$typeof===Rt||Bt.$$typeof===Pt||Bt.$$typeof===Tt)},reactIs_production_min.typeOf=Ot,reactIs_production_min}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production_min()),reactIs$1.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var me=requireReactIs$1(),u={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},de={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Le={};Le[me.ForwardRef]=de,Le[me.Memo]=pe;function Ye(vt){return me.isMemo(vt)?pe:Le[vt.$$typeof]||u}var tt=Object.defineProperty,st=Object.getOwnPropertyNames,ht=Object.getOwnPropertySymbols,mt=Object.getOwnPropertyDescriptor,gt=Object.getPrototypeOf,bt=Object.prototype;function _t(vt,Tt,St){if(typeof Tt!="string"){if(bt){var Rt=gt(Tt);Rt&&Rt!==bt&&_t(vt,Rt,St)}var Pt=st(Tt);ht&&(Pt=Pt.concat(ht(Tt)));for(var Ot=Ye(vt),Mt=Ye(Tt),Bt=0;Bt<Pt.length;++Bt){var Dt=Pt[Bt];if(!t[Dt]&&!(St&&St[Dt])&&!(Mt&&Mt[Dt])&&!(Ot&&Ot[Dt])){var $t=mt(Tt,Dt);try{tt(vt,Dt,$t)}catch{}}}}return vt}return hoistNonReactStatics_cjs=_t,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(me,u,t){var de="";return t.split(" ").forEach(function(pe){me[pe]!==void 0?u.push(me[pe]+";"):pe&&(de+=pe+" ")}),de}var registerStyles=function(u,t,de){var pe=u.key+"-"+t.name;(de===!1||isBrowser===!1)&&u.registered[pe]===void 0&&(u.registered[pe]=t.styles)},insertStyles=function(u,t,de){registerStyles(u,t,de);var pe=u.key+"-"+t.name;if(u.inserted[t.name]===void 0){var Le=t;do u.insert(t===Le?"."+pe:"",Le,u.sheet,!0),Le=Le.next;while(Le!==void 0)}};function murmur2(me){for(var u=0,t,de=0,pe=me.length;pe>=4;++de,pe-=4)t=me.charCodeAt(de)&255|(me.charCodeAt(++de)&255)<<8|(me.charCodeAt(++de)&255)<<16|(me.charCodeAt(++de)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,u=(t&65535)*1540483477+((t>>>16)*59797<<16)^(u&65535)*1540483477+((u>>>16)*59797<<16);switch(pe){case 3:u^=(me.charCodeAt(de+2)&255)<<16;case 2:u^=(me.charCodeAt(de+1)&255)<<8;case 1:u^=me.charCodeAt(de)&255,u=(u&65535)*1540483477+((u>>>16)*59797<<16)}return u^=u>>>13,u=(u&65535)*1540483477+((u>>>16)*59797<<16),((u^u>>>15)>>>0).toString(36)}var unitlessKeys$1={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(u){return u.charCodeAt(1)===45},isProcessableValue=function(u){return u!=null&&typeof u!="boolean"},processStyleName=memoize$2(function(me){return isCustomProperty(me)?me:me.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(u,t){switch(u){case"animation":case"animationName":if(typeof t=="string")return t.replace(animationRegex,function(de,pe,Le){return cursor={name:pe,styles:Le,next:cursor},pe})}return unitlessKeys$1[u]!==1&&!isCustomProperty(u)&&typeof t=="number"&&t!==0?t+"px":t};function handleInterpolation(me,u,t){if(t==null)return"";var de=t;if(de.__emotion_styles!==void 0)return de;switch(typeof t){case"boolean":return"";case"object":{var pe=t;if(pe.anim===1)return cursor={name:pe.name,styles:pe.styles,next:cursor},pe.name;var Le=t;if(Le.styles!==void 0){var Ye=Le.next;if(Ye!==void 0)for(;Ye!==void 0;)cursor={name:Ye.name,styles:Ye.styles,next:cursor},Ye=Ye.next;var tt=Le.styles+";";return tt}return createStringFromObject(me,u,t)}case"function":{if(me!==void 0){var st=cursor,ht=t(me);return cursor=st,handleInterpolation(me,u,ht)}break}}var mt=t;if(u==null)return mt;var gt=u[mt];return gt!==void 0?gt:mt}function createStringFromObject(me,u,t){var de="";if(Array.isArray(t))for(var pe=0;pe<t.length;pe++)de+=handleInterpolation(me,u,t[pe])+";";else for(var Le in t){var Ye=t[Le];if(typeof Ye!="object"){var tt=Ye;u!=null&&u[tt]!==void 0?de+=Le+"{"+u[tt]+"}":isProcessableValue(tt)&&(de+=processStyleName(Le)+":"+processStyleValue(Le,tt)+";")}else if(Array.isArray(Ye)&&typeof Ye[0]=="string"&&(u==null||u[Ye[0]]===void 0))for(var st=0;st<Ye.length;st++)isProcessableValue(Ye[st])&&(de+=processStyleName(Le)+":"+processStyleValue(Le,Ye[st])+";");else{var ht=handleInterpolation(me,u,Ye);switch(Le){case"animation":case"animationName":{de+=processStyleName(Le)+":"+ht+";";break}default:de+=Le+"{"+ht+"}"}}}return de}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(me,u,t){if(me.length===1&&typeof me[0]=="object"&&me[0]!==null&&me[0].styles!==void 0)return me[0];var de=!0,pe="";cursor=void 0;var Le=me[0];if(Le==null||Le.raw===void 0)de=!1,pe+=handleInterpolation(t,u,Le);else{var Ye=Le;pe+=Ye[0]}for(var tt=1;tt<me.length;tt++)if(pe+=handleInterpolation(t,u,me[tt]),de){var st=Le;pe+=st[tt]}labelPattern.lastIndex=0;for(var ht="",mt;(mt=labelPattern.exec(pe))!==null;)ht+="-"+mt[1];var gt=murmur2(pe)+ht;return{name:gt,styles:pe,next:cursor}}var syncFallback=function(u){return u()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(u){return reactExports.forwardRef(function(t,de){var pe=reactExports.useContext(EmotionCacheContext);return u(t,pe,de)})},ThemeContext=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(u,t){var de={};for(var pe in t)hasOwn.call(t,pe)&&(de[pe]=t[pe]);return de[typePropName]=u,de},Insertion$2=function(u){var t=u.cache,de=u.serialized,pe=u.isStringTag;return registerStyles(t,de,pe),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(t,de,pe)}),null},Emotion=withEmotionCache(function(me,u,t){var de=me.css;typeof de=="string"&&u.registered[de]!==void 0&&(de=u.registered[de]);var pe=me[typePropName],Le=[de],Ye="";typeof me.className=="string"?Ye=getRegisteredStyles(u.registered,Le,me.className):me.className!=null&&(Ye=me.className+" ");var tt=serializeStyles(Le,void 0,reactExports.useContext(ThemeContext));Ye+=u.key+"-"+tt.name;var st={};for(var ht in me)hasOwn.call(me,ht)&&ht!=="css"&&ht!==typePropName&&(st[ht]=me[ht]);return st.className=Ye,t&&(st.ref=t),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$2,{cache:u,serialized:tt,isStringTag:typeof pe=="string"}),reactExports.createElement(pe,st))}),Emotion$1=Emotion,jsx=function(u,t){var de=arguments;if(t==null||!hasOwn.call(t,"css"))return reactExports.createElement.apply(void 0,de);var pe=de.length,Le=new Array(pe);Le[0]=Emotion$1,Le[1]=createEmotionProps(u,t);for(var Ye=2;Ye<pe;Ye++)Le[Ye]=de[Ye];return reactExports.createElement.apply(null,Le)};(function(me){var u;u||(u=me.JSX||(me.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(me,u){var t=me.styles,de=serializeStyles([t],void 0,reactExports.useContext(ThemeContext)),pe=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var Le=u.key+"-global",Ye=new u.sheet.constructor({key:Le,nonce:u.sheet.nonce,container:u.sheet.container,speedy:u.sheet.isSpeedy}),tt=!1,st=document.querySelector('style[data-emotion="'+Le+" "+de.name+'"]');return u.sheet.tags.length&&(Ye.before=u.sheet.tags[0]),st!==null&&(tt=!0,st.setAttribute("data-emotion",Le),Ye.hydrate([st])),pe.current=[Ye,tt],function(){Ye.flush()}},[u]),useInsertionEffectWithLayoutFallback(function(){var Le=pe.current,Ye=Le[0],tt=Le[1];if(tt){Le[1]=!1;return}if(de.next!==void 0&&insertStyles(u,de.next,!0),Ye.tags.length){var st=Ye.tags[Ye.tags.length-1].nextElementSibling;Ye.before=st,Ye.flush()}u.insert("",de,Ye,!1)},[u,de.name]),null});function css$1(){for(var me=arguments.length,u=new Array(me),t=0;t<me;t++)u[t]=arguments[t];return serializeStyles(u)}function keyframes(){var me=css$1.apply(void 0,arguments),u="animation-"+me.name;return{name:u,styles:"@keyframes "+u+"{"+me.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$2(function(me){return reactPropsRegex.test(me)||me.charCodeAt(0)===111&&me.charCodeAt(1)===110&&me.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(u){return u!=="theme"},getDefaultShouldForwardProp=function(u){return typeof u=="string"&&u.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(u,t,de){var pe;if(t){var Le=t.shouldForwardProp;pe=u.__emotion_forwardProp&&Le?function(Ye){return u.__emotion_forwardProp(Ye)&&Le(Ye)}:Le}return typeof pe!="function"&&de&&(pe=u.__emotion_forwardProp),pe},Insertion$1=function(u){var t=u.cache,de=u.serialized,pe=u.isStringTag;return registerStyles(t,de,pe),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(t,de,pe)}),null},createStyled$1=function me(u,t){var de=u.__emotion_real===u,pe=de&&u.__emotion_base||u,Le,Ye;t!==void 0&&(Le=t.label,Ye=t.target);var tt=composeShouldForwardProps(u,t,de),st=tt||getDefaultShouldForwardProp(pe),ht=!st("as");return function(){var mt=arguments,gt=de&&u.__emotion_styles!==void 0?u.__emotion_styles.slice(0):[];if(Le!==void 0&&gt.push("label:"+Le+";"),mt[0]==null||mt[0].raw===void 0)gt.push.apply(gt,mt);else{var bt=mt[0];gt.push(bt[0]);for(var _t=mt.length,vt=1;vt<_t;vt++)gt.push(mt[vt],bt[vt])}var Tt=withEmotionCache(function(St,Rt,Pt){var Ot=ht&&St.as||pe,Mt="",Bt=[],Dt=St;if(St.theme==null){Dt={};for(var $t in St)Dt[$t]=St[$t];Dt.theme=reactExports.useContext(ThemeContext)}typeof St.className=="string"?Mt=getRegisteredStyles(Rt.registered,Bt,St.className):St.className!=null&&(Mt=St.className+" ");var kt=serializeStyles(gt.concat(Bt),Rt.registered,Dt);Mt+=Rt.key+"-"+kt.name,Ye!==void 0&&(Mt+=" "+Ye);var Et=ht&&tt===void 0?getDefaultShouldForwardProp(Ot):st,At={};for(var Ft in St)ht&&Ft==="as"||Et(Ft)&&(At[Ft]=St[Ft]);return At.className=Mt,Pt&&(At.ref=Pt),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:Rt,serialized:kt,isStringTag:typeof Ot=="string"}),reactExports.createElement(Ot,At))});return Tt.displayName=Le!==void 0?Le:"Styled("+(typeof pe=="string"?pe:pe.displayName||pe.name||"Component")+")",Tt.defaultProps=u.defaultProps,Tt.__emotion_real=Tt,Tt.__emotion_base=pe,Tt.__emotion_styles=gt,Tt.__emotion_forwardProp=tt,Object.defineProperty(Tt,"toString",{value:function(){return"."+Ye}}),Tt.withComponent=function(St,Rt){var Pt=me(St,_extends$1({},t,Rt,{shouldForwardProp:composeShouldForwardProps(Tt,Rt,!0)}));return Pt.apply(void 0,gt)},Tt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind(null);tags.forEach(function(me){newStyled[me]=newStyled(me)});function isEmpty$5(me){return me==null||Object.keys(me).length===0}function GlobalStyles$2(me){const{styles:u,defaultTheme:t={}}=me,de=typeof u=="function"?pe=>u(isEmpty$5(pe)?t:pe):u;return jsxRuntimeExports.jsx(Global,{styles:de})}/**
 * @mui/styled-engine v6.4.9
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$1(me,u){return newStyled(me,u)}function internal_mutateStyles(me,u){Array.isArray(me.__emotion_styles)&&(me.__emotion_styles=u(me.__emotion_styles))}const wrapper=[];function internal_serializeStyles(me){return wrapper[0]=me,serializeStyles(wrapper)}var reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var me=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),Le=Symbol.for("react.consumer"),Ye=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),bt=Symbol.for("react.view_transition"),_t=Symbol.for("react.client.reference");function vt(Tt){if(typeof Tt=="object"&&Tt!==null){var St=Tt.$$typeof;switch(St){case me:switch(Tt=Tt.type,Tt){case t:case pe:case de:case st:case ht:case bt:return Tt;default:switch(Tt=Tt&&Tt.$$typeof,Tt){case Ye:case tt:case gt:case mt:return Tt;case Le:return Tt;default:return St}}case u:return St}}}return reactIs_production.ContextConsumer=Le,reactIs_production.ContextProvider=Ye,reactIs_production.Element=me,reactIs_production.ForwardRef=tt,reactIs_production.Fragment=t,reactIs_production.Lazy=gt,reactIs_production.Memo=mt,reactIs_production.Portal=u,reactIs_production.Profiler=pe,reactIs_production.StrictMode=de,reactIs_production.Suspense=st,reactIs_production.SuspenseList=ht,reactIs_production.isContextConsumer=function(Tt){return vt(Tt)===Le},reactIs_production.isContextProvider=function(Tt){return vt(Tt)===Ye},reactIs_production.isElement=function(Tt){return typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===me},reactIs_production.isForwardRef=function(Tt){return vt(Tt)===tt},reactIs_production.isFragment=function(Tt){return vt(Tt)===t},reactIs_production.isLazy=function(Tt){return vt(Tt)===gt},reactIs_production.isMemo=function(Tt){return vt(Tt)===mt},reactIs_production.isPortal=function(Tt){return vt(Tt)===u},reactIs_production.isProfiler=function(Tt){return vt(Tt)===pe},reactIs_production.isStrictMode=function(Tt){return vt(Tt)===de},reactIs_production.isSuspense=function(Tt){return vt(Tt)===st},reactIs_production.isSuspenseList=function(Tt){return vt(Tt)===ht},reactIs_production.isValidElementType=function(Tt){return typeof Tt=="string"||typeof Tt=="function"||Tt===t||Tt===pe||Tt===de||Tt===st||Tt===ht||typeof Tt=="object"&&Tt!==null&&(Tt.$$typeof===gt||Tt.$$typeof===mt||Tt.$$typeof===Ye||Tt.$$typeof===Le||Tt.$$typeof===tt||Tt.$$typeof===_t||Tt.getModuleId!==void 0)},reactIs_production.typeOf=vt,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs();function isPlainObject$2(me){if(typeof me!="object"||me===null)return!1;const u=Object.getPrototypeOf(me);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in me)&&!(Symbol.iterator in me)}function deepClone(me){if(reactExports.isValidElement(me)||reactIsExports.isValidElementType(me)||!isPlainObject$2(me))return me;const u={};return Object.keys(me).forEach(t=>{u[t]=deepClone(me[t])}),u}function deepmerge(me,u,t={clone:!0}){const de=t.clone?{...me}:me;return isPlainObject$2(me)&&isPlainObject$2(u)&&Object.keys(u).forEach(pe=>{reactExports.isValidElement(u[pe])||reactIsExports.isValidElementType(u[pe])?de[pe]=u[pe]:isPlainObject$2(u[pe])&&Object.prototype.hasOwnProperty.call(me,pe)&&isPlainObject$2(me[pe])?de[pe]=deepmerge(me[pe],u[pe],t):t.clone?de[pe]=isPlainObject$2(u[pe])?deepClone(u[pe]):u[pe]:de[pe]=u[pe]}),de}const sortBreakpointsValues=me=>{const u=Object.keys(me).map(t=>({key:t,val:me[t]}))||[];return u.sort((t,de)=>t.val-de.val),u.reduce((t,de)=>({...t,[de.key]:de.val}),{})};function createBreakpoints(me){const{values:u={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:de=5,...pe}=me,Le=sortBreakpointsValues(u),Ye=Object.keys(Le);function tt(bt){return`@media (min-width:${typeof u[bt]=="number"?u[bt]:bt}${t})`}function st(bt){return`@media (max-width:${(typeof u[bt]=="number"?u[bt]:bt)-de/100}${t})`}function ht(bt,_t){const vt=Ye.indexOf(_t);return`@media (min-width:${typeof u[bt]=="number"?u[bt]:bt}${t}) and (max-width:${(vt!==-1&&typeof u[Ye[vt]]=="number"?u[Ye[vt]]:_t)-de/100}${t})`}function mt(bt){return Ye.indexOf(bt)+1<Ye.length?ht(bt,Ye[Ye.indexOf(bt)+1]):tt(bt)}function gt(bt){const _t=Ye.indexOf(bt);return _t===0?tt(Ye[1]):_t===Ye.length-1?st(Ye[_t]):ht(bt,Ye[Ye.indexOf(bt)+1]).replace("@media","@media not all and")}return{keys:Ye,values:Le,up:tt,down:st,between:ht,only:mt,not:gt,unit:t,...pe}}function sortContainerQueries(me,u){if(!me.containerQueries)return u;const t=Object.keys(u).filter(de=>de.startsWith("@container")).sort((de,pe)=>{var Ye,tt;const Le=/min-width:\s*([0-9.]+)/;return+(((Ye=de.match(Le))==null?void 0:Ye[1])||0)-+(((tt=pe.match(Le))==null?void 0:tt[1])||0)});return t.length?t.reduce((de,pe)=>{const Le=u[pe];return delete de[pe],de[pe]=Le,de},{...u}):u}function isCqShorthand(me,u){return u==="@"||u.startsWith("@")&&(me.some(t=>u.startsWith(`@${t}`))||!!u.match(/^@\d/))}function getContainerQuery(me,u){const t=u.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,de,pe]=t,Le=Number.isNaN(+de)?de||0:+de;return me.containerQueries(pe).up(Le)}function cssContainerQueries(me){const u=(Le,Ye)=>Le.replace("@media",Ye?`@container ${Ye}`:"@container");function t(Le,Ye){Le.up=(...tt)=>u(me.breakpoints.up(...tt),Ye),Le.down=(...tt)=>u(me.breakpoints.down(...tt),Ye),Le.between=(...tt)=>u(me.breakpoints.between(...tt),Ye),Le.only=(...tt)=>u(me.breakpoints.only(...tt),Ye),Le.not=(...tt)=>{const st=u(me.breakpoints.not(...tt),Ye);return st.includes("not all and")?st.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):st}}const de={},pe=Le=>(t(de,Le),de);return t(pe),{...me,containerQueries:pe}}const shape={borderRadius:4};function merge$2(me,u){return u?deepmerge(me,u,{clone:!1}):me}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:me=>`@media (min-width:${values$1[me]}px)`},defaultContainerQueries={containerQueries:me=>({up:u=>{let t=typeof u=="number"?u:values$1[u]||u;return typeof t=="number"&&(t=`${t}px`),me?`@container ${me} (min-width:${t})`:`@container (min-width:${t})`}})};function handleBreakpoints(me,u,t){const de=me.theme||{};if(Array.isArray(u)){const Le=de.breakpoints||defaultBreakpoints;return u.reduce((Ye,tt,st)=>(Ye[Le.up(Le.keys[st])]=t(u[st]),Ye),{})}if(typeof u=="object"){const Le=de.breakpoints||defaultBreakpoints;return Object.keys(u).reduce((Ye,tt)=>{if(isCqShorthand(Le.keys,tt)){const st=getContainerQuery(de.containerQueries?de:defaultContainerQueries,tt);st&&(Ye[st]=t(u[tt],tt))}else if(Object.keys(Le.values||values$1).includes(tt)){const st=Le.up(tt);Ye[st]=t(u[tt],tt)}else{const st=tt;Ye[st]=u[st]}return Ye},{})}return t(u)}function createEmptyBreakpointObject(me={}){var t;return((t=me.keys)==null?void 0:t.reduce((de,pe)=>{const Le=me.up(pe);return de[Le]={},de},{}))||{}}function removeUnusedBreakpoints(me,u){return me.reduce((t,de)=>{const pe=t[de];return(!pe||Object.keys(pe).length===0)&&delete t[de],t},u)}function capitalize(me){if(typeof me!="string")throw new Error(formatMuiErrorMessage(7));return me.charAt(0).toUpperCase()+me.slice(1)}function getPath(me,u,t=!0){if(!u||typeof u!="string")return null;if(me&&me.vars&&t){const de=`vars.${u}`.split(".").reduce((pe,Le)=>pe&&pe[Le]?pe[Le]:null,me);if(de!=null)return de}return u.split(".").reduce((de,pe)=>de&&de[pe]!=null?de[pe]:null,me)}function getStyleValue$1(me,u,t,de=t){let pe;return typeof me=="function"?pe=me(t):Array.isArray(me)?pe=me[t]||de:pe=getPath(me,t)||de,u&&(pe=u(pe,de,me)),pe}function style$1(me){const{prop:u,cssProperty:t=me.prop,themeKey:de,transform:pe}=me,Le=Ye=>{if(Ye[u]==null)return null;const tt=Ye[u],st=Ye.theme,ht=getPath(st,de)||{};return handleBreakpoints(Ye,tt,gt=>{let bt=getStyleValue$1(ht,pe,gt);return gt===bt&&typeof gt=="string"&&(bt=getStyleValue$1(ht,pe,`${u}${gt==="default"?"":capitalize(gt)}`,gt)),t===!1?bt:{[t]:bt}})};return Le.propTypes={},Le.filterProps=[u],Le}function memoize$1(me){const u={};return t=>(u[t]===void 0&&(u[t]=me(t)),u[t])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(me=>{if(me.length>2)if(aliases[me])me=aliases[me];else return[me];const[u,t]=me.split(""),de=properties[u],pe=directions[t]||"";return Array.isArray(pe)?pe.map(Le=>de+Le):[de+pe]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(me,u,t,de){const pe=getPath(me,u,!0)??t;return typeof pe=="number"||typeof pe=="string"?Le=>typeof Le=="string"?Le:typeof pe=="string"?`calc(${Le} * ${pe})`:pe*Le:Array.isArray(pe)?Le=>{if(typeof Le=="string")return Le;const Ye=Math.abs(Le),tt=pe[Ye];return Le>=0?tt:typeof tt=="number"?-tt:`-${tt}`}:typeof pe=="function"?pe:()=>{}}function createUnarySpacing(me){return createUnaryUnit(me,"spacing",8)}function getValue$1(me,u){return typeof u=="string"||u==null?u:me(u)}function getStyleFromPropValue(me,u){return t=>me.reduce((de,pe)=>(de[pe]=getValue$1(u,t),de),{})}function resolveCssProperty(me,u,t,de){if(!u.includes(t))return null;const pe=getCssProperties(t),Le=getStyleFromPropValue(pe,de),Ye=me[t];return handleBreakpoints(me,Ye,Le)}function style(me,u){const t=createUnarySpacing(me.theme);return Object.keys(me).map(de=>resolveCssProperty(me,u,de,t)).reduce(merge$2,{})}function margin(me){return style(me,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(me){return style(me,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(me=8,u=createUnarySpacing({spacing:me})){if(me.mui)return me;const t=(...de)=>(de.length===0?[1]:de).map(Le=>{const Ye=u(Le);return typeof Ye=="number"?`${Ye}px`:Ye}).join(" ");return t.mui=!0,t}function compose(...me){const u=me.reduce((de,pe)=>(pe.filterProps.forEach(Le=>{de[Le]=pe}),de),{}),t=de=>Object.keys(de).reduce((pe,Le)=>u[Le]?merge$2(pe,u[Le](de)):pe,{});return t.propTypes={},t.filterProps=me.reduce((de,pe)=>de.concat(pe.filterProps),[]),t}function borderTransform(me){return typeof me!="number"?me:`${me}px solid`}function createBorderStyle(me,u){return style$1({prop:me,themeKey:"borders",transform:u})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=me=>{if(me.borderRadius!==void 0&&me.borderRadius!==null){const u=createUnaryUnit(me.theme,"shape.borderRadius",4),t=de=>({borderRadius:getValue$1(u,de)});return handleBreakpoints(me,me.borderRadius,t)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=me=>{if(me.gap!==void 0&&me.gap!==null){const u=createUnaryUnit(me.theme,"spacing",8),t=de=>({gap:getValue$1(u,de)});return handleBreakpoints(me,me.gap,t)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=me=>{if(me.columnGap!==void 0&&me.columnGap!==null){const u=createUnaryUnit(me.theme,"spacing",8),t=de=>({columnGap:getValue$1(u,de)});return handleBreakpoints(me,me.columnGap,t)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=me=>{if(me.rowGap!==void 0&&me.rowGap!==null){const u=createUnaryUnit(me.theme,"spacing",8),t=de=>({rowGap:getValue$1(u,de)});return handleBreakpoints(me,me.rowGap,t)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(me,u){return u==="grey"?u:me}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(me){return me<=1&&me!==0?`${me*100}%`:me}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=me=>{if(me.maxWidth!==void 0&&me.maxWidth!==null){const u=t=>{var pe,Le,Ye,tt,st;const de=((Ye=(Le=(pe=me.theme)==null?void 0:pe.breakpoints)==null?void 0:Le.values)==null?void 0:Ye[t])||values$1[t];return de?((st=(tt=me.theme)==null?void 0:tt.breakpoints)==null?void 0:st.unit)!=="px"?{maxWidth:`${de}${me.theme.breakpoints.unit}`}:{maxWidth:de}:{maxWidth:sizingTransform(t)}};return handleBreakpoints(me,me.maxWidth,u)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:me=>({"@media print":{display:me}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...me){const u=me.reduce((de,pe)=>de.concat(Object.keys(pe)),[]),t=new Set(u);return me.every(de=>t.size===Object.keys(de).length)}function callIfFn(me,u){return typeof me=="function"?me(u):me}function unstable_createStyleFunctionSx(){function me(t,de,pe,Le){const Ye={[t]:de,theme:pe},tt=Le[t];if(!tt)return{[t]:de};const{cssProperty:st=t,themeKey:ht,transform:mt,style:gt}=tt;if(de==null)return null;if(ht==="typography"&&de==="inherit")return{[t]:de};const bt=getPath(pe,ht)||{};return gt?gt(Ye):handleBreakpoints(Ye,de,vt=>{let Tt=getStyleValue$1(bt,mt,vt);return vt===Tt&&typeof vt=="string"&&(Tt=getStyleValue$1(bt,mt,`${t}${vt==="default"?"":capitalize(vt)}`,vt)),st===!1?Tt:{[st]:Tt}})}function u(t){const{sx:de,theme:pe={}}=t||{};if(!de)return null;const Le=pe.unstable_sxConfig??defaultSxConfig;function Ye(tt){let st=tt;if(typeof tt=="function")st=tt(pe);else if(typeof tt!="object")return tt;if(!st)return null;const ht=createEmptyBreakpointObject(pe.breakpoints),mt=Object.keys(ht);let gt=ht;return Object.keys(st).forEach(bt=>{const _t=callIfFn(st[bt],pe);if(_t!=null)if(typeof _t=="object")if(Le[bt])gt=merge$2(gt,me(bt,_t,pe,Le));else{const vt=handleBreakpoints({theme:pe},_t,Tt=>({[bt]:Tt}));objectsHaveSameKeys(vt,_t)?gt[bt]=u({sx:_t,theme:pe}):gt=merge$2(gt,vt)}else gt=merge$2(gt,me(bt,_t,pe,Le))}),sortContainerQueries(pe,removeUnusedBreakpoints(mt,gt))}return Array.isArray(de)?de.map(Ye):Ye(de)}return u}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];function applyStyles(me,u){var de;const t=this;if(t.vars){if(!((de=t.colorSchemes)!=null&&de[me])||typeof t.getColorSchemeSelector!="function")return{};let pe=t.getColorSchemeSelector(me);return pe==="&"?u:((pe.includes("data-")||pe.includes("."))&&(pe=`*:where(${pe.replace(/\s*&$/,"")}) &`),{[pe]:u})}return t.palette.mode===me?u:{}}function createTheme$1(me={},...u){const{breakpoints:t={},palette:de={},spacing:pe,shape:Le={},...Ye}=me,tt=createBreakpoints(t),st=createSpacing(pe);let ht=deepmerge({breakpoints:tt,direction:"ltr",components:{},palette:{mode:"light",...de},spacing:st,shape:{...shape,...Le}},Ye);return ht=cssContainerQueries(ht),ht.applyStyles=applyStyles,ht=u.reduce((mt,gt)=>deepmerge(mt,gt),ht),ht.unstable_sxConfig={...defaultSxConfig,...Ye==null?void 0:Ye.unstable_sxConfig},ht.unstable_sx=function(gt){return styleFunctionSx({sx:gt,theme:this})},ht}function isObjectEmpty$2(me){return Object.keys(me).length===0}function useTheme$2(me=null){const u=reactExports.useContext(ThemeContext);return!u||isObjectEmpty$2(u)?me:u}const systemDefaultTheme$1=createTheme$1();function useTheme$1(me=systemDefaultTheme$1){return useTheme$2(me)}function GlobalStyles$1({styles:me,themeId:u,defaultTheme:t={}}){const de=useTheme$1(t),pe=typeof me=="function"?me(u&&de[u]||de):me;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:pe})}const splitProps=me=>{var de;const u={systemProps:{},otherProps:{}},t=((de=me==null?void 0:me.theme)==null?void 0:de.unstable_sxConfig)??defaultSxConfig;return Object.keys(me).forEach(pe=>{t[pe]?u.systemProps[pe]=me[pe]:u.otherProps[pe]=me[pe]}),u};function extendSxProp$1(me){const{sx:u,...t}=me,{systemProps:de,otherProps:pe}=splitProps(t);let Le;return Array.isArray(u)?Le=[de,...u]:typeof u=="function"?Le=(...Ye)=>{const tt=u(...Ye);return isPlainObject$2(tt)?{...de,...tt}:de}:Le={...de,...u},{...pe,sx:Le}}const defaultGenerator=me=>me,createClassNameGenerator=()=>{let me=defaultGenerator;return{configure(u){me=u},generate(u){return me(u)},reset(){me=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function r$1(me){var u,t,de="";if(typeof me=="string"||typeof me=="number")de+=me;else if(typeof me=="object")if(Array.isArray(me)){var pe=me.length;for(u=0;u<pe;u++)me[u]&&(t=r$1(me[u]))&&(de&&(de+=" "),de+=t)}else for(t in me)me[t]&&(de&&(de+=" "),de+=t);return de}function clsx(){for(var me,u,t=0,de="",pe=arguments.length;t<pe;t++)(me=arguments[t])&&(u=r$1(me))&&(de&&(de+=" "),de+=u);return de}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(me,u,t="Mui"){const de=globalStateClasses[u];return de?`${t}-${de}`:`${ClassNameGenerator.generate(me)}-${u}`}function generateUtilityClasses(me,u,t="Mui"){const de={};return u.forEach(pe=>{de[pe]=generateUtilityClass(me,pe,t)}),de}function preprocessStyles(me){const{variants:u,...t}=me,de={variants:u,style:internal_serializeStyles(t),isProcessed:!0};return de.style===t||u&&u.forEach(pe=>{typeof pe.style!="function"&&(pe.style=internal_serializeStyles(pe.style))}),de}const systemDefaultTheme=createTheme$1();function shouldForwardProp(me){return me!=="ownerState"&&me!=="theme"&&me!=="sx"&&me!=="as"}function defaultOverridesResolver(me){return me?(u,t)=>t[me]:null}function attachTheme(me,u,t){me.theme=isObjectEmpty$1(me.theme)?t:me.theme[u]||me.theme}function processStyle(me,u){const t=typeof u=="function"?u(me):u;if(Array.isArray(t))return t.flatMap(de=>processStyle(me,de));if(Array.isArray(t==null?void 0:t.variants)){let de;if(t.isProcessed)de=t.style;else{const{variants:pe,...Le}=t;de=Le}return processStyleVariants(me,t.variants,[de])}return t!=null&&t.isProcessed?t.style:t}function processStyleVariants(me,u,t=[]){var pe;let de;e:for(let Le=0;Le<u.length;Le+=1){const Ye=u[Le];if(typeof Ye.props=="function"){if(de??(de={...me,...me.ownerState,ownerState:me.ownerState}),!Ye.props(de))continue}else for(const tt in Ye.props)if(me[tt]!==Ye.props[tt]&&((pe=me.ownerState)==null?void 0:pe[tt])!==Ye.props[tt])continue e;typeof Ye.style=="function"?(de??(de={...me,...me.ownerState,ownerState:me.ownerState}),t.push(Ye.style(de))):t.push(Ye.style)}return t}function createStyled(me={}){const{themeId:u,defaultTheme:t=systemDefaultTheme,rootShouldForwardProp:de=shouldForwardProp,slotShouldForwardProp:pe=shouldForwardProp}=me;function Le(tt){attachTheme(tt,u,t)}return(tt,st={})=>{internal_mutateStyles(tt,Bt=>Bt.filter(Dt=>Dt!==styleFunctionSx));const{name:ht,slot:mt,skipVariantsResolver:gt,skipSx:bt,overridesResolver:_t=defaultOverridesResolver(lowercaseFirstLetter(mt)),...vt}=st,Tt=gt!==void 0?gt:mt&&mt!=="Root"&&mt!=="root"||!1,St=bt||!1;let Rt=shouldForwardProp;mt==="Root"||mt==="root"?Rt=de:mt?Rt=pe:isStringTag(tt)&&(Rt=void 0);const Pt=styled$1(tt,{shouldForwardProp:Rt,label:generateStyledLabel(),...vt}),Ot=Bt=>{if(typeof Bt=="function"&&Bt.__emotion_real!==Bt)return function($t){return processStyle($t,Bt)};if(isPlainObject$2(Bt)){const Dt=preprocessStyles(Bt);return Dt.variants?function(kt){return processStyle(kt,Dt)}:Dt.style}return Bt},Mt=(...Bt)=>{const Dt=[],$t=Bt.map(Ot),kt=[];if(Dt.push(Le),ht&&_t&&kt.push(function(zt){var Nt,jt;const qt=(jt=(Nt=zt.theme.components)==null?void 0:Nt[ht])==null?void 0:jt.styleOverrides;if(!qt)return null;const Gt={};for(const Qt in qt)Gt[Qt]=processStyle(zt,qt[Qt]);return _t(zt,Gt)}),ht&&!Tt&&kt.push(function(zt){var Gt,Nt;const Ut=zt.theme,qt=(Nt=(Gt=Ut==null?void 0:Ut.components)==null?void 0:Gt[ht])==null?void 0:Nt.variants;return qt?processStyleVariants(zt,qt):null}),St||kt.push(styleFunctionSx),Array.isArray($t[0])){const Ft=$t.shift(),zt=new Array(Dt.length).fill(""),Ut=new Array(kt.length).fill("");let qt;qt=[...zt,...Ft,...Ut],qt.raw=[...zt,...Ft.raw,...Ut],Dt.unshift(qt)}const Et=[...Dt,...$t,...kt],At=Pt(...Et);return tt.muiName&&(At.muiName=tt.muiName),At};return Pt.withConfig&&(Mt.withConfig=Pt.withConfig),Mt}}function generateStyledLabel(me,u){return void 0}function isObjectEmpty$1(me){for(const u in me)return!1;return!0}function isStringTag(me){return typeof me=="string"&&me.charCodeAt(0)>96}function lowercaseFirstLetter(me){return me&&me.charAt(0).toLowerCase()+me.slice(1)}function resolveProps(me,u){const t={...u};for(const de in me)if(Object.prototype.hasOwnProperty.call(me,de)){const pe=de;if(pe==="components"||pe==="slots")t[pe]={...me[pe],...t[pe]};else if(pe==="componentsProps"||pe==="slotProps"){const Le=me[pe],Ye=u[pe];if(!Ye)t[pe]=Le||{};else if(!Le)t[pe]=Ye;else{t[pe]={...Ye};for(const tt in Le)if(Object.prototype.hasOwnProperty.call(Le,tt)){const st=tt;t[pe][st]=resolveProps(Le[st],Ye[st])}}}else t[pe]===void 0&&(t[pe]=me[pe])}return t}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function clamp$2(me,u=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(u,Math.min(me,t))}function clampWrapper(me,u=0,t=1){return clamp$2(me,u,t)}function hexToRgb(me){me=me.slice(1);const u=new RegExp(`.{1,${me.length>=6?2:1}}`,"g");let t=me.match(u);return t&&t[0].length===1&&(t=t.map(de=>de+de)),t?`rgb${t.length===4?"a":""}(${t.map((de,pe)=>pe<3?parseInt(de,16):Math.round(parseInt(de,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(me){if(me.type)return me;if(me.charAt(0)==="#")return decomposeColor(hexToRgb(me));const u=me.indexOf("("),t=me.substring(0,u);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(formatMuiErrorMessage(9,me));let de=me.substring(u+1,me.length-1),pe;if(t==="color"){if(de=de.split(" "),pe=de.shift(),de.length===4&&de[3].charAt(0)==="/"&&(de[3]=de[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(pe))throw new Error(formatMuiErrorMessage(10,pe))}else de=de.split(",");return de=de.map(Le=>parseFloat(Le)),{type:t,values:de,colorSpace:pe}}const colorChannel=me=>{const u=decomposeColor(me);return u.values.slice(0,3).map((t,de)=>u.type.includes("hsl")&&de!==0?`${t}%`:t).join(" ")},private_safeColorChannel=(me,u)=>{try{return colorChannel(me)}catch{return me}};function recomposeColor(me){const{type:u,colorSpace:t}=me;let{values:de}=me;return u.includes("rgb")?de=de.map((pe,Le)=>Le<3?parseInt(pe,10):pe):u.includes("hsl")&&(de[1]=`${de[1]}%`,de[2]=`${de[2]}%`),u.includes("color")?de=`${t} ${de.join(" ")}`:de=`${de.join(", ")}`,`${u}(${de})`}function hslToRgb(me){me=decomposeColor(me);const{values:u}=me,t=u[0],de=u[1]/100,pe=u[2]/100,Le=de*Math.min(pe,1-pe),Ye=(ht,mt=(ht+t/30)%12)=>pe-Le*Math.max(Math.min(mt-3,9-mt,1),-1);let tt="rgb";const st=[Math.round(Ye(0)*255),Math.round(Ye(8)*255),Math.round(Ye(4)*255)];return me.type==="hsla"&&(tt+="a",st.push(u[3])),recomposeColor({type:tt,values:st})}function getLuminance(me){me=decomposeColor(me);let u=me.type==="hsl"||me.type==="hsla"?decomposeColor(hslToRgb(me)).values:me.values;return u=u.map(t=>(me.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*u[0]+.7152*u[1]+.0722*u[2]).toFixed(3))}function getContrastRatio(me,u){const t=getLuminance(me),de=getLuminance(u);return(Math.max(t,de)+.05)/(Math.min(t,de)+.05)}function alpha(me,u){return me=decomposeColor(me),u=clampWrapper(u),(me.type==="rgb"||me.type==="hsl")&&(me.type+="a"),me.type==="color"?me.values[3]=`/${u}`:me.values[3]=u,recomposeColor(me)}function private_safeAlpha(me,u,t){try{return alpha(me,u)}catch{return me}}function darken(me,u){if(me=decomposeColor(me),u=clampWrapper(u),me.type.includes("hsl"))me.values[2]*=1-u;else if(me.type.includes("rgb")||me.type.includes("color"))for(let t=0;t<3;t+=1)me.values[t]*=1-u;return recomposeColor(me)}function private_safeDarken(me,u,t){try{return darken(me,u)}catch{return me}}function lighten(me,u){if(me=decomposeColor(me),u=clampWrapper(u),me.type.includes("hsl"))me.values[2]+=(100-me.values[2])*u;else if(me.type.includes("rgb"))for(let t=0;t<3;t+=1)me.values[t]+=(255-me.values[t])*u;else if(me.type.includes("color"))for(let t=0;t<3;t+=1)me.values[t]+=(1-me.values[t])*u;return recomposeColor(me)}function private_safeLighten(me,u,t){try{return lighten(me,u)}catch{return me}}function emphasize(me,u=.15){return getLuminance(me)>.5?darken(me,u):lighten(me,u)}function private_safeEmphasize(me,u,t){try{return emphasize(me,u)}catch{return me}}function createChainedFunction(...me){return me.reduce((u,t)=>t==null?u:function(...pe){u.apply(this,pe),t.apply(this,pe)},()=>{})}function debounce$1(me,u=166){let t;function de(...pe){const Le=()=>{me.apply(this,pe)};clearTimeout(t),t=setTimeout(Le,u)}return de.clear=()=>{clearTimeout(t)},de}function isMuiElement(me,u){var t,de,pe;return reactExports.isValidElement(me)&&u.indexOf(me.type.muiName??((pe=(de=(t=me.type)==null?void 0:t._payload)==null?void 0:de.value)==null?void 0:pe.muiName))!==-1}function ownerDocument(me){return me&&me.ownerDocument||document}function ownerWindow(me){return ownerDocument(me).defaultView||window}function setRef(me,u){typeof me=="function"?me(u):me&&(me.current=u)}let globalId=0;function useGlobalId(me){const[u,t]=reactExports.useState(me),de=u;return reactExports.useEffect(()=>{u==null&&(globalId+=1,t(`mui-${globalId}`))},[u]),de}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(me){return maybeReactUseId!==void 0?maybeReactUseId():useGlobalId(me)}function useControlled({controlled:me,default:u,name:t,state:de="value"}){const{current:pe}=reactExports.useRef(me!==void 0),[Le,Ye]=reactExports.useState(u),tt=pe?me:Le,st=reactExports.useCallback(ht=>{pe||Ye(ht)},[]);return[tt,st]}function useEventCallback(me){const u=reactExports.useRef(me);return useEnhancedEffect(()=>{u.current=me}),reactExports.useRef((...t)=>(0,u.current)(...t)).current}function useForkRef(...me){const u=reactExports.useRef(void 0),t=reactExports.useCallback(de=>{const pe=me.map(Le=>{if(Le==null)return null;if(typeof Le=="function"){const Ye=Le,tt=Ye(de);return typeof tt=="function"?tt:()=>{Ye(null)}}return Le.current=de,()=>{Le.current=null}});return()=>{pe.forEach(Le=>Le==null?void 0:Le())}},me);return reactExports.useMemo(()=>me.every(de=>de==null)?null:de=>{u.current&&(u.current(),u.current=void 0),de!=null&&(u.current=t(de))},me)}const UNINITIALIZED={};function useLazyRef(me,u){const t=reactExports.useRef(UNINITIALIZED);return t.current===UNINITIALIZED&&(t.current=me(u)),t}const EMPTY=[];function useOnMount(me){reactExports.useEffect(me,EMPTY)}class Timeout{constructor(){wt(this,"currentId",null);wt(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});wt(this,"disposeEffect",()=>this.clear)}static create(){return new Timeout}start(u,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},u)}}function useTimeout(){const me=useLazyRef(Timeout.create).current;return useOnMount(me.disposeEffect),me}function isFocusVisible(me){try{return me.matches(":focus-visible")}catch{}return!1}function getScrollbarSize(me=window){const u=me.document.documentElement.clientWidth;return me.innerWidth-u}function composeClasses(me,u,t=void 0){const de={};for(const pe in me){const Le=me[pe];let Ye="",tt=!0;for(let st=0;st<Le.length;st+=1){const ht=Le[st];ht&&(Ye+=(tt===!0?"":" ")+u(ht),tt=!1,t&&t[ht]&&(Ye+=" "+t[ht]))}de[pe]=Ye}return de}function isHostComponent$1(me){return typeof me=="string"}function appendOwnerState(me,u,t){return me===void 0||isHostComponent$1(me)?u:{...u,ownerState:{...u.ownerState,...t}}}function extractEventHandlers(me,u=[]){if(me===void 0)return{};const t={};return Object.keys(me).filter(de=>de.match(/^on[A-Z]/)&&typeof me[de]=="function"&&!u.includes(de)).forEach(de=>{t[de]=me[de]}),t}function omitEventHandlers(me){if(me===void 0)return{};const u={};return Object.keys(me).filter(t=>!(t.match(/^on[A-Z]/)&&typeof me[t]=="function")).forEach(t=>{u[t]=me[t]}),u}function mergeSlotProps$1(me){const{getSlotProps:u,additionalProps:t,externalSlotProps:de,externalForwardedProps:pe,className:Le}=me;if(!u){const _t=clsx(t==null?void 0:t.className,Le,pe==null?void 0:pe.className,de==null?void 0:de.className),vt={...t==null?void 0:t.style,...pe==null?void 0:pe.style,...de==null?void 0:de.style},Tt={...t,...pe,...de};return _t.length>0&&(Tt.className=_t),Object.keys(vt).length>0&&(Tt.style=vt),{props:Tt,internalRef:void 0}}const Ye=extractEventHandlers({...pe,...de}),tt=omitEventHandlers(de),st=omitEventHandlers(pe),ht=u(Ye),mt=clsx(ht==null?void 0:ht.className,t==null?void 0:t.className,Le,pe==null?void 0:pe.className,de==null?void 0:de.className),gt={...ht==null?void 0:ht.style,...t==null?void 0:t.style,...pe==null?void 0:pe.style,...de==null?void 0:de.style},bt={...ht,...t,...st,...tt};return mt.length>0&&(bt.className=mt),Object.keys(gt).length>0&&(bt.style=gt),{props:bt,internalRef:ht.ref}}function resolveComponentProps(me,u,t){return typeof me=="function"?me(u,t):me}function useSlotProps(me){var gt;const{elementType:u,externalSlotProps:t,ownerState:de,skipResolvingSlotProps:pe=!1,...Le}=me,Ye=pe?{}:resolveComponentProps(t,de),{props:tt,internalRef:st}=mergeSlotProps$1({...Le,externalSlotProps:Ye}),ht=useForkRef(st,Ye==null?void 0:Ye.ref,(gt=me.additionalProps)==null?void 0:gt.ref);return appendOwnerState(u,{...tt,ref:ht},de)}function getReactElementRef(me){var u;return parseInt(reactExports.version,10)>=19?((u=me==null?void 0:me.props)==null?void 0:u.ref)||null:(me==null?void 0:me.ref)||null}const RtlContext=reactExports.createContext(),useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function getThemeProps(me){const{theme:u,name:t,props:de}=me;if(!u||!u.components||!u.components[t])return de;const pe=u.components[t];return pe.defaultProps?resolveProps(pe.defaultProps,de):!pe.styleOverrides&&!pe.variants?resolveProps(pe,de):de}function useDefaultProps$1({props:me,name:u}){const t=reactExports.useContext(PropsContext);return getThemeProps({props:me,name:u,theme:{components:t}})}const arg={theme:void 0};function unstable_memoTheme(me){let u,t;return function(pe){let Le=u;return(Le===void 0||pe.theme!==t)&&(arg.theme=pe.theme,Le=preprocessStyles(me(arg)),u=Le,t=pe.theme),Le}}function createGetCssVar$1(me=""){function u(...de){if(!de.length)return"";const pe=de[0];return typeof pe=="string"&&!pe.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${me?`${me}-`:""}${pe}${u(...de.slice(1))})`:`, ${pe}`}return(de,...pe)=>`var(--${me?`${me}-`:""}${de}${u(...pe)})`}const assignNestedKeys=(me,u,t,de=[])=>{let pe=me;u.forEach((Le,Ye)=>{Ye===u.length-1?Array.isArray(pe)?pe[Number(Le)]=t:pe&&typeof pe=="object"&&(pe[Le]=t):pe&&typeof pe=="object"&&(pe[Le]||(pe[Le]=de.includes(Le)?[]:{}),pe=pe[Le])})},walkObjectDeep=(me,u,t)=>{function de(pe,Le=[],Ye=[]){Object.entries(pe).forEach(([tt,st])=>{(!t||t&&!t([...Le,tt]))&&st!=null&&(typeof st=="object"&&Object.keys(st).length>0?de(st,[...Le,tt],Array.isArray(st)?[...Ye,tt]:Ye):u([...Le,tt],st,Ye))})}de(me)},getCssValue=(me,u)=>typeof u=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(de=>me.includes(de))||me[me.length-1].toLowerCase().includes("opacity")?u:`${u}px`:u;function cssVarsParser(me,u){const{prefix:t,shouldSkipGeneratingVar:de}=u||{},pe={},Le={},Ye={};return walkObjectDeep(me,(tt,st,ht)=>{if((typeof st=="string"||typeof st=="number")&&(!de||!de(tt,st))){const mt=`--${t?`${t}-`:""}${tt.join("-")}`,gt=getCssValue(tt,st);Object.assign(pe,{[mt]:gt}),assignNestedKeys(Le,tt,`var(${mt})`,ht),assignNestedKeys(Ye,tt,`var(${mt}, ${gt})`,ht)}},tt=>tt[0]==="vars"),{css:pe,vars:Le,varsWithDefaults:Ye}}function prepareCssVars(me,u={}){const{getSelector:t=St,disableCssColorScheme:de,colorSchemeSelector:pe}=u,{colorSchemes:Le={},components:Ye,defaultColorScheme:tt="light",...st}=me,{vars:ht,css:mt,varsWithDefaults:gt}=cssVarsParser(st,u);let bt=gt;const _t={},{[tt]:vt,...Tt}=Le;if(Object.entries(Tt||{}).forEach(([Ot,Mt])=>{const{vars:Bt,css:Dt,varsWithDefaults:$t}=cssVarsParser(Mt,u);bt=deepmerge(bt,$t),_t[Ot]={css:Dt,vars:Bt}}),vt){const{css:Ot,vars:Mt,varsWithDefaults:Bt}=cssVarsParser(vt,u);bt=deepmerge(bt,Bt),_t[tt]={css:Ot,vars:Mt}}function St(Ot,Mt){var Dt,$t;let Bt=pe;if(pe==="class"&&(Bt=".%s"),pe==="data"&&(Bt="[data-%s]"),pe!=null&&pe.startsWith("data-")&&!pe.includes("%s")&&(Bt=`[${pe}="%s"]`),Ot){if(Bt==="media")return me.defaultColorScheme===Ot?":root":{[`@media (prefers-color-scheme: ${(($t=(Dt=Le[Ot])==null?void 0:Dt.palette)==null?void 0:$t.mode)||Ot})`]:{":root":Mt}};if(Bt)return me.defaultColorScheme===Ot?`:root, ${Bt.replace("%s",String(Ot))}`:Bt.replace("%s",String(Ot))}return":root"}return{vars:bt,generateThemeVars:()=>{let Ot={...ht};return Object.entries(_t).forEach(([,{vars:Mt}])=>{Ot=deepmerge(Ot,Mt)}),Ot},generateStyleSheets:()=>{var kt,Et;const Ot=[],Mt=me.defaultColorScheme||"light";function Bt(At,Ft){Object.keys(Ft).length&&Ot.push(typeof At=="string"?{[At]:{...Ft}}:At)}Bt(t(void 0,{...mt}),mt);const{[Mt]:Dt,...$t}=_t;if(Dt){const{css:At}=Dt,Ft=(Et=(kt=Le[Mt])==null?void 0:kt.palette)==null?void 0:Et.mode,zt=!de&&Ft?{colorScheme:Ft,...At}:{...At};Bt(t(Mt,{...zt}),zt)}return Object.entries($t).forEach(([At,{css:Ft}])=>{var qt,Gt;const zt=(Gt=(qt=Le[At])==null?void 0:qt.palette)==null?void 0:Gt.mode,Ut=!de&&zt?{colorScheme:zt,...Ft}:{...Ft};Bt(t(At,{...Ut}),Ut)}),Ot}}}function createGetColorSchemeSelector(me){return function(t){return me==="media"?`@media (prefers-color-scheme: ${t})`:me?me.startsWith("data-")&&!me.includes("%s")?`[${me}="${t}"] &`:me==="class"?`.${t} &`:me==="data"?`[data-${t}] &`:`${me.replace("%s",t)} &`:"&"}}function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(me,u,t,de){const pe=de.light||de,Le=de.dark||de*1.5;me[u]||(me.hasOwnProperty(t)?me[u]=me[t]:u==="light"?me.light=lighten(me.main,pe):u==="dark"&&(me.dark=darken(me.main,Le)))}function getDefaultPrimary(me="light"){return me==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(me="light"){return me==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(me="light"){return me==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(me="light"){return me==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(me="light"){return me==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(me="light"){return me==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function createPalette(me){const{mode:u="light",contrastThreshold:t=3,tonalOffset:de=.2,...pe}=me,Le=me.primary||getDefaultPrimary(u),Ye=me.secondary||getDefaultSecondary(u),tt=me.error||getDefaultError(u),st=me.info||getDefaultInfo(u),ht=me.success||getDefaultSuccess(u),mt=me.warning||getDefaultWarning(u);function gt(Tt){return getContrastRatio(Tt,dark.text.primary)>=t?dark.text.primary:light.text.primary}const bt=({color:Tt,name:St,mainShade:Rt=500,lightShade:Pt=300,darkShade:Ot=700})=>{if(Tt={...Tt},!Tt.main&&Tt[Rt]&&(Tt.main=Tt[Rt]),!Tt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,St?` (${St})`:"",Rt));if(typeof Tt.main!="string")throw new Error(formatMuiErrorMessage(12,St?` (${St})`:"",JSON.stringify(Tt.main)));return addLightOrDark(Tt,"light",Pt,de),addLightOrDark(Tt,"dark",Ot,de),Tt.contrastText||(Tt.contrastText=gt(Tt.main)),Tt};let _t;return u==="light"?_t=getLight():u==="dark"&&(_t=getDark()),deepmerge({common:{...common},mode:u,primary:bt({color:Le,name:"primary"}),secondary:bt({color:Ye,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:bt({color:tt,name:"error"}),warning:bt({color:mt,name:"warning"}),info:bt({color:st,name:"info"}),success:bt({color:ht,name:"success"}),grey,contrastThreshold:t,getContrastText:gt,augmentColor:bt,tonalOffset:de,..._t},pe)}function prepareTypographyVars(me){const u={};return Object.entries(me).forEach(de=>{const[pe,Le]=de;typeof Le=="object"&&(u[pe]=`${Le.fontStyle?`${Le.fontStyle} `:""}${Le.fontVariant?`${Le.fontVariant} `:""}${Le.fontWeight?`${Le.fontWeight} `:""}${Le.fontStretch?`${Le.fontStretch} `:""}${Le.fontSize||""}${Le.lineHeight?`/${Le.lineHeight} `:""}${Le.fontFamily||""}`)}),u}function createMixins(me,u){return{toolbar:{minHeight:56,[me.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[me.up("sm")]:{minHeight:64}},...u}}function round$1(me){return Math.round(me*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(me,u){const{fontFamily:t=defaultFontFamily,fontSize:de=14,fontWeightLight:pe=300,fontWeightRegular:Le=400,fontWeightMedium:Ye=500,fontWeightBold:tt=700,htmlFontSize:st=16,allVariants:ht,pxToRem:mt,...gt}=typeof u=="function"?u(me):u,bt=de/14,_t=mt||(St=>`${St/st*bt}rem`),vt=(St,Rt,Pt,Ot,Mt)=>({fontFamily:t,fontWeight:St,fontSize:_t(Rt),lineHeight:Pt,...t===defaultFontFamily?{letterSpacing:`${round$1(Ot/Rt)}em`}:{},...Mt,...ht}),Tt={h1:vt(pe,96,1.167,-1.5),h2:vt(pe,60,1.2,-.5),h3:vt(Le,48,1.167,0),h4:vt(Le,34,1.235,.25),h5:vt(Le,24,1.334,0),h6:vt(Ye,20,1.6,.15),subtitle1:vt(Le,16,1.75,.15),subtitle2:vt(Ye,14,1.57,.1),body1:vt(Le,16,1.5,.15),body2:vt(Le,14,1.43,.15),button:vt(Ye,14,1.75,.4,caseAllCaps),caption:vt(Le,12,1.66,.4),overline:vt(Le,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:st,pxToRem:_t,fontFamily:t,fontSize:de,fontWeightLight:pe,fontWeightRegular:Le,fontWeightMedium:Ye,fontWeightBold:tt,...Tt},gt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...me){return[`${me[0]}px ${me[1]}px ${me[2]}px ${me[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${me[4]}px ${me[5]}px ${me[6]}px ${me[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${me[8]}px ${me[9]}px ${me[10]}px ${me[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(me){return`${Math.round(me)}ms`}function getAutoHeightDuration(me){if(!me)return 0;const u=me/36;return Math.min(Math.round((4+15*u**.25+u/5)*10),3e3)}function createTransitions(me){const u={...easing,...me.easing},t={...duration,...me.duration};return{getAutoHeightDuration,create:(pe=["all"],Le={})=>{const{duration:Ye=t.standard,easing:tt=u.easeInOut,delay:st=0,...ht}=Le;return(Array.isArray(pe)?pe:[pe]).map(mt=>`${mt} ${typeof Ye=="string"?Ye:formatMs(Ye)} ${tt} ${typeof st=="string"?st:formatMs(st)}`).join(",")},...me,easing:u,duration:t}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(me){return isPlainObject$2(me)||typeof me>"u"||typeof me=="string"||typeof me=="boolean"||typeof me=="number"||Array.isArray(me)}function stringifyTheme(me={}){const u={...me};function t(de){const pe=Object.entries(de);for(let Le=0;Le<pe.length;Le++){const[Ye,tt]=pe[Le];!isSerializable(tt)||Ye.startsWith("unstable_")?delete de[Ye]:isPlainObject$2(tt)&&(de[Ye]={...tt},t(de[Ye]))}}return t(u),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(u,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function createThemeNoVars(me={},...u){const{breakpoints:t,mixins:de={},spacing:pe,palette:Le={},transitions:Ye={},typography:tt={},shape:st,...ht}=me;if(me.vars&&me.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const mt=createPalette(Le),gt=createTheme$1(me);let bt=deepmerge(gt,{mixins:createMixins(gt.breakpoints,de),palette:mt,shadows:shadows.slice(),typography:createTypography(mt,tt),transitions:createTransitions(Ye),zIndex:{...zIndex}});return bt=deepmerge(bt,ht),bt=u.reduce((_t,vt)=>deepmerge(_t,vt),bt),bt.unstable_sxConfig={...defaultSxConfig,...ht==null?void 0:ht.unstable_sxConfig},bt.unstable_sx=function(vt){return styleFunctionSx({sx:vt,theme:this})},bt.toRuntimeSource=stringifyTheme,bt}function getOverlayAlpha(me){let u;return me<1?u=5.11916*me**2:u=4.5*Math.log(me+1)+2,Math.round(u*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((me,u)=>{if(u===0)return"none";const t=getOverlayAlpha(u);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function getOpacity(me){return{inputPlaceholder:me==="dark"?.5:.42,inputUnderline:me==="dark"?.7:.42,switchTrackDisabled:me==="dark"?.2:.12,switchTrack:me==="dark"?.3:.38}}function getOverlays(me){return me==="dark"?defaultDarkOverlays:[]}function createColorScheme(me){const{palette:u={mode:"light"},opacity:t,overlays:de,...pe}=me,Le=createPalette(u);return{palette:Le,opacity:{...getOpacity(Le.mode),...t},overlays:de||getOverlays(Le.mode),...pe}}function shouldSkipGeneratingVar(me){var u;return!!me[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!me[0].match(/sxConfig$/)||me[0]==="palette"&&!!((u=me[1])!=null&&u.match(/(mode|contrastThreshold|tonalOffset)/))}const excludeVariablesFromRoot=me=>[...[...Array(25)].map((u,t)=>`--${me?`${me}-`:""}overlays-${t}`),`--${me?`${me}-`:""}palette-AppBar-darkBg`,`--${me?`${me}-`:""}palette-AppBar-darkColor`],defaultGetSelector=me=>(u,t)=>{const de=me.rootSelector||":root",pe=me.colorSchemeSelector;let Le=pe;if(pe==="class"&&(Le=".%s"),pe==="data"&&(Le="[data-%s]"),pe!=null&&pe.startsWith("data-")&&!pe.includes("%s")&&(Le=`[${pe}="%s"]`),me.defaultColorScheme===u){if(u==="dark"){const Ye={};return excludeVariablesFromRoot(me.cssVarPrefix).forEach(tt=>{Ye[tt]=t[tt],delete t[tt]}),Le==="media"?{[de]:t,"@media (prefers-color-scheme: dark)":{[de]:Ye}}:Le?{[Le.replace("%s",u)]:Ye,[`${de}, ${Le.replace("%s",u)}`]:t}:{[de]:{...t,...Ye}}}if(Le&&Le!=="media")return`${de}, ${Le.replace("%s",String(u))}`}else if(u){if(Le==="media")return{[`@media (prefers-color-scheme: ${String(u)})`]:{[de]:t}};if(Le)return Le.replace("%s",String(u))}return de};function assignNode(me,u){u.forEach(t=>{me[t]||(me[t]={})})}function setColor(me,u,t){!me[u]&&t&&(me[u]=t)}function toRgb(me){return typeof me!="string"||!me.startsWith("hsl")?me:hslToRgb(me)}function setColorChannel(me,u){`${u}Channel`in me||(me[`${u}Channel`]=private_safeColorChannel(toRgb(me[u])))}function getSpacingVal(me){return typeof me=="number"?`${me}px`:typeof me=="string"||typeof me=="function"||Array.isArray(me)?me:"8px"}const silent=me=>{try{return me()}catch{}},createGetCssVar=(me="mui")=>createGetCssVar$1(me);function attachColorScheme$1(me,u,t,de){if(!u)return;u=u===!0?{}:u;const pe=de==="dark"?"dark":"light";if(!t){me[de]=createColorScheme({...u,palette:{mode:pe,...u==null?void 0:u.palette}});return}const{palette:Le,...Ye}=createThemeNoVars({...t,palette:{mode:pe,...u==null?void 0:u.palette}});return me[de]={...u,palette:Le,opacity:{...getOpacity(pe),...u==null?void 0:u.opacity},overlays:(u==null?void 0:u.overlays)||getOverlays(pe)},Ye}function createThemeWithVars(me={},...u){const{colorSchemes:t={light:!0},defaultColorScheme:de,disableCssColorScheme:pe=!1,cssVarPrefix:Le="mui",shouldSkipGeneratingVar:Ye=shouldSkipGeneratingVar,colorSchemeSelector:tt=t.light&&t.dark?"media":void 0,rootSelector:st=":root",...ht}=me,mt=Object.keys(t)[0],gt=de||(t.light&&mt!=="light"?"light":mt),bt=createGetCssVar(Le),{[gt]:_t,light:vt,dark:Tt,...St}=t,Rt={...St};let Pt=_t;if((gt==="dark"&&!("dark"in t)||gt==="light"&&!("light"in t))&&(Pt=!0),!Pt)throw new Error(formatMuiErrorMessage(21,gt));const Ot=attachColorScheme$1(Rt,Pt,ht,gt);vt&&!Rt.light&&attachColorScheme$1(Rt,vt,void 0,"light"),Tt&&!Rt.dark&&attachColorScheme$1(Rt,Tt,void 0,"dark");let Mt={defaultColorScheme:gt,...Ot,cssVarPrefix:Le,colorSchemeSelector:tt,rootSelector:st,getCssVar:bt,colorSchemes:Rt,font:{...prepareTypographyVars(Ot.typography),...Ot.font},spacing:getSpacingVal(ht.spacing)};Object.keys(Mt.colorSchemes).forEach(Et=>{const At=Mt.colorSchemes[Et].palette,Ft=zt=>{const Ut=zt.split("-"),qt=Ut[1],Gt=Ut[2];return bt(zt,At[qt][Gt])};if(At.mode==="light"&&(setColor(At.common,"background","#fff"),setColor(At.common,"onBackground","#000")),At.mode==="dark"&&(setColor(At.common,"background","#000"),setColor(At.common,"onBackground","#fff")),assignNode(At,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),At.mode==="light"){setColor(At.Alert,"errorColor",private_safeDarken(At.error.light,.6)),setColor(At.Alert,"infoColor",private_safeDarken(At.info.light,.6)),setColor(At.Alert,"successColor",private_safeDarken(At.success.light,.6)),setColor(At.Alert,"warningColor",private_safeDarken(At.warning.light,.6)),setColor(At.Alert,"errorFilledBg",Ft("palette-error-main")),setColor(At.Alert,"infoFilledBg",Ft("palette-info-main")),setColor(At.Alert,"successFilledBg",Ft("palette-success-main")),setColor(At.Alert,"warningFilledBg",Ft("palette-warning-main")),setColor(At.Alert,"errorFilledColor",silent(()=>At.getContrastText(At.error.main))),setColor(At.Alert,"infoFilledColor",silent(()=>At.getContrastText(At.info.main))),setColor(At.Alert,"successFilledColor",silent(()=>At.getContrastText(At.success.main))),setColor(At.Alert,"warningFilledColor",silent(()=>At.getContrastText(At.warning.main))),setColor(At.Alert,"errorStandardBg",private_safeLighten(At.error.light,.9)),setColor(At.Alert,"infoStandardBg",private_safeLighten(At.info.light,.9)),setColor(At.Alert,"successStandardBg",private_safeLighten(At.success.light,.9)),setColor(At.Alert,"warningStandardBg",private_safeLighten(At.warning.light,.9)),setColor(At.Alert,"errorIconColor",Ft("palette-error-main")),setColor(At.Alert,"infoIconColor",Ft("palette-info-main")),setColor(At.Alert,"successIconColor",Ft("palette-success-main")),setColor(At.Alert,"warningIconColor",Ft("palette-warning-main")),setColor(At.AppBar,"defaultBg",Ft("palette-grey-100")),setColor(At.Avatar,"defaultBg",Ft("palette-grey-400")),setColor(At.Button,"inheritContainedBg",Ft("palette-grey-300")),setColor(At.Button,"inheritContainedHoverBg",Ft("palette-grey-A100")),setColor(At.Chip,"defaultBorder",Ft("palette-grey-400")),setColor(At.Chip,"defaultAvatarColor",Ft("palette-grey-700")),setColor(At.Chip,"defaultIconColor",Ft("palette-grey-700")),setColor(At.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(At.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(At.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(At.LinearProgress,"primaryBg",private_safeLighten(At.primary.main,.62)),setColor(At.LinearProgress,"secondaryBg",private_safeLighten(At.secondary.main,.62)),setColor(At.LinearProgress,"errorBg",private_safeLighten(At.error.main,.62)),setColor(At.LinearProgress,"infoBg",private_safeLighten(At.info.main,.62)),setColor(At.LinearProgress,"successBg",private_safeLighten(At.success.main,.62)),setColor(At.LinearProgress,"warningBg",private_safeLighten(At.warning.main,.62)),setColor(At.Skeleton,"bg",`rgba(${Ft("palette-text-primaryChannel")} / 0.11)`),setColor(At.Slider,"primaryTrack",private_safeLighten(At.primary.main,.62)),setColor(At.Slider,"secondaryTrack",private_safeLighten(At.secondary.main,.62)),setColor(At.Slider,"errorTrack",private_safeLighten(At.error.main,.62)),setColor(At.Slider,"infoTrack",private_safeLighten(At.info.main,.62)),setColor(At.Slider,"successTrack",private_safeLighten(At.success.main,.62)),setColor(At.Slider,"warningTrack",private_safeLighten(At.warning.main,.62));const zt=private_safeEmphasize(At.background.default,.8);setColor(At.SnackbarContent,"bg",zt),setColor(At.SnackbarContent,"color",silent(()=>At.getContrastText(zt))),setColor(At.SpeedDialAction,"fabHoverBg",private_safeEmphasize(At.background.paper,.15)),setColor(At.StepConnector,"border",Ft("palette-grey-400")),setColor(At.StepContent,"border",Ft("palette-grey-400")),setColor(At.Switch,"defaultColor",Ft("palette-common-white")),setColor(At.Switch,"defaultDisabledColor",Ft("palette-grey-100")),setColor(At.Switch,"primaryDisabledColor",private_safeLighten(At.primary.main,.62)),setColor(At.Switch,"secondaryDisabledColor",private_safeLighten(At.secondary.main,.62)),setColor(At.Switch,"errorDisabledColor",private_safeLighten(At.error.main,.62)),setColor(At.Switch,"infoDisabledColor",private_safeLighten(At.info.main,.62)),setColor(At.Switch,"successDisabledColor",private_safeLighten(At.success.main,.62)),setColor(At.Switch,"warningDisabledColor",private_safeLighten(At.warning.main,.62)),setColor(At.TableCell,"border",private_safeLighten(private_safeAlpha(At.divider,1),.88)),setColor(At.Tooltip,"bg",private_safeAlpha(At.grey[700],.92))}if(At.mode==="dark"){setColor(At.Alert,"errorColor",private_safeLighten(At.error.light,.6)),setColor(At.Alert,"infoColor",private_safeLighten(At.info.light,.6)),setColor(At.Alert,"successColor",private_safeLighten(At.success.light,.6)),setColor(At.Alert,"warningColor",private_safeLighten(At.warning.light,.6)),setColor(At.Alert,"errorFilledBg",Ft("palette-error-dark")),setColor(At.Alert,"infoFilledBg",Ft("palette-info-dark")),setColor(At.Alert,"successFilledBg",Ft("palette-success-dark")),setColor(At.Alert,"warningFilledBg",Ft("palette-warning-dark")),setColor(At.Alert,"errorFilledColor",silent(()=>At.getContrastText(At.error.dark))),setColor(At.Alert,"infoFilledColor",silent(()=>At.getContrastText(At.info.dark))),setColor(At.Alert,"successFilledColor",silent(()=>At.getContrastText(At.success.dark))),setColor(At.Alert,"warningFilledColor",silent(()=>At.getContrastText(At.warning.dark))),setColor(At.Alert,"errorStandardBg",private_safeDarken(At.error.light,.9)),setColor(At.Alert,"infoStandardBg",private_safeDarken(At.info.light,.9)),setColor(At.Alert,"successStandardBg",private_safeDarken(At.success.light,.9)),setColor(At.Alert,"warningStandardBg",private_safeDarken(At.warning.light,.9)),setColor(At.Alert,"errorIconColor",Ft("palette-error-main")),setColor(At.Alert,"infoIconColor",Ft("palette-info-main")),setColor(At.Alert,"successIconColor",Ft("palette-success-main")),setColor(At.Alert,"warningIconColor",Ft("palette-warning-main")),setColor(At.AppBar,"defaultBg",Ft("palette-grey-900")),setColor(At.AppBar,"darkBg",Ft("palette-background-paper")),setColor(At.AppBar,"darkColor",Ft("palette-text-primary")),setColor(At.Avatar,"defaultBg",Ft("palette-grey-600")),setColor(At.Button,"inheritContainedBg",Ft("palette-grey-800")),setColor(At.Button,"inheritContainedHoverBg",Ft("palette-grey-700")),setColor(At.Chip,"defaultBorder",Ft("palette-grey-700")),setColor(At.Chip,"defaultAvatarColor",Ft("palette-grey-300")),setColor(At.Chip,"defaultIconColor",Ft("palette-grey-300")),setColor(At.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(At.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(At.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(At.LinearProgress,"primaryBg",private_safeDarken(At.primary.main,.5)),setColor(At.LinearProgress,"secondaryBg",private_safeDarken(At.secondary.main,.5)),setColor(At.LinearProgress,"errorBg",private_safeDarken(At.error.main,.5)),setColor(At.LinearProgress,"infoBg",private_safeDarken(At.info.main,.5)),setColor(At.LinearProgress,"successBg",private_safeDarken(At.success.main,.5)),setColor(At.LinearProgress,"warningBg",private_safeDarken(At.warning.main,.5)),setColor(At.Skeleton,"bg",`rgba(${Ft("palette-text-primaryChannel")} / 0.13)`),setColor(At.Slider,"primaryTrack",private_safeDarken(At.primary.main,.5)),setColor(At.Slider,"secondaryTrack",private_safeDarken(At.secondary.main,.5)),setColor(At.Slider,"errorTrack",private_safeDarken(At.error.main,.5)),setColor(At.Slider,"infoTrack",private_safeDarken(At.info.main,.5)),setColor(At.Slider,"successTrack",private_safeDarken(At.success.main,.5)),setColor(At.Slider,"warningTrack",private_safeDarken(At.warning.main,.5));const zt=private_safeEmphasize(At.background.default,.98);setColor(At.SnackbarContent,"bg",zt),setColor(At.SnackbarContent,"color",silent(()=>At.getContrastText(zt))),setColor(At.SpeedDialAction,"fabHoverBg",private_safeEmphasize(At.background.paper,.15)),setColor(At.StepConnector,"border",Ft("palette-grey-600")),setColor(At.StepContent,"border",Ft("palette-grey-600")),setColor(At.Switch,"defaultColor",Ft("palette-grey-300")),setColor(At.Switch,"defaultDisabledColor",Ft("palette-grey-600")),setColor(At.Switch,"primaryDisabledColor",private_safeDarken(At.primary.main,.55)),setColor(At.Switch,"secondaryDisabledColor",private_safeDarken(At.secondary.main,.55)),setColor(At.Switch,"errorDisabledColor",private_safeDarken(At.error.main,.55)),setColor(At.Switch,"infoDisabledColor",private_safeDarken(At.info.main,.55)),setColor(At.Switch,"successDisabledColor",private_safeDarken(At.success.main,.55)),setColor(At.Switch,"warningDisabledColor",private_safeDarken(At.warning.main,.55)),setColor(At.TableCell,"border",private_safeDarken(private_safeAlpha(At.divider,1),.68)),setColor(At.Tooltip,"bg",private_safeAlpha(At.grey[700],.92))}setColorChannel(At.background,"default"),setColorChannel(At.background,"paper"),setColorChannel(At.common,"background"),setColorChannel(At.common,"onBackground"),setColorChannel(At,"divider"),Object.keys(At).forEach(zt=>{const Ut=At[zt];zt!=="tonalOffset"&&Ut&&typeof Ut=="object"&&(Ut.main&&setColor(At[zt],"mainChannel",private_safeColorChannel(toRgb(Ut.main))),Ut.light&&setColor(At[zt],"lightChannel",private_safeColorChannel(toRgb(Ut.light))),Ut.dark&&setColor(At[zt],"darkChannel",private_safeColorChannel(toRgb(Ut.dark))),Ut.contrastText&&setColor(At[zt],"contrastTextChannel",private_safeColorChannel(toRgb(Ut.contrastText))),zt==="text"&&(setColorChannel(At[zt],"primary"),setColorChannel(At[zt],"secondary")),zt==="action"&&(Ut.active&&setColorChannel(At[zt],"active"),Ut.selected&&setColorChannel(At[zt],"selected")))})}),Mt=u.reduce((Et,At)=>deepmerge(Et,At),Mt);const Bt={prefix:Le,disableCssColorScheme:pe,shouldSkipGeneratingVar:Ye,getSelector:defaultGetSelector(Mt)},{vars:Dt,generateThemeVars:$t,generateStyleSheets:kt}=prepareCssVars(Mt,Bt);return Mt.vars=Dt,Object.entries(Mt.colorSchemes[Mt.defaultColorScheme]).forEach(([Et,At])=>{Mt[Et]=At}),Mt.generateThemeVars=$t,Mt.generateStyleSheets=kt,Mt.generateSpacing=function(){return createSpacing(ht.spacing,createUnarySpacing(this))},Mt.getColorSchemeSelector=createGetColorSchemeSelector(tt),Mt.spacing=Mt.generateSpacing(),Mt.shouldSkipGeneratingVar=Ye,Mt.unstable_sxConfig={...defaultSxConfig,...ht==null?void 0:ht.unstable_sxConfig},Mt.unstable_sx=function(At){return styleFunctionSx({sx:At,theme:this})},Mt.toRuntimeSource=stringifyTheme,Mt}function attachColorScheme(me,u,t){me.colorSchemes&&t&&(me.colorSchemes[u]={...t!==!0&&t,palette:createPalette({...t===!0?{}:t.palette,mode:u})})}function createTheme(me={},...u){const{palette:t,cssVariables:de=!1,colorSchemes:pe=t?void 0:{light:!0},defaultColorScheme:Le=t==null?void 0:t.mode,...Ye}=me,tt=Le||"light",st=pe==null?void 0:pe[tt],ht={...pe,...t?{[tt]:{...typeof st!="boolean"&&st,palette:t}}:void 0};if(de===!1){if(!("colorSchemes"in me))return createThemeNoVars(me,...u);let mt=t;"palette"in me||ht[tt]&&(ht[tt]!==!0?mt=ht[tt].palette:tt==="dark"&&(mt={mode:"dark"}));const gt=createThemeNoVars({...me,palette:mt},...u);return gt.defaultColorScheme=tt,gt.colorSchemes=ht,gt.palette.mode==="light"&&(gt.colorSchemes.light={...ht.light!==!0&&ht.light,palette:gt.palette},attachColorScheme(gt,"dark",ht.dark)),gt.palette.mode==="dark"&&(gt.colorSchemes.dark={...ht.dark!==!0&&ht.dark,palette:gt.palette},attachColorScheme(gt,"light",ht.light)),gt}return!t&&!("light"in ht)&&tt==="light"&&(ht.light=!0),createThemeWithVars({...Ye,colorSchemes:ht,defaultColorScheme:tt,...typeof de!="boolean"&&de},...u)}const defaultTheme=createTheme();function useTheme(){const me=useTheme$1(defaultTheme);return me[THEME_ID]||me}function slotShouldForwardProp(me){return me!=="ownerState"&&me!=="theme"&&me!=="sx"&&me!=="as"}const rootShouldForwardProp=me=>slotShouldForwardProp(me)&&me!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme,rootShouldForwardProp});function GlobalStyles(me){return jsxRuntimeExports.jsx(GlobalStyles$1,{...me,defaultTheme,themeId:THEME_ID})}function globalCss(me){return function(t){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof me=="function"?de=>me({theme:de,...t}):me})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(me){return useDefaultProps$1(me)}function getSvgIconUtilityClass(me){return generateUtilityClass("MuiSvgIcon",me)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$j=me=>{const{color:u,fontSize:t,classes:de}=me,pe={root:["root",u!=="inherit"&&`color${capitalize(u)}`,`fontSize${capitalize(t)}`]};return composeClasses(pe,getSvgIconUtilityClass,de)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,t.color!=="inherit"&&u[`color${capitalize(t.color)}`],u[`fontSize${capitalize(t.fontSize)}`]]}})(memoTheme(({theme:me})=>{var u,t,de,pe,Le,Ye,tt,st,ht,mt,gt,bt,_t,vt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(pe=(u=me.transitions)==null?void 0:u.create)==null?void 0:pe.call(u,"fill",{duration:(de=(t=(me.vars??me).transitions)==null?void 0:t.duration)==null?void 0:de.shorter}),variants:[{props:Tt=>!Tt.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((Ye=(Le=me.typography)==null?void 0:Le.pxToRem)==null?void 0:Ye.call(Le,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((st=(tt=me.typography)==null?void 0:tt.pxToRem)==null?void 0:st.call(tt,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((mt=(ht=me.typography)==null?void 0:ht.pxToRem)==null?void 0:mt.call(ht,35))||"2.1875rem"}},...Object.entries((me.vars??me).palette).filter(([,Tt])=>Tt&&Tt.main).map(([Tt])=>{var St,Rt;return{props:{color:Tt},style:{color:(Rt=(St=(me.vars??me).palette)==null?void 0:St[Tt])==null?void 0:Rt.main}}}),{props:{color:"action"},style:{color:(bt=(gt=(me.vars??me).palette)==null?void 0:gt.action)==null?void 0:bt.active}},{props:{color:"disabled"},style:{color:(vt=(_t=(me.vars??me).palette)==null?void 0:_t.action)==null?void 0:vt.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SvgIcon=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiSvgIcon"}),{children:pe,className:Le,color:Ye="inherit",component:tt="svg",fontSize:st="medium",htmlColor:ht,inheritViewBox:mt=!1,titleAccess:gt,viewBox:bt="0 0 24 24",..._t}=de,vt=reactExports.isValidElement(pe)&&pe.type==="svg",Tt={...de,color:Ye,component:tt,fontSize:st,instanceFontSize:u.fontSize,inheritViewBox:mt,viewBox:bt,hasSvgAsChild:vt},St={};mt||(St.viewBox=bt);const Rt=useUtilityClasses$j(Tt);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:tt,className:clsx(Rt.root,Le),focusable:"false",color:ht,"aria-hidden":gt?void 0:!0,role:gt?"img":void 0,ref:t,...St,..._t,...vt&&pe.props,ownerState:Tt,children:[vt?pe.props.children:pe,gt?jsxRuntimeExports.jsx("title",{children:gt}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(me,u){function t(de,pe){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":`${u}Icon`,ref:pe,...de,children:me})}return t.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(t))}function mergeSlotProps(me,u){if(!me)return u;if(typeof me=="function"||typeof u=="function")return pe=>{const Le=typeof u=="function"?u(pe):u,Ye=typeof me=="function"?me({...pe,...Le}):me,tt=clsx(pe==null?void 0:pe.className,Le==null?void 0:Le.className,Ye==null?void 0:Ye.className);return{...Le,...Ye,...!!tt&&{className:tt},...(Le==null?void 0:Le.style)&&(Ye==null?void 0:Ye.style)&&{style:{...Le.style,...Ye.style}},...(Le==null?void 0:Le.sx)&&(Ye==null?void 0:Ye.sx)&&{sx:[...Array.isArray(Le.sx)?Le.sx:[Le.sx],...Array.isArray(Ye.sx)?Ye.sx:[Ye.sx]]}}};const t=u,de=clsx(t==null?void 0:t.className,me==null?void 0:me.className);return{...u,...me,...!!de&&{className:de},...(t==null?void 0:t.style)&&(me==null?void 0:me.style)&&{style:{...t.style,...me.style}},...(t==null?void 0:t.sx)&&(me==null?void 0:me.sx)&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(me.sx)?me.sx:[me.sx]]}}}function _objectWithoutPropertiesLoose$1(me,u){if(me==null)return{};var t={};for(var de in me)if({}.hasOwnProperty.call(me,de)){if(u.indexOf(de)!==-1)continue;t[de]=me[de]}return t}function _setPrototypeOf(me,u){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,de){return t.__proto__=de,t},_setPrototypeOf(me,u)}function _inheritsLoose(me,u){me.prototype=Object.create(u.prototype),me.prototype.constructor=me,_setPrototypeOf(me,u)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(u){return u.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(me){_inheritsLoose(u,me);function u(de,pe){var Le;Le=me.call(this,de,pe)||this;var Ye=pe,tt=Ye&&!Ye.isMounting?de.enter:de.appear,st;return Le.appearStatus=null,de.in?tt?(st=EXITED,Le.appearStatus=ENTERING):st=ENTERED:de.unmountOnExit||de.mountOnEnter?st=UNMOUNTED:st=EXITED,Le.state={status:st},Le.nextCallback=null,Le}u.getDerivedStateFromProps=function(pe,Le){var Ye=pe.in;return Ye&&Le.status===UNMOUNTED?{status:EXITED}:null};var t=u.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(pe){var Le=null;if(pe!==this.props){var Ye=this.state.status;this.props.in?Ye!==ENTERING&&Ye!==ENTERED&&(Le=ENTERING):(Ye===ENTERING||Ye===ENTERED)&&(Le=EXITING)}this.updateStatus(!1,Le)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var pe=this.props.timeout,Le,Ye,tt;return Le=Ye=tt=pe,pe!=null&&typeof pe!="number"&&(Le=pe.exit,Ye=pe.enter,tt=pe.appear!==void 0?pe.appear:Ye),{exit:Le,enter:Ye,appear:tt}},t.updateStatus=function(pe,Le){if(pe===void 0&&(pe=!1),Le!==null)if(this.cancelNextCallback(),Le===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var Ye=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);Ye&&forceReflow(Ye)}this.performEnter(pe)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},t.performEnter=function(pe){var Le=this,Ye=this.props.enter,tt=this.context?this.context.isMounting:pe,st=this.props.nodeRef?[tt]:[ReactDOM.findDOMNode(this),tt],ht=st[0],mt=st[1],gt=this.getTimeouts(),bt=tt?gt.appear:gt.enter;if(!pe&&!Ye||config.disabled){this.safeSetState({status:ENTERED},function(){Le.props.onEntered(ht)});return}this.props.onEnter(ht,mt),this.safeSetState({status:ENTERING},function(){Le.props.onEntering(ht,mt),Le.onTransitionEnd(bt,function(){Le.safeSetState({status:ENTERED},function(){Le.props.onEntered(ht,mt)})})})},t.performExit=function(){var pe=this,Le=this.props.exit,Ye=this.getTimeouts(),tt=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!Le||config.disabled){this.safeSetState({status:EXITED},function(){pe.props.onExited(tt)});return}this.props.onExit(tt),this.safeSetState({status:EXITING},function(){pe.props.onExiting(tt),pe.onTransitionEnd(Ye.exit,function(){pe.safeSetState({status:EXITED},function(){pe.props.onExited(tt)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(pe,Le){Le=this.setNextCallback(Le),this.setState(pe,Le)},t.setNextCallback=function(pe){var Le=this,Ye=!0;return this.nextCallback=function(tt){Ye&&(Ye=!1,Le.nextCallback=null,pe(tt))},this.nextCallback.cancel=function(){Ye=!1},this.nextCallback},t.onTransitionEnd=function(pe,Le){this.setNextCallback(Le);var Ye=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),tt=pe==null&&!this.props.addEndListener;if(!Ye||tt){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var st=this.props.nodeRef?[this.nextCallback]:[Ye,this.nextCallback],ht=st[0],mt=st[1];this.props.addEndListener(ht,mt)}pe!=null&&setTimeout(this.nextCallback,pe)},t.render=function(){var pe=this.state.status;if(pe===UNMOUNTED)return null;var Le=this.props,Ye=Le.children;Le.in,Le.mountOnEnter,Le.unmountOnExit,Le.appear,Le.enter,Le.exit,Le.timeout,Le.addEndListener,Le.onEnter,Le.onEntering,Le.onEntered,Le.onExit,Le.onExiting,Le.onExited,Le.nodeRef;var tt=_objectWithoutPropertiesLoose$1(Le,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof Ye=="function"?Ye(pe,tt):React.cloneElement(React.Children.only(Ye),tt))},u}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function getChildMapping(me,u){var t=function(Le){return u&&reactExports.isValidElement(Le)?u(Le):Le},de=Object.create(null);return me&&reactExports.Children.map(me,function(pe){return pe}).forEach(function(pe){de[pe.key]=t(pe)}),de}function mergeChildMappings(me,u){me=me||{},u=u||{};function t(mt){return mt in u?u[mt]:me[mt]}var de=Object.create(null),pe=[];for(var Le in me)Le in u?pe.length&&(de[Le]=pe,pe=[]):pe.push(Le);var Ye,tt={};for(var st in u){if(de[st])for(Ye=0;Ye<de[st].length;Ye++){var ht=de[st][Ye];tt[de[st][Ye]]=t(ht)}tt[st]=t(st)}for(Ye=0;Ye<pe.length;Ye++)tt[pe[Ye]]=t(pe[Ye]);return tt}function getProp(me,u,t){return t[u]!=null?t[u]:me.props[u]}function getInitialChildMapping(me,u){return getChildMapping(me.children,function(t){return reactExports.cloneElement(t,{onExited:u.bind(null,t),in:!0,appear:getProp(t,"appear",me),enter:getProp(t,"enter",me),exit:getProp(t,"exit",me)})})}function getNextChildMapping(me,u,t){var de=getChildMapping(me.children),pe=mergeChildMappings(u,de);return Object.keys(pe).forEach(function(Le){var Ye=pe[Le];if(reactExports.isValidElement(Ye)){var tt=Le in u,st=Le in de,ht=u[Le],mt=reactExports.isValidElement(ht)&&!ht.props.in;st&&(!tt||mt)?pe[Le]=reactExports.cloneElement(Ye,{onExited:t.bind(null,Ye),in:!0,exit:getProp(Ye,"exit",me),enter:getProp(Ye,"enter",me)}):!st&&tt&&!mt?pe[Le]=reactExports.cloneElement(Ye,{in:!1}):st&&tt&&reactExports.isValidElement(ht)&&(pe[Le]=reactExports.cloneElement(Ye,{onExited:t.bind(null,Ye),in:ht.props.in,exit:getProp(Ye,"exit",me),enter:getProp(Ye,"enter",me)}))}}),pe}var values=Object.values||function(me){return Object.keys(me).map(function(u){return me[u]})},defaultProps={component:"div",childFactory:function(u){return u}},TransitionGroup=function(me){_inheritsLoose(u,me);function u(de,pe){var Le;Le=me.call(this,de,pe)||this;var Ye=Le.handleExited.bind(_assertThisInitialized(Le));return Le.state={contextValue:{isMounting:!0},handleExited:Ye,firstRender:!0},Le}var t=u.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},u.getDerivedStateFromProps=function(pe,Le){var Ye=Le.children,tt=Le.handleExited,st=Le.firstRender;return{children:st?getInitialChildMapping(pe,tt):getNextChildMapping(pe,Ye,tt),firstRender:!1}},t.handleExited=function(pe,Le){var Ye=getChildMapping(this.props.children);pe.key in Ye||(pe.props.onExited&&pe.props.onExited(Le),this.mounted&&this.setState(function(tt){var st=_extends$1({},tt.children);return delete st[pe.key],{children:st}}))},t.render=function(){var pe=this.props,Le=pe.component,Ye=pe.childFactory,tt=_objectWithoutPropertiesLoose$1(pe,["component","childFactory"]),st=this.state.contextValue,ht=values(this.state.children).map(Ye);return delete tt.appear,delete tt.enter,delete tt.exit,Le===null?React.createElement(TransitionGroupContext.Provider,{value:st},ht):React.createElement(TransitionGroupContext.Provider,{value:st},React.createElement(Le,tt,ht))},u}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const reflow=me=>me.scrollTop;function getTransitionProps(me,u){const{timeout:t,easing:de,style:pe={}}=me;return{duration:pe.transitionDuration??(typeof t=="number"?t:t[u.mode]||0),easing:pe.transitionTimingFunction??(typeof de=="object"?de[u.mode]:de),delay:pe.transitionDelay}}function getPaperUtilityClass(me){return generateUtilityClass("MuiPaper",me)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$i=me=>{const{square:u,elevation:t,variant:de,classes:pe}=me,Le={root:["root",de,!u&&"rounded",de==="elevation"&&`elevation${t}`]};return composeClasses(Le,getPaperUtilityClass,pe)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,u[t.variant],!t.square&&u.rounded,t.variant==="elevation"&&u[`elevation${t.elevation}`]]}})(memoTheme(({theme:me})=>({backgroundColor:(me.vars||me).palette.background.paper,color:(me.vars||me).palette.text.primary,transition:me.transitions.create("box-shadow"),variants:[{props:({ownerState:u})=>!u.square,style:{borderRadius:me.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(me.vars||me).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(u,t){var _t;const de=useDefaultProps({props:u,name:"MuiPaper"}),pe=useTheme(),{className:Le,component:Ye="div",elevation:tt=1,square:st=!1,variant:ht="elevation",...mt}=de,gt={...de,component:Ye,elevation:tt,square:st,variant:ht},bt=useUtilityClasses$i(gt);return jsxRuntimeExports.jsx(PaperRoot,{as:Ye,ownerState:gt,className:clsx(bt.root,Le),ref:t,...mt,style:{...ht==="elevation"&&{"--Paper-shadow":(pe.vars||pe).shadows[tt],...pe.vars&&{"--Paper-overlay":(_t=pe.vars.overlays)==null?void 0:_t[tt]},...!pe.vars&&pe.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha("#fff",getOverlayAlpha(tt))}, ${alpha("#fff",getOverlayAlpha(tt))})`}},...mt.style}})});function useSlot(me,u){const{className:t,elementType:de,ownerState:pe,externalForwardedProps:Le,internalForwardedProps:Ye,shouldForwardComponentProp:tt=!1,...st}=u,{component:ht,slots:mt={[me]:void 0},slotProps:gt={[me]:void 0},...bt}=Le,_t=mt[me]||de,vt=resolveComponentProps(gt[me],pe),{props:{component:Tt,...St},internalRef:Rt}=mergeSlotProps$1({className:t,...st,externalForwardedProps:me==="root"?bt:void 0,externalSlotProps:vt}),Pt=useForkRef(Rt,vt==null?void 0:vt.ref,u.ref),Ot=me==="root"?Tt||ht:Tt,Mt=appendOwnerState(_t,{...me==="root"&&!ht&&!mt[me]&&Ye,...me!=="root"&&!mt[me]&&Ye,...St,...Ot&&!tt&&{as:Ot},...Ot&&tt&&{component:Ot},ref:Pt},pe);return[_t,Mt]}class LazyRipple{constructor(){wt(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LazyRipple}static use(){const u=useLazyRef(LazyRipple.create).current,[t,de]=reactExports.useState(!1);return u.shouldMount=t,u.setShouldMount=de,reactExports.useEffect(u.mountEffect,[t]),u}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...u)})}stop(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...u)})}pulsate(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...u)})}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let me,u;const t=new Promise((de,pe)=>{me=de,u=pe});return t.resolve=me,t.reject=u,t}function Ripple(me){const{className:u,classes:t,pulsate:de=!1,rippleX:pe,rippleY:Le,rippleSize:Ye,in:tt,onExited:st,timeout:ht}=me,[mt,gt]=reactExports.useState(!1),bt=clsx(u,t.ripple,t.rippleVisible,de&&t.ripplePulsate),_t={width:Ye,height:Ye,top:-(Ye/2)+Le,left:-(Ye/2)+pe},vt=clsx(t.child,mt&&t.childLeaving,de&&t.childPulsate);return!tt&&!mt&&gt(!0),reactExports.useEffect(()=>{if(!tt&&st!=null){const Tt=setTimeout(st,ht);return()=>{clearTimeout(Tt)}}},[st,tt,ht]),jsxRuntimeExports.jsx("span",{className:bt,style:_t,children:jsxRuntimeExports.jsx("span",{className:vt})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:me})=>me.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:me})=>me.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:me})=>me.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:me})=>me.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiTouchRipple"}),{center:pe=!1,classes:Le={},className:Ye,...tt}=de,[st,ht]=reactExports.useState([]),mt=reactExports.useRef(0),gt=reactExports.useRef(null);reactExports.useEffect(()=>{gt.current&&(gt.current(),gt.current=null)},[st]);const bt=reactExports.useRef(!1),_t=useTimeout(),vt=reactExports.useRef(null),Tt=reactExports.useRef(null),St=reactExports.useCallback(Mt=>{const{pulsate:Bt,rippleX:Dt,rippleY:$t,rippleSize:kt,cb:Et}=Mt;ht(At=>[...At,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(Le.ripple,touchRippleClasses.ripple),rippleVisible:clsx(Le.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(Le.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(Le.child,touchRippleClasses.child),childLeaving:clsx(Le.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(Le.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:Bt,rippleX:Dt,rippleY:$t,rippleSize:kt},mt.current)]),mt.current+=1,gt.current=Et},[Le]),Rt=reactExports.useCallback((Mt={},Bt={},Dt=()=>{})=>{const{pulsate:$t=!1,center:kt=pe||Bt.pulsate,fakeElement:Et=!1}=Bt;if((Mt==null?void 0:Mt.type)==="mousedown"&&bt.current){bt.current=!1;return}(Mt==null?void 0:Mt.type)==="touchstart"&&(bt.current=!0);const At=Et?null:Tt.current,Ft=At?At.getBoundingClientRect():{width:0,height:0,left:0,top:0};let zt,Ut,qt;if(kt||Mt===void 0||Mt.clientX===0&&Mt.clientY===0||!Mt.clientX&&!Mt.touches)zt=Math.round(Ft.width/2),Ut=Math.round(Ft.height/2);else{const{clientX:Gt,clientY:Nt}=Mt.touches&&Mt.touches.length>0?Mt.touches[0]:Mt;zt=Math.round(Gt-Ft.left),Ut=Math.round(Nt-Ft.top)}if(kt)qt=Math.sqrt((2*Ft.width**2+Ft.height**2)/3),qt%2===0&&(qt+=1);else{const Gt=Math.max(Math.abs((At?At.clientWidth:0)-zt),zt)*2+2,Nt=Math.max(Math.abs((At?At.clientHeight:0)-Ut),Ut)*2+2;qt=Math.sqrt(Gt**2+Nt**2)}Mt!=null&&Mt.touches?vt.current===null&&(vt.current=()=>{St({pulsate:$t,rippleX:zt,rippleY:Ut,rippleSize:qt,cb:Dt})},_t.start(DELAY_RIPPLE,()=>{vt.current&&(vt.current(),vt.current=null)})):St({pulsate:$t,rippleX:zt,rippleY:Ut,rippleSize:qt,cb:Dt})},[pe,St,_t]),Pt=reactExports.useCallback(()=>{Rt({},{pulsate:!0})},[Rt]),Ot=reactExports.useCallback((Mt,Bt)=>{if(_t.clear(),(Mt==null?void 0:Mt.type)==="touchend"&&vt.current){vt.current(),vt.current=null,_t.start(0,()=>{Ot(Mt,Bt)});return}vt.current=null,ht(Dt=>Dt.length>0?Dt.slice(1):Dt),gt.current=Bt},[_t]);return reactExports.useImperativeHandle(t,()=>({pulsate:Pt,start:Rt,stop:Ot}),[Pt,Rt,Ot]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,Le.root,Ye),ref:Tt,...tt,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:st})})});function getButtonBaseUtilityClass(me){return generateUtilityClass("MuiButtonBase",me)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$h=me=>{const{disabled:u,focusVisible:t,focusVisibleClassName:de,classes:pe}=me,Ye=composeClasses({root:["root",u&&"disabled",t&&"focusVisible"]},getButtonBaseUtilityClass,pe);return t&&de&&(Ye.root+=` ${de}`),Ye},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(me,u)=>u.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiButtonBase"}),{action:pe,centerRipple:Le=!1,children:Ye,className:tt,component:st="button",disabled:ht=!1,disableRipple:mt=!1,disableTouchRipple:gt=!1,focusRipple:bt=!1,focusVisibleClassName:_t,LinkComponent:vt="a",onBlur:Tt,onClick:St,onContextMenu:Rt,onDragLeave:Pt,onFocus:Ot,onFocusVisible:Mt,onKeyDown:Bt,onKeyUp:Dt,onMouseDown:$t,onMouseLeave:kt,onMouseUp:Et,onTouchEnd:At,onTouchMove:Ft,onTouchStart:zt,tabIndex:Ut=0,TouchRippleProps:qt,touchRippleRef:Gt,type:Nt,...jt}=de,Qt=reactExports.useRef(null),Kt=useLazyRipple(),Vt=useForkRef(Kt.ref,Gt),[en,cn]=reactExports.useState(!1);ht&&en&&cn(!1),reactExports.useImperativeHandle(pe,()=>({focusVisible:()=>{cn(!0),Qt.current.focus()}}),[]);const nn=Kt.shouldMount&&!mt&&!ht;reactExports.useEffect(()=>{en&&bt&&!mt&&Kt.pulsate()},[mt,bt,en,Kt]);const sn=useRippleHandler(Kt,"start",$t,gt),un=useRippleHandler(Kt,"stop",Rt,gt),dn=useRippleHandler(Kt,"stop",Pt,gt),Rn=useRippleHandler(Kt,"stop",Et,gt),_n=useRippleHandler(Kt,"stop",pn=>{en&&pn.preventDefault(),kt&&kt(pn)},gt),In=useRippleHandler(Kt,"start",zt,gt),yn=useRippleHandler(Kt,"stop",At,gt),vn=useRippleHandler(Kt,"stop",Ft,gt),wn=useRippleHandler(Kt,"stop",pn=>{isFocusVisible(pn.target)||cn(!1),Tt&&Tt(pn)},!1),Jn=useEventCallback(pn=>{Qt.current||(Qt.current=pn.currentTarget),isFocusVisible(pn.target)&&(cn(!0),Mt&&Mt(pn)),Ot&&Ot(pn)}),Sn=()=>{const pn=Qt.current;return st&&st!=="button"&&!(pn.tagName==="A"&&pn.href)},Hn=useEventCallback(pn=>{bt&&!pn.repeat&&en&&pn.key===" "&&Kt.stop(pn,()=>{Kt.start(pn)}),pn.target===pn.currentTarget&&Sn()&&pn.key===" "&&pn.preventDefault(),Bt&&Bt(pn),pn.target===pn.currentTarget&&Sn()&&pn.key==="Enter"&&!ht&&(pn.preventDefault(),St&&St(pn))}),ki=useEventCallback(pn=>{bt&&pn.key===" "&&en&&!pn.defaultPrevented&&Kt.stop(pn,()=>{Kt.pulsate(pn)}),Dt&&Dt(pn),St&&pn.target===pn.currentTarget&&Sn()&&pn.key===" "&&!pn.defaultPrevented&&St(pn)});let Wn=st;Wn==="button"&&(jt.href||jt.to)&&(Wn=vt);const ri={};Wn==="button"?(ri.type=Nt===void 0?"button":Nt,ri.disabled=ht):(!jt.href&&!jt.to&&(ri.role="button"),ht&&(ri["aria-disabled"]=ht));const ji=useForkRef(t,Qt),gi={...de,centerRipple:Le,component:st,disabled:ht,disableRipple:mt,disableTouchRipple:gt,focusRipple:bt,tabIndex:Ut,focusVisible:en},Gn=useUtilityClasses$h(gi);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:Wn,className:clsx(Gn.root,tt),ownerState:gi,onBlur:wn,onClick:St,onContextMenu:un,onFocus:Jn,onKeyDown:Hn,onKeyUp:ki,onMouseDown:sn,onMouseLeave:_n,onMouseUp:Rn,onDragLeave:dn,onTouchEnd:yn,onTouchMove:vn,onTouchStart:In,ref:ji,tabIndex:ht?-1:Ut,type:Nt,...ri,...jt,children:[Ye,nn?jsxRuntimeExports.jsx(TouchRipple,{ref:Vt,center:Le,...qt}):null]})});function useRippleHandler(me,u,t,de=!1){return useEventCallback(pe=>(t&&t(pe),de||me[u](pe),!0))}function hasCorrectMainProperty(me){return typeof me.main=="string"}function checkSimplePaletteColorValues(me,u=[]){if(!hasCorrectMainProperty(me))return!1;for(const t of u)if(!me.hasOwnProperty(t)||typeof me[t]!="string")return!1;return!0}function createSimplePaletteValueFilter(me=[]){return([,u])=>u&&checkSimplePaletteColorValues(u,me)}function getTypographyUtilityClass(me){return generateUtilityClass("MuiTypography",me)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$g=me=>{const{align:u,gutterBottom:t,noWrap:de,paragraph:pe,variant:Le,classes:Ye}=me,tt={root:["root",Le,me.align!=="inherit"&&`align${capitalize(u)}`,t&&"gutterBottom",de&&"noWrap",pe&&"paragraph"]};return composeClasses(tt,getTypographyUtilityClass,Ye)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,t.variant&&u[t.variant],t.align!=="inherit"&&u[`align${capitalize(t.align)}`],t.noWrap&&u.noWrap,t.gutterBottom&&u.gutterBottom,t.paragraph&&u.paragraph]}})(memoTheme(({theme:me})=>{var u;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(me.typography).filter(([t,de])=>t!=="inherit"&&de&&typeof de=="object").map(([t,de])=>({props:{variant:t},style:de})),...Object.entries(me.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{color:(me.vars||me).palette[t].main}})),...Object.entries(((u=me.palette)==null?void 0:u.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${capitalize(t)}`},style:{color:(me.vars||me).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(u,t){const{color:de,...pe}=useDefaultProps({props:u,name:"MuiTypography"}),Le=!v6Colors[de],Ye=extendSxProp({...pe,...Le&&{color:de}}),{align:tt="inherit",className:st,component:ht,gutterBottom:mt=!1,noWrap:gt=!1,paragraph:bt=!1,variant:_t="body1",variantMapping:vt=defaultVariantMapping,...Tt}=Ye,St={...Ye,align:tt,color:de,className:st,component:ht,gutterBottom:mt,noWrap:gt,paragraph:bt,variant:_t,variantMapping:vt},Rt=ht||(bt?"p":vt[_t]||defaultVariantMapping[_t])||"span",Pt=useUtilityClasses$g(St);return jsxRuntimeExports.jsx(TypographyRoot,{as:Rt,ref:t,className:clsx(Pt.root,st),...Tt,ownerState:St,style:{...tt!=="inherit"&&{"--Typography-textAlign":tt},...Tt.style}})});function getAppBarUtilityClass(me){return generateUtilityClass("MuiAppBar",me)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$f=me=>{const{color:u,position:t,classes:de}=me,pe={root:["root",`color${capitalize(u)}`,`position${capitalize(t)}`]};return composeClasses(pe,getAppBarUtilityClass,de)},joinVars=(me,u)=>me?`${me==null?void 0:me.replace(")","")}, ${u})`:u,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,u[`position${capitalize(t.position)}`],u[`color${capitalize(t.color)}`]]}})(memoTheme(({theme:me})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(me.vars||me).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(me.vars||me).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(me.vars||me).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":me.vars?me.vars.palette.AppBar.defaultBg:me.palette.grey[100],"--AppBar-color":me.vars?me.vars.palette.text.primary:me.palette.getContrastText(me.palette.grey[100]),...me.applyStyles("dark",{"--AppBar-background":me.vars?me.vars.palette.AppBar.defaultBg:me.palette.grey[900],"--AppBar-color":me.vars?me.vars.palette.text.primary:me.palette.getContrastText(me.palette.grey[900])})}},...Object.entries(me.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([u])=>({props:{color:u},style:{"--AppBar-background":(me.vars??me).palette[u].main,"--AppBar-color":(me.vars??me).palette[u].contrastText}})),{props:u=>u.enableColorOnDark===!0&&!["inherit","transparent"].includes(u.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:u=>u.enableColorOnDark===!1&&!["inherit","transparent"].includes(u.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...me.applyStyles("dark",{backgroundColor:me.vars?joinVars(me.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:me.vars?joinVars(me.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...me.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiAppBar"}),{className:pe,color:Le="primary",enableColorOnDark:Ye=!1,position:tt="fixed",...st}=de,ht={...de,color:Le,position:tt,enableColorOnDark:Ye},mt=useUtilityClasses$f(ht);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:ht,elevation:4,className:clsx(mt.root,pe,tt==="fixed"&&"mui-fixed"),ref:t,...st})});function getContainer$1(me){return typeof me=="function"?me():me}const Portal=reactExports.forwardRef(function(u,t){const{children:de,container:pe,disablePortal:Le=!1}=u,[Ye,tt]=reactExports.useState(null),st=useForkRef(reactExports.isValidElement(de)?getReactElementRef(de):null,t);if(useEnhancedEffect(()=>{Le||tt(getContainer$1(pe)||document.body)},[pe,Le]),useEnhancedEffect(()=>{if(Ye&&!Le)return setRef(t,Ye),()=>{setRef(t,null)}},[t,Ye,Le]),Le){if(reactExports.isValidElement(de)){const ht={ref:st};return reactExports.cloneElement(de,ht)}return de}return Ye&&reactDomExports.createPortal(de,Ye)});function getStyleValue(me){return parseInt(me,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(me){for(const u in me)return!1;return!0}function isEmpty$4(me){return isObjectEmpty(me)||me.outerHeightStyle===0&&!me.overflowing}const TextareaAutosize=reactExports.forwardRef(function(u,t){const{onChange:de,maxRows:pe,minRows:Le=1,style:Ye,value:tt,...st}=u,{current:ht}=reactExports.useRef(tt!=null),mt=reactExports.useRef(null),gt=useForkRef(t,mt),bt=reactExports.useRef(null),_t=reactExports.useRef(null),vt=reactExports.useCallback(()=>{const Ot=mt.current,Mt=_t.current;if(!Ot||!Mt)return;const Dt=ownerWindow(Ot).getComputedStyle(Ot);if(Dt.width==="0px")return{outerHeightStyle:0,overflowing:!1};Mt.style.width=Dt.width,Mt.value=Ot.value||u.placeholder||"x",Mt.value.slice(-1)===`
`&&(Mt.value+=" ");const $t=Dt.boxSizing,kt=getStyleValue(Dt.paddingBottom)+getStyleValue(Dt.paddingTop),Et=getStyleValue(Dt.borderBottomWidth)+getStyleValue(Dt.borderTopWidth),At=Mt.scrollHeight;Mt.value="x";const Ft=Mt.scrollHeight;let zt=At;Le&&(zt=Math.max(Number(Le)*Ft,zt)),pe&&(zt=Math.min(Number(pe)*Ft,zt)),zt=Math.max(zt,Ft);const Ut=zt+($t==="border-box"?kt+Et:0),qt=Math.abs(zt-At)<=1;return{outerHeightStyle:Ut,overflowing:qt}},[pe,Le,u.placeholder]),Tt=useEventCallback(()=>{const Ot=mt.current,Mt=vt();if(!Ot||!Mt||isEmpty$4(Mt))return!1;const Bt=Mt.outerHeightStyle;return bt.current!=null&&bt.current!==Bt}),St=reactExports.useCallback(()=>{const Ot=mt.current,Mt=vt();if(!Ot||!Mt||isEmpty$4(Mt))return;const Bt=Mt.outerHeightStyle;bt.current!==Bt&&(bt.current=Bt,Ot.style.height=`${Bt}px`),Ot.style.overflow=Mt.overflowing?"hidden":""},[vt]),Rt=reactExports.useRef(-1);useEnhancedEffect(()=>{const Ot=debounce$1(St),Mt=mt==null?void 0:mt.current;if(!Mt)return;const Bt=ownerWindow(Mt);Bt.addEventListener("resize",Ot);let Dt;return typeof ResizeObserver<"u"&&(Dt=new ResizeObserver(()=>{Tt()&&(Dt.unobserve(Mt),cancelAnimationFrame(Rt.current),St(),Rt.current=requestAnimationFrame(()=>{Dt.observe(Mt)}))}),Dt.observe(Mt)),()=>{Ot.clear(),cancelAnimationFrame(Rt.current),Bt.removeEventListener("resize",Ot),Dt&&Dt.disconnect()}},[vt,St,Tt]),useEnhancedEffect(()=>{St()});const Pt=Ot=>{ht||St(),de&&de(Ot)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:tt,onChange:Pt,ref:gt,rows:Le,style:Ye,...st}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:u.className,readOnly:!0,ref:_t,tabIndex:-1,style:{...styles$2.shadow,...Ye,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(me){return typeof me=="string"}function formControlState({props:me,states:u,muiFormControl:t}){return u.reduce((de,pe)=>(de[pe]=me[pe],t&&typeof me[pe]>"u"&&(de[pe]=t[pe]),de),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(me){return me!=null&&!(Array.isArray(me)&&me.length===0)}function isFilled(me,u=!1){return me&&(hasValue(me.value)&&me.value!==""||u&&hasValue(me.defaultValue)&&me.defaultValue!=="")}function isAdornedStart(me){return me.startAdornment}function getInputBaseUtilityClass(me){return generateUtilityClass("MuiInputBase",me)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(me,u)=>{const{ownerState:t}=me;return[u.root,t.formControl&&u.formControl,t.startAdornment&&u.adornedStart,t.endAdornment&&u.adornedEnd,t.error&&u.error,t.size==="small"&&u.sizeSmall,t.multiline&&u.multiline,t.color&&u[`color${capitalize(t.color)}`],t.fullWidth&&u.fullWidth,t.hiddenLabel&&u.hiddenLabel]},inputOverridesResolver=(me,u)=>{const{ownerState:t}=me;return[u.input,t.size==="small"&&u.inputSizeSmall,t.multiline&&u.inputMultiline,t.type==="search"&&u.inputTypeSearch,t.startAdornment&&u.inputAdornedStart,t.endAdornment&&u.inputAdornedEnd,t.hiddenLabel&&u.inputHiddenLabel]},useUtilityClasses$e=me=>{const{classes:u,color:t,disabled:de,error:pe,endAdornment:Le,focused:Ye,formControl:tt,fullWidth:st,hiddenLabel:ht,multiline:mt,readOnly:gt,size:bt,startAdornment:_t,type:vt}=me,Tt={root:["root",`color${capitalize(t)}`,de&&"disabled",pe&&"error",st&&"fullWidth",Ye&&"focused",tt&&"formControl",bt&&bt!=="medium"&&`size${capitalize(bt)}`,mt&&"multiline",_t&&"adornedStart",Le&&"adornedEnd",ht&&"hiddenLabel",gt&&"readOnly"],input:["input",de&&"disabled",vt==="search"&&"inputTypeSearch",mt&&"inputMultiline",bt==="small"&&"inputSizeSmall",ht&&"inputHiddenLabel",_t&&"inputAdornedStart",Le&&"inputAdornedEnd",gt&&"readOnly"]};return composeClasses(Tt,getInputBaseUtilityClass,u)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:me})=>({...me.typography.body1,color:(me.vars||me).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(me.vars||me).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:u})=>u.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:u,size:t})=>u.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:u})=>u.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:me})=>{const u=me.palette.mode==="light",t={color:"currentColor",...me.vars?{opacity:me.vars.opacity.inputPlaceholder}:{opacity:u?.42:.5},transition:me.transitions.create("opacity",{duration:me.transitions.duration.shorter})},de={opacity:"0 !important"},pe=me.vars?{opacity:me.vars.opacity.inputPlaceholder}:{opacity:u?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":de,"&::-moz-placeholder":de,"&::-ms-input-placeholder":de,"&:focus::-webkit-input-placeholder":pe,"&:focus::-moz-placeholder":pe,"&:focus::-ms-input-placeholder":pe},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(me.vars||me).palette.text.disabled},variants:[{props:({ownerState:Le})=>!Le.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:Le})=>Le.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase$1=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiInputBase"}),{"aria-describedby":pe,autoComplete:Le,autoFocus:Ye,className:tt,color:st,components:ht={},componentsProps:mt={},defaultValue:gt,disabled:bt,disableInjectingGlobalStyles:_t,endAdornment:vt,error:Tt,fullWidth:St=!1,id:Rt,inputComponent:Pt="input",inputProps:Ot={},inputRef:Mt,margin:Bt,maxRows:Dt,minRows:$t,multiline:kt=!1,name:Et,onBlur:At,onChange:Ft,onClick:zt,onFocus:Ut,onKeyDown:qt,onKeyUp:Gt,placeholder:Nt,readOnly:jt,renderSuffix:Qt,rows:Kt,size:Vt,slotProps:en={},slots:cn={},startAdornment:nn,type:sn="text",value:un,...dn}=de,Rn=Ot.value!=null?Ot.value:un,{current:_n}=reactExports.useRef(Rn!=null),In=reactExports.useRef(),yn=reactExports.useCallback(Un=>{},[]),vn=useForkRef(In,Mt,Ot.ref,yn),[wn,Jn]=reactExports.useState(!1),Sn=useFormControl(),Hn=formControlState({props:de,muiFormControl:Sn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Hn.focused=Sn?Sn.focused:wn,reactExports.useEffect(()=>{!Sn&&bt&&wn&&(Jn(!1),At&&At())},[Sn,bt,wn,At]);const ki=Sn&&Sn.onFilled,Wn=Sn&&Sn.onEmpty,ri=reactExports.useCallback(Un=>{isFilled(Un)?ki&&ki():Wn&&Wn()},[ki,Wn]);useEnhancedEffect(()=>{_n&&ri({value:Rn})},[Rn,ri,_n]);const ji=Un=>{Ut&&Ut(Un),Ot.onFocus&&Ot.onFocus(Un),Sn&&Sn.onFocus?Sn.onFocus(Un):Jn(!0)},gi=Un=>{At&&At(Un),Ot.onBlur&&Ot.onBlur(Un),Sn&&Sn.onBlur?Sn.onBlur(Un):Jn(!1)},Gn=(Un,...vs)=>{if(!_n){const Xi=Un.target||In.current;if(Xi==null)throw new Error(formatMuiErrorMessage(1));ri({value:Xi.value})}Ot.onChange&&Ot.onChange(Un,...vs),Ft&&Ft(Un,...vs)};reactExports.useEffect(()=>{ri(In.current)},[]);const pn=Un=>{In.current&&Un.currentTarget===Un.target&&In.current.focus(),zt&&zt(Un)};let is=Pt,pi=Ot;kt&&is==="input"&&(Kt?pi={type:void 0,minRows:Kt,maxRows:Kt,...pi}:pi={type:void 0,maxRows:Dt,minRows:$t,...pi},is=TextareaAutosize);const _s=Un=>{ri(Un.animationName==="mui-auto-fill-cancel"?In.current:{value:"x"})};reactExports.useEffect(()=>{Sn&&Sn.setAdornedStart(!!nn)},[Sn,nn]);const qi={...de,color:Hn.color||"primary",disabled:Hn.disabled,endAdornment:vt,error:Hn.error,focused:Hn.focused,formControl:Sn,fullWidth:St,hiddenLabel:Hn.hiddenLabel,multiline:kt,size:Hn.size,startAdornment:nn,type:sn},ii=useUtilityClasses$e(qi),wi=cn.root||ht.Root||InputBaseRoot,ei=en.root||mt.root||{},ss=cn.input||ht.Input||InputBaseInput;return pi={...pi,...en.input??mt.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!_t&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(wi,{...ei,ref:t,onClick:pn,...dn,...!isHostComponent(wi)&&{ownerState:{...qi,...ei.ownerState}},className:clsx(ii.root,ei.className,tt,jt&&"MuiInputBase-readOnly"),children:[nn,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(ss,{"aria-invalid":Hn.error,"aria-describedby":pe,autoComplete:Le,autoFocus:Ye,defaultValue:gt,disabled:Hn.disabled,id:Rt,onAnimationStart:_s,name:Et,placeholder:Nt,readOnly:jt,required:Hn.required,rows:Kt,value:Rn,onKeyDown:qt,onKeyUp:Gt,type:sn,...pi,...!isHostComponent(ss)&&{as:is,ownerState:{...qi,...pi.ownerState}},ref:vn,className:clsx(ii.input,pi.className,jt&&"MuiInputBase-readOnly"),onBlur:gi,onChange:Gn,onFocus:ji})}),vt,Qt?Qt({...Hn,startAdornment:nn}):null]})]})});function getInputUtilityClass(me){return generateUtilityClass("MuiInput",me)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])};function getOutlinedInputUtilityClass(me){return generateUtilityClass("MuiOutlinedInput",me)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])};function getFilledInputUtilityClass(me){return generateUtilityClass("MuiFilledInput",me)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),styles$1={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(u,t){const de=useTheme(),pe={enter:de.transitions.duration.enteringScreen,exit:de.transitions.duration.leavingScreen},{addEndListener:Le,appear:Ye=!0,children:tt,easing:st,in:ht,onEnter:mt,onEntered:gt,onEntering:bt,onExit:_t,onExited:vt,onExiting:Tt,style:St,timeout:Rt=pe,TransitionComponent:Pt=Transition,...Ot}=u,Mt=reactExports.useRef(null),Bt=useForkRef(Mt,getReactElementRef(tt),t),Dt=qt=>Gt=>{if(qt){const Nt=Mt.current;Gt===void 0?qt(Nt):qt(Nt,Gt)}},$t=Dt(bt),kt=Dt((qt,Gt)=>{reflow(qt);const Nt=getTransitionProps({style:St,timeout:Rt,easing:st},{mode:"enter"});qt.style.webkitTransition=de.transitions.create("opacity",Nt),qt.style.transition=de.transitions.create("opacity",Nt),mt&&mt(qt,Gt)}),Et=Dt(gt),At=Dt(Tt),Ft=Dt(qt=>{const Gt=getTransitionProps({style:St,timeout:Rt,easing:st},{mode:"exit"});qt.style.webkitTransition=de.transitions.create("opacity",Gt),qt.style.transition=de.transitions.create("opacity",Gt),_t&&_t(qt)}),zt=Dt(vt),Ut=qt=>{Le&&Le(Mt.current,qt)};return jsxRuntimeExports.jsx(Pt,{appear:Ye,in:ht,nodeRef:Mt,onEnter:kt,onEntered:Et,onEntering:$t,onExit:Ft,onExited:zt,onExiting:At,addEndListener:Ut,timeout:Rt,...Ot,children:(qt,{ownerState:Gt,...Nt})=>reactExports.cloneElement(tt,{style:{opacity:0,visibility:qt==="exited"&&!ht?"hidden":void 0,...styles$1[qt],...St,...tt.props.style},ref:Bt,...Nt})})});function getBackdropUtilityClass(me){return generateUtilityClass("MuiBackdrop",me)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$d=me=>{const{classes:u,invisible:t}=me;return composeClasses({root:["root",t&&"invisible"]},getBackdropUtilityClass,u)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,t.invisible&&u.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiBackdrop"}),{children:pe,className:Le,component:Ye="div",invisible:tt=!1,open:st,components:ht={},componentsProps:mt={},slotProps:gt={},slots:bt={},TransitionComponent:_t,transitionDuration:vt,...Tt}=de,St={...de,component:Ye,invisible:tt},Rt=useUtilityClasses$d(St),Pt={transition:_t,root:ht.Root,...bt},Ot={...mt,...gt},Mt={slots:Pt,slotProps:Ot},[Bt,Dt]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:Mt,className:clsx(Rt.root,Le),ownerState:St}),[$t,kt]=useSlot("transition",{elementType:Fade,externalForwardedProps:Mt,ownerState:St});return jsxRuntimeExports.jsx($t,{in:st,timeout:vt,...Tt,...kt,children:jsxRuntimeExports.jsx(Bt,{"aria-hidden":!0,...Dt,classes:Rt,ref:t,children:pe})})});function isOverflowing(me){const u=ownerDocument(me);return u.body===me?ownerWindow(me).innerWidth>u.documentElement.clientWidth:me.scrollHeight>me.clientHeight}function ariaHidden(me,u){u?me.setAttribute("aria-hidden","true"):me.removeAttribute("aria-hidden")}function getPaddingRight(me){return parseInt(ownerWindow(me).getComputedStyle(me).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(me){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(me.tagName),de=me.tagName==="INPUT"&&me.getAttribute("type")==="hidden";return t||de}function ariaHiddenSiblings(me,u,t,de,pe){const Le=[u,t,...de];[].forEach.call(me.children,Ye=>{const tt=!Le.includes(Ye),st=!isAriaHiddenForbiddenOnElement(Ye);tt&&st&&ariaHidden(Ye,pe)})}function findIndexOf(me,u){let t=-1;return me.some((de,pe)=>u(de)?(t=pe,!0):!1),t}function handleContainer(me,u){const t=[],de=me.container;if(!u.disableScrollLock){if(isOverflowing(de)){const Ye=getScrollbarSize(ownerWindow(de));t.push({value:de.style.paddingRight,property:"padding-right",el:de}),de.style.paddingRight=`${getPaddingRight(de)+Ye}px`;const tt=ownerDocument(de).querySelectorAll(".mui-fixed");[].forEach.call(tt,st=>{t.push({value:st.style.paddingRight,property:"padding-right",el:st}),st.style.paddingRight=`${getPaddingRight(st)+Ye}px`})}let Le;if(de.parentNode instanceof DocumentFragment)Le=ownerDocument(de).body;else{const Ye=de.parentElement,tt=ownerWindow(de);Le=(Ye==null?void 0:Ye.nodeName)==="HTML"&&tt.getComputedStyle(Ye).overflowY==="scroll"?Ye:de}t.push({value:Le.style.overflow,property:"overflow",el:Le},{value:Le.style.overflowX,property:"overflow-x",el:Le},{value:Le.style.overflowY,property:"overflow-y",el:Le}),Le.style.overflow="hidden"}return()=>{t.forEach(({value:Le,el:Ye,property:tt})=>{Le?Ye.style.setProperty(tt,Le):Ye.style.removeProperty(tt)})}}function getHiddenSiblings(me){const u=[];return[].forEach.call(me.children,t=>{t.getAttribute("aria-hidden")==="true"&&u.push(t)}),u}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(u,t){let de=this.modals.indexOf(u);if(de!==-1)return de;de=this.modals.length,this.modals.push(u),u.modalRef&&ariaHidden(u.modalRef,!1);const pe=getHiddenSiblings(t);ariaHiddenSiblings(t,u.mount,u.modalRef,pe,!0);const Le=findIndexOf(this.containers,Ye=>Ye.container===t);return Le!==-1?(this.containers[Le].modals.push(u),de):(this.containers.push({modals:[u],container:t,restore:null,hiddenSiblings:pe}),de)}mount(u,t){const de=findIndexOf(this.containers,Le=>Le.modals.includes(u)),pe=this.containers[de];pe.restore||(pe.restore=handleContainer(pe,t))}remove(u,t=!0){const de=this.modals.indexOf(u);if(de===-1)return de;const pe=findIndexOf(this.containers,Ye=>Ye.modals.includes(u)),Le=this.containers[pe];if(Le.modals.splice(Le.modals.indexOf(u),1),this.modals.splice(de,1),Le.modals.length===0)Le.restore&&Le.restore(),u.modalRef&&ariaHidden(u.modalRef,t),ariaHiddenSiblings(Le.container,u.mount,u.modalRef,Le.hiddenSiblings,!1),this.containers.splice(pe,1);else{const Ye=Le.modals[Le.modals.length-1];Ye.modalRef&&ariaHidden(Ye.modalRef,!1)}return de}isTopModal(u){return this.modals.length>0&&this.modals[this.modals.length-1]===u}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(me){const u=parseInt(me.getAttribute("tabindex")||"",10);return Number.isNaN(u)?me.contentEditable==="true"||(me.nodeName==="AUDIO"||me.nodeName==="VIDEO"||me.nodeName==="DETAILS")&&me.getAttribute("tabindex")===null?0:me.tabIndex:u}function isNonTabbableRadio(me){if(me.tagName!=="INPUT"||me.type!=="radio"||!me.name)return!1;const u=de=>me.ownerDocument.querySelector(`input[type="radio"]${de}`);let t=u(`[name="${me.name}"]:checked`);return t||(t=u(`[name="${me.name}"]`)),t!==me}function isNodeMatchingSelectorFocusable(me){return!(me.disabled||me.tagName==="INPUT"&&me.type==="hidden"||isNonTabbableRadio(me))}function defaultGetTabbable(me){const u=[],t=[];return Array.from(me.querySelectorAll(candidatesSelector)).forEach((de,pe)=>{const Le=getTabIndex(de);Le===-1||!isNodeMatchingSelectorFocusable(de)||(Le===0?u.push(de):t.push({documentOrder:pe,tabIndex:Le,node:de}))}),t.sort((de,pe)=>de.tabIndex===pe.tabIndex?de.documentOrder-pe.documentOrder:de.tabIndex-pe.tabIndex).map(de=>de.node).concat(u)}function defaultIsEnabled(){return!0}function FocusTrap(me){const{children:u,disableAutoFocus:t=!1,disableEnforceFocus:de=!1,disableRestoreFocus:pe=!1,getTabbable:Le=defaultGetTabbable,isEnabled:Ye=defaultIsEnabled,open:tt}=me,st=reactExports.useRef(!1),ht=reactExports.useRef(null),mt=reactExports.useRef(null),gt=reactExports.useRef(null),bt=reactExports.useRef(null),_t=reactExports.useRef(!1),vt=reactExports.useRef(null),Tt=useForkRef(getReactElementRef(u),vt),St=reactExports.useRef(null);reactExports.useEffect(()=>{!tt||!vt.current||(_t.current=!t)},[t,tt]),reactExports.useEffect(()=>{if(!tt||!vt.current)return;const Ot=ownerDocument(vt.current);return vt.current.contains(Ot.activeElement)||(vt.current.hasAttribute("tabIndex")||vt.current.setAttribute("tabIndex","-1"),_t.current&&vt.current.focus()),()=>{pe||(gt.current&&gt.current.focus&&(st.current=!0,gt.current.focus()),gt.current=null)}},[tt]),reactExports.useEffect(()=>{if(!tt||!vt.current)return;const Ot=ownerDocument(vt.current),Mt=$t=>{St.current=$t,!(de||!Ye()||$t.key!=="Tab")&&Ot.activeElement===vt.current&&$t.shiftKey&&(st.current=!0,mt.current&&mt.current.focus())},Bt=()=>{var Et,At;const $t=vt.current;if($t===null)return;if(!Ot.hasFocus()||!Ye()||st.current){st.current=!1;return}if($t.contains(Ot.activeElement)||de&&Ot.activeElement!==ht.current&&Ot.activeElement!==mt.current)return;if(Ot.activeElement!==bt.current)bt.current=null;else if(bt.current!==null)return;if(!_t.current)return;let kt=[];if((Ot.activeElement===ht.current||Ot.activeElement===mt.current)&&(kt=Le(vt.current)),kt.length>0){const Ft=!!((Et=St.current)!=null&&Et.shiftKey&&((At=St.current)==null?void 0:At.key)==="Tab"),zt=kt[0],Ut=kt[kt.length-1];typeof zt!="string"&&typeof Ut!="string"&&(Ft?Ut.focus():zt.focus())}else $t.focus()};Ot.addEventListener("focusin",Bt),Ot.addEventListener("keydown",Mt,!0);const Dt=setInterval(()=>{Ot.activeElement&&Ot.activeElement.tagName==="BODY"&&Bt()},50);return()=>{clearInterval(Dt),Ot.removeEventListener("focusin",Bt),Ot.removeEventListener("keydown",Mt,!0)}},[t,de,pe,Ye,tt,Le]);const Rt=Ot=>{gt.current===null&&(gt.current=Ot.relatedTarget),_t.current=!0,bt.current=Ot.target;const Mt=u.props.onFocus;Mt&&Mt(Ot)},Pt=Ot=>{gt.current===null&&(gt.current=Ot.relatedTarget),_t.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:tt?0:-1,onFocus:Pt,ref:ht,"data-testid":"sentinelStart"}),reactExports.cloneElement(u,{ref:Tt,onFocus:Rt}),jsxRuntimeExports.jsx("div",{tabIndex:tt?0:-1,onFocus:Pt,ref:mt,"data-testid":"sentinelEnd"})]})}function getContainer(me){return typeof me=="function"?me():me}function getHasTransition(me){return me?me.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(me){const{container:u,disableEscapeKeyDown:t=!1,disableScrollLock:de=!1,closeAfterTransition:pe=!1,onTransitionEnter:Le,onTransitionExited:Ye,children:tt,onClose:st,open:ht,rootRef:mt}=me,gt=reactExports.useRef({}),bt=reactExports.useRef(null),_t=reactExports.useRef(null),vt=useForkRef(_t,mt),[Tt,St]=reactExports.useState(!ht),Rt=getHasTransition(tt);let Pt=!0;(me["aria-hidden"]==="false"||me["aria-hidden"]===!1)&&(Pt=!1);const Ot=()=>ownerDocument(bt.current),Mt=()=>(gt.current.modalRef=_t.current,gt.current.mount=bt.current,gt.current),Bt=()=>{manager.mount(Mt(),{disableScrollLock:de}),_t.current&&(_t.current.scrollTop=0)},Dt=useEventCallback(()=>{const Gt=getContainer(u)||Ot().body;manager.add(Mt(),Gt),_t.current&&Bt()}),$t=()=>manager.isTopModal(Mt()),kt=useEventCallback(Gt=>{bt.current=Gt,Gt&&(ht&&$t()?Bt():_t.current&&ariaHidden(_t.current,Pt))}),Et=reactExports.useCallback(()=>{manager.remove(Mt(),Pt)},[Pt]);reactExports.useEffect(()=>()=>{Et()},[Et]),reactExports.useEffect(()=>{ht?Dt():(!Rt||!pe)&&Et()},[ht,Et,Rt,pe,Dt]);const At=Gt=>Nt=>{var jt;(jt=Gt.onKeyDown)==null||jt.call(Gt,Nt),!(Nt.key!=="Escape"||Nt.which===229||!$t())&&(t||(Nt.stopPropagation(),st&&st(Nt,"escapeKeyDown")))},Ft=Gt=>Nt=>{var jt;(jt=Gt.onClick)==null||jt.call(Gt,Nt),Nt.target===Nt.currentTarget&&st&&st(Nt,"backdropClick")};return{getRootProps:(Gt={})=>{const Nt=extractEventHandlers(me);delete Nt.onTransitionEnter,delete Nt.onTransitionExited;const jt={...Nt,...Gt};return{role:"presentation",...jt,onKeyDown:At(jt),ref:vt}},getBackdropProps:(Gt={})=>{const Nt=Gt;return{"aria-hidden":!0,...Nt,onClick:Ft(Nt),open:ht}},getTransitionProps:()=>{const Gt=()=>{St(!1),Le&&Le()},Nt=()=>{St(!0),Ye&&Ye(),pe&&Et()};return{onEnter:createChainedFunction(Gt,(tt==null?void 0:tt.props.onEnter)??noop$1),onExited:createChainedFunction(Nt,(tt==null?void 0:tt.props.onExited)??noop$1)}},rootRef:vt,portalRef:kt,isTopModal:$t,exited:Tt,hasTransition:Rt}}function getModalUtilityClass(me){return generateUtilityClass("MuiModal",me)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$c=me=>{const{open:u,exited:t,classes:de}=me;return composeClasses({root:["root",!u&&t&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,de)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,!t.open&&t.exited&&u.hidden]}})(memoTheme(({theme:me})=>({position:"fixed",zIndex:(me.vars||me).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:u})=>!u.open&&u.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop",overridesResolver:(me,u)=>u.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(u,t){const de=useDefaultProps({name:"MuiModal",props:u}),{BackdropComponent:pe=ModalBackdrop,BackdropProps:Le,classes:Ye,className:tt,closeAfterTransition:st=!1,children:ht,container:mt,component:gt,components:bt={},componentsProps:_t={},disableAutoFocus:vt=!1,disableEnforceFocus:Tt=!1,disableEscapeKeyDown:St=!1,disablePortal:Rt=!1,disableRestoreFocus:Pt=!1,disableScrollLock:Ot=!1,hideBackdrop:Mt=!1,keepMounted:Bt=!1,onBackdropClick:Dt,onClose:$t,onTransitionEnter:kt,onTransitionExited:Et,open:At,slotProps:Ft={},slots:zt={},theme:Ut,...qt}=de,Gt={...de,closeAfterTransition:st,disableAutoFocus:vt,disableEnforceFocus:Tt,disableEscapeKeyDown:St,disablePortal:Rt,disableRestoreFocus:Pt,disableScrollLock:Ot,hideBackdrop:Mt,keepMounted:Bt},{getRootProps:Nt,getBackdropProps:jt,getTransitionProps:Qt,portalRef:Kt,isTopModal:Vt,exited:en,hasTransition:cn}=useModal({...Gt,rootRef:t}),nn={...Gt,exited:en},sn=useUtilityClasses$c(nn),un={};if(ht.props.tabIndex===void 0&&(un.tabIndex="-1"),cn){const{onEnter:vn,onExited:wn}=Qt();un.onEnter=vn,un.onExited=wn}const dn={slots:{root:bt.Root,backdrop:bt.Backdrop,...zt},slotProps:{..._t,...Ft}},[Rn,_n]=useSlot("root",{ref:t,elementType:ModalRoot,externalForwardedProps:{...dn,...qt,component:gt},getSlotProps:Nt,ownerState:nn,className:clsx(tt,sn==null?void 0:sn.root,!nn.open&&nn.exited&&(sn==null?void 0:sn.hidden))}),[In,yn]=useSlot("backdrop",{ref:Le==null?void 0:Le.ref,elementType:pe,externalForwardedProps:dn,shouldForwardComponentProp:!0,additionalProps:Le,getSlotProps:vn=>jt({...vn,onClick:wn=>{Dt&&Dt(wn),vn!=null&&vn.onClick&&vn.onClick(wn)}}),className:clsx(Le==null?void 0:Le.className,sn==null?void 0:sn.backdrop),ownerState:nn});return!Bt&&!At&&(!cn||en)?null:jsxRuntimeExports.jsx(Portal,{ref:Kt,container:mt,disablePortal:Rt,children:jsxRuntimeExports.jsxs(Rn,{..._n,children:[!Mt&&pe?jsxRuntimeExports.jsx(In,{...yn}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:Tt,disableAutoFocus:vt,disableRestoreFocus:Pt,isEnabled:Vt,open:At,children:reactExports.cloneElement(ht,un)})]})})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),useUtilityClasses$b=me=>{const{classes:u,disableUnderline:t,startAdornment:de,endAdornment:pe,size:Le,hiddenLabel:Ye,multiline:tt}=me,st={root:["root",!t&&"underline",de&&"adornedStart",pe&&"adornedEnd",Le==="small"&&`size${capitalize(Le)}`,Ye&&"hiddenLabel",tt&&"multiline"],input:["input"]},ht=composeClasses(st,getFilledInputUtilityClass,u);return{...u,...ht}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:me=>rootShouldForwardProp(me)||me==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[...rootOverridesResolver(me,u),!t.disableUnderline&&u.underline]}})(memoTheme(({theme:me})=>{const u=me.palette.mode==="light",t=u?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",de=u?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",pe=u?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",Le=u?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:me.vars?me.vars.palette.FilledInput.bg:de,borderTopLeftRadius:(me.vars||me).shape.borderRadius,borderTopRightRadius:(me.vars||me).shape.borderRadius,transition:me.transitions.create("background-color",{duration:me.transitions.duration.shorter,easing:me.transitions.easing.easeOut}),"&:hover":{backgroundColor:me.vars?me.vars.palette.FilledInput.hoverBg:pe,"@media (hover: none)":{backgroundColor:me.vars?me.vars.palette.FilledInput.bg:de}},[`&.${filledInputClasses.focused}`]:{backgroundColor:me.vars?me.vars.palette.FilledInput.bg:de},[`&.${filledInputClasses.disabled}`]:{backgroundColor:me.vars?me.vars.palette.FilledInput.disabledBg:Le},variants:[{props:({ownerState:Ye})=>!Ye.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:me.transitions.create("transform",{duration:me.transitions.duration.shorter,easing:me.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(me.vars||me).palette.error.main}},"&::before":{borderBottom:`1px solid ${me.vars?`rgba(${me.vars.palette.common.onBackgroundChannel} / ${me.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:me.transitions.create("border-bottom-color",{duration:me.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(me.vars||me).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(me.palette).filter(createSimplePaletteValueFilter()).map(([Ye])=>{var tt;return{props:{disableUnderline:!1,color:Ye},style:{"&::after":{borderBottom:`2px solid ${(tt=(me.vars||me).palette[Ye])==null?void 0:tt.main}`}}}}),{props:({ownerState:Ye})=>Ye.startAdornment,style:{paddingLeft:12}},{props:({ownerState:Ye})=>Ye.endAdornment,style:{paddingRight:12}},{props:({ownerState:Ye})=>Ye.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:Ye,size:tt})=>Ye.multiline&&tt==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:Ye})=>Ye.multiline&&Ye.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:Ye})=>Ye.multiline&&Ye.hiddenLabel&&Ye.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:me})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!me.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:me.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:me.palette.mode==="light"?null:"#fff",caretColor:me.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...me.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[me.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:0}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:0}},{props:({ownerState:u})=>u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:u})=>u.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiFilledInput"}),{disableUnderline:pe=!1,components:Le={},componentsProps:Ye,fullWidth:tt=!1,hiddenLabel:st,inputComponent:ht="input",multiline:mt=!1,slotProps:gt,slots:bt={},type:_t="text",...vt}=de,Tt={...de,disableUnderline:pe,fullWidth:tt,inputComponent:ht,multiline:mt,type:_t},St=useUtilityClasses$b(de),Rt={root:{ownerState:Tt},input:{ownerState:Tt}},Pt=gt??Ye?deepmerge(Rt,gt??Ye):Rt,Ot=bt.root??Le.Root??FilledInputRoot,Mt=bt.input??Le.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:Ot,input:Mt},slotProps:Pt,fullWidth:tt,inputComponent:ht,multiline:mt,ref:t,type:_t,...vt,classes:St})});FilledInput.muiName="Input";function getFormControlUtilityClasses(me){return generateUtilityClass("MuiFormControl",me)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$a=me=>{const{classes:u,margin:t,fullWidth:de}=me,pe={root:["root",t!=="none"&&`margin${capitalize(t)}`,de&&"fullWidth"]};return composeClasses(pe,getFormControlUtilityClasses,u)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,u[`margin${capitalize(t.margin)}`],t.fullWidth&&u.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiFormControl"}),{children:pe,className:Le,color:Ye="primary",component:tt="div",disabled:st=!1,error:ht=!1,focused:mt,fullWidth:gt=!1,hiddenLabel:bt=!1,margin:_t="none",required:vt=!1,size:Tt="medium",variant:St="outlined",...Rt}=de,Pt={...de,color:Ye,component:tt,disabled:st,error:ht,fullWidth:gt,hiddenLabel:bt,margin:_t,required:vt,size:Tt,variant:St},Ot=useUtilityClasses$a(Pt),[Mt,Bt]=reactExports.useState(()=>{let Gt=!1;return pe&&reactExports.Children.forEach(pe,Nt=>{if(!isMuiElement(Nt,["Input","Select"]))return;const jt=isMuiElement(Nt,["Select"])?Nt.props.input:Nt;jt&&isAdornedStart(jt.props)&&(Gt=!0)}),Gt}),[Dt,$t]=reactExports.useState(()=>{let Gt=!1;return pe&&reactExports.Children.forEach(pe,Nt=>{isMuiElement(Nt,["Input","Select"])&&(isFilled(Nt.props,!0)||isFilled(Nt.props.inputProps,!0))&&(Gt=!0)}),Gt}),[kt,Et]=reactExports.useState(!1);st&&kt&&Et(!1);const At=mt!==void 0&&!st?mt:kt;let Ft;reactExports.useRef(!1);const zt=reactExports.useCallback(()=>{$t(!0)},[]),Ut=reactExports.useCallback(()=>{$t(!1)},[]),qt=reactExports.useMemo(()=>({adornedStart:Mt,setAdornedStart:Bt,color:Ye,disabled:st,error:ht,filled:Dt,focused:At,fullWidth:gt,hiddenLabel:bt,size:Tt,onBlur:()=>{Et(!1)},onFocus:()=>{Et(!0)},onEmpty:Ut,onFilled:zt,registerEffect:Ft,required:vt,variant:St}),[Mt,Ye,st,ht,Dt,At,gt,bt,Ft,Ut,zt,vt,Tt,St]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:qt,children:jsxRuntimeExports.jsx(FormControlRoot,{as:tt,ownerState:Pt,className:clsx(Ot.root,Le),ref:t,...Rt,children:pe})})});function getScale(me){return`scale(${me}, ${me**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(u,t){const{addEndListener:de,appear:pe=!0,children:Le,easing:Ye,in:tt,onEnter:st,onEntered:ht,onEntering:mt,onExit:gt,onExited:bt,onExiting:_t,style:vt,timeout:Tt="auto",TransitionComponent:St=Transition,...Rt}=u,Pt=useTimeout(),Ot=reactExports.useRef(),Mt=useTheme(),Bt=reactExports.useRef(null),Dt=useForkRef(Bt,getReactElementRef(Le),t),$t=Gt=>Nt=>{if(Gt){const jt=Bt.current;Nt===void 0?Gt(jt):Gt(jt,Nt)}},kt=$t(mt),Et=$t((Gt,Nt)=>{reflow(Gt);const{duration:jt,delay:Qt,easing:Kt}=getTransitionProps({style:vt,timeout:Tt,easing:Ye},{mode:"enter"});let Vt;Tt==="auto"?(Vt=Mt.transitions.getAutoHeightDuration(Gt.clientHeight),Ot.current=Vt):Vt=jt,Gt.style.transition=[Mt.transitions.create("opacity",{duration:Vt,delay:Qt}),Mt.transitions.create("transform",{duration:isWebKit154?Vt:Vt*.666,delay:Qt,easing:Kt})].join(","),st&&st(Gt,Nt)}),At=$t(ht),Ft=$t(_t),zt=$t(Gt=>{const{duration:Nt,delay:jt,easing:Qt}=getTransitionProps({style:vt,timeout:Tt,easing:Ye},{mode:"exit"});let Kt;Tt==="auto"?(Kt=Mt.transitions.getAutoHeightDuration(Gt.clientHeight),Ot.current=Kt):Kt=Nt,Gt.style.transition=[Mt.transitions.create("opacity",{duration:Kt,delay:jt}),Mt.transitions.create("transform",{duration:isWebKit154?Kt:Kt*.666,delay:isWebKit154?jt:jt||Kt*.333,easing:Qt})].join(","),Gt.style.opacity=0,Gt.style.transform=getScale(.75),gt&&gt(Gt)}),Ut=$t(bt),qt=Gt=>{Tt==="auto"&&Pt.start(Ot.current||0,Gt),de&&de(Bt.current,Gt)};return jsxRuntimeExports.jsx(St,{appear:pe,in:tt,nodeRef:Bt,onEnter:Et,onEntered:At,onEntering:kt,onExit:zt,onExited:Ut,onExiting:Ft,addEndListener:qt,timeout:Tt==="auto"?null:Tt,...Rt,children:(Gt,{ownerState:Nt,...jt})=>reactExports.cloneElement(Le,{style:{opacity:0,transform:getScale(.75),visibility:Gt==="exited"&&!tt?"hidden":void 0,...styles[Gt],...vt,...Le.props.style},ref:Dt,...jt})})});Grow&&(Grow.muiSupportAuto=!0);const useUtilityClasses$9=me=>{const{classes:u,disableUnderline:t}=me,pe=composeClasses({root:["root",!t&&"underline"],input:["input"]},getInputUtilityClass,u);return{...u,...pe}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:me=>rootShouldForwardProp(me)||me==="classes",name:"MuiInput",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[...rootOverridesResolver(me,u),!t.disableUnderline&&u.underline]}})(memoTheme(({theme:me})=>{let t=me.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return me.vars&&(t=`rgba(${me.vars.palette.common.onBackgroundChannel} / ${me.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:de})=>de.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:de})=>!de.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:me.transitions.create("transform",{duration:me.transitions.duration.shorter,easing:me.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(me.vars||me).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:me.transitions.create("border-bottom-color",{duration:me.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(me.vars||me).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(me.palette).filter(createSimplePaletteValueFilter()).map(([de])=>({props:{color:de,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(me.vars||me).palette[de].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input$1=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiInput"}),{disableUnderline:pe=!1,components:Le={},componentsProps:Ye,fullWidth:tt=!1,inputComponent:st="input",multiline:ht=!1,slotProps:mt,slots:gt={},type:bt="text",..._t}=de,vt=useUtilityClasses$9(de),St={root:{ownerState:{disableUnderline:pe}}},Rt=mt??Ye?deepmerge(mt??Ye,St):St,Pt=gt.root??Le.Root??InputRoot,Ot=gt.input??Le.Input??InputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:Pt,input:Ot},slotProps:Rt,fullWidth:tt,inputComponent:st,multiline:ht,ref:t,type:bt,..._t,classes:vt})});Input$1.muiName="Input";const ListContext=reactExports.createContext({});function getListUtilityClass(me){return generateUtilityClass("MuiList",me)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$8=me=>{const{classes:u,disablePadding:t,dense:de,subheader:pe}=me;return composeClasses({root:["root",!t&&"padding",de&&"dense",pe&&"subheader"]},getListUtilityClass,u)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,!t.disablePadding&&u.padding,t.dense&&u.dense,t.subheader&&u.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:me})=>!me.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:me})=>me.subheader,style:{paddingTop:0}}]}),List$1=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiList"}),{children:pe,className:Le,component:Ye="ul",dense:tt=!1,disablePadding:st=!1,subheader:ht,...mt}=de,gt=reactExports.useMemo(()=>({dense:tt}),[tt]),bt={...de,component:Ye,dense:tt,disablePadding:st},_t=useUtilityClasses$8(bt);return jsxRuntimeExports.jsx(ListContext.Provider,{value:gt,children:jsxRuntimeExports.jsxs(ListRoot,{as:Ye,className:clsx(_t.root,Le),ref:t,ownerState:bt,...mt,children:[ht,pe]})})}),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function nextItem(me,u,t){return me===u?me.firstChild:u&&u.nextElementSibling?u.nextElementSibling:t?null:me.firstChild}function previousItem(me,u,t){return me===u?t?me.firstChild:me.lastChild:u&&u.previousElementSibling?u.previousElementSibling:t?null:me.lastChild}function textCriteriaMatches(me,u){if(u===void 0)return!0;let t=me.innerText;return t===void 0&&(t=me.textContent),t=t.trim().toLowerCase(),t.length===0?!1:u.repeating?t[0]===u.keys[0]:t.startsWith(u.keys.join(""))}function moveFocus(me,u,t,de,pe,Le){let Ye=!1,tt=pe(me,u,u?t:!1);for(;tt;){if(tt===me.firstChild){if(Ye)return!1;Ye=!0}const st=de?!1:tt.disabled||tt.getAttribute("aria-disabled")==="true";if(!tt.hasAttribute("tabindex")||!textCriteriaMatches(tt,Le)||st)tt=pe(me,tt,t);else return tt.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(u,t){const{actions:de,autoFocus:pe=!1,autoFocusItem:Le=!1,children:Ye,className:tt,disabledItemsFocusable:st=!1,disableListWrap:ht=!1,onKeyDown:mt,variant:gt="selectedMenu",...bt}=u,_t=reactExports.useRef(null),vt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{pe&&_t.current.focus()},[pe]),reactExports.useImperativeHandle(de,()=>({adjustStyleForScrollbar:(Ot,{direction:Mt})=>{const Bt=!_t.current.style.width;if(Ot.clientHeight<_t.current.clientHeight&&Bt){const Dt=`${getScrollbarSize(ownerWindow(Ot))}px`;_t.current.style[Mt==="rtl"?"paddingLeft":"paddingRight"]=Dt,_t.current.style.width=`calc(100% + ${Dt})`}return _t.current}}),[]);const Tt=Ot=>{const Mt=_t.current,Bt=Ot.key;if(Ot.ctrlKey||Ot.metaKey||Ot.altKey){mt&&mt(Ot);return}const $t=ownerDocument(Mt).activeElement;if(Bt==="ArrowDown")Ot.preventDefault(),moveFocus(Mt,$t,ht,st,nextItem);else if(Bt==="ArrowUp")Ot.preventDefault(),moveFocus(Mt,$t,ht,st,previousItem);else if(Bt==="Home")Ot.preventDefault(),moveFocus(Mt,null,ht,st,nextItem);else if(Bt==="End")Ot.preventDefault(),moveFocus(Mt,null,ht,st,previousItem);else if(Bt.length===1){const kt=vt.current,Et=Bt.toLowerCase(),At=performance.now();kt.keys.length>0&&(At-kt.lastTime>500?(kt.keys=[],kt.repeating=!0,kt.previousKeyMatched=!0):kt.repeating&&Et!==kt.keys[0]&&(kt.repeating=!1)),kt.lastTime=At,kt.keys.push(Et);const Ft=$t&&!kt.repeating&&textCriteriaMatches($t,kt);kt.previousKeyMatched&&(Ft||moveFocus(Mt,$t,!1,st,nextItem,kt))?Ot.preventDefault():kt.previousKeyMatched=!1}mt&&mt(Ot)},St=useForkRef(_t,t);let Rt=-1;reactExports.Children.forEach(Ye,(Ot,Mt)=>{if(!reactExports.isValidElement(Ot)){Rt===Mt&&(Rt+=1,Rt>=Ye.length&&(Rt=-1));return}Ot.props.disabled||(gt==="selectedMenu"&&Ot.props.selected||Rt===-1)&&(Rt=Mt),Rt===Mt&&(Ot.props.disabled||Ot.props.muiSkipListHighlight||Ot.type.muiSkipListHighlight)&&(Rt+=1,Rt>=Ye.length&&(Rt=-1))});const Pt=reactExports.Children.map(Ye,(Ot,Mt)=>{if(Mt===Rt){const Bt={};return Le&&(Bt.autoFocus=!0),Ot.props.tabIndex===void 0&&gt==="selectedMenu"&&(Bt.tabIndex=0),reactExports.cloneElement(Ot,Bt)}return Ot});return jsxRuntimeExports.jsx(List$1,{role:"menu",ref:St,className:tt,onKeyDown:Tt,tabIndex:pe?0:-1,...bt,children:Pt})});function getPopoverUtilityClass(me){return generateUtilityClass("MuiPopover",me)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(me,u){let t=0;return typeof u=="number"?t=u:u==="center"?t=me.height/2:u==="bottom"&&(t=me.height),t}function getOffsetLeft(me,u){let t=0;return typeof u=="number"?t=u:u==="center"?t=me.width/2:u==="right"&&(t=me.width),t}function getTransformOriginValue(me){return[me.horizontal,me.vertical].map(u=>typeof u=="number"?`${u}px`:u).join(" ")}function resolveAnchorEl(me){return typeof me=="function"?me():me}const useUtilityClasses$7=me=>{const{classes:u}=me;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,u)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root",overridesResolver:(me,u)=>u.root})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper",overridesResolver:(me,u)=>u.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiPopover"}),{action:pe,anchorEl:Le,anchorOrigin:Ye={vertical:"top",horizontal:"left"},anchorPosition:tt,anchorReference:st="anchorEl",children:ht,className:mt,container:gt,elevation:bt=8,marginThreshold:_t=16,open:vt,PaperProps:Tt={},slots:St={},slotProps:Rt={},transformOrigin:Pt={vertical:"top",horizontal:"left"},TransitionComponent:Ot,transitionDuration:Mt="auto",TransitionProps:Bt={},disableScrollLock:Dt=!1,...$t}=de,kt=reactExports.useRef(),Et={...de,anchorOrigin:Ye,anchorReference:st,elevation:bt,marginThreshold:_t,transformOrigin:Pt,TransitionComponent:Ot,transitionDuration:Mt,TransitionProps:Bt},At=useUtilityClasses$7(Et),Ft=reactExports.useCallback(()=>{if(st==="anchorPosition")return tt;const yn=resolveAnchorEl(Le),wn=(yn&&yn.nodeType===1?yn:ownerDocument(kt.current).body).getBoundingClientRect();return{top:wn.top+getOffsetTop(wn,Ye.vertical),left:wn.left+getOffsetLeft(wn,Ye.horizontal)}},[Le,Ye.horizontal,Ye.vertical,tt,st]),zt=reactExports.useCallback(yn=>({vertical:getOffsetTop(yn,Pt.vertical),horizontal:getOffsetLeft(yn,Pt.horizontal)}),[Pt.horizontal,Pt.vertical]),Ut=reactExports.useCallback(yn=>{const vn={width:yn.offsetWidth,height:yn.offsetHeight},wn=zt(vn);if(st==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(wn)};const Jn=Ft();let Sn=Jn.top-wn.vertical,Hn=Jn.left-wn.horizontal;const ki=Sn+vn.height,Wn=Hn+vn.width,ri=ownerWindow(resolveAnchorEl(Le)),ji=ri.innerHeight-_t,gi=ri.innerWidth-_t;if(_t!==null&&Sn<_t){const Gn=Sn-_t;Sn-=Gn,wn.vertical+=Gn}else if(_t!==null&&ki>ji){const Gn=ki-ji;Sn-=Gn,wn.vertical+=Gn}if(_t!==null&&Hn<_t){const Gn=Hn-_t;Hn-=Gn,wn.horizontal+=Gn}else if(Wn>gi){const Gn=Wn-gi;Hn-=Gn,wn.horizontal+=Gn}return{top:`${Math.round(Sn)}px`,left:`${Math.round(Hn)}px`,transformOrigin:getTransformOriginValue(wn)}},[Le,st,Ft,zt,_t]),[qt,Gt]=reactExports.useState(vt),Nt=reactExports.useCallback(()=>{const yn=kt.current;if(!yn)return;const vn=Ut(yn);vn.top!==null&&yn.style.setProperty("top",vn.top),vn.left!==null&&(yn.style.left=vn.left),yn.style.transformOrigin=vn.transformOrigin,Gt(!0)},[Ut]);reactExports.useEffect(()=>(Dt&&window.addEventListener("scroll",Nt),()=>window.removeEventListener("scroll",Nt)),[Le,Dt,Nt]);const jt=()=>{Nt()},Qt=()=>{Gt(!1)};reactExports.useEffect(()=>{vt&&Nt()}),reactExports.useImperativeHandle(pe,()=>vt?{updatePosition:()=>{Nt()}}:null,[vt,Nt]),reactExports.useEffect(()=>{if(!vt)return;const yn=debounce$1(()=>{Nt()}),vn=ownerWindow(resolveAnchorEl(Le));return vn.addEventListener("resize",yn),()=>{yn.clear(),vn.removeEventListener("resize",yn)}},[Le,vt,Nt]);let Kt=Mt;const Vt={slots:{transition:Ot,...St},slotProps:{transition:Bt,paper:Tt,...Rt}},[en,cn]=useSlot("transition",{elementType:Grow,externalForwardedProps:Vt,ownerState:Et,getSlotProps:yn=>({...yn,onEntering:(vn,wn)=>{var Jn;(Jn=yn.onEntering)==null||Jn.call(yn,vn,wn),jt()},onExited:vn=>{var wn;(wn=yn.onExited)==null||wn.call(yn,vn),Qt()}}),additionalProps:{appear:!0,in:vt}});Mt==="auto"&&!en.muiSupportAuto&&(Kt=void 0);const nn=gt||(Le?ownerDocument(resolveAnchorEl(Le)).body:void 0),[sn,{slots:un,slotProps:dn,...Rn}]=useSlot("root",{ref:t,elementType:PopoverRoot,externalForwardedProps:{...Vt,...$t},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:St.backdrop},slotProps:{backdrop:mergeSlotProps(typeof Rt.backdrop=="function"?Rt.backdrop(Et):Rt.backdrop,{invisible:!0})},container:nn,open:vt},ownerState:Et,className:clsx(At.root,mt)}),[_n,In]=useSlot("paper",{ref:kt,className:At.paper,elementType:PopoverPaper,externalForwardedProps:Vt,shouldForwardComponentProp:!0,additionalProps:{elevation:bt,style:qt?void 0:{opacity:0}},ownerState:Et});return jsxRuntimeExports.jsx(sn,{...Rn,...!isHostComponent(sn)&&{slots:un,slotProps:dn,disableScrollLock:Dt},children:jsxRuntimeExports.jsx(en,{...cn,timeout:Kt,children:jsxRuntimeExports.jsx(_n,{...In,children:ht})})})});function getMenuUtilityClass(me){return generateUtilityClass("MuiMenu",me)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$6=me=>{const{classes:u}=me;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,u)},MenuRoot=styled(Popover,{shouldForwardProp:me=>rootShouldForwardProp(me)||me==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(me,u)=>u.root})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(me,u)=>u.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List",overridesResolver:(me,u)=>u.list})({outline:0}),Menu=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiMenu"}),{autoFocus:pe=!0,children:Le,className:Ye,disableAutoFocusItem:tt=!1,MenuListProps:st={},onClose:ht,open:mt,PaperProps:gt={},PopoverClasses:bt,transitionDuration:_t="auto",TransitionProps:{onEntering:vt,...Tt}={},variant:St="selectedMenu",slots:Rt={},slotProps:Pt={},...Ot}=de,Mt=useRtl(),Bt={...de,autoFocus:pe,disableAutoFocusItem:tt,MenuListProps:st,onEntering:vt,PaperProps:gt,transitionDuration:_t,TransitionProps:Tt,variant:St},Dt=useUtilityClasses$6(Bt),$t=pe&&!tt&&mt,kt=reactExports.useRef(null),Et=(Kt,Vt)=>{kt.current&&kt.current.adjustStyleForScrollbar(Kt,{direction:Mt?"rtl":"ltr"}),vt&&vt(Kt,Vt)},At=Kt=>{Kt.key==="Tab"&&(Kt.preventDefault(),ht&&ht(Kt,"tabKeyDown"))};let Ft=-1;reactExports.Children.map(Le,(Kt,Vt)=>{reactExports.isValidElement(Kt)&&(Kt.props.disabled||(St==="selectedMenu"&&Kt.props.selected||Ft===-1)&&(Ft=Vt))});const zt={slots:Rt,slotProps:{list:st,transition:Tt,paper:gt,...Pt}},Ut=useSlotProps({elementType:Rt.root,externalSlotProps:Pt.root,ownerState:Bt,className:[Dt.root,Ye]}),[qt,Gt]=useSlot("paper",{className:Dt.paper,elementType:MenuPaper,externalForwardedProps:zt,shouldForwardComponentProp:!0,ownerState:Bt}),[Nt,jt]=useSlot("list",{className:clsx(Dt.list,st.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:zt,getSlotProps:Kt=>({...Kt,onKeyDown:Vt=>{var en;At(Vt),(en=Kt.onKeyDown)==null||en.call(Kt,Vt)}}),ownerState:Bt}),Qt=typeof zt.slotProps.transition=="function"?zt.slotProps.transition(Bt):zt.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:ht,anchorOrigin:{vertical:"bottom",horizontal:Mt?"right":"left"},transformOrigin:Mt?RTL_ORIGIN:LTR_ORIGIN,slots:{root:Rt.root,paper:qt,backdrop:Rt.backdrop,...Rt.transition&&{transition:Rt.transition}},slotProps:{root:Ut,paper:Gt,backdrop:typeof Pt.backdrop=="function"?Pt.backdrop(Bt):Pt.backdrop,transition:{...Qt,onEntering:(...Kt)=>{var Vt;Et(...Kt),(Vt=Qt==null?void 0:Qt.onEntering)==null||Vt.call(Qt,...Kt)}}},open:mt,ref:t,transitionDuration:_t,ownerState:Bt,...Ot,classes:bt,children:jsxRuntimeExports.jsx(Nt,{actions:kt,autoFocus:pe&&(Ft===-1||tt),autoFocusItem:$t,variant:St,...jt,children:Le})})});function getMenuItemUtilityClass(me){return generateUtilityClass("MuiMenuItem",me)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(me,u)=>{const{ownerState:t}=me;return[u.root,t.dense&&u.dense,t.divider&&u.divider,!t.disableGutters&&u.gutters]},useUtilityClasses$5=me=>{const{disabled:u,dense:t,divider:de,disableGutters:pe,selected:Le,classes:Ye}=me,st=composeClasses({root:["root",t&&"dense",u&&"disabled",!pe&&"gutters",de&&"divider",Le&&"selected"]},getMenuItemUtilityClass,Ye);return{...Ye,...st}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:me=>rootShouldForwardProp(me)||me==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:me})=>({...me.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(me.vars||me).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:me.vars?`rgba(${me.vars.palette.primary.mainChannel} / ${me.vars.palette.action.selectedOpacity})`:alpha(me.palette.primary.main,me.palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:me.vars?`rgba(${me.vars.palette.primary.mainChannel} / calc(${me.vars.palette.action.selectedOpacity} + ${me.vars.palette.action.focusOpacity}))`:alpha(me.palette.primary.main,me.palette.action.selectedOpacity+me.palette.action.focusOpacity)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:me.vars?`rgba(${me.vars.palette.primary.mainChannel} / calc(${me.vars.palette.action.selectedOpacity} + ${me.vars.palette.action.hoverOpacity}))`:alpha(me.palette.primary.main,me.palette.action.selectedOpacity+me.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:me.vars?`rgba(${me.vars.palette.primary.mainChannel} / ${me.vars.palette.action.selectedOpacity})`:alpha(me.palette.primary.main,me.palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(me.vars||me).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(me.vars||me).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:me.spacing(1),marginBottom:me.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:u})=>!u.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:u})=>u.divider,style:{borderBottom:`1px solid ${(me.vars||me).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:u})=>!u.dense,style:{[me.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:u})=>u.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...me.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiMenuItem"}),{autoFocus:pe=!1,component:Le="li",dense:Ye=!1,divider:tt=!1,disableGutters:st=!1,focusVisibleClassName:ht,role:mt="menuitem",tabIndex:gt,className:bt,..._t}=de,vt=reactExports.useContext(ListContext),Tt=reactExports.useMemo(()=>({dense:Ye||vt.dense||!1,disableGutters:st}),[vt.dense,Ye,st]),St=reactExports.useRef(null);useEnhancedEffect(()=>{pe&&St.current&&St.current.focus()},[pe]);const Rt={...de,dense:Tt.dense,divider:tt,disableGutters:st},Pt=useUtilityClasses$5(de),Ot=useForkRef(St,t);let Mt;return de.disabled||(Mt=gt!==void 0?gt:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:Tt,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:Ot,role:mt,tabIndex:Mt,component:Le,focusVisibleClassName:clsx(Pt.focusVisible,ht),className:clsx(Pt.root,bt),..._t,ownerState:Rt,classes:Pt})})});function getNativeSelectUtilityClasses(me){return generateUtilityClass("MuiNativeSelect",me)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$4=me=>{const{classes:u,variant:t,disabled:de,multiple:pe,open:Le,error:Ye}=me,tt={select:["select",t,de&&"disabled",pe&&"multiple",Ye&&"error"],icon:["icon",`icon${capitalize(t)}`,Le&&"iconOpen",de&&"disabled"]};return composeClasses(tt,getNativeSelectUtilityClasses,u)},StyledSelectSelect=styled("select")(({theme:me})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(me.vars||me).palette.background.paper},variants:[{props:({ownerState:u})=>u.variant!=="filled"&&u.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(me.vars||me).shape.borderRadius,"&:focus":{borderRadius:(me.vars||me).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.select,u[t.variant],t.error&&u.error,{[`&.${nativeSelectClasses.multiple}`]:u.multiple}]}})({}),StyledSelectIcon=styled("svg")(({theme:me})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(me.vars||me).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(me.vars||me).palette.action.disabled},variants:[{props:({ownerState:u})=>u.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.icon,t.variant&&u[`icon${capitalize(t.variant)}`],t.open&&u.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(u,t){const{className:de,disabled:pe,error:Le,IconComponent:Ye,inputRef:tt,variant:st="standard",...ht}=u,mt={...u,disabled:pe,variant:st,error:Le},gt=useUtilityClasses$4(mt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:mt,className:clsx(gt.select,de),disabled:pe,ref:tt||t,...ht}),u.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:Ye,ownerState:mt,className:gt.icon})]})});var _span$1;const NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:me})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:u})=>!u.withLabel,style:{padding:0,lineHeight:"11px",transition:me.transitions.create("width",{duration:150,easing:me.transitions.easing.easeOut})}},{props:({ownerState:u})=>u.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:me.transitions.create("max-width",{duration:50,easing:me.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:u})=>u.withLabel&&u.notched,style:{maxWidth:"100%",transition:me.transitions.create("max-width",{duration:100,easing:me.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(me){const{children:u,classes:t,className:de,label:pe,notched:Le,...Ye}=me,tt=pe!=null&&pe!=="",st={...me,notched:Le,withLabel:tt};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:de,ownerState:st,...Ye,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:st,children:tt?jsxRuntimeExports.jsx("span",{children:pe}):_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const useUtilityClasses$3=me=>{const{classes:u}=me,de=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,u);return{...u,...de}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:me=>rootShouldForwardProp(me)||me==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:me})=>{const u=me.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(me.vars||me).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(me.vars||me).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:me.vars?`rgba(${me.vars.palette.common.onBackgroundChannel} / 0.23)`:u}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(me.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(me.vars||me).palette[t].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(me.vars||me).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(me.vars||me).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:de})=>t.multiline&&de==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(me,u)=>u.notchedOutline})(memoTheme(({theme:me})=>{const u=me.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:me.vars?`rgba(${me.vars.palette.common.onBackgroundChannel} / 0.23)`:u}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:me})=>({padding:"16.5px 14px",...!me.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:me.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:me.palette.mode==="light"?null:"#fff",caretColor:me.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...me.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[me.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:u})=>u.multiline,style:{padding:0}},{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:0}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(u,t){var de;const pe=useDefaultProps({props:u,name:"MuiOutlinedInput"}),{components:Le={},fullWidth:Ye=!1,inputComponent:tt="input",label:st,multiline:ht=!1,notched:mt,slots:gt={},type:bt="text",..._t}=pe,vt=useUtilityClasses$3(pe),Tt=useFormControl(),St=formControlState({props:pe,muiFormControl:Tt,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),Rt={...pe,color:St.color||"primary",disabled:St.disabled,error:St.error,focused:St.focused,formControl:Tt,fullWidth:Ye,hiddenLabel:St.hiddenLabel,multiline:ht,size:St.size,type:bt},Pt=gt.root??Le.Root??OutlinedInputRoot,Ot=gt.input??Le.Input??OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:Pt,input:Ot},renderSuffix:Mt=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:Rt,className:vt.notchedOutline,label:st!=null&&st!==""&&St.required?de||(de=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[st,"","*"]})):st,notched:typeof mt<"u"?mt:!!(Mt.startAdornment||Mt.filled||Mt.focused)}),fullWidth:Ye,inputComponent:tt,multiline:ht,ref:t,type:bt,..._t,classes:{...vt,notchedOutline:null}})});OutlinedInput.muiName="Input";function getSelectUtilityClasses(me){return generateUtilityClass("MuiSelect",me)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[{[`&.${selectClasses.select}`]:u.select},{[`&.${selectClasses.select}`]:u[t.variant]},{[`&.${selectClasses.error}`]:u.error},{[`&.${selectClasses.multiple}`]:u.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.icon,t.variant&&u[`icon${capitalize(t.variant)}`],t.open&&u.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:me=>slotShouldForwardProp(me)&&me!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(me,u)=>u.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(me,u){return typeof u=="object"&&u!==null?me===u:String(me)===String(u)}function isEmpty$3(me){return me==null||typeof me=="string"&&!me.trim()}const useUtilityClasses$2=me=>{const{classes:u,variant:t,disabled:de,multiple:pe,open:Le,error:Ye}=me,tt={select:["select",t,de&&"disabled",pe&&"multiple",Ye&&"error"],icon:["icon",`icon${capitalize(t)}`,Le&&"iconOpen",de&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(tt,getSelectUtilityClasses,u)},SelectInput=reactExports.forwardRef(function(u,t){var Gs;const{"aria-describedby":de,"aria-label":pe,autoFocus:Le,autoWidth:Ye,children:tt,className:st,defaultOpen:ht,defaultValue:mt,disabled:gt,displayEmpty:bt,error:_t=!1,IconComponent:vt,inputRef:Tt,labelId:St,MenuProps:Rt={},multiple:Pt,name:Ot,onBlur:Mt,onChange:Bt,onClose:Dt,onFocus:$t,onOpen:kt,open:Et,readOnly:At,renderValue:Ft,required:zt,SelectDisplayProps:Ut={},tabIndex:qt,type:Gt,value:Nt,variant:jt="standard",...Qt}=u,[Kt,Vt]=useControlled({controlled:Nt,default:mt,name:"Select"}),[en,cn]=useControlled({controlled:Et,default:ht,name:"Select"}),nn=reactExports.useRef(null),sn=reactExports.useRef(null),[un,dn]=reactExports.useState(null),{current:Rn}=reactExports.useRef(Et!=null),[_n,In]=reactExports.useState(),yn=useForkRef(t,Tt),vn=reactExports.useCallback(mn=>{sn.current=mn,mn&&dn(mn)},[]),wn=un==null?void 0:un.parentNode;reactExports.useImperativeHandle(yn,()=>({focus:()=>{sn.current.focus()},node:nn.current,value:Kt}),[Kt]),reactExports.useEffect(()=>{ht&&en&&un&&!Rn&&(In(Ye?null:wn.clientWidth),sn.current.focus())},[un,Ye]),reactExports.useEffect(()=>{Le&&sn.current.focus()},[Le]),reactExports.useEffect(()=>{if(!St)return;const mn=ownerDocument(sn.current).getElementById(St);if(mn){const Bn=()=>{getSelection().isCollapsed&&sn.current.focus()};return mn.addEventListener("click",Bn),()=>{mn.removeEventListener("click",Bn)}}},[St]);const Jn=(mn,Bn)=>{mn?kt&&kt(Bn):Dt&&Dt(Bn),Rn||(In(Ye?null:wn.clientWidth),cn(mn))},Sn=mn=>{mn.button===0&&(mn.preventDefault(),sn.current.focus(),Jn(!0,mn))},Hn=mn=>{Jn(!1,mn)},ki=reactExports.Children.toArray(tt),Wn=mn=>{const Bn=ki.find(qn=>qn.props.value===mn.target.value);Bn!==void 0&&(Vt(Bn.props.value),Bt&&Bt(mn,Bn))},ri=mn=>Bn=>{let qn;if(Bn.currentTarget.hasAttribute("tabindex")){if(Pt){qn=Array.isArray(Kt)?Kt.slice():[];const Cs=Kt.indexOf(mn.props.value);Cs===-1?qn.push(mn.props.value):qn.splice(Cs,1)}else qn=mn.props.value;if(mn.props.onClick&&mn.props.onClick(Bn),Kt!==qn&&(Vt(qn),Bt)){const Cs=Bn.nativeEvent||Bn,er=new Cs.constructor(Cs.type,Cs);Object.defineProperty(er,"target",{writable:!0,value:{value:qn,name:Ot}}),Bt(er,mn)}Pt||Jn(!1,Bn)}},ji=mn=>{At||[" ","ArrowUp","ArrowDown","Enter"].includes(mn.key)&&(mn.preventDefault(),Jn(!0,mn))},gi=un!==null&&en,Gn=mn=>{!gi&&Mt&&(Object.defineProperty(mn,"target",{writable:!0,value:{value:Kt,name:Ot}}),Mt(mn))};delete Qt["aria-invalid"];let pn,is;const pi=[];let _s=!1;(isFilled({value:Kt})||bt)&&(Ft?pn=Ft(Kt):_s=!0);const qi=ki.map(mn=>{if(!reactExports.isValidElement(mn))return null;let Bn;if(Pt){if(!Array.isArray(Kt))throw new Error(formatMuiErrorMessage(2));Bn=Kt.some(qn=>areEqualValues(qn,mn.props.value)),Bn&&_s&&pi.push(mn.props.children)}else Bn=areEqualValues(Kt,mn.props.value),Bn&&_s&&(is=mn.props.children);return reactExports.cloneElement(mn,{"aria-selected":Bn?"true":"false",onClick:ri(mn),onKeyUp:qn=>{qn.key===" "&&qn.preventDefault(),mn.props.onKeyUp&&mn.props.onKeyUp(qn)},role:"option",selected:Bn,value:void 0,"data-value":mn.props.value})});_s&&(Pt?pi.length===0?pn=null:pn=pi.reduce((mn,Bn,qn)=>(mn.push(Bn),qn<pi.length-1&&mn.push(", "),mn),[]):pn=is);let ii=_n;!Ye&&Rn&&un&&(ii=wn.clientWidth);let wi;typeof qt<"u"?wi=qt:wi=gt?null:0;const ei=Ut.id||(Ot?`mui-component-select-${Ot}`:void 0),ss={...u,variant:jt,value:Kt,open:gi,error:_t},Un=useUtilityClasses$2(ss),vs={...Rt.PaperProps,...(Gs=Rt.slotProps)==null?void 0:Gs.paper},Xi=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:vn,tabIndex:wi,role:"combobox","aria-controls":gi?Xi:void 0,"aria-disabled":gt?"true":void 0,"aria-expanded":gi?"true":"false","aria-haspopup":"listbox","aria-label":pe,"aria-labelledby":[St,ei].filter(Boolean).join(" ")||void 0,"aria-describedby":de,"aria-required":zt?"true":void 0,"aria-invalid":_t?"true":void 0,onKeyDown:ji,onMouseDown:gt||At?null:Sn,onBlur:Gn,onFocus:$t,...Ut,ownerState:ss,className:clsx(Ut.className,Un.select,st),id:ei,children:isEmpty$3(pn)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):pn}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":_t,value:Array.isArray(Kt)?Kt.join(","):Kt,name:Ot,ref:nn,"aria-hidden":!0,onChange:Wn,tabIndex:-1,disabled:gt,className:Un.nativeInput,autoFocus:Le,required:zt,...Qt,ownerState:ss}),jsxRuntimeExports.jsx(SelectIcon,{as:vt,className:Un.icon,ownerState:ss}),jsxRuntimeExports.jsx(Menu,{id:`menu-${Ot||""}`,anchorEl:wn,open:gi,onClose:Hn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...Rt,slotProps:{...Rt.slotProps,list:{"aria-labelledby":St,role:"listbox","aria-multiselectable":Pt?"true":void 0,disableListWrap:!0,id:Xi,...Rt.MenuListProps},paper:{...vs,style:{minWidth:ii,...vs!=null?vs.style:null}}},children:qi})]})}),useUtilityClasses$1=me=>{const{classes:u}=me,de=composeClasses({root:["root"]},getSelectUtilityClasses,u);return{...u,...de}},styledRootConfig={name:"MuiSelect",overridesResolver:(me,u)=>u.root,shouldForwardProp:me=>rootShouldForwardProp(me)&&me!=="variant",slot:"Root"},StyledInput=styled(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(u,t){const de=useDefaultProps({name:"MuiSelect",props:u}),{autoWidth:pe=!1,children:Le,classes:Ye={},className:tt,defaultOpen:st=!1,displayEmpty:ht=!1,IconComponent:mt=ArrowDropDownIcon,id:gt,input:bt,inputProps:_t,label:vt,labelId:Tt,MenuProps:St,multiple:Rt=!1,native:Pt=!1,onClose:Ot,onOpen:Mt,open:Bt,renderValue:Dt,SelectDisplayProps:$t,variant:kt="outlined",...Et}=de,At=Pt?NativeSelectInput:SelectInput,Ft=useFormControl(),zt=formControlState({props:de,muiFormControl:Ft,states:["variant","error"]}),Ut=zt.variant||kt,qt={...de,variant:Ut,classes:Ye},Gt=useUtilityClasses$1(qt),{root:Nt,...jt}=Gt,Qt=bt||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:qt}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:vt,ownerState:qt}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:qt})}[Ut],Kt=useForkRef(t,getReactElementRef(Qt));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Qt,{inputComponent:At,inputProps:{children:Le,error:zt.error,IconComponent:mt,variant:Ut,type:void 0,multiple:Rt,...Pt?{id:gt}:{autoWidth:pe,defaultOpen:st,displayEmpty:ht,labelId:Tt,MenuProps:St,onClose:Ot,onOpen:Mt,open:Bt,renderValue:Dt,SelectDisplayProps:{id:gt,...$t}},..._t,classes:_t?deepmerge(jt,_t.classes):jt,...bt?bt.props.inputProps:{}},...(Rt&&Pt||ht)&&Ut==="outlined"?{notched:!0}:{},ref:Kt,className:clsx(Qt.props.className,tt,Gt.root),...!bt&&{variant:Ut},...Et})})});Select.muiName="Select";function getToolbarUtilityClass(me){return generateUtilityClass("MuiToolbar",me)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses=me=>{const{classes:u,disableGutters:t,variant:de}=me;return composeClasses({root:["root",!t&&"gutters",de]},getToolbarUtilityClass,u)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(me,u)=>{const{ownerState:t}=me;return[u.root,!t.disableGutters&&u.gutters,u[t.variant]]}})(memoTheme(({theme:me})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:u})=>!u.disableGutters,style:{paddingLeft:me.spacing(2),paddingRight:me.spacing(2),[me.breakpoints.up("sm")]:{paddingLeft:me.spacing(3),paddingRight:me.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:me.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function(u,t){const de=useDefaultProps({props:u,name:"MuiToolbar"}),{className:pe,component:Le="div",disableGutters:Ye=!1,variant:tt="regular",...st}=de,ht={...de,component:Le,disableGutters:Ye,variant:tt},mt=useUtilityClasses(ht);return jsxRuntimeExports.jsx(ToolbarRoot,{as:Le,className:clsx(mt.root,pe),ref:t,ownerState:ht,...st})}),NovartisIcon="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20295.44%2048.31'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:url(%23linear-gradient);}.cls-2{fill:%230460a9;}%3c/style%3e%3clinearGradient%20id='linear-gradient'%20x1='56.72'%20y1='64.98'%20x2='99.51'%20y2='64.98'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.3'%20stop-color='%23e74a21'/%3e%3cstop%20offset='0.7'%20stop-color='%23ec9a1e'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle%3enovartis_logo_pos_rgb%3c/title%3e%3cg%20id='_Group_'%20data-name='&lt;Group&gt;'%3e%3cpath%20id='_Path_'%20data-name='&lt;Path&gt;'%20class='cls-1'%20d='M86.27,60.09l-.12.31c2,.88,6.49,4.37,6.49,11.4,0,6.62-5.58,13.29-14.35,13.29-10.91,0-14.67-6.38-14.67-12.24,0-7.51,5.25-12.51,5.25-19.35a10.69,10.69,0,0,0-8.42-10.32l-.18.31a8.86,8.86,0,0,1,2.69,6.41c0,7.39-6.23,12.64-6.23,21.12,0,7.81,5.46,15.77,21.27,15.77,14.09,0,21.52-6.9,21.52-14.24C99.51,66.25,95,60.92,86.27,60.09Z'%20transform='translate(-56.72%20-38.48)'/%3e%3cpath%20id='_Compound_Path_'%20data-name='&lt;Compound%20Path&gt;'%20class='cls-2'%20d='M148.17,85.53,129.44,61.38V83.15l3.82.91v1h-8.71v-1l3.12-.91V59.43A6.66,6.66,0,0,0,125,57.91c-.38-.08-.89-.17-.89-.17v-1h7.39l16,20.8V58.67l-3.82-.92v-1h8.71v1l-3.12.92V80.26c0,2,.14,4.91.17,5.28Zm39.16-15.38c0,10-7,15.8-14.65,15.8S158,80.07,158,70.93s7-15.08,14.61-15.08A14.25,14.25,0,0,1,187.33,70.16Zm-4.87,1.5c0-7.35-4.4-14.48-10.38-14.48-6.36,0-9.23,6.15-9.23,12.73s3.63,14.74,10.46,14.74C179.73,84.64,182.46,78.14,182.46,71.65Zm10.92-13-3-.92v-1h11.49v1l-3.6.92,7.93,21.62h0l7.93-21.62-3.6-.92v-1h8.5v1l-3,.92L206.1,85.6h-2.54ZM261.28,70.6h-1.82V58.22c6,0,9.57,1.38,9.57,6.28C269,68.14,265.88,70.6,261.28,70.6Zm51.41,13.46,4-.91V58.66l-4-.92v-1h12.47v1l-4,.92V83.15l4,.91v1H312.69Zm20.11-6.78h.79l2.65,6.1a11.87,11.87,0,0,0,5.07,1.26c3.44,0,6.58-2,6.58-5.58,0-2.72-1.76-4.34-4.61-5.83l-2.82-1.46c-3.37-1.75-6.74-4.23-6.74-8.22,0-4.34,3-7.69,9.42-7.69a22.14,22.14,0,0,1,6.64,1.09l.67,6.56h-.85l-2.45-5.26A8.51,8.51,0,0,0,343,57.17c-3.25,0-5.46,2-5.46,4.77,0,2.51,1.67,4.09,4.53,5.57l3.34,1.74c4.56,2.36,6.72,4.55,6.72,8.6,0,5-4.69,8.11-10.52,8.11a25.1,25.1,0,0,1-8.09-1.21Zm-115.6,6.78,3.21-.91,9.91-26.43,3.31-.85,10.23,27.27,3.21.92v1H234.93v-1l4.11-.92-2.9-7.84h-10.9l-2.88,7.84,4.11.91v1h-9.27ZM226,73.21h9.43l-4.68-12.64h0Zm41-2c1-.25,6.61-1.68,6.61-7,0-4.27-3.27-7.58-11.33-7.58-5,0-10,.11-10.63.13v1l3.29.92V83.14l-3.29.92v1h11.64v-1l-3.82-.92V72.08h3.29l8.41,13h7.45v-1l-3.77-1Zm24.58-13V83.15l-4,.91v1h12.47v-1l-4-.91V58.22h6.73L305,63h.86l-.64-6.23H282.41L281.77,63h.86l2.2-4.73Zm-213.39,18,4-37.79h-8.3l4,37.79Z'%20transform='translate(-56.72%20-38.48)'/%3e%3c/g%3e%3c/svg%3e";var __assign=function(){return __assign=Object.assign||function(u){for(var t,de=1,pe=arguments.length;de<pe;de++){t=arguments[de];for(var Le in t)Object.prototype.hasOwnProperty.call(t,Le)&&(u[Le]=t[Le])}return u},__assign.apply(this,arguments)};function __spreadArray(me,u,t){if(t||arguments.length===2)for(var de=0,pe=u.length,Le;de<pe;de++)(Le||!(de in u))&&(Le||(Le=Array.prototype.slice.call(u,0,de)),Le[de]=u[de]);return me.concat(Le||Array.prototype.slice.call(u))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(me,u){return charat(me,0)^45?(((u<<2^charat(me,0))<<2^charat(me,1))<<2^charat(me,2))<<2^charat(me,3):0}function trim$1(me){return me.trim()}function match(me,u){return(me=u.exec(me))?me[0]:me}function replace(me,u,t){return me.replace(u,t)}function indexof(me,u,t){return me.indexOf(u,t)}function charat(me,u){return me.charCodeAt(u)|0}function substr(me,u,t){return me.slice(u,t)}function strlen(me){return me.length}function sizeof(me){return me.length}function append(me,u){return u.push(me),me}function combine(me,u){return me.map(u).join("")}function filter(me,u){return me.filter(function(t){return!match(t,u)})}var line=1,column=1,length$1=0,position=0,character=0,characters="";function node(me,u,t,de,pe,Le,Ye,tt){return{value:me,root:u,parent:t,type:de,props:pe,children:Le,line,column,length:Ye,return:"",siblings:tt}}function copy(me,u){return assign(node("",null,null,"",null,null,0,me.siblings),me,{length:-me.length},u)}function lift(me){for(;me.root;)me=copy(me.root,{children:[me]});append(me,me.siblings)}function char(){return character}function prev$1(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length$1?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(me,u){return substr(characters,me,u)}function token(me){switch(me){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(me){return line=column=1,length$1=strlen(characters=me),position=0,[]}function dealloc(me){return characters="",me}function delimit(me){return trim$1(slice(position-1,delimiter(me===91?me+2:me===40?me+1:me)))}function whitespace(me){for(;(character=peek())&&character<33;)next();return token(me)>2||token(character)>3?"":" "}function escaping(me,u){for(;--u&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(me,caret()+(u<6&&peek()==32&&next()==32))}function delimiter(me){for(;next();)switch(character){case me:return position;case 34:case 39:me!==34&&me!==39&&delimiter(character);break;case 40:me===41&&delimiter(me);break;case 92:next();break}return position}function commenter(me,u){for(;next()&&me+character!==57;)if(me+character===84&&peek()===47)break;return"/*"+slice(u,position-1)+"*"+from(me===47?me:next())}function identifier(me){for(;!token(peek());)next();return slice(me,position)}function compile(me){return dealloc(parse$2("",null,null,null,[""],me=alloc(me),0,[0],me))}function parse$2(me,u,t,de,pe,Le,Ye,tt,st){for(var ht=0,mt=0,gt=Ye,bt=0,_t=0,vt=0,Tt=1,St=1,Rt=1,Pt=0,Ot="",Mt=pe,Bt=Le,Dt=de,$t=Ot;St;)switch(vt=Pt,Pt=next()){case 40:if(vt!=108&&charat($t,gt-1)==58){indexof($t+=replace(delimit(Pt),"&","&\f"),"&\f",abs(ht?tt[ht-1]:0))!=-1&&(Rt=-1);break}case 34:case 39:case 91:$t+=delimit(Pt);break;case 9:case 10:case 13:case 32:$t+=whitespace(vt);break;case 92:$t+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),u,t,st),st);break;default:$t+="/"}break;case 123*Tt:tt[ht++]=strlen($t)*Rt;case 125*Tt:case 59:case 0:switch(Pt){case 0:case 125:St=0;case 59+mt:Rt==-1&&($t=replace($t,/\f/g,"")),_t>0&&strlen($t)-gt&&append(_t>32?declaration($t+";",de,t,gt-1,st):declaration(replace($t," ","")+";",de,t,gt-2,st),st);break;case 59:$t+=";";default:if(append(Dt=ruleset($t,u,t,ht,mt,pe,tt,Ot,Mt=[],Bt=[],gt,Le),Le),Pt===123)if(mt===0)parse$2($t,u,Dt,Dt,Mt,Le,gt,tt,Bt);else switch(bt===99&&charat($t,3)===110?100:bt){case 100:case 108:case 109:case 115:parse$2(me,Dt,Dt,de&&append(ruleset(me,Dt,Dt,0,0,pe,tt,Ot,pe,Mt=[],gt,Bt),Bt),pe,Bt,gt,tt,de?Mt:Bt);break;default:parse$2($t,Dt,Dt,Dt,[""],Bt,0,tt,Bt)}}ht=mt=_t=0,Tt=Rt=1,Ot=$t="",gt=Ye;break;case 58:gt=1+strlen($t),_t=vt;default:if(Tt<1){if(Pt==123)--Tt;else if(Pt==125&&Tt++==0&&prev$1()==125)continue}switch($t+=from(Pt),Pt*Tt){case 38:Rt=mt>0?1:($t+="\f",-1);break;case 44:tt[ht++]=(strlen($t)-1)*Rt,Rt=1;break;case 64:peek()===45&&($t+=delimit(next())),bt=peek(),mt=gt=strlen(Ot=$t+=identifier(caret())),Pt++;break;case 45:vt===45&&strlen($t)==2&&(Tt=0)}}return Le}function ruleset(me,u,t,de,pe,Le,Ye,tt,st,ht,mt,gt){for(var bt=pe-1,_t=pe===0?Le:[""],vt=sizeof(_t),Tt=0,St=0,Rt=0;Tt<de;++Tt)for(var Pt=0,Ot=substr(me,bt+1,bt=abs(St=Ye[Tt])),Mt=me;Pt<vt;++Pt)(Mt=trim$1(St>0?_t[Pt]+" "+Ot:replace(Ot,/&\f/g,_t[Pt])))&&(st[Rt++]=Mt);return node(me,u,t,pe===0?RULESET:tt,st,ht,mt,gt)}function comment(me,u,t,de){return node(me,u,t,COMMENT,from(char()),substr(me,2,-2),0,de)}function declaration(me,u,t,de,pe){return node(me,u,t,DECLARATION,substr(me,0,de),substr(me,de+1,-1),de,pe)}function prefix(me,u,t){switch(hash(me,u)){case 5103:return WEBKIT+"print-"+me+me;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+me+me;case 4789:return MOZ+me+me;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+me+MOZ+me+MS+me+me;case 5936:switch(charat(me,u+11)){case 114:return WEBKIT+me+MS+replace(me,/[svh]\w+-[tblr]{2}/,"tb")+me;case 108:return WEBKIT+me+MS+replace(me,/[svh]\w+-[tblr]{2}/,"tb-rl")+me;case 45:return WEBKIT+me+MS+replace(me,/[svh]\w+-[tblr]{2}/,"lr")+me}case 6828:case 4268:case 2903:return WEBKIT+me+MS+me+me;case 6165:return WEBKIT+me+MS+"flex-"+me+me;case 5187:return WEBKIT+me+replace(me,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+me;case 5443:return WEBKIT+me+MS+"flex-item-"+replace(me,/flex-|-self/g,"")+(match(me,/flex-|baseline/)?"":MS+"grid-row-"+replace(me,/flex-|-self/g,""))+me;case 4675:return WEBKIT+me+MS+"flex-line-pack"+replace(me,/align-content|flex-|-self/g,"")+me;case 5548:return WEBKIT+me+MS+replace(me,"shrink","negative")+me;case 5292:return WEBKIT+me+MS+replace(me,"basis","preferred-size")+me;case 6060:return WEBKIT+"box-"+replace(me,"-grow","")+WEBKIT+me+MS+replace(me,"grow","positive")+me;case 4554:return WEBKIT+replace(me,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+me;case 6187:return replace(replace(replace(me,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),me,"")+me;case 5495:case 3959:return replace(me,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(me,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+me+me;case 4200:if(!match(me,/flex-|baseline/))return MS+"grid-column-align"+substr(me,u)+me;break;case 2592:case 3360:return MS+replace(me,"template-","")+me;case 4384:case 3616:return t&&t.some(function(de,pe){return u=pe,match(de.props,/grid-\w+-end/)})?~indexof(me+(t=t[u].value),"span",0)?me:MS+replace(me,"-start","")+me+MS+"grid-row-span:"+(~indexof(t,"span",0)?match(t,/\d+/):+match(t,/\d+/)-+match(me,/\d+/))+";":MS+replace(me,"-start","")+me;case 4896:case 4128:return t&&t.some(function(de){return match(de.props,/grid-\w+-start/)})?me:MS+replace(replace(me,"-end","-span"),"span ","")+me;case 4095:case 3583:case 4068:case 2532:return replace(me,/(.+)-inline(.+)/,WEBKIT+"$1$2")+me;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(me)-1-u>6)switch(charat(me,u+1)){case 109:if(charat(me,u+4)!==45)break;case 102:return replace(me,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(me,u+3)==108?"$3":"$2-$3"))+me;case 115:return~indexof(me,"stretch",0)?prefix(replace(me,"stretch","fill-available"),u,t)+me:me}break;case 5152:case 5920:return replace(me,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(de,pe,Le,Ye,tt,st,ht){return MS+pe+":"+Le+ht+(Ye?MS+pe+"-span:"+(tt?st:+st-+Le)+ht:"")+me});case 4949:if(charat(me,u+6)===121)return replace(me,":",":"+WEBKIT)+me;break;case 6444:switch(charat(me,charat(me,14)===45?18:11)){case 120:return replace(me,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(me,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+me;case 100:return replace(me,":",":"+MS)+me}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(me,"scroll-","scroll-snap-")+me}return me}function serialize(me,u){for(var t="",de=0;de<me.length;de++)t+=u(me[de],de,me,u)||"";return t}function stringify(me,u,t,de){switch(me.type){case LAYER:if(me.children.length)break;case IMPORT:case DECLARATION:return me.return=me.return||me.value;case COMMENT:return"";case KEYFRAMES:return me.return=me.value+"{"+serialize(me.children,de)+"}";case RULESET:if(!strlen(me.value=me.props.join(",")))return""}return strlen(t=serialize(me.children,de))?me.return=me.value+"{"+t+"}":""}function middleware(me){var u=sizeof(me);return function(t,de,pe,Le){for(var Ye="",tt=0;tt<u;tt++)Ye+=me[tt](t,de,pe,Le)||"";return Ye}}function rulesheet(me){return function(u){u.root||(u=u.return)&&me(u)}}function prefixer(me,u,t,de){if(me.length>-1&&!me.return)switch(me.type){case DECLARATION:me.return=prefix(me.value,me.length,t);return;case KEYFRAMES:return serialize([copy(me,{value:replace(me.value,"@","@"+WEBKIT)})],de);case RULESET:if(me.length)return combine(t=me.props,function(pe){switch(match(pe,de=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(me,{props:[replace(pe,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(me,{props:[pe]})),assign(me,{props:filter(t,de)});break;case"::placeholder":lift(copy(me,{props:[replace(pe,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(me,{props:[replace(pe,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(me,{props:[replace(pe,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(me,{props:[pe]})),assign(me,{props:filter(t,de)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f$2=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m$5="active",y$2="data-styled-version",v$1="6.1.17",g$1=`/*!sc*/
`,S$2=typeof window<"u"&&"HTMLElement"in window,w$1=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_$2=Object.freeze([]),C$2=Object.freeze({});function I$1(me,u,t){return t===void 0&&(t=C$2),me.theme!==t.theme&&me.theme||u||t.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O$2=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(me){return me.replace(O$2,"-").replace(D,"")}var T=/(a)(d)/gi,k$1=52,j$1=function(me){return String.fromCharCode(me+(me>25?39:97))};function x$2(me){var u,t="";for(u=Math.abs(me);u>k$1;u=u/k$1|0)t=j$1(u%k$1)+t;return(j$1(u%k$1)+t).replace(T,"$1-$2")}var V,F$1=5381,M$1=function(me,u){for(var t=u.length;t;)me=33*me^u.charCodeAt(--t);return me},z$1=function(me){return M$1(F$1,me)};function $(me){return x$2(z$1(me)>>>0)}function B$1(me){return me.displayName||me.name||"Component"}function L$1(me){return typeof me=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q$1={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(me){return("type"in(u=me)&&u.type.$$typeof)===Y?U:"$$typeof"in me?J[me.$$typeof]:q$1;var u}var Z=Object.defineProperty,K$2=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(me,u,t){if(typeof u!="string"){if(ne){var de=te(u);de&&de!==ne&&oe(me,de,t)}var pe=K$2(u);Q&&(pe=pe.concat(Q(u)));for(var Le=X(me),Ye=X(u),tt=0;tt<pe.length;++tt){var st=pe[tt];if(!(st in H||t&&t[st]||Ye&&st in Ye||Le&&st in Le)){var ht=ee(u,st);try{Z(me,st,ht)}catch{}}}}return me}function re$1(me){return typeof me=="function"}function se(me){return typeof me=="object"&&"styledComponentId"in me}function ie(me,u){return me&&u?"".concat(me," ").concat(u):me||u||""}function ae(me,u){if(me.length===0)return"";for(var t=me[0],de=1;de<me.length;de++)t+=me[de];return t}function ce(me){return me!==null&&typeof me=="object"&&me.constructor.name===Object.name&&!("props"in me&&me.$$typeof)}function le(me,u,t){if(t===void 0&&(t=!1),!t&&!ce(me)&&!Array.isArray(me))return u;if(Array.isArray(u))for(var de=0;de<u.length;de++)me[de]=le(me[de],u[de]);else if(ce(u))for(var de in u)me[de]=le(me[de],u[de]);return me}function ue(me,u){Object.defineProperty(me,"toString",{value:u})}function he(me){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(me," for more information.").concat(u.length>0?" Args: ".concat(u.join(", ")):""))}var fe=function(){function me(u){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=u}return me.prototype.indexOfGroup=function(u){for(var t=0,de=0;de<u;de++)t+=this.groupSizes[de];return t},me.prototype.insertRules=function(u,t){if(u>=this.groupSizes.length){for(var de=this.groupSizes,pe=de.length,Le=pe;u>=Le;)if((Le<<=1)<0)throw he(16,"".concat(u));this.groupSizes=new Uint32Array(Le),this.groupSizes.set(de),this.length=Le;for(var Ye=pe;Ye<Le;Ye++)this.groupSizes[Ye]=0}for(var tt=this.indexOfGroup(u+1),st=(Ye=0,t.length);Ye<st;Ye++)this.tag.insertRule(tt,t[Ye])&&(this.groupSizes[u]++,tt++)},me.prototype.clearGroup=function(u){if(u<this.length){var t=this.groupSizes[u],de=this.indexOfGroup(u),pe=de+t;this.groupSizes[u]=0;for(var Le=de;Le<pe;Le++)this.tag.deleteRule(de)}},me.prototype.getGroup=function(u){var t="";if(u>=this.length||this.groupSizes[u]===0)return t;for(var de=this.groupSizes[u],pe=this.indexOfGroup(u),Le=pe+de,Ye=pe;Ye<Le;Ye++)t+="".concat(this.tag.getRule(Ye)).concat(g$1);return t},me}(),ye=new Map,ve=new Map,ge=1,Se=function(me){if(ye.has(me))return ye.get(me);for(;ve.has(ge);)ge++;var u=ge++;return ye.set(me,u),ve.set(u,me),u},we=function(me,u){ge=u+1,ye.set(me,u),ve.set(u,me)},be="style[".concat(f$2,"][").concat(y$2,'="').concat(v$1,'"]'),Ee=new RegExp("^".concat(f$2,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(me,u,t){for(var de,pe=t.split(","),Le=0,Ye=pe.length;Le<Ye;Le++)(de=pe[Le])&&me.registerName(u,de)},Pe=function(me,u){for(var t,de=((t=u.textContent)!==null&&t!==void 0?t:"").split(g$1),pe=[],Le=0,Ye=de.length;Le<Ye;Le++){var tt=de[Le].trim();if(tt){var st=tt.match(Ee);if(st){var ht=0|parseInt(st[1],10),mt=st[2];ht!==0&&(we(mt,ht),Ne(me,mt,st[3]),me.getTag().insertRules(ht,pe)),pe.length=0}else pe.push(tt)}}},_e=function(me){for(var u=document.querySelectorAll(be),t=0,de=u.length;t<de;t++){var pe=u[t];pe&&pe.getAttribute(f$2)!==m$5&&(Pe(me,pe),pe.parentNode&&pe.parentNode.removeChild(pe))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(me){var u=document.head,t=me||u,de=document.createElement("style"),pe=function(tt){var st=Array.from(tt.querySelectorAll("style[".concat(f$2,"]")));return st[st.length-1]}(t),Le=pe!==void 0?pe.nextSibling:null;de.setAttribute(f$2,m$5),de.setAttribute(y$2,v$1);var Ye=Ce();return Ye&&de.setAttribute("nonce",Ye),t.insertBefore(de,Le),de},Ae=function(){function me(u){this.element=Ie(u),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var de=document.styleSheets,pe=0,Le=de.length;pe<Le;pe++){var Ye=de[pe];if(Ye.ownerNode===t)return Ye}throw he(17)}(this.element),this.length=0}return me.prototype.insertRule=function(u,t){try{return this.sheet.insertRule(t,u),this.length++,!0}catch{return!1}},me.prototype.deleteRule=function(u){this.sheet.deleteRule(u),this.length--},me.prototype.getRule=function(u){var t=this.sheet.cssRules[u];return t&&t.cssText?t.cssText:""},me}(),Oe=function(){function me(u){this.element=Ie(u),this.nodes=this.element.childNodes,this.length=0}return me.prototype.insertRule=function(u,t){if(u<=this.length&&u>=0){var de=document.createTextNode(t);return this.element.insertBefore(de,this.nodes[u]||null),this.length++,!0}return!1},me.prototype.deleteRule=function(u){this.element.removeChild(this.nodes[u]),this.length--},me.prototype.getRule=function(u){return u<this.length?this.nodes[u].textContent:""},me}(),De=function(){function me(u){this.rules=[],this.length=0}return me.prototype.insertRule=function(u,t){return u<=this.length&&(this.rules.splice(u,0,t),this.length++,!0)},me.prototype.deleteRule=function(u){this.rules.splice(u,1),this.length--},me.prototype.getRule=function(u){return u<this.length?this.rules[u]:""},me}(),Re=S$2,Te={isServer:!S$2,useCSSOMInjection:!w$1},ke=function(){function me(u,t,de){u===void 0&&(u=C$2),t===void 0&&(t={});var pe=this;this.options=__assign(__assign({},Te),u),this.gs=t,this.names=new Map(de),this.server=!!u.isServer,!this.server&&S$2&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(Le){for(var Ye=Le.getTag(),tt=Ye.length,st="",ht=function(gt){var bt=function(Rt){return ve.get(Rt)}(gt);if(bt===void 0)return"continue";var _t=Le.names.get(bt),vt=Ye.getGroup(gt);if(_t===void 0||!_t.size||vt.length===0)return"continue";var Tt="".concat(f$2,".g").concat(gt,'[id="').concat(bt,'"]'),St="";_t!==void 0&&_t.forEach(function(Rt){Rt.length>0&&(St+="".concat(Rt,","))}),st+="".concat(vt).concat(Tt,'{content:"').concat(St,'"}').concat(g$1)},mt=0;mt<tt;mt++)ht(mt);return st}(pe)})}return me.registerId=function(u){return Se(u)},me.prototype.rehydrate=function(){!this.server&&S$2&&_e(this)},me.prototype.reconstructWithOptions=function(u,t){return t===void 0&&(t=!0),new me(__assign(__assign({},this.options),u),this.gs,t&&this.names||void 0)},me.prototype.allocateGSInstance=function(u){return this.gs[u]=(this.gs[u]||0)+1},me.prototype.getTag=function(){return this.tag||(this.tag=(u=function(t){var de=t.useCSSOMInjection,pe=t.target;return t.isServer?new De(pe):de?new Ae(pe):new Oe(pe)}(this.options),new fe(u)));var u},me.prototype.hasNameForId=function(u,t){return this.names.has(u)&&this.names.get(u).has(t)},me.prototype.registerName=function(u,t){if(Se(u),this.names.has(u))this.names.get(u).add(t);else{var de=new Set;de.add(t),this.names.set(u,de)}},me.prototype.insertRules=function(u,t,de){this.registerName(u,t),this.getTag().insertRules(Se(u),de)},me.prototype.clearNames=function(u){this.names.has(u)&&this.names.get(u).clear()},me.prototype.clearRules=function(u){this.getTag().clearGroup(Se(u)),this.clearNames(u)},me.prototype.clearTag=function(){this.tag=void 0},me}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(me,u){return me.map(function(t){return t.type==="rule"&&(t.value="".concat(u," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(u," ")),t.props=t.props.map(function(de){return"".concat(u," ").concat(de)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Ve(t.children,u)),t})}function Fe(me){var u,t,de,pe=C$2,Le=pe.options,Ye=Le===void 0?C$2:Le,tt=pe.plugins,st=tt===void 0?_$2:tt,ht=function(bt,_t,vt){return vt.startsWith(t)&&vt.endsWith(t)&&vt.replaceAll(t,"").length>0?".".concat(u):bt},mt=st.slice();mt.push(function(bt){bt.type===RULESET&&bt.value.includes("&")&&(bt.props[0]=bt.props[0].replace(je,t).replace(de,ht))}),Ye.prefix&&mt.push(prefixer),mt.push(stringify);var gt=function(bt,_t,vt,Tt){_t===void 0&&(_t=""),vt===void 0&&(vt=""),Tt===void 0&&(Tt="&"),u=Tt,t=_t,de=new RegExp("\\".concat(t,"\\b"),"g");var St=bt.replace(xe,""),Rt=compile(vt||_t?"".concat(vt," ").concat(_t," { ").concat(St," }"):St);Ye.namespace&&(Rt=Ve(Rt,Ye.namespace));var Pt=[];return serialize(Rt,middleware(mt.concat(rulesheet(function(Ot){return Pt.push(Ot)})))),Pt};return gt.hash=st.length?st.reduce(function(bt,_t){return _t.name||he(15),M$1(bt,_t.name)},F$1).toString():"",gt}var Me=new ke,ze=Fe(),$e=React.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;React.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function me(u,t){var de=this;this.inject=function(pe,Le){Le===void 0&&(Le=ze);var Ye=de.name+Le.hash;pe.hasNameForId(de.id,Ye)||pe.insertRules(de.id,Ye,Le(de.rules,Ye,"@keyframes"))},this.name=u,this.id="sc-keyframes-".concat(u),this.rules=t,ue(this,function(){throw he(12,String(de.name))})}return me.prototype.getName=function(u){return u===void 0&&(u=ze),this.name+u.hash},me}(),qe=function(me){return me>="A"&&me<="Z"};function He(me){for(var u="",t=0;t<me.length;t++){var de=me[t];if(t===1&&de==="-"&&me[0]==="-")return me;qe(de)?u+="-"+de.toLowerCase():u+=de}return u.startsWith("ms-")?"-"+u:u}var Ue=function(me){return me==null||me===!1||me===""},Je=function(me){var u,t,de=[];for(var pe in me){var Le=me[pe];me.hasOwnProperty(pe)&&!Ue(Le)&&(Array.isArray(Le)&&Le.isCss||re$1(Le)?de.push("".concat(He(pe),":"),Le,";"):ce(Le)?de.push.apply(de,__spreadArray(__spreadArray(["".concat(pe," {")],Je(Le),!1),["}"],!1)):de.push("".concat(He(pe),": ").concat((u=pe,(t=Le)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||u in unitlessKeys||u.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return de};function Xe(me,u,t,de){if(Ue(me))return[];if(se(me))return[".".concat(me.styledComponentId)];if(re$1(me)){if(!re$1(Le=me)||Le.prototype&&Le.prototype.isReactComponent||!u)return[me];var pe=me(u);return Xe(pe,u,t,de)}var Le;return me instanceof We?t?(me.inject(t,de),[me.getName(de)]):[me]:ce(me)?Je(me):Array.isArray(me)?Array.prototype.concat.apply(_$2,me.map(function(Ye){return Xe(Ye,u,t,de)})):[me.toString()]}function Ze(me){for(var u=0;u<me.length;u+=1){var t=me[u];if(re$1(t)&&!se(t))return!1}return!0}var Ke=z$1(v$1),Qe=function(){function me(u,t,de){this.rules=u,this.staticRulesId="",this.isStatic=(de===void 0||de.isStatic)&&Ze(u),this.componentId=t,this.baseHash=M$1(Ke,t),this.baseStyle=de,ke.registerId(t)}return me.prototype.generateAndInjectStyles=function(u,t,de){var pe=this.baseStyle?this.baseStyle.generateAndInjectStyles(u,t,de):"";if(this.isStatic&&!de.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))pe=ie(pe,this.staticRulesId);else{var Le=ae(Xe(this.rules,u,t,de)),Ye=x$2(M$1(this.baseHash,Le)>>>0);if(!t.hasNameForId(this.componentId,Ye)){var tt=de(Le,".".concat(Ye),void 0,this.componentId);t.insertRules(this.componentId,Ye,tt)}pe=ie(pe,Ye),this.staticRulesId=Ye}else{for(var st=M$1(this.baseHash,de.hash),ht="",mt=0;mt<this.rules.length;mt++){var gt=this.rules[mt];if(typeof gt=="string")ht+=gt;else if(gt){var bt=ae(Xe(gt,u,t,de));st=M$1(st,bt+mt),ht+=bt}}if(ht){var _t=x$2(st>>>0);t.hasNameForId(this.componentId,_t)||t.insertRules(this.componentId,_t,de(ht,".".concat(_t),void 0,this.componentId)),pe=ie(pe,_t)}}return pe},me}(),et=React.createContext(void 0);et.Consumer;var rt={};function it(me,u,t){var de=se(me),pe=me,Le=!L$1(me),Ye=u.attrs,tt=Ye===void 0?_$2:Ye,st=u.componentId,ht=st===void 0?function(Mt,Bt){var Dt=typeof Mt!="string"?"sc":R(Mt);rt[Dt]=(rt[Dt]||0)+1;var $t="".concat(Dt,"-").concat($(v$1+Dt+rt[Dt]));return Bt?"".concat(Bt,"-").concat($t):$t}(u.displayName,u.parentComponentId):st,mt=u.displayName,gt=mt===void 0?function(Mt){return L$1(Mt)?"styled.".concat(Mt):"Styled(".concat(B$1(Mt),")")}(me):mt,bt=u.displayName&&u.componentId?"".concat(R(u.displayName),"-").concat(u.componentId):u.componentId||ht,_t=de&&pe.attrs?pe.attrs.concat(tt).filter(Boolean):tt,vt=u.shouldForwardProp;if(de&&pe.shouldForwardProp){var Tt=pe.shouldForwardProp;if(u.shouldForwardProp){var St=u.shouldForwardProp;vt=function(Mt,Bt){return Tt(Mt,Bt)&&St(Mt,Bt)}}else vt=Tt}var Rt=new Qe(t,bt,de?pe.componentStyle:void 0);function Pt(Mt,Bt){return function(Dt,$t,kt){var Et=Dt.attrs,At=Dt.componentStyle,Ft=Dt.defaultProps,zt=Dt.foldedComponentIds,Ut=Dt.styledComponentId,qt=Dt.target,Gt=React.useContext(et),Nt=Ge(),jt=Dt.shouldForwardProp||Nt.shouldForwardProp,Qt=I$1($t,Gt,Ft)||C$2,Kt=function(un,dn,Rn){for(var _n,In=__assign(__assign({},dn),{className:void 0,theme:Rn}),yn=0;yn<un.length;yn+=1){var vn=re$1(_n=un[yn])?_n(In):_n;for(var wn in vn)In[wn]=wn==="className"?ie(In[wn],vn[wn]):wn==="style"?__assign(__assign({},In[wn]),vn[wn]):vn[wn]}return dn.className&&(In.className=ie(In.className,dn.className)),In}(Et,$t,Qt),Vt=Kt.as||qt,en={};for(var cn in Kt)Kt[cn]===void 0||cn[0]==="$"||cn==="as"||cn==="theme"&&Kt.theme===Qt||(cn==="forwardedAs"?en.as=Kt.forwardedAs:jt&&!jt(cn,Vt)||(en[cn]=Kt[cn]));var nn=function(un,dn){var Rn=Ge(),_n=un.generateAndInjectStyles(dn,Rn.styleSheet,Rn.stylis);return _n}(At,Kt),sn=ie(zt,Ut);return nn&&(sn+=" "+nn),Kt.className&&(sn+=" "+Kt.className),en[L$1(Vt)&&!A.has(Vt)?"class":"className"]=sn,kt&&(en.ref=kt),reactExports.createElement(Vt,en)}(Ot,Mt,Bt)}Pt.displayName=gt;var Ot=React.forwardRef(Pt);return Ot.attrs=_t,Ot.componentStyle=Rt,Ot.displayName=gt,Ot.shouldForwardProp=vt,Ot.foldedComponentIds=de?ie(pe.foldedComponentIds,pe.styledComponentId):"",Ot.styledComponentId=bt,Ot.target=de?pe.target:me,Object.defineProperty(Ot,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Mt){this._foldedDefaultProps=de?function(Bt){for(var Dt=[],$t=1;$t<arguments.length;$t++)Dt[$t-1]=arguments[$t];for(var kt=0,Et=Dt;kt<Et.length;kt++)le(Bt,Et[kt],!0);return Bt}({},pe.defaultProps,Mt):Mt}}),ue(Ot,function(){return".".concat(Ot.styledComponentId)}),Le&&oe(Ot,me,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Ot}function at(me,u){for(var t=[me[0]],de=0,pe=u.length;de<pe;de+=1)t.push(u[de],me[de+1]);return t}var ct=function(me){return Object.assign(me,{isCss:!0})};function lt(me){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];if(re$1(me)||ce(me))return ct(Xe(at(_$2,__spreadArray([me],u,!0))));var de=me;return u.length===0&&de.length===1&&typeof de[0]=="string"?Xe(de):ct(Xe(at(de,u)))}function ut(me,u,t){if(t===void 0&&(t=C$2),!u)throw he(1,u);var de=function(pe){for(var Le=[],Ye=1;Ye<arguments.length;Ye++)Le[Ye-1]=arguments[Ye];return me(u,t,lt.apply(void 0,__spreadArray([pe],Le,!1)))};return de.attrs=function(pe){return ut(me,u,__assign(__assign({},t),{attrs:Array.prototype.concat(t.attrs,pe).filter(Boolean)}))},de.withConfig=function(pe){return ut(me,u,__assign(__assign({},t),pe))},de}var pt=function(me){return ut(it,me)},dt=pt;A.forEach(function(me){dt[me]=pt(me)});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(me,u){if(me==null)return{};var t=_objectWithoutPropertiesLoose(me,u),de,pe;if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(me);for(pe=0;pe<Le.length;pe++)de=Le[pe],!(u.indexOf(de)>=0)&&Object.prototype.propertyIsEnumerable.call(me,de)&&(t[de]=me[de])}return t}function _objectWithoutPropertiesLoose(me,u){if(me==null)return{};var t={};for(var de in me)if(Object.prototype.hasOwnProperty.call(me,de)){if(u.indexOf(de)>=0)continue;t[de]=me[de]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(me){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var de in t)Object.prototype.hasOwnProperty.call(t,de)&&(me[de]=t[de])}return me},_extends.apply(this,arguments)}function ownKeys(me,u){var t=Object.keys(me);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(me);u&&(de=de.filter(function(pe){return Object.getOwnPropertyDescriptor(me,pe).enumerable})),t.push.apply(t,de)}return t}function _objectSpread(me){for(var u=1;u<arguments.length;u++){var t=arguments[u]!=null?arguments[u]:{};u%2?ownKeys(Object(t),!0).forEach(function(de){_defineProperty(me,de,t[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(de){Object.defineProperty(me,de,Object.getOwnPropertyDescriptor(t,de))})}return me}function _defineProperty(me,u,t){return u=_toPropertyKey(u),u in me?Object.defineProperty(me,u,{value:t,enumerable:!0,configurable:!0,writable:!0}):me[u]=t,me}function _toPropertyKey(me){var u=_toPrimitive(me,"string");return typeof u=="symbol"?u:u+""}function _toPrimitive(me,u){if(typeof me!="object"||!me)return me;var t=me[Symbol.toPrimitive];if(t!==void 0){var de=t.call(me,u);if(typeof de!="object")return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(me)}function Tree2Element(me){return me&&me.map((u,t)=>React.createElement(u.tag,_objectSpread({key:t},u.attr),Tree2Element(u.child)))}function GenIcon(me){return u=>React.createElement(IconBase,_extends({attr:_objectSpread({},me.attr)},u),Tree2Element(me.child))}function IconBase(me){var u=t=>{var{attr:de,size:pe,title:Le}=me,Ye=_objectWithoutProperties(me,_excluded),tt=pe||t.size||"1em",st;return t.className&&(st=t.className),me.className&&(st=(st?st+" ":"")+me.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,de,Ye,{className:st,style:_objectSpread(_objectSpread({color:me.color||t.color},t.style),me.style),height:tt,width:tt,xmlns:"http://www.w3.org/2000/svg"}),Le&&React.createElement("title",null,Le),me.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>u(t)):u(DefaultContext)}function RiTextBlock(me){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 2V5H3V4H5V9H3.5V11H8.5V9H7V4H9V5H11V2H1ZM21 3H14V5H20V19H4V14H2V20C2 20.5523 2.44772 21 3 21H21C21.5523 21 22 20.5523 22 20V4C22 3.44772 21.5523 3 21 3Z"},child:[]}]})(me)}const StyledAppBar=dt(AppBar)`
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
  overflow: hidden;
  height: 63px;
  background-color: white !important;
`,StyledLogo=dt.img`
  vertical-align: middle;
  border-style: none;
  height: 27.57px;
  width: 151px;
  margin-top: -4px;
  margin-left: 20px;
  margin-right: 1rem;
`,StyledTypography=dt(Typography)`
  font-size: 18px !important;
  letter-spacing: 0 !important;
  line-height: 31px !important;
  color: #1565c0;
  font-weight: bold !important;
`,Navbar=()=>jsxRuntimeExports.jsx(StyledAppBar,{position:"static",children:jsxRuntimeExports.jsx("div",{style:{marginRight:"2rem"},children:jsxRuntimeExports.jsxs(Toolbar,{style:{margin:"0",padding:"0",display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx(StyledLogo,{src:NovartisIcon,alt:"novartis",style:{cursor:"pointer"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[jsxRuntimeExports.jsx(RiTextBlock,{size:25,color:"#1565c0"}),jsxRuntimeExports.jsx(StyledTypography,{variant:"h6",children:"Editor"})]})]})})});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createDefer(){const me={resolve:null,promise:null};return me.promise=new Promise(u=>{me.resolve=u}),me}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function once(me){let u=null;return(...t)=>(u||(u={current:me(...t)}),u.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS$1=new Array(256).fill("").map((me,u)=>("0"+u.toString(16)).slice(-2));function uid$1(){const[me,u,t,de]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS$1[me>>0&255]+HEX_NUMBERS$1[me>>8&255]+HEX_NUMBERS$1[me>>16&255]+HEX_NUMBERS$1[me>>24&255]+HEX_NUMBERS$1[u>>0&255]+HEX_NUMBERS$1[u>>8&255]+HEX_NUMBERS$1[u>>16&255]+HEX_NUMBERS$1[u>>24&255]+HEX_NUMBERS$1[t>>0&255]+HEX_NUMBERS$1[t>>8&255]+HEX_NUMBERS$1[t>>16&255]+HEX_NUMBERS$1[t>>24&255]+HEX_NUMBERS$1[de>>0&255]+HEX_NUMBERS$1[de>>8&255]+HEX_NUMBERS$1[de>>16&255]+HEX_NUMBERS$1[de>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendExtraPluginsToEditorConfig(me,u){const t=me.extraPlugins||[];return{...me,extraPlugins:[...t,...u.filter(de=>!t.includes(de))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isSemanticVersion(me){return!!me&&/^\d+\.\d+\.\d+/.test(me)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKCdnTestingVersion(me){return me?["nightly","alpha","internal","nightly-","staging"].some(u=>me.includes(u)):!1}function isCKCdnVersion(me){return isSemanticVersion(me)||isCKCdnTestingVersion(me)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function destructureSemanticVersion(me){if(!isSemanticVersion(me))throw new Error(`Invalid semantic version: ${me||"<blank>"}.`);const[u,t,de]=me.split(".");return{major:Number.parseInt(u,10),minor:Number.parseInt(t,10),patch:Number.parseInt(de,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLicenseVersionFromEditorVersion(me){if(isCKCdnTestingVersion(me))return 3;const{major:u}=destructureSemanticVersion(me);switch(!0){case u>=44:return 3;case u>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getCKBaseBundleInstallationInfo(){const{CKEDITOR_VERSION:me,CKEDITOR:u}=window;return isCKCdnVersion(me)?{source:u?"cdn":"npm",version:me}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSupportedLicenseVersionInstallationInfo(){const me=getCKBaseBundleInstallationInfo();return me?getLicenseVersionFromEditorVersion(me.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKEditorFreeLicense(me,u){switch(u||(u=getSupportedLicenseVersionInstallationInfo()||void 0),u){case 1:case 2:return me===void 0;case 3:return me==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createIntegrationUsageDataPlugin(me,u){return function(de){isCKEditorFreeLicense(de.config.get("licenseKey"))||de.on("collectUsageData",(pe,{setUsageData:Le})=>{Le(`integration.${me}`,u)})}}var __defProp=Object.defineProperty,__defNormalProp=(me,u,t)=>u in me?__defProp(me,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):me[u]=t,__publicField=(me,u,t)=>__defNormalProp(me,typeof u!="symbol"?u+"":u,t);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const _LifeCycleElementSemaphore=class fm{constructor(u,t){__publicField(this,"_lifecycle"),__publicField(this,"_element"),__publicField(this,"_releaseLock",null),__publicField(this,"_value",null),__publicField(this,"_afterMountCallbacks",[]),__publicField(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),__publicField(this,"release",once(()=>{const{_releaseLock:de,_state:pe,_element:Le,_lifecycle:Ye}=this;pe.mountingInProgress?pe.mountingInProgress.then(()=>Ye.unmount({element:Le,mountResult:this.value})).catch(tt=>{console.error("Semaphore unmounting error:",tt)}).then(de.resolve).then(()=>{this._value=null}):(pe.destroyedBeforeInitialization=!0,de.resolve())})),this._element=u,this._lifecycle=t,this._lock()}get value(){return this._value}unsafeSetValue(u){this._value=u,this._afterMountCallbacks.forEach(t=>t(u)),this._afterMountCallbacks=[]}runAfterMount(u){const{_value:t,_afterMountCallbacks:de}=this;t?u(t):de.push(u)}_lock(){const{_semaphores:u}=fm,{_state:t,_element:de,_lifecycle:pe}=this,Le=u.get(de)||Promise.resolve(null),Ye=createDefer();this._releaseLock=Ye;const tt=Le.then(()=>t.destroyedBeforeInitialization?Promise.resolve(void 0):(t.mountingInProgress=pe.mount().then(st=>(st&&this.unsafeSetValue(st),st)),t.mountingInProgress)).then(async st=>{st&&pe.afterMount&&await pe.afterMount({element:de,mountResult:st})}).then(()=>Ye.promise).catch(st=>{console.error("Semaphore mounting error:",st)}).then(()=>{u.get(de)===tt&&u.delete(de)});u.set(de,tt)}};__publicField(_LifeCycleElementSemaphore,"_semaphores",new Map);let LifeCycleElementSemaphore=_LifeCycleElementSemaphore;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactContextMetadataKey="$__CKEditorReactContextMetadata";function withCKEditorReactContextMetadata(me,u){return{...u,[ReactContextMetadataKey]:me}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ContextWatchdogContext=React.createContext(null),isContextWatchdogValue=me=>!!me&&typeof me=="object"&&"status"in me&&["initializing","initialized","error"].includes(me.status),isContextWatchdogValueWithStatus=me=>u=>isContextWatchdogValue(u)&&u.status===me,isContextWatchdogInitializing=isContextWatchdogValueWithStatus("initializing"),isContextWatchdogReadyToUse=me=>isContextWatchdogValueWithStatus("initialized")(me)&&me.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactIntegrationUsageDataPlugin=createIntegrationUsageDataPlugin("react",{version:"9.5.0",frameworkVersion:React.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendAllIntegrationPluginsToConfig(me){return isCKEditorFreeLicense(me.licenseKey)?me:appendExtraPluginsToEditorConfig(me,[ReactIntegrationUsageDataPlugin])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const REACT_INTEGRATION_READ_ONLY_LOCK_ID$1="Lock from React integration (@ckeditor/ckeditor5-react)";class CKEditor extends React.Component{constructor(u){super(u),__publicField(this,"domContainer",React.createRef()),__publicField(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:u}=window;if(!u)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[t]=u.split(".").map(Number);t>=42||u.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:u}=this;return u?u.value:null}get watchdog(){const{_semaphoreValue:u}=this;return u?u.watchdog:null}get editor(){const{_semaphoreValue:u}=this;return u?u.instance:null}shouldComponentUpdate(u){const{props:t,editorSemaphore:de}=this;return u.id!==t.id||u.disableWatchdog!==t.disableWatchdog?!0:(de&&(de.runAfterMount(({instance:pe})=>{this._shouldUpdateEditorData(t,u,pe)&&pe.data.set(u.data)}),"disabled"in u&&de.runAfterMount(({instance:pe})=>{u.disabled?pe.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1):pe.disableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)})),!1)}componentDidMount(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new LifeCycleElementSemaphore(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:u})=>{const{onReady:t}=this.props;t&&this.domContainer.current!==null&&t(u.instance)},unmount:async({element:u,mountResult:t})=>{const{onAfterDestroy:de}=this.props;try{await this._destroyEditor(t),u.innerHTML=""}finally{de&&de(t.instance)}}})}render(){return React.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const u=isContextWatchdogReadyToUse(this.context)?new EditorWatchdogAdapter(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),t={current:0};return u.setCreator(async(de,pe)=>{var Le;const{editorSemaphore:Ye}=this,{onAfterDestroy:tt}=this.props;t.current>0&&tt&&((Le=Ye==null?void 0:Ye.value)!=null&&Le.instance)&&tt(Ye.value.instance);const st=await this._createEditor(de,pe);return Ye&&t.current>0&&(Ye.unsafeSetValue({instance:st,watchdog:u}),setTimeout(()=>{this.props.onReady&&this.props.onReady(u.editor)})),t.current++,st}),u.on("error",(de,{error:pe,causesRestart:Le})=>{(this.props.onError||console.error)(pe,{phase:"runtime",willEditorRestart:Le})}),await u.create(this.domContainer.current,this._getConfig()).catch(de=>{(this.props.onError||console.error)(de,{phase:"initialization",willEditorRestart:!1})}),{watchdog:u,instance:u.editor}}_createEditor(u,t){const{contextItemMetadata:de}=this.props;return de&&(t=withCKEditorReactContextMetadata(de,t)),this.props.editor.create(u,appendAllIntegrationPluginsToConfig(t)).then(pe=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&pe.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)}const Le=pe.model.document,Ye=pe.editing.view.document;return Le.on("change:data",tt=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(tt,pe)}),Ye.on("focus",tt=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(tt,pe)}),Ye.on("blur",tt=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(tt,pe)}),pe})}async _destroyEditor(u){const{watchdog:t,instance:de}=u;return new Promise((pe,Le)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(t)return await t.destroy(),pe();if(de)return await de.destroy(),pe();pe()}catch(Ye){console.error(Ye),Le(Ye)}})})}_shouldUpdateEditorData(u,t,de){return!(u.data===t.data||de.data.get()===t.data)}_getConfig(){const u=this.props.config||{};return this.props.data&&u.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...u,initialData:u.initialData||this.props.data||""}}}__publicField(CKEditor,"contextType",ContextWatchdogContext);class EditorWatchdogAdapter{constructor(u){__publicField(this,"_contextWatchdog"),__publicField(this,"_id"),__publicField(this,"_creator"),this._contextWatchdog=u,this._id=uid$1()}setCreator(u){this._creator=u}create(u,t){return this._contextWatchdog.add({sourceElementOrData:u,config:t,creator:this._creator,id:this._id,type:"editor"})}on(u,t){this._contextWatchdog.on("itemError",(de,{itemId:pe,error:Le})=>{pe===this._id&&t(null,{error:Le,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mergeRefs(...me){return u=>{me.forEach(t=>{typeof t=="function"?t(u):t!=null&&(t.current=u)})}}const EditorEditable=reactExports.memo(reactExports.forwardRef(({id:me,semaphore:u,rootName:t},de)=>{const pe=reactExports.useRef(null);return reactExports.useEffect(()=>{let Le,Ye;return u.runAfterMount(({instance:tt})=>{if(!pe.current)return;Ye=tt;const{ui:st,model:ht}=Ye,mt=ht.document.getRoot(t);mt&&Ye.ui.getEditableElement(t)&&Ye.detachEditable(mt),Le=st.view.createEditable(t,pe.current),st.addEditable(Le),tt.editing.view.forceRender()}),()=>{if(Ye&&Ye.state!=="destroyed"&&pe.current){const tt=Ye.model.document.getRoot(t);/* istanbul ignore else -- @preserve */tt&&Ye.detachEditable(tt)}}},[u.revision]),React.createElement("div",{key:u.revision,id:me,ref:mergeRefs(de,pe)})}));EditorEditable.displayName="EditorEditable";const EditorToolbarWrapper=reactExports.forwardRef(({editor:me},u)=>{const t=reactExports.useRef(null);return reactExports.useEffect(()=>{const de=t.current;if(!me||!de)return;const pe=me.ui.view.toolbar.element;return de.appendChild(pe),()=>{de.contains(pe)&&de.removeChild(pe)}},[me&&me.id]),React.createElement("div",{ref:mergeRefs(t,u)})});EditorToolbarWrapper.displayName="EditorToolbarWrapper";function bind(me,u){return function(){return me.apply(u,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(me=>u=>{const t=toString$2.call(u);return me[t]||(me[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=me=>(me=me.toLowerCase(),u=>kindOf(u)===me),typeOfTest=me=>u=>typeof u===me,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(me){return me!==null&&!isUndefined(me)&&me.constructor!==null&&!isUndefined(me.constructor)&&isFunction$1(me.constructor.isBuffer)&&me.constructor.isBuffer(me)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(me){let u;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?u=ArrayBuffer.isView(me):u=me&&me.buffer&&isArrayBuffer(me.buffer),u}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$3=me=>me!==null&&typeof me=="object",isBoolean=me=>me===!0||me===!1,isPlainObject$1=me=>{if(kindOf(me)!=="object")return!1;const u=getPrototypeOf(me);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in me)&&!(Symbol.iterator in me)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=me=>isObject$3(me)&&isFunction$1(me.pipe),isFormData=me=>{let u;return me&&(typeof FormData=="function"&&me instanceof FormData||isFunction$1(me.append)&&((u=kindOf(me))==="formdata"||u==="object"&&isFunction$1(me.toString)&&me.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=me=>me.trim?me.trim():me.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(me,u,{allOwnKeys:t=!1}={}){if(me===null||typeof me>"u")return;let de,pe;if(typeof me!="object"&&(me=[me]),isArray$1(me))for(de=0,pe=me.length;de<pe;de++)u.call(null,me[de],de,me);else{const Le=t?Object.getOwnPropertyNames(me):Object.keys(me),Ye=Le.length;let tt;for(de=0;de<Ye;de++)tt=Le[de],u.call(null,me[tt],tt,me)}}function findKey(me,u){u=u.toLowerCase();const t=Object.keys(me);let de=t.length,pe;for(;de-- >0;)if(pe=t[de],u===pe.toLowerCase())return pe;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=me=>!isUndefined(me)&&me!==_global;function merge$1(){const{caseless:me}=isContextDefined(this)&&this||{},u={},t=(de,pe)=>{const Le=me&&findKey(u,pe)||pe;isPlainObject$1(u[Le])&&isPlainObject$1(de)?u[Le]=merge$1(u[Le],de):isPlainObject$1(de)?u[Le]=merge$1({},de):isArray$1(de)?u[Le]=de.slice():u[Le]=de};for(let de=0,pe=arguments.length;de<pe;de++)arguments[de]&&forEach(arguments[de],t);return u}const extend=(me,u,t,{allOwnKeys:de}={})=>(forEach(u,(pe,Le)=>{t&&isFunction$1(pe)?me[Le]=bind(pe,t):me[Le]=pe},{allOwnKeys:de}),me),stripBOM=me=>(me.charCodeAt(0)===65279&&(me=me.slice(1)),me),inherits=(me,u,t,de)=>{me.prototype=Object.create(u.prototype,de),me.prototype.constructor=me,Object.defineProperty(me,"super",{value:u.prototype}),t&&Object.assign(me.prototype,t)},toFlatObject=(me,u,t,de)=>{let pe,Le,Ye;const tt={};if(u=u||{},me==null)return u;do{for(pe=Object.getOwnPropertyNames(me),Le=pe.length;Le-- >0;)Ye=pe[Le],(!de||de(Ye,me,u))&&!tt[Ye]&&(u[Ye]=me[Ye],tt[Ye]=!0);me=t!==!1&&getPrototypeOf(me)}while(me&&(!t||t(me,u))&&me!==Object.prototype);return u},endsWith=(me,u,t)=>{me=String(me),(t===void 0||t>me.length)&&(t=me.length),t-=u.length;const de=me.indexOf(u,t);return de!==-1&&de===t},toArray$3=me=>{if(!me)return null;if(isArray$1(me))return me;let u=me.length;if(!isNumber(u))return null;const t=new Array(u);for(;u-- >0;)t[u]=me[u];return t},isTypedArray$1=(me=>u=>me&&u instanceof me)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(me,u)=>{const de=(me&&me[Symbol.iterator]).call(me);let pe;for(;(pe=de.next())&&!pe.done;){const Le=pe.value;u.call(me,Le[0],Le[1])}},matchAll=(me,u)=>{let t;const de=[];for(;(t=me.exec(u))!==null;)de.push(t);return de},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=me=>me.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,de,pe){return de.toUpperCase()+pe}),hasOwnProperty$d=(({hasOwnProperty:me})=>(u,t)=>me.call(u,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(me,u)=>{const t=Object.getOwnPropertyDescriptors(me),de={};forEach(t,(pe,Le)=>{let Ye;(Ye=u(pe,Le,me))!==!1&&(de[Le]=Ye||pe)}),Object.defineProperties(me,de)},freezeMethods=me=>{reduceDescriptors(me,(u,t)=>{if(isFunction$1(me)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const de=me[t];if(isFunction$1(de)){if(u.enumerable=!1,"writable"in u){u.writable=!1;return}u.set||(u.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(me,u)=>{const t={},de=pe=>{pe.forEach(Le=>{t[Le]=!0})};return isArray$1(me)?de(me):de(String(me).split(u)),t},noop=()=>{},toFiniteNumber=(me,u)=>me!=null&&Number.isFinite(me=+me)?me:u;function isSpecCompliantForm(me){return!!(me&&isFunction$1(me.append)&&me[Symbol.toStringTag]==="FormData"&&me[Symbol.iterator])}const toJSONObject=me=>{const u=new Array(10),t=(de,pe)=>{if(isObject$3(de)){if(u.indexOf(de)>=0)return;if(!("toJSON"in de)){u[pe]=de;const Le=isArray$1(de)?[]:{};return forEach(de,(Ye,tt)=>{const st=t(Ye,pe+1);!isUndefined(st)&&(Le[tt]=st)}),u[pe]=void 0,Le}}return de};return t(me,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=me=>me&&(isObject$3(me)||isFunction$1(me))&&isFunction$1(me.then)&&isFunction$1(me.catch),_setImmediate=((me,u)=>me?setImmediate:u?((t,de)=>(_global.addEventListener("message",({source:pe,data:Le})=>{pe===_global&&Le===t&&de.length&&de.shift()()},!1),pe=>{de.push(pe),_global.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$2={isArray:isArray$1,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$3,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$d,hasOwnProp:hasOwnProperty$d,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(me,u,t,de,pe){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=me,this.name="AxiosError",u&&(this.code=u),t&&(this.config=t),de&&(this.request=de),pe&&(this.response=pe,this.status=pe.status?pe.status:null)}utils$2.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(me=>{descriptors[me]={value:me}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(me,u,t,de,pe,Le)=>{const Ye=Object.create(prototype$1);return utils$2.toFlatObject(me,Ye,function(st){return st!==Error.prototype},tt=>tt!=="isAxiosError"),AxiosError$1.call(Ye,me.message,u,t,de,pe),Ye.cause=me,Ye.name=me.name,Le&&Object.assign(Ye,Le),Ye};const httpAdapter=null;function isVisitable(me){return utils$2.isPlainObject(me)||utils$2.isArray(me)}function removeBrackets(me){return utils$2.endsWith(me,"[]")?me.slice(0,-2):me}function renderKey(me,u,t){return me?me.concat(u).map(function(pe,Le){return pe=removeBrackets(pe),!t&&Le?"["+pe+"]":pe}).join(t?".":""):u}function isFlatArray(me){return utils$2.isArray(me)&&!me.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(u){return/^is[A-Z]/.test(u)});function toFormData$1(me,u,t){if(!utils$2.isObject(me))throw new TypeError("target must be an object");u=u||new FormData,t=utils$2.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Tt,St){return!utils$2.isUndefined(St[Tt])});const de=t.metaTokens,pe=t.visitor||mt,Le=t.dots,Ye=t.indexes,st=(t.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(u);if(!utils$2.isFunction(pe))throw new TypeError("visitor must be a function");function ht(vt){if(vt===null)return"";if(utils$2.isDate(vt))return vt.toISOString();if(!st&&utils$2.isBlob(vt))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(vt)||utils$2.isTypedArray(vt)?st&&typeof Blob=="function"?new Blob([vt]):Buffer.from(vt):vt}function mt(vt,Tt,St){let Rt=vt;if(vt&&!St&&typeof vt=="object"){if(utils$2.endsWith(Tt,"{}"))Tt=de?Tt:Tt.slice(0,-2),vt=JSON.stringify(vt);else if(utils$2.isArray(vt)&&isFlatArray(vt)||(utils$2.isFileList(vt)||utils$2.endsWith(Tt,"[]"))&&(Rt=utils$2.toArray(vt)))return Tt=removeBrackets(Tt),Rt.forEach(function(Ot,Mt){!(utils$2.isUndefined(Ot)||Ot===null)&&u.append(Ye===!0?renderKey([Tt],Mt,Le):Ye===null?Tt:Tt+"[]",ht(Ot))}),!1}return isVisitable(vt)?!0:(u.append(renderKey(St,Tt,Le),ht(vt)),!1)}const gt=[],bt=Object.assign(predicates,{defaultVisitor:mt,convertValue:ht,isVisitable});function _t(vt,Tt){if(!utils$2.isUndefined(vt)){if(gt.indexOf(vt)!==-1)throw Error("Circular reference detected in "+Tt.join("."));gt.push(vt),utils$2.forEach(vt,function(Rt,Pt){(!(utils$2.isUndefined(Rt)||Rt===null)&&pe.call(u,Rt,utils$2.isString(Pt)?Pt.trim():Pt,Tt,bt))===!0&&_t(Rt,Tt?Tt.concat(Pt):[Pt])}),gt.pop()}}if(!utils$2.isObject(me))throw new TypeError("data must be an object");return _t(me),u}function encode$3(me){const u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(me).replace(/[!'()~]|%20|%00/g,function(de){return u[de]})}function AxiosURLSearchParams(me,u){this._pairs=[],me&&toFormData$1(me,this,u)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(u,t){this._pairs.push([u,t])};prototype.toString=function(u){const t=u?function(de){return u.call(this,de,encode$3)}:encode$3;return this._pairs.map(function(pe){return t(pe[0])+"="+t(pe[1])},"").join("&")};function encode$2(me){return encodeURIComponent(me).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(me,u,t){if(!u)return me;const de=t&&t.encode||encode$2;utils$2.isFunction(t)&&(t={serialize:t});const pe=t&&t.serialize;let Le;if(pe?Le=pe(u,t):Le=utils$2.isURLSearchParams(u)?u.toString():new AxiosURLSearchParams(u,t).toString(de),Le){const Ye=me.indexOf("#");Ye!==-1&&(me=me.slice(0,Ye)),me+=(me.indexOf("?")===-1?"?":"&")+Le}return me}class InterceptorManager{constructor(){this.handlers=[]}use(u,t,de){return this.handlers.push({fulfilled:u,rejected:t,synchronous:de?de.synchronous:!1,runWhen:de?de.runWhen:null}),this.handlers.length-1}eject(u){this.handlers[u]&&(this.handlers[u]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(u){utils$2.forEach(this.handlers,function(de){de!==null&&u(de)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(me,u){return toFormData$1(me,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,de,pe,Le){return platform.isNode&&utils$2.isBuffer(t)?(this.append(de,t.toString("base64")),!1):Le.defaultVisitor.apply(this,arguments)}},u))}function parsePropPath(me){return utils$2.matchAll(/\w+|\[(\w*)]/g,me).map(u=>u[0]==="[]"?"":u[1]||u[0])}function arrayToObject(me){const u={},t=Object.keys(me);let de;const pe=t.length;let Le;for(de=0;de<pe;de++)Le=t[de],u[Le]=me[Le];return u}function formDataToJSON(me){function u(t,de,pe,Le){let Ye=t[Le++];if(Ye==="__proto__")return!0;const tt=Number.isFinite(+Ye),st=Le>=t.length;return Ye=!Ye&&utils$2.isArray(pe)?pe.length:Ye,st?(utils$2.hasOwnProp(pe,Ye)?pe[Ye]=[pe[Ye],de]:pe[Ye]=de,!tt):((!pe[Ye]||!utils$2.isObject(pe[Ye]))&&(pe[Ye]=[]),u(t,de,pe[Ye],Le)&&utils$2.isArray(pe[Ye])&&(pe[Ye]=arrayToObject(pe[Ye])),!tt)}if(utils$2.isFormData(me)&&utils$2.isFunction(me.entries)){const t={};return utils$2.forEachEntry(me,(de,pe)=>{u(parsePropPath(de),pe,t,0)}),t}return null}function stringifySafely(me,u,t){if(utils$2.isString(me))try{return(u||JSON.parse)(me),utils$2.trim(me)}catch(de){if(de.name!=="SyntaxError")throw de}return(t||JSON.stringify)(me)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(u,t){const de=t.getContentType()||"",pe=de.indexOf("application/json")>-1,Le=utils$2.isObject(u);if(Le&&utils$2.isHTMLForm(u)&&(u=new FormData(u)),utils$2.isFormData(u))return pe?JSON.stringify(formDataToJSON(u)):u;if(utils$2.isArrayBuffer(u)||utils$2.isBuffer(u)||utils$2.isStream(u)||utils$2.isFile(u)||utils$2.isBlob(u)||utils$2.isReadableStream(u))return u;if(utils$2.isArrayBufferView(u))return u.buffer;if(utils$2.isURLSearchParams(u))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),u.toString();let tt;if(Le){if(de.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(u,this.formSerializer).toString();if((tt=utils$2.isFileList(u))||de.indexOf("multipart/form-data")>-1){const st=this.env&&this.env.FormData;return toFormData$1(tt?{"files[]":u}:u,st&&new st,this.formSerializer)}}return Le||pe?(t.setContentType("application/json",!1),stringifySafely(u)):u}],transformResponse:[function(u){const t=this.transitional||defaults.transitional,de=t&&t.forcedJSONParsing,pe=this.responseType==="json";if(utils$2.isResponse(u)||utils$2.isReadableStream(u))return u;if(u&&utils$2.isString(u)&&(de&&!this.responseType||pe)){const Ye=!(t&&t.silentJSONParsing)&&pe;try{return JSON.parse(u)}catch(tt){if(Ye)throw tt.name==="SyntaxError"?AxiosError$1.from(tt,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):tt}}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],me=>{defaults.headers[me]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=me=>{const u={};let t,de,pe;return me&&me.split(`
`).forEach(function(Ye){pe=Ye.indexOf(":"),t=Ye.substring(0,pe).trim().toLowerCase(),de=Ye.substring(pe+1).trim(),!(!t||u[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?u[t]?u[t].push(de):u[t]=[de]:u[t]=u[t]?u[t]+", "+de:de)}),u},$internals=Symbol("internals");function normalizeHeader(me){return me&&String(me).trim().toLowerCase()}function normalizeValue(me){return me===!1||me==null?me:utils$2.isArray(me)?me.map(normalizeValue):String(me)}function parseTokens(me){const u=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let de;for(;de=t.exec(me);)u[de[1]]=de[2];return u}const isValidHeaderName=me=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(me.trim());function matchHeaderValue(me,u,t,de,pe){if(utils$2.isFunction(de))return de.call(this,u,t);if(pe&&(u=t),!!utils$2.isString(u)){if(utils$2.isString(de))return u.indexOf(de)!==-1;if(utils$2.isRegExp(de))return de.test(u)}}function formatHeader(me){return me.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(u,t,de)=>t.toUpperCase()+de)}function buildAccessors(me,u){const t=utils$2.toCamelCase(" "+u);["get","set","has"].forEach(de=>{Object.defineProperty(me,de+t,{value:function(pe,Le,Ye){return this[de].call(this,u,pe,Le,Ye)},configurable:!0})})}let AxiosHeaders$1=class{constructor(u){u&&this.set(u)}set(u,t,de){const pe=this;function Le(tt,st,ht){const mt=normalizeHeader(st);if(!mt)throw new Error("header name must be a non-empty string");const gt=utils$2.findKey(pe,mt);(!gt||pe[gt]===void 0||ht===!0||ht===void 0&&pe[gt]!==!1)&&(pe[gt||st]=normalizeValue(tt))}const Ye=(tt,st)=>utils$2.forEach(tt,(ht,mt)=>Le(ht,mt,st));if(utils$2.isPlainObject(u)||u instanceof this.constructor)Ye(u,t);else if(utils$2.isString(u)&&(u=u.trim())&&!isValidHeaderName(u))Ye(parseHeaders(u),t);else if(utils$2.isHeaders(u))for(const[tt,st]of u.entries())Le(st,tt,de);else u!=null&&Le(t,u,de);return this}get(u,t){if(u=normalizeHeader(u),u){const de=utils$2.findKey(this,u);if(de){const pe=this[de];if(!t)return pe;if(t===!0)return parseTokens(pe);if(utils$2.isFunction(t))return t.call(this,pe,de);if(utils$2.isRegExp(t))return t.exec(pe);throw new TypeError("parser must be boolean|regexp|function")}}}has(u,t){if(u=normalizeHeader(u),u){const de=utils$2.findKey(this,u);return!!(de&&this[de]!==void 0&&(!t||matchHeaderValue(this,this[de],de,t)))}return!1}delete(u,t){const de=this;let pe=!1;function Le(Ye){if(Ye=normalizeHeader(Ye),Ye){const tt=utils$2.findKey(de,Ye);tt&&(!t||matchHeaderValue(de,de[tt],tt,t))&&(delete de[tt],pe=!0)}}return utils$2.isArray(u)?u.forEach(Le):Le(u),pe}clear(u){const t=Object.keys(this);let de=t.length,pe=!1;for(;de--;){const Le=t[de];(!u||matchHeaderValue(this,this[Le],Le,u,!0))&&(delete this[Le],pe=!0)}return pe}normalize(u){const t=this,de={};return utils$2.forEach(this,(pe,Le)=>{const Ye=utils$2.findKey(de,Le);if(Ye){t[Ye]=normalizeValue(pe),delete t[Le];return}const tt=u?formatHeader(Le):String(Le).trim();tt!==Le&&delete t[Le],t[tt]=normalizeValue(pe),de[tt]=!0}),this}concat(...u){return this.constructor.concat(this,...u)}toJSON(u){const t=Object.create(null);return utils$2.forEach(this,(de,pe)=>{de!=null&&de!==!1&&(t[pe]=u&&utils$2.isArray(de)?de.join(", "):de)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([u,t])=>u+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(u){return u instanceof this?u:new this(u)}static concat(u,...t){const de=new this(u);return t.forEach(pe=>de.set(pe)),de}static accessor(u){const de=(this[$internals]=this[$internals]={accessors:{}}).accessors,pe=this.prototype;function Le(Ye){const tt=normalizeHeader(Ye);de[tt]||(buildAccessors(pe,Ye),de[tt]=!0)}return utils$2.isArray(u)?u.forEach(Le):Le(u),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders$1.prototype,({value:me},u)=>{let t=u[0].toUpperCase()+u.slice(1);return{get:()=>me,set(de){this[t]=de}}});utils$2.freezeMethods(AxiosHeaders$1);function transformData(me,u){const t=this||defaults,de=u||t,pe=AxiosHeaders$1.from(de.headers);let Le=de.data;return utils$2.forEach(me,function(tt){Le=tt.call(t,Le,pe.normalize(),u?u.status:void 0)}),pe.normalize(),Le}function isCancel$1(me){return!!(me&&me.__CANCEL__)}function CanceledError$1(me,u,t){AxiosError$1.call(this,me??"canceled",AxiosError$1.ERR_CANCELED,u,t),this.name="CanceledError"}utils$2.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(me,u,t){const de=t.config.validateStatus;!t.status||!de||de(t.status)?me(t):u(new AxiosError$1("Request failed with status code "+t.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function parseProtocol(me){const u=/^([-+\w]{1,25})(:?\/\/|:)/.exec(me);return u&&u[1]||""}function speedometer(me,u){me=me||10;const t=new Array(me),de=new Array(me);let pe=0,Le=0,Ye;return u=u!==void 0?u:1e3,function(st){const ht=Date.now(),mt=de[Le];Ye||(Ye=ht),t[pe]=st,de[pe]=ht;let gt=Le,bt=0;for(;gt!==pe;)bt+=t[gt++],gt=gt%me;if(pe=(pe+1)%me,pe===Le&&(Le=(Le+1)%me),ht-Ye<u)return;const _t=mt&&ht-mt;return _t?Math.round(bt*1e3/_t):void 0}}function throttle$1(me,u){let t=0,de=1e3/u,pe,Le;const Ye=(ht,mt=Date.now())=>{t=mt,pe=null,Le&&(clearTimeout(Le),Le=null),me.apply(null,ht)};return[(...ht)=>{const mt=Date.now(),gt=mt-t;gt>=de?Ye(ht,mt):(pe=ht,Le||(Le=setTimeout(()=>{Le=null,Ye(pe)},de-gt)))},()=>pe&&Ye(pe)]}const progressEventReducer=(me,u,t=3)=>{let de=0;const pe=speedometer(50,250);return throttle$1(Le=>{const Ye=Le.loaded,tt=Le.lengthComputable?Le.total:void 0,st=Ye-de,ht=pe(st),mt=Ye<=tt;de=Ye;const gt={loaded:Ye,total:tt,progress:tt?Ye/tt:void 0,bytes:st,rate:ht||void 0,estimated:ht&&tt&&mt?(tt-Ye)/ht:void 0,event:Le,lengthComputable:tt!=null,[u?"download":"upload"]:!0};me(gt)},t)},progressEventDecorator=(me,u)=>{const t=me!=null;return[de=>u[0]({lengthComputable:t,total:me,loaded:de}),u[1]]},asyncDecorator=me=>(...u)=>utils$2.asap(()=>me(...u)),isURLSameOrigin=platform.hasStandardBrowserEnv?((me,u)=>t=>(t=new URL(t,platform.origin),me.protocol===t.protocol&&me.host===t.host&&(u||me.port===t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(me,u,t,de,pe,Le){const Ye=[me+"="+encodeURIComponent(u)];utils$2.isNumber(t)&&Ye.push("expires="+new Date(t).toGMTString()),utils$2.isString(de)&&Ye.push("path="+de),utils$2.isString(pe)&&Ye.push("domain="+pe),Le===!0&&Ye.push("secure"),document.cookie=Ye.join("; ")},read(me){const u=document.cookie.match(new RegExp("(^|;\\s*)("+me+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove(me){this.write(me,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(me){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(me)}function combineURLs(me,u){return u?me.replace(/\/?\/$/,"")+"/"+u.replace(/^\/+/,""):me}function buildFullPath(me,u,t){let de=!isAbsoluteURL(u);return me&&(de||t==!1)?combineURLs(me,u):u}const headersToObject=me=>me instanceof AxiosHeaders$1?{...me}:me;function mergeConfig$1(me,u){u=u||{};const t={};function de(ht,mt,gt,bt){return utils$2.isPlainObject(ht)&&utils$2.isPlainObject(mt)?utils$2.merge.call({caseless:bt},ht,mt):utils$2.isPlainObject(mt)?utils$2.merge({},mt):utils$2.isArray(mt)?mt.slice():mt}function pe(ht,mt,gt,bt){if(utils$2.isUndefined(mt)){if(!utils$2.isUndefined(ht))return de(void 0,ht,gt,bt)}else return de(ht,mt,gt,bt)}function Le(ht,mt){if(!utils$2.isUndefined(mt))return de(void 0,mt)}function Ye(ht,mt){if(utils$2.isUndefined(mt)){if(!utils$2.isUndefined(ht))return de(void 0,ht)}else return de(void 0,mt)}function tt(ht,mt,gt){if(gt in u)return de(ht,mt);if(gt in me)return de(void 0,ht)}const st={url:Le,method:Le,data:Le,baseURL:Ye,transformRequest:Ye,transformResponse:Ye,paramsSerializer:Ye,timeout:Ye,timeoutMessage:Ye,withCredentials:Ye,withXSRFToken:Ye,adapter:Ye,responseType:Ye,xsrfCookieName:Ye,xsrfHeaderName:Ye,onUploadProgress:Ye,onDownloadProgress:Ye,decompress:Ye,maxContentLength:Ye,maxBodyLength:Ye,beforeRedirect:Ye,transport:Ye,httpAgent:Ye,httpsAgent:Ye,cancelToken:Ye,socketPath:Ye,responseEncoding:Ye,validateStatus:tt,headers:(ht,mt,gt)=>pe(headersToObject(ht),headersToObject(mt),gt,!0)};return utils$2.forEach(Object.keys(Object.assign({},me,u)),function(mt){const gt=st[mt]||pe,bt=gt(me[mt],u[mt],mt);utils$2.isUndefined(bt)&&gt!==tt||(t[mt]=bt)}),t}const resolveConfig=me=>{const u=mergeConfig$1({},me);let{data:t,withXSRFToken:de,xsrfHeaderName:pe,xsrfCookieName:Le,headers:Ye,auth:tt}=u;u.headers=Ye=AxiosHeaders$1.from(Ye),u.url=buildURL(buildFullPath(u.baseURL,u.url,u.allowAbsoluteUrls),me.params,me.paramsSerializer),tt&&Ye.set("Authorization","Basic "+btoa((tt.username||"")+":"+(tt.password?unescape(encodeURIComponent(tt.password)):"")));let st;if(utils$2.isFormData(t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Ye.setContentType(void 0);else if((st=Ye.getContentType())!==!1){const[ht,...mt]=st?st.split(";").map(gt=>gt.trim()).filter(Boolean):[];Ye.setContentType([ht||"multipart/form-data",...mt].join("; "))}}if(platform.hasStandardBrowserEnv&&(de&&utils$2.isFunction(de)&&(de=de(u)),de||de!==!1&&isURLSameOrigin(u.url))){const ht=pe&&Le&&cookies.read(Le);ht&&Ye.set(pe,ht)}return u},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(me){return new Promise(function(t,de){const pe=resolveConfig(me);let Le=pe.data;const Ye=AxiosHeaders$1.from(pe.headers).normalize();let{responseType:tt,onUploadProgress:st,onDownloadProgress:ht}=pe,mt,gt,bt,_t,vt;function Tt(){_t&&_t(),vt&&vt(),pe.cancelToken&&pe.cancelToken.unsubscribe(mt),pe.signal&&pe.signal.removeEventListener("abort",mt)}let St=new XMLHttpRequest;St.open(pe.method.toUpperCase(),pe.url,!0),St.timeout=pe.timeout;function Rt(){if(!St)return;const Ot=AxiosHeaders$1.from("getAllResponseHeaders"in St&&St.getAllResponseHeaders()),Bt={data:!tt||tt==="text"||tt==="json"?St.responseText:St.response,status:St.status,statusText:St.statusText,headers:Ot,config:me,request:St};settle(function($t){t($t),Tt()},function($t){de($t),Tt()},Bt),St=null}"onloadend"in St?St.onloadend=Rt:St.onreadystatechange=function(){!St||St.readyState!==4||St.status===0&&!(St.responseURL&&St.responseURL.indexOf("file:")===0)||setTimeout(Rt)},St.onabort=function(){St&&(de(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,me,St)),St=null)},St.onerror=function(){de(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,me,St)),St=null},St.ontimeout=function(){let Mt=pe.timeout?"timeout of "+pe.timeout+"ms exceeded":"timeout exceeded";const Bt=pe.transitional||transitionalDefaults;pe.timeoutErrorMessage&&(Mt=pe.timeoutErrorMessage),de(new AxiosError$1(Mt,Bt.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,me,St)),St=null},Le===void 0&&Ye.setContentType(null),"setRequestHeader"in St&&utils$2.forEach(Ye.toJSON(),function(Mt,Bt){St.setRequestHeader(Bt,Mt)}),utils$2.isUndefined(pe.withCredentials)||(St.withCredentials=!!pe.withCredentials),tt&&tt!=="json"&&(St.responseType=pe.responseType),ht&&([bt,vt]=progressEventReducer(ht,!0),St.addEventListener("progress",bt)),st&&St.upload&&([gt,_t]=progressEventReducer(st),St.upload.addEventListener("progress",gt),St.upload.addEventListener("loadend",_t)),(pe.cancelToken||pe.signal)&&(mt=Ot=>{St&&(de(!Ot||Ot.type?new CanceledError$1(null,me,St):Ot),St.abort(),St=null)},pe.cancelToken&&pe.cancelToken.subscribe(mt),pe.signal&&(pe.signal.aborted?mt():pe.signal.addEventListener("abort",mt)));const Pt=parseProtocol(pe.url);if(Pt&&platform.protocols.indexOf(Pt)===-1){de(new AxiosError$1("Unsupported protocol "+Pt+":",AxiosError$1.ERR_BAD_REQUEST,me));return}St.send(Le||null)})},composeSignals=(me,u)=>{const{length:t}=me=me?me.filter(Boolean):[];if(u||t){let de=new AbortController,pe;const Le=function(ht){if(!pe){pe=!0,tt();const mt=ht instanceof Error?ht:this.reason;de.abort(mt instanceof AxiosError$1?mt:new CanceledError$1(mt instanceof Error?mt.message:mt))}};let Ye=u&&setTimeout(()=>{Ye=null,Le(new AxiosError$1(`timeout ${u} of ms exceeded`,AxiosError$1.ETIMEDOUT))},u);const tt=()=>{me&&(Ye&&clearTimeout(Ye),Ye=null,me.forEach(ht=>{ht.unsubscribe?ht.unsubscribe(Le):ht.removeEventListener("abort",Le)}),me=null)};me.forEach(ht=>ht.addEventListener("abort",Le));const{signal:st}=de;return st.unsubscribe=()=>utils$2.asap(tt),st}},streamChunk=function*(me,u){let t=me.byteLength;if(t<u){yield me;return}let de=0,pe;for(;de<t;)pe=de+u,yield me.slice(de,pe),de=pe},readBytes=async function*(me,u){for await(const t of readStream(me))yield*streamChunk(t,u)},readStream=async function*(me){if(me[Symbol.asyncIterator]){yield*me;return}const u=me.getReader();try{for(;;){const{done:t,value:de}=await u.read();if(t)break;yield de}}finally{await u.cancel()}},trackStream=(me,u,t,de)=>{const pe=readBytes(me,u);let Le=0,Ye,tt=st=>{Ye||(Ye=!0,de&&de(st))};return new ReadableStream({async pull(st){try{const{done:ht,value:mt}=await pe.next();if(ht){tt(),st.close();return}let gt=mt.byteLength;if(t){let bt=Le+=gt;t(bt)}st.enqueue(new Uint8Array(mt))}catch(ht){throw tt(ht),ht}},cancel(st){return tt(st),pe.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(me=>u=>me.encode(u))(new TextEncoder):async me=>new Uint8Array(await new Response(me).arrayBuffer())),test=(me,...u)=>{try{return!!me(...u)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let me=!1;const u=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return me=!0,"half"}}).headers.has("Content-Type");return me&&!u}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(me=>me.body)};isFetchSupported&&(me=>{["text","arrayBuffer","blob","formData","stream"].forEach(u=>{!resolvers[u]&&(resolvers[u]=utils$2.isFunction(me[u])?t=>t[u]():(t,de)=>{throw new AxiosError$1(`Response type '${u}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,de)})})})(new Response);const getBodyLength=async me=>{if(me==null)return 0;if(utils$2.isBlob(me))return me.size;if(utils$2.isSpecCompliantForm(me))return(await new Request(platform.origin,{method:"POST",body:me}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(me)||utils$2.isArrayBuffer(me))return me.byteLength;if(utils$2.isURLSearchParams(me)&&(me=me+""),utils$2.isString(me))return(await encodeText(me)).byteLength},resolveBodyLength=async(me,u)=>{const t=utils$2.toFiniteNumber(me.getContentLength());return t??getBodyLength(u)},fetchAdapter=isFetchSupported&&(async me=>{let{url:u,method:t,data:de,signal:pe,cancelToken:Le,timeout:Ye,onDownloadProgress:tt,onUploadProgress:st,responseType:ht,headers:mt,withCredentials:gt="same-origin",fetchOptions:bt}=resolveConfig(me);ht=ht?(ht+"").toLowerCase():"text";let _t=composeSignals([pe,Le&&Le.toAbortSignal()],Ye),vt;const Tt=_t&&_t.unsubscribe&&(()=>{_t.unsubscribe()});let St;try{if(st&&supportsRequestStream&&t!=="get"&&t!=="head"&&(St=await resolveBodyLength(mt,de))!==0){let Bt=new Request(u,{method:"POST",body:de,duplex:"half"}),Dt;if(utils$2.isFormData(de)&&(Dt=Bt.headers.get("content-type"))&&mt.setContentType(Dt),Bt.body){const[$t,kt]=progressEventDecorator(St,progressEventReducer(asyncDecorator(st)));de=trackStream(Bt.body,DEFAULT_CHUNK_SIZE,$t,kt)}}utils$2.isString(gt)||(gt=gt?"include":"omit");const Rt="credentials"in Request.prototype;vt=new Request(u,{...bt,signal:_t,method:t.toUpperCase(),headers:mt.normalize().toJSON(),body:de,duplex:"half",credentials:Rt?gt:void 0});let Pt=await fetch(vt);const Ot=supportsResponseStream&&(ht==="stream"||ht==="response");if(supportsResponseStream&&(tt||Ot&&Tt)){const Bt={};["status","statusText","headers"].forEach(Et=>{Bt[Et]=Pt[Et]});const Dt=utils$2.toFiniteNumber(Pt.headers.get("content-length")),[$t,kt]=tt&&progressEventDecorator(Dt,progressEventReducer(asyncDecorator(tt),!0))||[];Pt=new Response(trackStream(Pt.body,DEFAULT_CHUNK_SIZE,$t,()=>{kt&&kt(),Tt&&Tt()}),Bt)}ht=ht||"text";let Mt=await resolvers[utils$2.findKey(resolvers,ht)||"text"](Pt,me);return!Ot&&Tt&&Tt(),await new Promise((Bt,Dt)=>{settle(Bt,Dt,{data:Mt,headers:AxiosHeaders$1.from(Pt.headers),status:Pt.status,statusText:Pt.statusText,config:me,request:vt})})}catch(Rt){throw Tt&&Tt(),Rt&&Rt.name==="TypeError"&&/fetch/i.test(Rt.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,me,vt),{cause:Rt.cause||Rt}):AxiosError$1.from(Rt,Rt&&Rt.code,me,vt)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(me,u)=>{if(me){try{Object.defineProperty(me,"name",{value:u})}catch{}Object.defineProperty(me,"adapterName",{value:u})}});const renderReason=me=>`- ${me}`,isResolvedHandle=me=>utils$2.isFunction(me)||me===null||me===!1,adapters={getAdapter:me=>{me=utils$2.isArray(me)?me:[me];const{length:u}=me;let t,de;const pe={};for(let Le=0;Le<u;Le++){t=me[Le];let Ye;if(de=t,!isResolvedHandle(t)&&(de=knownAdapters[(Ye=String(t)).toLowerCase()],de===void 0))throw new AxiosError$1(`Unknown adapter '${Ye}'`);if(de)break;pe[Ye||"#"+Le]=de}if(!de){const Le=Object.entries(pe).map(([tt,st])=>`adapter ${tt} `+(st===!1?"is not supported by the environment":"is not available in the build"));let Ye=u?Le.length>1?`since :
`+Le.map(renderReason).join(`
`):" "+renderReason(Le[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+Ye,"ERR_NOT_SUPPORT")}return de},adapters:knownAdapters};function throwIfCancellationRequested(me){if(me.cancelToken&&me.cancelToken.throwIfRequested(),me.signal&&me.signal.aborted)throw new CanceledError$1(null,me)}function dispatchRequest(me){return throwIfCancellationRequested(me),me.headers=AxiosHeaders$1.from(me.headers),me.data=transformData.call(me,me.transformRequest),["post","put","patch"].indexOf(me.method)!==-1&&me.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(me.adapter||defaults.adapter)(me).then(function(de){return throwIfCancellationRequested(me),de.data=transformData.call(me,me.transformResponse,de),de.headers=AxiosHeaders$1.from(de.headers),de},function(de){return isCancel$1(de)||(throwIfCancellationRequested(me),de&&de.response&&(de.response.data=transformData.call(me,me.transformResponse,de.response),de.response.headers=AxiosHeaders$1.from(de.response.headers))),Promise.reject(de)})}const VERSION$1="1.8.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((me,u)=>{validators$1[me]=function(de){return typeof de===me||"a"+(u<1?"n ":" ")+me}});const deprecatedWarnings={};validators$1.transitional=function(u,t,de){function pe(Le,Ye){return"[Axios v"+VERSION$1+"] Transitional option '"+Le+"'"+Ye+(de?". "+de:"")}return(Le,Ye,tt)=>{if(u===!1)throw new AxiosError$1(pe(Ye," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[Ye]&&(deprecatedWarnings[Ye]=!0,console.warn(pe(Ye," has been deprecated since v"+t+" and will be removed in the near future"))),u?u(Le,Ye,tt):!0}};validators$1.spelling=function(u){return(t,de)=>(console.warn(`${de} is likely a misspelling of ${u}`),!0)};function assertOptions(me,u,t){if(typeof me!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const de=Object.keys(me);let pe=de.length;for(;pe-- >0;){const Le=de[pe],Ye=u[Le];if(Ye){const tt=me[Le],st=tt===void 0||Ye(tt,Le,me);if(st!==!0)throw new AxiosError$1("option "+Le+" must be "+st,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError$1("Unknown option "+Le,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(u){this.defaults=u,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(u,t){try{return await this._request(u,t)}catch(de){if(de instanceof Error){let pe={};Error.captureStackTrace?Error.captureStackTrace(pe):pe=new Error;const Le=pe.stack?pe.stack.replace(/^.+\n/,""):"";try{de.stack?Le&&!String(de.stack).endsWith(Le.replace(/^.+\n.+\n/,""))&&(de.stack+=`
`+Le):de.stack=Le}catch{}}throw de}}_request(u,t){typeof u=="string"?(t=t||{},t.url=u):t=u||{},t=mergeConfig$1(this.defaults,t);const{transitional:de,paramsSerializer:pe,headers:Le}=t;de!==void 0&&validator.assertOptions(de,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),pe!=null&&(utils$2.isFunction(pe)?t.paramsSerializer={serialize:pe}:validator.assertOptions(pe,{encode:validators.function,serialize:validators.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let Ye=Le&&utils$2.merge(Le.common,Le[t.method]);Le&&utils$2.forEach(["delete","get","head","post","put","patch","common"],vt=>{delete Le[vt]}),t.headers=AxiosHeaders$1.concat(Ye,Le);const tt=[];let st=!0;this.interceptors.request.forEach(function(Tt){typeof Tt.runWhen=="function"&&Tt.runWhen(t)===!1||(st=st&&Tt.synchronous,tt.unshift(Tt.fulfilled,Tt.rejected))});const ht=[];this.interceptors.response.forEach(function(Tt){ht.push(Tt.fulfilled,Tt.rejected)});let mt,gt=0,bt;if(!st){const vt=[dispatchRequest.bind(this),void 0];for(vt.unshift.apply(vt,tt),vt.push.apply(vt,ht),bt=vt.length,mt=Promise.resolve(t);gt<bt;)mt=mt.then(vt[gt++],vt[gt++]);return mt}bt=tt.length;let _t=t;for(gt=0;gt<bt;){const vt=tt[gt++],Tt=tt[gt++];try{_t=vt(_t)}catch(St){Tt.call(this,St);break}}try{mt=dispatchRequest.call(this,_t)}catch(vt){return Promise.reject(vt)}for(gt=0,bt=ht.length;gt<bt;)mt=mt.then(ht[gt++],ht[gt++]);return mt}getUri(u){u=mergeConfig$1(this.defaults,u);const t=buildFullPath(u.baseURL,u.url,u.allowAbsoluteUrls);return buildURL(t,u.params,u.paramsSerializer)}};utils$2.forEach(["delete","get","head","options"],function(u){Axios$1.prototype[u]=function(t,de){return this.request(mergeConfig$1(de||{},{method:u,url:t,data:(de||{}).data}))}});utils$2.forEach(["post","put","patch"],function(u){function t(de){return function(Le,Ye,tt){return this.request(mergeConfig$1(tt||{},{method:u,headers:de?{"Content-Type":"multipart/form-data"}:{},url:Le,data:Ye}))}}Axios$1.prototype[u]=t(),Axios$1.prototype[u+"Form"]=t(!0)});let CancelToken$1=class mm{constructor(u){if(typeof u!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(Le){t=Le});const de=this;this.promise.then(pe=>{if(!de._listeners)return;let Le=de._listeners.length;for(;Le-- >0;)de._listeners[Le](pe);de._listeners=null}),this.promise.then=pe=>{let Le;const Ye=new Promise(tt=>{de.subscribe(tt),Le=tt}).then(pe);return Ye.cancel=function(){de.unsubscribe(Le)},Ye},u(function(Le,Ye,tt){de.reason||(de.reason=new CanceledError$1(Le,Ye,tt),t(de.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(u){if(this.reason){u(this.reason);return}this._listeners?this._listeners.push(u):this._listeners=[u]}unsubscribe(u){if(!this._listeners)return;const t=this._listeners.indexOf(u);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const u=new AbortController,t=de=>{u.abort(de)};return this.subscribe(t),u.signal.unsubscribe=()=>this.unsubscribe(t),u.signal}static source(){let u;return{token:new mm(function(pe){u=pe}),cancel:u}}};function spread$1(me){return function(t){return me.apply(null,t)}}function isAxiosError$1(me){return utils$2.isObject(me)&&me.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([me,u])=>{HttpStatusCode$1[u]=me});function createInstance(me){const u=new Axios$1(me),t=bind(Axios$1.prototype.request,u);return utils$2.extend(t,Axios$1.prototype,u,{allOwnKeys:!0}),utils$2.extend(t,u,null,{allOwnKeys:!0}),t.create=function(pe){return createInstance(mergeConfig$1(me,pe))},t}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(u){return Promise.all(u)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=me=>formDataToJSON(utils$2.isHTMLForm(me)?new FormData(me):me);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,CircularProgress=({size:me})=>jsxRuntimeExports.jsxs("svg",{width:me,height:me,viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"60",strokeDashoffset:"20",style:{animation:"spin 1s linear infinite",transformOrigin:"center"}}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]});var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(me){var u=hasOwnProperty$c.call(me,symToStringTag$1),t=me[symToStringTag$1];try{me[symToStringTag$1]=void 0;var de=!0}catch{}var pe=nativeObjectToString$1.call(me);return de&&(u?me[symToStringTag$1]=t:delete me[symToStringTag$1]),pe}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(me){return nativeObjectToString.call(me)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(me){return me==null?me===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(me)?getRawTag(me):objectToString(me)}function isObjectLike(me){return me!=null&&typeof me=="object"}var symbolTag$3="[object Symbol]";function isSymbol(me){return typeof me=="symbol"||isObjectLike(me)&&baseGetTag(me)==symbolTag$3}function arrayMap(me,u){for(var t=-1,de=me==null?0:me.length,pe=Array(de);++t<de;)pe[t]=u(me[t],t,me);return pe}var isArray=Array.isArray,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(me){if(typeof me=="string")return me;if(isArray(me))return arrayMap(me,baseToString)+"";if(isSymbol(me))return symbolToString?symbolToString.call(me):"";var u=me+"";return u=="0"&&1/me==-1/0?"-0":u}var reWhitespace=/\s/;function trimmedEndIndex(me){for(var u=me.length;u--&&reWhitespace.test(me.charAt(u)););return u}var reTrimStart=/^\s+/;function baseTrim(me){return me&&me.slice(0,trimmedEndIndex(me)+1).replace(reTrimStart,"")}function isObject$2(me){var u=typeof me;return me!=null&&(u=="object"||u=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(me){if(typeof me=="number")return me;if(isSymbol(me))return NAN;if(isObject$2(me)){var u=typeof me.valueOf=="function"?me.valueOf():me;me=isObject$2(u)?u+"":u}if(typeof me!="string")return me===0?me:+me;me=baseTrim(me);var t=reIsBinary.test(me);return t||reIsOctal.test(me)?freeParseInt(me.slice(2),t?2:8):reIsBadHex.test(me)?NAN:+me}function identity(me){return me}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(me){if(!isObject$2(me))return!1;var u=baseGetTag(me);return u==funcTag$2||u==genTag$1||u==asyncTag||u==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var me=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return me?"Symbol(src)_1."+me:""}();function isMasked(me){return!!maskSrcKey&&maskSrcKey in me}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(me){if(me!=null){try{return funcToString$2.call(me)}catch{}try{return me+""}catch{}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(me){if(!isObject$2(me)||isMasked(me))return!1;var u=isFunction(me)?reIsNative:reIsHostCtor;return u.test(toSource(me))}function getValue(me,u){return me==null?void 0:me[u]}function getNative(me,u){var t=getValue(me,u);return baseIsNative(t)?t:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function me(){}return function(u){if(!isObject$2(u))return{};if(objectCreate)return objectCreate(u);me.prototype=u;var t=new me;return me.prototype=void 0,t}}();function apply(me,u,t){switch(t.length){case 0:return me.call(u);case 1:return me.call(u,t[0]);case 2:return me.call(u,t[0],t[1]);case 3:return me.call(u,t[0],t[1],t[2])}return me.apply(u,t)}function copyArray(me,u){var t=-1,de=me.length;for(u||(u=Array(de));++t<de;)u[t]=me[t];return u}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(me){var u=0,t=0;return function(){var de=nativeNow(),pe=HOT_SPAN-(de-t);if(t=de,pe>0){if(++u>=HOT_COUNT)return arguments[0]}else u=0;return me.apply(void 0,arguments)}}function constant(me){return function(){return me}}var defineProperty=function(){try{var me=getNative(Object,"defineProperty");return me({},"",{}),me}catch{}}(),baseSetToString=defineProperty?function(me,u){return defineProperty(me,"toString",{configurable:!0,enumerable:!1,value:constant(u),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(me,u){for(var t=-1,de=me==null?0:me.length;++t<de&&u(me[t],t,me)!==!1;);return me}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(me,u){var t=typeof me;return u=u??MAX_SAFE_INTEGER$1,!!u&&(t=="number"||t!="symbol"&&reIsUint.test(me))&&me>-1&&me%1==0&&me<u}function baseAssignValue(me,u,t){u=="__proto__"&&defineProperty?defineProperty(me,u,{configurable:!0,enumerable:!0,value:t,writable:!0}):me[u]=t}function eq(me,u){return me===u||me!==me&&u!==u}var objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function assignValue(me,u,t){var de=me[u];(!(hasOwnProperty$a.call(me,u)&&eq(de,t))||t===void 0&&!(u in me))&&baseAssignValue(me,u,t)}function copyObject(me,u,t,de){var pe=!t;t||(t={});for(var Le=-1,Ye=u.length;++Le<Ye;){var tt=u[Le],st=void 0;st===void 0&&(st=me[tt]),pe?baseAssignValue(t,tt,st):assignValue(t,tt,st)}return t}var nativeMax$1=Math.max;function overRest(me,u,t){return u=nativeMax$1(u===void 0?me.length-1:u,0),function(){for(var de=arguments,pe=-1,Le=nativeMax$1(de.length-u,0),Ye=Array(Le);++pe<Le;)Ye[pe]=de[u+pe];pe=-1;for(var tt=Array(u+1);++pe<u;)tt[pe]=de[pe];return tt[u]=t(Ye),apply(me,this,tt)}}function baseRest(me,u){return setToString(overRest(me,u,identity),me+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength$1(me){return typeof me=="number"&&me>-1&&me%1==0&&me<=MAX_SAFE_INTEGER}function isArrayLike(me){return me!=null&&isLength$1(me.length)&&!isFunction(me)}function isIterateeCall(me,u,t){if(!isObject$2(t))return!1;var de=typeof u;return(de=="number"?isArrayLike(t)&&isIndex(u,t.length):de=="string"&&u in t)?eq(t[u],me):!1}function createAssigner(me){return baseRest(function(u,t){var de=-1,pe=t.length,Le=pe>1?t[pe-1]:void 0,Ye=pe>2?t[2]:void 0;for(Le=me.length>3&&typeof Le=="function"?(pe--,Le):void 0,Ye&&isIterateeCall(t[0],t[1],Ye)&&(Le=pe<3?void 0:Le,pe=1),u=Object(u);++de<pe;){var tt=t[de];tt&&me(u,tt,de,Le)}return u})}var objectProto$b=Object.prototype;function isPrototype(me){var u=me&&me.constructor,t=typeof u=="function"&&u.prototype||objectProto$b;return me===t}function baseTimes(me,u){for(var t=-1,de=Array(me);++t<me;)de[t]=u(t);return de}var argsTag$3="[object Arguments]";function baseIsArguments(me){return isObjectLike(me)&&baseGetTag(me)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(me){return isObjectLike(me)&&hasOwnProperty$9.call(me,"callee")&&!propertyIsEnumerable$1.call(me,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(me){return isObjectLike(me)&&isLength$1(me.length)&&!!typedArrayTags[baseGetTag(me)]}function baseUnary(me){return function(u){return me(u)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var me=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return me||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function arrayLikeKeys(me,u){var t=isArray(me),de=!t&&isArguments(me),pe=!t&&!de&&isBuffer(me),Le=!t&&!de&&!pe&&isTypedArray(me),Ye=t||de||pe||Le,tt=Ye?baseTimes(me.length,String):[],st=tt.length;for(var ht in me)(u||hasOwnProperty$8.call(me,ht))&&!(Ye&&(ht=="length"||pe&&(ht=="offset"||ht=="parent")||Le&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||isIndex(ht,st)))&&tt.push(ht);return tt}function overArg(me,u){return function(t){return me(u(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeys(me){if(!isPrototype(me))return nativeKeys(me);var u=[];for(var t in Object(me))hasOwnProperty$7.call(me,t)&&t!="constructor"&&u.push(t);return u}function keys(me){return isArrayLike(me)?arrayLikeKeys(me):baseKeys(me)}function nativeKeysIn(me){var u=[];if(me!=null)for(var t in Object(me))u.push(t);return u}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function baseKeysIn(me){if(!isObject$2(me))return nativeKeysIn(me);var u=isPrototype(me),t=[];for(var de in me)de=="constructor"&&(u||!hasOwnProperty$6.call(me,de))||t.push(de);return t}function keysIn(me){return isArrayLike(me)?arrayLikeKeys(me,!0):baseKeysIn(me)}var assignIn=createAssigner(function(me,u){copyObject(u,keysIn(u),me)}),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(me,u){if(isArray(me))return!1;var t=typeof me;return t=="number"||t=="symbol"||t=="boolean"||me==null||isSymbol(me)?!0:reIsPlainProp.test(me)||!reIsDeepProp.test(me)||u!=null&&me in Object(u)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(me){var u=this.has(me)&&delete this.__data__[me];return this.size-=u?1:0,u}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashGet(me){var u=this.__data__;if(nativeCreate){var t=u[me];return t===HASH_UNDEFINED$2?void 0:t}return hasOwnProperty$5.call(u,me)?u[me]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(me){var u=this.__data__;return nativeCreate?u[me]!==void 0:hasOwnProperty$4.call(u,me)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(me,u){var t=this.__data__;return this.size+=this.has(me)?0:1,t[me]=nativeCreate&&u===void 0?HASH_UNDEFINED$1:u,this}function Hash(me){var u=-1,t=me==null?0:me.length;for(this.clear();++u<t;){var de=me[u];this.set(de[0],de[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(me,u){for(var t=me.length;t--;)if(eq(me[t][0],u))return t;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(me){var u=this.__data__,t=assocIndexOf(u,me);if(t<0)return!1;var de=u.length-1;return t==de?u.pop():splice.call(u,t,1),--this.size,!0}function listCacheGet(me){var u=this.__data__,t=assocIndexOf(u,me);return t<0?void 0:u[t][1]}function listCacheHas(me){return assocIndexOf(this.__data__,me)>-1}function listCacheSet(me,u){var t=this.__data__,de=assocIndexOf(t,me);return de<0?(++this.size,t.push([me,u])):t[de][1]=u,this}function ListCache(me){var u=-1,t=me==null?0:me.length;for(this.clear();++u<t;){var de=me[u];this.set(de[0],de[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(me){var u=typeof me;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?me!=="__proto__":me===null}function getMapData(me,u){var t=me.__data__;return isKeyable(u)?t[typeof u=="string"?"string":"hash"]:t.map}function mapCacheDelete(me){var u=getMapData(this,me).delete(me);return this.size-=u?1:0,u}function mapCacheGet(me){return getMapData(this,me).get(me)}function mapCacheHas(me){return getMapData(this,me).has(me)}function mapCacheSet(me,u){var t=getMapData(this,me),de=t.size;return t.set(me,u),this.size+=t.size==de?0:1,this}function MapCache(me){var u=-1,t=me==null?0:me.length;for(this.clear();++u<t;){var de=me[u];this.set(de[0],de[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(me,u){if(typeof me!="function"||u!=null&&typeof u!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var t=function(){var de=arguments,pe=u?u.apply(this,de):de[0],Le=t.cache;if(Le.has(pe))return Le.get(pe);var Ye=me.apply(this,de);return t.cache=Le.set(pe,Ye)||Le,Ye};return t.cache=new(memoize.Cache||MapCache),t}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(me){var u=memoize(me,function(de){return t.size===MAX_MEMOIZE_SIZE&&t.clear(),de}),t=u.cache;return u}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(me){var u=[];return me.charCodeAt(0)===46&&u.push(""),me.replace(rePropName,function(t,de,pe,Le){u.push(pe?Le.replace(reEscapeChar,"$1"):de||t)}),u});function toString$1(me){return me==null?"":baseToString(me)}function castPath(me,u){return isArray(me)?me:isKey(me,u)?[me]:stringToPath(toString$1(me))}function toKey(me){if(typeof me=="string"||isSymbol(me))return me;var u=me+"";return u=="0"&&1/me==-1/0?"-0":u}function baseGet(me,u){u=castPath(u,me);for(var t=0,de=u.length;me!=null&&t<de;)me=me[toKey(u[t++])];return t&&t==de?me:void 0}function get(me,u,t){var de=me==null?void 0:baseGet(me,u);return de===void 0?t:de}function arrayPush(me,u){for(var t=-1,de=u.length,pe=me.length;++t<de;)me[pe+t]=u[t];return me}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(me){if(!isObjectLike(me)||baseGetTag(me)!=objectTag$3)return!1;var u=getPrototype(me);if(u===null)return!0;var t=hasOwnProperty$3.call(u,"constructor")&&u.constructor;return typeof t=="function"&&t instanceof t&&funcToString.call(t)==objectCtorString}function baseSlice(me,u,t){var de=-1,pe=me.length;u<0&&(u=-u>pe?0:pe+u),t=t>pe?pe:t,t<0&&(t+=pe),pe=u>t?0:t-u>>>0,u>>>=0;for(var Le=Array(pe);++de<pe;)Le[de]=me[de+u];return Le}function castSlice(me,u,t){var de=me.length;return t=t===void 0?de:t,baseSlice(me,u,t)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode(me){return reHasUnicode.test(me)}function asciiToArray(me){return me.split("")}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(me){return me.match(reUnicode)||[]}function stringToArray(me){return hasUnicode(me)?unicodeToArray(me):asciiToArray(me)}function createCaseFirst(me){return function(u){u=toString$1(u);var t=hasUnicode(u)?stringToArray(u):void 0,de=t?t[0]:u.charAt(0),pe=t?castSlice(t,1).join(""):u.slice(1);return de[me]()+pe}}var upperFirst=createCaseFirst("toUpperCase");function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(me){var u=this.__data__,t=u.delete(me);return this.size=u.size,t}function stackGet(me){return this.__data__.get(me)}function stackHas(me){return this.__data__.has(me)}var LARGE_ARRAY_SIZE=200;function stackSet(me,u){var t=this.__data__;if(t instanceof ListCache){var de=t.__data__;if(!Map$1||de.length<LARGE_ARRAY_SIZE-1)return de.push([me,u]),this.size=++t.size,this;t=this.__data__=new MapCache(de)}return t.set(me,u),this.size=t.size,this}function Stack(me){var u=this.__data__=new ListCache(me);this.size=u.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(me,u){return me&&copyObject(u,keys(u),me)}function baseAssignIn(me,u){return me&&copyObject(u,keysIn(u),me)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(me,u){if(u)return me.slice();var t=me.length,de=allocUnsafe?allocUnsafe(t):new me.constructor(t);return me.copy(de),de}function arrayFilter(me,u){for(var t=-1,de=me==null?0:me.length,pe=0,Le=[];++t<de;){var Ye=me[t];u(Ye,t,me)&&(Le[pe++]=Ye)}return Le}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(me){return me==null?[]:(me=Object(me),arrayFilter(nativeGetSymbols$1(me),function(u){return propertyIsEnumerable.call(me,u)}))}:stubArray;function copySymbols(me,u){return copyObject(me,getSymbols(me),u)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(me){for(var u=[];me;)arrayPush(u,getSymbols(me)),me=getPrototype(me);return u}:stubArray;function copySymbolsIn(me,u){return copyObject(me,getSymbolsIn(me),u)}function baseGetAllKeys(me,u,t){var de=u(me);return isArray(me)?de:arrayPush(de,t(me))}function getAllKeys(me){return baseGetAllKeys(me,keys,getSymbols)}function getAllKeysIn(me){return baseGetAllKeys(me,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(me){var u=baseGetTag(me),t=u==objectTag$2?me.constructor:void 0,de=t?toSource(t):"";if(de)switch(de){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return u});var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function initCloneArray(me){var u=me.length,t=new me.constructor(u);return u&&typeof me[0]=="string"&&hasOwnProperty$2.call(me,"index")&&(t.index=me.index,t.input=me.input),t}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(me){var u=new me.constructor(me.byteLength);return new Uint8Array$1(u).set(new Uint8Array$1(me)),u}function cloneDataView(me,u){var t=u?cloneArrayBuffer(me.buffer):me.buffer;return new me.constructor(t,me.byteOffset,me.byteLength)}var reFlags=/\w*$/;function cloneRegExp(me){var u=new me.constructor(me.source,reFlags.exec(me));return u.lastIndex=me.lastIndex,u}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(me){return symbolValueOf$1?Object(symbolValueOf$1.call(me)):{}}function cloneTypedArray(me,u){var t=u?cloneArrayBuffer(me.buffer):me.buffer;return new me.constructor(t,me.byteOffset,me.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(me,u,t){var de=me.constructor;switch(u){case arrayBufferTag$2:return cloneArrayBuffer(me);case boolTag$2:case dateTag$2:return new de(+me);case dataViewTag$2:return cloneDataView(me,t);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(me,t);case mapTag$3:return new de;case numberTag$2:case stringTag$3:return new de(me);case regexpTag$2:return cloneRegExp(me);case setTag$3:return new de;case symbolTag$2:return cloneSymbol(me)}}function initCloneObject(me){return typeof me.constructor=="function"&&!isPrototype(me)?baseCreate(getPrototype(me)):{}}var mapTag$2="[object Map]";function baseIsMap(me){return isObjectLike(me)&&getTag(me)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(me){return isObjectLike(me)&&getTag(me)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(me,u,t,de,pe,Le){var Ye,tt=u&CLONE_DEEP_FLAG$2,st=u&CLONE_FLAT_FLAG,ht=u&CLONE_SYMBOLS_FLAG$3;if(t&&(Ye=pe?t(me,de,pe,Le):t(me)),Ye!==void 0)return Ye;if(!isObject$2(me))return me;var mt=isArray(me);if(mt){if(Ye=initCloneArray(me),!tt)return copyArray(me,Ye)}else{var gt=getTag(me),bt=gt==funcTag||gt==genTag;if(isBuffer(me))return cloneBuffer(me,tt);if(gt==objectTag$1||gt==argsTag$1||bt&&!pe){if(Ye=st||bt?{}:initCloneObject(me),!tt)return st?copySymbolsIn(me,baseAssignIn(Ye,me)):copySymbols(me,baseAssign(Ye,me))}else{if(!cloneableTags[gt])return pe?me:{};Ye=initCloneByTag(me,gt,tt)}}Le||(Le=new Stack);var _t=Le.get(me);if(_t)return _t;Le.set(me,Ye),isSet(me)?me.forEach(function(St){Ye.add(baseClone(St,u,t,St,me,Le))}):isMap(me)&&me.forEach(function(St,Rt){Ye.set(Rt,baseClone(St,u,t,Rt,me,Le))});var vt=ht?st?getAllKeysIn:getAllKeys:st?keysIn:keys,Tt=mt?void 0:vt(me);return arrayEach(Tt||me,function(St,Rt){Tt&&(Rt=St,St=me[Rt]),assignValue(Ye,Rt,baseClone(St,u,t,Rt,me,Le))}),Ye}var CLONE_SYMBOLS_FLAG$2=4;function clone$1(me){return baseClone(me,CLONE_SYMBOLS_FLAG$2)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(me){return baseClone(me,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeepWith(me,u){return u=typeof u=="function"?u:void 0,baseClone(me,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,u)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(me){return this.__data__.set(me,HASH_UNDEFINED),this}function setCacheHas(me){return this.__data__.has(me)}function SetCache(me){var u=-1,t=me==null?0:me.length;for(this.__data__=new MapCache;++u<t;)this.add(me[u])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(me,u){for(var t=-1,de=me==null?0:me.length;++t<de;)if(u(me[t],t,me))return!0;return!1}function cacheHas(me,u){return me.has(u)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(me,u,t,de,pe,Le){var Ye=t&COMPARE_PARTIAL_FLAG$5,tt=me.length,st=u.length;if(tt!=st&&!(Ye&&st>tt))return!1;var ht=Le.get(me),mt=Le.get(u);if(ht&&mt)return ht==u&&mt==me;var gt=-1,bt=!0,_t=t&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(Le.set(me,u),Le.set(u,me);++gt<tt;){var vt=me[gt],Tt=u[gt];if(de)var St=Ye?de(Tt,vt,gt,u,me,Le):de(vt,Tt,gt,me,u,Le);if(St!==void 0){if(St)continue;bt=!1;break}if(_t){if(!arraySome(u,function(Rt,Pt){if(!cacheHas(_t,Pt)&&(vt===Rt||pe(vt,Rt,t,de,Le)))return _t.push(Pt)})){bt=!1;break}}else if(!(vt===Tt||pe(vt,Tt,t,de,Le))){bt=!1;break}}return Le.delete(me),Le.delete(u),bt}function mapToArray(me){var u=-1,t=Array(me.size);return me.forEach(function(de,pe){t[++u]=[pe,de]}),t}function setToArray(me){var u=-1,t=Array(me.size);return me.forEach(function(de){t[++u]=de}),t}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(me,u,t,de,pe,Le,Ye){switch(t){case dataViewTag:if(me.byteLength!=u.byteLength||me.byteOffset!=u.byteOffset)return!1;me=me.buffer,u=u.buffer;case arrayBufferTag:return!(me.byteLength!=u.byteLength||!Le(new Uint8Array$1(me),new Uint8Array$1(u)));case boolTag:case dateTag:case numberTag:return eq(+me,+u);case errorTag:return me.name==u.name&&me.message==u.message;case regexpTag:case stringTag$1:return me==u+"";case mapTag:var tt=mapToArray;case setTag:var st=de&COMPARE_PARTIAL_FLAG$4;if(tt||(tt=setToArray),me.size!=u.size&&!st)return!1;var ht=Ye.get(me);if(ht)return ht==u;de|=COMPARE_UNORDERED_FLAG$2,Ye.set(me,u);var mt=equalArrays(tt(me),tt(u),de,pe,Le,Ye);return Ye.delete(me),mt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(me)==symbolValueOf.call(u)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(me,u,t,de,pe,Le){var Ye=t&COMPARE_PARTIAL_FLAG$3,tt=getAllKeys(me),st=tt.length,ht=getAllKeys(u),mt=ht.length;if(st!=mt&&!Ye)return!1;for(var gt=st;gt--;){var bt=tt[gt];if(!(Ye?bt in u:hasOwnProperty$1.call(u,bt)))return!1}var _t=Le.get(me),vt=Le.get(u);if(_t&&vt)return _t==u&&vt==me;var Tt=!0;Le.set(me,u),Le.set(u,me);for(var St=Ye;++gt<st;){bt=tt[gt];var Rt=me[bt],Pt=u[bt];if(de)var Ot=Ye?de(Pt,Rt,bt,u,me,Le):de(Rt,Pt,bt,me,u,Le);if(!(Ot===void 0?Rt===Pt||pe(Rt,Pt,t,de,Le):Ot)){Tt=!1;break}St||(St=bt=="constructor")}if(Tt&&!St){var Mt=me.constructor,Bt=u.constructor;Mt!=Bt&&"constructor"in me&&"constructor"in u&&!(typeof Mt=="function"&&Mt instanceof Mt&&typeof Bt=="function"&&Bt instanceof Bt)&&(Tt=!1)}return Le.delete(me),Le.delete(u),Tt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(me,u,t,de,pe,Le){var Ye=isArray(me),tt=isArray(u),st=Ye?arrayTag:getTag(me),ht=tt?arrayTag:getTag(u);st=st==argsTag?objectTag:st,ht=ht==argsTag?objectTag:ht;var mt=st==objectTag,gt=ht==objectTag,bt=st==ht;if(bt&&isBuffer(me)){if(!isBuffer(u))return!1;Ye=!0,mt=!1}if(bt&&!mt)return Le||(Le=new Stack),Ye||isTypedArray(me)?equalArrays(me,u,t,de,pe,Le):equalByTag(me,u,st,t,de,pe,Le);if(!(t&COMPARE_PARTIAL_FLAG$2)){var _t=mt&&hasOwnProperty.call(me,"__wrapped__"),vt=gt&&hasOwnProperty.call(u,"__wrapped__");if(_t||vt){var Tt=_t?me.value():me,St=vt?u.value():u;return Le||(Le=new Stack),pe(Tt,St,t,de,Le)}}return bt?(Le||(Le=new Stack),equalObjects(me,u,t,de,pe,Le)):!1}function baseIsEqual(me,u,t,de,pe){return me===u?!0:me==null||u==null||!isObjectLike(me)&&!isObjectLike(u)?me!==me&&u!==u:baseIsEqualDeep(me,u,t,de,baseIsEqual,pe)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(me,u,t,de){var pe=t.length,Le=pe;if(me==null)return!Le;for(me=Object(me);pe--;){var Ye=t[pe];if(Ye[2]?Ye[1]!==me[Ye[0]]:!(Ye[0]in me))return!1}for(;++pe<Le;){Ye=t[pe];var tt=Ye[0],st=me[tt],ht=Ye[1];if(Ye[2]){if(st===void 0&&!(tt in me))return!1}else{var mt=new Stack,gt;if(!(gt===void 0?baseIsEqual(ht,st,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,de,mt):gt))return!1}}return!0}function isStrictComparable(me){return me===me&&!isObject$2(me)}function getMatchData(me){for(var u=keys(me),t=u.length;t--;){var de=u[t],pe=me[de];u[t]=[de,pe,isStrictComparable(pe)]}return u}function matchesStrictComparable(me,u){return function(t){return t==null?!1:t[me]===u&&(u!==void 0||me in Object(t))}}function baseMatches(me){var u=getMatchData(me);return u.length==1&&u[0][2]?matchesStrictComparable(u[0][0],u[0][1]):function(t){return t===me||baseIsMatch(t,me,u)}}function baseHasIn(me,u){return me!=null&&u in Object(me)}function hasPath(me,u,t){u=castPath(u,me);for(var de=-1,pe=u.length,Le=!1;++de<pe;){var Ye=toKey(u[de]);if(!(Le=me!=null&&t(me,Ye)))break;me=me[Ye]}return Le||++de!=pe?Le:(pe=me==null?0:me.length,!!pe&&isLength$1(pe)&&isIndex(Ye,pe)&&(isArray(me)||isArguments(me)))}function hasIn(me,u){return me!=null&&hasPath(me,u,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(me,u){return isKey(me)&&isStrictComparable(u)?matchesStrictComparable(toKey(me),u):function(t){var de=get(t,me);return de===void 0&&de===u?hasIn(t,me):baseIsEqual(u,de,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(me){return function(u){return u==null?void 0:u[me]}}function basePropertyDeep(me){return function(u){return baseGet(u,me)}}function property(me){return isKey(me)?baseProperty(toKey(me)):basePropertyDeep(me)}function baseIteratee(me){return typeof me=="function"?me:me==null?identity:typeof me=="object"?isArray(me)?baseMatchesProperty(me[0],me[1]):baseMatches(me):property(me)}function createBaseFor(me){return function(u,t,de){for(var pe=-1,Le=Object(u),Ye=de(u),tt=Ye.length;tt--;){var st=Ye[++pe];if(t(Le[st],st,Le)===!1)break}return u}}var baseFor=createBaseFor();function baseForOwn(me,u){return me&&baseFor(me,u,keys)}function createBaseEach(me,u){return function(t,de){if(t==null)return t;if(!isArrayLike(t))return me(t,de);for(var pe=t.length,Le=-1,Ye=Object(t);++Le<pe&&de(Ye[Le],Le,Ye)!==!1;);return t}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(me,u,t){var de,pe,Le,Ye,tt,st,ht=0,mt=!1,gt=!1,bt=!0;if(typeof me!="function")throw new TypeError(FUNC_ERROR_TEXT$1);u=toNumber(u)||0,isObject$2(t)&&(mt=!!t.leading,gt="maxWait"in t,Le=gt?nativeMax(toNumber(t.maxWait)||0,u):Le,bt="trailing"in t?!!t.trailing:bt);function _t(Dt){var $t=de,kt=pe;return de=pe=void 0,ht=Dt,Ye=me.apply(kt,$t),Ye}function vt(Dt){return ht=Dt,tt=setTimeout(Rt,u),mt?_t(Dt):Ye}function Tt(Dt){var $t=Dt-st,kt=Dt-ht,Et=u-$t;return gt?nativeMin(Et,Le-kt):Et}function St(Dt){var $t=Dt-st,kt=Dt-ht;return st===void 0||$t>=u||$t<0||gt&&kt>=Le}function Rt(){var Dt=now();if(St(Dt))return Pt(Dt);tt=setTimeout(Rt,Tt(Dt))}function Pt(Dt){return tt=void 0,bt&&de?_t(Dt):(de=pe=void 0,Ye)}function Ot(){tt!==void 0&&clearTimeout(tt),ht=0,de=st=pe=tt=void 0}function Mt(){return tt===void 0?Ye:Pt(now())}function Bt(){var Dt=now(),$t=St(Dt);if(de=arguments,pe=this,st=Dt,$t){if(tt===void 0)return vt(st);if(gt)return clearTimeout(tt),tt=setTimeout(Rt,u),_t(st)}return tt===void 0&&(tt=setTimeout(Rt,u)),Ye}return Bt.cancel=Ot,Bt.flush=Mt,Bt}function assignMergeValue(me,u,t){(t!==void 0&&!eq(me[u],t)||t===void 0&&!(u in me))&&baseAssignValue(me,u,t)}function isArrayLikeObject(me){return isObjectLike(me)&&isArrayLike(me)}function safeGet(me,u){if(!(u==="constructor"&&typeof me[u]=="function")&&u!="__proto__")return me[u]}function toPlainObject(me){return copyObject(me,keysIn(me))}function baseMergeDeep(me,u,t,de,pe,Le,Ye){var tt=safeGet(me,t),st=safeGet(u,t),ht=Ye.get(st);if(ht){assignMergeValue(me,t,ht);return}var mt=Le?Le(tt,st,t+"",me,u,Ye):void 0,gt=mt===void 0;if(gt){var bt=isArray(st),_t=!bt&&isBuffer(st),vt=!bt&&!_t&&isTypedArray(st);mt=st,bt||_t||vt?isArray(tt)?mt=tt:isArrayLikeObject(tt)?mt=copyArray(tt):_t?(gt=!1,mt=cloneBuffer(st,!0)):vt?(gt=!1,mt=cloneTypedArray(st,!0)):mt=[]:isPlainObject(st)||isArguments(st)?(mt=tt,isArguments(tt)?mt=toPlainObject(tt):(!isObject$2(tt)||isFunction(tt))&&(mt=initCloneObject(st))):gt=!1}gt&&(Ye.set(st,mt),pe(mt,st,de,Le,Ye),Ye.delete(st)),assignMergeValue(me,t,mt)}function baseMerge(me,u,t,de,pe){me!==u&&baseFor(u,function(Le,Ye){if(pe||(pe=new Stack),isObject$2(Le))baseMergeDeep(me,u,Ye,t,baseMerge,de,pe);else{var tt=de?de(safeGet(me,Ye),Le,Ye+"",me,u,pe):void 0;tt===void 0&&(tt=Le),assignMergeValue(me,Ye,tt)}},keysIn)}function last(me){var u=me==null?0:me.length;return u?me[u-1]:void 0}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(me){return me=toString$1(me),me&&reHasRegExpChar.test(me)?me.replace(reRegExpChar,"\\$&"):me}function baseMap(me,u){var t=-1,de=isArrayLike(me)?Array(me.length):[];return baseEach(me,function(pe,Le,Ye){de[++t]=u(pe,Le,Ye)}),de}function map$1(me,u){var t=isArray(me)?arrayMap:baseMap;return t(me,baseIteratee(u))}var stringTag="[object String]";function isString(me){return typeof me=="string"||!isArray(me)&&isObjectLike(me)&&baseGetTag(me)==stringTag}function parent(me,u){return u.length<2?me:baseGet(me,baseSlice(u,0,-1))}function isElement$2(me){return isObjectLike(me)&&me.nodeType===1&&!isPlainObject(me)}function isEqual(me,u){return baseIsEqual(me,u)}function isEqualWith(me,u,t){t=typeof t=="function"?t:void 0;var de=t?t(me,u):void 0;return de===void 0?baseIsEqual(me,u,void 0,t):!!de}function mapValues(me,u){var t={};return u=baseIteratee(u),baseForOwn(me,function(de,pe,Le){baseAssignValue(t,pe,u(de,pe,Le))}),t}var merge=createAssigner(function(me,u,t){baseMerge(me,u,t)});function baseUnset(me,u){return u=castPath(u,me),me=parent(me,u),me==null||delete me[toKey(last(u))]}function baseSet(me,u,t,de){if(!isObject$2(me))return me;u=castPath(u,me);for(var pe=-1,Le=u.length,Ye=Le-1,tt=me;tt!=null&&++pe<Le;){var st=toKey(u[pe]),ht=t;if(st==="__proto__"||st==="constructor"||st==="prototype")return me;if(pe!=Ye){var mt=tt[st];ht=void 0,ht===void 0&&(ht=isObject$2(mt)?mt:isIndex(u[pe+1])?[]:{})}assignValue(tt,st,ht),tt=tt[st]}return me}function set(me,u,t){return me==null?me:baseSet(me,u,t)}var FUNC_ERROR_TEXT="Expected a function";function throttle(me,u,t){var de=!0,pe=!0;if(typeof me!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(t)&&(de="leading"in t?!!t.leading:de,pe="trailing"in t?!!t.trailing:pe),debounce(me,u,{leading:de,maxWait:u,trailing:pe})}function unset(me,u){return me==null?!0:baseUnset(me,u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let globalVar;try{globalVar={window,document}}catch{/* istanbul ignore next -- @preserve */globalVar={window:{},document:{}}}var global$1=globalVar;function getUserAgent(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const userAgent=getUserAgent(),env={isMac:isMac(userAgent),isWindows:isWindows(userAgent),isGecko:isGecko(userAgent),isSafari:isSafari(userAgent),isiOS:isiOS(userAgent),isAndroid:isAndroid(userAgent),isBlink:isBlink(userAgent),get isMediaForcedColors(){return isMediaForcedColors()},get isMotionReduced(){return isMotionReduced()},features:{isRegExpUnicodePropertySupported:isRegExpUnicodePropertySupported()}};function isMac(me){return me.indexOf("macintosh")>-1}function isWindows(me){return me.indexOf("windows")>-1}function isGecko(me){return!!me.match(/gecko\/\d+/)}function isSafari(me){return me.indexOf(" applewebkit/")>-1&&me.indexOf("chrome")===-1}function isiOS(me){return!!me.match(/iphone|ipad/i)||isMac(me)&&navigator.maxTouchPoints>0}function isAndroid(me){return me.indexOf("android")>-1}function isBlink(me){return me.indexOf("chrome/")>-1&&me.indexOf("edge/")<0}function isRegExpUnicodePropertySupported(){let me=!1;try{me="".search(new RegExp("[\\p{L}]","u"))===0}catch{}return me}function isMediaForcedColors(){return global$1.window.matchMedia?global$1.window.matchMedia("(forced-colors: active)").matches:!1}function isMotionReduced(){return global$1.window.matchMedia?global$1.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fastDiff(me,u,t,de){t=t||function(st,ht){return st===ht};const pe=Array.isArray(me)?me:Array.prototype.slice.call(me),Le=Array.isArray(u)?u:Array.prototype.slice.call(u),Ye=findChangeBoundaryIndexes(pe,Le,t);return de?changeIndexesToAtomicChanges(Ye,Le.length):changeIndexesToChanges(Le,Ye)}function findChangeBoundaryIndexes(me,u,t){const de=findFirstDifferenceIndex(me,u,t);if(de===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const pe=cutAndReverse(me,de),Le=cutAndReverse(u,de),Ye=findFirstDifferenceIndex(pe,Le,t),tt=me.length-Ye,st=u.length-Ye;return{firstIndex:de,lastIndexOld:tt,lastIndexNew:st}}function findFirstDifferenceIndex(me,u,t){for(let de=0;de<Math.max(me.length,u.length);de++)if(me[de]===void 0||u[de]===void 0||!t(me[de],u[de]))return de;return-1}function cutAndReverse(me,u){return me.slice(u).reverse()}function changeIndexesToChanges(me,u){const t=[],{firstIndex:de,lastIndexOld:pe,lastIndexNew:Le}=u;return Le-de>0&&t.push({index:de,type:"insert",values:me.slice(de,Le)}),pe-de>0&&t.push({index:de+(Le-de),type:"delete",howMany:pe-de}),t}function changeIndexesToAtomicChanges(me,u){const{firstIndex:t,lastIndexOld:de,lastIndexNew:pe}=me;if(t===-1)return Array(u).fill("equal");let Le=[];return t>0&&(Le=Le.concat(Array(t).fill("equal"))),pe-t>0&&(Le=Le.concat(Array(pe-t).fill("insert"))),de-t>0&&(Le=Le.concat(Array(de-t).fill("delete"))),pe<u&&(Le=Le.concat(Array(u-pe).fill("equal"))),Le}function diff(me,u,t){t=t||function(Tt,St){return Tt===St};const de=me.length,pe=u.length;if(de>200||pe>200||de+pe>300)return diff.fastDiff(me,u,t,!0);let Le,Ye;if(pe<de){const Tt=me;me=u,u=Tt,Le="delete",Ye="insert"}else Le="insert",Ye="delete";const tt=me.length,st=u.length,ht=st-tt,mt={},gt={};function bt(Tt){const St=(gt[Tt-1]!==void 0?gt[Tt-1]:-1)+1,Rt=gt[Tt+1]!==void 0?gt[Tt+1]:-1,Pt=St>Rt?-1:1;mt[Tt+Pt]&&(mt[Tt]=mt[Tt+Pt].slice(0)),mt[Tt]||(mt[Tt]=[]),mt[Tt].push(St>Rt?Le:Ye);let Ot=Math.max(St,Rt),Mt=Ot-Tt;for(;Mt<tt&&Ot<st&&t(me[Mt],u[Ot]);)Mt++,Ot++,mt[Tt].push("equal");return Ot}let _t=0,vt;do{for(vt=-_t;vt<ht;vt++)gt[vt]=bt(vt);for(vt=ht+_t;vt>ht;vt--)gt[vt]=bt(vt);gt[ht]=bt(ht),_t++}while(gt[ht]!==st);return mt[ht].slice(1)}diff.fastDiff=fastDiff;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spy(){return function me(){me.called=!0}}class EventInfo{constructor(u,t){wt(this,"source");wt(this,"name");wt(this,"path");wt(this,"stop");wt(this,"off");wt(this,"return");this.source=u,this.name=t,this.path=[],this.stop=spy(),this.off=spy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS=new Array(256).fill("").map((me,u)=>("0"+u.toString(16)).slice(-2));function uid(){const[me,u,t,de]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS[me>>0&255]+HEX_NUMBERS[me>>8&255]+HEX_NUMBERS[me>>16&255]+HEX_NUMBERS[me>>24&255]+HEX_NUMBERS[u>>0&255]+HEX_NUMBERS[u>>8&255]+HEX_NUMBERS[u>>16&255]+HEX_NUMBERS[u>>24&255]+HEX_NUMBERS[t>>0&255]+HEX_NUMBERS[t>>8&255]+HEX_NUMBERS[t>>16&255]+HEX_NUMBERS[t>>24&255]+HEX_NUMBERS[de>>0&255]+HEX_NUMBERS[de>>8&255]+HEX_NUMBERS[de>>16&255]+HEX_NUMBERS[de>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const priorities={get(me="normal"){return typeof me!="number"?this[me]||this.normal:me},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function insertToPriorityArray(me,u){const t=priorities.get(u.priority);let de=0,pe=me.length;for(;de<pe;){const Le=de+pe>>1;priorities.get(me[Le].priority)<t?pe=Le:de=Le+1}me.splice(de,0,u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DOCUMENTATION_URL="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class CKEditorError extends Error{constructor(t,de,pe){super(getErrorMessage(t,pe));wt(this,"context");wt(this,"data");this.name="CKEditorError",this.context=de,this.data=pe}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,de){if(t.is&&t.is("CKEditorError"))throw t;const pe=new CKEditorError(t.message,de);throw pe.stack=t.stack,pe}}function logWarning(me,u){console.warn(...formatConsoleArguments(me,u))}function logError(me,u){console.error(...formatConsoleArguments(me,u))}function getLinkToDocumentationMessage(me){return`
Read more: ${DOCUMENTATION_URL}#error-${me}`}function getErrorMessage(me,u){const t=new WeakSet,pe=u?` ${JSON.stringify(u,(Ye,tt)=>{if(typeof tt=="object"&&tt!==null){if(t.has(tt))return`[object ${tt.constructor.name}]`;t.add(tt)}return tt})}`:"",Le=getLinkToDocumentationMessage(me);return me+pe+Le}function formatConsoleArguments(me,u){const t=getLinkToDocumentationMessage(me);return u?[me,u,t]:[me,t]}const version="44.3.0",releaseDate=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new CKEditorError("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=version;const _listeningTo=Symbol("listeningTo"),_emitterId=Symbol("emitterId"),_delegations=Symbol("delegations"),defaultEmitterClass$1=EmitterMixin(Object);function EmitterMixin(me){if(!me)return defaultEmitterClass$1;class u extends me{on(de,pe,Le){this.listenTo(this,de,pe,Le)}once(de,pe,Le){let Ye=!1;const tt=(st,...ht)=>{Ye||(Ye=!0,st.off(),pe.call(this,st,...ht))};this.listenTo(this,de,tt,Le)}off(de,pe){this.stopListening(this,de,pe)}listenTo(de,pe,Le,Ye={}){let tt,st;this[_listeningTo]||(this[_listeningTo]={});const ht=this[_listeningTo];_getEmitterId(de)||_setEmitterId(de);const mt=_getEmitterId(de);(tt=ht[mt])||(tt=ht[mt]={emitter:de,callbacks:{}}),(st=tt.callbacks[pe])||(st=tt.callbacks[pe]=[]),st.push(Le),addEventListener$1(this,de,pe,Le,Ye)}stopListening(de,pe,Le){const Ye=this[_listeningTo];let tt=de&&_getEmitterId(de);const st=Ye&&tt?Ye[tt]:void 0,ht=st&&pe?st.callbacks[pe]:void 0;if(!(!Ye||de&&!st||pe&&!ht))if(Le)removeEventListener$1(this,de,pe,Le),ht.indexOf(Le)!==-1&&(ht.length===1?delete st.callbacks[pe]:removeEventListener$1(this,de,pe,Le));else if(ht){for(;Le=ht.pop();)removeEventListener$1(this,de,pe,Le);delete st.callbacks[pe]}else if(st){for(pe in st.callbacks)this.stopListening(de,pe);delete Ye[tt]}else{for(tt in Ye)this.stopListening(Ye[tt].emitter);delete this[_listeningTo]}}fire(de,...pe){try{const Le=de instanceof EventInfo?de:new EventInfo(this,de),Ye=Le.name;let tt=getCallbacksForEvent(this,Ye);if(Le.path.push(this),tt){tt=tt.slice();for(let ht=0;ht<tt.length;ht++){const mt=tt[ht].callback;if(mt.call(this,Le,...pe),Le.off.called&&(delete Le.off.called,this._removeEventListener(Ye,mt)),Le.stop.called)break}}const st=this[_delegations];if(st){const ht=st.get(Ye),mt=st.get("*");ht&&fireDelegatedEvents(ht,Le,pe),mt&&fireDelegatedEvents(mt,Le,pe)}return Le.return}catch(Le){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(Le,this)}}delegate(...de){return{to:(pe,Le)=>{this[_delegations]||(this[_delegations]=new Map),de.forEach(Ye=>{const tt=this[_delegations].get(Ye);tt?tt.set(pe,Le):this[_delegations].set(Ye,new Map([[pe,Le]]))})}}}stopDelegating(de,pe){if(this[_delegations])if(!de)this[_delegations].clear();else if(!pe)this[_delegations].delete(de);else{const Le=this[_delegations].get(de);Le&&Le.delete(pe)}}_addEventListener(de,pe,Le){createEventNamespace(this,de);const Ye=getCallbacksListsForNamespace(this,de),tt=priorities.get(Le.priority),st={callback:pe,priority:tt};for(const ht of Ye)insertToPriorityArray(ht,st)}_removeEventListener(de,pe){const Le=getCallbacksListsForNamespace(this,de);for(const Ye of Le)for(let tt=0;tt<Ye.length;tt++)Ye[tt].callback==pe&&(Ye.splice(tt,1),tt--)}}return u}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(me=>{EmitterMixin[me]=defaultEmitterClass$1.prototype[me]});function _getEmitterListenedTo(me,u){const t=me[_listeningTo];return t&&t[u]?t[u].emitter:null}function _setEmitterId(me,u){me[_emitterId]||(me[_emitterId]=u||uid())}function _getEmitterId(me){return me[_emitterId]}function getEvents(me){return me._events||Object.defineProperty(me,"_events",{value:{}}),me._events}function makeEventNode(){return{callbacks:[],childEvents:[]}}function createEventNamespace(me,u){const t=getEvents(me);if(t[u])return;let de=u,pe=null;const Le=[];for(;de!==""&&!t[de];)t[de]=makeEventNode(),Le.push(t[de]),pe&&t[de].childEvents.push(pe),pe=de,de=de.substr(0,de.lastIndexOf(":"));if(de!==""){for(const Ye of Le)Ye.callbacks=t[de].callbacks.slice();t[de].childEvents.push(pe)}}function getCallbacksListsForNamespace(me,u){const t=getEvents(me)[u];if(!t)return[];let de=[t.callbacks];for(let pe=0;pe<t.childEvents.length;pe++){const Le=getCallbacksListsForNamespace(me,t.childEvents[pe]);de=de.concat(Le)}return de}function getCallbacksForEvent(me,u){if(!me._events)return null;let t=u;do{const de=me._events[t];if(de&&de.callbacks&&de.callbacks.length)return de.callbacks;const pe=t.lastIndexOf(":");t=pe>-1?t.substring(0,pe):""}while(t);return null}function fireDelegatedEvents(me,u,t){for(let[de,pe]of me){pe?typeof pe=="function"&&(pe=pe(u.name)):pe=u.name;const Le=new EventInfo(u.source,pe);Le.path=[...u.path],de.fire(Le,...t)}}function addEventListener$1(me,u,t,de,pe){u._addEventListener?u._addEventListener(t,de,pe):me._addEventListener.call(u,t,de,pe)}function removeEventListener$1(me,u,t,de){u._removeEventListener?u._removeEventListener(t,de):me._removeEventListener.call(u,t,de)}const observablePropertiesSymbol=Symbol("observableProperties"),boundObservablesSymbol=Symbol("boundObservables"),boundPropertiesSymbol=Symbol("boundProperties"),decoratedMethods=Symbol("decoratedMethods"),decoratedOriginal=Symbol("decoratedOriginal"),defaultObservableClass=ObservableMixin(EmitterMixin());function ObservableMixin(me){var t,de,pe,Le,Ye;if(!me)return defaultObservableClass;class u extends(Ye=me,Le=observablePropertiesSymbol,pe=decoratedMethods,de=boundPropertiesSymbol,t=boundObservablesSymbol,Ye){constructor(){super(...arguments);wt(this,Le);wt(this,pe);wt(this,de);wt(this,t)}set(ht,mt){if(isObject$2(ht)){Object.keys(ht).forEach(bt=>{this.set(bt,ht[bt])},this);return}initObservable(this);const gt=this[observablePropertiesSymbol];if(ht in this&&!gt.has(ht))throw new CKEditorError("observable-set-cannot-override",this);Object.defineProperty(this,ht,{enumerable:!0,configurable:!0,get(){return gt.get(ht)},set(bt){const _t=gt.get(ht);let vt=this.fire(`set:${ht}`,ht,bt,_t);vt===void 0&&(vt=bt),(_t!==vt||!gt.has(ht))&&(gt.set(ht,vt),this.fire(`change:${ht}`,ht,vt,_t))}}),this[ht]=mt}bind(...ht){if(!ht.length||!isStringArray$1(ht))throw new CKEditorError("observable-bind-wrong-properties",this);if(new Set(ht).size!==ht.length)throw new CKEditorError("observable-bind-duplicate-properties",this);initObservable(this);const mt=this[boundPropertiesSymbol];ht.forEach(bt=>{if(mt.has(bt))throw new CKEditorError("observable-bind-rebind",this)});const gt=new Map;return ht.forEach(bt=>{const _t={property:bt,to:[]};mt.set(bt,_t),gt.set(bt,_t)}),{to:bindTo,toMany:bindToMany,_observable:this,_bindProperties:ht,_to:[],_bindings:gt}}unbind(...ht){if(!this[observablePropertiesSymbol])return;const mt=this[boundPropertiesSymbol],gt=this[boundObservablesSymbol];if(ht.length){if(!isStringArray$1(ht))throw new CKEditorError("observable-unbind-wrong-properties",this);ht.forEach(bt=>{const _t=mt.get(bt);_t&&(_t.to.forEach(([vt,Tt])=>{const St=gt.get(vt),Rt=St[Tt];Rt.delete(_t),Rt.size||delete St[Tt],Object.keys(St).length||(gt.delete(vt),this.stopListening(vt,"change"))}),mt.delete(bt))})}else gt.forEach((bt,_t)=>{this.stopListening(_t,"change")}),gt.clear(),mt.clear()}decorate(ht){initObservable(this);const mt=this[ht];if(!mt)throw new CKEditorError("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:ht});this.on(ht,(gt,bt)=>{gt.return=mt.apply(this,bt)}),this[ht]=function(...gt){return this.fire(ht,gt)},this[ht][decoratedOriginal]=mt,this[decoratedMethods]||(this[decoratedMethods]=[]),this[decoratedMethods].push(ht)}stopListening(ht,mt,gt){if(!ht&&this[decoratedMethods]){for(const bt of this[decoratedMethods])this[bt]=this[bt][decoratedOriginal];delete this[decoratedMethods]}super.stopListening(ht,mt,gt)}}return u}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(me=>{ObservableMixin[me]=defaultObservableClass.prototype[me]});function initObservable(me){me[observablePropertiesSymbol]||(Object.defineProperty(me,observablePropertiesSymbol,{value:new Map}),Object.defineProperty(me,boundObservablesSymbol,{value:new Map}),Object.defineProperty(me,boundPropertiesSymbol,{value:new Map}))}function bindTo(...me){const u=parseBindToArgs(...me),t=Array.from(this._bindings.keys()),de=t.length;if(!u.callback&&u.to.length>1)throw new CKEditorError("observable-bind-to-no-callback",this);if(de>1&&u.callback)throw new CKEditorError("observable-bind-to-extra-callback",this);u.to.forEach(pe=>{if(pe.properties.length&&pe.properties.length!==de)throw new CKEditorError("observable-bind-to-properties-length",this);pe.properties.length||(pe.properties=this._bindProperties)}),this._to=u.to,u.callback&&(this._bindings.get(t[0]).callback=u.callback),attachBindToListeners(this._observable,this._to),updateBindToBound(this),this._bindProperties.forEach(pe=>{updateBoundObservableProperty(this._observable,pe)})}function bindToMany(me,u,t){if(this._bindings.size>1)throw new CKEditorError("observable-bind-to-many-not-one-binding",this);this.to(...getBindingTargets(me,u),t)}function getBindingTargets(me,u){const t=me.map(de=>[de,u]);return Array.prototype.concat.apply([],t)}function isStringArray$1(me){return me.every(u=>typeof u=="string")}function parseBindToArgs(...me){if(!me.length)throw new CKEditorError("observable-bind-to-parse-error",null);const u={to:[]};let t;return typeof me[me.length-1]=="function"&&(u.callback=me.pop()),me.forEach(de=>{if(typeof de=="string")t.properties.push(de);else if(typeof de=="object")t={observable:de,properties:[]},u.to.push(t);else throw new CKEditorError("observable-bind-to-parse-error",null)}),u}function updateBoundObservables(me,u,t,de){const pe=me[boundObservablesSymbol],Le=pe.get(t),Ye=Le||{};Ye[de]||(Ye[de]=new Set),Ye[de].add(u),Le||pe.set(t,Ye)}function updateBindToBound(me){let u;me._bindings.forEach((t,de)=>{me._to.forEach(pe=>{u=pe.properties[t.callback?0:me._bindProperties.indexOf(de)],t.to.push([pe.observable,u]),updateBoundObservables(me._observable,t,pe.observable,u)})})}function updateBoundObservableProperty(me,u){const de=me[boundPropertiesSymbol].get(u);let pe;de.callback?pe=de.callback.apply(me,de.to.map(Le=>Le[0][Le[1]])):(pe=de.to[0],pe=pe[0][pe[1]]),Object.prototype.hasOwnProperty.call(me,u)?me[u]=pe:me.set(u,pe)}function attachBindToListeners(me,u){u.forEach(t=>{const de=me[boundObservablesSymbol];let pe;de.get(t.observable)||me.listenTo(t.observable,"change",(Le,Ye)=>{pe=de.get(t.observable)[Ye],pe&&pe.forEach(tt=>{updateBoundObservableProperty(me,tt.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ElementReplacer{constructor(){wt(this,"_replacedElements");this._replacedElements=[]}replace(u,t){this._replacedElements.push({element:u,newElement:t}),u.style.display="none",t&&u.parentNode.insertBefore(t,u.nextSibling)}restore(){this._replacedElements.forEach(({element:u,newElement:t})=>{u.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function count(me){let u=0;for(const t of me)u++;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function compareArrays(me,u){const t=Math.min(me.length,u.length);for(let de=0;de<t;de++)if(me[de]!=u[de])return de;return me.length==u.length?"same":me.length<u.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isIterable(me){return!!(me&&me[Symbol.iterator])}function createElement(me,u,t={},de=[]){const pe=t&&t.xmlns,Le=pe?me.createElementNS(pe,u):me.createElement(u);for(const Ye in t)Le.setAttribute(Ye,t[Ye]);(isString(de)||!isIterable(de))&&(de=[de]);for(let Ye of de)isString(Ye)&&(Ye=me.createTextNode(Ye)),Le.appendChild(Ye);return Le}class Config{constructor(u,t){wt(this,"_config");this._config=Object.create(null),t&&this.define(cloneConfig(t)),u&&this._setObjectToTarget(this._config,u)}set(u,t){this._setToTarget(this._config,u,t)}define(u,t){this._setToTarget(this._config,u,t,!0)}get(u){return this._getFromSource(this._config,u)}*names(){for(const u of Object.keys(this._config))yield u}_setToTarget(u,t,de,pe=!1){if(isPlainObject(t)){this._setObjectToTarget(u,t,pe);return}const Le=t.split(".");t=Le.pop();for(const Ye of Le)isPlainObject(u[Ye])||(u[Ye]=Object.create(null)),u=u[Ye];if(isPlainObject(de)){isPlainObject(u[t])||(u[t]=Object.create(null)),u=u[t],this._setObjectToTarget(u,de,pe);return}pe&&typeof u[t]<"u"||(u[t]=de)}_getFromSource(u,t){const de=t.split(".");t=de.pop();for(const pe of de){if(!isPlainObject(u[pe])){u=null;break}u=u[pe]}return u?cloneConfig(u[t]):void 0}_setObjectToTarget(u,t,de){Object.keys(t).forEach(pe=>{this._setToTarget(u,pe,t[pe],de)})}}function cloneConfig(me){return cloneDeepWith(me,leaveItemReferences)}function leaveItemReferences(me){return isElement$2(me)||typeof me=="function"?me:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isNode(me){if(me){if(me.defaultView)return me instanceof me.defaultView.Document;if(me.ownerDocument&&me.ownerDocument.defaultView)return me instanceof me.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isWindow(me){const u=Object.prototype.toString.apply(me);return u=="[object Window]"||u=="[object global]"}const defaultEmitterClass=DomEmitterMixin(EmitterMixin());function DomEmitterMixin(me){if(!me)return defaultEmitterClass;class u extends me{listenTo(de,pe,Le,Ye={}){if(isNode(de)||isWindow(de)){const tt={capture:!!Ye.useCapture,passive:!!Ye.usePassive},st=this._getProxyEmitter(de,tt)||new ProxyEmitter(de,tt);this.listenTo(st,pe,Le,Ye)}else super.listenTo(de,pe,Le,Ye)}stopListening(de,pe,Le){if(isNode(de)||isWindow(de)){const Ye=this._getAllProxyEmitters(de);for(const tt of Ye)this.stopListening(tt,pe,Le)}else super.stopListening(de,pe,Le)}_getProxyEmitter(de,pe){return _getEmitterListenedTo(this,getProxyEmitterId(de,pe))}_getAllProxyEmitters(de){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(pe=>this._getProxyEmitter(de,pe)).filter(pe=>!!pe)}}return u}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(me=>{DomEmitterMixin[me]=defaultEmitterClass.prototype[me]});class ProxyEmitter extends EmitterMixin(){constructor(t,de){super();wt(this,"_domNode");wt(this,"_options");wt(this,"_domListeners");_setEmitterId(this,getProxyEmitterId(t,de)),this._domNode=t,this._options=de}attach(t){if(this._domListeners&&this._domListeners[t])return;const de=this._createDomListener(t);this._domNode.addEventListener(t,de,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=de}detach(t){let de;this._domListeners[t]&&(!(de=this._events[t])||!de.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,de,pe){this.attach(t),EmitterMixin().prototype._addEventListener.call(this,t,de,pe)}_removeEventListener(t,de){EmitterMixin().prototype._removeEventListener.call(this,t,de),this.detach(t)}_createDomListener(t){const de=pe=>{this.fire(t,pe)};return de.removeListener=()=>{this._domNode.removeEventListener(t,de,this._options),delete this._domListeners[t]},de}}function getNodeUID(me){return me["data-ck-expando"]||(me["data-ck-expando"]=uid())}function getProxyEmitterId(me,u){let t=getNodeUID(me);for(const de of Object.keys(u).sort())u[de]&&(t+="-"+de);return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getAncestors(me){const u=[];let t=me;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)u.unshift(t),t=t.parentNode;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDataFromElement(me){return me instanceof HTMLTextAreaElement?me.value:me.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getBorderWidths(me){const u=me.ownerDocument.defaultView.getComputedStyle(me);return{top:parseInt(u.borderTopWidth,10),right:parseInt(u.borderRightWidth,10),bottom:parseInt(u.borderBottomWidth,10),left:parseInt(u.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getRangeFromMouseEvent(me){if(!me.target)return null;const u=me.target.ownerDocument,t=me.clientX,de=me.clientY;let pe=null;return u.caretRangeFromPoint&&u.caretRangeFromPoint(t,de)?pe=u.caretRangeFromPoint(t,de):me.rangeParent&&(pe=u.createRange(),pe.setStart(me.rangeParent,me.rangeOffset),pe.collapse(!0)),pe}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isText(me){return Object.prototype.toString.call(me)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isRange(me){return Object.prototype.toString.apply(me)=="[object Range]"}function getPositionedAncestor(me){return!me||!me.parentNode||me.offsetParent===global$1.document.body?null:me.offsetParent}const rectProperties=["top","right","bottom","left","width","height"];class Rect{constructor(u){wt(this,"top");wt(this,"right");wt(this,"bottom");wt(this,"left");wt(this,"width");wt(this,"height");wt(this,"_source");const t=isRange(u);if(Object.defineProperty(this,"_source",{value:u._source||u,writable:!0,enumerable:!1}),isDomElement(u)||t)if(t){const de=Rect.getDomRangeRects(u);copyRectProperties(this,Rect.getBoundingRect(de))}else copyRectProperties(this,u.getBoundingClientRect());else if(isWindow(u)){const{innerWidth:de,innerHeight:pe}=u;copyRectProperties(this,{top:0,right:de,bottom:pe,left:0,width:de,height:pe})}else copyRectProperties(this,u)}clone(){return new Rect(this)}moveTo(u,t){return this.top=t,this.right=u+this.width,this.bottom=t+this.height,this.left=u,this}moveBy(u,t){return this.top+=t,this.right+=u,this.left+=u,this.bottom+=t,this}getIntersection(u){const t={top:Math.max(this.top,u.top),right:Math.min(this.right,u.right),bottom:Math.min(this.bottom,u.bottom),left:Math.max(this.left,u.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const de=new Rect(t);return de._source=this._source,de}}getIntersectionArea(u){const t=this.getIntersection(u);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const u=this._source;let t=this.clone();if(isBody(u))return t;let de=u,pe=u.parentNode||u.commonAncestorContainer,Le;for(;pe&&!isBody(pe);){const Ye=getElementOverflow(pe)==="visible";de instanceof HTMLElement&&getElementPosition(de)==="absolute"&&(Le=de);const tt=getElementPosition(pe);if(Ye||Le&&(tt==="relative"&&Ye||tt!=="relative")){de=pe,pe=pe.parentNode;continue}const st=new Rect(pe),ht=t.getIntersection(st);if(ht)ht.getArea()<t.getArea()&&(t=ht);else return null;de=pe,pe=pe.parentNode}return t}isEqual(u){for(const t of rectProperties)if(this[t]!==u[t])return!1;return!0}contains(u){const t=this.getIntersection(u);return!!(t&&t.isEqual(u))}toAbsoluteRect(){const{scrollX:u,scrollY:t}=global$1.window,de=this.clone().moveBy(u,t);if(isDomElement(de._source)){const pe=getPositionedAncestor(de._source);pe&&shiftRectToCompensatePositionedAncestor(de,pe)}return de}excludeScrollbarsAndBorders(){const u=this._source;let t,de,pe;if(isWindow(u))t=u.innerWidth-u.document.documentElement.clientWidth,de=u.innerHeight-u.document.documentElement.clientHeight,pe=u.getComputedStyle(u.document.documentElement).direction;else{const Le=getBorderWidths(u);t=u.offsetWidth-u.clientWidth-Le.left-Le.right,de=u.offsetHeight-u.clientHeight-Le.top-Le.bottom,pe=u.ownerDocument.defaultView.getComputedStyle(u).direction,this.left+=Le.left,this.top+=Le.top,this.right-=Le.right,this.bottom-=Le.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,pe==="ltr"?this.right-=t:this.left+=t,this.height-=de,this.bottom-=de,this}static getDomRangeRects(u){const t=[],de=Array.from(u.getClientRects());if(de.length)for(const pe of de)t.push(new Rect(pe));else{let pe=u.startContainer;isText(pe)&&(pe=pe.parentNode);const Le=new Rect(pe.getBoundingClientRect());Le.right=Le.left,Le.width=0,t.push(Le)}return t}static getBoundingRect(u){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let de=0;for(const pe of u)de++,t.left=Math.min(t.left,pe.left),t.top=Math.min(t.top,pe.top),t.right=Math.max(t.right,pe.right),t.bottom=Math.max(t.bottom,pe.bottom);return de==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Rect(t))}}function copyRectProperties(me,u){for(const t of rectProperties)me[t]=u[t]}function isBody(me){return isDomElement(me)?me===me.ownerDocument.body:!1}function isDomElement(me){return me!==null&&typeof me=="object"&&me.nodeType===1&&typeof me.getBoundingClientRect=="function"}function getElementPosition(me){return me instanceof HTMLElement?me.ownerDocument.defaultView.getComputedStyle(me).position:"static"}function getElementOverflow(me){return me instanceof HTMLElement?me.ownerDocument.defaultView.getComputedStyle(me).overflow:"visible"}function shiftRectToCompensatePositionedAncestor(me,u){const t=new Rect(u),de=getBorderWidths(u);let pe=0,Le=0;pe-=t.left,Le-=t.top,pe+=u.scrollLeft,Le+=u.scrollTop,pe-=de.left,Le-=de.top,me.moveBy(pe,Le)}var Fn;let ResizeObserver$1=(Fn=class{constructor(u,t){wt(this,"_element");wt(this,"_callback");Fn._observerInstance||Fn._createObserver(),this._element=u,this._callback=t,Fn._addElementCallback(u,t),Fn._observerInstance.observe(u)}get element(){return this._element}destroy(){Fn._deleteElementCallback(this._element,this._callback)}static _addElementCallback(u,t){Fn._elementCallbacks||(Fn._elementCallbacks=new Map);let de=Fn._elementCallbacks.get(u);de||(de=new Set,Fn._elementCallbacks.set(u,de)),de.add(t)}static _deleteElementCallback(u,t){const de=Fn._getElementCallbacks(u);de&&(de.delete(t),de.size||(Fn._elementCallbacks.delete(u),Fn._observerInstance.unobserve(u))),Fn._elementCallbacks&&!Fn._elementCallbacks.size&&(Fn._observerInstance=null,Fn._elementCallbacks=null)}static _getElementCallbacks(u){return Fn._elementCallbacks?Fn._elementCallbacks.get(u):null}static _createObserver(){Fn._observerInstance=new global$1.window.ResizeObserver(u=>{for(const t of u){const de=Fn._getElementCallbacks(t.target);if(de)for(const pe of de)pe(t)}})}},wt(Fn,"_observerInstance",null),wt(Fn,"_elementCallbacks",null),Fn);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function setDataInElement(me,u){me instanceof HTMLTextAreaElement&&(me.value=u),me.innerHTML=u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toUnit(me){return u=>u+me}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function indexOf(me){let u=0;for(;me.previousSibling;)me=me.previousSibling,u++;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function insertAt(me,u,t){me.insertBefore(t,me.childNodes[u]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isComment(me){return me&&me.nodeType===Node.COMMENT_NODE}function isValidAttributeName(me){try{global$1.document.createAttribute(me)}catch{return!1}return!0}function isVisible(me){return me?isText(me)?isVisible(me.parentElement):me.getClientRects?!!me.getClientRects().length:!1:!1}function getOptimalPosition({element:me,target:u,positions:t,limiter:de,fitInViewport:pe,viewportOffsetConfig:Le}){isFunction(u)&&(u=u()),isFunction(de)&&(de=de());const Ye=getPositionedAncestor(me),tt=getConstrainedViewportRect(Le),st=new Rect(me),ht=getVisibleViewportIntersectionRect(u,tt);let mt;if(!ht||!tt.getIntersection(ht))return null;const gt={targetRect:ht,elementRect:st,positionedElementAncestor:Ye,viewportRect:tt};if(!de&&!pe)mt=new PositionObject(t[0],gt);else{if(de){const bt=getVisibleViewportIntersectionRect(de,tt);bt&&(gt.limiterRect=bt)}mt=getBestPosition(t,gt)}return mt}function getVisibleViewportIntersectionRect(me,u){const t=new Rect(me).getVisible();return t?t.getIntersection(u):null}function getConstrainedViewportRect(me){me=Object.assign({top:0,bottom:0,left:0,right:0},me);const u=new Rect(global$1.window);return u.top+=me.top,u.height-=me.top,u.bottom-=me.bottom,u.height-=me.bottom,u}function getBestPosition(me,u){const{elementRect:t}=u,de=t.getArea(),pe=me.map(tt=>new PositionObject(tt,u)).filter(tt=>!!tt.name);let Le=0,Ye=null;for(const tt of pe){const{limiterIntersectionArea:st,viewportIntersectionArea:ht}=tt;if(st===de)return tt;const mt=ht**2+st**2;mt>Le&&(Le=mt,Ye=tt)}return Ye}class PositionObject{constructor(u,t){wt(this,"name");wt(this,"config");wt(this,"_positioningFunctionCoordinates");wt(this,"_options");wt(this,"_cachedRect");wt(this,"_cachedAbsoluteRect");const de=u(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!de)return;const{left:pe,top:Le,name:Ye,config:tt}=de;this.name=Ye,this.config=tt,this._positioningFunctionCoordinates={left:pe,top:Le},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const u=this._options.limiterRect;return u?u.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function remove$2(me){const u=me.parentNode;u&&u.removeChild(me)}function scrollViewportToShowTarget({target:me,viewportOffset:u=0,ancestorOffset:t=0,alignToTop:de,forceScroll:pe}){const Le=getWindow(me);let Ye=Le,tt=null;for(u=normalizeViewportOffset(u);Ye;){let st;Ye==Le?st=getParentElement(me):st=getParentElement(tt),scrollAncestorsToShowRect({parent:st,getRect:()=>getRectRelativeToWindow(me,Ye),alignToTop:de,ancestorOffset:t,forceScroll:pe});let ht=getRectRelativeToWindow(me,Ye);const mt=getRectRelativeToWindow(st,Ye);if(ht.height>mt.height){const gt=ht.getIntersection(mt);gt&&(ht=gt)}if(scrollWindowToShowRect({window:Ye,rect:ht,viewportOffset:u,alignToTop:de,forceScroll:pe}),Ye.parent!=Ye){if(tt=Ye.frameElement,Ye=Ye.parent,!tt)return}else Ye=null}}function scrollWindowToShowRect({window:me,rect:u,alignToTop:t,forceScroll:de,viewportOffset:pe}){const Le=u.clone().moveBy(0,pe.bottom),Ye=u.clone().moveBy(0,-pe.top),tt=new Rect(me).excludeScrollbarsAndBorders(),st=[Ye,Le],ht=t&&de,mt=st.every(Tt=>tt.contains(Tt));let{scrollX:gt,scrollY:bt}=me;const _t=gt,vt=bt;ht?bt-=tt.top-u.top+pe.top:mt||(isAbove(Ye,tt)?bt-=tt.top-u.top+pe.top:isBelow(Le,tt)&&(t?bt+=u.top-tt.top-pe.top:bt+=u.bottom-tt.bottom+pe.bottom)),mt||(isLeftOf(u,tt)?gt-=tt.left-u.left+pe.left:isRightOf(u,tt)&&(gt+=u.right-tt.right+pe.right)),(gt!=_t||bt!==vt)&&me.scrollTo(gt,bt)}function scrollAncestorsToShowRect({parent:me,getRect:u,alignToTop:t,forceScroll:de,ancestorOffset:pe=0,limiterElement:Le}){const Ye=getWindow(me),tt=t&&de;let st,ht,mt;const gt=Le||Ye.document.body;for(;me!=gt;)ht=u(),st=new Rect(me).excludeScrollbarsAndBorders(),mt=st.contains(ht),tt?me.scrollTop-=st.top-ht.top+pe:mt||(isAbove(ht,st)?me.scrollTop-=st.top-ht.top+pe:isBelow(ht,st)&&(t?me.scrollTop+=ht.top-st.top-pe:me.scrollTop+=ht.bottom-st.bottom+pe)),mt||(isLeftOf(ht,st)?me.scrollLeft-=st.left-ht.left+pe:isRightOf(ht,st)&&(me.scrollLeft+=ht.right-st.right+pe)),me=me.parentNode}function isBelow(me,u){return me.bottom>u.bottom}function isAbove(me,u){return me.top<u.top}function isLeftOf(me,u){return me.left<u.left}function isRightOf(me,u){return me.right>u.right}function getWindow(me){return isRange(me)?me.startContainer.ownerDocument.defaultView:me.ownerDocument.defaultView}function getParentElement(me){if(isRange(me)){let u=me.commonAncestorContainer;return isText(u)&&(u=u.parentNode),u}else return me.parentNode}function getRectRelativeToWindow(me,u){const t=getWindow(me),de=new Rect(me);if(t===u)return de;{let pe=t;for(;pe!=u;){const Le=pe.frameElement,Ye=new Rect(Le).excludeScrollbarsAndBorders();de.moveBy(Ye.left,Ye.top),pe=pe.parent}}return de}function normalizeViewportOffset(me){return typeof me=="number"?{top:me,bottom:me,left:me,right:me}:me}const modifiersToGlyphsMac={ctrl:"",cmd:"",alt:"",shift:""},modifiersToGlyphsNonMac={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},keyCodesToGlyphs={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},keyCodes=generateKnownKeyCodes(),keyCodeNames=Object.fromEntries(Object.entries(keyCodes).map(([me,u])=>{let t;return u in keyCodesToGlyphs?t=keyCodesToGlyphs[u]:t=me.charAt(0).toUpperCase()+me.slice(1),[u,t]}));function getCode(me){let u;if(typeof me=="string"){if(u=keyCodes[me.toLowerCase()],!u)throw new CKEditorError("keyboard-unknown-key",null,{key:me})}else u=me.keyCode+(me.altKey?keyCodes.alt:0)+(me.ctrlKey?keyCodes.ctrl:0)+(me.shiftKey?keyCodes.shift:0)+(me.metaKey?keyCodes.cmd:0);return u}function parseKeystroke(me){return typeof me=="string"&&(me=splitKeystrokeText(me)),me.map(u=>typeof u=="string"?getEnvKeyCode(u):u).reduce((u,t)=>t+u,0)}function getEnvKeystrokeText(me,u){let t=parseKeystroke(me);const de=env.isMac||env.isiOS;return Object.entries(de?modifiersToGlyphsMac:modifiersToGlyphsNonMac).reduce((Ye,[tt,st])=>((t&keyCodes[tt])!=0&&(t&=~keyCodes[tt],Ye+=st),Ye),"")+(t?keyCodeNames[t]:"")}function isArrowKeyCode(me){return me==keyCodes.arrowright||me==keyCodes.arrowleft||me==keyCodes.arrowup||me==keyCodes.arrowdown}function getLocalizedArrowKeyCodeDirection(me,u){const t=u==="ltr";switch(me){case keyCodes.arrowleft:return t?"left":"right";case keyCodes.arrowright:return t?"right":"left";case keyCodes.arrowup:return"up";case keyCodes.arrowdown:return"down"}}function getEnvKeyCode(me){if(me.endsWith("!"))return getCode(me.slice(0,-1));const u=getCode(me);return(env.isMac||env.isiOS)&&u==keyCodes.ctrl?keyCodes.cmd:u}function isForwardArrowKeyCode(me,u){const t=getLocalizedArrowKeyCodeDirection(me,u);return t==="down"||t==="right"}function generateKnownKeyCodes(){const me={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let u=65;u<=90;u++){const t=String.fromCharCode(u);me[t.toLowerCase()]=u}for(let u=48;u<=57;u++)me[u-48]=u;for(let u=112;u<=123;u++)me["f"+(u-111)]=u;return Object.assign(me,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),me}function splitKeystrokeText(me){return me.split("+").map(u=>u.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const RTL_LANGUAGE_CODES=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function getLanguageDirection(me){return RTL_LANGUAGE_CODES.includes(me)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toArray$2(me){return Array.isArray(me)?me:[me]}/* istanbul ignore else -- @preserve */global$1.window.CKEDITOR_TRANSLATIONS||(global$1.window.CKEDITOR_TRANSLATIONS={});function _translate(me,u,t=1,de){if(typeof t!="number")throw new CKEditorError("translation-service-quantity-not-a-number",null,{quantity:t});const pe=de||global$1.window.CKEDITOR_TRANSLATIONS,Le=getNumberOfLanguages(pe);Le===1&&(me=Object.keys(pe)[0]);const Ye=u.id||u.string;if(Le===0||!hasTranslation(me,Ye,pe))return t!==1?u.plural:u.string;const tt=pe[me].dictionary,st=pe[me].getPluralForm||(gt=>gt===1?0:1),ht=tt[Ye];if(typeof ht=="string")return ht;const mt=Number(st(t));return ht[mt]}function _unifyTranslations(me){return Array.isArray(me)?me.reduce((u,t)=>merge(u,t)):me}function hasTranslation(me,u,t){return!!t[me]&&!!t[me].dictionary[u]}function getNumberOfLanguages(me){return Object.keys(me).length}class Locale{constructor({uiLanguage:u="en",contentLanguage:t,translations:de}={}){wt(this,"uiLanguage");wt(this,"uiLanguageDirection");wt(this,"contentLanguage");wt(this,"contentLanguageDirection");wt(this,"t");wt(this,"translations");this.uiLanguage=u,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=getLanguageDirection(this.uiLanguage),this.contentLanguageDirection=getLanguageDirection(this.contentLanguage),this.translations=_unifyTranslations(de),this.t=(pe,Le)=>this._t(pe,Le)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(u,t=[]){t=toArray$2(t),typeof u=="string"&&(u={string:u});const pe=!!u.plural?t[0]:1,Le=_translate(this.uiLanguage,u,pe,this.translations);return interpolateString(Le,t)}}function interpolateString(me,u){return me.replace(/%(\d+)/g,(t,de)=>de<u.length?u[de]:t)}class Collection extends EmitterMixin(){constructor(t={},de={}){super();wt(this,"_items");wt(this,"_itemMap");wt(this,"_idProperty");wt(this,"_bindToCollection");wt(this,"_bindToExternalToInternalMap");wt(this,"_bindToInternalToExternalMap");wt(this,"_skippedIndexesFromExternal");const pe=isIterable(t);if(pe||(de=t),this._items=[],this._itemMap=new Map,this._idProperty=de.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],pe)for(const Le of t)this._items.push(Le),this._itemMap.set(this._getItemIdBeforeAdding(Le),Le)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,de){return this.addMany([t],de)}addMany(t,de){if(de===void 0)de=this._items.length;else if(de>this._items.length||de<0)throw new CKEditorError("collection-add-item-invalid-index",this);let pe=0;for(const Le of t){const Ye=this._getItemIdBeforeAdding(Le),tt=de+pe;this._items.splice(tt,0,Le),this._itemMap.set(Ye,Le),this.fire("add",Le,tt),pe++}return this.fire("change",{added:t,removed:[],index:de}),this}get(t){let de;if(typeof t=="string")de=this._itemMap.get(t);else if(typeof t=="number")de=this._items[t];else throw new CKEditorError("collection-get-invalid-arg",this);return de||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const de=this._idProperty,pe=t[de];return pe&&this._itemMap.has(pe)}}getIndex(t){let de;return typeof t=="string"?de=this._itemMap.get(t):de=t,de?this._items.indexOf(de):-1}remove(t){const[de,pe]=this._remove(t);return this.fire("change",{added:[],removed:[de],index:pe}),de}map(t,de){return this._items.map(t,de)}forEach(t,de){this._items.forEach(t,de)}find(t,de){return this._items.find(t,de)}filter(t,de){return this._items.filter(t,de)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new CKEditorError("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:de=>{this._setUpBindToBinding(pe=>new de(pe))},using:de=>{typeof de=="function"?this._setUpBindToBinding(de):this._setUpBindToBinding(pe=>pe[de])}}}_setUpBindToBinding(t){const de=this._bindToCollection,pe=(Le,Ye,tt)=>{const st=de._bindToCollection==this,ht=de._bindToInternalToExternalMap.get(Ye);if(st&&ht)this._bindToExternalToInternalMap.set(Ye,ht),this._bindToInternalToExternalMap.set(ht,Ye);else{const mt=t(Ye);if(!mt){this._skippedIndexesFromExternal.push(tt);return}let gt=tt;for(const bt of this._skippedIndexesFromExternal)tt>bt&&gt--;for(const bt of de._skippedIndexesFromExternal)gt>=bt&&gt++;this._bindToExternalToInternalMap.set(Ye,mt),this._bindToInternalToExternalMap.set(mt,Ye),this.add(mt,gt);for(let bt=0;bt<de._skippedIndexesFromExternal.length;bt++)gt<=de._skippedIndexesFromExternal[bt]&&de._skippedIndexesFromExternal[bt]++}};for(const Le of de)pe(null,Le,de.getIndex(Le));this.listenTo(de,"add",pe),this.listenTo(de,"remove",(Le,Ye,tt)=>{const st=this._bindToExternalToInternalMap.get(Ye);st&&this.remove(st),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((ht,mt)=>(tt<mt&&ht.push(mt-1),tt>mt&&ht.push(mt),ht),[])})}_getItemIdBeforeAdding(t){const de=this._idProperty;let pe;if(de in t){if(pe=t[de],typeof pe!="string")throw new CKEditorError("collection-add-invalid-id",this);if(this.get(pe))throw new CKEditorError("collection-add-item-already-exists",this)}else t[de]=pe=uid();return pe}_remove(t){let de,pe,Le,Ye=!1;const tt=this._idProperty;if(typeof t=="string"?(pe=t,Le=this._itemMap.get(pe),Ye=!Le,Le&&(de=this._items.indexOf(Le))):typeof t=="number"?(de=t,Le=this._items[de],Ye=!Le,Le&&(pe=Le[tt])):(Le=t,pe=Le[tt],de=this._items.indexOf(Le),Ye=de==-1||!this._itemMap.get(pe)),Ye)throw new CKEditorError("collection-remove-404",this);this._items.splice(de,1),this._itemMap.delete(pe);const st=this._bindToInternalToExternalMap.get(Le);return this._bindToInternalToExternalMap.delete(Le),this._bindToExternalToInternalMap.delete(st),this.fire("remove",Le,de),[Le,de]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function first(me){const u=me.next();return u.done?null:u.value}class FocusTracker extends DomEmitterMixin(ObservableMixin()){constructor(){super();wt(this,"_elements",new Set);wt(this,"_externalViews",new Set);wt(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(isElement$1(t))this._addElement(t);else if(isViewWithFocusTracker(t))this._addView(t);else{if(!t.element)throw new CKEditorError("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){isElement$1(t)?this._removeElement(t):isViewWithFocusTracker(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new CKEditorError("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const de=this.externalViews.find(pe=>isExternalViewSubtreeFocused(t,pe));de?this._focus(de.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(pe=>pe.contains(document.activeElement))||this.externalViews.find(pe=>pe.focusTracker.isFocused&&!pe.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function isViewWithFocusTracker(me){return"focusTracker"in me&&me.focusTracker instanceof FocusTracker}function isElement$1(me){return isElement$2(me)}function isExternalViewSubtreeFocused(me,u){return isFocusedView(me,u)?!0:!!u.focusTracker.externalViews.find(t=>isFocusedView(me,t))}function isFocusedView(me,u){return!!u.element&&u.element.contains(document.activeElement)&&me.contains(u.element)}class KeystrokeHandler{constructor(){wt(this,"_listener");this._listener=new(DomEmitterMixin())}listenTo(u){this._listener.listenTo(u,"keydown",(t,de)=>{this._listener.fire("_keydown:"+getCode(de),de)})}set(u,t,de={}){const pe=parseKeystroke(u),Le=de.priority;this._listener.listenTo(this._listener,"_keydown:"+pe,(Ye,tt)=>{de.filter&&!de.filter(tt)||(t(tt,()=>{tt.preventDefault(),tt.stopPropagation(),Ye.stop()}),Ye.return=!0)},{priority:Le})}press(u){return!!this._listener.fire("_keydown:"+getCode(u),u)}stopListening(u){this._listener.stopListening(u)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function objectToMap(me){const u=new Map;for(const t in me)u.set(t,me[t]);return u}function toMap(me){return isIterable(me)?new Map(me):objectToMap(me)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spliceArray(me,u,t){const de=me.length,pe=u.length;for(let Le=de-1;Le>=t;Le--)me[Le+pe]=me[Le];for(let Le=0;Le<pe;Le++)me[t+Le]=u[Le]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function delay(me,u){let t;function de(...pe){de.cancel(),t=setTimeout(()=>me(...pe),u)}return de.cancel=()=>{clearTimeout(t)},de}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function parseBase64EncodedObject(me){try{if(!me.startsWith("ey"))return null;const u=atob(me.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(u)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function makeCrcTable(){const me=[];for(let u=0;u<256;u++){let t=u;for(let de=0;de<8;de++)t&1?t=3988292384^t>>>1:t=t>>>1;me[u]=t}return me}function crc32(me){const u=Array.isArray(me)?me:[me],t=makeCrcTable();let de=-1;const pe=u.map(Le=>Array.isArray(Le)?Le.join(""):String(Le)).join("");for(let Le=0;Le<pe.length;Le++){const Ye=pe.charCodeAt(Le);de=de>>>8^t[(de^Ye)&255]}return de=(de^-1)>>>0,de.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */async function collectStylesheets(me){return me?(await Promise.all(me.map(async t=>t==="EDITOR_STYLES"?getEditorStyles():(await window.fetch(t)).text()))).join(" ").trim():""}function getEditorStyles(){const me=[],u=[];for(const t of Array.from(document.styleSheets))if(t.ownerNode.hasAttribute("data-cke"))for(const pe of Array.from(t.cssRules))pe.cssText.indexOf(".ck-content")!==-1?me.push(pe.cssText):pe.cssText.indexOf(":root")!==-1&&u.push(pe.cssText);return me.length||console.warn("The editor stylesheet could not be found in the document. Check your webpack config - style-loader should use data-cke=true attribute for the editor stylesheet."),[...u,...me].join(" ").trim()}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCombiningMark(me){return!!me&&me.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(me)}function isHighSurrogateHalf(me){return!!me&&me.length==1&&/[\ud800-\udbff]/.test(me)}function isLowSurrogateHalf(me){return!!me&&me.length==1&&/[\udc00-\udfff]/.test(me)}function isInsideSurrogatePair(me,u){return isHighSurrogateHalf(me.charAt(u-1))&&isLowSurrogateHalf(me.charAt(u))}function isInsideCombinedSymbol(me,u){return isCombiningMark(me.charAt(u))}const EMOJI_PATTERN=buildEmojiRegexp();function isInsideEmojiSequence(me,u){const t=String(me).matchAll(EMOJI_PATTERN);return Array.from(t).some(de=>de.index<u&&u<de.index+de[0].length)}function buildEmojiRegexp(){const me=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],u=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+me.map(pe=>pe.source).join("|")+")",de=`${u}|${t}(?:${t})*`;return new RegExp(de,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const documentPlaceholders=new WeakMap;let hasDisplayedPlaceholderDeprecationWarning=!1;function enablePlaceholder({view:me,element:u,text:t,isDirectHost:de=!0,keepOnFocus:pe=!1}){const Le=me.document;documentPlaceholders.has(Le)||(documentPlaceholders.set(Le,new Map),Le.registerPostFixer(tt=>updateDocumentPlaceholders(documentPlaceholders.get(Le),tt)),Le.on("change:isComposing",()=>{me.change(tt=>updateDocumentPlaceholders(documentPlaceholders.get(Le),tt))},{priority:"high"})),u.is("editableElement")&&u.on("change:placeholder",(tt,st,ht)=>Ye(ht)),u.placeholder?Ye(u.placeholder):t&&Ye(t),t&&showPlaceholderTextDeprecationWarning();function Ye(tt){const st={text:tt,isDirectHost:de,keepOnFocus:pe,hostElement:de?u:null};documentPlaceholders.get(Le).set(u,st),me.change(ht=>updateDocumentPlaceholders([[u,st]],ht))}}function showPlaceholder(me,u){return u.hasClass("ck-placeholder")?!1:(me.addClass("ck-placeholder",u),!0)}function hidePlaceholder(me,u){return u.hasClass("ck-placeholder")?(me.removeClass("ck-placeholder",u),!0):!1}function needsPlaceholder(me,u){if(!me.isAttached()||hasContent(me))return!1;const t=me.document,pe=t.selection.anchor;return t.isComposing&&pe&&pe.parent===me?!1:u||!t.isFocused?!0:!!pe&&pe.parent!==me}function hasContent(me){for(const u of me.getChildren())if(!u.is("uiElement"))return!0;return!1}function updateDocumentPlaceholders(me,u){const t=[];let de=!1;for(const[pe,Le]of me)Le.isDirectHost&&(t.push(pe),updatePlaceholder(u,pe,Le)&&(de=!0));for(const[pe,Le]of me){if(Le.isDirectHost)continue;const Ye=getChildPlaceholderHostSubstitute(pe);Ye&&(t.includes(Ye)||(Le.hostElement=Ye,updatePlaceholder(u,pe,Le)&&(de=!0)))}return de}function updatePlaceholder(me,u,t){const{text:de,isDirectHost:pe,hostElement:Le}=t;let Ye=!1;return Le.getAttribute("data-placeholder")!==de&&(me.setAttribute("data-placeholder",de,Le),Ye=!0),(pe||u.childCount==1)&&needsPlaceholder(Le,t.keepOnFocus)?showPlaceholder(me,Le)&&(Ye=!0):hidePlaceholder(me,Le)&&(Ye=!0),Ye}function getChildPlaceholderHostSubstitute(me){if(me.childCount){const u=me.getChild(0);if(u.is("element")&&!u.is("uiElement")&&!u.is("attributeElement"))return u}return null}function showPlaceholderTextDeprecationWarning(){hasDisplayedPlaceholderDeprecationWarning||logWarning("enableplaceholder-deprecated-text-option"),hasDisplayedPlaceholderDeprecationWarning=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let TypeCheckable$1=class{is(){throw new Error("is() method is abstract")}},Node$2=class extends EmitterMixin(TypeCheckable$1){constructor(t){super();wt(this,"document");wt(this,"parent");this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new CKEditorError("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let de=this;for(;de.parent;)t.unshift(de.index),de=de.parent;return t}getAncestors(t={}){const de=[];let pe=t.includeSelf?this:this.parent;for(;pe;)de[t.parentFirst?"push":"unshift"](pe),pe=pe.parent;return de}getCommonAncestor(t,de={}){const pe=this.getAncestors(de),Le=t.getAncestors(de);let Ye=0;for(;pe[Ye]==Le[Ye]&&pe[Ye];)Ye++;return Ye===0?null:pe[Ye-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const de=this.getPath(),pe=t.getPath(),Le=compareArrays(de,pe);switch(Le){case"prefix":return!0;case"extension":return!1;default:return de[Le]<pe[Le]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,de,pe){this.fire(`change:${t}`,de,pe),this.parent&&this.parent._fireChange(t,de,pe)}toJSON(){const t=clone$1(this);return delete t.parent,t}};Node$2.prototype.is=function(me){return me==="node"||me==="view:node"};let Text$1=class Cu extends Node$2{constructor(t,de){super(t);wt(this,"_textData");this._textData=de}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Cu?this===t||this.data===t.data:!1}_clone(){return new Cu(this.document,this.data)}};Text$1.prototype.is=function(me){return me==="$text"||me==="view:$text"||me==="text"||me==="view:text"||me==="node"||me==="view:node"};let TextProxy$1=class extends TypeCheckable$1{constructor(t,de,pe){super();wt(this,"textNode");wt(this,"data");wt(this,"offsetInText");if(this.textNode=t,de<0||de>t.data.length)throw new CKEditorError("view-textproxy-wrong-offsetintext",this);if(pe<0||de+pe>t.data.length)throw new CKEditorError("view-textproxy-wrong-length",this);this.data=t.data.substring(de,de+pe),this.offsetInText=de}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const de=[];let pe=t.includeSelf?this.textNode:this.parent;for(;pe!==null;)de[t.parentFirst?"push":"unshift"](pe),pe=pe.parent;return de}};TextProxy$1.prototype.is=function(me){return me==="$textProxy"||me==="view:$textProxy"||me==="textProxy"||me==="view:textProxy"};class ViewConsumable{constructor(){wt(this,"_consumables",new Map)}add(u,t){let de;if(u.is("$text")||u.is("documentFragment")){this._consumables.set(u,!0);return}this._consumables.has(u)?de=this._consumables.get(u):(de=new ViewElementConsumables(u),this._consumables.set(u,de)),de.add(t?normalizeConsumables(t):u._getConsumables())}test(u,t){const de=this._consumables.get(u);return de===void 0?null:u.is("$text")||u.is("documentFragment")?de:de.test(normalizeConsumables(t))}consume(u,t){if(u.is("$text")||u.is("documentFragment"))return this.test(u,t)?(this._consumables.set(u,!1),!0):!1;const de=this._consumables.get(u);return de===void 0?!1:de.consume(normalizeConsumables(t))}revert(u,t){const de=this._consumables.get(u);de!==void 0&&(u.is("$text")||u.is("documentFragment")?this._consumables.set(u,!0):de.revert(normalizeConsumables(t)))}static createFrom(u,t){if(t||(t=new ViewConsumable),u.is("$text"))t.add(u);else if(u.is("element")||u.is("documentFragment")){t.add(u);for(const de of u.getChildren())ViewConsumable.createFrom(de,t)}return t}}class ViewElementConsumables{constructor(u){wt(this,"element");wt(this,"_canConsumeName",null);wt(this,"_attributes",new Map);this.element=u}add(u){u.name&&(this._canConsumeName=!0);for(const[t,de]of u.attributes)if(de){let pe=this._attributes.get(t);(!pe||typeof pe=="boolean")&&(pe=new Map,this._attributes.set(t,pe)),pe.set(de,!0)}else{if(t=="style"||t=="class")throw new CKEditorError("viewconsumable-invalid-attribute",this);this._attributes.set(t,!0)}}test(u){if(u.name&&!this._canConsumeName)return this._canConsumeName;for(const[t,de]of u.attributes){const pe=this._attributes.get(t);if(pe===void 0)return null;if(pe===!1)return!1;if(pe!==!0){if(de){const Le=pe.get(de);if(Le===void 0)return null;if(!Le)return!1}else for(const Le of pe.values())if(!Le)return!1}}return!0}consume(u){if(!this.test(u))return!1;u.name&&(this._canConsumeName=!1);for(const[t,de]of u.attributes){const pe=this._attributes.get(t);if(typeof pe=="boolean")for(const[Le]of this.element._getConsumables(t,de).attributes)this._attributes.set(Le,!1);else if(de)for(const[,Le]of this.element._getConsumables(t,de).attributes)pe.set(Le,!1);else for(const Le of pe.keys())pe.set(Le,!1)}return!0}revert(u){u.name&&(this._canConsumeName=!0);for(const[t,de]of u.attributes){const pe=this._attributes.get(t);if(pe===!1){this._attributes.set(t,!0);continue}if(!(pe===void 0||pe===!0))if(de)pe.get(de)===!1&&pe.set(de,!0);else for(const Le of pe.keys())pe.set(Le,!0)}}}function normalizeConsumables(me){const u=[];return"attributes"in me&&me.attributes&&normalizeConsumablePart(u,me.attributes),"classes"in me&&me.classes&&normalizeConsumablePart(u,me.classes,"class"),"styles"in me&&me.styles&&normalizeConsumablePart(u,me.styles,"style"),{name:me.name||!1,attributes:u}}function normalizeConsumablePart(me,u,t){if(typeof u=="string"){me.push(t?[t,u]:[u]);return}for(const de of u)Array.isArray(de)?me.push(de):me.push(t?[t,de]:[de])}class Matcher{constructor(...u){wt(this,"_patterns",[]);this.add(...u)}add(...u){for(let t of u)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...u){for(const t of u)for(const de of this._patterns){const pe=this._isElementMatching(t,de);if(pe)return{element:t,pattern:de,match:pe}}return null}matchAll(...u){const t=[];for(const de of u)for(const pe of this._patterns){const Le=this._isElementMatching(de,pe);Le&&t.push({element:de,pattern:pe,match:Le})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const u=this._patterns[0],t=u.name;return typeof u!="function"&&t&&!(t instanceof RegExp)?t:null}_isElementMatching(u,t){if(typeof t=="function"){const Le=t(u);return!Le||typeof Le!="object"?Le:normalizeConsumables(Le)}const de={};if(t.name&&(de.name=matchName(t.name,u.name),!de.name))return null;const pe=[];return t.attributes&&!matchAttributes(t.attributes,u,pe)||t.classes&&!matchClasses(t.classes,u,pe)||t.styles&&!matchStyles(t.styles,u,pe)?null:(pe.length&&(de.attributes=pe),de)}}function isPatternMatched(me,u){return me===!0||me===u||me instanceof RegExp&&!!String(u).match(me)}function matchName(me,u){return me instanceof RegExp?!!u.match(me):me===u}function normalizePatterns(me,u){if(Array.isArray(me))return me.map(de=>typeof de!="object"||de instanceof RegExp?u?[u,de,!0]:[de,!0]:((de.key===void 0||de.value===void 0)&&logWarning("matcher-pattern-missing-key-or-value",de),u?[u,de.key,de.value]:[de.key,de.value]));if(typeof me!="object"||me instanceof RegExp)return[u?[u,me,!0]:[me,!0]];const t=[];for(const de in me)Object.prototype.hasOwnProperty.call(me,de)&&t.push(u?[u,de,me[de]]:[de,me[de]]);return t}function matchAttributes(me,u,t){let de;return typeof me=="object"&&!(me instanceof RegExp)&&!Array.isArray(me)?(me.style!==void 0&&logWarning("matcher-pattern-deprecated-attributes-style-key",me),me.class!==void 0&&logWarning("matcher-pattern-deprecated-attributes-class-key",me)):de=["class","style"],u._collectAttributesMatch(normalizePatterns(me),t,de)}function matchClasses(me,u,t){return u._collectAttributesMatch(normalizePatterns(me,"class"),t)}function matchStyles(me,u,t){return u._collectAttributesMatch(normalizePatterns(me,"style"),t)}class StylesMap{constructor(u){wt(this,"_styles");wt(this,"_cachedStyleNames",null);wt(this,"_cachedExpandedStyleNames",null);wt(this,"_styleProcessor");this._styles={},this._styleProcessor=u}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(u){this.clear();const t=parseInlineStyles(u);for(const[de,pe]of t)this._styleProcessor.toNormalizedForm(de,pe,this._styles);return this}has(u){if(this.isEmpty)return!1;const de=this._styleProcessor.getReducedForm(u,this._styles).find(([pe])=>pe===u);return Array.isArray(de)}set(u,t){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,isObject$2(u))for(const[de,pe]of Object.entries(u))this._styleProcessor.toNormalizedForm(de,pe,this._styles);else this._styleProcessor.toNormalizedForm(u,t,this._styles)}remove(u){for(const t of toArray$2(u)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const de=toPath(t);unset(this._styles,de),delete this._styles[t],this._cleanEmptyObjectsOnPath(de)}}getNormalized(u){return this._styleProcessor.getNormalized(u,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(u=>u.join(":")).sort().join(";")+";"}getAsString(u){if(this.isEmpty)return;if(this._styles[u]&&!isObject$2(this._styles[u]))return this._styles[u];const de=this._styleProcessor.getReducedForm(u,this._styles).find(([pe])=>pe===u);if(Array.isArray(de))return de[1]}getStyleNames(u=!1){return this.isEmpty?[]:u?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(u){if(this.size!==u.size)return!1;for(const t of this.getStyleNames())if(!u.has(t)||u.getAsString(t)!==this.getAsString(t))return!1;return!0}getStylesEntries(){const u=[],t=Object.keys(this._styles);for(const de of t)u.push(...this._styleProcessor.getReducedForm(de,this._styles));return u}_clone(){const u=new this.constructor(this._styleProcessor);return u.set(this.getNormalized()),u}_getTokensMatch(u,t){const de=[];for(const pe of this.getStyleNames(!0))if(isPatternMatched(u,pe)){if(t===!0){de.push(pe);continue}const Le=this.getAsString(pe);isPatternMatched(t,Le)&&de.push(pe)}return de.length?de:void 0}_getConsumables(u){const t=[];if(u){t.push(u);for(const de of this._styleProcessor.getRelatedStyles(u))t.push(de)}else for(const de of this.getStyleNames()){for(const pe of this._styleProcessor.getRelatedStyles(de))t.push(pe);t.push(de)}return t}_canMergeFrom(u){for(const t of u.getStyleNames())if(this.has(t)&&this.getAsString(t)!==u.getAsString(t))return!1;return!0}_mergeFrom(u){for(const t of u.getStyleNames())this.has(t)||this.set(t,u.getAsString(t))}_isMatching(u){for(const t of u.getStyleNames())if(!this.has(t)||this.getAsString(t)!==u.getAsString(t))return!1;return!0}_cleanEmptyObjectsOnPath(u){const t=u.split(".");if(!(t.length>1))return;const pe=t.splice(0,t.length-1).join("."),Le=get(this._styles,pe);if(!Le)return;!Object.keys(Le).length&&this.remove(pe)}}class StylesProcessor{constructor(){wt(this,"_normalizers");wt(this,"_extractors");wt(this,"_reducers");wt(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(u,t,de){if(isObject$2(t)){appendStyleValue(de,toPath(u),t);return}if(this._normalizers.has(u)){const pe=this._normalizers.get(u),{path:Le,value:Ye}=pe(t);appendStyleValue(de,Le,Ye)}else appendStyleValue(de,u,t)}getNormalized(u,t){if(!u)return merge({},t);if(t[u]!==void 0)return t[u];if(this._extractors.has(u)){const de=this._extractors.get(u);if(typeof de=="string")return get(t,de);const pe=de(u,t);if(pe)return pe}return get(t,toPath(u))}getReducedForm(u,t){const de=this.getNormalized(u,t);return de===void 0?[]:this._reducers.has(u)?this._reducers.get(u)(de):[[u,de]]}getStyleNames(u){const t=new Set;for(const de of this._consumables.keys()){const pe=this.getNormalized(de,u);pe&&(typeof pe!="object"||Object.keys(pe).length)&&t.add(de)}for(const de of Object.keys(u))t.add(de);return Array.from(t)}getRelatedStyles(u){return this._consumables.get(u)||[]}setNormalizer(u,t){this._normalizers.set(u,t)}setExtractor(u,t){this._extractors.set(u,t)}setReducer(u,t){this._reducers.set(u,t)}setStyleRelation(u,t){this._mapStyleNames(u,t);for(const de of t)this._mapStyleNames(de,[u])}_mapStyleNames(u,t){this._consumables.has(u)||this._consumables.set(u,[]),this._consumables.get(u).push(...t)}}function parseInlineStyles(me){let u=null,t=0,de=0,pe=null;const Le=new Map;if(me==="")return Le;me.charAt(me.length-1)!=";"&&(me=me+";");for(let Ye=0;Ye<me.length;Ye++){const tt=me.charAt(Ye);if(u===null)switch(tt){case":":pe||(pe=me.substr(t,Ye-t),de=Ye+1);break;case'"':case"'":u=tt;break;case";":{const st=me.substr(de,Ye-de);pe&&Le.set(pe.trim(),st.trim()),pe=null,t=Ye+1;break}}else tt===u&&(u=null)}return Le}function toPath(me){return me.replace("-",".")}function appendStyleValue(me,u,t){let de=t;isObject$2(t)&&(de=merge({},get(me,u),t)),set(me,u,de)}class TokenList{constructor(){wt(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(u){return this._set.has(u)}keys(){return Array.from(this._set.keys())}setTo(u){this.clear();for(const t of u.split(/\s+/))t&&this._set.add(t);return this}set(u){for(const t of toArray$2(u))t&&this._set.add(t)}remove(u){for(const t of toArray$2(u))this._set.delete(t)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(u){if(this.size!==u.size)return!1;for(const t of this.keys())if(!u.has(t))return!1;return!0}_clone(){const u=new this.constructor;return u._set=new Set(this._set),u}_getTokensMatch(u){const t=[];if(u===!0){for(const de of this._set.keys())t.push(de);return t}if(typeof u=="string"){for(const de of u.split(/\s+/))if(this._set.has(de))t.push(de);else return;return t}for(const de of this._set.keys())de.match(u)&&t.push(de);return t.length?t:void 0}_getConsumables(u){return u?[u]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(u){for(const t of u._set.keys())this._set.has(t)||this._set.add(t)}_isMatching(u){for(const t of u._set.keys())if(!this._set.has(t))return!1;return!0}}let Element$1=class gm extends Node$2{constructor(t,de,pe,Le){super(t);wt(this,"name");wt(this,"_unsafeAttributesToRender",[]);wt(this,"_attrs");wt(this,"_children");wt(this,"_customProperties",new Map);this.name=de,this._attrs=this._parseAttributes(pe),this._children=[],Le&&this._insertChild(0,Le)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())t!="class"&&t!="style"&&(yield t)}*getAttributes(){for(const[t,de]of this._attrs.entries())yield[t,String(de)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,de){return this._attrs.has(t)?de!==void 0?usesStylesMap(this.name,t)||usesTokenList(this.name,t)?this._attrs.get(t).has(de):this._attrs.get(t)===de:!0:!1}isSimilar(t){if(!(t instanceof gm))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size)return!1;for(const[de,pe]of this._attrs){const Le=t._attrs.get(de);if(Le===void 0)return!1;if(typeof pe=="string"||typeof Le=="string"){if(Le!==pe)return!1}else if(!pe.isSimilar(Le))return!1}return!0}hasClass(...t){for(const de of t)if(!this._classes||!this._classes.has(de))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],de=t[Symbol.iterator]();return Object.assign(t,{next:de.next.bind(de)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const de of t)if(!this._styles||!this._styles.has(de))return!1;return!0}findAncestor(...t){const de=new Matcher(...t);let pe=this.parent;for(;pe&&!pe.is("documentFragment");){if(de.match(pe))return pe;pe=pe.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",de=this._styles&&String(this._styles),pe=Array.from(this._attrs).filter(([Le])=>Le!="style"&&Le!="class").map(Le=>`${Le[0]}="${Le[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(de?` style="${de}"`:"")+(pe==""?"":` ${pe}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const de=[];if(t)for(const Le of this.getChildren())de.push(Le._clone(t));const pe=new this.constructor(this.document,this.name,this._attrs,de);return pe._customProperties=new Map(this._customProperties),pe.getFillerOffset=this.getFillerOffset,pe._unsafeAttributesToRender=this._unsafeAttributesToRender,pe}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,de){this._fireChange("children",this,{index:t});let pe=0;const Le=normalize$3(this.document,de);for(const Ye of Le)Ye.parent!==null&&Ye._remove(),Ye.parent=this,Ye.document=this.document,this._children.splice(t,0,Ye),t++,pe++;return pe}_removeChildren(t,de=1){this._fireChange("children",this,{index:t});for(let pe=t;pe<t+de;pe++)this._children[pe].parent=null;return this._children.splice(t,de)}_setAttribute(t,de,pe=!0){if(this._fireChange("attributes",this),usesStylesMap(this.name,t)||usesTokenList(this.name,t)){let Le=this._attrs.get(t);Le||(Le=usesStylesMap(this.name,t)?new StylesMap(this.document.stylesProcessor):new TokenList,this._attrs.set(t,Le)),pe?Le.setTo(String(de)):usesStylesMap(this.name,t)?Array.isArray(de)?Le.set(de[0],de[1]):Le.set(de):Le.set(typeof de=="string"?de.split(/\s+/):de)}else this._attrs.set(t,String(de))}_removeAttribute(t,de){if(this._fireChange("attributes",this),de!==void 0&&(usesStylesMap(this.name,t)||usesTokenList(this.name,t))){const pe=this._attrs.get(t);return pe?(usesTokenList(this.name,t)&&typeof de=="string"&&(de=de.split(/\s+/)),pe.remove(de),pe.isEmpty?this._attrs.delete(t):!1):!1}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,de){typeof t!="string"?this._setAttribute("style",t,!1):this._setAttribute("style",[t,de],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,de,pe){for(const[Le,Ye,tt]of t){let st=!1,ht=!1;for(const[mt,gt]of this._attrs)if(!(pe&&pe.includes(mt)||!isPatternMatched(Le,mt)))if(st=!0,typeof gt=="string"){if(isPatternMatched(Ye,gt))de.push([mt]),ht=!0;else if(!(Le instanceof RegExp))return!1}else{const bt=gt._getTokensMatch(Ye,tt||!0);if(bt){ht=!0;for(const _t of bt)de.push([mt,_t])}else if(!(Le instanceof RegExp))return!1}if(!st||!ht)return!1}return!0}_getConsumables(t,de){const pe=[];if(t){const Le=this._attrs.get(t);if(Le!==void 0)if(typeof Le=="string")pe.push([t]);else for(const Ye of Le._getConsumables(de))pe.push([t,Ye])}else for(const[Le,Ye]of this._attrs)if(typeof Ye=="string")pe.push([Le]);else for(const tt of Ye._getConsumables())pe.push([Le,tt]);return{name:!t,attributes:pe}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[de,pe]of t._attrs){const Le=this._attrs.get(de);if(Le!==void 0){if(typeof Le=="string"||typeof pe=="string"){if(Le!==pe)return!1}else if(!Le._canMergeFrom(pe))return!1}}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[de,pe]of t._attrs){const Le=this._attrs.get(de);Le===void 0||typeof Le=="string"||typeof pe=="string"?this._setAttribute(de,pe):Le._mergeFrom(pe)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[de,pe]of t._attrs){const Le=this._attrs.get(de);if(Le===void 0)return!1;if(typeof Le=="string"||typeof pe=="string"){if(Le!==pe)return!1}else if(!Le._isMatching(pe))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[de,pe]of t._attrs){const Le=this._attrs.get(de);typeof Le=="string"||typeof pe=="string"?this._attrs.delete(de):(Le.remove(pe.keys()),Le.isEmpty&&this._attrs.delete(de))}}_setCustomProperty(t,de){this._customProperties.set(t,de)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const de=toMap(t);for(const[pe,Le]of de)if(Le===null)de.delete(pe);else if(usesStylesMap(this.name,pe)){const Ye=Le instanceof StylesMap?Le._clone():new StylesMap(this.document.stylesProcessor).setTo(String(Le));de.set(pe,Ye)}else if(usesTokenList(this.name,pe)){const Ye=Le instanceof TokenList?Le._clone():new TokenList().setTo(String(Le));de.set(pe,Ye)}else typeof Le!="string"&&de.set(pe,String(Le));return de}};Element$1.prototype.is=function(me,u){return u?u===this.name&&(me==="element"||me==="view:element"):me==="element"||me==="view:element"||me==="node"||me==="view:node"};function normalize$3(me,u){if(typeof u=="string")return[new Text$1(me,u)];isIterable(u)||(u=[u]);const t=[];for(const de of u)typeof de=="string"?t.push(new Text$1(me,de)):de instanceof TextProxy$1?t.push(new Text$1(me,de.data)):t.push(de);return t}function usesTokenList(me,u){return u=="class"||me=="a"&&u=="rel"}function usesStylesMap(me,u){return u=="style"}class ContainerElement extends Element$1{constructor(u,t,de,pe){super(u,t,de,pe),this.getFillerOffset=getFillerOffset$4}}ContainerElement.prototype.is=function(me,u){return u?u===this.name&&(me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"):me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};function getFillerOffset$4(){const me=[...this.getChildren()],u=me[this.childCount-1];if(u&&u.is("element","br"))return this.childCount;for(const t of me)if(!t.is("uiElement"))return null;return this.childCount}class EditableElement extends ObservableMixin(ContainerElement){constructor(u,t,de,pe){super(u,t,de,pe),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(u),this.bind("isFocused").to(u,"isFocused",Le=>Le&&u.selection.editableElement==this),this.listenTo(u.selection,"change",()=>{this.isFocused=u.isFocused&&u.selection.editableElement==this})}destroy(){this.stopListening()}}EditableElement.prototype.is=function(me,u){return u?u===this.name&&(me==="editableElement"||me==="view:editableElement"||me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"):me==="editableElement"||me==="view:editableElement"||me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};const rootNameSymbol=Symbol("rootName");class RootEditableElement extends EditableElement{constructor(u,t){super(u,t),this.rootName="main"}get rootName(){return this.getCustomProperty(rootNameSymbol)}set rootName(u){this._setCustomProperty(rootNameSymbol,u)}set _name(u){this.name=u}}RootEditableElement.prototype.is=function(me,u){return u?u===this.name&&(me==="rootElement"||me==="view:rootElement"||me==="editableElement"||me==="view:editableElement"||me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"):me==="rootElement"||me==="view:rootElement"||me==="editableElement"||me==="view:editableElement"||me==="containerElement"||me==="view:containerElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};let TreeWalker$1=class{constructor(u={}){wt(this,"direction");wt(this,"boundaries");wt(this,"singleCharacters");wt(this,"shallow");wt(this,"ignoreElementEnd");wt(this,"_position");wt(this,"_boundaryStartParent");wt(this,"_boundaryEndParent");if(!u.boundaries&&!u.startPosition)throw new CKEditorError("view-tree-walker-no-start-position",null);if(u.direction&&u.direction!="forward"&&u.direction!="backward")throw new CKEditorError("view-tree-walker-unknown-direction",u.startPosition,{direction:u.direction});this.boundaries=u.boundaries||null,u.startPosition?this._position=Position$1._createAt(u.startPosition):this._position=Position$1._createAt(u.boundaries[u.direction=="backward"?"end":"start"]),this.direction=u.direction||"forward",this.singleCharacters=!!u.singleCharacters,this.shallow=!!u.shallow,this.ignoreElementEnd=!!u.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(u){let t,de;do de=this.position,t=this.next();while(!t.done&&u(t.value));t.done||(this._position=de)}jumpTo(u){this._boundaryStartParent&&u.isBefore(this.boundaries.start)?u=this.boundaries.start:this._boundaryEndParent&&u.isAfter(this.boundaries.end)&&(u=this.boundaries.end),this._position=u.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let u=this.position.clone();const t=this.position,de=u.parent;if(de.parent===null&&u.offset===de.childCount)return{done:!0,value:void 0};if(de===this._boundaryEndParent&&u.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let pe;if(de&&de.is("view:$text")){if(u.isAtEnd)return this._position=Position$1._createAfter(de),this._next();pe=de.data[u.offset]}else pe=de.getChild(u.offset);if(typeof pe=="string"){let Le;this.singleCharacters?Le=1:Le=(de===this._boundaryEndParent?this.boundaries.end.offset:de.data.length)-u.offset;const Ye=new TextProxy$1(de,u.offset,Le);return u.offset+=Le,this._position=u,this._formatReturnValue("text",Ye,t,u,Le)}if(pe&&pe.is("view:element")){if(!this.shallow)u=new Position$1(pe,0);else{if(this.boundaries&&this.boundaries.end.isBefore(u))return{done:!0,value:void 0};u.offset++}return this._position=u,this._formatReturnValue("elementStart",pe,t,u,1)}if(pe&&pe.is("view:$text")){if(this.singleCharacters)return u=new Position$1(pe,0),this._position=u,this._next();let Le=pe.data.length,Ye;return pe==this._boundaryEndParent?(Le=this.boundaries.end.offset,Ye=new TextProxy$1(pe,0,Le),u=Position$1._createAfter(Ye)):(Ye=new TextProxy$1(pe,0,pe.data.length),u.offset++),this._position=u,this._formatReturnValue("text",Ye,t,u,Le)}return u=Position$1._createAfter(de),this._position=u,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",de,t,u)}_previous(){let u=this.position.clone();const t=this.position,de=u.parent;if(de.parent===null&&u.offset===0)return{done:!0,value:void 0};if(de==this._boundaryStartParent&&u.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let pe;if(de.is("view:$text")){if(u.isAtStart)return this._position=Position$1._createBefore(de),this._previous();pe=de.data[u.offset-1]}else pe=de.getChild(u.offset-1);if(typeof pe=="string"){let Le;if(this.singleCharacters)Le=1;else{const tt=de===this._boundaryStartParent?this.boundaries.start.offset:0;Le=u.offset-tt}u.offset-=Le;const Ye=new TextProxy$1(de,u.offset,Le);return this._position=u,this._formatReturnValue("text",Ye,t,u,Le)}if(pe&&pe.is("view:element"))return this.shallow?(u.offset--,this._position=u,this._formatReturnValue("elementStart",pe,t,u,1)):(u=new Position$1(pe,pe.childCount),this._position=u,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",pe,t,u));if(pe&&pe.is("view:$text")){if(this.singleCharacters)return u=new Position$1(pe,pe.data.length),this._position=u,this._previous();let Le=pe.data.length,Ye;if(pe==this._boundaryStartParent){const tt=this.boundaries.start.offset;Ye=new TextProxy$1(pe,tt,pe.data.length-tt),Le=Ye.data.length,u=Position$1._createBefore(Ye)}else Ye=new TextProxy$1(pe,0,pe.data.length),u.offset--;return this._position=u,this._formatReturnValue("text",Ye,t,u,Le)}return u=Position$1._createBefore(de),this._position=u,this._formatReturnValue("elementStart",de,t,u,1)}_formatReturnValue(u,t,de,pe,Le){return t.is("view:$textProxy")&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(pe=Position$1._createAfter(t.textNode),this._position=pe):de=Position$1._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(pe=Position$1._createBefore(t.textNode),this._position=pe):de=Position$1._createBefore(t.textNode))),{done:!1,value:{type:u,item:t,previousPosition:de,nextPosition:pe,length:Le}}}},Position$1=class ys extends TypeCheckable$1{constructor(t,de){super();wt(this,"parent");wt(this,"offset");this.parent=t,this.offset=de}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof EditableElement);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const de=ys._createAt(this),pe=de.offset+t;return de.offset=pe<0?0:pe,de}getLastMatchingPosition(t,de={}){de.startPosition=this;const pe=new TreeWalker$1(de);return pe.skip(t),pe.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const de=this.getAncestors(),pe=t.getAncestors();let Le=0;for(;de[Le]==pe[Le]&&de[Le];)Le++;return Le===0?null:de[Le-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const de=this.parent.is("node")?this.parent.getPath():[],pe=t.parent.is("node")?t.parent.getPath():[];de.push(this.offset),pe.push(t.offset);const Le=compareArrays(de,pe);switch(Le){case"prefix":return"before";case"extension":return"after";default:return de[Le]<pe[Le]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new TreeWalker$1(t)}clone(){return new ys(this.parent,this.offset)}static _createAt(t,de){if(t instanceof ys)return new this(t.parent,t.offset);{const pe=t;if(de=="end")de=pe.is("$text")?pe.data.length:pe.childCount;else{if(de=="before")return this._createBefore(pe);if(de=="after")return this._createAfter(pe);if(de!==0&&!de)throw new CKEditorError("view-createpositionat-offset-required",pe)}return new ys(pe,de)}}static _createAfter(t){if(t.is("$textProxy"))return new ys(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new CKEditorError("view-position-after-root",t,{root:t});return new ys(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new ys(t.textNode,t.offsetInText);if(!t.parent)throw new CKEditorError("view-position-before-root",t,{root:t});return new ys(t.parent,t.index)}};Position$1.prototype.is=function(me){return me==="position"||me==="view:position"};let Range$1=class Ks extends TypeCheckable$1{constructor(t,de=null){super();wt(this,"start");wt(this,"end");this.start=t.clone(),this.end=de?de.clone():t.clone()}*[Symbol.iterator](){yield*new TreeWalker$1({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"}),de=this.end.getLastMatchingPosition(enlargeTrimSkip);return t.parent.is("$text")&&t.isAtStart&&(t=Position$1._createBefore(t.parent)),de.parent.is("$text")&&de.isAtEnd&&(de=Position$1._createAfter(de.parent)),new Ks(t,de)}getTrimmed(){let t=this.start.getLastMatchingPosition(enlargeTrimSkip);if(t.isAfter(this.end)||t.isEqual(this.end))return new Ks(t,t);let de=this.end.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"});const pe=t.nodeAfter,Le=de.nodeBefore;return pe&&pe.is("$text")&&(t=new Position$1(pe,0)),Le&&Le.is("$text")&&(de=new Position$1(Le,Le.data.length)),new Ks(t,de)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,de=!1){t.isCollapsed&&(de=!1);const pe=this.containsPosition(t.start)||de&&this.start.isEqual(t.start),Le=this.containsPosition(t.end)||de&&this.end.isEqual(t.end);return pe&&Le}getDifference(t){const de=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&de.push(new Ks(this.start,t.start)),this.containsPosition(t.end)&&de.push(new Ks(t.end,this.end))):de.push(this.clone()),de}getIntersection(t){if(this.isIntersecting(t)){let de=this.start,pe=this.end;return this.containsPosition(t.start)&&(de=t.start),this.containsPosition(t.end)&&(pe=t.end),new Ks(de,pe)}return null}getWalker(t={}){return t.boundaries=this,new TreeWalker$1(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,de=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(de=this.end.parent.previousSibling),t&&t.is("element")&&t===de?t:null}clone(){return new Ks(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const de=new TreeWalker$1(t);for(const pe of de)yield pe.item}*getPositions(t={}){t.boundaries=this;const de=new TreeWalker$1(t);yield de.position;for(const pe of de)yield pe.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,de,pe,Le){return new this(new Position$1(t,de),new Position$1(pe,Le))}static _createFromPositionAndShift(t,de){const pe=t,Le=t.getShiftedBy(de);return de>0?new this(pe,Le):new this(Le,pe)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const de=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Position$1._createBefore(t),de)}};Range$1.prototype.is=function(me){return me==="range"||me==="view:range"};function enlargeTrimSkip(me){return!!(me.item.is("attributeElement")||me.item.is("uiElement"))}let Selection$1=class pm extends EmitterMixin(TypeCheckable$1){constructor(...t){super();wt(this,"_ranges");wt(this,"_lastRangeBackward");wt(this,"_isFake");wt(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const de of this._ranges)(!t||de.start.isBefore(t.start))&&(t=de);return t?t.clone():null}getLastRange(){let t=null;for(const de of this._ranges)(!t||de.end.isAfter(t.end))&&(t=de);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const de of this._ranges){let pe=!1;for(const Le of t._ranges)if(de.isEqual(Le)){pe=!0;break}if(!pe)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const de=count(this.getRanges()),pe=count(t.getRanges());if(de!=pe)return!1;if(de==0)return!0;for(let Le of this.getRanges()){Le=Le.getTrimmed();let Ye=!1;for(let tt of t.getRanges())if(tt=tt.getTrimmed(),Le.start.isEqual(tt.start)&&Le.end.isEqual(tt.end)){Ye=!0;break}if(!Ye)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[de,pe,Le]=t;if(typeof pe=="object"&&(Le=pe,pe=void 0),de===null)this._setRanges([]),this._setFakeOptions(Le);else if(de instanceof pm||de instanceof DocumentSelection$1)this._setRanges(de.getRanges(),de.isBackward),this._setFakeOptions({fake:de.isFake,label:de.fakeSelectionLabel});else if(de instanceof Range$1)this._setRanges([de],Le&&Le.backward),this._setFakeOptions(Le);else if(de instanceof Position$1)this._setRanges([new Range$1(de)]),this._setFakeOptions(Le);else if(de instanceof Node$2){const Ye=!!Le&&!!Le.backward;let tt;if(pe===void 0)throw new CKEditorError("view-selection-setto-required-second-parameter",this);pe=="in"?tt=Range$1._createIn(de):pe=="on"?tt=Range$1._createOn(de):tt=new Range$1(Position$1._createAt(de,pe)),this._setRanges([tt],Ye),this._setFakeOptions(Le)}else if(isIterable(de))this._setRanges(de,Le&&Le.backward),this._setFakeOptions(Le);else throw new CKEditorError("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,de){if(this.anchor===null)throw new CKEditorError("view-selection-setfocus-no-ranges",this);const pe=Position$1._createAt(t,de);if(pe.compareWith(this.focus)=="same")return;const Le=this.anchor;this._ranges.pop(),pe.compareWith(Le)=="before"?this._addRange(new Range$1(pe,Le),!0):this._addRange(new Range$1(Le,pe)),this.fire("change")}_setRanges(t,de=!1){t=Array.from(t),this._ranges=[];for(const pe of t)this._addRange(pe);this._lastRangeBackward=!!de}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,de=!1){if(!(t instanceof Range$1))throw new CKEditorError("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!de}_pushRange(t){for(const de of this._ranges)if(t.isIntersecting(de))throw new CKEditorError("view-selection-range-intersects",this,{addedRange:t,intersectingRange:de});this._ranges.push(new Range$1(t.start,t.end))}};Selection$1.prototype.is=function(me){return me==="selection"||me==="view:selection"};let DocumentSelection$1=class extends EmitterMixin(TypeCheckable$1){constructor(...t){super();wt(this,"_selection");this._selection=new Selection$1,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,de){this._selection.setFocus(t,de)}};DocumentSelection$1.prototype.is=function(me){return me==="selection"||me=="documentSelection"||me=="view:selection"||me=="view:documentSelection"};class BubblingEventInfo extends EventInfo{constructor(t,de,pe){super(t,de);wt(this,"startRange");wt(this,"_eventPhase");wt(this,"_currentTarget");this.startRange=pe,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const contextsSymbol=Symbol("bubbling contexts");function BubblingEmitterMixin(me){class u extends me{fire(de,...pe){try{const Le=de instanceof EventInfo?de:new EventInfo(this,de),Ye=getBubblingContexts(this);if(!Ye.size)return;if(updateEventInfo(Le,"capturing",this),fireListenerFor(Ye,"$capture",Le,...pe))return Le.return;const tt=Le.startRange||this.selection.getFirstRange(),st=tt?tt.getContainedElement():null,ht=st?!!getCustomContext(Ye,st):!1;let mt=st||getDeeperRangeParent(tt);if(updateEventInfo(Le,"atTarget",mt),!ht){if(fireListenerFor(Ye,"$text",Le,...pe))return Le.return;updateEventInfo(Le,"bubbling",mt)}for(;mt;){if(mt.is("rootElement")){if(fireListenerFor(Ye,"$root",Le,...pe))return Le.return}else if(mt.is("element")&&fireListenerFor(Ye,mt.name,Le,...pe))return Le.return;if(fireListenerFor(Ye,mt,Le,...pe))return Le.return;mt=mt.parent,updateEventInfo(Le,"bubbling",mt)}return updateEventInfo(Le,"bubbling",this),fireListenerFor(Ye,"$document",Le,...pe),Le.return}catch(Le){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(Le,this)}}_addEventListener(de,pe,Le){const Ye=toArray$2(Le.context||"$document"),tt=getBubblingContexts(this);for(const st of Ye){let ht=tt.get(st);ht||(ht=new(EmitterMixin()),tt.set(st,ht)),this.listenTo(ht,de,pe,Le)}}_removeEventListener(de,pe){const Le=getBubblingContexts(this);for(const Ye of Le.values())this.stopListening(Ye,de,pe)}}return u}{const me=BubblingEmitterMixin(Object);["fire","_addEventListener","_removeEventListener"].forEach(u=>{BubblingEmitterMixin[u]=me.prototype[u]})}function updateEventInfo(me,u,t){me instanceof BubblingEventInfo&&(me._eventPhase=u,me._currentTarget=t)}function fireListenerFor(me,u,t,...de){const pe=typeof u=="string"?me.get(u):getCustomContext(me,u);return pe?(pe.fire(t,...de),t.stop.called):!1}function getCustomContext(me,u){for(const[t,de]of me)if(typeof t=="function"&&t(u))return de;return null}function getBubblingContexts(me){return me[contextsSymbol]||(me[contextsSymbol]=new Map),me[contextsSymbol]}function getDeeperRangeParent(me){if(!me)return null;const u=me.start.parent,t=me.end.parent,de=u.getPath(),pe=t.getPath();return de.length>pe.length?u:t}let Document$1=class extends BubblingEmitterMixin(ObservableMixin()){constructor(t){super();wt(this,"selection");wt(this,"roots");wt(this,"stylesProcessor");wt(this,"_postFixers",new Set);this.selection=new DocumentSelection$1,this.roots=new Collection({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let de=!1;do for(const pe of this._postFixers)if(de=pe(t),de)break;while(de)}};const DEFAULT_PRIORITY=10;class AttributeElement extends Element$1{constructor(t,de,pe,Le){super(t,de,pe,Le);wt(this,"_priority",DEFAULT_PRIORITY);wt(this,"_id",null);wt(this,"_clonesGroup",null);this.getFillerOffset=getFillerOffset$3}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new CKEditorError("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const de=super._clone(t);return de._priority=this._priority,de._id=this._id,de}_canMergeAttributesFrom(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canSubtractAttributesOf(t)}}wt(AttributeElement,"DEFAULT_PRIORITY",DEFAULT_PRIORITY);AttributeElement.prototype.is=function(me,u){return u?u===this.name&&(me==="attributeElement"||me==="view:attributeElement"||me==="element"||me==="view:element"):me==="attributeElement"||me==="view:attributeElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};function getFillerOffset$3(){if(nonUiChildrenCount(this))return null;let me=this.parent;for(;me&&me.is("attributeElement");){if(nonUiChildrenCount(me)>1)return null;me=me.parent}return!me||nonUiChildrenCount(me)>1?null:this.childCount}function nonUiChildrenCount(me){return Array.from(me.getChildren()).filter(u=>!u.is("uiElement")).length}class EmptyElement extends Element$1{constructor(u,t,de,pe){super(u,t,de,pe),this.getFillerOffset=getFillerOffset$2}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-emptyelement-cannot-add",[this,t]);return 0}}EmptyElement.prototype.is=function(me,u){return u?u===this.name&&(me==="emptyElement"||me==="view:emptyElement"||me==="element"||me==="view:element"):me==="emptyElement"||me==="view:emptyElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};function getFillerOffset$2(){return null}class UIElement extends Element$1{constructor(u,t,de,pe){super(u,t,de,pe),this.getFillerOffset=getFillerOffset$1}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-uielement-cannot-add",[this,t]);return 0}render(u,t){return this.toDomElement(u)}toDomElement(u){const t=u.createElement(this.name);for(const de of this.getAttributeKeys())t.setAttribute(de,this.getAttribute(de));return t}}UIElement.prototype.is=function(me,u){return u?u===this.name&&(me==="uiElement"||me==="view:uiElement"||me==="element"||me==="view:element"):me==="uiElement"||me==="view:uiElement"||me==="element"||me==="view:element"||me==="node"||me==="view:node"};function injectUiElementHandling(me){me.document.on("arrowKey",(u,t)=>jumpOverUiElement(u,t,me.domConverter),{priority:"low"})}function getFillerOffset$1(){return null}function jumpOverUiElement(me,u,t){if(u.keyCode==keyCodes.arrowright){const de=u.domTarget.ownerDocument.defaultView.getSelection(),pe=de.rangeCount==1&&de.getRangeAt(0).collapsed;if(pe||u.shiftKey){const Le=de.focusNode,Ye=de.focusOffset,tt=t.domPositionToView(Le,Ye);if(tt===null)return;let st=!1;const ht=tt.getLastMatchingPosition(mt=>(mt.item.is("uiElement")&&(st=!0),!!(mt.item.is("uiElement")||mt.item.is("attributeElement"))));if(st){const mt=t.viewPositionToDom(ht);pe?de.collapse(mt.parent,mt.offset):de.extend(mt.parent,mt.offset)}}}}class RawElement extends Element$1{constructor(u,t,de,pe){super(u,t,de,pe),this.getFillerOffset=getFillerOffset$5}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-rawelement-cannot-add",[this,t]);return 0}render(u,t){}}RawElement.prototype.is=function(me,u){return u?u===this.name&&(me==="rawElement"||me==="view:rawElement"||me==="element"||me==="view:element"):me==="rawElement"||me==="view:rawElement"||me===this.name||me==="view:"+this.name||me==="element"||me==="view:element"||me==="node"||me==="view:node"};function getFillerOffset$5(){return null}let DocumentFragment$1=class extends EmitterMixin(TypeCheckable$1){constructor(t,de){super();wt(this,"document");wt(this,"_children",[]);wt(this,"_customProperties",new Map);this.document=t,de&&this._insertChild(0,de)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,de){this._fireChange("children",this,{index:t});let pe=0;const Le=normalize$2(this.document,de);for(const Ye of Le)Ye.parent!==null&&Ye._remove(),Ye.parent=this,this._children.splice(t,0,Ye),t++,pe++;return pe}_removeChildren(t,de=1){this._fireChange("children",this,{index:t});for(let pe=t;pe<t+de;pe++)this._children[pe].parent=null;return this._children.splice(t,de)}_fireChange(t,de,pe){this.fire(`change:${t}`,de,pe)}_setCustomProperty(t,de){this._customProperties.set(t,de)}_removeCustomProperty(t){return this._customProperties.delete(t)}};DocumentFragment$1.prototype.is=function(me){return me==="documentFragment"||me==="view:documentFragment"};function normalize$2(me,u){return typeof u=="string"?[new Text$1(me,u)]:(isIterable(u)||(u=[u]),Array.from(u).map(t=>typeof t=="string"?new Text$1(me,t):t instanceof TextProxy$1?new Text$1(me,t.data):t))}class DowncastWriter{constructor(u){wt(this,"document");wt(this,"_cloneGroups",new Map);wt(this,"_slotFactory",null);this.document=u}setSelection(...u){this.document.selection._setTo(...u)}setSelectionFocus(u,t){this.document.selection._setFocus(u,t)}createDocumentFragment(u){return new DocumentFragment$1(this.document,u)}createText(u){return new Text$1(this.document,u)}createAttributeElement(u,t,de={}){const pe=new AttributeElement(this.document,u,t);return typeof de.priority=="number"&&(pe._priority=de.priority),de.id&&(pe._id=de.id),de.renderUnsafeAttributes&&pe._unsafeAttributesToRender.push(...de.renderUnsafeAttributes),pe}createContainerElement(u,t,de={},pe={}){let Le=null;isPlainObject(de)?pe=de:Le=de;const Ye=new ContainerElement(this.document,u,t,Le);return pe.renderUnsafeAttributes&&Ye._unsafeAttributesToRender.push(...pe.renderUnsafeAttributes),Ye}createEditableElement(u,t,de={}){const pe=new EditableElement(this.document,u,t);return de.renderUnsafeAttributes&&pe._unsafeAttributesToRender.push(...de.renderUnsafeAttributes),pe}createEmptyElement(u,t,de={}){const pe=new EmptyElement(this.document,u,t);return de.renderUnsafeAttributes&&pe._unsafeAttributesToRender.push(...de.renderUnsafeAttributes),pe}createUIElement(u,t,de){const pe=new UIElement(this.document,u,t);return de&&(pe.render=de),pe}createRawElement(u,t,de,pe={}){const Le=new RawElement(this.document,u,t);return de&&(Le.render=de),pe.renderUnsafeAttributes&&Le._unsafeAttributesToRender.push(...pe.renderUnsafeAttributes),Le}setAttribute(u,t,de,pe){pe!==void 0?pe._setAttribute(u,t,de):de._setAttribute(u,t)}removeAttribute(u,t,de){de!==void 0?de._removeAttribute(u,t):t._removeAttribute(u)}addClass(u,t){t._addClass(u)}removeClass(u,t){t._removeClass(u)}setStyle(u,t,de){isPlainObject(u)&&de===void 0?t._setStyle(u):de._setStyle(u,t)}removeStyle(u,t){t._removeStyle(u)}setCustomProperty(u,t,de){de._setCustomProperty(u,t)}removeCustomProperty(u,t){return t._removeCustomProperty(u)}breakAttributes(u){return u instanceof Position$1?this._breakAttributes(u):this._breakAttributesRange(u)}breakContainer(u){const t=u.parent;if(!t.is("containerElement"))throw new CKEditorError("view-writer-break-non-container-element",this.document);if(!t.parent)throw new CKEditorError("view-writer-break-root",this.document);if(u.isAtStart)return Position$1._createBefore(t);if(!u.isAtEnd){const de=t._clone(!1);this.insert(Position$1._createAfter(t),de);const pe=new Range$1(u,Position$1._createAt(t,"end")),Le=new Position$1(de,0);this.move(pe,Le)}return Position$1._createAfter(t)}mergeAttributes(u){const t=u.offset,de=u.parent;if(de.is("$text"))return u;if(de.is("attributeElement")&&de.childCount===0){const Ye=de.parent,tt=de.index;return de._remove(),this._removeFromClonedElementsGroup(de),this.mergeAttributes(new Position$1(Ye,tt))}const pe=de.getChild(t-1),Le=de.getChild(t);if(!pe||!Le)return u;if(pe.is("$text")&&Le.is("$text"))return mergeTextNodes(pe,Le);if(pe.is("attributeElement")&&Le.is("attributeElement")&&pe.isSimilar(Le)){const Ye=pe.childCount;return pe._appendChild(Le.getChildren()),Le._remove(),this._removeFromClonedElementsGroup(Le),this.mergeAttributes(new Position$1(pe,Ye))}return u}mergeContainers(u){const t=u.nodeBefore,de=u.nodeAfter;if(!t||!de||!t.is("containerElement")||!de.is("containerElement"))throw new CKEditorError("view-writer-merge-containers-invalid-position",this.document);const pe=t.getChild(t.childCount-1),Le=pe instanceof Text$1?Position$1._createAt(pe,"end"):Position$1._createAt(t,"end");return this.move(Range$1._createIn(de),Position$1._createAt(t,"end")),this.remove(Range$1._createOn(de)),Le}insert(u,t){t=isIterable(t)?[...t]:[t],validateNodesToInsert(t,this.document);const de=t.reduce((Ye,tt)=>{const st=Ye[Ye.length-1],ht=!tt.is("uiElement");return!st||st.breakAttributes!=ht?Ye.push({breakAttributes:ht,nodes:[tt]}):st.nodes.push(tt),Ye},[]);let pe=null,Le=u;for(const{nodes:Ye,breakAttributes:tt}of de){const st=this._insertNodes(Le,Ye,tt);pe||(pe=st.start),Le=st.end}return pe?new Range$1(pe,Le):new Range$1(u)}remove(u){const t=u instanceof Range$1?u:Range$1._createOn(u);if(validateRangeContainer(t,this.document),t.isCollapsed)return new DocumentFragment$1(this.document);const{start:de,end:pe}=this._breakAttributesRange(t,!0),Le=de.parent,Ye=pe.offset-de.offset,tt=Le._removeChildren(de.offset,Ye);for(const ht of tt)this._removeFromClonedElementsGroup(ht);const st=this.mergeAttributes(de);return t.start=st,t.end=st.clone(),new DocumentFragment$1(this.document,tt)}clear(u,t){validateRangeContainer(u,this.document);const de=u.getWalker({direction:"backward",ignoreElementEnd:!0});for(const pe of de){const Le=pe.item;let Ye;if(Le.is("element")&&t.isSimilar(Le))Ye=Range$1._createOn(Le);else if(!pe.nextPosition.isAfter(u.start)&&Le.is("$textProxy")){const tt=Le.getAncestors().find(st=>st.is("element")&&t.isSimilar(st));tt&&(Ye=Range$1._createIn(tt))}Ye&&(Ye.end.isAfter(u.end)&&(Ye.end=u.end),Ye.start.isBefore(u.start)&&(Ye.start=u.start),this.remove(Ye))}}move(u,t){let de;if(t.isAfter(u.end)){t=this._breakAttributes(t,!0);const pe=t.parent,Le=pe.childCount;u=this._breakAttributesRange(u,!0),de=this.remove(u),t.offset+=pe.childCount-Le}else de=this.remove(u);return this.insert(t,de)}wrap(u,t){if(!(t instanceof AttributeElement))throw new CKEditorError("view-writer-wrap-invalid-attribute",this.document);if(validateRangeContainer(u,this.document),u.isCollapsed){let de=u.start;de.parent.is("element")&&!_hasNonUiChildren(de.parent)&&(de=de.getLastMatchingPosition(Le=>Le.item.is("uiElement"))),de=this._wrapPosition(de,t);const pe=this.document.selection;return pe.isCollapsed&&pe.getFirstPosition().isEqual(u.start)&&this.setSelection(de),new Range$1(de)}else return this._wrapRange(u,t)}unwrap(u,t){if(!(t instanceof AttributeElement))throw new CKEditorError("view-writer-unwrap-invalid-attribute",this.document);if(validateRangeContainer(u,this.document),u.isCollapsed)return u;const{start:de,end:pe}=this._breakAttributesRange(u,!0),Le=de.parent,Ye=this._unwrapChildren(Le,de.offset,pe.offset,t),tt=this.mergeAttributes(Ye.start);tt.isEqual(Ye.start)||Ye.end.offset--;const st=this.mergeAttributes(Ye.end);return new Range$1(tt,st)}rename(u,t){const de=new ContainerElement(this.document,u,t.getAttributes());return this.insert(Position$1._createAfter(t),de),this.move(Range$1._createIn(t),Position$1._createAt(de,0)),this.remove(Range$1._createOn(t)),de}clearClonedElementsGroup(u){this._cloneGroups.delete(u)}createPositionAt(u,t){return Position$1._createAt(u,t)}createPositionAfter(u){return Position$1._createAfter(u)}createPositionBefore(u){return Position$1._createBefore(u)}createRange(u,t){return new Range$1(u,t)}createRangeOn(u){return Range$1._createOn(u)}createRangeIn(u){return Range$1._createIn(u)}createSelection(...u){return new Selection$1(...u)}createSlot(u="children"){if(!this._slotFactory)throw new CKEditorError("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,u)}_registerSlotFactory(u){this._slotFactory=u}_clearSlotFactory(){this._slotFactory=null}_insertNodes(u,t,de){let pe;if(de?pe=getParentContainer(u):pe=u.parent.is("$text")?u.parent.parent:u.parent,!pe)throw new CKEditorError("view-writer-invalid-position-container",this.document);let Le;de?Le=this._breakAttributes(u,!0):Le=u.parent.is("$text")?breakTextNode(u):u;const Ye=pe._insertChild(Le.offset,t);for(const mt of t)this._addToClonedElementsGroup(mt);const tt=Le.getShiftedBy(Ye),st=this.mergeAttributes(Le);st.isEqual(Le)||tt.offset--;const ht=this.mergeAttributes(tt);return new Range$1(st,ht)}_wrapChildren(u,t,de,pe){let Le=t;const Ye=[];for(;Le<de;){const st=u.getChild(Le),ht=st.is("$text"),mt=st.is("attributeElement");if(mt&&st._canMergeAttributesFrom(pe))st._mergeAttributesFrom(pe),Ye.push(new Position$1(u,Le));else if(ht||!mt||shouldABeOutsideB(pe,st)){const gt=pe._clone();st._remove(),gt._appendChild(st),u._insertChild(Le,gt),this._addToClonedElementsGroup(gt),Ye.push(new Position$1(u,Le))}else this._wrapChildren(st,0,st.childCount,pe);Le++}let tt=0;for(const st of Ye){if(st.offset-=tt,st.offset==t)continue;this.mergeAttributes(st).isEqual(st)||(tt++,de--)}return Range$1._createFromParentsAndOffsets(u,t,u,de)}_unwrapChildren(u,t,de,pe){let Le=t;const Ye=[];for(;Le<de;){const st=u.getChild(Le);if(!st.is("attributeElement")){Le++;continue}if(st.isSimilar(pe)){const ht=st.getChildren(),mt=st.childCount;st._remove(),u._insertChild(Le,ht),this._removeFromClonedElementsGroup(st),Ye.push(new Position$1(u,Le),new Position$1(u,Le+mt)),Le+=mt,de+=mt-1;continue}if(st._canSubtractAttributesOf(pe)){st._subtractAttributesOf(pe),Ye.push(new Position$1(u,Le),new Position$1(u,Le+1)),Le++;continue}this._unwrapChildren(st,0,st.childCount,pe),Le++}let tt=0;for(const st of Ye){if(st.offset-=tt,st.offset==t||st.offset==de)continue;this.mergeAttributes(st).isEqual(st)||(tt++,de--)}return Range$1._createFromParentsAndOffsets(u,t,u,de)}_wrapRange(u,t){const{start:de,end:pe}=this._breakAttributesRange(u,!0),Le=de.parent,Ye=this._wrapChildren(Le,de.offset,pe.offset,t),tt=this.mergeAttributes(Ye.start);tt.isEqual(Ye.start)||Ye.end.offset--;const st=this.mergeAttributes(Ye.end);return new Range$1(tt,st)}_wrapPosition(u,t){if(t.isSimilar(u.parent))return movePositionToTextNode(u.clone());u.parent.is("$text")&&(u=breakTextNode(u));const de=this.createAttributeElement("_wrapPosition-fake-element");de._priority=Number.POSITIVE_INFINITY,de.isSimilar=()=>!1,u.parent._insertChild(u.offset,de);const pe=new Range$1(u,u.getShiftedBy(1));this.wrap(pe,t);const Le=new Position$1(de.parent,de.index);de._remove();const Ye=Le.nodeBefore,tt=Le.nodeAfter;return Ye&&Ye.is("view:$text")&&tt&&tt.is("view:$text")?mergeTextNodes(Ye,tt):movePositionToTextNode(Le)}_breakAttributesRange(u,t=!1){const de=u.start,pe=u.end;if(validateRangeContainer(u,this.document),u.isCollapsed){const st=this._breakAttributes(u.start,t);return new Range$1(st,st)}const Le=this._breakAttributes(pe,t),Ye=Le.parent.childCount,tt=this._breakAttributes(de,t);return Le.offset+=Le.parent.childCount-Ye,new Range$1(tt,Le)}_breakAttributes(u,t=!1){const de=u.offset,pe=u.parent;if(u.parent.is("emptyElement"))throw new CKEditorError("view-writer-cannot-break-empty-element",this.document);if(u.parent.is("uiElement"))throw new CKEditorError("view-writer-cannot-break-ui-element",this.document);if(u.parent.is("rawElement"))throw new CKEditorError("view-writer-cannot-break-raw-element",this.document);if(!t&&pe.is("$text")&&isContainerOrFragment(pe.parent)||isContainerOrFragment(pe))return u.clone();if(pe.is("$text"))return this._breakAttributes(breakTextNode(u),t);const Le=pe.childCount;if(de==Le){const Ye=new Position$1(pe.parent,pe.index+1);return this._breakAttributes(Ye,t)}else if(de===0){const Ye=new Position$1(pe.parent,pe.index);return this._breakAttributes(Ye,t)}else{const Ye=pe.index+1,tt=pe._clone();pe.parent._insertChild(Ye,tt),this._addToClonedElementsGroup(tt);const st=pe.childCount-de,ht=pe._removeChildren(de,st);tt._appendChild(ht);const mt=new Position$1(pe.parent,Ye);return this._breakAttributes(mt,t)}}_addToClonedElementsGroup(u){if(!u.root.is("rootElement"))return;if(u.is("element"))for(const pe of u.getChildren())this._addToClonedElementsGroup(pe);const t=u.id;if(!t)return;let de=this._cloneGroups.get(t);de||(de=new Set,this._cloneGroups.set(t,de)),de.add(u),u._clonesGroup=de}_removeFromClonedElementsGroup(u){if(u.is("element"))for(const pe of u.getChildren())this._removeFromClonedElementsGroup(pe);const t=u.id;if(!t)return;const de=this._cloneGroups.get(t);de&&de.delete(u)}}function _hasNonUiChildren(me){return Array.from(me.getChildren()).some(u=>!u.is("uiElement"))}function getParentContainer(me){let u=me.parent;for(;!isContainerOrFragment(u);){if(!u)return;u=u.parent}return u}function shouldABeOutsideB(me,u){return me.priority<u.priority?!0:me.priority>u.priority?!1:me.getIdentity()<u.getIdentity()}function movePositionToTextNode(me){const u=me.nodeBefore;if(u&&u.is("$text"))return new Position$1(u,u.data.length);const t=me.nodeAfter;return t&&t.is("$text")?new Position$1(t,0):me}function breakTextNode(me){if(me.offset==me.parent.data.length)return new Position$1(me.parent.parent,me.parent.index+1);if(me.offset===0)return new Position$1(me.parent.parent,me.parent.index);const u=me.parent.data.slice(me.offset);return me.parent._data=me.parent.data.slice(0,me.offset),me.parent.parent._insertChild(me.parent.index+1,new Text$1(me.root.document,u)),new Position$1(me.parent.parent,me.parent.index+1)}function mergeTextNodes(me,u){const t=me.data.length;return me._data+=u.data,u._remove(),new Position$1(me,t)}const validNodesToInsert=[Text$1,AttributeElement,ContainerElement,EmptyElement,RawElement,UIElement];function validateNodesToInsert(me,u){for(const t of me){if(!validNodesToInsert.some(de=>t instanceof de))throw new CKEditorError("view-writer-insert-invalid-node-type",u);t.is("$text")||validateNodesToInsert(t.getChildren(),u)}}function isContainerOrFragment(me){return me&&(me.is("containerElement")||me.is("documentFragment"))}function validateRangeContainer(me,u){const t=getParentContainer(me.start),de=getParentContainer(me.end);if(!t||!de||t!==de)throw new CKEditorError("view-writer-invalid-range-container",u)}const NBSP_FILLER=me=>me.createTextNode(""),MARKED_NBSP_FILLER=me=>{const u=me.createElement("span");return u.dataset.ckeFiller="true",u.innerText="",u},BR_FILLER=me=>{const u=me.createElement("br");return u.dataset.ckeFiller="true",u},INLINE_FILLER_LENGTH=7,INLINE_FILLER="".repeat(INLINE_FILLER_LENGTH);function startsWithFiller(me){return typeof me=="string"?me.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER:isText(me)&&me.data.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER}function isInlineFiller(me){return me.data.length==INLINE_FILLER_LENGTH&&startsWithFiller(me)}function getDataWithoutFiller(me){const u=typeof me=="string"?me:me.data;return startsWithFiller(me)?u.slice(INLINE_FILLER_LENGTH):u}function injectQuirksHandling(me){me.document.on("arrowKey",jumpOverInlineFiller,{priority:"low"})}function jumpOverInlineFiller(me,u){if(u.keyCode==keyCodes.arrowleft){const t=u.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const de=t.getRangeAt(0).startContainer,pe=t.getRangeAt(0).startOffset;startsWithFiller(de)&&pe<=INLINE_FILLER_LENGTH&&t.collapse(de,0)}}}class Renderer extends ObservableMixin(){constructor(t,de){super();wt(this,"domDocuments",new Set);wt(this,"domConverter");wt(this,"markedAttributes",new Set);wt(this,"markedChildren",new Set);wt(this,"markedTexts",new Set);wt(this,"selection");wt(this,"_inlineFiller",null);wt(this,"_fakeSelectionContainer",null);this.domConverter=t,this.selection=de,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),env.isBlink&&!env.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,de){if(t==="text")this.domConverter.mapViewToDom(de.parent)&&this.markedTexts.add(de);else{if(!this.domConverter.mapViewToDom(de))return;if(t==="attributes")this.markedAttributes.add(de);else if(t==="children")this.markedChildren.add(de);else throw new CKEditorError("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!env.isAndroid)return;let t=null;const de=env.isBlink&&!env.isAndroid?!this.isSelecting:!0;for(const pe of this.markedChildren)this._updateChildrenMappings(pe);de?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=Position$1._createBefore(t.parent)));for(const pe of this.markedAttributes)this._updateAttrs(pe);for(const pe of this.markedChildren)this._updateChildren(pe,{inlineFillerPosition:t});for(const pe of this.markedTexts)!this.markedChildren.has(pe.parent)&&this.domConverter.mapViewToDom(pe.parent)&&this._updateText(pe,{inlineFillerPosition:t});if(de)if(t){const pe=this.domConverter.viewPositionToDom(t),Le=pe.parent.ownerDocument;startsWithFiller(pe.parent)?this._inlineFiller=pe.parent:this._inlineFiller=addInlineFiller(Le,pe.parent,pe.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const de=this.domConverter.mapViewToDom(t);if(!de)return;const pe=Array.from(de.childNodes),Le=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),Ye=this._diffNodeLists(pe,Le),tt=this._findUpdateActions(Ye,pe,Le,areSimilarElements);if(tt.indexOf("update")!==-1){const st={equal:0,insert:0,delete:0};for(const ht of tt)if(ht==="update"){const mt=st.equal+st.insert,gt=st.equal+st.delete,bt=t.getChild(mt);bt&&!bt.is("uiElement")&&!bt.is("rawElement")&&this._updateElementMappings(bt,pe[gt]),remove$2(Le[mt]),st.equal++}else st[ht]++}}_updateElementMappings(t,de){this.domConverter.unbindDomElement(de),this.domConverter.bindElements(de,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?Position$1._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),de=this.domConverter.viewPositionToDom(t);return!!(de&&isText(de.parent)&&startsWithFiller(de.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!startsWithFiller(t))throw new CKEditorError("view-renderer-filler-was-lost",this);isInlineFiller(t)?t.remove():t.data=t.data.substr(INLINE_FILLER_LENGTH),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),de=t.parent,pe=t.offset;if(!this.domConverter.mapViewToDom(de.root)||!de.is("element")||!isEditable(de))return!1;const Le=t.nodeBefore,Ye=t.nodeAfter;return!(Le instanceof Text$1||Ye instanceof Text$1||pe===de.getFillerOffset()&&(!Le||!Le.is("element","br"))||env.isAndroid&&(Le||Ye))}_updateText(t,de){const pe=this.domConverter.findCorrespondingDomText(t);let Ye=this.domConverter.viewToDom(t).data;const tt=de.inlineFillerPosition;tt&&tt.parent==t.parent&&tt.offset==t.index&&(Ye=INLINE_FILLER+Ye),this._updateTextNode(pe,Ye)}_updateAttrs(t){const de=this.domConverter.mapViewToDom(t);if(de){for(const pe of Array.from(de.attributes)){const Le=pe.name;t.hasAttribute(Le)||this.domConverter.removeDomElementAttribute(de,Le)}for(const pe of t.getAttributeKeys())this.domConverter.setDomElementAttribute(de,pe,t.getAttribute(pe),t)}}_updateChildren(t,de){const pe=this.domConverter.mapViewToDom(t);if(!pe)return;if(env.isAndroid){let bt=null;for(const _t of Array.from(pe.childNodes)){if(bt&&isText(bt)&&isText(_t)){pe.normalize();break}bt=_t}}const Le=de.inlineFillerPosition,Ye=pe.childNodes,tt=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));Le&&Le.parent===t&&addInlineFiller(pe.ownerDocument,tt,Le.offset);const st=this._diffNodeLists(Ye,tt),ht=this._findUpdateActions(st,Ye,tt,areTextNodes);let mt=0;const gt=new Set;for(const bt of ht)bt==="delete"?(gt.add(Ye[mt]),remove$2(Ye[mt])):(bt==="equal"||bt==="update")&&mt++;mt=0;for(const bt of ht)bt==="insert"?(insertAt(pe,mt,tt[mt]),mt++):bt==="update"?(this._updateTextNode(Ye[mt],tt[mt].data),mt++):bt==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(tt[mt])),mt++);for(const bt of gt)bt.parentNode||this.domConverter.unbindDomElement(bt)}_diffNodeLists(t,de){return t=filterOutFakeSelectionContainer(t,this._fakeSelectionContainer),diff(t,de,sameNodes$1.bind(null,this.domConverter))}_findUpdateActions(t,de,pe,Le){if(t.indexOf("insert")===-1||t.indexOf("delete")===-1)return t;let Ye=[],tt=[],st=[];const ht={equal:0,insert:0,delete:0};for(const mt of t)mt==="insert"?st.push(pe[ht.equal+ht.insert]):mt==="delete"?tt.push(de[ht.equal+ht.delete]):(Ye=Ye.concat(diff(tt,st,Le).map(gt=>gt==="equal"?"update":gt)),Ye.push("equal"),tt=[],st=[]),ht[mt]++;return Ye.concat(diff(tt,st,Le).map(mt=>mt==="equal"?"update":mt))}_updateTextNode(t,de){const pe=t.data;pe!=de&&(env.isAndroid&&this.isComposing&&pe.replace(/\u00A0/g," ")==de.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,de))}_updateTextNodeInternal(t,de){const pe=fastDiff(t.data,de);for(const Le of pe)Le.type==="insert"?t.insertData(Le.index,Le.values.join("")):t.deleteData(Le.index,Le.howMany)}_markDescendantTextToSync(t){if(t){if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const de of t.getChildren())this._markDescendantTextToSync(de)}}_updateSelection(){if(env.isBlink&&!env.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const t=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!t||(this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&env.isAndroid||this._updateDomSelection(t))}_updateFakeSelection(t){const de=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=createFakeSelectionContainer(de));const pe=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(pe,this.selection),!this._fakeSelectionNeedsUpdate(t))return;(!pe.parentElement||pe.parentElement!=t)&&t.appendChild(pe),pe.textContent=this.selection.fakeSelectionLabel||"";const Le=de.getSelection(),Ye=de.createRange();Le.removeAllRanges(),Ye.selectNodeContents(pe),Le.addRange(Ye)}_updateDomSelection(t){const de=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(de))return;const pe=this.domConverter.viewPositionToDom(this.selection.anchor),Le=this.domConverter.viewPositionToDom(this.selection.focus);de.setBaseAndExtent(pe.parent,pe.offset,Le.parent,Le.offset),env.isGecko&&fixGeckoSelectionAfterBr(Le,de)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const de=t&&this.domConverter.domSelectionToView(t);return!(de&&this.selection.isEqual(de)||!this.selection.isCollapsed&&this.selection.isSimilar(de))}_fakeSelectionNeedsUpdate(t){const de=this._fakeSelectionContainer,pe=t.ownerDocument.getSelection();return!de||de.parentElement!==t||pe.anchorNode!==de&&!de.contains(pe.anchorNode)?!0:de.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const de=t.getSelection();if(de.rangeCount){const pe=t.activeElement,Le=this.domConverter.mapDomToView(pe);pe&&Le&&de.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function isEditable(me){if(me.getAttribute("contenteditable")=="false")return!1;const u=me.findAncestor(t=>t.hasAttribute("contenteditable"));return!u||u.getAttribute("contenteditable")=="true"}function addInlineFiller(me,u,t){const de=u instanceof Array?u:u.childNodes,pe=de[t];if(isText(pe))return pe.data=INLINE_FILLER+pe.data,pe;{const Le=me.createTextNode(INLINE_FILLER);return Array.isArray(u)?de.splice(t,0,Le):insertAt(u,t,Le),Le}}function areSimilarElements(me,u){return isNode(me)&&isNode(u)&&!isText(me)&&!isText(u)&&!isComment(me)&&!isComment(u)&&me.tagName.toLowerCase()===u.tagName.toLowerCase()}function areTextNodes(me,u){return isNode(me)&&isNode(u)&&isText(me)&&isText(u)}function sameNodes$1(me,u,t){return u===t?!0:isText(u)&&isText(t)?u.data===t.data:!!(me.isBlockFiller(u)&&me.isBlockFiller(t))}function fixGeckoSelectionAfterBr(me,u){let t=me.parent,de=me.offset;if(isText(t)&&isInlineFiller(t)&&(de=indexOf(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||de!=t.childNodes.length-1)return;const pe=t.childNodes[de];pe&&pe.tagName=="BR"&&u.addRange(u.getRangeAt(0))}function filterOutFakeSelectionContainer(me,u){const t=Array.from(me);return t.length==0||!u||t[t.length-1]==u&&t.pop(),t}function createFakeSelectionContainer(me){const u=me.createElement("div");return u.className="ck-fake-selection-container",Object.assign(u.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),u.textContent="",u}const BR_FILLER_REF=BR_FILLER(global$1.document),NBSP_FILLER_REF=NBSP_FILLER(global$1.document),MARKED_NBSP_FILLER_REF=MARKED_NBSP_FILLER(global$1.document),UNSAFE_ATTRIBUTE_NAME_PREFIX="data-ck-unsafe-attribute-",UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE="data-ck-unsafe-element";class DomConverter{constructor(u,{blockFillerMode:t,renderingMode:de="editing"}={}){wt(this,"document");wt(this,"renderingMode");wt(this,"blockFillerMode");wt(this,"preElements");wt(this,"blockElements");wt(this,"inlineObjectElements");wt(this,"unsafeElements");wt(this,"_domDocument");wt(this,"_domToViewMapping",new WeakMap);wt(this,"_viewToDomMapping",new WeakMap);wt(this,"_fakeSelectionMapping",new WeakMap);wt(this,"_rawContentElementMatcher",new Matcher);wt(this,"_inlineObjectElementMatcher",new Matcher);wt(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=u,this.renderingMode=de,this.blockFillerMode=t||(de==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?global$1.document:global$1.document.implementation.createHTMLDocument("")}bindFakeSelection(u,t){this._fakeSelectionMapping.set(u,new Selection$1(t))}fakeSelectionToView(u){return this._fakeSelectionMapping.get(u)}bindElements(u,t){this._domToViewMapping.set(u,t),this._viewToDomMapping.set(t,u)}unbindDomElement(u){const t=this._domToViewMapping.get(u);if(t){this._domToViewMapping.delete(u),this._viewToDomMapping.delete(t);for(const de of u.children)this.unbindDomElement(de)}}bindDocumentFragments(u,t){this._domToViewMapping.set(u,t),this._viewToDomMapping.set(t,u)}shouldRenderAttribute(u,t,de){return this.renderingMode==="data"?!0:(u=u.toLowerCase(),u.startsWith("on")||u==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:de==="img"&&(u==="src"||u==="srcset")||de==="source"&&u==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(u,t){if(this.renderingMode==="data"){u.innerHTML=t;return}const de=new DOMParser().parseFromString(t,"text/html"),pe=de.createDocumentFragment(),Le=de.body.childNodes;for(;Le.length>0;)pe.appendChild(Le[0]);const Ye=de.createTreeWalker(pe,NodeFilter.SHOW_ELEMENT),tt=[];let st;for(;st=Ye.nextNode();)tt.push(st);for(const ht of tt){for(const gt of ht.getAttributeNames())this.setDomElementAttribute(ht,gt,ht.getAttribute(gt));const mt=ht.tagName.toLowerCase();this._shouldRenameElement(mt)&&(_logUnsafeElement(mt),ht.replaceWith(this._createReplacementDomElement(mt,ht)))}for(;u.firstChild;)u.firstChild.remove();u.append(pe)}viewToDom(u,t={}){if(u.is("$text")){const de=this._processDataFromViewText(u);return this._domDocument.createTextNode(de)}else{const de=u;if(this.mapViewToDom(de))if(de.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(de);else return this.mapViewToDom(de);let pe;if(de.is("documentFragment"))pe=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(pe,de);else{if(de.is("uiElement"))return de.name==="$comment"?pe=this._domDocument.createComment(de.getCustomProperty("$rawContent")):pe=de.render(this._domDocument,this),t.bind&&this.bindElements(pe,de),pe;this._shouldRenameElement(de.name)?(_logUnsafeElement(de.name),pe=this._createReplacementDomElement(de.name)):de.hasAttribute("xmlns")?pe=this._domDocument.createElementNS(de.getAttribute("xmlns"),de.name):pe=this._domDocument.createElement(de.name),de.is("rawElement")&&de.render(pe,this),t.bind&&this.bindElements(pe,de);for(const Le of de.getAttributeKeys())this.setDomElementAttribute(pe,Le,de.getAttribute(Le),de)}if(t.withChildren!==!1)for(const Le of this.viewChildrenToDom(de,t))pe instanceof HTMLTemplateElement?pe.content.appendChild(Le):pe.appendChild(Le);return pe}}setDomElementAttribute(u,t,de,pe){const Le=this.shouldRenderAttribute(t,de,u.tagName.toLowerCase())||pe&&pe.shouldRenderUnsafeAttribute(t);if(Le||logWarning("domconverter-unsafe-attribute-detected",{domElement:u,key:t,value:de}),!isValidAttributeName(t)){logWarning("domconverter-invalid-attribute-detected",{domElement:u,key:t,value:de});return}u.hasAttribute(t)&&!Le?u.removeAttribute(t):u.hasAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t)&&Le&&u.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t),u.setAttribute(Le?t:UNSAFE_ATTRIBUTE_NAME_PREFIX+t,de)}removeDomElementAttribute(u,t){t!=UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE&&(u.removeAttribute(t),u.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t))}*viewChildrenToDom(u,t={}){const de=u.getFillerOffset&&u.getFillerOffset();let pe=0;for(const Le of u.getChildren()){de===pe&&(yield this._getBlockFiller());const Ye=Le.is("element")&&!!Le.getCustomProperty("dataPipeline:transparentRendering")&&!first(Le.getAttributes());if(Ye&&this.renderingMode=="data")if(Le.is("rawElement")){const tt=this._domDocument.createElement(Le.name);Le.render(tt,this),yield*[...tt.childNodes]}else yield*this.viewChildrenToDom(Le,t);else Ye&&logWarning("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:Le}),yield this.viewToDom(Le,t);pe++}de===pe&&(yield this._getBlockFiller())}viewRangeToDom(u){const t=this.viewPositionToDom(u.start),de=this.viewPositionToDom(u.end),pe=this._domDocument.createRange();return pe.setStart(t.parent,t.offset),pe.setEnd(de.parent,de.offset),pe}viewPositionToDom(u){const t=u.parent;if(t.is("$text")){const de=this.findCorrespondingDomText(t);if(!de)return null;let pe=u.offset;return startsWithFiller(de)&&(pe+=INLINE_FILLER_LENGTH),{parent:de,offset:pe}}else{let de,pe,Le;if(u.offset===0){if(de=this.mapViewToDom(t),!de)return null;Le=de.childNodes[0]}else{const tt=u.nodeBefore;if(pe=tt.is("$text")?this.findCorrespondingDomText(tt):this.mapViewToDom(tt),!pe)return null;de=pe.parentNode,Le=pe.nextSibling}if(isText(Le)&&startsWithFiller(Le))return{parent:Le,offset:INLINE_FILLER_LENGTH};const Ye=pe?indexOf(pe)+1:0;return{parent:de,offset:Ye}}}domToView(u,t={}){const de=[],pe=this._domToView(u,t,de),Le=pe.next().value;return!Le||(pe.next(),this._processDomInlineNodes(null,de,t),this.blockFillerMode=="br"&&isViewBrFiller(Le))||Le.is("$text")&&Le.data.length==0?null:Le}*domChildrenToView(u,t={},de=[]){let pe=[];u instanceof HTMLTemplateElement?pe=[...u.content.childNodes]:pe=[...u.childNodes];for(let Le=0;Le<pe.length;Le++){const Ye=pe[Le],tt=this._domToView(Ye,t,de),st=tt.next().value;st!==null&&(this._isBlockViewElement(st)&&this._processDomInlineNodes(u,de,t),this.blockFillerMode=="br"&&isViewBrFiller(st)||(yield st),tt.next())}this._processDomInlineNodes(u,de,t)}domSelectionToView(u){if(isGeckoRestrictedDomSelection(u))return new Selection$1([]);if(u.rangeCount===1){let pe=u.getRangeAt(0).startContainer;isText(pe)&&(pe=pe.parentNode);const Le=this.fakeSelectionToView(pe);if(Le)return Le}const t=this.isDomSelectionBackward(u),de=[];for(let pe=0;pe<u.rangeCount;pe++){const Le=u.getRangeAt(pe),Ye=this.domRangeToView(Le);Ye&&de.push(Ye)}return new Selection$1(de,{backward:t})}domRangeToView(u){const t=this.domPositionToView(u.startContainer,u.startOffset),de=this.domPositionToView(u.endContainer,u.endOffset);return t&&de?new Range$1(t,de):null}domPositionToView(u,t=0){if(this.isBlockFiller(u))return this.domPositionToView(u.parentNode,indexOf(u));const de=this.mapDomToView(u);if(de&&(de.is("uiElement")||de.is("rawElement")))return Position$1._createBefore(de);if(isText(u)){if(isInlineFiller(u))return this.domPositionToView(u.parentNode,indexOf(u));const pe=this.findCorrespondingViewText(u);let Le=t;return pe?(startsWithFiller(u)&&(Le-=INLINE_FILLER_LENGTH,Le=Le<0?0:Le),new Position$1(pe,Le)):null}else{if(t===0){const pe=this.mapDomToView(u);if(pe)return new Position$1(pe,0)}else{const pe=u.childNodes[t-1];if(isText(pe)&&isInlineFiller(pe)||pe&&this.isBlockFiller(pe))return this.domPositionToView(pe.parentNode,indexOf(pe));const Le=isText(pe)?this.findCorrespondingViewText(pe):this.mapDomToView(pe);if(Le&&Le.parent)return new Position$1(Le.parent,Le.index+1)}return null}}mapDomToView(u){return this.getHostViewElement(u)||this._domToViewMapping.get(u)}findCorrespondingViewText(u){if(isInlineFiller(u))return null;const t=this.getHostViewElement(u);if(t)return t;const de=u.previousSibling;if(de){if(!this.isElement(de))return null;const pe=this.mapDomToView(de);if(pe){const Le=pe.nextSibling;return Le instanceof Text$1?Le:null}}else{const pe=this.mapDomToView(u.parentNode);if(pe){const Le=pe.getChild(0);return Le instanceof Text$1?Le:null}}return null}mapViewToDom(u){return this._viewToDomMapping.get(u)}findCorrespondingDomText(u){const t=u.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&u.parent&&this.mapViewToDom(u.parent)?this.mapViewToDom(u.parent).childNodes[0]:null}focus(u){const t=this.mapViewToDom(u);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:de,scrollY:pe}=global$1.window,Le=[];forEachDomElementAncestor(t,Ye=>{const{scrollLeft:tt,scrollTop:st}=Ye;Le.push([tt,st])}),t.focus(),forEachDomElementAncestor(t,Ye=>{const[tt,st]=Le.shift();Ye.scrollLeft=tt,Ye.scrollTop=st}),global$1.window.scrollTo(de,pe)}}_clearDomSelection(){const u=this.mapViewToDom(this.document.selection.editableElement);if(!u)return;const t=u.ownerDocument.defaultView.getSelection(),de=this.domSelectionToView(t);de&&de.rangeCount>0&&t.removeAllRanges()}isElement(u){return u&&u.nodeType==Node.ELEMENT_NODE}isDocumentFragment(u){return u&&u.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(u){return this.blockFillerMode=="br"?u.isEqualNode(BR_FILLER_REF):isOnlyBrInBlock(u,this.blockElements)?!0:u.isEqualNode(MARKED_NBSP_FILLER_REF)||isNbspBlockFiller(u,this.blockElements)}isDomSelectionBackward(u){if(u.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(u.anchorNode,u.anchorOffset),t.setEnd(u.focusNode,u.focusOffset)}catch{return!1}const de=t.collapsed;return t.detach(),de}getHostViewElement(u){const t=getAncestors(u);for(t.pop();t.length;){const de=t.pop(),pe=this._domToViewMapping.get(de);if(pe&&(pe.is("uiElement")||pe.is("rawElement")))return pe}return null}isDomSelectionCorrect(u){return this._isDomSelectionPositionCorrect(u.anchorNode,u.anchorOffset)&&this._isDomSelectionPositionCorrect(u.focusNode,u.focusOffset)}registerRawContentMatcher(u){this._rawContentElementMatcher.add(u)}registerInlineObjectMatcher(u){this._inlineObjectElementMatcher.add(u)}_clearTemporaryCustomProperties(){for(const u of this._elementsWithTemporaryCustomProperties)u._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return NBSP_FILLER(this._domDocument);case"markedNbsp":return MARKED_NBSP_FILLER(this._domDocument);case"br":return BR_FILLER(this._domDocument)}}_isDomSelectionPositionCorrect(u,t){if(isText(u)&&startsWithFiller(u)&&t<INLINE_FILLER_LENGTH||this.isElement(u)&&startsWithFiller(u.childNodes[t]))return!1;const de=this.mapDomToView(u);return!(de&&(de.is("uiElement")||de.is("rawElement")))}*_domToView(u,t,de){if(this.blockFillerMode!="br"&&isOnlyBrInBlock(u,this.blockElements))return null;const pe=this.getHostViewElement(u);if(pe)return pe;if(isComment(u)&&t.skipComments)return null;if(isText(u)){if(isInlineFiller(u))return null;{const Le=u.data;if(Le==="")return null;const Ye=new Text$1(this.document,Le);return de.push(Ye),Ye}}else{let Le=this.mapDomToView(u);if(Le)return this._isInlineObjectElement(Le)&&de.push(Le),Le;if(this.isDocumentFragment(u))Le=new DocumentFragment$1(this.document),t.bind&&this.bindDocumentFragments(u,Le);else{Le=this._createViewElement(u,t),t.bind&&this.bindElements(u,Le);const tt=u.attributes;if(tt)for(let st=tt.length,ht=0;ht<st;ht++)Le._setAttribute(tt[ht].name,tt[ht].value);if(this._isViewElementWithRawContent(Le,t))return Le._setCustomProperty("$rawContent",u.innerHTML),this._isBlockViewElement(Le)||de.push(Le),Le;if(isComment(u))return Le._setCustomProperty("$rawContent",u.data),Le}yield Le;const Ye=[];if(t.withChildren!==!1)for(const tt of this.domChildrenToView(u,t,Ye))Le._appendChild(tt);if(this._isInlineObjectElement(Le))de.push(Le),this._processDomInlineNodes(null,Ye,t);else for(const tt of Ye)de.push(tt)}}_processDomInlineNodes(u,t,de){if(!t.length||u&&!this.isDocumentFragment(u)&&!this._isBlockDomElement(u))return;let pe=!1;for(let Le=0;Le<t.length;Le++){const Ye=t[Le];if(!Ye.is("$text")){pe=!1;continue}let tt,st=!1;if(this._isPreFormatted(Ye))tt=getDataWithoutFiller(Ye.data);else{tt=Ye.data.replace(/[ \n\t\r]{1,}/g," "),st=/[^\S\u00A0]/.test(tt.charAt(tt.length-1));const ht=Le>0?t[Le-1]:null,mt=Le+1<t.length?t[Le+1]:null,gt=!ht||ht.is("element")&&ht.name=="br"||pe,bt=mt?!1:!startsWithFiller(Ye.data);de.withChildren!==!1&&(gt&&(tt=tt.replace(/^ /,"")),bt&&(tt=tt.replace(/ $/,""))),tt=getDataWithoutFiller(tt),this.blockFillerMode!="br"&&Ye.parent&&(isViewMarkedNbspFiller(Ye.parent,tt)?(tt="",Ye.parent.parent&&(Ye.parent.parent._setCustomProperty("$hasBlockFiller",!0),Ye.parent._remove())):isViewNbspFiller(Ye.parent,tt,this.blockElements)&&(tt="",Ye.parent._setCustomProperty("$hasBlockFiller",!0))),tt=tt.replace(/ \u00A0/g,"  ");const _t=mt&&mt.is("element")&&mt.name!="br",vt=mt&&mt.is("$text")&&mt.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(tt)||!mt||_t||vt)&&(tt=tt.replace(/\u00A0$/," ")),(gt||ht&&ht.is("element")&&ht.name!="br")&&(tt=tt.replace(/^\u00A0/," "))}tt.length==0&&Ye.parent?(Ye._remove(),t.splice(Le,1),Le--):(Ye._data=tt,pe=st)}t.length=0}_processDataFromViewText(u){let t=u.data;if(this._isPreFormatted(u))return t;if(t.charAt(0)==" "){const de=this._getTouchingInlineViewNode(u,!1);(de&&de.is("$textProxy")&&this._nodeEndsWithSpace(de)||!de)&&(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const de=this._getTouchingInlineViewNode(u,!0),pe=de&&de.is("$textProxy")&&de.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!de||pe)&&(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(u){if(this._isPreFormatted(u))return!1;const t=this._processDataFromViewText(u);return t.charAt(t.length-1)==" "}_isPreFormatted(u){if(_hasViewParentOfType(u,this.preElements))return!0;for(const t of u.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(u,t){const de=new TreeWalker$1({startPosition:t?Position$1._createAfter(u):Position$1._createBefore(u),direction:t?"forward":"backward"});for(const{item:pe}of de){if(pe.is("$textProxy"))return pe;if(pe.is("element")&&pe.getCustomProperty("dataPipeline:transparentRendering"))continue;if(pe.is("element","br"))return null;if(this._isInlineObjectElement(pe))return pe;if(pe.is("containerElement"))return null}return null}_isBlockDomElement(u){return this.isElement(u)&&this.blockElements.includes(u.tagName.toLowerCase())}_isBlockViewElement(u){return u.is("element")&&this.blockElements.includes(u.name)}_isInlineObjectElement(u){return u.is("element")?u.name=="br"||this.inlineObjectElements.includes(u.name)||!!this._inlineObjectElementMatcher.match(u):!1}_createViewElement(u,t){if(isComment(u))return new UIElement(this.document,"$comment");const de=t.keepOriginalCase?u.tagName:u.tagName.toLowerCase();return new Element$1(this.document,de)}_isViewElementWithRawContent(u,t){return t.withChildren!==!1&&u.is("element")&&!!this._rawContentElementMatcher.match(u)}_shouldRenameElement(u){const t=u.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(u,t){const de=this._domDocument.createElement("span");if(de.setAttribute(UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE,u),t){for(;t.firstChild;)de.appendChild(t.firstChild);for(const pe of t.getAttributeNames())de.setAttribute(pe,t.getAttribute(pe))}return de}}function _hasViewParentOfType(me,u){return me.getAncestors().some(t=>t.is("element")&&u.includes(t.name))}function forEachDomElementAncestor(me,u){let t=me;for(;t;)u(t),t=t.parentElement}function isNbspBlockFiller(me,u){return me.isEqualNode(NBSP_FILLER_REF)&&hasBlockParent(me,u)&&me.parentNode.childNodes.length===1}function hasBlockParent(me,u){const t=me.parentNode;return!!t&&!!t.tagName&&u.includes(t.tagName.toLowerCase())}function isViewNbspFiller(me,u,t){return u==""&&me&&me.is("element")&&me.childCount==1&&t.includes(me.name)}function isViewMarkedNbspFiller(me,u){return u==""&&me&&me.is("element","span")&&me.childCount==1&&me.hasAttribute("data-cke-filler")}function isViewBrFiller(me){return me.is("element","br")&&me.hasAttribute("data-cke-filler")}function isOnlyBrInBlock(me,u){return me.tagName==="BR"&&hasBlockParent(me,u)&&me.parentNode.childNodes.length===1}function _logUnsafeElement(me){me==="script"&&logWarning("domconverter-unsafe-script-element-detected"),me==="style"&&logWarning("domconverter-unsafe-style-element-detected")}function isGeckoRestrictedDomSelection(me){if(!env.isGecko||!me.rangeCount)return!1;const u=me.getRangeAt(0).startContainer;try{Object.prototype.toString.call(u)}catch{return!0}return!1}class Observer extends DomEmitterMixin(){constructor(t){super();wt(this,"view");wt(this,"document");wt(this,"_isEnabled",!1);this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!t||t.nodeType!==1?!1:t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class DomEventData{constructor(u,t,de){wt(this,"view");wt(this,"document");wt(this,"domEvent");wt(this,"domTarget");this.view=u,this.document=u.document,this.domEvent=t,this.domTarget=t.target,assignIn(this,de)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class DomEventObserver extends Observer{constructor(){super(...arguments);wt(this,"useCapture",!1);wt(this,"usePassive",!1)}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(pe=>{this.listenTo(t,pe,(Le,Ye)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(Ye.target)&&this.onDomEvent(Ye)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,de,pe){this.isEnabled&&this.document.fire(t,new DomEventData(this.view,de,pe))}}class KeyObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType",["keydown","keyup"])}onDomEvent(t){const de={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return getCode(this)}};this.fire(t.type,t,de)}}class FakeSelectionObserver extends Observer{constructor(t){super(t);wt(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=debounce(de=>{this.document.fire("selectionChangeDone",de)},200)}observe(){const t=this.document;t.on("arrowKey",(de,pe)=>{t.selection.isFake&&this.isEnabled&&pe.preventDefault()},{context:"$capture"}),t.on("arrowKey",(de,pe)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(pe.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const de=this.document.selection,pe=new Selection$1(de.getRanges(),{backward:de.isBackward,fake:!1});(t==keyCodes.arrowleft||t==keyCodes.arrowup)&&pe.setTo(pe.getFirstPosition()),(t==keyCodes.arrowright||t==keyCodes.arrowdown)&&pe.setTo(pe.getLastPosition());const Le={oldSelection:de,newSelection:pe,domSelection:null};this.document.fire("selectionChange",Le),this._fireSelectionChangeDoneDebounced(Le)}}let MutationObserver$1=class extends Observer{constructor(t){super(t);wt(this,"domConverter");wt(this,"_config");wt(this,"_domElements");wt(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const de of this._domElements)this._mutationObserver.observe(de,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(t.length===0)return;const de=this.domConverter,pe=new Set,Le=new Set;for(const tt of t){const st=de.mapDomToView(tt.target);st&&(st.is("uiElement")||st.is("rawElement")||tt.type==="childList"&&!this._isBogusBrMutation(tt)&&Le.add(st))}for(const tt of t){const st=de.mapDomToView(tt.target);if(!(st&&(st.is("uiElement")||st.is("rawElement")))&&tt.type==="characterData"){const ht=de.findCorrespondingViewText(tt.target);ht&&!Le.has(ht.parent)?pe.add(ht):!ht&&startsWithFiller(tt.target)&&Le.add(de.mapDomToView(tt.target.parentNode))}}const Ye=[];for(const tt of pe)Ye.push({type:"text",node:tt});for(const tt of Le){const st=de.mapViewToDom(tt),ht=Array.from(tt.getChildren()),mt=Array.from(de.domChildrenToView(st,{withChildren:!1}));isEqualWith(ht,mt,sameNodes)||Ye.push({type:"children",node:tt})}Ye.length&&this.document.fire("mutations",{mutations:Ye})}_isBogusBrMutation(t){let de=null;return t.nextSibling===null&&t.removedNodes.length===0&&t.addedNodes.length==1&&(de=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),de&&de.is("element","br")}};function sameNodes(me,u){if(!Array.isArray(me))return me===u?!0:me.is("$text")&&u.is("$text")?me.data===u.data:!1}class FocusObserver extends DomEventObserver{constructor(t){super(t);wt(this,"_renderTimeoutId",null);wt(this,"_isFocusChanging",!1);wt(this,"domEventType",["focus","blur"]);this.useCapture=!0;const de=this.document;de.on("focus",()=>this._handleFocus()),de.on("blur",(pe,Le)=>this._handleBlur(Le)),de.on("beforeinput",()=>{de.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const de=this.document.selection.editableElement;(de===null||de===t.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class SelectionObserver extends Observer{constructor(t){super(t);wt(this,"mutationObserver");wt(this,"focusObserver");wt(this,"selection");wt(this,"domConverter");wt(this,"_documents");wt(this,"_fireSelectionChangeDoneDebounced");wt(this,"_clearInfiniteLoopInterval");wt(this,"_documentIsSelectingInactivityTimeoutDebounced");wt(this,"_loopbackCounter");this.mutationObserver=t.getObserver(MutationObserver$1),this.focusObserver=t.getObserver(FocusObserver),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=debounce(de=>{this.document.fire("selectionChangeDone",de)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=debounce(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(t){const de=t.ownerDocument,pe=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},Le=()=>{this.document.isSelecting&&(this._handleSelectionChange(de),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",pe,{priority:"highest"}),this.listenTo(t,"keydown",Le,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",Le,{priority:"highest",useCapture:!0}),!this._documents.has(de)&&(this.listenTo(de,"mouseup",Le,{priority:"highest",useCapture:!0}),this.listenTo(de,"selectionchange",()=>{this.document.isComposing&&!env.isAndroid||(this._handleSelectionChange(de),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(de)},{priority:"lowest"}),this._documents.add(de))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const de=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(de.anchorNode))return;this.mutationObserver.flush();const pe=this.domConverter.domSelectionToView(de);if(pe.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(pe)&&this.domConverter.isDomSelectionCorrect(de))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(pe))this.view.forceRender();else{const Le={oldSelection:this.selection,newSelection:pe,domSelection:de};this.document.fire("selectionChange",Le),this._fireSelectionChangeDoneDebounced(Le)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class CompositionObserver extends DomEventObserver{constructor(t){super(t);wt(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const de=this.document;de.on("compositionstart",()=>{de.isComposing=!0},{priority:"low"}),de.on("compositionend",()=>{de.isComposing=!1},{priority:"low"})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let DataTransfer$1=class{constructor(u,t={}){wt(this,"_files");wt(this,"_native");this._files=t.cacheFiles?getFiles(u):null,this._native=u}get files(){return this._files||(this._files=getFiles(this._native)),this._files}get types(){return this._native.types}getData(u){return this._native.getData(u)}setData(u,t){this._native.setData(u,t)}set effectAllowed(u){this._native.effectAllowed=u}get effectAllowed(){return this._native.effectAllowed}set dropEffect(u){this._native.dropEffect=u}get dropEffect(){return this._native.dropEffect}setDragImage(u,t,de){this._native.setDragImage(u,t,de)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function getFiles(me){const u=Array.from(me.files||[]),t=Array.from(me.items||[]);return u.length?u:t.filter(de=>de.kind==="file").map(de=>de.getAsFile())}class InputObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType","beforeinput")}onDomEvent(t){const de=t.getTargetRanges(),pe=this.view,Le=pe.document;let Ye=null,tt=null,st=[];if(t.dataTransfer&&(Ye=new DataTransfer$1(t.dataTransfer)),t.data!==null?tt=t.data:Ye&&(tt=Ye.getData("text/plain")),Le.selection.isFake)st=Array.from(Le.selection.getRanges());else if(de.length)st=de.map(ht=>{const mt=pe.domConverter.domPositionToView(ht.startContainer,ht.startOffset),gt=pe.domConverter.domPositionToView(ht.endContainer,ht.endOffset);if(mt)return pe.createRange(mt,gt);if(gt)return pe.createRange(gt)}).filter(ht=>!!ht);else if(env.isAndroid){const ht=t.target.ownerDocument.defaultView.getSelection();st=Array.from(pe.domConverter.domSelectionToView(ht).getRanges())}if(env.isAndroid&&t.inputType=="insertCompositionText"&&tt&&tt.endsWith(`
`)){this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[pe.createRange(st[0].end)]});return}if(t.inputType=="insertText"&&tt&&tt.includes(`
`)){const ht=tt.split(/\n{1,2}/g);let mt=st;for(let gt=0;gt<ht.length;gt++){const bt=ht[gt];bt!=""&&(this.fire(t.type,t,{data:bt,dataTransfer:Ye,targetRanges:mt,inputType:t.inputType,isComposing:t.isComposing}),mt=[Le.selection.getFirstRange()]),gt+1<ht.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:mt}),mt=[Le.selection.getFirstRange()])}return}this.fire(t.type,t,{data:tt,dataTransfer:Ye,targetRanges:st,inputType:t.inputType,isComposing:t.isComposing})}}class ArrowKeysObserver extends Observer{constructor(u){super(u),this.document.on("keydown",(t,de)=>{if(this.isEnabled&&isArrowKeyCode(de.keyCode)){const pe=new BubblingEventInfo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(pe,de),pe.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class TabObserver extends Observer{constructor(u){super(u);const t=this.document;t.on("keydown",(de,pe)=>{if(!this.isEnabled||pe.keyCode!=keyCodes.tab||pe.ctrlKey)return;const Le=new BubblingEventInfo(t,"tab",t.selection.getFirstRange());t.fire(Le,pe),Le.stop.called&&de.stop()})}observe(){}stopObserving(){}}let View$1=class extends ObservableMixin(){constructor(t){super();wt(this,"document");wt(this,"domConverter");wt(this,"domRoots",new Map);wt(this,"_renderer");wt(this,"_initialDomRootAttributes",new WeakMap);wt(this,"_observers",new Map);wt(this,"_writer");wt(this,"_ongoingChange",!1);wt(this,"_postFixersInProgress",!1);wt(this,"_renderingDisabled",!1);wt(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Document$1(t),this.domConverter=new DomConverter(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Renderer(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new DowncastWriter(this.document),this.addObserver(MutationObserver$1),this.addObserver(FocusObserver),this.addObserver(SelectionObserver),this.addObserver(KeyObserver),this.addObserver(FakeSelectionObserver),this.addObserver(CompositionObserver),this.addObserver(ArrowKeysObserver),this.addObserver(InputObserver),this.addObserver(TabObserver),injectQuirksHandling(this),injectUiElementHandling(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),env.isiOS&&this.listenTo(this.document,"blur",(de,pe)=>{this.domConverter.mapDomToView(pe.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(de,{mutations:pe})=>{pe.forEach(Le=>this._renderer.markToSync(Le.type,Le.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,de="main"){const pe=this.document.getRoot(de);pe._name=t.tagName.toLowerCase();const Le={};for(const{name:tt,value:st}of Array.from(t.attributes))Le[tt]=st,tt==="class"?this._writer.addClass(st.split(" "),pe):pe.hasAttribute(tt)||this._writer.setAttribute(tt,st,pe);this._initialDomRootAttributes.set(t,Le);const Ye=()=>{this._writer.setAttribute("contenteditable",(!pe.isReadOnly).toString(),pe),pe.isReadOnly?this._writer.addClass("ck-read-only",pe):this._writer.removeClass("ck-read-only",pe)};Ye(),this.domRoots.set(de,t),this.domConverter.bindElements(t,pe),this._renderer.markToSync("children",pe),this._renderer.markToSync("attributes",pe),this._renderer.domDocuments.add(t.ownerDocument),pe.on("change:children",(tt,st)=>this._renderer.markToSync("children",st)),pe.on("change:attributes",(tt,st)=>this._renderer.markToSync("attributes",st)),pe.on("change:text",(tt,st)=>this._renderer.markToSync("text",st)),pe.on("change:isReadOnly",()=>this.change(Ye)),pe.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const tt of this._observers.values())tt.observe(t,de)}detachDomRoot(t){const de=this.domRoots.get(t);Array.from(de.attributes).forEach(({name:Le})=>de.removeAttribute(Le));const pe=this._initialDomRootAttributes.get(de);for(const Le in pe)de.setAttribute(Le,pe[Le]);this.domRoots.delete(t),this.domConverter.unbindDomElement(de);for(const Le of this._observers.values())Le.stopObserving(de)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let de=this._observers.get(t);if(de)return de;de=new t(this),this._observers.set(t,de);for(const[pe,Le]of this.domRoots)de.observe(Le,pe);return de.enable(),de}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:de,viewportOffset:pe=20,ancestorOffset:Le=20}={}){const Ye=this.document.selection.getFirstRange();if(!Ye)return;const tt=cloneDeep({alignToTop:t,forceScroll:de,viewportOffset:pe,ancestorOffset:Le});typeof pe=="number"&&(pe={top:pe,bottom:pe,left:pe,right:pe});const st={target:this.domConverter.viewRangeToDom(Ye),viewportOffset:pe,ancestorOffset:Le,alignToTop:t,forceScroll:de};this.fire("scrollToTheSelection",st,tt),scrollViewportToShowTarget(st)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new CKEditorError("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const de=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),de}catch(de){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(de,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(FocusObserver).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,de){return Position$1._createAt(t,de)}createPositionAfter(t){return Position$1._createAfter(t)}createPositionBefore(t){return Position$1._createBefore(t)}createRange(t,de){return new Range$1(t,de)}createRangeOn(t){return Range$1._createOn(t)}createRangeIn(t){return Range$1._createIn(t)}createSelection(...t){return new Selection$1(...t)}_disableRendering(t){this._renderingDisabled=t,t==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TypeCheckable{is(){throw new Error("is() method is abstract")}}class TextProxy extends TypeCheckable{constructor(t,de,pe){super();wt(this,"textNode");wt(this,"data");wt(this,"offsetInText");if(this.textNode=t,de<0||de>t.offsetSize)throw new CKEditorError("model-textproxy-wrong-offsetintext",this);if(pe<0||de+pe>t.offsetSize)throw new CKEditorError("model-textproxy-wrong-length",this);this.data=t.data.substring(de,de+pe),this.offsetInText=de}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const de=[];let pe=t.includeSelf?this:this.parent;for(;pe;)de[t.parentFirst?"push":"unshift"](pe),pe=pe.parent;return de}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}TextProxy.prototype.is=function(me){return me==="$textProxy"||me==="model:$textProxy"||me==="textProxy"||me==="model:textProxy"};class TreeWalker{constructor(u){wt(this,"direction");wt(this,"boundaries");wt(this,"singleCharacters");wt(this,"shallow");wt(this,"ignoreElementEnd");wt(this,"_position");wt(this,"_boundaryStartParent");wt(this,"_boundaryEndParent");wt(this,"_visitedParent");if(!u||!u.boundaries&&!u.startPosition)throw new CKEditorError("model-tree-walker-no-start-position",null);const t=u.direction||"forward";if(t!="forward"&&t!="backward")throw new CKEditorError("model-tree-walker-unknown-direction",u,{direction:t});this.direction=t,this.boundaries=u.boundaries||null,u.startPosition?this._position=u.startPosition.clone():this._position=Position._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!u.singleCharacters,this.shallow=!!u.shallow,this.ignoreElementEnd=!!u.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(u){let t,de,pe,Le;do pe=this.position,Le=this._visitedParent,{done:t,value:de}=this.next();while(!t&&u(de));t||(this._position=pe,this._visitedParent=Le)}jumpTo(u){this._boundaryStartParent&&u.isBefore(this.boundaries.start)?u=this.boundaries.start:this._boundaryEndParent&&u.isAfter(this.boundaries.end)&&(u=this.boundaries.end),this._position=u.clone(),this._visitedParent=u.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const u=this.position,t=this.position.clone(),de=this._visitedParent;if(de.parent===null&&t.offset===de.maxOffset)return{done:!0,value:void 0};if(de===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const pe=getTextNodeAtPosition(t,de),Le=pe||getNodeAfterPosition(t,de,pe);if(Le&&Le.is("model:element")){if(!this.shallow)t.path.push(0),this._visitedParent=Le;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,formatReturnValue("elementStart",Le,u,t,1)}if(Le&&Le.is("model:$text")){let Ye;if(this.singleCharacters)Ye=1;else{let ht=Le.endOffset;this._boundaryEndParent==de&&this.boundaries.end.offset<ht&&(ht=this.boundaries.end.offset),Ye=ht-t.offset}const tt=t.offset-Le.startOffset,st=new TextProxy(Le,tt,Ye);return t.offset+=Ye,this._position=t,formatReturnValue("text",st,u,t,Ye)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=de.parent,this.ignoreElementEnd?this._next():formatReturnValue("elementEnd",de,u,t)}_previous(){const u=this.position,t=this.position.clone(),de=this._visitedParent;if(de.parent===null&&t.offset===0)return{done:!0,value:void 0};if(de==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const pe=t.parent,Le=getTextNodeAtPosition(t,pe),Ye=Le||getNodeBeforePosition(t,pe,Le);if(Ye&&Ye.is("model:element"))return t.offset--,this.shallow?(this._position=t,formatReturnValue("elementStart",Ye,u,t,1)):(t.path.push(Ye.maxOffset),this._position=t,this._visitedParent=Ye,this.ignoreElementEnd?this._previous():formatReturnValue("elementEnd",Ye,u,t));if(Ye&&Ye.is("model:$text")){let tt;if(this.singleCharacters)tt=1;else{let mt=Ye.startOffset;this._boundaryStartParent==de&&this.boundaries.start.offset>mt&&(mt=this.boundaries.start.offset),tt=t.offset-mt}const st=t.offset-Ye.startOffset,ht=new TextProxy(Ye,st-tt,tt);return t.offset-=tt,this._position=t,formatReturnValue("text",ht,u,t,tt)}return t.path.pop(),this._position=t,this._visitedParent=de.parent,formatReturnValue("elementStart",de,u,t,1)}}function formatReturnValue(me,u,t,de,pe){return{done:!1,value:{type:me,item:u,previousPosition:t,nextPosition:de,length:pe}}}class Position extends TypeCheckable{constructor(t,de,pe="toNone"){super();wt(this,"root");wt(this,"path");wt(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new CKEditorError("model-position-root-invalid",t);if(!Array.isArray(de)||de.length===0)throw new CKEditorError("model-position-path-incorrect-format",t,{path:de});t.is("rootElement")?de=de.slice():(de=[...t.getPath(),...de],t=t.root),this.root=t,this.path=de,this.stickiness=pe}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let de=0;de<this.path.length-1;de++)if(t=t.getChildAtOffset(this.path[de]),!t)throw new CKEditorError("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new CKEditorError("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return getTextNodeAtPosition(this,this.parent)}get nodeAfter(){const t=this.parent;return getNodeAfterPosition(this,t,getTextNodeAtPosition(this,t))}get nodeBefore(){const t=this.parent;return getNodeBeforePosition(this,t,getTextNodeAtPosition(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let de=0;de<this.path.length-1;de++)if(t=t.getChildAtOffset(this.path[de]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const de=compareArrays(this.path,t.path);switch(de){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[de]<t.path[de]?"before":"after"}}getLastMatchingPosition(t,de={}){de.startPosition=this;const pe=new TreeWalker(de);return pe.skip(t),pe.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const de=this.parent;return de.is("element")?de.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const de=compareArrays(this.path,t.path),pe=typeof de=="string"?Math.min(this.path.length,t.path.length):de;return this.path.slice(0,pe)}getCommonAncestor(t){const de=this.getAncestors(),pe=t.getAncestors();let Le=0;for(;de[Le]==pe[Le]&&de[Le];)Le++;return Le===0?null:de[Le-1]}getShiftedBy(t){const de=this.clone(),pe=de.offset+t;return de.offset=pe<0?0:pe,de}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const de=Math.min(this.path.length,t.path.length);for(let pe=0;pe<de;pe++){const Le=this.path[pe]-t.path[pe];if(Le<-1||Le>1)return!1;if(Le===1)return checkTouchingBranch(t,this,pe);if(Le===-1)return checkTouchingBranch(this,t,pe)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?checkOnlyZeroes(this.path,de):checkOnlyZeroes(t.path,de)}hasSameParentAs(t){if(this.root!==t.root)return!1;const de=this.getParentPath(),pe=t.getParentPath();return compareArrays(de,pe)=="same"}getTransformedByOperation(t){let de;switch(t.type){case"insert":de=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":de=this._getTransformedByMoveOperation(t);break;case"split":de=this._getTransformedBySplitOperation(t);break;case"merge":de=this._getTransformedByMergeOperation(t);break;default:de=Position._createAt(this);break}return de}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const de=t.movedRange;return de.containsPosition(this)||de.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const de=t.movedRange,pe=de.containsPosition(this)||de.start.isEqual(this);let Le;return pe?(Le=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(Le=Le._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?Le=Position._createAt(t.deletionPosition):Le=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),Le}_getTransformedByDeletion(t,de){const pe=Position._createAt(this);if(this.root!=t.root)return pe;if(compareArrays(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+de>this.offset)return null;pe.offset-=de}}else if(compareArrays(t.getParentPath(),this.getParentPath())=="prefix"){const Le=t.path.length-1;if(t.offset<=this.path[Le]){if(t.offset+de>this.path[Le])return null;pe.path[Le]-=de}}return pe}_getTransformedByInsertion(t,de){const pe=Position._createAt(this);if(this.root!=t.root)return pe;if(compareArrays(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(pe.offset+=de);else if(compareArrays(t.getParentPath(),this.getParentPath())=="prefix"){const Le=t.path.length-1;t.offset<=this.path[Le]&&(pe.path[Le]+=de)}return pe}_getTransformedByMove(t,de,pe){if(de=de._getTransformedByDeletion(t,pe),t.isEqual(de))return Position._createAt(this);const Le=this._getTransformedByDeletion(t,pe);return Le===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(pe).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,de):Le._getTransformedByInsertion(de,pe)}_getCombined(t,de){const pe=t.path.length-1,Le=Position._createAt(de);return Le.stickiness=this.stickiness,Le.offset=Le.offset+this.path[pe]-t.offset,Le.path=[...Le.path,...this.path.slice(pe+1)],Le}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,de,pe="toNone"){if(t.is("model:position"))return new Position(t.root,t.path,t.stickiness);{const Le=t;if(de=="end")de=Le.maxOffset;else{if(de=="before")return this._createBefore(Le,pe);if(de=="after")return this._createAfter(Le,pe);if(de!==0&&!de)throw new CKEditorError("model-createpositionat-offset-required",[this,t])}if(!Le.is("element")&&!Le.is("documentFragment"))throw new CKEditorError("model-position-parent-incorrect",[this,t]);const Ye=Le.getPath();return Ye.push(de),new this(Le.root,Ye,pe)}}static _createAfter(t,de){if(!t.parent)throw new CKEditorError("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,de)}static _createBefore(t,de){if(!t.parent)throw new CKEditorError("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,de)}static fromJSON(t,de){if(t.root==="$graveyard"){const pe=new Position(de.graveyard,t.path);return pe.stickiness=t.stickiness,pe}if(!de.getRoot(t.root))throw new CKEditorError("model-position-fromjson-no-root",de,{rootName:t.root});return new Position(de.getRoot(t.root),t.path,t.stickiness)}}Position.prototype.is=function(me){return me==="position"||me==="model:position"};function getTextNodeAtPosition(me,u){const t=u.getChildAtOffset(me.offset);return t&&t.is("$text")&&t.startOffset<me.offset?t:null}function getNodeAfterPosition(me,u,t){return t!==null?null:u.getChildAtOffset(me.offset)}function getNodeBeforePosition(me,u,t){return t!==null?null:u.getChild(u.offsetToIndex(me.offset)-1)}function checkTouchingBranch(me,u,t){return!(t+1===me.path.length||!checkOnlyZeroes(u.path,t+1)||!checkOnlyMaxOffset(me,t+1))}function checkOnlyZeroes(me,u){for(;u<me.length;){if(me[u]!==0)return!1;u++}return!0}function checkOnlyMaxOffset(me,u){let t=me.parent,de=me.path.length-1,pe=0;for(;de>=u;){if(me.path[de]+pe!==t.maxOffset)return!1;pe=1,de--,t=t.parent}return!0}class Range extends TypeCheckable{constructor(t,de){super();wt(this,"start");wt(this,"end");this.start=Position._createAt(t),this.end=de?Position._createAt(de):Position._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new TreeWalker({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),de=this.end.getParentPath();return compareArrays(t,de)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,de=!1){t.isCollapsed&&(de=!1);const pe=this.containsPosition(t.start)||de&&this.start.isEqual(t.start),Le=this.containsPosition(t.end)||de&&this.end.isEqual(t.end);return pe&&Le}containsItem(t){const de=Position._createBefore(t);return this.containsPosition(de)||this.start.isEqual(de)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const de=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&de.push(new Range(this.start,t.start)),this.containsPosition(t.end)&&de.push(new Range(t.end,this.end))):de.push(new Range(this.start,this.end)),de}getIntersection(t){if(this.isIntersecting(t)){let de=this.start,pe=this.end;return this.containsPosition(t.start)&&(de=t.start),this.containsPosition(t.end)&&(pe=t.end),new Range(de,pe)}return null}getJoined(t,de=!1){let pe=this.isIntersecting(t);if(pe||(this.start.isBefore(t.start)?pe=de?this.end.isTouching(t.start):this.end.isEqual(t.start):pe=de?t.end.isTouching(this.start):t.end.isEqual(this.start)),!pe)return null;let Le=this.start,Ye=this.end;return t.start.isBefore(Le)&&(Le=t.start),t.end.isAfter(Ye)&&(Ye=t.end),new Range(Le,Ye)}getMinimalFlatRanges(){const t=[],de=this.start.getCommonPath(this.end).length,pe=Position._createAt(this.start);let Le=pe.parent;for(;pe.path.length>de+1;){const Ye=Le.maxOffset-pe.offset;Ye!==0&&t.push(new Range(pe,pe.getShiftedBy(Ye))),pe.path=pe.path.slice(0,-1),pe.offset++,Le=Le.parent}for(;pe.path.length<=this.end.path.length;){const Ye=this.end.path[pe.path.length-1],tt=Ye-pe.offset;tt!==0&&t.push(new Range(pe,pe.getShiftedBy(tt))),pe.offset=Ye,pe.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new TreeWalker(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const de=new TreeWalker(t);for(const pe of de)yield pe.item}*getPositions(t={}){t.boundaries=this;const de=new TreeWalker(t);yield de.position;for(const pe of de)yield pe.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Range(this.start,this.end)]}getTransformedByOperations(t){const de=[new Range(this.start,this.end)];for(const pe of t)for(let Le=0;Le<de.length;Le++){const Ye=de[Le].getTransformedByOperation(pe);de.splice(Le,1,...Ye),Le+=Ye.length-1}for(let pe=0;pe<de.length;pe++){const Le=de[pe];for(let Ye=pe+1;Ye<de.length;Ye++){const tt=de[Ye];(Le.containsRange(tt)||tt.containsRange(Le)||Le.isEqual(tt))&&de.splice(Ye,1)}}return de}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,de=this.end.nodeBefore;return t&&t.is("element")&&t===de?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,de=!1){return this._getTransformedByInsertion(t.position,t.howMany,de)}_getTransformedByMoveOperation(t,de=!1){const pe=t.sourcePosition,Le=t.howMany,Ye=t.targetPosition;return this._getTransformedByMove(pe,Ye,Le,de)}_getTransformedBySplitOperation(t){const de=this.start._getTransformedBySplitOperation(t);let pe=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(pe=this.end.getShiftedBy(1)),de.root!=pe.root&&(pe=this.end.getShiftedBy(-1)),new Range(de,pe)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Range(this.start);let de=this.start._getTransformedByMergeOperation(t),pe=this.end._getTransformedByMergeOperation(t);return de.root!=pe.root&&(pe=this.end.getShiftedBy(-1)),de.isAfter(pe)?(t.sourcePosition.isBefore(t.targetPosition)?(de=Position._createAt(pe),de.offset=0):(t.deletionPosition.isEqual(de)||(pe=t.deletionPosition),de=t.targetPosition),new Range(de,pe)):new Range(de,pe)}_getTransformedByInsertion(t,de,pe=!1){if(pe&&this.containsPosition(t))return[new Range(this.start,t),new Range(t.getShiftedBy(de),this.end._getTransformedByInsertion(t,de))];{const Le=new Range(this.start,this.end);return Le.start=Le.start._getTransformedByInsertion(t,de),Le.end=Le.end._getTransformedByInsertion(t,de),[Le]}}_getTransformedByMove(t,de,pe,Le=!1){if(this.isCollapsed){const bt=this.start._getTransformedByMove(t,de,pe);return[new Range(bt)]}const Ye=Range._createFromPositionAndShift(t,pe),tt=de._getTransformedByDeletion(t,pe);if(this.containsPosition(de)&&!Le&&(Ye.containsPosition(this.start)||Ye.containsPosition(this.end))){const bt=this.start._getTransformedByMove(t,de,pe),_t=this.end._getTransformedByMove(t,de,pe);return[new Range(bt,_t)]}let st;const ht=this.getDifference(Ye);let mt=null;const gt=this.getIntersection(Ye);if(ht.length==1?mt=new Range(ht[0].start._getTransformedByDeletion(t,pe),ht[0].end._getTransformedByDeletion(t,pe)):ht.length==2&&(mt=new Range(this.start,this.end._getTransformedByDeletion(t,pe))),mt?st=mt._getTransformedByInsertion(tt,pe,gt!==null||Le):st=[],gt){const bt=new Range(gt.start._getCombined(Ye.start,tt),gt.end._getCombined(Ye.start,tt));st.length==2?st.splice(1,0,bt):st.push(bt)}return st}_getTransformedByDeletion(t,de){let pe=this.start._getTransformedByDeletion(t,de),Le=this.end._getTransformedByDeletion(t,de);return pe==null&&Le==null?null:(pe==null&&(pe=t),Le==null&&(Le=t),new Range(pe,Le))}static _createFromPositionAndShift(t,de){const pe=t,Le=t.getShiftedBy(de);return de>0?new this(pe,Le):new this(Le,pe)}static _createIn(t){return new this(Position._createAt(t,0),Position._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Position._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new CKEditorError("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const de=t[0];t.sort((Ye,tt)=>Ye.start.isAfter(tt.start)?1:-1);const pe=t.indexOf(de),Le=new this(de.start,de.end);for(let Ye=pe-1;Ye>=0&&t[Ye].end.isEqual(Le.start);Ye--)Le.start=Position._createAt(t[Ye].start);for(let Ye=pe+1;Ye<t.length&&t[Ye].start.isEqual(Le.end);Ye++)Le.end=Position._createAt(t[Ye].end);return Le}static fromJSON(t,de){return new this(Position.fromJSON(t.start,de),Position.fromJSON(t.end,de))}}Range.prototype.is=function(me){return me==="range"||me==="model:range"};class Mapper extends EmitterMixin(){constructor(){super();wt(this,"_modelToViewMapping",new WeakMap);wt(this,"_viewToModelMapping",new WeakMap);wt(this,"_viewToModelLengthCallbacks",new Map);wt(this,"_markerNameToElements",new Map);wt(this,"_elementToMarkerNames",new Map);wt(this,"_deferredBindingRemovals",new Map);wt(this,"_unboundMarkerNames",new Set);wt(this,"_cache",new MapperCache);this.on("modelToViewPosition",(t,de)=>{if(de.viewPosition)return;const pe=this._modelToViewMapping.get(de.modelPosition.parent);if(!pe)throw new CKEditorError("mapping-model-position-view-parent-not-found",this,{modelPosition:de.modelPosition});de.viewPosition=this.findPositionIn(pe,de.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,de)=>{if(de.modelPosition)return;const pe=this.findMappedViewAncestor(de.viewPosition),Le=this._viewToModelMapping.get(pe),Ye=this._toModelOffset(de.viewPosition.parent,de.viewPosition.offset,pe);de.modelPosition=Position._createAt(Le,Ye)},{priority:"low"})}bindElements(t,de){this._modelToViewMapping.set(t,de),this._viewToModelMapping.set(de,t)}unbindViewElement(t,de={}){const pe=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const Le of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(Le);de.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t),this._modelToViewMapping.get(pe)==t&&this._modelToViewMapping.delete(pe))}unbindModelElement(t){const de=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(de)==t&&this._viewToModelMapping.delete(de)&&this._cache.stopTracking(de)}bindElementToMarker(t,de){const pe=this._markerNameToElements.get(de)||new Set;pe.add(t);const Le=this._elementToMarkerNames.get(t)||new Set;Le.add(de),this._markerNameToElements.set(de,pe),this._elementToMarkerNames.set(t,Le)}unbindElementFromMarkerName(t,de){const pe=this._markerNameToElements.get(de);pe&&(pe.delete(t),pe.size==0&&this._markerNameToElements.delete(de));const Le=this._elementToMarkerNames.get(t);Le&&(Le.delete(de),Le.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,de]of this._deferredBindingRemovals)t.root==de&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Range(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Range$1(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const de={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",de),de.modelPosition}toViewPosition(t,de={}){const pe={modelPosition:t,mapper:this,isPhantom:de.isPhantom};return this.fire("modelToViewPosition",pe),pe.viewPosition}markerNameToElements(t){const de=this._markerNameToElements.get(t);if(!de)return null;const pe=new Set;for(const Le of de)if(Le.is("attributeElement"))for(const Ye of Le.getElementsWithSameId())pe.add(Ye);else pe.add(Le);return pe}registerViewToModelLength(t,de){this._viewToModelLengthCallbacks.set(t,de)}findMappedViewAncestor(t){let de=t.parent;for(;!this._viewToModelMapping.has(de);)de=de.parent;return de}_toModelOffset(t,de,pe){if(pe!=t){const Ye=this._toModelOffset(t.parent,t.index,pe),tt=this._toModelOffset(t,de,t);return Ye+tt}if(t.is("$text"))return de;let Le=0;for(let Ye=0;Ye<de;Ye++)Le+=this.getModelLength(t.getChild(Ye));return Le}getModelLength(t){const de=[t];let pe=0;for(;de.length>0;){const Le=de.pop(),Ye=Le.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(Le.name);if(Ye)pe+=Ye(Le);else if(this._viewToModelMapping.has(Le))pe+=1;else if(Le.is("$text"))pe+=Le.data.length;else{if(Le.is("uiElement"))continue;for(const tt of Le.getChildren())de.push(tt)}}return pe}findPositionIn(t,de){if(de===0)return this._moveViewPositionToTextNode(new Position$1(t,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(t)){const Le=this._cache.getClosest(t,de);return this._findPositionStartingFrom(Le.viewPosition,Le.modelOffset,de,t,!0)}else return this._findPositionStartingFrom(new Position$1(t,0),0,de,t,!1)}_findPositionStartingFrom(t,de,pe,Le,Ye){let tt=t.parent,st=t.offset;if(tt.is("$text"))return new Position$1(tt,pe-de);let ht,mt=de,gt=0;for(;mt<pe;){if(ht=tt.getChild(st),!ht){if(tt==Le)throw new CKEditorError("mapping-model-offset-not-found",this,{modelOffset:pe,viewContainer:Le});st=tt.parent.getChildIndex(tt)+1,tt=tt.parent;continue}gt=this.getModelLength(ht),mt+=gt,st++,Ye&&this._cache.save(tt,st,Le,mt)}return mt==pe?this._moveViewPositionToTextNode(new Position$1(tt,st)):this._findPositionStartingFrom(new Position$1(ht,0),mt-gt,pe,Le,Ye)}_moveViewPositionToTextNode(t){const de=t.nodeBefore,pe=t.nodeAfter;return de&&de.is("view:$text")?new Position$1(de,de.data.length):pe&&pe.is("view:$text")?new Position$1(pe,0):t}}class MapperCache extends EmitterMixin(){constructor(){super(...arguments);wt(this,"_cachedMapping",new WeakMap);wt(this,"_nodeToCacheListIndex",new WeakMap);wt(this,"_invalidateOnChildrenChangeCallback",(t,de,pe)=>{this._clearCacheInsideParent(de,pe.index)});wt(this,"_invalidateOnTextChangeCallback",(t,de)=>{this._clearCacheStartingBefore(de)})}save(t,de,pe,Le){const Ye=this._cachedMapping.get(pe),tt=Ye.cacheMap.get(Le);if(tt){const gt=t.getChild(de-1),bt=tt.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(tt.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(gt,bt);return}const ht={viewPosition:new Position$1(t,de),modelOffset:Le};Ye.maxModelOffset=Le>Ye.maxModelOffset?Le:Ye.maxModelOffset,Ye.cacheMap.set(Le,ht);let mt=Ye.cacheList.length-1;for(;mt>=0&&Ye.cacheList[mt].modelOffset>Le;)mt--;if(Ye.cacheList.splice(mt+1,0,ht),de>0){const gt=t.getChild(de-1);this._nodeToCacheListIndex.set(gt,mt+1)}}getClosest(t,de){const pe=this._cachedMapping.get(t);let Le;if(pe)if(de>pe.maxModelOffset)Le=pe.cacheList[pe.cacheList.length-1];else{const tt=pe.cacheMap.get(de);tt?Le=tt:Le=this._findInCacheList(pe.cacheList,de)}else Le=this.startTracking(t);const Ye=this._hoistViewPosition(Le.viewPosition);return{modelOffset:Le.modelOffset,viewPosition:Ye}}_hoistViewPosition(t){for(;t.parent.parent&&!this._cachedMapping.has(t.parent)&&t.isAtEnd;){const de=t.parent.parent,pe=de.getChildIndex(t.parent)+1;t=new Position$1(de,pe)}return t}startTracking(t){const pe={viewPosition:new Position$1(t,0),modelOffset:0},Le={maxModelOffset:0,cacheList:[pe],cacheMap:new Map([[0,pe]])};return this._cachedMapping.set(t,Le),t.on("change:children",this._invalidateOnChildrenChangeCallback),t.on("change:text",this._invalidateOnTextChangeCallback),pe}stopTracking(t){t.off("change:children",this._invalidateOnChildrenChangeCallback),t.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(t)}_clearCacheInsideParent(t,de){if(de==0)this._cachedMapping.has(t)?this._clearCacheAll(t):this._clearCacheStartingBefore(t);else{const pe=t.getChild(de-1);this._clearCacheStartingBefore(pe)}}_clearCacheAll(t){const de=this._cachedMapping.get(t);de.maxModelOffset>0&&(de.maxModelOffset=0,de.cacheList.length=1,de.cacheMap.clear(),de.cacheMap.set(0,de.cacheList[0]))}_clearCacheStartingBefore(t){const de=this._nodeToCacheListIndex.get(t);if(de===void 0){const Le=t.parent;this._cachedMapping.has(Le)||this._clearCacheStartingBefore(Le);return}let pe=t.parent;for(;!this._cachedMapping.has(pe);)pe=pe.parent;this._clearCacheFromIndex(pe,de)}_clearCacheFromIndex(t,de){de===0&&(de=1);const pe=this._cachedMapping.get(t),Le=pe.cacheList[de-1];if(!Le)return;pe.maxModelOffset=Le.modelOffset;const Ye=pe.cacheList.splice(de);for(const tt of Ye){pe.cacheMap.delete(tt.modelOffset);const st=tt.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(st)}}_findInCacheList(t,de){let pe=0,Le=t.length-1,Ye=Le-pe>>1,tt=t[Ye];for(;pe<Le;)tt.modelOffset<de?pe=Ye+1:Le=Ye-1,Ye=pe+(Le-pe>>1),tt=t[Ye];return tt.modelOffset<=de?tt:t[Ye-1]}}class ModelConsumable{constructor(){wt(this,"_consumable",new Map);wt(this,"_textProxyRegistry",new Map)}add(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u)),this._consumable.has(u)||this._consumable.set(u,new Map),this._consumable.get(u).set(t,!0)}consume(u,t){return t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u)),this.test(u,t)?(this._consumable.get(u).set(t,!1),!0):!1}test(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u));const de=this._consumable.get(u);if(de===void 0)return null;const pe=de.get(t);return pe===void 0?null:pe}revert(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u));const de=this.test(u,t);return de===!1?(this._consumable.get(u).set(t,!0),!0):de===!0?!1:null}verifyAllConsumed(u){const t=[];for(const[de,pe]of this._consumable)for(const[Le,Ye]of pe){const tt=Le.split(":")[0];Ye&&u==tt&&t.push({event:Le,item:de.name||de.description})}if(t.length)throw new CKEditorError("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(u){let t=null;const de=this._textProxyRegistry.get(u.startOffset);if(de){const pe=de.get(u.endOffset);pe&&(t=pe.get(u.parent))}return t||(t=this._addSymbolForTextProxy(u)),t}_addSymbolForTextProxy(u){const t=u.startOffset,de=u.endOffset,pe=u.parent,Le=Symbol("$textProxy:"+u.data);let Ye,tt;return Ye=this._textProxyRegistry.get(t),Ye||(Ye=new Map,this._textProxyRegistry.set(t,Ye)),tt=Ye.get(de),tt||(tt=new Map,Ye.set(de,tt)),tt.set(pe,Le),Le}}function _normalizeConsumableType(me){const u=me.split(":");return u[0]=="insert"?u[0]:u[0]=="addMarker"||u[0]=="removeMarker"?me:u.length>1?u[0]+":"+u[1]:u[0]}class DowncastDispatcher extends EmitterMixin(){constructor(t){super();wt(this,"_conversionApi");wt(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,de,pe){const Le=this._createConversionApi(pe,t.getRefreshedItems());for(const tt of t.getMarkersToRemove())this._convertMarkerRemove(tt.name,tt.range,Le);const Ye=this._reduceChanges(t.getChanges());for(const tt of Ye)tt.type==="insert"?this._convertInsert(Range._createFromPositionAndShift(tt.position,tt.length),Le):tt.type==="reinsert"?this._convertReinsert(Range._createFromPositionAndShift(tt.position,tt.length),Le):tt.type==="remove"?this._convertRemove(tt.position,tt.length,tt.name,Le):this._convertAttribute(tt.range,tt.attributeKey,tt.attributeOldValue,tt.attributeNewValue,Le);Le.mapper.flushDeferredBindings();for(const tt of Le.mapper.flushUnboundMarkerNames()){const st=de.get(tt).getRange();this._convertMarkerRemove(tt,st,Le),this._convertMarkerAdd(tt,st,Le)}for(const tt of t.getMarkersToAdd())this._convertMarkerAdd(tt.name,tt.range,Le);Le.consumable.verifyAllConsumed("insert")}convert(t,de,pe,Le={}){const Ye=this._createConversionApi(pe,void 0,Le);this._convertInsert(t,Ye);for(const[tt,st]of de)this._convertMarkerAdd(tt,st,Ye);Ye.consumable.verifyAllConsumed("insert")}convertSelection(t,de,pe){const Le=this._createConversionApi(pe);this.fire("cleanSelection",{selection:t},Le);const Ye=t.getFirstPosition().root;if(!Le.mapper.toViewElement(Ye))return;const tt=Array.from(de.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(Le.consumable,t,tt),this.fire("selection",{selection:t},Le),!!t.isCollapsed){for(const st of tt)if(Le.consumable.test(t,"addMarker:"+st.name)){const ht=st.getRange();if(!shouldMarkerChangeBeConverted(t.getFirstPosition(),st,Le.mapper))continue;const mt={item:t,markerName:st.name,markerRange:ht};this.fire(`addMarker:${st.name}`,mt,Le)}for(const st of t.getAttributeKeys())if(Le.consumable.test(t,"attribute:"+st)){const ht={item:t,range:t.getFirstRange(),attributeKey:st,attributeOldValue:null,attributeNewValue:t.getAttribute(st)};this.fire(`attribute:${st}:$text`,ht,Le)}}}_convertInsert(t,de,pe={}){pe.doNotAddConsumables||this._addConsumablesForInsert(de.consumable,t);for(const Le of t.getWalker({shallow:!0}))this._testAndFire("insert",walkerValueToEventData(Le),de)}_convertRemove(t,de,pe,Le){this.fire(`remove:${pe}`,{position:t,length:de},Le)}_convertAttribute(t,de,pe,Le,Ye){this._addConsumablesForRange(Ye.consumable,t,`attribute:${de}`);for(const tt of t){const st={item:tt.item,range:Range._createFromPositionAndShift(tt.previousPosition,tt.length),attributeKey:de,attributeOldValue:pe,attributeNewValue:Le};this._testAndFire(`attribute:${de}`,st,Ye)}}_convertReinsert(t,de){const pe=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(de.consumable,pe);for(const Le of pe.map(walkerValueToEventData))this._testAndFire("insert",{...Le,reconversion:!0},de)}_convertMarkerAdd(t,de,pe){if(de.root.rootName=="$graveyard")return;const Le=`addMarker:${t}`;if(pe.consumable.add(de,Le),this.fire(Le,{markerName:t,markerRange:de},pe),!!pe.consumable.consume(de,Le)){this._addConsumablesForRange(pe.consumable,de,Le);for(const Ye of de.getItems()){if(!pe.consumable.test(Ye,Le))continue;const tt={item:Ye,range:Range._createOn(Ye),markerName:t,markerRange:de};this.fire(Le,tt,pe)}}}_convertMarkerRemove(t,de,pe){de.root.rootName!="$graveyard"&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:de},pe)}_reduceChanges(t){const de={changes:t};return this.fire("reduceChanges",de),de.changes}_addConsumablesForInsert(t,de){for(const pe of de){const Le=pe.item;if(t.test(Le,"insert")===null){t.add(Le,"insert");for(const Ye of Le.getAttributeKeys())t.add(Le,"attribute:"+Ye)}}return t}_addConsumablesForRange(t,de,pe){for(const Le of de.getItems())t.add(Le,pe);return t}_addConsumablesForSelection(t,de,pe){t.add(de,"selection");for(const Le of pe)t.add(de,"addMarker:"+Le.name);for(const Le of de.getAttributeKeys())t.add(de,"attribute:"+Le);return t}_testAndFire(t,de,pe){const Le=getEventName(t,de),Ye=de.item.is("$textProxy")?pe.consumable._getSymbolForTextProxy(de.item):de.item,tt=this._firedEventsMap.get(pe),st=tt.get(Ye);if(!st)tt.set(Ye,new Set([Le]));else if(!st.has(Le))st.add(Le);else return;this.fire(Le,de,pe)}_testAndFireAddAttributes(t,de){const pe={item:t,range:Range._createOn(t)};for(const Le of pe.item.getAttributeKeys())pe.attributeKey=Le,pe.attributeOldValue=null,pe.attributeNewValue=pe.item.getAttribute(Le),this._testAndFire(`attribute:${Le}`,pe,de)}_createConversionApi(t,de=new Set,pe={}){const Le={...this._conversionApi,consumable:new ModelConsumable,writer:t,options:pe,convertItem:Ye=>this._convertInsert(Range._createOn(Ye),Le),convertChildren:Ye=>this._convertInsert(Range._createIn(Ye),Le,{doNotAddConsumables:!0}),convertAttributes:Ye=>this._testAndFireAddAttributes(Ye,Le),canReuseView:Ye=>!de.has(Le.mapper.toModelElement(Ye))};return this._firedEventsMap.set(Le,new Map),Le}}function shouldMarkerChangeBeConverted(me,u,t){const de=u.getRange(),pe=Array.from(me.getAncestors());return pe.shift(),pe.reverse(),!pe.some(Ye=>{if(de.containsItem(Ye))return!!t.toViewElement(Ye).getCustomProperty("addHighlight")})}function getEventName(me,u){const t=u.item.is("element")?u.item.name:"$text";return`${me}:${t}`}function walkerValueToEventData(me){return{item:me.item,range:Range._createFromPositionAndShift(me.previousPosition,me.length)}}let Node$1=class extends TypeCheckable{constructor(t){super();wt(this,"parent",null);wt(this,"_attrs");wt(this,"_index",null);wt(this,"_startOffset",null);this._attrs=toMap(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let de=this;for(;de.parent;)t.unshift(de.startOffset),de=de.parent;return t}getAncestors(t={}){const de=[];let pe=t.includeSelf?this:this.parent;for(;pe;)de[t.parentFirst?"push":"unshift"](pe),pe=pe.parent;return de}getCommonAncestor(t,de={}){const pe=this.getAncestors(de),Le=t.getAncestors(de);let Ye=0;for(;pe[Ye]==Le[Ye]&&pe[Ye];)Ye++;return Ye===0?null:pe[Ye-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const de=this.getPath(),pe=t.getPath(),Le=compareArrays(de,pe);switch(Le){case"prefix":return!0;case"extension":return!1;default:return de[Le]<pe[Le]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((de,pe)=>(de[pe[0]]=pe[1],de),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,de){this._attrs.set(t,de)}_setAttributesTo(t){this._attrs=toMap(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}};Node$1.prototype.is=function(me){return me==="node"||me==="model:node"};class Selection extends EmitterMixin(TypeCheckable){constructor(...t){super();wt(this,"_lastRangeBackward",!1);wt(this,"_attrs",new Map);wt(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const de of this._ranges){let pe=!1;for(const Le of t._ranges)if(de.isEqual(Le)){pe=!0;break}if(!pe)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Range(t.start,t.end)}getFirstRange(){let t=null;for(const de of this._ranges)(!t||de.start.isBefore(t.start))&&(t=de);return t?new Range(t.start,t.end):null}getLastRange(){let t=null;for(const de of this._ranges)(!t||de.end.isAfter(t.end))&&(t=de);return t?new Range(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[de,pe,Le]=t;if(typeof pe=="object"&&(Le=pe,pe=void 0),de===null)this._setRanges([]);else if(de instanceof Selection)this._setRanges(de.getRanges(),de.isBackward);else if(de&&typeof de.getRanges=="function")this._setRanges(de.getRanges(),de.isBackward);else if(de instanceof Range)this._setRanges([de],!!Le&&!!Le.backward);else if(de instanceof Position)this._setRanges([new Range(de)]);else if(de instanceof Node$1){const Ye=!!Le&&!!Le.backward;let tt;if(pe=="in")tt=Range._createIn(de);else if(pe=="on")tt=Range._createOn(de);else if(pe!==void 0)tt=new Range(Position._createAt(de,pe));else throw new CKEditorError("model-selection-setto-required-second-parameter",[this,de]);this._setRanges([tt],Ye)}else if(isIterable(de))this._setRanges(de,Le&&!!Le.backward);else throw new CKEditorError("model-selection-setto-not-selectable",[this,de])}_setRanges(t,de=!1){const pe=Array.from(t),Le=pe.some(Ye=>{if(!(Ye instanceof Range))throw new CKEditorError("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(tt=>!tt.isEqual(Ye))});pe.length===this._ranges.length&&!Le||(this._replaceAllRanges(pe),this._lastRangeBackward=!!de,this.fire("change:range",{directChange:!0}))}setFocus(t,de){if(this.anchor===null)throw new CKEditorError("model-selection-setfocus-no-ranges",[this,t]);const pe=Position._createAt(t,de);if(pe.compareWith(this.focus)=="same")return;const Le=this.anchor;this._ranges.length&&this._popRange(),pe.compareWith(Le)=="before"?(this._pushRange(new Range(pe,Le)),this._lastRangeBackward=!0):(this._pushRange(new Range(Le,pe)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,de){this.getAttribute(t)!==de&&(this._attrs.set(t,de),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const de of this.getRanges()){const pe=getParentBlock$1(de.start,t);isStartBlockSelected(pe,de)&&(yield pe);const Le=de.getWalker();for(const tt of Le){const st=tt.item;tt.type=="elementEnd"&&isUnvisitedTopBlock(st,t,de)?yield st:tt.type=="elementStart"&&st.is("model:element")&&st.root.document.model.schema.isBlock(st)&&Le.jumpTo(Position._createAt(st,"end"))}const Ye=getParentBlock$1(de.end,t);isEndBlockSelected(Ye,de)&&(yield Ye)}}containsEntireContent(t=this.anchor.root){const de=Position._createAt(t,0),pe=Position._createAt(t,"end");return de.isTouching(this.getFirstPosition())&&pe.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new Range(t.start,t.end))}_checkRange(t){for(let de=0;de<this._ranges.length;de++)if(t.isIntersecting(this._ranges[de]))throw new CKEditorError("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[de]})}_replaceAllRanges(t){this._removeAllRanges();for(const de of t)this._pushRange(de)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Selection.prototype.is=function(me){return me==="selection"||me==="model:selection"};function isUnvisitedBlock(me,u){return u.has(me)?!1:(u.add(me),me.root.document.model.schema.isBlock(me)&&!!me.parent)}function isUnvisitedTopBlock(me,u,t){return isUnvisitedBlock(me,u)&&isTopBlockInRange(me,t)}function getParentBlock$1(me,u){const de=me.parent.root.document.model.schema,pe=me.parent.getAncestors({parentFirst:!0,includeSelf:!0});let Le=!1;const Ye=pe.find(tt=>Le?!1:(Le=de.isLimit(tt),!Le&&isUnvisitedBlock(tt,u)));return pe.forEach(tt=>u.add(tt)),Ye}function isTopBlockInRange(me,u){const t=findAncestorBlock(me);return t?!u.containsRange(Range._createOn(t),!0):!0}function isStartBlockSelected(me,u){return me?u.isCollapsed||me.isEmpty?!0:u.start.isTouching(Position._createAt(me,me.maxOffset))?!1:isTopBlockInRange(me,u):!1}function isEndBlockSelected(me,u){return me?u.isCollapsed||me.isEmpty?!0:u.end.isTouching(Position._createAt(me,0))?!1:isTopBlockInRange(me,u):!1}function findAncestorBlock(me){const u=me.root.document.model.schema;let t=me.parent;for(;t;){if(u.isBlock(t))return t;t=t.parent}}class LiveRange extends EmitterMixin(Range){constructor(u,t){super(u,t),bindWithDocument$1.call(this)}detach(){this.stopListening()}toRange(){return new Range(this.start,this.end)}static fromRange(u){return new LiveRange(u.start,u.end)}}LiveRange.prototype.is=function(me){return me==="liveRange"||me==="model:liveRange"||me=="range"||me==="model:range"};function bindWithDocument$1(){this.listenTo(this.root.document.model,"applyOperation",(me,u)=>{const t=u[0];t.isDocumentOperation&&transform$2.call(this,t)},{priority:"low"})}function transform$2(me){const u=this.getTransformedByOperation(me),t=Range._createFromRanges(u),de=!t.isEqual(this),pe=doesOperationChangeRangeContent(this,me);let Le=null;if(de){t.root.rootName=="$graveyard"&&(me.type=="remove"?Le=me.sourcePosition:Le=me.deletionPosition);const Ye=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",Ye,{deletionPosition:Le})}else pe&&this.fire("change:content",this.toRange(),{deletionPosition:Le})}function doesOperationChangeRangeContent(me,u){switch(u.type){case"insert":return me.containsPosition(u.position);case"move":case"remove":case"reinsert":case"merge":return me.containsPosition(u.sourcePosition)||me.start.isEqual(u.sourcePosition)||me.containsPosition(u.targetPosition);case"split":return me.containsPosition(u.splitPosition)||me.containsPosition(u.insertionPosition)}return!1}class Text extends Node$1{constructor(t,de){super(de);wt(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Text(this.data,this.getAttributes())}static fromJSON(t){return new Text(t.data,t.attributes)}}Text.prototype.is=function(me){return me==="$text"||me==="model:$text"||me==="text"||me==="model:text"||me==="node"||me==="model:node"};const storePrefix="selection:";class DocumentSelection extends EmitterMixin(TypeCheckable){constructor(t){super();wt(this,"_selection");this._selection=new LiveSelection(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,de){this._selection.setFocus(t,de)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,de){this._selection.setAttribute(t,de)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return storePrefix+t}static _isStoreAttributeKey(t){return t.startsWith(storePrefix)}}DocumentSelection.prototype.is=function(me){return me==="selection"||me=="model:selection"||me=="documentSelection"||me=="model:documentSelection"};class LiveSelection extends Selection{constructor(t){super();wt(this,"markers",new Collection({idProperty:"name"}));wt(this,"_model");wt(this,"_document");wt(this,"_attributePriority",new Map);wt(this,"_selectionRestorePosition",null);wt(this,"_hasChangedRange",!1);wt(this,"_overriddenGravityRegister",new Set);wt(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(de,pe)=>{const Le=pe[0];!Le.isDocumentOperation||Le.type=="marker"||Le.type=="rename"||Le.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(de,pe,Le,Ye)=>{this._updateMarker(pe,Ye)}),this.listenTo(this._document,"change",(de,pe)=>{clearAttributesStoredInElement(this._model,pe)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,de){super.setFocus(t,de),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,de){if(this._setAttribute(t,de)){const pe=[t];this.fire("change:attribute",{attributeKeys:pe,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const de=[t];this.fire("change:attribute",{attributeKeys:de,directChange:!0})}}overrideGravity(){const t=uid();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new CKEditorError("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const de=this._prepareRange(t);de&&this._ranges.push(de)}_validateSelectionRanges(t){for(const de of t)if(!this._document._validateSelectionRange(de))throw new CKEditorError("document-selection-wrong-position",this,{range:de})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const de=LiveRange.fromRange(t);return de.on("change:range",(pe,Le,Ye)=>{if(this._hasChangedRange=!0,de.root==this._document.graveyard){this._selectionRestorePosition=Ye.deletionPosition;const tt=this._ranges.indexOf(de);this._ranges.splice(tt,1),de.detach()}}),de}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let de=!1;for(const Le of this._model.markers){const Ye=Le.name.split(":",1)[0];if(!this._observedMarkers.has(Ye))continue;const tt=Le.getRange();for(const st of this.getRanges())tt.containsRange(st,!st.isCollapsed)&&t.push(Le)}const pe=Array.from(this.markers);for(const Le of t)this.markers.has(Le)||(this.markers.add(Le),de=!0);for(const Le of Array.from(this.markers))t.includes(Le)||(this.markers.remove(Le),de=!0);de&&this.fire("change:marker",{oldMarkers:pe,directChange:!1})}_updateMarker(t,de){const pe=t.name.split(":",1)[0];if(!this._observedMarkers.has(pe))return;let Le=!1;const Ye=Array.from(this.markers),tt=this.markers.has(t);if(!de)tt&&(this.markers.remove(t),Le=!0);else{let st=!1;for(const ht of this.getRanges())if(de.containsRange(ht,!ht.isCollapsed)){st=!0;break}st&&!tt?(this.markers.add(t),Le=!0):!st&&tt&&(this.markers.remove(t),Le=!0)}Le&&this.fire("change:marker",{oldMarkers:Ye,directChange:!1})}_updateAttributes(t){const de=toMap(this._getSurroundingAttributes()),pe=toMap(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[Ye,tt]of this._attributePriority)tt=="low"&&(this._attrs.delete(Ye),this._attributePriority.delete(Ye));this._setAttributesTo(de);const Le=[];for(const[Ye,tt]of this.getAttributes())(!pe.has(Ye)||pe.get(Ye)!==tt)&&Le.push(Ye);for(const[Ye]of pe)this.hasAttribute(Ye)||Le.push(Ye);Le.length>0&&this.fire("change:attribute",{attributeKeys:Le,directChange:!1})}_setAttribute(t,de,pe=!0){const Le=pe?"normal":"low";return Le=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===de?!1:(this._attrs.set(t,de),this._attributePriority.set(t,Le),!0)}_removeAttribute(t,de=!0){const pe=de?"normal":"low";return pe=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,pe),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const de=new Set;for(const[pe,Le]of this.getAttributes())t.get(pe)!==Le&&this._removeAttribute(pe,!1);for(const[pe,Le]of t)this._setAttribute(pe,Le,!1)&&de.add(pe);return de}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const de of t.getAttributeKeys())de.startsWith(storePrefix)&&(yield[de.substr(storePrefix.length),t.getAttribute(de)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),de=this._model.schema;if(t.root.rootName=="$graveyard")return null;let pe=null;if(this.isCollapsed){const Le=t.textNode?t.textNode:t.nodeBefore,Ye=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(pe=getTextAttributes(Le,de)),pe||(pe=getTextAttributes(Ye,de)),!this.isGravityOverridden&&!pe){let tt=Le;for(;tt&&!pe;)tt=tt.previousSibling,pe=getTextAttributes(tt,de)}if(!pe){let tt=Ye;for(;tt&&!pe;)tt=tt.nextSibling,pe=getTextAttributes(tt,de)}pe||(pe=this.getStoredAttributes())}else{const Le=this.getFirstRange();for(const Ye of Le){if(Ye.item.is("element")&&de.isObject(Ye.item)){pe=getTextAttributes(Ye.item,de);break}if(Ye.type=="text"){pe=Ye.item.getAttributes();break}}}return pe}_fixGraveyardSelection(t){const de=this._model.schema.getNearestSelectionRange(t);de&&this._pushRange(de)}}function getTextAttributes(me,u){if(!me)return null;if(me instanceof TextProxy||me instanceof Text)return me.getAttributes();if(!u.isInline(me))return null;if(!u.isObject(me))return[];const t=[];for(const[de,pe]of me.getAttributes())u.checkAttribute("$text",de)&&u.getAttributeProperties(de).copyFromObject!==!1&&t.push([de,pe]);return t}function clearAttributesStoredInElement(me,u){const t=me.document.differ;for(const de of t.getChanges()){if(de.type!="insert")continue;const pe=de.position.parent;de.length===pe.maxOffset&&me.enqueueChange(u,Ye=>{const tt=Array.from(pe.getAttributeKeys()).filter(st=>st.startsWith(storePrefix));for(const st of tt)Ye.removeAttribute(st,pe)})}}class NodeList{constructor(u){wt(this,"_nodes",[]);wt(this,"_offsetToNode",[]);u&&this._insertNodes(0,u)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(u){return this._nodes[u]||null}getNodeAtOffset(u){return this._offsetToNode[u]||null}getNodeIndex(u){return u.index}getNodeStartOffset(u){return u.startOffset}indexToOffset(u){if(u==this._nodes.length)return this.maxOffset;const t=this._nodes[u];if(!t)throw new CKEditorError("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(u){if(u==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[u];if(!t)throw new CKEditorError("model-nodelist-offset-out-of-bounds",this,{offset:u,nodeList:this});return this.getNodeIndex(t)}_insertNodes(u,t){const de=[];for(const Le of t){if(!(Le instanceof Node$1))throw new CKEditorError("model-nodelist-insertnodes-not-node",this);de.push(Le)}let pe=this.indexToOffset(u);spliceArray(this._nodes,de,u),spliceArray(this._offsetToNode,makeOffsetsArray(de),pe);for(let Le=u;Le<this._nodes.length;Le++)this._nodes[Le]._index=Le,this._nodes[Le]._startOffset=pe,pe+=this._nodes[Le].offsetSize}_removeNodes(u,t=1){if(t==0)return[];let de=this.indexToOffset(u);const pe=this._nodes.splice(u,t),Le=pe[pe.length-1],Ye=Le.startOffset+Le.offsetSize-de;this._offsetToNode.splice(de,Ye);for(const tt of pe)tt._index=null,tt._startOffset=null;for(let tt=u;tt<this._nodes.length;tt++)this._nodes[tt]._index=tt,this._nodes[tt]._startOffset=de,de+=this._nodes[tt].offsetSize;return pe}_removeNodesArray(u){if(u.length==0)return;for(const de of u)de._index=null,de._startOffset=null;this._nodes=this._nodes.filter(de=>de.index!==null),this._offsetToNode=this._offsetToNode.filter(de=>de.index!==null);let t=0;for(let de=0;de<this._nodes.length;de++)this._nodes[de]._index=de,this._nodes[de]._startOffset=t,t+=this._nodes[de].offsetSize}toJSON(){return this._nodes.map(u=>u.toJSON())}}function makeOffsetsArray(me){const u=[];let t=0;for(const de of me)for(let pe=0;pe<de.offsetSize;pe++)u[t++]=de;return u}class Element extends Node$1{constructor(t,de,pe){super(de);wt(this,"name");wt(this,"_children",new NodeList);this.name=t,pe&&this._insertChild(0,pe)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let de=this;for(const pe of t)de=de.getChildAtOffset(pe);return de}findAncestor(t,de={}){let pe=de.includeSelf?this:this.parent;for(;pe;){if(pe.name===t)return pe;pe=pe.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const de of this._children)t.children.push(de.toJSON())}return t}_clone(t=!1){const de=t?cloneNodes(this._children):void 0;return new Element(this.name,this.getAttributes(),de)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,de){const pe=normalize$1(de);for(const Le of pe)Le.parent!==null&&Le._remove(),Le.parent=this;this._children._insertNodes(t,pe)}_removeChildren(t,de=1){const pe=this._children._removeNodes(t,de);for(const Le of pe)Le.parent=null;return pe}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const de of t)de.parent=null}static fromJSON(t){let de;if(t.children){de=[];for(const pe of t.children)pe.name?de.push(Element.fromJSON(pe)):de.push(Text.fromJSON(pe))}return new Element(t.name,t.attributes,de)}}Element.prototype.is=function(me,u){return u?u===this.name&&(me==="element"||me==="model:element"):me==="element"||me==="model:element"||me==="node"||me==="model:node"};function normalize$1(me){if(typeof me=="string")return[new Text(me)];isIterable(me)||(me=[me]);const u=[];for(const t of me)typeof t=="string"?u.push(new Text(t)):t instanceof TextProxy?u.push(new Text(t.data,t.getAttributes())):u.push(t);return u}function cloneNodes(me){const u=[];for(const t of me)u.push(t._clone(!0));return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ConversionHelpers{constructor(u){wt(this,"_dispatchers");this._dispatchers=u}add(u){for(const t of this._dispatchers)u(t);return this}}class DowncastHelpers extends ConversionHelpers{elementToElement(u){return this.add(downcastElementToElement(u))}elementToStructure(u){return this.add(downcastElementToStructure(u))}attributeToElement(u){return this.add(downcastAttributeToElement(u))}attributeToAttribute(u){return this.add(downcastAttributeToAttribute(u))}markerToElement(u){return this.add(downcastMarkerToElement(u))}markerToHighlight(u){return this.add(downcastMarkerToHighlight(u))}markerToData(u){return this.add(downcastMarkerToData(u))}}function insertText(){return(me,u,t)=>{if(!t.consumable.consume(u.item,me.name))return;const de=t.writer,pe=t.mapper.toViewPosition(u.range.start),Le=de.createText(u.item.data);de.insert(pe,Le)}}function insertAttributesAndChildren(){return(me,u,t)=>{t.convertAttributes(u.item),!u.reconversion&&u.item.is("element")&&!u.item.isEmpty&&t.convertChildren(u.item)}}function remove$1(){return(me,u,t)=>{const de=t.mapper.toViewPosition(u.position),pe=u.position.getShiftedBy(u.length),Le=t.mapper.toViewPosition(pe,{isPhantom:!0}),Ye=t.writer.createRange(de,Le),tt=t.writer.remove(Ye.getTrimmed());for(const st of t.writer.createRangeIn(tt).getItems())t.mapper.unbindViewElement(st,{defer:!0})}}function createViewElementFromHighlightDescriptor(me,u){const t=me.createAttributeElement("span",u.attributes);return u.classes&&t._addClass(u.classes),typeof u.priority=="number"&&(t._priority=u.priority),t._id=u.id,t}function convertRangeSelection(){return(me,u,t)=>{const de=u.selection;if(de.isCollapsed||!t.consumable.consume(de,"selection"))return;const pe=[];for(const Le of de.getRanges())pe.push(t.mapper.toViewRange(Le));t.writer.setSelection(pe,{backward:de.isBackward})}}function convertCollapsedSelection(){return(me,u,t)=>{const de=u.selection;if(!de.isCollapsed||!t.consumable.consume(de,"selection"))return;const pe=t.writer,Le=de.getFirstPosition(),Ye=t.mapper.toViewPosition(Le),tt=pe.breakAttributes(Ye);pe.setSelection(tt)}}function cleanSelection(){return(me,u,t)=>{const de=t.writer,pe=de.document.selection;for(const Le of pe.getRanges())Le.isCollapsed&&Le.end.parent.isAttached()&&t.writer.mergeAttributes(Le.start);de.setSelection(null)}}function wrap(me){return(u,t,de)=>{if(!de.consumable.test(t.item,u.name))return;const pe=me(t.attributeOldValue,de,t),Le=me(t.attributeNewValue,de,t);if(!pe&&!Le)return;de.consumable.consume(t.item,u.name);const Ye=de.writer,tt=Ye.document.selection;if(t.item instanceof Selection||t.item instanceof DocumentSelection)Ye.wrap(tt.getFirstRange(),Le);else{let st=de.mapper.toViewRange(t.range);t.attributeOldValue!==null&&pe&&(st=Ye.unwrap(st,pe)),t.attributeNewValue!==null&&Le&&Ye.wrap(st,Le)}}}function insertElement(me,u=defaultConsumer){return(t,de,pe)=>{if(!u(de.item,pe.consumable,{preflight:!0}))return;const Le=me(de.item,pe,de);if(!Le)return;u(de.item,pe.consumable);const Ye=pe.mapper.toViewPosition(de.range.start);pe.mapper.bindElements(de.item,Le),pe.writer.insert(Ye,Le),pe.convertAttributes(de.item),reinsertOrConvertNodes(Le,de.item.getChildren(),pe,{reconversion:de.reconversion})}}function insertStructure(me,u){return(t,de,pe)=>{if(!u(de.item,pe.consumable,{preflight:!0}))return;const Le=new Map;pe.writer._registerSlotFactory(createSlotFactory(de.item,Le,pe));const Ye=me(de.item,pe,de);if(pe.writer._clearSlotFactory(),!Ye)return;validateSlotsChildren(de.item,Le,pe),u(de.item,pe.consumable);const tt=pe.mapper.toViewPosition(de.range.start);pe.mapper.bindElements(de.item,Ye),pe.writer.insert(tt,Ye),pe.convertAttributes(de.item),fillSlots(Ye,Le,pe,{reconversion:de.reconversion})}}function insertUIElement(me){return(u,t,de)=>{t.isOpening=!0;const pe=me(t,de);t.isOpening=!1;const Le=me(t,de);if(!pe||!Le)return;const Ye=t.markerRange;if(Ye.isCollapsed&&!de.consumable.consume(Ye,u.name))return;for(const ht of Ye)if(!de.consumable.consume(ht.item,u.name))return;const tt=de.mapper,st=de.writer;st.insert(tt.toViewPosition(Ye.start),pe),de.mapper.bindElementToMarker(pe,t.markerName),Ye.isCollapsed||(st.insert(tt.toViewPosition(Ye.end),Le),de.mapper.bindElementToMarker(Le,t.markerName)),u.stop()}}function removeUIElement(){return(me,u,t)=>{const de=t.mapper.markerNameToElements(u.markerName);if(de){for(const pe of de)t.mapper.unbindElementFromMarkerName(pe,u.markerName),t.writer.clear(t.writer.createRangeOn(pe),pe);t.writer.clearClonedElementsGroup(u.markerName),me.stop()}}}function insertMarkerData(me){return(u,t,de)=>{const pe=me(t.markerName,de);if(!pe)return;const Le=t.markerRange;de.consumable.consume(Le,u.name)&&(handleMarkerBoundary(Le,!1,de,t,pe),handleMarkerBoundary(Le,!0,de,t,pe),u.stop())}}function handleMarkerBoundary(me,u,t,de,pe){const Le=u?me.start:me.end,Ye=Le.nodeAfter&&Le.nodeAfter.is("element")?Le.nodeAfter:null,tt=Le.nodeBefore&&Le.nodeBefore.is("element")?Le.nodeBefore:null;if(Ye||tt){let ht,mt;u&&Ye||!u&&!tt?(ht=Ye,mt=!0):(ht=tt,mt=!1);const gt=t.mapper.toViewElement(ht);if(gt){insertMarkerAsAttribute(gt,u,mt,t,de,pe);return}}const st=t.mapper.toViewPosition(Le);insertMarkerAsElement(st,u,t,de,pe)}function insertMarkerAsAttribute(me,u,t,de,pe,Le){const Ye=`data-${Le.group}-${u?"start":"end"}-${t?"before":"after"}`,tt=me.hasAttribute(Ye)?me.getAttribute(Ye).split(","):[];tt.unshift(Le.name),de.writer.setAttribute(Ye,tt.join(","),me),de.mapper.bindElementToMarker(me,pe.markerName)}function insertMarkerAsElement(me,u,t,de,pe){const Le=`${pe.group}-${u?"start":"end"}`,Ye=pe.name?{name:pe.name}:null,tt=t.writer.createUIElement(Le,Ye);t.writer.insert(me,tt),t.mapper.bindElementToMarker(tt,de.markerName)}function removeMarkerData(me){return(u,t,de)=>{const pe=me(t.markerName,de);if(!pe)return;const Le=de.mapper.markerNameToElements(t.markerName);if(!Le)return;for(const tt of Le)de.mapper.unbindElementFromMarkerName(tt,t.markerName),tt.is("containerElement")?(Ye(`data-${pe.group}-start-before`,tt),Ye(`data-${pe.group}-start-after`,tt),Ye(`data-${pe.group}-end-before`,tt),Ye(`data-${pe.group}-end-after`,tt)):de.writer.clear(de.writer.createRangeOn(tt),tt);de.writer.clearClonedElementsGroup(t.markerName),u.stop();function Ye(tt,st){if(st.hasAttribute(tt)){const ht=new Set(st.getAttribute(tt).split(","));ht.delete(pe.name),ht.size==0?de.writer.removeAttribute(tt,st):de.writer.setAttribute(tt,Array.from(ht).join(","),st)}}}}function changeAttribute(me){return(u,t,de)=>{if(!de.consumable.test(t.item,u.name))return;const pe=me(t.attributeOldValue,de,t),Le=me(t.attributeNewValue,de,t);if(!pe&&!Le)return;de.consumable.consume(t.item,u.name);const Ye=de.mapper.toViewElement(t.item),tt=de.writer;if(!Ye)throw new CKEditorError("conversion-attribute-to-attribute-on-text",de.dispatcher,t);if(t.attributeOldValue!==null&&pe){let st=pe.value;pe.key=="style"&&(typeof pe.value=="string"?st=new StylesMap(tt.document.stylesProcessor).setTo(pe.value).getStylesEntries().map(([ht])=>ht):st=Object.keys(pe.value)),tt.removeAttribute(pe.key,st,Ye)}if(t.attributeNewValue!==null&&Le){let st=Le.value;Le.key=="style"&&typeof Le.value=="string"&&(st=Object.fromEntries(new StylesMap(tt.document.stylesProcessor).setTo(Le.value).getStylesEntries())),tt.setAttribute(Le.key,st,!1,Ye)}}}function highlightText(me){return(u,t,de)=>{if(!t.item||!(t.item instanceof Selection||t.item instanceof DocumentSelection)&&!t.item.is("$textProxy"))return;const pe=prepareDescriptor(me,t,de);if(!pe||!de.consumable.consume(t.item,u.name))return;const Le=de.writer,Ye=createViewElementFromHighlightDescriptor(Le,pe),tt=Le.document.selection;if(t.item instanceof Selection||t.item instanceof DocumentSelection)Le.wrap(tt.getFirstRange(),Ye);else{const st=de.mapper.toViewRange(t.range),ht=Le.wrap(st,Ye);for(const mt of ht.getItems())if(mt.is("attributeElement")&&mt.isSimilar(Ye)){de.mapper.bindElementToMarker(mt,t.markerName);break}}}}function highlightElement(me){return(u,t,de)=>{if(!t.item||!(t.item instanceof Element))return;const pe=prepareDescriptor(me,t,de);if(!pe||!de.consumable.test(t.item,u.name))return;const Le=de.mapper.toViewElement(t.item);if(Le&&Le.getCustomProperty("addHighlight")){de.consumable.consume(t.item,u.name);for(const tt of Range._createIn(t.item))de.consumable.consume(tt.item,u.name);Le.getCustomProperty("addHighlight")(Le,pe,de.writer),de.mapper.bindElementToMarker(Le,t.markerName)}}}function removeHighlight$1(me){return(u,t,de)=>{if(t.markerRange.isCollapsed)return;const pe=prepareDescriptor(me,t,de);if(!pe)return;const Le=createViewElementFromHighlightDescriptor(de.writer,pe),Ye=de.mapper.markerNameToElements(t.markerName);if(Ye){for(const tt of Ye)de.mapper.unbindElementFromMarkerName(tt,t.markerName),tt.is("attributeElement")?de.writer.unwrap(de.writer.createRangeOn(tt),Le):tt.getCustomProperty("removeHighlight")(tt,pe.id,de.writer);de.writer.clearClonedElementsGroup(t.markerName),u.stop()}}}function downcastElementToElement(me){const u=normalizeModelElementConfig(me.model),t=normalizeToElementConfig(me.view,"container");return u.attributes.length&&(u.children=!0),de=>{de.on(`insert:${u.name}`,insertElement(t,createConsumer(u)),{priority:me.converterPriority||"normal"}),(u.children||u.attributes.length)&&de.on("reduceChanges",createChangeReducer(u),{priority:"low"})}}function downcastElementToStructure(me){const u=normalizeModelElementConfig(me.model),t=normalizeToElementConfig(me.view,"container");return u.children=!0,de=>{if(de._conversionApi.schema.checkChild(u.name,"$text"))throw new CKEditorError("conversion-element-to-structure-disallowed-text",de,{elementName:u.name});de.on(`insert:${u.name}`,insertStructure(t,createConsumer(u)),{priority:me.converterPriority||"normal"}),de.on("reduceChanges",createChangeReducer(u),{priority:"low"})}}function downcastAttributeToElement(me){me=cloneDeep(me);let u=me.model;typeof u=="string"&&(u={key:u});let t=`attribute:${u.key}`;if(u.name&&(t+=":"+u.name),u.values)for(const pe of u.values)me.view[pe]=normalizeToElementConfig(me.view[pe],"attribute");else me.view=normalizeToElementConfig(me.view,"attribute");const de=getFromAttributeCreator(me);return pe=>{pe.on(t,wrap(de),{priority:me.converterPriority||"normal"})}}function downcastAttributeToAttribute(me){me=cloneDeep(me);let u=me.model;typeof u=="string"&&(u={key:u});let t=`attribute:${u.key}`;if(u.name&&(t+=":"+u.name),u.values)for(const pe of u.values)me.view[pe]=normalizeToAttributeConfig(me.view[pe]);else me.view=normalizeToAttributeConfig(me.view);const de=getFromAttributeCreator(me);return pe=>{pe.on(t,changeAttribute(de),{priority:me.converterPriority||"normal"})}}function downcastMarkerToElement(me){const u=normalizeToElementConfig(me.view,"ui");return t=>{t.on(`addMarker:${me.model}`,insertUIElement(u),{priority:me.converterPriority||"normal"}),t.on(`removeMarker:${me.model}`,removeUIElement(),{priority:me.converterPriority||"normal"})}}function downcastMarkerToData(me){me=cloneDeep(me);const u=me.model;let t=me.view;return t||(t=de=>({group:u,name:de.substr(me.model.length+1)})),de=>{de.on(`addMarker:${u}`,insertMarkerData(t),{priority:me.converterPriority||"normal"}),de.on(`removeMarker:${u}`,removeMarkerData(t),{priority:me.converterPriority||"normal"})}}function downcastMarkerToHighlight(me){return u=>{u.on(`addMarker:${me.model}`,highlightText(me.view),{priority:me.converterPriority||"normal"}),u.on(`addMarker:${me.model}`,highlightElement(me.view),{priority:me.converterPriority||"normal"}),u.on(`removeMarker:${me.model}`,removeHighlight$1(me.view),{priority:me.converterPriority||"normal"})}}function normalizeModelElementConfig(me){return typeof me=="string"&&(me={name:me}),{name:me.name,attributes:me.attributes?toArray$2(me.attributes):[],children:!!me.children}}function normalizeToElementConfig(me,u){return typeof me=="function"?me:(t,de)=>createViewElementFromDefinition(me,de,u)}function createViewElementFromDefinition(me,u,t){typeof me=="string"&&(me={name:me});let de;const pe=u.writer,Le=Object.assign({},me.attributes);if(t=="container")de=pe.createContainerElement(me.name,Le);else if(t=="attribute"){const Ye={priority:me.priority||AttributeElement.DEFAULT_PRIORITY};de=pe.createAttributeElement(me.name,Le,Ye)}else de=pe.createUIElement(me.name,Le);if(me.styles){const Ye=Object.keys(me.styles);for(const tt of Ye)pe.setStyle(tt,me.styles[tt],de)}if(me.classes){const Ye=me.classes;if(typeof Ye=="string")pe.addClass(Ye,de);else for(const tt of Ye)pe.addClass(tt,de)}return de}function getFromAttributeCreator(me){return me.model.values?(u,t,de)=>{const pe=me.view[u];return pe?pe(u,t,de):null}:me.view}function normalizeToAttributeConfig(me){return typeof me=="string"?u=>({key:me,value:u}):typeof me=="object"?me.value?()=>me:u=>({key:me.key,value:u}):me}function prepareDescriptor(me,u,t){const de=typeof me=="function"?me(u,t):me;return de?(de.priority||(de.priority=10),de.id||(de.id=u.markerName),de):null}function createChangeReducerCallback(me){return(u,t)=>{if(!u.is("element",me.name))return!1;if(t.type=="attribute"){if(me.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(me.children)return!0}return!1}}function createChangeReducer(me){const u=createChangeReducerCallback(me);return(t,de)=>{const pe=[];de.reconvertedElements||(de.reconvertedElements=new Set);for(const Le of de.changes){const Ye=Le.type=="attribute"?Le.range.start.nodeAfter:Le.position.parent;if(!Ye||!u(Ye,Le)){pe.push(Le);continue}if(!de.reconvertedElements.has(Ye)){de.reconvertedElements.add(Ye);const tt=Position._createBefore(Ye);let st=pe.length;for(let ht=pe.length-1;ht>=0;ht--){const mt=pe[ht],bt=(mt.type=="attribute"?mt.range.start:mt.position).compareWith(tt);if(bt=="before"||mt.type=="remove"&&bt=="same")break;st=ht}pe.splice(st,0,{type:"remove",name:Ye.name,position:tt,length:1},{type:"reinsert",name:Ye.name,position:tt,length:1})}}de.changes=pe}}function createConsumer(me){return(u,t,de={})=>{const pe=["insert"];for(const Le of me.attributes)u.hasAttribute(Le)&&pe.push(`attribute:${Le}`);return pe.every(Le=>t.test(u,Le))?(de.preflight||pe.forEach(Le=>t.consume(u,Le)),!0):!1}}function createSlotFactory(me,u,t){return(de,pe)=>{const Le=de.createContainerElement("$slot");let Ye=null;if(pe==="children")Ye=Array.from(me.getChildren());else if(typeof pe=="function")Ye=Array.from(me.getChildren()).filter(tt=>pe(tt));else throw new CKEditorError("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:pe});return u.set(Le,Ye),Le}}function validateSlotsChildren(me,u,t){const de=Array.from(u.values()).flat(),pe=new Set(de);if(pe.size!=de.length)throw new CKEditorError("conversion-slot-filter-overlap",t.dispatcher,{element:me});if(pe.size!=me.childCount)throw new CKEditorError("conversion-slot-filter-incomplete",t.dispatcher,{element:me})}function fillSlots(me,u,t,de){t.mapper.on("modelToViewPosition",Ye,{priority:"highest"});let pe=null,Le=null;for([pe,Le]of u)reinsertOrConvertNodes(me,Le,t,de),t.writer.move(t.writer.createRangeIn(pe),t.writer.createPositionBefore(pe)),t.writer.remove(pe);t.mapper.off("modelToViewPosition",Ye);function Ye(tt,st){const ht=st.modelPosition.nodeAfter,mt=Le.indexOf(ht);mt<0||(st.viewPosition=st.mapper.findPositionIn(pe,mt))}}function reinsertOrConvertNodes(me,u,t,de){for(const pe of u)reinsertNode(me.root,pe,t,de)||t.convertItem(pe)}function reinsertNode(me,u,t,de){const{writer:pe,mapper:Le}=t;if(!de.reconversion)return!1;const Ye=Le.toViewElement(u);return!Ye||Ye.root==me||!t.canReuseView(Ye)?!1:(pe.move(pe.createRangeOn(Ye),Le.toViewPosition(Position._createBefore(u))),!0)}function defaultConsumer(me,u,{preflight:t}={}){return t?u.test(me,"insert"):u.consume(me,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function autoParagraphEmptyRoots(me){const{schema:u,document:t}=me.model;for(const de of t.getRoots())if(de.isEmpty&&!u.checkChild(de,"$text")&&u.checkChild(de,"paragraph"))return me.insertElement("paragraph",de),!0;return!1}function isParagraphable(me,u,t){const de=t.createContext(me);return!(!t.checkChild(de,"paragraph")||!t.checkChild(de.push("paragraph"),u))}function wrapInParagraph(me,u){const t=u.createElement("paragraph");return u.insert(t,me),u.createPositionAt(t,0)}class UpcastHelpers extends ConversionHelpers{elementToElement(u){return this.add(upcastElementToElement(u))}elementToAttribute(u){return this.add(upcastElementToAttribute(u))}attributeToAttribute(u){return this.add(upcastAttributeToAttribute(u))}elementToMarker(u){return this.add(upcastElementToMarker(u))}dataToMarker(u){return this.add(upcastDataToMarker(u))}}function convertToModelFragment$1(){return(me,u,t)=>{if(!u.modelRange&&t.consumable.consume(u.viewItem,{name:!0})){const{modelRange:de,modelCursor:pe}=t.convertChildren(u.viewItem,u.modelCursor);u.modelRange=de,u.modelCursor=pe}}}function convertText(){return(me,u,{schema:t,consumable:de,writer:pe})=>{let Le=u.modelCursor;if(!de.test(u.viewItem))return;if(!t.checkChild(Le,"$text")){if(!isParagraphable(Le,"$text",t)||u.viewItem.data.trim().length==0)return;Le=wrapInParagraph(Le,pe)}de.consume(u.viewItem);const Ye=pe.createText(u.viewItem.data);pe.insert(Ye,Le),u.modelRange=pe.createRange(Le,Le.getShiftedBy(Ye.offsetSize)),u.modelCursor=u.modelRange.end}}function convertSelectionChange(me,u){return(t,de)=>{const pe=de.newSelection,Le=[];for(const tt of pe.getRanges())Le.push(u.toModelRange(tt));const Ye=me.createSelection(Le,{backward:pe.isBackward});Ye.isEqual(me.document.selection)||me.change(tt=>{tt.setSelection(Ye)})}}function upcastElementToElement(me){me=cloneDeep(me);const u=prepareToElementConverter(me),t=getViewElementNameFromConfig(me.view),de=t?`element:${t}`:"element";return pe=>{pe.on(de,u,{priority:me.converterPriority||"normal"})}}function upcastElementToAttribute(me){me=cloneDeep(me),normalizeModelAttributeConfig(me);const u=prepareToAttributeConverter(me,!1),t=getViewElementNameFromConfig(me.view),de=t?`element:${t}`:"element";return pe=>{pe.on(de,u,{priority:me.converterPriority||"low"})}}function upcastAttributeToAttribute(me){me=cloneDeep(me);let u=null;(typeof me.view=="string"||me.view.key)&&(u=normalizeViewAttributeKeyValueConfig(me)),normalizeModelAttributeConfig(me,u);const t=prepareToAttributeConverter(me,!0);return de=>{de.on("element",t,{priority:me.converterPriority||"low"})}}function upcastElementToMarker(me){const u=normalizeElementToMarkerModelConfig(me.model);return upcastElementToElement({...me,model:u})}function upcastDataToMarker(me){me=cloneDeep(me),me.model||(me.model=pe=>pe?me.view+":"+pe:me.view);const u={view:me.view,model:me.model},t=prepareToElementConverter(normalizeDataToMarkerConfig(u,"start")),de=prepareToElementConverter(normalizeDataToMarkerConfig(u,"end"));return pe=>{pe.on(`element:${me.view}-start`,t,{priority:me.converterPriority||"normal"}),pe.on(`element:${me.view}-end`,de,{priority:me.converterPriority||"normal"});const Le=priorities.low,Ye=priorities.highest,tt=priorities.get(me.converterPriority)/Ye;pe.on("element",upcastAttributeToMarker(u),{priority:Le+tt})}}function upcastAttributeToMarker(me){return(u,t,de)=>{const pe=`data-${me.view}`;if(!de.consumable.test(t.viewItem,{attributes:pe+"-end-after"})&&!de.consumable.test(t.viewItem,{attributes:pe+"-start-after"})&&!de.consumable.test(t.viewItem,{attributes:pe+"-end-before"})&&!de.consumable.test(t.viewItem,{attributes:pe+"-start-before"}))return;t.modelRange||Object.assign(t,de.convertChildren(t.viewItem,t.modelCursor)),de.consumable.consume(t.viewItem,{attributes:pe+"-end-after"})&&Le(t.modelRange.end,t.viewItem.getAttribute(pe+"-end-after").split(",")),de.consumable.consume(t.viewItem,{attributes:pe+"-start-after"})&&Le(t.modelRange.end,t.viewItem.getAttribute(pe+"-start-after").split(",")),de.consumable.consume(t.viewItem,{attributes:pe+"-end-before"})&&Le(t.modelRange.start,t.viewItem.getAttribute(pe+"-end-before").split(",")),de.consumable.consume(t.viewItem,{attributes:pe+"-start-before"})&&Le(t.modelRange.start,t.viewItem.getAttribute(pe+"-start-before").split(","));function Le(Ye,tt){for(const st of tt){const ht=me.model(st,de),mt=de.writer.createElement("$marker",{"data-name":ht});de.writer.insert(mt,Ye),t.modelCursor.isEqual(Ye)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(Ye,1),t.modelRange=t.modelRange._getTransformedByInsertion(Ye,1)[0]}}}}function getViewElementNameFromConfig(me){return typeof me=="string"?me:typeof me=="object"&&typeof me.name=="string"?me.name:null}function prepareToElementConverter(me){const u=new Matcher(me.view);return(t,de,pe)=>{const Le=u.match(de.viewItem);if(!Le)return;const Ye=Le.match;if(Ye.name=!0,!pe.consumable.test(de.viewItem,Ye))return;const tt=getModelElement(me.model,de.viewItem,pe);tt&&pe.safeInsert(tt,de.modelCursor)&&(pe.consumable.consume(de.viewItem,Ye),pe.convertChildren(de.viewItem,tt),pe.updateConversionResult(tt,de))}}function getModelElement(me,u,t){return me instanceof Function?me(u,t):t.writer.createElement(me)}function normalizeViewAttributeKeyValueConfig(me){typeof me.view=="string"&&(me.view={key:me.view});const u=me.view.key,t=typeof me.view.value>"u"?/[\s\S]*/:me.view.value;let de;return u=="class"||u=="style"?de={[u=="class"?"classes":"styles"]:t}:de={attributes:{[u]:t}},me.view.name&&(de.name=me.view.name),me.view=de,u}function normalizeModelAttributeConfig(me,u=null){const t=u===null?!0:Le=>Le.getAttribute(u),de=typeof me.model!="object"?me.model:me.model.key,pe=typeof me.model!="object"||typeof me.model.value>"u"?t:me.model.value;me.model={key:de,value:pe}}function prepareToAttributeConverter(me,u){const t=new Matcher(me.view);return(de,pe,Le)=>{if(!pe.modelRange&&u)return;const Ye=t.match(pe.viewItem);if(!Ye||(onlyViewNameIsDefined(me.view,pe.viewItem)?Ye.match.name=!0:delete Ye.match.name,!Le.consumable.test(pe.viewItem,Ye.match)))return;const tt=me.model.key,st=typeof me.model.value=="function"?me.model.value(pe.viewItem,Le):me.model.value;if(st===null)return;pe.modelRange||Object.assign(pe,Le.convertChildren(pe.viewItem,pe.modelCursor)),setAttributeOn(pe.modelRange,{key:tt,value:st},u,Le)&&(Le.consumable.test(pe.viewItem,{name:!0})&&(Ye.match.name=!0),Le.consumable.consume(pe.viewItem,Ye.match))}}function onlyViewNameIsDefined(me,u){const t=typeof me=="function"?me(u):me;return typeof t=="object"&&!getViewElementNameFromConfig(t)?!1:!t.classes&&!t.attributes&&!t.styles}function setAttributeOn(me,u,t,de){let pe=!1;for(const Le of Array.from(me.getItems({shallow:t})))de.schema.checkAttribute(Le,u.key)&&(pe=!0,!Le.hasAttribute(u.key)&&de.writer.setAttribute(u.key,u.value,Le));return pe}function normalizeElementToMarkerModelConfig(me){return(u,t)=>{const de=typeof me=="string"?me:me(u,t);return t.writer.createElement("$marker",{"data-name":de})}}function normalizeDataToMarkerConfig(me,u){const t=(de,pe)=>{const Le=de.getAttribute("name"),Ye=me.model(Le,pe);return pe.writer.createElement("$marker",{"data-name":Ye})};return{view:`${me.view}-${u}`,model:t}}function injectSelectionPostFixer(me){me.document.registerPostFixer(u=>selectionPostFixer(u,me))}function selectionPostFixer(me,u){const t=u.document.selection,de=u.schema,pe=[];let Le=!1;for(const Ye of t.getRanges()){const tt=tryFixingRange(Ye,de);tt&&!tt.isEqual(Ye)?(pe.push(tt),Le=!0):pe.push(Ye)}return Le&&me.setSelection(mergeIntersectingRanges(pe),{backward:t.isBackward}),!1}function tryFixingRange(me,u){return me.isCollapsed?tryFixingCollapsedRange(me,u):tryFixingNonCollapsedRage(me,u)}function tryFixingCollapsedRange(me,u){const t=me.start,de=u.getNearestSelectionRange(t);if(!de){const Le=t.getAncestors().reverse().find(Ye=>u.isObject(Ye));return Le?Range._createOn(Le):null}if(!de.isCollapsed)return de;const pe=de.start;return t.isEqual(pe)?null:new Range(pe)}function tryFixingNonCollapsedRage(me,u){const{start:t,end:de}=me,pe=u.checkChild(t,"$text"),Le=u.checkChild(de,"$text"),Ye=u.getLimitElement(t),tt=u.getLimitElement(de);if(Ye===tt){if(pe&&Le)return null;if(checkSelectionOnNonLimitElements(t,de,u)){const gt=t.nodeAfter&&u.isSelectable(t.nodeAfter)?null:u.getNearestSelectionRange(t,"forward"),_t=de.nodeBefore&&u.isSelectable(de.nodeBefore)?null:u.getNearestSelectionRange(de,"backward"),vt=gt?gt.start:t,Tt=_t?_t.end:de;return new Range(vt,Tt)}}const st=Ye&&!Ye.is("rootElement"),ht=tt&&!tt.is("rootElement");if(st||ht){const mt=t.nodeAfter&&de.nodeBefore&&t.nodeAfter.parent===de.nodeBefore.parent,gt=st&&(!mt||!isSelectable(t.nodeAfter,u)),bt=ht&&(!mt||!isSelectable(de.nodeBefore,u));let _t=t,vt=de;return gt&&(_t=Position._createBefore(findOutermostLimitAncestor(Ye,u))),bt&&(vt=Position._createAfter(findOutermostLimitAncestor(tt,u))),new Range(_t,vt)}return null}function findOutermostLimitAncestor(me,u){let t=me,de=t;for(;u.isLimit(de)&&de.parent;)t=de,de=de.parent;return t}function checkSelectionOnNonLimitElements(me,u,t){const de=me.nodeAfter&&!t.isLimit(me.nodeAfter)||t.checkChild(me,"$text"),pe=u.nodeBefore&&!t.isLimit(u.nodeBefore)||t.checkChild(u,"$text");return de||pe}function mergeIntersectingRanges(me){const u=[...me],t=new Set;let de=1;for(;de<u.length;){const Le=u[de],Ye=u.slice(0,de);for(const[tt,st]of Ye.entries())if(!t.has(tt)){if(Le.isEqual(st))t.add(tt);else if(Le.isIntersecting(st)){t.add(tt),t.add(de);const ht=Le.getJoined(st);u.push(ht)}}de++}return u.filter((Le,Ye)=>!t.has(Ye))}function isSelectable(me,u){return me&&u.isSelectable(me)}class EditingController extends ObservableMixin(){constructor(t,de){super();wt(this,"model");wt(this,"view");wt(this,"mapper");wt(this,"downcastDispatcher");this.model=t,this.view=new View$1(de),this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:t.schema});const pe=this.model.document,Le=pe.selection,Ye=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(pe,"change",()=>{this.view.change(tt=>{this.downcastDispatcher.convertChanges(pe.differ,Ye,tt),this.downcastDispatcher.convertSelection(Le,Ye,tt)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",convertSelectionChange(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",fixTargetRanges(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.downcastDispatcher.on("remove",remove$1(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",cleanSelection()),this.downcastDispatcher.on("selection",convertRangeSelection(),{priority:"low"}),this.downcastDispatcher.on("selection",convertCollapsedSelection(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(tt=>{if(tt.rootName=="$graveyard")return null;const st=new RootEditableElement(this.view.document,tt.name);return st.rootName=tt.rootName,this.mapper.bindElements(tt,st),st})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const de=typeof t=="string"?t:t.name,pe=this.model.markers.get(de);if(!pe)throw new CKEditorError("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:de});this.model.change(()=>{this.model.markers._refresh(pe)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}function fixTargetRanges(me,u,t){return(de,pe)=>{if(!(t.document.isComposing&&!env.isAndroid))for(let Le=0;Le<pe.targetRanges.length;Le++){const Ye=pe.targetRanges[Le],tt=me.toModelRange(Ye),st=tryFixingRange(tt,u);!st||st.isEqual(tt)||(pe.targetRanges[Le]=me.toViewRange(st))}}}class Schema extends ObservableMixin(){constructor(){super();wt(this,"_sourceDefinitions",{});wt(this,"_attributeProperties",Object.create(null));wt(this,"_customChildChecks",new Map);wt(this,"_customAttributeChecks",new Map);wt(this,"_genericCheckSymbol",Symbol("$generic"));wt(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,de)=>{de[0]=new SchemaContext(de[0])},{priority:"highest"}),this.on("checkChild",(t,de)=>{de[0]=new SchemaContext(de[0]),de[1]=this.getDefinition(de[1])},{priority:"highest"})}register(t,de){if(this._sourceDefinitions[t])throw new CKEditorError("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},de)],this._clearCache()}extend(t,de){if(!this._sourceDefinitions[t])throw new CKEditorError("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},de)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let de;return typeof t=="string"?de=t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?de="$text":de=t.name,this.getDefinitions()[de]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const de=this.getDefinition(t);return!!(de&&de.isBlock)}isLimit(t){const de=this.getDefinition(t);return de?!!(de.isLimit||de.isObject):!1}isObject(t){const de=this.getDefinition(t);return de?!!(de.isObject||de.isLimit&&de.isSelectable&&de.isContent):!1}isInline(t){const de=this.getDefinition(t);return!!(de&&de.isInline)}isSelectable(t){const de=this.getDefinition(t);return de?!!(de.isSelectable||de.isObject):!1}isContent(t){const de=this.getDefinition(t);return de?!!(de.isContent||de.isObject):!1}checkChild(t,de){return de?this._checkContextMatch(t,de):!1}checkAttribute(t,de){const pe=this.getDefinition(t.last);if(!pe)return!1;const Le=this._evaluateAttributeChecks(t,de);return Le!==void 0?Le:pe.allowAttributes.includes(de)}checkMerge(t,de){if(t instanceof Position){const pe=t.nodeBefore,Le=t.nodeAfter;if(!(pe instanceof Element))throw new CKEditorError("schema-check-merge-no-element-before",this);if(!(Le instanceof Element))throw new CKEditorError("schema-check-merge-no-element-after",this);return this.checkMerge(pe,Le)}if(this.isLimit(t)||this.isLimit(de))return!1;for(const pe of de.getChildren())if(!this.checkChild(t,pe))return!1;return!0}addChildCheck(t,de){const pe=de!==void 0?de:this._genericCheckSymbol,Le=this._customChildChecks.get(pe)||[];Le.push(t),this._customChildChecks.set(pe,Le)}addAttributeCheck(t,de){const pe=de!==void 0?de:this._genericCheckSymbol,Le=this._customAttributeChecks.get(pe)||[];Le.push(t),this._customAttributeChecks.set(pe,Le)}setAttributeProperties(t,de){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),de)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let de;for(t instanceof Position?de=t.parent:de=(t instanceof Range?[t]:Array.from(t.getRanges())).reduce((Le,Ye)=>{const tt=Ye.getCommonAncestor();return Le?Le.getCommonAncestor(tt,{includeSelf:!0}):tt},null);!this.isLimit(de)&&de.parent;)de=de.parent;return de}checkAttributeInSelection(t,de){if(t.isCollapsed){const Le=[...t.getFirstPosition().getAncestors(),new Text("",t.getAttributes())];return this.checkAttribute(Le,de)}else{const pe=t.getRanges();for(const Le of pe)for(const Ye of Le)if(this.checkAttribute(Ye.item,de))return!0}return!1}*getValidRanges(t,de){t=convertToMinimalFlatRanges(t);for(const pe of t)yield*this._getValidRangesForRange(pe,de)}getNearestSelectionRange(t,de="both"){if(t.root.rootName=="$graveyard")return null;if(this.checkChild(t,"$text"))return new Range(t);let pe,Le;const Ye=t.getAncestors().reverse().find(tt=>this.isLimit(tt))||t.root;(de=="both"||de=="backward")&&(pe=new TreeWalker({boundaries:Range._createIn(Ye),startPosition:t,direction:"backward"})),(de=="both"||de=="forward")&&(Le=new TreeWalker({boundaries:Range._createIn(Ye),startPosition:t}));for(const tt of combineWalkers(pe,Le)){const st=tt.walker==pe?"elementEnd":"elementStart",ht=tt.value;if(ht.type==st&&this.isObject(ht.item))return Range._createOn(ht.item);if(this.checkChild(ht.nextPosition,"$text"))return new Range(ht.nextPosition)}return null}findAllowedParent(t,de){let pe=t.parent;for(;pe;){if(this.checkChild(pe,de))return pe;if(this.isLimit(pe))return null;pe=pe.parent}return null}setAllowedAttributes(t,de,pe){const Le=pe.model;for(const[Ye,tt]of Object.entries(de))Le.schema.checkAttribute(t,Ye)&&pe.setAttribute(Ye,tt,t)}removeDisallowedAttributes(t,de){for(const pe of t)if(pe.is("$text"))removeDisallowedAttributeFromNode(this,pe,de);else{const Ye=Range._createIn(pe).getPositions();for(const tt of Ye){const st=tt.nodeBefore||tt.parent;removeDisallowedAttributeFromNode(this,st,de)}}}getAttributesWithProperty(t,de,pe){const Le={};for(const[Ye,tt]of t.getAttributes()){const st=this.getAttributeProperties(Ye);st[de]!==void 0&&(pe===void 0||pe===st[de])&&(Le[Ye]=tt)}return Le}createContext(t){return new SchemaContext(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},de=this._sourceDefinitions,pe=Object.keys(de);for(const Ye of pe)t[Ye]=compileBaseItemRule(de[Ye],Ye);const Le=Object.values(t);for(const Ye of Le)propagateAllowIn(t,Ye),propagateAllowChildren(t,Ye),propagateDisallowIn(t,Ye),propagateDisallowChildren(t,Ye);for(const Ye of Le)resolveDisallows(t,Ye);for(const Ye of Le)compileAllowContentOf(t,Ye);for(const Ye of Le)compileAllowWhere(t,Ye);for(const Ye of Le)compileAllowAttributesOf(t,Ye);for(const Ye of Le)compileInheritPropertiesFrom(t,Ye);this._compiledDefinitions=compileDefinitions(t)}_checkContextMatch(t,de){const pe=t.last;let Le=this._evaluateChildChecks(t,de);if(Le=Le!==void 0?Le:de.allowIn.includes(pe.name),!Le)return!1;const Ye=this.getDefinition(pe),tt=t.trimLast();return Ye?tt.length==0?!0:this._checkContextMatch(tt,Ye):!1}_evaluateChildChecks(t,de){const pe=this._customChildChecks.get(this._genericCheckSymbol)||[],Le=this._customChildChecks.get(de.name)||[];for(const Ye of[...pe,...Le]){const tt=Ye(t,de);if(tt!==void 0)return tt}}_evaluateAttributeChecks(t,de){const pe=this._customAttributeChecks.get(this._genericCheckSymbol)||[],Le=this._customAttributeChecks.get(de)||[];for(const Ye of[...pe,...Le]){const tt=Ye(t,de);if(tt!==void 0)return tt}}*_getValidRangesForRange(t,de){let pe=t.start,Le=t.start;for(const Ye of t.getItems({shallow:!0}))Ye.is("element")&&(yield*this._getValidRangesForRange(Range._createIn(Ye),de)),this.checkAttribute(Ye,de)||(pe.isEqual(Le)||(yield new Range(pe,Le)),pe=Position._createAfter(Ye)),Le=Position._createAfter(Ye);pe.isEqual(Le)||(yield new Range(pe,Le))}findOptimalInsertionRange(t,de){const pe=t.getSelectedElement();if(pe&&this.isObject(pe)&&!this.isInline(pe))return de=="before"||de=="after"?new Range(Position._createAt(pe,de)):Range._createOn(pe);const Le=first(t.getSelectedBlocks());if(!Le)return new Range(t.focus);if(Le.isEmpty)return new Range(Position._createAt(Le,0));const Ye=Position._createAfter(Le);return t.focus.isTouching(Ye)?new Range(Ye):new Range(Position._createBefore(Le))}}class SchemaContext{constructor(u){wt(this,"_items");if(u instanceof SchemaContext)return u;let t;typeof u=="string"?t=[u]:Array.isArray(u)?t=u:t=u.getAncestors({includeSelf:!0}),this._items=t.map(mapContextItem)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(u){const t=new SchemaContext([u]);return t._items=[...this._items,...t._items],t}trimLast(){const u=new SchemaContext([]);return u._items=this._items.slice(0,-1),u}getItem(u){return this._items[u]}*getNames(){yield*this._items.map(u=>u.name)}endsWith(u){return Array.from(this.getNames()).join(" ").endsWith(u)}startsWith(u){return Array.from(this.getNames()).join(" ").startsWith(u)}}function compileBaseItemRule(me,u){const t={name:u,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return copyTypes(me,t),copyProperty(me,t,"allowIn"),copyProperty(me,t,"allowChildren"),copyProperty(me,t,"disallowIn"),copyProperty(me,t,"disallowChildren"),copyProperty(me,t,"allowContentOf"),copyProperty(me,t,"allowWhere"),copyProperty(me,t,"allowAttributes"),copyProperty(me,t,"disallowAttributes"),copyProperty(me,t,"allowAttributesOf"),copyProperty(me,t,"inheritTypesFrom"),resolveInheritAll(me,t),t}function propagateAllowIn(me,u){for(const t of u.allowIn){const de=me[t];de?de.allowChildren.add(u.name):u.allowIn.delete(t)}}function propagateAllowChildren(me,u){for(const t of u.allowChildren){const de=me[t];de?de.allowIn.add(u.name):u.allowChildren.delete(t)}}function propagateDisallowIn(me,u){for(const t of u.disallowIn){const de=me[t];de?de.disallowChildren.add(u.name):u.disallowIn.delete(t)}}function propagateDisallowChildren(me,u){for(const t of u.disallowChildren){const de=me[t];de?de.disallowIn.add(u.name):u.disallowChildren.delete(t)}}function resolveDisallows(me,u){for(const t of u.disallowChildren)u.allowChildren.delete(t);for(const t of u.disallowIn)u.allowIn.delete(t);for(const t of u.disallowAttributes)u.allowAttributes.delete(t)}function compileAllowContentOf(me,u){for(const t of u.allowContentOf){const de=me[t];de&&(de.disallowChildren.forEach(pe=>{u.allowChildren.has(pe)||(u.disallowChildren.add(pe),me[pe].disallowIn.add(u.name))}),de.allowChildren.forEach(pe=>{u.disallowChildren.has(pe)||(u.allowChildren.add(pe),me[pe].allowIn.add(u.name))}))}}function compileAllowWhere(me,u){for(const t of u.allowWhere){const de=me[t];de&&(de.disallowIn.forEach(pe=>{u.allowIn.has(pe)||(u.disallowIn.add(pe),me[pe].disallowChildren.add(u.name))}),de.allowIn.forEach(pe=>{u.disallowIn.has(pe)||(u.allowIn.add(pe),me[pe].allowChildren.add(u.name))}))}}function compileDefinitions(me){const u={};for(const t of Object.values(me))u[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(de=>!!me[de]),allowChildren:Array.from(t.allowChildren).filter(de=>!!me[de]),allowAttributes:Array.from(t.allowAttributes)};return u}function compileAllowAttributesOf(me,u){for(const t of u.allowAttributesOf){const de=me[t];if(!de)return;de.allowAttributes.forEach(pe=>{u.disallowAttributes.has(pe)||u.allowAttributes.add(pe)})}}function compileInheritPropertiesFrom(me,u){for(const t of u.inheritTypesFrom){const de=me[t];if(de){const pe=Object.keys(de).filter(Le=>Le.startsWith("is"));for(const Le of pe)Le in u||(u[Le]=de[Le])}}}function copyTypes(me,u){for(const t of me){const de=Object.keys(t).filter(pe=>pe.startsWith("is"));for(const pe of de)u[pe]=!!t[pe]}}function copyProperty(me,u,t){for(const de of me){let pe=de[t];typeof pe=="string"&&(pe=[pe]),Array.isArray(pe)&&pe.forEach(Le=>u[t].add(Le))}}function resolveInheritAll(me,u){for(const t of me){const de=t.inheritAllFrom;de&&(u.allowContentOf.add(de),u.allowWhere.add(de),u.allowAttributesOf.add(de),u.inheritTypesFrom.add(de))}}function mapContextItem(me){return typeof me=="string"||me.is("documentFragment")?{name:typeof me=="string"?me:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:me.is("element")?me.name:"$text",*getAttributeKeys(){yield*me.getAttributeKeys()},getAttribute(u){return me.getAttribute(u)}}}function*combineWalkers(me,u){let t=!1;for(;!t;){if(t=!0,me){const de=me.next();de.done||(t=!1,yield{walker:me,value:de.value})}if(u){const de=u.next();de.done||(t=!1,yield{walker:u,value:de.value})}}}function*convertToMinimalFlatRanges(me){for(const u of me)yield*u.getMinimalFlatRanges()}function removeDisallowedAttributeFromNode(me,u,t){for(const de of u.getAttributeKeys())me.checkAttribute(u,de)||t.removeAttribute(de,u)}class UpcastDispatcher extends EmitterMixin(){constructor(t){super();wt(this,"conversionApi");wt(this,"_splitParts",new Map);wt(this,"_cursorParents",new Map);wt(this,"_modelCursor",null);wt(this,"_emptyElementsToKeep",new Set);this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(de,pe)=>this._convertItem(de,pe),convertChildren:(de,pe)=>this._convertChildren(de,pe),safeInsert:(de,pe)=>this._safeInsert(de,pe),updateConversionResult:(de,pe)=>this._updateConversionResult(de,pe),splitToAllowedParent:(de,pe)=>this._splitToAllowedParent(de,pe),getSplitParts:de=>this._getSplitParts(de),keepEmptyElement:de=>this._keepEmptyElement(de)}}convert(t,de,pe=["$root"]){this.fire("viewCleanup",t),this._modelCursor=createContextTree(pe,de),this.conversionApi.writer=de,this.conversionApi.consumable=ViewConsumable.createFrom(t),this.conversionApi.store={};const{modelRange:Le}=this._convertItem(t,this._modelCursor),Ye=de.createDocumentFragment();if(Le){this._removeEmptyElements();const tt=this._modelCursor.parent,st=tt._removeChildren(0,tt.childCount);Ye._insertChild(0,st),Ye.markers=extractMarkersFromModelFragment(Ye,de)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,Ye}_convertItem(t,de){const pe={viewItem:t,modelCursor:de,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,pe,this.conversionApi):t.is("$text")?this.fire("text",pe,this.conversionApi):this.fire("documentFragment",pe,this.conversionApi),pe.modelRange&&!(pe.modelRange instanceof Range))throw new CKEditorError("view-conversion-dispatcher-incorrect-result",this);return{modelRange:pe.modelRange,modelCursor:pe.modelCursor}}_convertChildren(t,de){let pe=de.is("position")?de:Position._createAt(de,0);const Le=new Range(pe);for(const Ye of Array.from(t.getChildren())){const tt=this._convertItem(Ye,pe);tt.modelRange instanceof Range&&(Le.end=tt.modelRange.end,pe=tt.modelCursor)}return{modelRange:Le,modelCursor:pe}}_safeInsert(t,de){const pe=this._splitToAllowedParent(t,de);return pe?(this.conversionApi.writer.insert(t,pe.position),!0):!1}_updateConversionResult(t,de){const pe=this._getSplitParts(t),Le=this.conversionApi.writer;de.modelRange||(de.modelRange=Le.createRange(Le.createPositionBefore(t),Le.createPositionAfter(pe[pe.length-1])));const Ye=this._cursorParents.get(t);Ye?de.modelCursor=Le.createPositionAt(Ye,0):de.modelCursor=de.modelRange.end}_splitToAllowedParent(t,de){const{schema:pe,writer:Le}=this.conversionApi;let Ye=pe.findAllowedParent(de,t);if(Ye){if(Ye===de.parent)return{position:de};this._modelCursor.parent.getAncestors().includes(Ye)&&(Ye=null)}if(!Ye)return isParagraphable(de,t,pe)?{position:wrapInParagraph(de,Le)}:null;const tt=this.conversionApi.writer.split(de,Ye),st=[];for(const mt of tt.range.getWalker())if(mt.type=="elementEnd")st.push(mt.item);else{const gt=st.pop(),bt=mt.item;this._registerSplitPair(gt,bt)}const ht=tt.range.end.parent;return this._cursorParents.set(t,ht),{position:tt.position,cursorParent:ht}}_registerSplitPair(t,de){this._splitParts.has(t)||this._splitParts.set(t,[t]);const pe=this._splitParts.get(t);this._splitParts.set(de,pe),pe.push(de)}_getSplitParts(t){let de;return this._splitParts.has(t)?de=this._splitParts.get(t):de=[t],de}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){const t=new Map;for(const de of this._splitParts.keys())if(de.isEmpty&&!this._emptyElementsToKeep.has(de)){const pe=t.get(de.parent)||[];pe.push(de),this._splitParts.delete(de),t.set(de.parent,pe)}for(const[de,pe]of t)de._removeChildrenArray(pe);t.size&&this._removeEmptyElements()}}function extractMarkersFromModelFragment(me,u){const t=new Set,de=new Map,pe=Range._createIn(me).getItems();for(const Le of pe)Le.is("element","$marker")&&t.add(Le);for(const Le of t){const Ye=Le.getAttribute("data-name"),tt=u.createPositionBefore(Le);de.has(Ye)?de.get(Ye).end=tt.clone():de.set(Ye,new Range(tt.clone())),u.remove(Le)}return de}function createContextTree(me,u){let t;for(const de of new SchemaContext(me)){const pe={};for(const Ye of de.getAttributeKeys())pe[Ye]=de.getAttribute(Ye);const Le=u.createElement(de.name,pe);t&&u.insert(Le,t),t=Position._createAt(Le,0)}return t}class BasicHtmlWriter{getHtml(u){const de=global$1.document.implementation.createHTMLDocument("").createElement("div");return de.appendChild(u),de.innerHTML}}class HtmlDataProcessor{constructor(u){wt(this,"domParser");wt(this,"domConverter");wt(this,"htmlWriter");wt(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new DomConverter(u,{renderingMode:"data"}),this.htmlWriter=new BasicHtmlWriter}toData(u){const t=this.domConverter.viewToDom(u);return this.htmlWriter.getHtml(t)}toView(u){const t=this._toDom(u);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(u){this.domConverter.registerRawContentMatcher(u)}useFillerType(u){this.domConverter.blockFillerMode=u=="marked"?"markedNbsp":"nbsp"}_toDom(u){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(u.trim().slice(0,1e4))||(u=`<body>${u}</body>`);const t=this.domParser.parseFromString(u,"text/html"),de=t.createDocumentFragment(),pe=t.body.childNodes;for(;pe.length>0;)de.appendChild(pe[0]);return de}}class DataController extends EmitterMixin(){constructor(t,de){super();wt(this,"model");wt(this,"mapper");wt(this,"downcastDispatcher");wt(this,"upcastDispatcher");wt(this,"viewDocument");wt(this,"stylesProcessor");wt(this,"htmlProcessor");wt(this,"processor");wt(this,"_viewWriter");this.model=t,this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.upcastDispatcher=new UpcastDispatcher({schema:t.schema}),this.viewDocument=new Document$1(de),this.stylesProcessor=de,this.htmlProcessor=new HtmlDataProcessor(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new DowncastWriter(this.viewDocument),this.upcastDispatcher.on("text",convertText(),{priority:"lowest"}),this.upcastDispatcher.on("element",convertToModelFragment$1(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",convertToModelFragment$1(),{priority:"lowest"}),ObservableMixin().prototype.decorate.call(this,"init"),ObservableMixin().prototype.decorate.call(this,"set"),ObservableMixin().prototype.decorate.call(this,"get"),ObservableMixin().prototype.decorate.call(this,"toView"),ObservableMixin().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},autoParagraphEmptyRoots)},{priority:"lowest"})}get(t={}){const{rootName:de="main",trim:pe="empty"}=t;if(!this._checkIfRootsExists([de]))throw new CKEditorError("datacontroller-get-non-existent-root",this);const Le=this.model.document.getRoot(de);return Le.isAttached()||logWarning("datacontroller-get-detached-root",this),pe==="empty"&&!this.model.hasContent(Le,{ignoreWhitespaces:!0})?"":this.stringify(Le,t)}stringify(t,de={}){const pe=this.toView(t,de);return this.processor.toData(pe)}toView(t,de={}){const pe=this.viewDocument,Le=this._viewWriter;this.mapper.clearBindings();const Ye=Range._createIn(t),tt=new DocumentFragment$1(pe);this.mapper.bindElements(t,tt);const st=t.is("documentFragment")?t.markers:_getMarkersRelativeToElement(t);return this.downcastDispatcher.convert(Ye,st,Le,de),tt}init(t){if(this.model.document.version)throw new CKEditorError("datacontroller-init-document-not-empty",this);let de={};if(typeof t=="string"?de.main=t:de=t,!this._checkIfRootsExists(Object.keys(de)))throw new CKEditorError("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},pe=>{for(const Le of Object.keys(de)){const Ye=this.model.document.getRoot(Le);pe.insert(this.parse(de[Le],Ye),Ye,0)}}),Promise.resolve()}set(t,de={}){let pe={};if(typeof t=="string"?pe.main=t:pe=t,!this._checkIfRootsExists(Object.keys(pe)))throw new CKEditorError("datacontroller-set-non-existent-root",this);this.model.enqueueChange(de.batchType||{},Le=>{Le.setSelection(null),Le.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const Ye of Object.keys(pe)){const tt=this.model.document.getRoot(Ye);Le.remove(Le.createRangeIn(tt)),Le.insert(this.parse(pe[Ye],tt),tt,0)}})}parse(t,de="$root"){const pe=this.processor.toView(t);return this.toModel(pe,de)}toModel(t,de="$root"){return this.model.change(pe=>this.upcastDispatcher.convert(t,pe,de))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const de of t)if(!this.model.document.getRoot(de))return!1;return!0}}function _getMarkersRelativeToElement(me){const u=[],t=me.root.document;if(!t)return new Map;const de=Range._createIn(me);for(const pe of t.model.markers){const Le=pe.getRange(),Ye=Le.isCollapsed,tt=Le.start.isEqual(de.start)||Le.end.isEqual(de.end);if(Ye&&tt)u.push([pe.name,Le]);else{const st=de.getIntersection(Le);st&&u.push([pe.name,st])}}return u.sort(([pe,Le],[Ye,tt])=>{if(Le.end.compareWith(tt.start)!=="after")return 1;if(Le.start.compareWith(tt.end)!=="before")return-1;switch(Le.start.compareWith(tt.start)){case"before":return 1;case"after":return-1;default:switch(Le.end.compareWith(tt.end)){case"before":return 1;case"after":return-1;default:return Ye.localeCompare(pe)}}}),new Map(u)}class Conversion{constructor(u,t){wt(this,"_helpers",new Map);wt(this,"_downcast");wt(this,"_upcast");this._downcast=toArray$2(u),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=toArray$2(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(u,t){const de=this._downcast.includes(t);if(!this._upcast.includes(t)&&!de)throw new CKEditorError("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:u,dispatchers:[t],isDowncast:de})}for(u){if(!this._helpers.has(u))throw new CKEditorError("conversion-for-unknown-group",this);return this._helpers.get(u)}elementToElement(u){this.for("downcast").elementToElement(u);for(const{model:t,view:de}of _getAllUpcastDefinitions(u))this.for("upcast").elementToElement({model:t,view:de,converterPriority:u.converterPriority})}attributeToElement(u){this.for("downcast").attributeToElement(u);for(const{model:t,view:de}of _getAllUpcastDefinitions(u))this.for("upcast").elementToAttribute({view:de,model:t,converterPriority:u.converterPriority})}attributeToAttribute(u){this.for("downcast").attributeToAttribute(u);for(const{model:t,view:de}of _getAllUpcastDefinitions(u))this.for("upcast").attributeToAttribute({view:de,model:t})}_createConversionHelpers({name:u,dispatchers:t,isDowncast:de}){if(this._helpers.has(u))throw new CKEditorError("conversion-group-exists",this);const pe=de?new DowncastHelpers(t):new UpcastHelpers(t);this._helpers.set(u,pe)}}function*_getAllUpcastDefinitions(me){if(me.model.values)for(const u of me.model.values){const t={key:me.model.key,value:u},de=me.view[u],pe=me.upcastAlso?me.upcastAlso[u]:void 0;yield*_getUpcastDefinition(t,de,pe)}else yield*_getUpcastDefinition(me.model,me.view,me.upcastAlso)}function*_getUpcastDefinition(me,u,t){if(yield{model:me,view:u},t)for(const de of toArray$2(t))yield{model:me,view:de}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Operation{constructor(u){wt(this,"baseVersion");wt(this,"isDocumentOperation");wt(this,"batch");this.baseVersion=u,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const u=Object.assign({},this);return u.__className=this.constructor.className,delete u.batch,delete u.isDocumentOperation,u}static get className(){return"Operation"}static fromJSON(u,t){return new this(u.baseVersion)}}function _insert(me,u){const t=_normalizeNodes(u),de=t.reduce((Ye,tt)=>Ye+tt.offsetSize,0),pe=me.parent;_splitNodeAtPosition(me);const Le=me.index;return pe._insertChild(Le,t),_mergeNodesAtIndex(pe,Le+t.length),_mergeNodesAtIndex(pe,Le),new Range(me,me.getShiftedBy(de))}function _remove(me){if(!me.isFlat)throw new CKEditorError("operation-utils-remove-range-not-flat",this);const u=me.start.parent;_splitNodeAtPosition(me.start),_splitNodeAtPosition(me.end);const t=u._removeChildren(me.start.index,me.end.index-me.start.index);return _mergeNodesAtIndex(u,me.start.index),t}function _move(me,u){if(!me.isFlat)throw new CKEditorError("operation-utils-move-range-not-flat",this);const t=_remove(me);return u=u._getTransformedByDeletion(me.start,me.end.offset-me.start.offset),_insert(u,t)}function _setAttribute(me,u,t){_splitNodeAtPosition(me.start),_splitNodeAtPosition(me.end);for(const de of me.getItems({shallow:!0})){const pe=de.is("$textProxy")?de.textNode:de;t!==null?pe._setAttribute(u,t):pe._removeAttribute(u),_mergeNodesAtIndex(pe.parent,pe.index)}_mergeNodesAtIndex(me.end.parent,me.end.index)}function _normalizeNodes(me){const u=[];function t(de){if(typeof de=="string")u.push(new Text(de));else if(de instanceof TextProxy)u.push(new Text(de.data,de.getAttributes()));else if(de instanceof Node$1)u.push(de);else if(isIterable(de))for(const pe of de)t(pe)}t(me);for(let de=1;de<u.length;de++){const pe=u[de],Le=u[de-1];pe instanceof Text&&Le instanceof Text&&_haveSameAttributes(pe,Le)&&(u.splice(de-1,2,new Text(Le.data+pe.data,Le.getAttributes())),de--)}return u}function _mergeNodesAtIndex(me,u){const t=me.getChild(u-1),de=me.getChild(u);if(t&&de&&t.is("$text")&&de.is("$text")&&_haveSameAttributes(t,de)){const pe=new Text(t.data+de.data,t.getAttributes());me._removeChildren(u-1,2),me._insertChild(u-1,pe)}}function _splitNodeAtPosition(me){const u=me.textNode,t=me.parent;if(u){const de=me.offset-u.startOffset,pe=u.index;t._removeChildren(pe,1);const Le=new Text(u.data.substr(0,de),u.getAttributes()),Ye=new Text(u.data.substr(de),u.getAttributes());t._insertChild(pe,[Le,Ye])}}function _haveSameAttributes(me,u){const t=me.getAttributes(),de=u.getAttributes();for(const pe of t){if(pe[1]!==u.getAttribute(pe[0]))return!1;de.next()}return de.next().done}class MoveOperation extends Operation{constructor(t,de,pe,Le){super(Le);wt(this,"sourcePosition");wt(this,"howMany");wt(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=de,this.targetPosition=pe.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Range._createFromPositionAndShift(this.sourcePosition,this.howMany),Range._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new MoveOperation(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new MoveOperation(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,de=this.targetPosition.parent,pe=this.sourcePosition.offset,Le=this.targetPosition.offset;if(pe+this.howMany>t.maxOffset)throw new CKEditorError("move-operation-nodes-do-not-exist",this);if(t===de&&pe<Le&&Le<pe+this.howMany)throw new CKEditorError("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&compareArrays(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const Ye=this.sourcePosition.path.length-1;if(this.targetPosition.path[Ye]>=pe&&this.targetPosition.path[Ye]<pe+this.howMany)throw new CKEditorError("move-operation-node-into-itself",this)}}_execute(){_move(Range._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,de){const pe=Position.fromJSON(t.sourcePosition,de),Le=Position.fromJSON(t.targetPosition,de);return new this(pe,t.howMany,Le,t.baseVersion)}}class InsertOperation extends Operation{constructor(t,de,pe){super(pe);wt(this,"position");wt(this,"nodes");wt(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new NodeList(_normalizeNodes(de)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new NodeList([...this.nodes].map(pe=>pe._clone(!0))),de=new InsertOperation(this.position,t,this.baseVersion);return de.shouldReceiveAttributes=this.shouldReceiveAttributes,de}getReversed(){const t=this.position.root.document.graveyard,de=new Position(t,[0]);return new MoveOperation(this.position,this.nodes.maxOffset,de,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new CKEditorError("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new NodeList([...t].map(de=>de._clone(!0))),_insert(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,de){const pe=[];for(const Ye of t.nodes)Ye.name?pe.push(Element.fromJSON(Ye)):pe.push(Text.fromJSON(Ye));const Le=new InsertOperation(Position.fromJSON(t.position,de),pe,t.baseVersion);return Le.shouldReceiveAttributes=t.shouldReceiveAttributes,Le}}class SplitOperation extends Operation{constructor(t,de,pe,Le,Ye){super(Ye);wt(this,"splitPosition");wt(this,"howMany");wt(this,"insertionPosition");wt(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=de,this.insertionPosition=pe,this.graveyardPosition=Le?Le.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Position(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.splitPosition,t)}get affectedSelectable(){const t=[Range._createFromPositionAndShift(this.splitPosition,0),Range._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Range._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new SplitOperation(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,de=new Position(t,[0]);return new MergeOperation(this.moveTargetPosition,this.howMany,this.splitPosition,de,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,de=this.splitPosition.offset;if(!t||t.maxOffset<de)throw new CKEditorError("split-operation-position-invalid",this);if(t.parent){if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new CKEditorError("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new CKEditorError("split-operation-graveyard-position-invalid",this)}else throw new CKEditorError("split-operation-split-in-root",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)_move(Range._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const pe=t._clone();_insert(this.insertionPosition,pe)}const de=new Range(Position._createAt(t,this.splitPosition.offset),Position._createAt(t,t.maxOffset));_move(de,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const de=t.path.slice(0,-1);return de[de.length-1]++,new Position(t.root,de,"toPrevious")}static fromJSON(t,de){const pe=Position.fromJSON(t.splitPosition,de),Le=Position.fromJSON(t.insertionPosition,de),Ye=t.graveyardPosition?Position.fromJSON(t.graveyardPosition,de):null;return new this(pe,t.howMany,Le,Ye,t.baseVersion)}}class MergeOperation extends Operation{constructor(t,de,pe,Le,Ye){super(Ye);wt(this,"sourcePosition");wt(this,"howMany");wt(this,"targetPosition");wt(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=de,this.targetPosition=pe.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=Le.clone()}get type(){return"merge"}get deletionPosition(){return new Position(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Range._createOn(t),Range._createFromPositionAndShift(this.targetPosition,0),Range._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new MergeOperation(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),de=this.sourcePosition.path.slice(0,-1),pe=new Position(this.sourcePosition.root,de)._getTransformedByMergeOperation(this);return new SplitOperation(t,this.howMany,pe,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,de=this.targetPosition.parent;if(t.parent)if(de.parent){if(this.howMany!=t.maxOffset)throw new CKEditorError("merge-operation-how-many-invalid",this)}else throw new CKEditorError("merge-operation-target-position-invalid",this);else throw new CKEditorError("merge-operation-source-position-invalid",this)}_execute(){const t=this.sourcePosition.parent,de=Range._createIn(t);_move(de,this.targetPosition),_move(Range._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,de){const pe=Position.fromJSON(t.sourcePosition,de),Le=Position.fromJSON(t.targetPosition,de),Ye=Position.fromJSON(t.graveyardPosition,de);return new this(pe,t.howMany,Le,Ye,t.baseVersion)}}class MarkerOperation extends Operation{constructor(t,de,pe,Le,Ye,tt){super(tt);wt(this,"name");wt(this,"oldRange");wt(this,"newRange");wt(this,"affectsData");wt(this,"_markers");this.name=t,this.oldRange=de?de.clone():null,this.newRange=pe?pe.clone():null,this.affectsData=Ye,this._markers=Le}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new MarkerOperation(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new MarkerOperation(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,de){return new MarkerOperation(t.name,t.oldRange?Range.fromJSON(t.oldRange,de):null,t.newRange?Range.fromJSON(t.newRange,de):null,de.model.markers,t.affectsData,t.baseVersion)}}class AttributeOperation extends Operation{constructor(t,de,pe,Le,Ye){super(Ye);wt(this,"range");wt(this,"key");wt(this,"oldValue");wt(this,"newValue");this.range=t.clone(),this.key=de,this.oldValue=pe===void 0?null:pe,this.newValue=Le===void 0?null:Le}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new AttributeOperation(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new AttributeOperation(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new CKEditorError("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!isEqual(t.getAttribute(this.key),this.oldValue))throw new CKEditorError("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new CKEditorError("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){isEqual(this.oldValue,this.newValue)||_setAttribute(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,de){return new AttributeOperation(Range.fromJSON(t.range,de),t.key,t.oldValue,t.newValue,t.baseVersion)}}class NoOperation extends Operation{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new NoOperation(this.baseVersion)}getReversed(){return new NoOperation(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class RenameOperation extends Operation{constructor(t,de,pe,Le){super(Le);wt(this,"position");wt(this,"oldName");wt(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=de,this.newName=pe}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new RenameOperation(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new RenameOperation(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof Element){if(t.name!==this.oldName)throw new CKEditorError("rename-operation-wrong-name",this)}else throw new CKEditorError("rename-operation-wrong-position",this)}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,de){return new RenameOperation(Position.fromJSON(t.position,de),t.oldName,t.newName,t.baseVersion)}}class RootAttributeOperation extends Operation{constructor(t,de,pe,Le,Ye){super(Ye);wt(this,"root");wt(this,"key");wt(this,"oldValue");wt(this,"newValue");this.root=t,this.key=de,this.oldValue=pe===void 0?null:pe,this.newValue=Le===void 0?null:Le}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new RootAttributeOperation(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new RootAttributeOperation(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new CKEditorError("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new CKEditorError("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new CKEditorError("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,de){if(!de.getRoot(t.root))throw new CKEditorError("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new RootAttributeOperation(de.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class RootOperation extends Operation{constructor(t,de,pe,Le,Ye){super(Ye);wt(this,"rootName");wt(this,"elementName");wt(this,"isAdd");wt(this,"_document");if(this.rootName=t,this.elementName=de,this.isAdd=pe,this._document=Le,!this._document.getRoot(this.rootName)){const tt=this._document.createRoot(this.elementName,this.rootName);tt._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new RootOperation(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new RootOperation(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,de){return new RootOperation(t.rootName,t.elementName,t.isAdd,de,t.baseVersion)}}const operations={};operations[AttributeOperation.className]=AttributeOperation;operations[InsertOperation.className]=InsertOperation;operations[MarkerOperation.className]=MarkerOperation;operations[MoveOperation.className]=MoveOperation;operations[NoOperation.className]=NoOperation;operations[Operation.className]=Operation;operations[RenameOperation.className]=RenameOperation;operations[RootAttributeOperation.className]=RootAttributeOperation;operations[RootOperation.className]=RootOperation;operations[SplitOperation.className]=SplitOperation;operations[MergeOperation.className]=MergeOperation;class OperationFactory{static fromJSON(u,t){return operations[u.__className].fromJSON(u,t)}}const transformations=new Map;function setTransformation(me,u,t){let de=transformations.get(me);de||(de=new Map,transformations.set(me,de)),de.set(u,t)}function getTransformation(me,u){const t=transformations.get(me);return t&&t.has(u)?t.get(u):noUpdateTransformation}function noUpdateTransformation(me){return[me]}function transform$1(me,u,t={}){const de=getTransformation(me.constructor,u.constructor);try{return me=me.clone(),de(me,u,t)}catch(pe){throw pe}}function transformSets(me,u,t){me=me.slice(),u=u.slice();const de=new ContextFactory(t.document,t.useRelations,t.forceWeakRemove);de.setOriginalOperations(me),de.setOriginalOperations(u);const pe=de.originalOperations;if(me.length==0||u.length==0)return{operationsA:me,operationsB:u,originalOperations:pe};const Le=new WeakMap;for(const st of me)Le.set(st,0);const Ye={nextBaseVersionA:me[me.length-1].baseVersion+1,nextBaseVersionB:u[u.length-1].baseVersion+1,originalOperationsACount:me.length,originalOperationsBCount:u.length};let tt=0;for(;tt<me.length;){const st=me[tt],ht=Le.get(st);if(ht==u.length){tt++;continue}const mt=u[ht],gt=transform$1(st,mt,de.getContext(st,mt,!0)),bt=transform$1(mt,st,de.getContext(mt,st,!1));de.updateRelation(st,mt),de.setOriginalOperations(gt,st),de.setOriginalOperations(bt,mt);for(const _t of gt)Le.set(_t,ht+bt.length);me.splice(tt,1,...gt),u.splice(ht,1,...bt)}return handlePartialMarkerOperations(me),handlePartialMarkerOperations(u),updateBaseVersions(me,Ye.nextBaseVersionB),updateBaseVersions(u,Ye.nextBaseVersionA),{operationsA:me,operationsB:u,originalOperations:pe}}class ContextFactory{constructor(u,t,de=!1){wt(this,"originalOperations");wt(this,"_history");wt(this,"_useRelations");wt(this,"_forceWeakRemove");wt(this,"_relations");this.originalOperations=new Map,this._history=u.history,this._useRelations=t,this._forceWeakRemove=!!de,this._relations=new Map}setOriginalOperations(u,t=null){const de=t?this.originalOperations.get(t):null;for(const pe of u)this.originalOperations.set(pe,de||pe)}updateRelation(u,t){if(u instanceof MoveOperation)t instanceof MergeOperation?u.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(u.targetPosition)?this._setRelation(u,t,"insertAtSource"):u.targetPosition.isEqual(t.deletionPosition)?this._setRelation(u,t,"insertBetween"):u.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(u,t,"moveTargetAfter"):t instanceof MoveOperation&&(u.targetPosition.isEqual(t.sourcePosition)||u.targetPosition.isBefore(t.sourcePosition)?this._setRelation(u,t,"insertBefore"):this._setRelation(u,t,"insertAfter"));else if(u instanceof SplitOperation){if(t instanceof MergeOperation)u.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(u,t,"splitBefore");else if(t instanceof MoveOperation)if(u.splitPosition.isEqual(t.sourcePosition)||u.splitPosition.isBefore(t.sourcePosition))this._setRelation(u,t,"splitBefore");else{const de=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);if(u.splitPosition.hasSameParentAs(t.sourcePosition)&&de.containsPosition(u.splitPosition)){const pe=de.end.offset-u.splitPosition.offset,Le=u.splitPosition.offset-de.start.offset;this._setRelation(u,t,{howMany:pe,offset:Le})}}}else if(u instanceof MergeOperation)t instanceof MergeOperation?(u.targetPosition.isEqual(t.sourcePosition)||this._setRelation(u,t,"mergeTargetNotMoved"),u.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(u,t,"mergeSourceNotMoved"),u.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(u,t,"mergeSameElement")):t instanceof SplitOperation?u.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(u,t,"splitAtSource"):t instanceof MoveOperation&&t.howMany>0&&(u.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(u,t,"mergeSourceAffected"),u.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(u,t,"mergeTargetWasBefore"));else if(u instanceof MarkerOperation){const de=u.newRange;if(!de)return;if(t instanceof MergeOperation){const pe=de.start.isEqual(t.targetPosition),Le=de.start.isEqual(t.deletionPosition),Ye=de.end.isEqual(t.deletionPosition),tt=de.end.isEqual(t.sourcePosition);(pe||Le||Ye||tt)&&this._setRelation(u,t,{wasInLeftElement:pe,wasStartBeforeMergedElement:Le,wasEndBeforeMergedElement:Ye,wasInRightElement:tt})}}}getContext(u,t,de){return{aIsStrong:de,aWasUndone:this._wasUndone(u),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(u,t):null,baRelation:this._useRelations?this._getRelation(t,u):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(u){const t=this.originalOperations.get(u);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(u,t){const de=this.originalOperations.get(t),pe=this._history.getUndoneOperation(de);if(!pe)return null;const Le=this.originalOperations.get(u),Ye=this._relations.get(Le);return Ye&&Ye.get(pe)||null}_setRelation(u,t,de){const pe=this.originalOperations.get(u),Le=this.originalOperations.get(t);let Ye=this._relations.get(pe);Ye||(Ye=new Map,this._relations.set(pe,Ye)),Ye.set(Le,de)}}function updateBaseVersions(me,u){for(const t of me)t.baseVersion=u++}function handlePartialMarkerOperations(me){const u=new Map;for(let t=0;t<me.length;t++){const de=me[t];de instanceof MarkerOperation&&(de.baseVersion!==-1?u.set(de.name,{op:de,ranges:de.newRange?[de.newRange]:[]}):(de.newRange&&u.get(de.name).ranges.push(de.newRange),me.splice(t,1),t--))}for(const{op:t,ranges:de}of u.values())de.length?t.newRange=Range._createFromRanges(de):t.newRange=null}setTransformation(AttributeOperation,AttributeOperation,(me,u,t)=>{if(me.key===u.key&&me.range.start.hasSameParentAs(u.range.start)){const de=me.range.getDifference(u.range).map(Le=>new AttributeOperation(Le,me.key,me.oldValue,me.newValue,0)),pe=me.range.getIntersection(u.range);return pe&&t.aIsStrong&&de.push(new AttributeOperation(pe,u.key,u.newValue,me.newValue,0)),de.length==0?[new NoOperation(0)]:de}else return[me]});setTransformation(AttributeOperation,InsertOperation,(me,u)=>{if(me.range.start.hasSameParentAs(u.position)&&me.range.containsPosition(u.position)){const de=me.range._getTransformedByInsertion(u.position,u.howMany,!u.shouldReceiveAttributes).map(pe=>new AttributeOperation(pe,me.key,me.oldValue,me.newValue,me.baseVersion));if(u.shouldReceiveAttributes){const pe=_getComplementaryAttributeOperations(u,me.key,me.oldValue);pe&&de.unshift(pe)}return de}return me.range=me.range._getTransformedByInsertion(u.position,u.howMany,!1)[0],[me]});function _getComplementaryAttributeOperations(me,u,t){const pe=me.nodes.getNode(0).getAttribute(u);if(pe==t)return null;const Le=new Range(me.position,me.position.getShiftedBy(me.howMany));return new AttributeOperation(Le,u,pe,t,0)}setTransformation(AttributeOperation,MergeOperation,(me,u)=>{const t=[];me.range.start.hasSameParentAs(u.deletionPosition)&&(me.range.containsPosition(u.deletionPosition)||me.range.start.isEqual(u.deletionPosition))&&t.push(Range._createFromPositionAndShift(u.graveyardPosition,1));const de=me.range._getTransformedByMergeOperation(u);return de.isCollapsed||t.push(de),t.map(pe=>new AttributeOperation(pe,me.key,me.oldValue,me.newValue,me.baseVersion))});setTransformation(AttributeOperation,MoveOperation,(me,u)=>_breakRangeByMoveOperation(me.range,u).map(de=>new AttributeOperation(de,me.key,me.oldValue,me.newValue,me.baseVersion)));function _breakRangeByMoveOperation(me,u){const t=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);let de=null,pe=[];t.containsRange(me,!0)?de=me:me.start.hasSameParentAs(t.start)?(pe=me.getDifference(t),de=me.getIntersection(t)):pe=[me];const Le=[];for(let Ye of pe){Ye=Ye._getTransformedByDeletion(u.sourcePosition,u.howMany);const tt=u.getMovedRangeStart(),st=Ye.start.hasSameParentAs(tt),ht=Ye._getTransformedByInsertion(tt,u.howMany,st);Le.push(...ht)}return de&&Le.push(de._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany,!1)[0]),Le}setTransformation(AttributeOperation,SplitOperation,(me,u)=>{if(me.range.end.isEqual(u.insertionPosition))return u.graveyardPosition||me.range.end.offset++,[me];if(me.range.start.hasSameParentAs(u.splitPosition)&&me.range.containsPosition(u.splitPosition)){const t=me.clone();return t.range=new Range(u.moveTargetPosition.clone(),me.range.end._getCombined(u.splitPosition,u.moveTargetPosition)),me.range.end=u.splitPosition.clone(),me.range.end.stickiness="toPrevious",[me,t]}return me.range=me.range._getTransformedBySplitOperation(u),[me]});setTransformation(InsertOperation,AttributeOperation,(me,u)=>{const t=[me];if(me.shouldReceiveAttributes&&me.position.hasSameParentAs(u.range.start)&&u.range.containsPosition(me.position)){const de=_getComplementaryAttributeOperations(me,u.key,u.newValue);de&&t.push(de)}return t});setTransformation(InsertOperation,InsertOperation,(me,u,t)=>me.position.isEqual(u.position)&&t.aIsStrong?[me]:(me.position=me.position._getTransformedByInsertOperation(u),[me]));setTransformation(InsertOperation,MoveOperation,(me,u)=>(me.position=me.position._getTransformedByMoveOperation(u),[me]));setTransformation(InsertOperation,SplitOperation,(me,u)=>(me.position=me.position._getTransformedBySplitOperation(u),[me]));setTransformation(InsertOperation,MergeOperation,(me,u)=>(me.position=me.position._getTransformedByMergeOperation(u),[me]));setTransformation(MarkerOperation,InsertOperation,(me,u)=>(me.oldRange&&(me.oldRange=me.oldRange._getTransformedByInsertOperation(u)[0]),me.newRange&&(me.newRange=me.newRange._getTransformedByInsertOperation(u)[0]),[me]));setTransformation(MarkerOperation,MarkerOperation,(me,u,t)=>{if(me.name==u.name)if(t.aIsStrong)me.oldRange=u.newRange?u.newRange.clone():null;else return[new NoOperation(0)];return[me]});setTransformation(MarkerOperation,MergeOperation,(me,u)=>(me.oldRange&&(me.oldRange=me.oldRange._getTransformedByMergeOperation(u)),me.newRange&&(me.newRange=me.newRange._getTransformedByMergeOperation(u)),[me]));setTransformation(MarkerOperation,MoveOperation,(me,u)=>{const t=[me];if(me.oldRange&&(me.oldRange=Range._createFromRanges(me.oldRange._getTransformedByMoveOperation(u))),me.newRange){const de=me.newRange._getTransformedByMoveOperation(u);me.newRange=de[0];for(let pe=1;pe<de.length;pe++){const Le=me.clone();Le.oldRange=null,Le.newRange=de[pe],Le.baseVersion=-1,t.push(Le)}}return t});setTransformation(MarkerOperation,SplitOperation,(me,u,t)=>{if(me.oldRange&&(me.oldRange=me.oldRange._getTransformedBySplitOperation(u)),me.newRange){if(t.abRelation){const de=me.newRange._getTransformedBySplitOperation(u);return me.newRange.start.isEqual(u.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?me.newRange.start=Position._createAt(u.insertionPosition):me.newRange.start.isEqual(u.splitPosition)&&!t.abRelation.wasInLeftElement?me.newRange.start=Position._createAt(u.moveTargetPosition):me.newRange.start=de.start,me.newRange.end.isEqual(u.splitPosition)&&t.abRelation.wasInRightElement?me.newRange.end=Position._createAt(u.moveTargetPosition):me.newRange.end.isEqual(u.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?me.newRange.end=Position._createAt(u.insertionPosition):me.newRange.end=de.end,[me]}me.newRange=me.newRange._getTransformedBySplitOperation(u)}return[me]});setTransformation(MergeOperation,InsertOperation,(me,u)=>(me.sourcePosition.hasSameParentAs(u.position)&&(me.howMany+=u.howMany),me.sourcePosition=me.sourcePosition._getTransformedByInsertOperation(u),me.targetPosition=me.targetPosition._getTransformedByInsertOperation(u),[me]));setTransformation(MergeOperation,MergeOperation,(me,u,t)=>{if(me.sourcePosition.isEqual(u.sourcePosition)&&me.targetPosition.isEqual(u.targetPosition))if(t.bWasUndone){const de=u.graveyardPosition.path.slice();return de.push(0),me.sourcePosition=new Position(u.graveyardPosition.root,de),me.howMany=0,[me]}else return[new NoOperation(0)];if(me.sourcePosition.isEqual(u.sourcePosition)&&!me.targetPosition.isEqual(u.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const de=me.targetPosition.root.rootName=="$graveyard",pe=u.targetPosition.root.rootName=="$graveyard";if(pe&&!de||!(de&&!pe)&&t.aIsStrong){const st=u.targetPosition._getTransformedByMergeOperation(u),ht=me.targetPosition._getTransformedByMergeOperation(u);return[new MoveOperation(st,me.howMany,ht,0)]}else return[new NoOperation(0)]}return me.sourcePosition.hasSameParentAs(u.targetPosition)&&(me.howMany+=u.howMany),me.sourcePosition=me.sourcePosition._getTransformedByMergeOperation(u),me.targetPosition=me.targetPosition._getTransformedByMergeOperation(u),(!me.graveyardPosition.isEqual(u.graveyardPosition)||!t.aIsStrong)&&(me.graveyardPosition=me.graveyardPosition._getTransformedByMergeOperation(u)),[me]});setTransformation(MergeOperation,MoveOperation,(me,u,t)=>{const de=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);return u.type=="remove"&&!t.bWasUndone&&me.deletionPosition.hasSameParentAs(u.sourcePosition)&&de.containsPosition(me.sourcePosition)?[new NoOperation(0)]:(u.sourcePosition.getShiftedBy(u.howMany).isEqual(me.sourcePosition)?me.sourcePosition.stickiness="toNone":u.targetPosition.isEqual(me.sourcePosition)&&t.abRelation=="mergeSourceAffected"?me.sourcePosition.stickiness="toNext":u.sourcePosition.isEqual(me.targetPosition)?(me.targetPosition.stickiness="toNone",me.howMany-=u.howMany):u.targetPosition.isEqual(me.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(me.targetPosition.stickiness="toPrevious",me.howMany+=u.howMany):(me.sourcePosition.hasSameParentAs(u.targetPosition)&&(me.howMany+=u.howMany),me.sourcePosition.hasSameParentAs(u.sourcePosition)&&(me.howMany-=u.howMany)),me.sourcePosition=me.sourcePosition._getTransformedByMoveOperation(u),me.targetPosition=me.targetPosition._getTransformedByMoveOperation(u),me.sourcePosition.stickiness="toPrevious",me.targetPosition.stickiness="toNext",me.graveyardPosition.isEqual(u.targetPosition)||(me.graveyardPosition=me.graveyardPosition._getTransformedByMoveOperation(u)),[me])});setTransformation(MergeOperation,SplitOperation,(me,u,t)=>{if(u.graveyardPosition&&(me.graveyardPosition=me.graveyardPosition._getTransformedByDeletion(u.graveyardPosition,1),me.deletionPosition.isEqual(u.graveyardPosition)&&(me.howMany=u.howMany)),me.targetPosition.isEqual(u.splitPosition)&&(u.graveyardPosition&&me.deletionPosition.isEqual(u.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return me.sourcePosition=me.sourcePosition._getTransformedBySplitOperation(u),[me];if(me.sourcePosition.isEqual(u.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return me.howMany=0,me.targetPosition=me.targetPosition._getTransformedBySplitOperation(u),[me];if(t.abRelation=="mergeSameElement"||me.sourcePosition.offset>0)return me.sourcePosition=u.moveTargetPosition.clone(),me.targetPosition=me.targetPosition._getTransformedBySplitOperation(u),[me]}return me.sourcePosition.hasSameParentAs(u.splitPosition)&&(me.howMany=u.splitPosition.offset),me.sourcePosition=me.sourcePosition._getTransformedBySplitOperation(u),me.targetPosition=me.targetPosition._getTransformedBySplitOperation(u),[me]});setTransformation(MoveOperation,InsertOperation,(me,u)=>{const de=Range._createFromPositionAndShift(me.sourcePosition,me.howMany)._getTransformedByInsertOperation(u,!1)[0];return me.sourcePosition=de.start,me.howMany=de.end.offset-de.start.offset,me.targetPosition.isEqual(u.position)||(me.targetPosition=me.targetPosition._getTransformedByInsertOperation(u)),[me]});setTransformation(MoveOperation,MoveOperation,(me,u,t)=>{const de=Range._createFromPositionAndShift(me.sourcePosition,me.howMany),pe=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);let Le=t.aIsStrong,Ye=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?Ye=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(Ye=!1);let tt;if(me.targetPosition.isEqual(u.targetPosition)&&Ye?tt=me.targetPosition._getTransformedByDeletion(u.sourcePosition,u.howMany):tt=me.targetPosition._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_moveTargetIntoMovedRange(me,u)&&_moveTargetIntoMovedRange(u,me))return[u.getReversed()];if(de.containsPosition(u.targetPosition)&&de.containsRange(pe,!0))return de.start=de.start._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),de.end=de.end._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_makeMoveOperationsFromRanges([de],tt);if(pe.containsPosition(me.targetPosition)&&pe.containsRange(de,!0))return de.start=de.start._getCombined(u.sourcePosition,u.getMovedRangeStart()),de.end=de.end._getCombined(u.sourcePosition,u.getMovedRangeStart()),_makeMoveOperationsFromRanges([de],tt);const mt=compareArrays(me.sourcePosition.getParentPath(),u.sourcePosition.getParentPath());if(mt=="prefix"||mt=="extension")return de.start=de.start._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),de.end=de.end._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_makeMoveOperationsFromRanges([de],tt);me.type=="remove"&&u.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?Le=!0:me.type!="remove"&&u.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(Le=!1);const gt=[],bt=de.getDifference(pe);for(const vt of bt){vt.start=vt.start._getTransformedByDeletion(u.sourcePosition,u.howMany),vt.end=vt.end._getTransformedByDeletion(u.sourcePosition,u.howMany);const Tt=compareArrays(vt.start.getParentPath(),u.getMovedRangeStart().getParentPath())=="same",St=vt._getTransformedByInsertion(u.getMovedRangeStart(),u.howMany,Tt);gt.push(...St)}const _t=de.getIntersection(pe);return _t!==null&&Le&&(_t.start=_t.start._getCombined(u.sourcePosition,u.getMovedRangeStart()),_t.end=_t.end._getCombined(u.sourcePosition,u.getMovedRangeStart()),gt.length===0?gt.push(_t):gt.length==1?pe.start.isBefore(de.start)||pe.start.isEqual(de.start)?gt.unshift(_t):gt.push(_t):gt.splice(1,0,_t)),gt.length===0?[new NoOperation(me.baseVersion)]:_makeMoveOperationsFromRanges(gt,tt)});setTransformation(MoveOperation,SplitOperation,(me,u,t)=>{let de=me.targetPosition.clone();(!me.targetPosition.isEqual(u.insertionPosition)||!u.graveyardPosition||t.abRelation=="moveTargetAfter")&&(de=me.targetPosition._getTransformedBySplitOperation(u));const pe=Range._createFromPositionAndShift(me.sourcePosition,me.howMany);if(pe.end.isEqual(u.insertionPosition))return u.graveyardPosition||me.howMany++,me.targetPosition=de,[me];if(pe.start.hasSameParentAs(u.splitPosition)&&pe.containsPosition(u.splitPosition)){let tt=new Range(u.splitPosition,pe.end);tt=tt._getTransformedBySplitOperation(u);const st=[new Range(pe.start,u.splitPosition),tt];return _makeMoveOperationsFromRanges(st,de)}me.targetPosition.isEqual(u.splitPosition)&&t.abRelation=="insertAtSource"&&(de=u.moveTargetPosition),me.targetPosition.isEqual(u.insertionPosition)&&t.abRelation=="insertBetween"&&(de=me.targetPosition);const Ye=[pe._getTransformedBySplitOperation(u)];if(u.graveyardPosition){const tt=pe.start.isEqual(u.graveyardPosition)||pe.containsPosition(u.graveyardPosition);me.howMany>1&&tt&&!t.aWasUndone&&Ye.push(Range._createFromPositionAndShift(u.insertionPosition,1))}return _makeMoveOperationsFromRanges(Ye,de)});setTransformation(MoveOperation,MergeOperation,(me,u,t)=>{const de=Range._createFromPositionAndShift(me.sourcePosition,me.howMany);if(u.deletionPosition.hasSameParentAs(me.sourcePosition)&&de.containsPosition(u.sourcePosition)){if(me.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const Ye=[];let tt=u.graveyardPosition.clone(),st=u.targetPosition._getTransformedByMergeOperation(u);const ht=me.targetPosition.getTransformedByOperation(u);me.howMany>1&&(Ye.push(new MoveOperation(me.sourcePosition,me.howMany-1,ht,0)),tt=tt._getTransformedByMove(me.sourcePosition,ht,me.howMany-1),st=st._getTransformedByMove(me.sourcePosition,ht,me.howMany-1));const mt=u.deletionPosition._getCombined(me.sourcePosition,ht),gt=new MoveOperation(tt,1,mt,0),bt=gt.getMovedRangeStart().path.slice();bt.push(0);const _t=new Position(gt.targetPosition.root,bt);st=st._getTransformedByMove(tt,mt,1);const vt=new MoveOperation(st,u.howMany,_t,0);return Ye.push(gt),Ye.push(vt),Ye}}else if(me.howMany==1)return t.bWasUndone?(me.sourcePosition=u.graveyardPosition.clone(),me.targetPosition=me.targetPosition._getTransformedByMergeOperation(u),[me]):[new NoOperation(0)]}const Le=Range._createFromPositionAndShift(me.sourcePosition,me.howMany)._getTransformedByMergeOperation(u);return me.sourcePosition=Le.start,me.howMany=Le.end.offset-Le.start.offset,me.targetPosition=me.targetPosition._getTransformedByMergeOperation(u),[me]});setTransformation(RenameOperation,InsertOperation,(me,u)=>(me.position=me.position._getTransformedByInsertOperation(u),[me]));setTransformation(RenameOperation,MergeOperation,(me,u)=>me.position.isEqual(u.deletionPosition)?(me.position=u.graveyardPosition.clone(),me.position.stickiness="toNext",[me]):(me.position=me.position._getTransformedByMergeOperation(u),[me]));setTransformation(RenameOperation,MoveOperation,(me,u)=>(me.position=me.position._getTransformedByMoveOperation(u),[me]));setTransformation(RenameOperation,RenameOperation,(me,u,t)=>{if(me.position.isEqual(u.position))if(t.aIsStrong)me.oldName=u.newName;else return[new NoOperation(0)];return[me]});setTransformation(RenameOperation,SplitOperation,(me,u)=>{const t=me.position.path,de=u.splitPosition.getParentPath();if(compareArrays(t,de)=="same"&&!u.graveyardPosition){const pe=new RenameOperation(me.position.getShiftedBy(1),me.oldName,me.newName,0);return[me,pe]}return me.position=me.position._getTransformedBySplitOperation(u),[me]});setTransformation(RootAttributeOperation,RootAttributeOperation,(me,u,t)=>{if(me.root===u.root&&me.key===u.key){if(!t.aIsStrong||me.newValue===u.newValue)return[new NoOperation(0)];me.oldValue=u.newValue}return[me]});setTransformation(RootOperation,RootOperation,(me,u)=>me.rootName===u.rootName&&me.isAdd===u.isAdd?[new NoOperation(0)]:[me]);setTransformation(SplitOperation,InsertOperation,(me,u)=>(me.splitPosition.hasSameParentAs(u.position)&&me.splitPosition.offset<u.position.offset&&(me.howMany+=u.howMany),me.splitPosition=me.splitPosition._getTransformedByInsertOperation(u),me.insertionPosition=me.insertionPosition._getTransformedByInsertOperation(u),[me]));setTransformation(SplitOperation,MergeOperation,(me,u,t)=>{if(!me.graveyardPosition&&!t.bWasUndone&&me.splitPosition.hasSameParentAs(u.sourcePosition)){const de=u.graveyardPosition.path.slice();de.push(0);const pe=new Position(u.graveyardPosition.root,de),Le=SplitOperation.getInsertionPosition(new Position(u.graveyardPosition.root,de)),Ye=new SplitOperation(pe,0,Le,null,0);return me.splitPosition=me.splitPosition._getTransformedByMergeOperation(u),me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),me.graveyardPosition=Ye.insertionPosition.clone(),me.graveyardPosition.stickiness="toNext",[Ye,me]}return me.splitPosition.hasSameParentAs(u.deletionPosition)&&!me.splitPosition.isAfter(u.deletionPosition)&&me.howMany--,me.splitPosition.hasSameParentAs(u.targetPosition)&&(me.howMany+=u.howMany),me.splitPosition=me.splitPosition._getTransformedByMergeOperation(u),me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),me.graveyardPosition&&(me.graveyardPosition=me.graveyardPosition._getTransformedByMergeOperation(u)),[me]});setTransformation(SplitOperation,MoveOperation,(me,u,t)=>{const de=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);if(me.graveyardPosition){const Le=de.start.isEqual(me.graveyardPosition)||de.containsPosition(me.graveyardPosition);if(!t.bWasUndone&&Le){const Ye=me.splitPosition._getTransformedByMoveOperation(u),tt=me.graveyardPosition._getTransformedByMoveOperation(u),st=tt.path.slice();st.push(0);const ht=new Position(tt.root,st);return[new MoveOperation(Ye,me.howMany,ht,0)]}me.graveyardPosition=me.graveyardPosition._getTransformedByMoveOperation(u)}const pe=me.splitPosition.isEqual(u.targetPosition);if(pe&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return me.howMany+=u.howMany,me.splitPosition=me.splitPosition._getTransformedByDeletion(u.sourcePosition,u.howMany),me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),[me];if(pe&&t.abRelation&&t.abRelation.howMany){const{howMany:Le,offset:Ye}=t.abRelation;return me.howMany+=Le,me.splitPosition=me.splitPosition.getShiftedBy(Ye),[me]}if(me.splitPosition.hasSameParentAs(u.sourcePosition)&&de.containsPosition(me.splitPosition)){const Le=u.howMany-(me.splitPosition.offset-u.sourcePosition.offset);return me.howMany-=Le,me.splitPosition.hasSameParentAs(u.targetPosition)&&me.splitPosition.offset<u.targetPosition.offset&&(me.howMany+=u.howMany),me.splitPosition=u.sourcePosition.clone(),me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),[me]}return u.sourcePosition.isEqual(u.targetPosition)||(me.splitPosition.hasSameParentAs(u.sourcePosition)&&me.splitPosition.offset<=u.sourcePosition.offset&&(me.howMany-=u.howMany),me.splitPosition.hasSameParentAs(u.targetPosition)&&me.splitPosition.offset<u.targetPosition.offset&&(me.howMany+=u.howMany)),me.splitPosition.stickiness="toNone",me.splitPosition=me.splitPosition._getTransformedByMoveOperation(u),me.splitPosition.stickiness="toNext",me.graveyardPosition?me.insertionPosition=me.insertionPosition._getTransformedByMoveOperation(u):me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),[me]});setTransformation(SplitOperation,SplitOperation,(me,u,t)=>{if(me.splitPosition.isEqual(u.splitPosition)){if(!me.graveyardPosition&&!u.graveyardPosition)return[new NoOperation(0)];if(me.graveyardPosition&&u.graveyardPosition&&me.graveyardPosition.isEqual(u.graveyardPosition))return[new NoOperation(0)];if(t.abRelation=="splitBefore")return me.howMany=0,me.graveyardPosition=me.graveyardPosition._getTransformedBySplitOperation(u),[me]}if(me.graveyardPosition&&u.graveyardPosition&&me.graveyardPosition.isEqual(u.graveyardPosition)){const de=me.splitPosition.root.rootName=="$graveyard",pe=u.splitPosition.root.rootName=="$graveyard";if(pe&&!de||!(de&&!pe)&&t.aIsStrong){const st=[];return u.howMany&&st.push(new MoveOperation(u.moveTargetPosition,u.howMany,u.splitPosition,0)),me.howMany&&st.push(new MoveOperation(me.splitPosition,me.howMany,me.moveTargetPosition,0)),st}else return[new NoOperation(0)]}if(me.graveyardPosition&&(me.graveyardPosition=me.graveyardPosition._getTransformedBySplitOperation(u)),me.splitPosition.isEqual(u.insertionPosition)&&t.abRelation=="splitBefore")return me.howMany++,[me];if(u.splitPosition.isEqual(me.insertionPosition)&&t.baRelation=="splitBefore"){const de=u.insertionPosition.path.slice();de.push(0);const pe=new Position(u.insertionPosition.root,de),Le=new MoveOperation(me.insertionPosition,1,pe,0);return[me,Le]}return me.splitPosition.hasSameParentAs(u.splitPosition)&&me.splitPosition.offset<u.splitPosition.offset&&(me.howMany-=u.howMany),me.splitPosition=me.splitPosition._getTransformedBySplitOperation(u),me.insertionPosition=SplitOperation.getInsertionPosition(me.splitPosition),[me]});function _moveTargetIntoMovedRange(me,u){return me.targetPosition._getTransformedByDeletion(u.sourcePosition,u.howMany)===null}function _makeMoveOperationsFromRanges(me,u){const t=[];for(let de=0;de<me.length;de++){const pe=me[de],Le=new MoveOperation(pe.start,pe.end.offset-pe.start.offset,u,0);t.push(Le);for(let Ye=de+1;Ye<me.length;Ye++)me[Ye]=me[Ye]._getTransformedByMove(Le.sourcePosition,Le.targetPosition,Le.howMany)[0];u=u._getTransformedByMove(Le.sourcePosition,Le.targetPosition,Le.howMany)}return t}class LivePosition extends EmitterMixin(Position){constructor(u,t,de="toNone"){if(super(u,t,de),!this.root.is("rootElement"))throw new CKEditorError("model-liveposition-root-not-rootelement",u);bindWithDocument.call(this)}detach(){this.stopListening()}toPosition(){return new Position(this.root,this.path.slice(),this.stickiness)}static fromPosition(u,t){return new this(u.root,u.path.slice(),t||u.stickiness)}}LivePosition.prototype.is=function(me){return me==="livePosition"||me==="model:livePosition"||me=="position"||me==="model:position"};function bindWithDocument(){this.listenTo(this.root.document.model,"applyOperation",(me,u)=>{const t=u[0];t.isDocumentOperation&&transform.call(this,t)},{priority:"low"})}function transform(me){const u=this.getTransformedByOperation(me);if(!this.isEqual(u)){const t=this.toPosition();this.path=u.path,this.root=u.root,this.fire("change",t)}}class Batch{constructor(u={}){wt(this,"operations");wt(this,"isUndoable");wt(this,"isLocal");wt(this,"isUndo");wt(this,"isTyping");typeof u=="string"&&(u=u==="transparent"?{isUndoable:!1}:{},logWarning("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:de=!0,isUndo:pe=!1,isTyping:Le=!1}=u;this.operations=[],this.isUndoable=t,this.isLocal=de,this.isUndo=pe,this.isTyping=Le}get type(){return logWarning("batch-type-deprecated"),"default"}get baseVersion(){for(const u of this.operations)if(u.baseVersion!==null)return u.baseVersion;return null}addOperation(u){return u.isDocumentOperation&&(u.batch=this,this.operations.push(u)),u}}const Yr=class Yr{constructor(u){wt(this,"_markerCollection");wt(this,"_changesInElement",new Map);wt(this,"_elementsSnapshots",new Map);wt(this,"_elementChildrenSnapshots",new Map);wt(this,"_elementState",new Map);wt(this,"_changedMarkers",new Map);wt(this,"_changedRoots",new Map);wt(this,"_changeCount",0);wt(this,"_cachedChanges",null);wt(this,"_cachedChangesWithGraveyard",null);wt(this,"_refreshedItems",new Set);this._markerCollection=u}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(u){const t=u;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const de of t.range.getItems({shallow:!0}))this._isInInsertedElement(de.parent)||this._markAttribute(de);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const de=this._isInInsertedElement(t.sourcePosition.parent),pe=this._isInInsertedElement(t.targetPosition.parent);de||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),pe||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const Le=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const Ye of Le.getItems({shallow:!0}))this._setElementState(Ye,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const de=Range._createFromPositionAndShift(t.position,1);for(const pe of this._markerCollection.getMarkersIntersectingRange(de)){const Le=pe.getData();this.bufferMarkerChange(pe.name,Le,Le)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const de=t.splitPosition.parent;if(!this._isInInsertedElement(de)){this._markRemove(de,t.splitPosition.offset,t.howMany);const pe=Range._createFromPositionAndShift(t.splitPosition,t.howMany);for(const Le of pe.getItems({shallow:!0}))this._setElementState(Le,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const de=t.sourcePosition.parent;this._isInInsertedElement(de.parent)||this._markRemove(de.parent,de.startOffset,1);const pe=t.graveyardPosition.parent;this._markInsert(pe,t.graveyardPosition.offset,1),this._setElementState(de,"move");const Le=t.targetPosition.parent;if(!this._isInInsertedElement(Le)){this._markInsert(Le,t.targetPosition.offset,de.maxOffset);const Ye=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const tt of Ye.getItems({shallow:!0}))this._setElementState(tt,"move")}break}case"detachRoot":case"addRoot":{const de=t.affectedSelectable;if(!de._isLoaded||de.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const de=t.root.rootName;this._bufferRootAttributeChange(de,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(u,t,de){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),de.range&&de.range.root.is("rootElement")&&!de.range.root._isLoaded&&(de.range=null);let pe=this._changedMarkers.get(u);pe?pe.newMarkerData=de:(pe={newMarkerData:de,oldMarkerData:t},this._changedMarkers.set(u,pe)),pe.oldMarkerData.range==null&&de.range==null&&this._changedMarkers.delete(u)}getMarkersToRemove(){const u=[];for(const[t,de]of this._changedMarkers)de.oldMarkerData.range!=null&&u.push({name:t,range:de.oldMarkerData.range});return u}getMarkersToAdd(){const u=[];for(const[t,de]of this._changedMarkers)de.newMarkerData.range!=null&&u.push({name:t,range:de.newMarkerData.range});return u}getChangedMarkers(){return Array.from(this._changedMarkers).map(([u,t])=>({name:u,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:u,oldMarkerData:t}of this._changedMarkers.values()){if(u.affectsData!==t.affectsData)return!0;if(u.affectsData){const de=u.range&&!t.range,pe=!u.range&&t.range,Le=u.range&&t.range&&!u.range.isEqual(t.range);if(de||pe||Le)return!0}}return!1}getChanges(u={}){if(this._cachedChanges)return u.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const de of this._changesInElement.keys()){const pe=this._changesInElement.get(de).sort((mt,gt)=>mt.offset===gt.offset?mt.type!=gt.type?mt.type=="remove"?-1:1:0:mt.offset<gt.offset?-1:1),Le=this._elementChildrenSnapshots.get(de),Ye=_getChildrenSnapshots(de.getChildren()),tt=_generateDiffInstructionsFromChanges(Le.length,pe);let st=0,ht=0;for(const mt of tt)if(mt==="i"){const gt=this._getDiffActionForNode(Ye[st].node,"insert"),bt=this._elementsSnapshots.get(Ye[st].node),_t=this._getInsertDiff(de,st,gt,Ye[st],bt);t.push(_t),st++}else if(mt==="r"){const gt=this._getDiffActionForNode(Le[ht].node,"remove"),bt=this._getRemoveDiff(de,st,gt,Le[ht]);t.push(bt),ht++}else if(mt==="a"){const gt=Le[ht].attributes,bt=Ye[st].attributes;let _t;if(Ye[st].name=="$text")_t=new Range(Position._createAt(de,st),Position._createAt(de,st+1));else{const Tt=de.offsetToIndex(st);_t=new Range(Position._createAt(de,st),Position._createAt(de.getChild(Tt),0))}const vt=this._getAttributesDiff(_t,gt,bt);t.push(...vt),st++,ht++}else st++,ht++}t.sort((de,pe)=>de.position.root!=pe.position.root?de.position.root.rootName<pe.position.root.rootName?-1:1:de.position.isEqual(pe.position)?de.changeCount-pe.changeCount:de.position.isBefore(pe.position)?-1:1);for(let de=1,pe=0;de<t.length;de++){const Le=t[pe],Ye=t[de],tt=Le.type=="remove"&&Ye.type=="remove"&&Le.name=="$text"&&Ye.name=="$text"&&Le.position.isEqual(Ye.position),st=Le.type=="insert"&&Ye.type=="insert"&&Le.name=="$text"&&Ye.name=="$text"&&Le.position.parent==Ye.position.parent&&Le.position.offset+Le.length==Ye.position.offset,ht=Le.type=="attribute"&&Ye.type=="attribute"&&Le.position.parent==Ye.position.parent&&Le.range.isFlat&&Ye.range.isFlat&&Le.position.offset+Le.length==Ye.position.offset&&Le.attributeKey==Ye.attributeKey&&Le.attributeOldValue==Ye.attributeOldValue&&Le.attributeNewValue==Ye.attributeNewValue;tt||st||ht?(Le.length++,ht&&(Le.range.end=Le.range.end.getShiftedBy(1)),t[de]=null):pe=de}t=t.filter(de=>de);for(const de of t)delete de.changeCount,de.type=="attribute"&&(delete de.position,delete de.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(_changesInGraveyardFilter),u.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(u=>{const t={...u};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(u){if(this._isInInsertedElement(u.parent))return;this._markRemove(u.parent,u.startOffset,u.offsetSize),this._markInsert(u.parent,u.startOffset,u.offsetSize),this._refreshedItems.add(u),this._setElementState(u,"refresh");const t=Range._createOn(u);for(const de of this._markerCollection.getMarkersIntersectingRange(t)){const pe=de.getData();this.bufferMarkerChange(de.name,pe,pe)}this._cachedChanges=null}_bufferRootLoad(u){if(u.isAttached()){this._bufferRootStateChange(u.rootName,!0),this._markInsert(u,0,u.maxOffset);for(const t of u.getAttributeKeys())this._bufferRootAttributeChange(u.rootName,t,null,u.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==u){const de=t.getData();this.bufferMarkerChange(t.name,{...de,range:null},de)}}}_bufferRootStateChange(u,t){if(!this._changedRoots.has(u)){this._changedRoots.set(u,{name:u,state:t?"attached":"detached"});return}const de=this._changedRoots.get(u);de.state!==void 0?(delete de.state,de.attributes===void 0&&this._changedRoots.delete(u)):de.state=t?"attached":"detached"}_bufferRootAttributeChange(u,t,de,pe){const Le=this._changedRoots.get(u)||{name:u},Ye=Le.attributes||{};if(Ye[t]){const tt=Ye[t];pe===tt.oldValue?delete Ye[t]:tt.newValue=pe}else Ye[t]={oldValue:de,newValue:pe};Object.entries(Ye).length===0?(delete Le.attributes,Le.state===void 0&&this._changedRoots.delete(u)):(Le.attributes=Ye,this._changedRoots.set(u,Le))}_markInsert(u,t,de){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const pe={type:"insert",offset:t,howMany:de,count:this._changeCount++};this._markChange(u,pe)}_markRemove(u,t,de){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const pe={type:"remove",offset:t,howMany:de,count:this._changeCount++};this._markChange(u,pe),this._removeAllNestedChanges(u,t,de)}_markAttribute(u){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const t={type:"attribute",offset:u.startOffset,howMany:u.offsetSize,count:this._changeCount++};this._markChange(u.parent,t)}_markChange(u,t){this._makeSnapshots(u);const de=this._getChangesForElement(u);this._handleChange(t,de),de.push(t);for(let pe=0;pe<de.length;pe++)de[pe].howMany<1&&(de.splice(pe,1),pe--)}_setElementState(u,t){if(!u.is("element"))return;const de=Yr._statesPriority.indexOf(this._elementState.get(u));Yr._statesPriority.indexOf(t)>de&&this._elementState.set(u,t)}_getDiffActionForNode(u,t){if(!u.is("element")||!this._elementsSnapshots.has(u))return t;const de=this._elementState.get(u);return!de||de=="move"?t:de}_getChangesForElement(u){let t;return this._changesInElement.has(u)?t=this._changesInElement.get(u):(t=[],this._changesInElement.set(u,t)),t}_makeSnapshots(u){if(this._elementChildrenSnapshots.has(u))return;const t=_getChildrenSnapshots(u.getChildren());this._elementChildrenSnapshots.set(u,t);for(const de of t)this._elementsSnapshots.set(de.node,de)}_handleChange(u,t){u.nodesToHandle=u.howMany;for(const de of t){const pe=u.offset+u.howMany,Le=de.offset+de.howMany;if(u.type=="insert"&&(de.type=="insert"&&(u.offset<=de.offset?de.offset+=u.howMany:u.offset<Le&&(de.howMany+=u.nodesToHandle,u.nodesToHandle=0)),de.type=="remove"&&u.offset<de.offset&&(de.offset+=u.howMany),de.type=="attribute")){if(u.offset<=de.offset)de.offset+=u.howMany;else if(u.offset<Le){const Ye=de.howMany;de.howMany=u.offset-de.offset,t.unshift({type:"attribute",offset:pe,howMany:Ye-de.howMany,count:this._changeCount++})}}if(u.type=="remove"){if(de.type=="insert"){if(pe<=de.offset)de.offset-=u.howMany;else if(pe<=Le)if(u.offset<de.offset){const Ye=pe-de.offset;de.offset=u.offset,de.howMany-=Ye,u.nodesToHandle-=Ye}else de.howMany-=u.nodesToHandle,u.nodesToHandle=0;else if(u.offset<=de.offset)u.nodesToHandle-=de.howMany,de.howMany=0;else if(u.offset<Le){const Ye=Le-u.offset;de.howMany-=Ye,u.nodesToHandle-=Ye}}if(de.type=="remove"&&(pe<=de.offset?de.offset-=u.howMany:u.offset<de.offset&&(u.nodesToHandle+=de.howMany,de.howMany=0)),de.type=="attribute"){if(pe<=de.offset)de.offset-=u.howMany;else if(u.offset<de.offset){const Ye=pe-de.offset;de.offset=u.offset,de.howMany-=Ye}else if(u.offset<Le)if(pe<=Le){const Ye=de.howMany;de.howMany=u.offset-de.offset;const tt=Ye-de.howMany-u.nodesToHandle;t.unshift({type:"attribute",offset:u.offset,howMany:tt,count:this._changeCount++})}else de.howMany-=Le-u.offset}}if(u.type=="attribute"){if(de.type=="insert")if(u.offset<de.offset&&pe>de.offset){if(pe>Le){const Ye={type:"attribute",offset:Le,howMany:pe-Le,count:this._changeCount++};this._handleChange(Ye,t),t.push(Ye)}u.nodesToHandle=de.offset-u.offset,u.howMany=u.nodesToHandle}else u.offset>=de.offset&&u.offset<Le&&(pe>Le?(u.nodesToHandle=pe-Le,u.offset=Le):u.nodesToHandle=0);if(de.type=="remove"&&u.offset<de.offset&&pe>de.offset){const Ye={type:"attribute",offset:de.offset,howMany:pe-de.offset,count:this._changeCount++};this._handleChange(Ye,t),t.push(Ye),u.nodesToHandle=de.offset-u.offset,u.howMany=u.nodesToHandle}de.type=="attribute"&&(u.offset>=de.offset&&pe<=Le?(u.nodesToHandle=0,u.howMany=0,u.offset=0):u.offset<=de.offset&&pe>=Le&&(de.howMany=0))}}u.howMany=u.nodesToHandle,delete u.nodesToHandle}_getInsertDiff(u,t,de,pe,Le){const Ye={type:"insert",position:Position._createAt(u,t),name:pe.name,attributes:new Map(pe.attributes),length:1,changeCount:this._changeCount++,action:de};return de!="insert"&&Le&&(Ye.before={name:Le.name,attributes:new Map(Le.attributes)}),Ye}_getRemoveDiff(u,t,de,pe){return{type:"remove",action:de,position:Position._createAt(u,t),name:pe.name,attributes:new Map(pe.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(u,t,de){const pe=[];de=new Map(de);for(const[Le,Ye]of t){const tt=de.has(Le)?de.get(Le):null;tt!==Ye&&pe.push({type:"attribute",position:u.start,range:u.clone(),length:1,attributeKey:Le,attributeOldValue:Ye,attributeNewValue:tt,changeCount:this._changeCount++}),de.delete(Le)}for(const[Le,Ye]of de)pe.push({type:"attribute",position:u.start,range:u.clone(),length:1,attributeKey:Le,attributeOldValue:null,attributeNewValue:Ye,changeCount:this._changeCount++});return pe}_isInInsertedElement(u){const t=u.parent;if(!t)return!1;const de=this._changesInElement.get(t),pe=u.startOffset;if(de){for(const Le of de)if(Le.type=="insert"&&pe>=Le.offset&&pe<Le.offset+Le.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(u,t,de){const pe=new Range(Position._createAt(u,t),Position._createAt(u,t+de));for(const Le of pe.getItems({shallow:!0}))Le.is("element")&&(this._changesInElement.delete(Le),this._removeAllNestedChanges(Le,0,Le.maxOffset))}};wt(Yr,"_statesPriority",[void 0,"refresh","rename","move"]);let Differ=Yr;function _getSingleNodeSnapshot(me){return{node:me,name:me.is("$text")?"$text":me.name,attributes:new Map(me.getAttributes())}}function _getChildrenSnapshots(me){const u=[];for(const t of me)if(t.is("$text"))for(let de=0;de<t.data.length;++de)u.push(_getSingleNodeSnapshot(t));else u.push(_getSingleNodeSnapshot(t));return u}function _generateDiffInstructionsFromChanges(me,u){const t=[];let de=0,pe=0;for(const Le of u){if(Le.offset>de){for(let Ye=0;Ye<Le.offset-de;Ye++)t.push("e");pe+=Le.offset-de}if(Le.type=="insert"){for(let Ye=0;Ye<Le.howMany;Ye++)t.push("i");de=Le.offset+Le.howMany}else if(Le.type=="remove"){for(let Ye=0;Ye<Le.howMany;Ye++)t.push("r");de=Le.offset,pe+=Le.howMany}else{if(Le.howMany>1500)for(let Ye=0;Ye<Le.howMany;Ye++)t.push("a");else t.push(..."a".repeat(Le.howMany).split(""));de=Le.offset+Le.howMany,pe+=Le.howMany}}if(pe<me)for(let Le=0;Le<me-pe-de;Le++)t.push("e");return t}function _changesInGraveyardFilter(me){const u="position"in me&&me.position.root.rootName=="$graveyard",t="range"in me&&me.range.root.rootName=="$graveyard";return!u&&!t}class History{constructor(){wt(this,"_operations",[]);wt(this,"_undoPairs",new Map);wt(this,"_undoneOperations",new Set);wt(this,"_baseVersionToOperationIndex",new Map);wt(this,"_version",0);wt(this,"_gaps",new Map)}get version(){return this._version}set version(u){this._operations.length&&u>this._version+1&&this._gaps.set(this._version,u),this._version=u}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(u){if(u.baseVersion!==this.version)throw new CKEditorError("model-document-history-addoperation-incorrect-version",this,{operation:u,historyVersion:this.version});this._operations.push(u),this._version++,this._baseVersionToOperationIndex.set(u.baseVersion,this._operations.length-1)}getOperations(u,t=this.version){if(!this._operations.length)return[];const de=this._operations[0];u===void 0&&(u=de.baseVersion);let pe=t-1;for(const[tt,st]of this._gaps)u>tt&&u<st&&(u=st),pe>tt&&pe<st&&(pe=tt-1);if(pe<de.baseVersion||u>this.lastOperation.baseVersion)return[];let Le=this._baseVersionToOperationIndex.get(u);Le===void 0&&(Le=0);let Ye=this._baseVersionToOperationIndex.get(pe);return Ye===void 0&&(Ye=this._operations.length-1),this._operations.slice(Le,Ye+1)}getOperation(u){const t=this._baseVersionToOperationIndex.get(u);if(t!==void 0)return this._operations[t]}setOperationAsUndone(u,t){this._undoPairs.set(t,u),this._undoneOperations.add(u)}isUndoingOperation(u){return this._undoPairs.has(u)}isUndoneOperation(u){return this._undoneOperations.has(u)}getUndoneOperation(u){return this._undoPairs.get(u)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class RootElement extends Element{constructor(t,de,pe="main"){super(de);wt(this,"rootName");wt(this,"_document");wt(this,"_isAttached",!0);wt(this,"_isLoaded",!0);this._document=t,this.rootName=pe}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}RootElement.prototype.is=function(me,u){return u?u===this.name&&(me==="rootElement"||me==="model:rootElement"||me==="element"||me==="model:element"):me==="rootElement"||me==="model:rootElement"||me==="element"||me==="model:element"||me==="node"||me==="model:node"};const graveyardName="$graveyard";class Document extends EmitterMixin(){constructor(t){super();wt(this,"model");wt(this,"history");wt(this,"selection");wt(this,"roots");wt(this,"differ");wt(this,"isReadOnly");wt(this,"_postFixers");wt(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=t,this.history=new History,this.selection=new DocumentSelection(this),this.roots=new Collection({idProperty:"rootName"}),this.differ=new Differ(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",graveyardName),this.listenTo(t,"applyOperation",(de,pe)=>{const Le=pe[0];Le.isDocumentOperation&&this.differ.bufferOperation(Le)},{priority:"high"}),this.listenTo(t,"applyOperation",(de,pe)=>{const Le=pe[0];Le.isDocumentOperation&&this.history.addOperation(Le)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(de,pe,Le,Ye,tt)=>{const st={...pe.getData(),range:Ye};this.differ.bufferMarkerChange(pe.name,tt,st),Le===null&&pe.on("change",(ht,mt)=>{const gt=pe.getData();this.differ.bufferMarkerChange(pe.name,{...gt,range:mt},gt)})}),this.registerPostFixer(de=>{let pe=!1;for(const Le of this.roots)!Le.isAttached()&&!Le.isEmpty&&(de.remove(de.createRangeIn(Le)),pe=!0);for(const Le of this.model.markers)Le.getRange().root.isAttached()||(de.removeMarker(Le),pe=!0);return pe})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(graveyardName)}createRoot(t="$root",de="main"){if(this.roots.get(de))throw new CKEditorError("model-document-createroot-name-exists",this,{name:de});const pe=new RootElement(this,t,de);return this.roots.add(pe),pe}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(de=>de.rootName)}getRoots(t=!1){return this.roots.filter(de=>de!=this.graveyard&&(t||de.isAttached())&&de._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=clone$1(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),de=this.model,pe=de.schema,Le=de.createPositionFromPath(t,[0]);return pe.getNearestSelectionRange(Le)||de.createRange(Le)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&validateTextNodePosition(t.start)&&validateTextNodePosition(t.end)}_callPostFixers(t){let de=!1;do for(const pe of this._postFixers)if(this.selection.refresh(),de=pe(t),de)break;while(de)}}function validateTextNodePosition(me){const u=me.textNode;if(u){const t=u.data,de=me.offset-u.startOffset;return!isInsideSurrogatePair(t,de)&&!isInsideCombinedSymbol(t,de)}return!0}class MarkerCollection extends EmitterMixin(){constructor(){super(...arguments);wt(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(t){const de=t instanceof Marker?t.name:t;return this._markers.has(de)}get(t){return this._markers.get(t)||null}_set(t,de,pe=!1,Le=!1){const Ye=t instanceof Marker?t.name:t;if(Ye.includes(","))throw new CKEditorError("markercollection-incorrect-marker-name",this);const tt=this._markers.get(Ye);if(tt){const mt=tt.getData(),gt=tt.getRange();let bt=!1;return gt.isEqual(de)||(tt._attachLiveRange(LiveRange.fromRange(de)),bt=!0),pe!=tt.managedUsingOperations&&(tt._managedUsingOperations=pe,bt=!0),typeof Le=="boolean"&&Le!=tt.affectsData&&(tt._affectsData=Le,bt=!0),bt&&this.fire(`update:${Ye}`,tt,gt,de,mt),tt}const st=LiveRange.fromRange(de),ht=new Marker(Ye,st,pe,Le);return this._markers.set(Ye,ht),this.fire(`update:${Ye}`,ht,null,de,{...ht.getData(),range:null}),ht}_remove(t){const de=t instanceof Marker?t.name:t,pe=this._markers.get(de);return pe?(this._markers.delete(de),this.fire(`update:${de}`,pe,pe.getRange(),null,pe.getData()),this._destroyMarker(pe),!0):!1}_refresh(t){const de=t instanceof Marker?t.name:t,pe=this._markers.get(de);if(!pe)throw new CKEditorError("markercollection-refresh-marker-not-exists",this);const Le=pe.getRange();this.fire(`update:${de}`,pe,Le,Le,pe.getData())}*getMarkersAtPosition(t){for(const de of this)de.getRange().containsPosition(t)&&(yield de)}*getMarkersIntersectingRange(t){for(const de of this)de.getRange().getIntersection(t)!==null&&(yield de)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const de of this._markers.values())de.name.startsWith(t+":")&&(yield de)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Marker extends EmitterMixin(TypeCheckable){constructor(t,de,pe,Le){super();wt(this,"name");wt(this,"_managedUsingOperations");wt(this,"_affectsData");wt(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(de),this._managedUsingOperations=pe,this._affectsData=Le}get managedUsingOperations(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Marker.prototype.is=function(me){return me==="marker"||me==="model:marker"};class DetachOperation extends Operation{constructor(t,de){super(null);wt(this,"sourcePosition");wt(this,"howMany");this.sourcePosition=t.clone(),this.howMany=de}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new CKEditorError("detach-operation-on-document-node",this)}_execute(){_remove(Range._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}let DocumentFragment$2=class xm extends TypeCheckable{constructor(t){super();wt(this,"markers",new Map);wt(this,"_children",new NodeList);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let de=this;for(const pe of t)de=de.getChildAtOffset(pe);return de}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const de of this._children)t.push(de.toJSON());return t}static fromJSON(t){const de=[];for(const pe of t)pe.name?de.push(Element.fromJSON(pe)):de.push(Text.fromJSON(pe));return new xm(de)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,de){const pe=normalize$4(de);for(const Le of pe)Le.parent!==null&&Le._remove(),Le.parent=this;this._children._insertNodes(t,pe)}_removeChildren(t,de=1){const pe=this._children._removeNodes(t,de);for(const Le of pe)Le.parent=null;return pe}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const de of t)de.parent=null}};DocumentFragment$2.prototype.is=function(me){return me==="documentFragment"||me==="model:documentFragment"};function normalize$4(me){return typeof me=="string"?[new Text(me)]:(isIterable(me)||(me=[me]),Array.from(me).map(u=>typeof u=="string"?new Text(u):u instanceof TextProxy?new Text(u.data,u.getAttributes()):u))}class Writer{constructor(u,t){wt(this,"model");wt(this,"batch");this.model=u,this.batch=t}createText(u,t){return new Text(u,t)}createElement(u,t){return new Element(u,t)}createDocumentFragment(){return new DocumentFragment$2}cloneElement(u,t=!0){return u._clone(t)}insert(u,t,de=0){if(this._assertWriterUsedCorrectly(),u instanceof Text&&u.data=="")return;const pe=Position._createAt(t,de);if(u.parent)if(isSameTree(u.root,pe.root)){this.move(Range._createOn(u),pe);return}else{if(u.root.document)throw new CKEditorError("model-writer-insert-forbidden-move",this);this.remove(u)}const Le=pe.root.document?pe.root.document.version:null,Ye=u instanceof DocumentFragment$2?u._removeChildren(0,u.childCount):u,tt=new InsertOperation(pe,Ye,Le);if(u instanceof Text&&(tt.shouldReceiveAttributes=!0),this.batch.addOperation(tt),this.model.applyOperation(tt),u instanceof DocumentFragment$2)for(const[st,ht]of u.markers){const mt=Position._createAt(ht.root,0),bt={range:new Range(ht.start._getCombined(mt,pe),ht.end._getCombined(mt,pe)),usingOperation:!0,affectsData:!0};this.model.markers.has(st)?this.updateMarker(st,bt):this.addMarker(st,bt)}}insertText(u,t,de,pe){t instanceof DocumentFragment$2||t instanceof Element||t instanceof Position?this.insert(this.createText(u),t,de):this.insert(this.createText(u,t),de,pe)}insertElement(u,t,de,pe){t instanceof DocumentFragment$2||t instanceof Element||t instanceof Position?this.insert(this.createElement(u),t,de):this.insert(this.createElement(u,t),de,pe)}append(u,t){this.insert(u,t,"end")}appendText(u,t,de){t instanceof DocumentFragment$2||t instanceof Element?this.insert(this.createText(u),t,"end"):this.insert(this.createText(u,t),de,"end")}appendElement(u,t,de){t instanceof DocumentFragment$2||t instanceof Element?this.insert(this.createElement(u),t,"end"):this.insert(this.createElement(u,t),de,"end")}setAttribute(u,t,de){if(this._assertWriterUsedCorrectly(),de instanceof Range){const pe=de.getMinimalFlatRanges();for(const Le of pe)setAttributeOnRange(this,u,t,Le)}else setAttributeOnItem(this,u,t,de)}setAttributes(u,t){for(const[de,pe]of toMap(u))this.setAttribute(de,pe,t)}removeAttribute(u,t){if(this._assertWriterUsedCorrectly(),t instanceof Range){const de=t.getMinimalFlatRanges();for(const pe of de)setAttributeOnRange(this,u,null,pe)}else setAttributeOnItem(this,u,null,t)}clearAttributes(u){this._assertWriterUsedCorrectly();const t=de=>{for(const pe of de.getAttributeKeys())this.removeAttribute(pe,de)};if(!(u instanceof Range))t(u);else for(const de of u.getItems())t(de)}move(u,t,de){if(this._assertWriterUsedCorrectly(),!(u instanceof Range))throw new CKEditorError("writer-move-invalid-range",this);if(!u.isFlat)throw new CKEditorError("writer-move-range-not-flat",this);const pe=Position._createAt(t,de);if(pe.isEqual(u.start))return;if(this._addOperationForAffectedMarkers("move",u),!isSameTree(u.root,pe.root))throw new CKEditorError("writer-move-different-document",this);const Le=u.root.document?u.root.document.version:null,Ye=new MoveOperation(u.start,u.end.offset-u.start.offset,pe,Le);this.batch.addOperation(Ye),this.model.applyOperation(Ye)}remove(u){this._assertWriterUsedCorrectly();const de=(u instanceof Range?u:Range._createOn(u)).getMinimalFlatRanges().reverse();for(const pe of de)this._addOperationForAffectedMarkers("move",pe),applyRemoveOperation(pe.start,pe.end.offset-pe.start.offset,this.batch,this.model)}merge(u){this._assertWriterUsedCorrectly();const t=u.nodeBefore,de=u.nodeAfter;if(this._addOperationForAffectedMarkers("merge",u),!(t instanceof Element))throw new CKEditorError("writer-merge-no-element-before",this);if(!(de instanceof Element))throw new CKEditorError("writer-merge-no-element-after",this);u.root.document?this._merge(u):this._mergeDetached(u)}createPositionFromPath(u,t,de){return this.model.createPositionFromPath(u,t,de)}createPositionAt(u,t){return this.model.createPositionAt(u,t)}createPositionAfter(u){return this.model.createPositionAfter(u)}createPositionBefore(u){return this.model.createPositionBefore(u)}createRange(u,t){return this.model.createRange(u,t)}createRangeIn(u){return this.model.createRangeIn(u)}createRangeOn(u){return this.model.createRangeOn(u)}createSelection(...u){return this.model.createSelection(...u)}_mergeDetached(u){const t=u.nodeBefore,de=u.nodeAfter;this.move(Range._createIn(de),Position._createAt(t,"end")),this.remove(de)}_merge(u){const t=Position._createAt(u.nodeBefore,"end"),de=Position._createAt(u.nodeAfter,0),pe=u.root.document.graveyard,Le=new Position(pe,[0]),Ye=u.root.document.version,tt=new MergeOperation(de,u.nodeAfter.maxOffset,t,Le,Ye);this.batch.addOperation(tt),this.model.applyOperation(tt)}rename(u,t){if(this._assertWriterUsedCorrectly(),!(u instanceof Element))throw new CKEditorError("writer-rename-not-element-instance",this);const de=u.root.document?u.root.document.version:null,pe=new RenameOperation(Position._createBefore(u),u.name,t,de);this.batch.addOperation(pe),this.model.applyOperation(pe)}split(u,t){this._assertWriterUsedCorrectly();let de=u.parent;if(!de.parent)throw new CKEditorError("writer-split-element-no-parent",this);if(t||(t=de.parent),!u.parent.getAncestors({includeSelf:!0}).includes(t))throw new CKEditorError("writer-split-invalid-limit-element",this);let pe,Le;do{const Ye=de.root.document?de.root.document.version:null,tt=de.maxOffset-u.offset,st=SplitOperation.getInsertionPosition(u),ht=new SplitOperation(u,tt,st,null,Ye);this.batch.addOperation(ht),this.model.applyOperation(ht),!pe&&!Le&&(pe=de,Le=u.parent.nextSibling),u=this.createPositionAfter(u.parent),de=u.parent}while(de!==t);return{position:u,range:new Range(Position._createAt(pe,"end"),Position._createAt(Le,0))}}wrap(u,t){if(this._assertWriterUsedCorrectly(),!u.isFlat)throw new CKEditorError("writer-wrap-range-not-flat",this);const de=t instanceof Element?t:new Element(t);if(de.childCount>0)throw new CKEditorError("writer-wrap-element-not-empty",this);if(de.parent!==null)throw new CKEditorError("writer-wrap-element-attached",this);this.insert(de,u.start);const pe=new Range(u.start.getShiftedBy(1),u.end.getShiftedBy(1));this.move(pe,Position._createAt(de,0))}unwrap(u){if(this._assertWriterUsedCorrectly(),u.parent===null)throw new CKEditorError("writer-unwrap-element-no-parent",this);this.move(Range._createIn(u),this.createPositionAfter(u)),this.remove(u)}addMarker(u,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new CKEditorError("writer-addmarker-no-usingoperation",this);const de=t.usingOperation,pe=t.range,Le=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(u))throw new CKEditorError("writer-addmarker-marker-exists",this);if(!pe)throw new CKEditorError("writer-addmarker-no-range",this);return de?(applyMarkerOperation(this,u,null,pe,Le),this.model.markers.get(u)):this.model.markers._set(u,pe,de,Le)}updateMarker(u,t){this._assertWriterUsedCorrectly();const de=typeof u=="string"?u:u.name,pe=this.model.markers.get(de);if(!pe)throw new CKEditorError("writer-updatemarker-marker-not-exists",this);if(!t){logWarning("writer-updatemarker-reconvert-using-editingcontroller",{markerName:de}),this.model.markers._refresh(pe);return}const Le=typeof t.usingOperation=="boolean",Ye=typeof t.affectsData=="boolean",tt=Ye?t.affectsData:pe.affectsData;if(!Le&&!t.range&&!Ye)throw new CKEditorError("writer-updatemarker-wrong-options",this);const st=pe.getRange(),ht=t.range?t.range:st;if(Le&&t.usingOperation!==pe.managedUsingOperations){t.usingOperation?applyMarkerOperation(this,de,null,ht,tt):(applyMarkerOperation(this,de,st,null,tt),this.model.markers._set(de,ht,void 0,tt));return}pe.managedUsingOperations?applyMarkerOperation(this,de,st,ht,tt):this.model.markers._set(de,ht,void 0,tt)}removeMarker(u){this._assertWriterUsedCorrectly();const t=typeof u=="string"?u:u.name;if(!this.model.markers.has(t))throw new CKEditorError("writer-removemarker-no-marker",this);const de=this.model.markers.get(t);if(!de.managedUsingOperations){this.model.markers._remove(t);return}const pe=de.getRange();applyMarkerOperation(this,t,pe,null,de.affectsData)}addRoot(u,t="$root"){this._assertWriterUsedCorrectly();const de=this.model.document.getRoot(u);if(de&&de.isAttached())throw new CKEditorError("writer-addroot-root-exists",this);const pe=this.model.document,Le=new RootOperation(u,t,!0,pe,pe.version);return this.batch.addOperation(Le),this.model.applyOperation(Le),this.model.document.getRoot(u)}detachRoot(u){this._assertWriterUsedCorrectly();const t=typeof u=="string"?this.model.document.getRoot(u):u;if(!t||!t.isAttached())throw new CKEditorError("writer-detachroot-no-root",this);for(const Le of this.model.markers)Le.getRange().root===t&&this.removeMarker(Le);for(const Le of t.getAttributeKeys())this.removeAttribute(Le,t);this.remove(this.createRangeIn(t));const de=this.model.document,pe=new RootOperation(t.rootName,t.name,!1,de,de.version);this.batch.addOperation(pe),this.model.applyOperation(pe)}setSelection(...u){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...u)}setSelectionFocus(u,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(u,t)}setSelectionAttribute(u,t){if(this._assertWriterUsedCorrectly(),typeof u=="string")this._setSelectionAttribute(u,t);else for(const[de,pe]of toMap(u))this._setSelectionAttribute(de,pe)}removeSelectionAttribute(u){if(this._assertWriterUsedCorrectly(),typeof u=="string")this._removeSelectionAttribute(u);else for(const t of u)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(u){this.model.document.selection._restoreGravity(u)}_setSelectionAttribute(u,t){const de=this.model.document.selection;if(de.isCollapsed&&de.anchor.parent.isEmpty){const pe=DocumentSelection._getStoreAttributeKey(u);this.setAttribute(pe,t,de.anchor.parent)}de._setAttribute(u,t)}_removeSelectionAttribute(u){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const de=DocumentSelection._getStoreAttributeKey(u);this.removeAttribute(de,t.anchor.parent)}t._removeAttribute(u)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new CKEditorError("writer-incorrect-use",this)}_addOperationForAffectedMarkers(u,t){for(const de of this.model.markers){if(!de.managedUsingOperations)continue;const pe=de.getRange();let Le=!1;if(u==="move"){const Ye=t;Le=Ye.containsPosition(pe.start)||Ye.start.isEqual(pe.start)||Ye.containsPosition(pe.end)||Ye.end.isEqual(pe.end)}else{const Ye=t,tt=Ye.nodeBefore,st=Ye.nodeAfter,ht=pe.start.parent==tt&&pe.start.isAtEnd,mt=pe.end.parent==st&&pe.end.offset==0,gt=pe.end.nodeAfter==st,bt=pe.start.nodeAfter==st;Le=ht||mt||gt||bt}Le&&this.updateMarker(de.name,{range:pe})}}}function setAttributeOnRange(me,u,t,de){const pe=me.model,Le=pe.document;let Ye=de.start,tt,st,ht;for(const gt of de.getWalker({shallow:!0}))ht=gt.item.getAttribute(u),tt&&st!=ht&&(st!=t&&mt(),Ye=tt),tt=gt.nextPosition,st=ht;tt instanceof Position&&tt!=Ye&&st!=t&&mt();function mt(){const gt=new Range(Ye,tt),bt=gt.root.document?Le.version:null,_t=new AttributeOperation(gt,u,st,t,bt);me.batch.addOperation(_t),pe.applyOperation(_t)}}function setAttributeOnItem(me,u,t,de){const pe=me.model,Le=pe.document,Ye=de.getAttribute(u);let tt,st;if(Ye!=t){if(de.root===de){const mt=de.document?Le.version:null;st=new RootAttributeOperation(de,u,Ye,t,mt)}else{tt=new Range(Position._createBefore(de),me.createPositionAfter(de));const mt=tt.root.document?Le.version:null;st=new AttributeOperation(tt,u,Ye,t,mt)}me.batch.addOperation(st),pe.applyOperation(st)}}function applyMarkerOperation(me,u,t,de,pe){const Le=me.model,Ye=Le.document,tt=new MarkerOperation(u,t,de,Le.markers,!!pe,Ye.version);me.batch.addOperation(tt),Le.applyOperation(tt)}function applyRemoveOperation(me,u,t,de){let pe;if(me.root.document){const Le=de.document,Ye=new Position(Le.graveyard,[0]);pe=new MoveOperation(me,u,Ye,Le.version)}else pe=new DetachOperation(me,u);t.addOperation(pe),de.applyOperation(pe)}function isSameTree(me,u){return me===u||me instanceof RootElement&&u instanceof RootElement}function deleteContent(me,u,t={}){if(u.isCollapsed)return;const de=u.getFirstRange();if(de.root.rootName=="$graveyard")return;const pe=me.schema;me.change(Le=>{if(!t.doNotResetEntireContent&&shouldEntireContentBeReplacedWithParagraph(pe,u)){replaceEntireContentWithParagraph(Le,u);return}const Ye={};if(!t.doNotAutoparagraph){const ht=u.getSelectedElement();ht&&Object.assign(Ye,pe.getAttributesWithProperty(ht,"copyOnReplace",!0))}const[tt,st]=getLivePositionsForSelectedBlocks(de);tt.isTouching(st)||Le.remove(Le.createRange(tt,st)),t.leaveUnmerged||(mergeBranches(Le,tt,st),pe.removeDisallowedAttributes(tt.parent.getChildren(),Le)),collapseSelectionAt(Le,u,tt),!t.doNotAutoparagraph&&shouldAutoparagraph(pe,tt)&&insertParagraph(Le,tt,u,Ye),tt.detach(),st.detach()})}function getLivePositionsForSelectedBlocks(me){const u=me.root.document.model,t=me.start;let de=me.end;if(u.hasContent(me,{ignoreMarkers:!0})){const pe=getParentBlock(de);if(pe&&de.isTouching(u.createPositionAt(pe,0))){const Le=u.createSelection(me);u.modifySelection(Le,{direction:"backward"});const Ye=Le.getLastPosition(),tt=u.createRange(Ye,de);u.hasContent(tt,{ignoreMarkers:!0})||(de=Ye)}}return[LivePosition.fromPosition(t,"toPrevious"),LivePosition.fromPosition(de,"toNext")]}function getParentBlock(me){const u=me.parent,t=u.root.document.model.schema,de=u.getAncestors({parentFirst:!0,includeSelf:!0});for(const pe of de){if(t.isLimit(pe))return null;if(t.isBlock(pe))return pe}}function mergeBranches(me,u,t){const de=me.model;if(!checkShouldMerge(me.model.schema,u,t))return;const[pe,Le]=getAncestorsJustBelowCommonAncestor(u,t);!pe||!Le||(!de.hasContent(pe,{ignoreMarkers:!0})&&de.hasContent(Le,{ignoreMarkers:!0})?mergeBranchesRight(me,u,t,pe.parent):mergeBranchesLeft(me,u,t,pe.parent))}function mergeBranchesLeft(me,u,t,de){const pe=u.parent,Le=t.parent;if(!(pe==de||Le==de)){for(u=me.createPositionAfter(pe),t=me.createPositionBefore(Le),t.isEqual(u)||me.insert(Le,u),me.merge(u);t.parent.isEmpty;){const Ye=t.parent;t=me.createPositionBefore(Ye),me.remove(Ye)}checkShouldMerge(me.model.schema,u,t)&&mergeBranchesLeft(me,u,t,de)}}function mergeBranchesRight(me,u,t,de){const pe=u.parent,Le=t.parent;if(!(pe==de||Le==de)){for(u=me.createPositionAfter(pe),t=me.createPositionBefore(Le),t.isEqual(u)||me.insert(pe,t);u.parent.isEmpty;){const Ye=u.parent;u=me.createPositionBefore(Ye),me.remove(Ye)}t=me.createPositionBefore(Le),mergeRight(me,t),checkShouldMerge(me.model.schema,u,t)&&mergeBranchesRight(me,u,t,de)}}function mergeRight(me,u){const t=u.nodeBefore,de=u.nodeAfter;t.name!=de.name&&me.rename(t,de.name),me.clearAttributes(t),me.setAttributes(Object.fromEntries(de.getAttributes()),t),me.merge(u)}function checkShouldMerge(me,u,t){const de=u.parent,pe=t.parent;return de==pe||me.isLimit(de)||me.isLimit(pe)?!1:isCrossingLimitElement(u,t,me)}function getAncestorsJustBelowCommonAncestor(me,u){const t=me.getAncestors(),de=u.getAncestors();let pe=0;for(;t[pe]&&t[pe]==de[pe];)pe++;return[t[pe],de[pe]]}function shouldAutoparagraph(me,u){const t=me.checkChild(u,"$text"),de=me.checkChild(u,"paragraph");return!t&&de}function isCrossingLimitElement(me,u,t){const de=new Range(me,u);for(const pe of de.getWalker())if(t.isLimit(pe.item))return!1;return!0}function insertParagraph(me,u,t,de={}){const pe=me.createElement("paragraph");me.model.schema.setAllowedAttributes(pe,de,me),me.insert(pe,u),collapseSelectionAt(me,t,me.createPositionAt(pe,0))}function replaceEntireContentWithParagraph(me,u){const t=me.model.schema.getLimitElement(u);me.remove(me.createRangeIn(t)),insertParagraph(me,me.createPositionAt(t,0),u)}function shouldEntireContentBeReplacedWithParagraph(me,u){const t=me.getLimitElement(u);if(!u.containsEntireContent(t))return!1;const de=u.getFirstRange();return de.start.parent==de.end.parent?!1:me.checkChild(t,"paragraph")}function collapseSelectionAt(me,u,t){u instanceof DocumentSelection?me.setSelection(t):u.setTo(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedContent(me,u){return me.change(t=>{const de=t.createDocumentFragment(),pe=u.getFirstRange();if(!pe||pe.isCollapsed)return de;const Le=pe.start.root,Ye=pe.start.getCommonPath(pe.end),tt=Le.getNodeByPath(Ye);let st;pe.start.parent==pe.end.parent?st=pe:st=t.createRange(t.createPositionAt(tt,pe.start.path[Ye.length]),t.createPositionAt(tt,pe.end.path[Ye.length]+1));const ht=st.end.offset-st.start.offset;for(const mt of st.getItems({shallow:!0}))mt.is("$textProxy")?t.appendText(mt.data,mt.getAttributes(),de):t.append(t.cloneElement(mt,!0),de);if(st!=pe){const mt=pe._getTransformedByMove(st.start,t.createPositionAt(de,0),ht)[0],gt=t.createRange(t.createPositionAt(de,0),mt.start),bt=t.createRange(mt.end,t.createPositionAt(de,"end"));removeRangeContent(bt,t),removeRangeContent(gt,t)}return de})}function removeRangeContent(me,u){const t=[];Array.from(me.getItems({direction:"backward"})).map(de=>u.createRangeOn(de)).filter(de=>(de.start.isAfter(me.start)||de.start.isEqual(me.start))&&(de.end.isBefore(me.end)||de.end.isEqual(me.end))).forEach(de=>{t.push(de.start.parent),u.remove(de)}),t.forEach(de=>{let pe=de;for(;pe.parent&&pe.isEmpty;){const Le=u.createRangeOn(pe);pe=pe.parent,u.remove(Le)}})}function insertContent(me,u,t){return me.change(de=>{const pe=t||me.document.selection;pe.isCollapsed||me.deleteContent(pe,{doNotAutoparagraph:!0});const Le=new Insertion(me,de,pe.anchor),Ye=[];let tt;if(u.is("documentFragment")){if(u.markers.size){const mt=[];for(const[gt,bt]of u.markers){const{start:_t,end:vt}=bt,Tt=_t.isEqual(vt);mt.push({position:_t,name:gt,isCollapsed:Tt},{position:vt,name:gt,isCollapsed:Tt})}mt.sort(({position:gt},{position:bt})=>gt.isBefore(bt)?1:-1);for(const{position:gt,name:bt,isCollapsed:_t}of mt){let vt=null,Tt=null;const St=gt.parent===u&&gt.isAtStart,Rt=gt.parent===u&&gt.isAtEnd;!St&&!Rt?(vt=de.createElement("$marker"),de.insert(vt,gt)):_t&&(Tt=St?"start":"end"),Ye.push({name:bt,element:vt,collapsed:Tt})}}tt=u.getChildren()}else tt=[u];Le.handleNodes(tt);let st=Le.getSelectionRange();if(u.is("documentFragment")&&Ye.length){const mt=st?LiveRange.fromRange(st):null,gt={};for(let bt=Ye.length-1;bt>=0;bt--){const{name:_t,element:vt,collapsed:Tt}=Ye[bt],St=!gt[_t];if(St&&(gt[_t]=[]),vt){const Rt=de.createPositionAt(vt,"before");gt[_t].push(Rt),de.remove(vt)}else{const Rt=Le.getAffectedRange();if(!Rt){Tt&&gt[_t].push(Le.position);continue}Tt?gt[_t].push(Rt[Tt]):gt[_t].push(St?Rt.start:Rt.end)}}for(const[bt,[_t,vt]]of Object.entries(gt))_t&&vt&&_t.root===vt.root&&_t.root.document&&!de.model.markers.has(bt)&&de.addMarker(bt,{usingOperation:!0,affectsData:!0,range:new Range(_t,vt)});mt&&(st=mt.toRange(),mt.detach())}/* istanbul ignore else -- @preserve */st&&(pe instanceof DocumentSelection?de.setSelection(st):pe.setTo(st));const ht=Le.getAffectedRange()||me.createRange(pe.anchor);return Le.destroy(),ht})}class Insertion{constructor(u,t,de){wt(this,"model");wt(this,"writer");wt(this,"position");wt(this,"canMergeWith");wt(this,"schema");wt(this,"_documentFragment");wt(this,"_documentFragmentPosition");wt(this,"_firstNode",null);wt(this,"_lastNode",null);wt(this,"_lastAutoParagraph",null);wt(this,"_filterAttributesOf",[]);wt(this,"_affectedStart",null);wt(this,"_affectedEnd",null);wt(this,"_nodeToSelect",null);this.model=u,this.writer=t,this.position=de,this.canMergeWith=new Set([this.position.parent]),this.schema=u.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(u){for(const t of Array.from(u))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(u){const t=this.writer.createPositionAfter(this._lastNode),de=this.writer.createPositionAfter(u);if(de.isAfter(t)){this._lastNode=u;/* istanbul ignore if -- @preserve */if(this.position.parent!=u||!this.position.isAtEnd)throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=de,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Range._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Range(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(u){if(!this._checkAndSplitToAllowedPosition(u)){this.schema.isObject(u)||this._handleDisallowedNode(u);return}this._appendToFragment(u),this._firstNode||(this._firstNode=u),this._lastNode=u}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const u=LivePosition.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=u.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=u.toPosition(),u.detach()}_handleDisallowedNode(u){u.is("element")&&this.handleNodes(u.getChildren())}_appendToFragment(u){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,u))throw new CKEditorError("insertcontent-wrong-position",this,{node:u,position:this.position});this.writer.insert(u,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(u.offsetSize),this.schema.isObject(u)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=u:this._nodeToSelect=null,this._filterAttributesOf.push(u)}_setAffectedBoundaries(u){this._affectedStart||(this._affectedStart=LivePosition.fromPosition(u,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(u))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=LivePosition.fromPosition(u,"toNext"))}_mergeOnLeft(){const u=this._firstNode;if(!(u instanceof Element)||!this._canMergeLeft(u))return;const t=LivePosition._createBefore(u);t.stickiness="toNext";const de=LivePosition.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(t.nodeBefore,"end","toNext")),this.position=de.toPosition(),de.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const u=this._lastNode;if(!(u instanceof Element)||!this._canMergeRight(u))return;const t=LivePosition._createAfter(u);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=Position._createAt(t.nodeBefore,"end");const de=LivePosition.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(t.nodeBefore,0,"toPrevious")),this.position=de.toPosition(),de.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(u){const t=u.previousSibling;return t instanceof Element&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,u)}_canMergeRight(u){const t=u.nextSibling;return t instanceof Element&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(u,t)}_insertAutoParagraph(){this._insertPartialFragment();const u=this.writer.createElement("paragraph");this.writer.insert(u,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=u,this.position=this.writer.createPositionAt(u,0)}_checkAndSplitToAllowedPosition(u){const t=this._getAllowedIn(this.position.parent,u);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const de=this.position.parent;this.position=this.writer.createPositionBefore(de),de.isEmpty&&de.parent===t&&this.writer.remove(de)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const de=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=de,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,u)||this._insertAutoParagraph(),!0}_getAllowedIn(u,t){return this.schema.checkChild(u,t)||this.schema.checkChild(u,"paragraph")&&this.schema.checkChild("paragraph",t)?u:this.schema.isLimit(u)?null:this._getAllowedIn(u.parent,t)}}function insertObject(me,u,t,de={}){if(!me.schema.isObject(u))throw new CKEditorError("insertobject-element-not-an-object",me,{object:u});const pe=t||me.document.selection;let Le=pe;de.findOptimalPosition&&me.schema.isBlock(u)&&(Le=me.createSelection(me.schema.findOptimalInsertionRange(pe,de.findOptimalPosition)));const Ye=first(pe.getSelectedBlocks()),tt={};return Ye&&Object.assign(tt,me.schema.getAttributesWithProperty(Ye,"copyOnReplace",!0)),me.change(st=>{Le.isCollapsed||me.deleteContent(Le,{doNotAutoparagraph:!0});let ht=u;const mt=Le.anchor.parent;!me.schema.checkChild(mt,u)&&me.schema.checkChild(mt,"paragraph")&&me.schema.checkChild("paragraph",u)&&(ht=st.createElement("paragraph"),st.insert(u,ht)),me.schema.setAllowedAttributes(ht,tt,st);const gt=me.insertContent(ht,Le);return gt.isCollapsed||de.setSelection&&updateSelection(st,u,de.setSelection,tt),gt})}function updateSelection(me,u,t,de){const pe=me.model;if(t=="on"){me.setSelection(u,"on");return}if(t!="after")throw new CKEditorError("insertobject-invalid-place-parameter-value",pe);let Le=u.nextSibling;if(pe.schema.isInline(u)){me.setSelection(u,"after");return}!(Le&&pe.schema.checkChild(Le,"$text"))&&pe.schema.checkChild(u.parent,"paragraph")&&(Le=me.createElement("paragraph"),pe.schema.setAllowedAttributes(Le,de,me),pe.insertContent(Le,me.createPositionAfter(u))),Le&&me.setSelection(Le,0)}const wordBoundaryCharacters=' ,.?!:;"-()';function modifySelection(me,u,t={}){const de=me.schema,pe=t.direction!="backward",Le=t.unit?t.unit:"character",Ye=!!t.treatEmojiAsSingleUnit,tt=u.focus,st=new TreeWalker({boundaries:getSearchRange(tt,pe),singleCharacters:!0,direction:pe?"forward":"backward"}),ht={walker:st,schema:de,isForward:pe,unit:Le,treatEmojiAsSingleUnit:Ye};let mt;for(;mt=st.next();){if(mt.done)return;const gt=tryExtendingTo(ht,mt.value);if(gt){u instanceof DocumentSelection?me.change(bt=>{bt.setSelectionFocus(gt)}):u.setFocus(gt);return}}}function tryExtendingTo(me,u){const{isForward:t,walker:de,unit:pe,schema:Le,treatEmojiAsSingleUnit:Ye}=me,{type:tt,item:st,nextPosition:ht}=u;if(tt=="text")return me.unit==="word"?getCorrectWordBreakPosition(de,t):getCorrectPosition(de,pe,Ye);if(tt==(t?"elementStart":"elementEnd")){if(Le.isSelectable(st))return Position._createAt(st,t?"after":"before");if(Le.checkChild(ht,"$text"))return ht}else{if(Le.isLimit(st)){de.skip(()=>!0);return}if(Le.checkChild(ht,"$text"))return ht}}function getCorrectPosition(me,u,t){const de=me.position.textNode;if(de){const pe=de.data;let Le=me.position.offset-de.startOffset;for(;isInsideSurrogatePair(pe,Le)||u=="character"&&isInsideCombinedSymbol(pe,Le)||t&&isInsideEmojiSequence(pe,Le);)me.next(),Le=me.position.offset-de.startOffset}return me.position}function getCorrectWordBreakPosition(me,u){let t=me.position.textNode;for(t||(t=u?me.position.nodeAfter:me.position.nodeBefore);t&&t.is("$text");){const de=me.position.offset-t.startOffset;if(isAtNodeBoundary(t,de,u))t=u?me.position.nodeAfter:me.position.nodeBefore;else{if(isAtWordBoundary(t.data,de,u))break;me.next()}}return me.position}function getSearchRange(me,u){const t=me.root,de=Position._createAt(t,u?"end":0);return u?new Range(me,de):new Range(de,me)}function isAtWordBoundary(me,u,t){const de=u+(t?0:-1);return wordBoundaryCharacters.includes(me.charAt(de))}function isAtNodeBoundary(me,u,t){return u===(t?me.offsetSize:0)}let Model$1=class extends ObservableMixin(){constructor(){super();wt(this,"markers");wt(this,"document");wt(this,"schema");wt(this,"_pendingChanges");wt(this,"_currentWriter");this.markers=new MarkerCollection,this.document=new Document(this),this.schema=new Schema,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,de)=>{de[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),injectSelectionPostFixer(this),this.document.registerPostFixer(autoParagraphEmptyRoots),this.on("insertContent",(t,[de,pe])=>{t.return=insertContent(this,de,pe)}),this.on("insertObject",(t,[de,pe,Le])=>{t.return=insertObject(this,de,pe,Le)}),this.on("canEditAt",t=>{const de=!this.document.isReadOnly;t.return=de,de||t.stop()})}change(t){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Batch,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(de){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(de,this)}}enqueueChange(t,de){try{t?typeof t=="function"?(de=t,t=new Batch):t instanceof Batch||(t=new Batch(t)):t=new Batch,this._pendingChanges.push({batch:t,callback:de}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(pe){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(pe,this)}}applyOperation(t){t._execute()}insertContent(t,de,pe,...Le){const Ye=normalizeSelectable(de,pe);return this.fire("insertContent",[t,Ye,pe,...Le])}insertObject(t,de,pe,Le,...Ye){const tt=normalizeSelectable(de,pe);return this.fire("insertObject",[t,tt,Le,Le,...Ye])}deleteContent(t,de){deleteContent(this,t,de)}modifySelection(t,de){modifySelection(this,t,de)}getSelectedContent(t){return getSelectedContent(this,t)}hasContent(t,de={}){const pe=t instanceof Range?t:Range._createIn(t);if(pe.isCollapsed)return!1;const{ignoreWhitespaces:Le=!1,ignoreMarkers:Ye=!1}=de;if(!Ye){for(const tt of this.markers.getMarkersIntersectingRange(pe))if(tt.affectsData)return!0}for(const tt of pe.getItems())if(this.schema.isContent(tt))if(tt.is("$textProxy"))if(Le){if(tt.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(t){const de=normalizeSelectable(t);return this.fire("canEditAt",[de])}createPositionFromPath(t,de,pe){return new Position(t,de,pe)}createPositionAt(t,de){return Position._createAt(t,de)}createPositionAfter(t){return Position._createAfter(t)}createPositionBefore(t){return Position._createBefore(t)}createRange(t,de){return new Range(t,de)}createRangeIn(t){return Range._createIn(t)}createRangeOn(t){return Range._createOn(t)}createSelection(...t){return new Selection(...t)}createBatch(t){return new Batch(t)}createOperationFromJSON(t){return OperationFactory.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const de=this._pendingChanges[0].batch;this._currentWriter=new Writer(this,de);const pe=this._pendingChanges[0].callback(this._currentWriter);t.push(pe),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}};function normalizeSelectable(me,u){if(me)return me instanceof Selection||me instanceof DocumentSelection?me:me instanceof Node$1?u||u===0?new Selection(me,u):me.is("rootElement")?new Selection(me,"in"):new Selection(me,"on"):new Selection(me)}class ClickObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType","click")}onDomEvent(t){this.fire(t.type,t)}}class MouseObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(t){this.fire(t.type,t)}}class TouchObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(t){this.fire(t.type,t)}}class UpcastWriter{constructor(u){wt(this,"document");this.document=u}createDocumentFragment(u){return new DocumentFragment$1(this.document,u)}createElement(u,t,de){return new Element$1(this.document,u,t,de)}createText(u){return new Text$1(this.document,u)}clone(u,t=!1){return u._clone(t)}appendChild(u,t){return t._appendChild(u)}insertChild(u,t,de){return de._insertChild(u,t)}removeChildren(u,t,de){return de._removeChildren(u,t)}remove(u){const t=u.parent;return t?this.removeChildren(t.getChildIndex(u),1,t):[]}replace(u,t){const de=u.parent;if(de){const pe=de.getChildIndex(u);return this.removeChildren(pe,1,de),this.insertChild(pe,t,de),!0}return!1}unwrapElement(u){const t=u.parent;if(t){const de=t.getChildIndex(u);this.remove(u),this.insertChild(de,u.getChildren(),t)}}rename(u,t){const de=new Element$1(this.document,u,t.getAttributes(),t.getChildren());return this.replace(t,de)?de:null}setAttribute(u,t,de){de._setAttribute(u,t)}removeAttribute(u,t){t._removeAttribute(u)}addClass(u,t){t._addClass(u)}removeClass(u,t){t._removeClass(u)}setStyle(u,t,de){isPlainObject(u)&&de===void 0?t._setStyle(u):de._setStyle(u,t)}removeStyle(u,t){t._removeStyle(u)}setCustomProperty(u,t,de){de._setCustomProperty(u,t)}removeCustomProperty(u,t){return t._removeCustomProperty(u)}createPositionAt(u,t){return Position$1._createAt(u,t)}createPositionAfter(u){return Position$1._createAfter(u)}createPositionBefore(u){return Position$1._createBefore(u)}createRange(u,t){return new Range$1(u,t)}createRangeOn(u){return Range$1._createOn(u)}createRangeIn(u){return Range$1._createIn(u)}createSelection(...u){return new Selection$1(...u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_COLOR_REGEXP=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,RGB_COLOR_REGEXP=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,RGBA_COLOR_REGEXP=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,HSL_COLOR_REGEXP=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,HSLA_COLOR_REGEXP=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,CSS_SHORTHAND_VALUE_REGEXP=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,COLOR_NAMES=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function isColor(me){return me.startsWith("#")?HEX_COLOR_REGEXP.test(me):me.startsWith("rgb")?RGB_COLOR_REGEXP.test(me)||RGBA_COLOR_REGEXP.test(me):me.startsWith("hsl")?HSL_COLOR_REGEXP.test(me)||HSLA_COLOR_REGEXP.test(me):COLOR_NAMES.has(me.toLowerCase())}const lineStyleValues=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function isLineStyle(me){return lineStyleValues.includes(me)}const lengthRegExp=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function isLength(me){return lengthRegExp.test(me)}const PERCENTAGE_VALUE_REGEXP=/^[+-]?[0-9]*([.][0-9]+)?%$/;function isPercentage(me){return PERCENTAGE_VALUE_REGEXP.test(me)}const repeatValues=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function isRepeat(me){return repeatValues.includes(me)}const positionValues=["center","top","bottom","left","right"];function isPosition(me){return positionValues.includes(me)}const attachmentValues=["fixed","scroll","local"];function isAttachment(me){return attachmentValues.includes(me)}const urlRegExp=/^url\(/;function isURL(me){return urlRegExp.test(me)}function getBoxSidesValues(me=""){if(me==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const u=getShorthandValues(me),t=u[0],de=u[2]||t,pe=u[1]||t,Le=u[3]||pe;return{top:t,bottom:de,right:pe,left:Le}}function getBoxSidesValueReducer(me){return u=>{const{top:t,right:de,bottom:pe,left:Le}=u,Ye=[];return[t,de,Le,pe].every(tt=>!!tt)?Ye.push([me,getBoxSidesShorthandValue(u)]):(t&&Ye.push([me+"-top",t]),de&&Ye.push([me+"-right",de]),pe&&Ye.push([me+"-bottom",pe]),Le&&Ye.push([me+"-left",Le])),Ye}}function getBoxSidesShorthandValue({top:me,right:u,bottom:t,left:de}){const pe=[];return de!==u?pe.push(me,u,t,de):t!==me?pe.push(me,u,t):u!==me?pe.push(me,u):pe.push(me),pe.join(" ")}function getPositionShorthandNormalizer(me){return u=>({path:me,value:getBoxSidesValues(u)})}function getShorthandValues(me){const u=me.trim().slice(0,1500).matchAll(CSS_SHORTHAND_VALUE_REGEXP);return Array.from(u).map(t=>t[0])}function addBackgroundRules(me){me.setNormalizer("background",getBackgroundNormalizer()),me.setNormalizer("background-color",getBackgroundColorNormalizer()),me.setReducer("background",getBackgroundReducer()),me.setStyleRelation("background",["background-color"])}function getBackgroundNormalizer(){return me=>{const u={},t=getShorthandValues(me);for(const de of t)isRepeat(de)?(u.repeat=u.repeat||[],u.repeat.push(de)):isPosition(de)?(u.position=u.position||[],u.position.push(de)):isAttachment(de)?u.attachment=de:isColor(de)?u.color=de:isURL(de)&&(u.image=de);return{path:"background",value:u}}}function getBackgroundColorNormalizer(){return me=>({path:"background.color",value:me})}function getBackgroundReducer(){return me=>{const u=[];return u.push(["background-color",me.color]),u}}function addBorderRules(me){me.setNormalizer("border",getBorderNormalizer()),me.setNormalizer("border-top",getBorderPositionNormalizer("top")),me.setNormalizer("border-right",getBorderPositionNormalizer("right")),me.setNormalizer("border-bottom",getBorderPositionNormalizer("bottom")),me.setNormalizer("border-left",getBorderPositionNormalizer("left")),me.setNormalizer("border-color",getBorderPropertyNormalizer("color")),me.setNormalizer("border-width",getBorderPropertyNormalizer("width")),me.setNormalizer("border-style",getBorderPropertyNormalizer("style")),me.setNormalizer("border-top-color",getBorderPropertyPositionNormalizer("color","top")),me.setNormalizer("border-top-style",getBorderPropertyPositionNormalizer("style","top")),me.setNormalizer("border-top-width",getBorderPropertyPositionNormalizer("width","top")),me.setNormalizer("border-right-color",getBorderPropertyPositionNormalizer("color","right")),me.setNormalizer("border-right-style",getBorderPropertyPositionNormalizer("style","right")),me.setNormalizer("border-right-width",getBorderPropertyPositionNormalizer("width","right")),me.setNormalizer("border-bottom-color",getBorderPropertyPositionNormalizer("color","bottom")),me.setNormalizer("border-bottom-style",getBorderPropertyPositionNormalizer("style","bottom")),me.setNormalizer("border-bottom-width",getBorderPropertyPositionNormalizer("width","bottom")),me.setNormalizer("border-left-color",getBorderPropertyPositionNormalizer("color","left")),me.setNormalizer("border-left-style",getBorderPropertyPositionNormalizer("style","left")),me.setNormalizer("border-left-width",getBorderPropertyPositionNormalizer("width","left")),me.setExtractor("border-top",getBorderPositionExtractor("top")),me.setExtractor("border-right",getBorderPositionExtractor("right")),me.setExtractor("border-bottom",getBorderPositionExtractor("bottom")),me.setExtractor("border-left",getBorderPositionExtractor("left")),me.setExtractor("border-top-color","border.color.top"),me.setExtractor("border-right-color","border.color.right"),me.setExtractor("border-bottom-color","border.color.bottom"),me.setExtractor("border-left-color","border.color.left"),me.setExtractor("border-top-width","border.width.top"),me.setExtractor("border-right-width","border.width.right"),me.setExtractor("border-bottom-width","border.width.bottom"),me.setExtractor("border-left-width","border.width.left"),me.setExtractor("border-top-style","border.style.top"),me.setExtractor("border-right-style","border.style.right"),me.setExtractor("border-bottom-style","border.style.bottom"),me.setExtractor("border-left-style","border.style.left"),me.setReducer("border-color",getBoxSidesValueReducer("border-color")),me.setReducer("border-style",getBoxSidesValueReducer("border-style")),me.setReducer("border-width",getBoxSidesValueReducer("border-width")),me.setReducer("border-top",getBorderPositionReducer("top")),me.setReducer("border-right",getBorderPositionReducer("right")),me.setReducer("border-bottom",getBorderPositionReducer("bottom")),me.setReducer("border-left",getBorderPositionReducer("left")),me.setReducer("border",getBorderReducer()),me.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),me.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),me.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),me.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),me.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),me.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),me.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),me.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function getBorderNormalizer(){return me=>{const{color:u,style:t,width:de}=normalizeBorderShorthand(me);return{path:"border",value:{color:getBoxSidesValues(u),style:getBoxSidesValues(t),width:getBoxSidesValues(de)}}}}function getBorderPositionNormalizer(me){return u=>{const{color:t,style:de,width:pe}=normalizeBorderShorthand(u),Le={};return t!==void 0&&(Le.color={[me]:t}),de!==void 0&&(Le.style={[me]:de}),pe!==void 0&&(Le.width={[me]:pe}),{path:"border",value:Le}}}function getBorderPropertyNormalizer(me){return u=>({path:"border",value:toBorderPropertyShorthand(u,me)})}function toBorderPropertyShorthand(me,u){return{[u]:getBoxSidesValues(me)}}function getBorderPropertyPositionNormalizer(me,u){return t=>({path:"border",value:{[me]:{[u]:t}}})}function getBorderPositionExtractor(me){return(u,t)=>{if(t.border)return extractBorderPosition(t.border,me)}}function extractBorderPosition(me,u){const t={};return me.width&&me.width[u]&&(t.width=me.width[u]),me.style&&me.style[u]&&(t.style=me.style[u]),me.color&&me.color[u]&&(t.color=me.color[u]),t}function normalizeBorderShorthand(me){const u={},t=getShorthandValues(me);for(const de of t)isLength(de)||/thin|medium|thick/.test(de)?u.width=de:isLineStyle(de)?u.style=de:u.color=de;return u}function getBorderReducer(){return u=>{const t=extractBorderPosition(u,"top"),de=extractBorderPosition(u,"right"),pe=extractBorderPosition(u,"bottom"),Le=extractBorderPosition(u,"left"),Ye=[t,de,pe,Le],tt={width:me(Ye,"width"),style:me(Ye,"style"),color:me(Ye,"color")},st=reduceBorderPosition(tt,"all");return st.length?st:[...Object.entries(tt).reduce((mt,[gt,bt])=>(bt&&(mt.push([`border-${gt}`,bt]),Ye.forEach(_t=>delete _t[gt])),mt),[]),...reduceBorderPosition(t,"top"),...reduceBorderPosition(de,"right"),...reduceBorderPosition(pe,"bottom"),...reduceBorderPosition(Le,"left")]};function me(u,t){return u.map(de=>de[t]).reduce((de,pe)=>de==pe?de:null)}}function getBorderPositionReducer(me){return u=>reduceBorderPosition(u,me)}function reduceBorderPosition(me,u){const t=[];if(me&&me.width&&t.push("width"),me&&me.style&&t.push("style"),me&&me.color&&t.push("color"),t.length==3){const de=t.map(pe=>me[pe]).join(" ");return[u=="all"?["border",de]:[`border-${u}`,de]]}return u=="all"?[]:t.map(de=>[`border-${u}-${de}`,me[de]])}function addMarginRules(me){me.setNormalizer("margin",getPositionShorthandNormalizer("margin")),me.setNormalizer("margin-top",u=>({path:"margin.top",value:u})),me.setNormalizer("margin-right",u=>({path:"margin.right",value:u})),me.setNormalizer("margin-bottom",u=>({path:"margin.bottom",value:u})),me.setNormalizer("margin-left",u=>({path:"margin.left",value:u})),me.setReducer("margin",getBoxSidesValueReducer("margin")),me.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function addPaddingRules(me){me.setNormalizer("padding",getPositionShorthandNormalizer("padding")),me.setNormalizer("padding-top",u=>({path:"padding.top",value:u})),me.setNormalizer("padding-right",u=>({path:"padding.right",value:u})),me.setNormalizer("padding-bottom",u=>({path:"padding.bottom",value:u})),me.setNormalizer("padding-left",u=>({path:"padding.left",value:u})),me.setReducer("padding",getBoxSidesValueReducer("padding")),me.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Watchdog{constructor(u){wt(this,"crashes",[]);wt(this,"state","initializing");wt(this,"_crashNumberLimit");wt(this,"_now",Date.now);wt(this,"_minimumNonErrorTimePeriod");wt(this,"_boundErrorHandler");wt(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof u.crashNumberLimit=="number"?u.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof u.minimumNonErrorTimePeriod=="number"?u.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const de="error"in t?t.error:t.reason;de instanceof Error&&this._handleError(de,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(u,t){this._listeners[u]||(this._listeners[u]=[]),this._listeners[u].push(t)}off(u,t){this._listeners[u]=this._listeners[u].filter(de=>de!==t)}_fire(u,...t){const de=this._listeners[u]||[];for(const pe of de)pe.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(u,t){if(this._shouldReactToError(u)){this.crashes.push({message:u.message,stack:u.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const de=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:u,causesRestart:de}),de?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(u){return u.is&&u.is("CKEditorError")&&u.context!==void 0&&u.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(u)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const u=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(u-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSubNodes(me,u=new Set){const t=[me],de=new Set;let pe=0;for(;t.length>pe;){const Le=t[pe++];if(!(de.has(Le)||!shouldNodeBeIncluded(Le)||u.has(Le)))if(de.add(Le),Symbol.iterator in Le)try{for(const Ye of Le)t.push(Ye)}catch{}else for(const Ye in Le)Ye!=="defaultValue"&&t.push(Le[Ye])}return de}function shouldNodeBeIncluded(me){const u=Object.prototype.toString.call(me),t=typeof me;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||u==="[object Date]"||u==="[object RegExp]"||u==="[object Module]"||me===void 0||me===null||me._watchdogExcluded||me instanceof EventTarget||me instanceof Event)}function areConnectedThroughProperties(me,u,t=new Set){if(me===u&&isObject$1(me))return!0;const de=getSubNodes(me,t),pe=getSubNodes(u,t);for(const Le of de)if(pe.has(Le))return!0;return!1}function isObject$1(me){return typeof me=="object"&&me!==null}class EditorWatchdog extends Watchdog{constructor(t,de={}){super(de);wt(this,"_editor",null);wt(this,"_lifecyclePromise",null);wt(this,"_throttledSave");wt(this,"_data");wt(this,"_lastDocumentVersion");wt(this,"_elementOrData");wt(this,"_initUsingData",!0);wt(this,"_editables",{});wt(this,"_config");wt(this,"_excludedProps");this._throttledSave=throttle(this._save.bind(this),typeof de.saveInterval=="number"?de.saveInterval:5e3),t&&(this._creator=(pe,Le)=>t.create(pe,Le)),this._destructor=pe=>pe.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},de=[],pe=this._config.rootsAttributes||{},Le={};for(const[tt,st]of Object.entries(this._data.roots))st.isLoaded?(t[tt]="",Le[tt]=pe[tt]||{}):de.push(tt);const Ye={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:de,rootsAttributes:Le,_watchdogInitialData:this._data};return delete Ye.initialData,Ye.extraPlugins.push(EditorWatchdogInitPlugin),this._initUsingData?this.create(t,Ye,Ye.context):isElement$2(this._elementOrData)?this.create(this._elementOrData,Ye,Ye.context):this.create(this._editables,Ye,Ye.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,de=this._config,pe){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(de)||{},this._config.context=pe,this._creator(t,this._config))).then(Le=>{this._editor=Le,Le.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=Le.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(de){console.error(de,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,de=t.model.document.roots.filter(st=>st.isAttached()&&st.rootName!="$graveyard"),{plugins:pe}=t,Le=pe.has("CommentsRepository")&&pe.get("CommentsRepository"),Ye=pe.has("TrackChanges")&&pe.get("TrackChanges"),tt={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};de.forEach(st=>{tt.roots[st.rootName]={content:JSON.stringify(Array.from(st.getChildren())),attributes:JSON.stringify(Array.from(st.getAttributes())),isLoaded:st._isLoaded}});for(const st of t.model.markers)st._affectsData&&(tt.markers[st.name]={rangeJSON:st.getRange().toJSON(),usingOperation:st._managedUsingOperations,affectsData:st._affectsData});return Le&&(tt.commentThreads=JSON.stringify(Le.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),Ye&&(tt.suggestions=JSON.stringify(Ye.getSuggestions({toJSON:!0,skipNotAttached:!0}))),tt}_getEditables(){const t={};for(const de of this.editor.model.document.getRootNames()){const pe=this.editor.ui.getEditableElement(de);pe&&(t[de]=pe)}return t}_isErrorComingFromThisItem(t){return areConnectedThroughProperties(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return cloneDeepWith(t,(de,pe)=>{if(isElement$2(de)||pe==="context")return de})}}class EditorWatchdogInitPlugin{constructor(u){wt(this,"editor");wt(this,"_data");this.editor=u,this._data=u.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",u=>{u.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(u,t){if("name"in t){const de=u.createElement(t.name,t.attributes);if(t.children)for(const pe of t.children)de._appendChild(this._createNode(u,pe));return de}else return u.createText(t.data,t.attributes)}_restoreEditorData(u){const t=this.editor;Object.entries(this._data.roots).forEach(([de,{content:pe,attributes:Le}])=>{const Ye=JSON.parse(pe),tt=JSON.parse(Le),st=t.model.document.getRoot(de);for(const[ht,mt]of tt)u.setAttribute(ht,mt,st);for(const ht of Ye){const mt=this._createNode(u,ht);u.insert(mt,st,"end")}}),Object.entries(this._data.markers).forEach(([de,pe])=>{const{document:Le}=t.model,{rangeJSON:{start:Ye,end:tt},...st}=pe,ht=Le.getRoot(Ye.root),mt=u.createPositionFromPath(ht,Ye.path,Ye.stickiness),gt=u.createPositionFromPath(ht,tt.path,tt.stickiness),bt=u.createRange(mt,gt);u.addMarker(de,{range:bt,...st})})}_restoreCollaborationData(){const u=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);u.forEach(de=>{const pe=this.editor.config.get("collaboration.channelId"),Le=this.editor.plugins.get("CommentsRepository");Le.hasCommentThread(de.threadId)&&Le.getCommentThread(de.threadId).remove(),Le.addCommentThread({channelId:pe,...de})}),t.forEach(de=>{const pe=this.editor.plugins.get("TrackChangesEditing");if(pe.hasSuggestion(de.id)){const Le=pe.getSuggestion(de.id);Le.attributes=de.attributes}else pe.addSuggestionData(de)})}}const mainQueueId=Symbol("MainQueueId");class ContextWatchdog extends Watchdog{constructor(t,de={}){super(de);wt(this,"_watchdogs",new Map);wt(this,"_watchdogConfig");wt(this,"_context",null);wt(this,"_contextProps",new Set);wt(this,"_actionQueues",new ActionQueues);wt(this,"_contextConfig");wt(this,"_item");this._watchdogConfig=de,this._creator=pe=>t.create(pe),this._destructor=pe=>pe.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(mainQueueId,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const de=toArray$1(t);return Promise.all(de.map(pe=>this._actionQueues.enqueue(pe.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let Le;if(this._watchdogs.has(pe.id))throw new Error(`Item with the given id is already added: '${pe.id}'.`);if(pe.type==="editor")return Le=new EditorWatchdog(null,this._watchdogConfig),Le.setCreator(pe.creator),Le._setExcludedProperties(this._contextProps),pe.destructor&&Le.setDestructor(pe.destructor),this._watchdogs.set(pe.id,Le),Le.on("error",(Ye,{error:tt,causesRestart:st})=>{this._fire("itemError",{itemId:pe.id,error:tt}),st&&this._actionQueues.enqueue(pe.id,()=>new Promise(ht=>{const mt=()=>{Le.off("restart",mt),this._fire("itemRestart",{itemId:pe.id}),ht()};Le.on("restart",mt)}))}),Le.create(pe.sourceElementOrData,pe.config,this._context);throw new Error(`Not supported item type: '${pe.type}'.`)})))}remove(t){const de=toArray$1(t);return Promise.all(de.map(pe=>this._actionQueues.enqueue(pe,()=>{const Le=this._getWatchdog(pe);return this._watchdogs.delete(pe),Le.destroy()})))}destroy(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=getSubNodes(this._context),Promise.all(Array.from(this._watchdogs.values()).map(de=>(de._setExcludedProperties(this._contextProps),de.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(de=>de.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const de=this._watchdogs.get(t);if(!de)throw new Error(`Item with the given id was not registered: ${t}.`);return de}_isErrorComingFromThisItem(t){for(const de of this._watchdogs.values())if(de._isErrorComingFromThisItem(t))return!1;return areConnectedThroughProperties(this._context,t.context)}}class ActionQueues{constructor(){wt(this,"_onEmptyCallbacks",[]);wt(this,"_queues",new Map);wt(this,"_activeActions",0)}onEmpty(u){this._onEmptyCallbacks.push(u)}enqueue(u,t){const de=u===mainQueueId;this._activeActions++,this._queues.get(u)||this._queues.set(u,Promise.resolve());const Le=(de?Promise.all(this._queues.values()):Promise.all([this._queues.get(mainQueueId),this._queues.get(u)])).then(t),Ye=Le.catch(()=>{});return this._queues.set(u,Ye),Le.finally(()=>{this._activeActions--,this._queues.get(u)===Ye&&this._activeActions===0&&this._onEmptyCallbacks.forEach(tt=>tt())})}}function toArray$1(me){return Array.isArray(me)?me:[me]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Plugin extends ObservableMixin(){constructor(t){super();wt(this,"editor");wt(this,"_disableStack",new Set);this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable$1,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable$1),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function forceDisable$1(me){me.return=!1,me.stop()}class Command extends ObservableMixin(){constructor(t){super();wt(this,"editor");wt(this,"_isEnabledBasedOnSelection");wt(this,"_affectsData");wt(this,"_disableStack");this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",de=>{if(!this.affectsData)return;const pe=t.model.document.selection,Ye=!(pe.getFirstPosition().root.rootName=="$graveyard")&&t.model.canEditAt(pe);(t.isReadOnly||this._isEnabledBasedOnSelection&&!Ye)&&(de.return=!1,de.stop())},{priority:"highest"}),this.on("execute",de=>{this.isEnabled||de.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function forceDisable(me){me.return=!1,me.stop()}class MultiCommand extends Command{constructor(){super(...arguments);wt(this,"_childCommandsDefinitions",[])}refresh(){}execute(...t){const de=this._getFirstEnabledCommand();return!!de&&de.execute(t)}registerChildCommand(t,de={}){insertToPriorityArray(this._childCommandsDefinitions,{command:t,priority:de.priority||"normal"}),t.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const t=this._childCommandsDefinitions.find(({command:de})=>de.isEnabled);return t&&t.command}}class PluginCollection extends EmitterMixin(){constructor(t,de=[],pe=[]){super();wt(this,"_context");wt(this,"_plugins",new Map);wt(this,"_availablePlugins");wt(this,"_contextPlugins");this._context=t,this._availablePlugins=new Map;for(const Le of de)Le.pluginName&&this._availablePlugins.set(Le.pluginName,Le);this._contextPlugins=new Map;for(const[Le,Ye]of pe)this._contextPlugins.set(Le,Ye),this._contextPlugins.set(Ye,Le),Le.pluginName&&this._availablePlugins.set(Le.pluginName,Le)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const de=this._plugins.get(t);if(!de){let pe=t;throw typeof t=="function"&&(pe=t.pluginName||t.name),new CKEditorError("plugincollection-plugin-not-loaded",this._context,{plugin:pe})}return de}has(t){return this._plugins.has(t)}init(t,de=[],pe=[]){const Le=this,Ye=this._context;vt(t),St(t);const tt=t.filter($t=>!bt($t,de)),st=[...Tt(tt)];Dt(st,pe);const ht=Mt(st);return Bt(ht,"init").then(()=>Bt(ht,"afterInit")).then(()=>ht);function mt($t){return typeof $t=="function"}function gt($t){return mt($t)&&!!$t.isContextPlugin}function bt($t,kt){return kt.some(Et=>Et===$t||_t($t)===Et||_t(Et)===$t)}function _t($t){return mt($t)?$t.pluginName||$t.name:$t}function vt($t,kt=new Set){$t.forEach(Et=>{mt(Et)&&(kt.has(Et)||(kt.add(Et),Et.pluginName&&!Le._availablePlugins.has(Et.pluginName)&&Le._availablePlugins.set(Et.pluginName,Et),Et.requires&&vt(Et.requires,kt)))})}function Tt($t,kt=new Set){return $t.map(Et=>mt(Et)?Et:Le._availablePlugins.get(Et)).reduce((Et,At)=>kt.has(At)?Et:(kt.add(At),At.requires&&(St(At.requires,At),Tt(At.requires,kt).forEach(Ft=>Et.add(Ft))),Et.add(At)),new Set)}function St($t,kt=null){$t.map(Et=>mt(Et)?Et:Le._availablePlugins.get(Et)||Et).forEach(Et=>{Rt(Et,kt),Pt(Et,kt),Ot(Et,kt)})}function Rt($t,kt){if(!mt($t))throw kt?new CKEditorError("plugincollection-soft-required",Ye,{missingPlugin:$t,requiredBy:_t(kt)}):new CKEditorError("plugincollection-plugin-not-found",Ye,{plugin:$t})}function Pt($t,kt){if(gt(kt)&&!gt($t))throw new CKEditorError("plugincollection-context-required",Ye,{plugin:_t($t),requiredBy:_t(kt)})}function Ot($t,kt){if(kt&&bt($t,de))throw new CKEditorError("plugincollection-required",Ye,{plugin:_t($t),requiredBy:_t(kt)})}function Mt($t){return $t.map(kt=>{let Et=Le._contextPlugins.get(kt);return Et=Et||new kt(Ye),Le._add(kt,Et),Et})}function Bt($t,kt){return $t.reduce((Et,At)=>!At[kt]||Le._contextPlugins.has(At)?Et:Et.then(At[kt].bind(At)),Promise.resolve())}function Dt($t,kt){for(const Et of kt){if(typeof Et!="function")throw new CKEditorError("plugincollection-replace-plugin-invalid-type",null,{pluginItem:Et});const At=Et.pluginName;if(!At)throw new CKEditorError("plugincollection-replace-plugin-missing-name",null,{pluginItem:Et});if(Et.requires&&Et.requires.length)throw new CKEditorError("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:At});const Ft=Le._availablePlugins.get(At);if(!Ft)throw new CKEditorError("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:At});const zt=$t.indexOf(Ft);if(zt===-1){if(Le._contextPlugins.has(Ft))return;throw new CKEditorError("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:At})}if(Ft.requires&&Ft.requires.length)throw new CKEditorError("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:At});$t.splice(zt,1,Et),Le._availablePlugins.set(At,Et)}}}destroy(){const t=[];for(const[,de]of this)typeof de.destroy=="function"&&!this._contextPlugins.has(de)&&t.push(de.destroy());return Promise.all(t)}_add(t,de){this._plugins.set(t,de);const pe=t.pluginName;if(pe){if(this._plugins.has(pe))throw new CKEditorError("plugincollection-plugin-name-conflict",null,{pluginName:pe,plugin1:this._plugins.get(pe).constructor,plugin2:t});this._plugins.set(pe,de)}}}class Context{constructor(u){wt(this,"config");wt(this,"plugins");wt(this,"locale");wt(this,"t");wt(this,"editors");wt(this,"_contextOwner",null);const{translations:t,...de}=u||{};this.config=new Config(de,this.constructor.defaultConfig);const pe=this.constructor.builtinPlugins;this.config.define("plugins",pe),this.plugins=new PluginCollection(this,pe);const Le=this.config.get("language")||{};this.locale=new Locale({uiLanguage:typeof Le=="string"?Le:Le.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Collection}initPlugins(){const u=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const de of u.concat(t)){if(typeof de!="function")throw new CKEditorError("context-initplugins-constructor-only",null,{Plugin:de});if(de.isContextPlugin!==!0)throw new CKEditorError("context-initplugins-invalid-plugin",null,{Plugin:de})}return this.plugins.init(u,[],t)}destroy(){return Promise.all(Array.from(this.editors,u=>u.destroy())).then(()=>this.plugins.destroy())}_addEditor(u,t){if(this._contextOwner)throw new CKEditorError("context-addeditor-private-context");this.editors.add(u),t&&(this._contextOwner=u)}_removeEditor(u){return this.editors.has(u)&&this.editors.remove(u),this._contextOwner===u?this.destroy():Promise.resolve()}_getEditorConfig(){const u={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(u[t]=this.config.get(t));return u}static create(u){return new Promise(t=>{const de=new this(u);t(de.initPlugins().then(()=>de))})}}wt(Context,"defaultConfig"),wt(Context,"builtinPlugins");class ContextPlugin extends ObservableMixin(){constructor(t){super();wt(this,"context");this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class CommandCollection{constructor(){wt(this,"_commands");this._commands=new Map}add(u,t){this._commands.set(u,t)}get(u){return this._commands.get(u)}execute(u,...t){const de=this.get(u);if(!de)throw new CKEditorError("commandcollection-command-not-found",this,{commandName:u});return de.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const u of this.commands())u.destroy()}}class EditingKeystrokeHandler extends KeystrokeHandler{constructor(t){super();wt(this,"editor");this.editor=t}set(t,de,pe={}){if(typeof de=="string"){const Le=de;de=(Ye,tt)=>{this.editor.execute(Le),tt()}}super.set(t,de,pe)}}const DEFAULT_CATEGORY_ID="contentEditing",DEFAULT_GROUP_ID="common";class Accessibility{constructor(u){wt(this,"keystrokeInfos",new Map);wt(this,"_editor");this._editor=u;const t=u.config.get("menuBar.isVisible"),de=u.locale.t;this.addKeystrokeInfoCategory({id:DEFAULT_CATEGORY_ID,label:de("Content editing keystrokes"),description:de("These keyboard shortcuts allow for quick access to content editing features.")});const pe=[{label:de("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:de("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:de("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:de("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:de("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:de("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&pe.push({label:de("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:de("User interface and content navigation keystrokes"),description:de("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:pe}]})}addKeystrokeInfoCategory({id:u,label:t,description:de,groups:pe}){this.keystrokeInfos.set(u,{id:u,label:t,description:de,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:u,id:DEFAULT_GROUP_ID}),pe&&pe.forEach(Le=>{this.addKeystrokeInfoGroup({categoryId:u,...Le})})}addKeystrokeInfoGroup({categoryId:u=DEFAULT_CATEGORY_ID,id:t,label:de,keystrokes:pe}){const Le=this.keystrokeInfos.get(u);if(!Le)throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:u});Le.groups.set(t,{id:t,label:de,keystrokes:pe||[]})}addKeystrokeInfos({categoryId:u=DEFAULT_CATEGORY_ID,groupId:t=DEFAULT_GROUP_ID,keystrokes:de}){if(!this.keystrokeInfos.has(u))throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:u,keystrokes:de});const pe=this.keystrokeInfos.get(u);if(!pe.groups.has(t))throw new CKEditorError("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:u,keystrokes:de});pe.groups.get(t).keystrokes.push(...de)}}function getEditorUsageData(me){return{sessionId:getSessionId(),pageSessionId:getPageSessionID(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:getEditorType(me),plugins:getPluginsUsageData(me.plugins),distribution:getDistributionUsageData(),env:getEnvUsageData(),integration:Object.create(null),menuBar:{isVisible:!!me.config.get("menuBar.isVisible")},language:{ui:me.locale.uiLanguage,content:me.locale.contentLanguage},toolbar:{main:getToolbarUsageData(me.config.get("toolbar")),block:getToolbarUsageData(me.config.get("blockToolbar")),balloon:getToolbarUsageData(me.config.get("balloonToolbar"))}}}function getEditorType(me){return Object.getPrototypeOf(me).constructor.editorName}function getPluginsUsageData(me){return Array.from(me).filter(([u])=>!!u.pluginName).map(([u])=>{const{pluginName:t,isContextPlugin:de,isOfficialPlugin:pe,isPremiumPlugin:Le}=u;return{isContext:!!de,isOfficial:!!pe,isPremium:!!Le,name:t}})}function getToolbarUsageData(me){if(!me)return;const u=Array.isArray(me)?{items:me}:me,t=Le(u.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!u.shouldNotGroupWhenFull,items:pe(t)};function pe(Ye){return Ye.filter(tt=>tt!=="|"&&tt!=="-")}function Le(Ye){return Ye.flatMap(tt=>typeof tt=="string"?[tt]:Le(tt.items))}}function getDistributionUsageData(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function getEnvUsageData(){let me="unknown",u="unknown";return env.isMac?me="mac":env.isWindows?me="windows":env.isiOS?me="ios":env.isAndroid&&(me="android"),env.isGecko?u="gecko":env.isBlink?u="blink":env.isSafari&&(u="safari"),{os:me,browser:u}}function getSessionId(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",uid()),localStorage.getItem("__ckeditor-session-id")}function getPageSessionID(){return global$1.window.CKEDITOR_PAGE_SESSION_ID=global$1.window.CKEDITOR_PAGE_SESSION_ID||uid(),global$1.window.CKEDITOR_PAGE_SESSION_ID}class Editor extends ObservableMixin(){constructor(t={}){super();wt(this,"accessibility");wt(this,"commands");wt(this,"config");wt(this,"conversion");wt(this,"data");wt(this,"editing");wt(this,"locale");wt(this,"model");wt(this,"plugins");wt(this,"keystrokes");wt(this,"t");wt(this,"_context");wt(this,"_readOnlyLocks");if("sanitizeHtml"in t)throw new CKEditorError("editor-config-sanitizehtml-not-supported");const de=this.constructor,{translations:pe,...Le}=de.defaultConfig||{},{translations:Ye=pe,...tt}=t,st=t.language||Le.language;this._context=t.context||new Context({language:st,translations:Ye}),this._context._addEditor(this,!t.context);const ht=Array.from(de.builtinPlugins||[]);this.config=new Config(tt,Le),this.config.define("plugins",ht),this.config.define(this._context._getEditorConfig()),gt(this.config),this.plugins=new PluginCollection(this,ht,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new CommandCollection,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Model$1,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const mt=new StylesProcessor;this.data=new DataController(this.model,mt),this.editing=new EditingController(this.model,mt),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Conversion([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new EditingKeystrokeHandler(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Accessibility(this),bt(this);function gt(_t){let vt=_t.get("licenseKey");if(!vt&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(vt=window.CKEDITOR_GLOBAL_LICENSE_KEY,_t.set("licenseKey",vt)),!vt)throw new CKEditorError("license-key-missing")}function bt(_t){const vt=_t.config.get("licenseKey"),Tt=window[Symbol.for("cke distribution")]||"sh";function St(Et){_t.enableReadOnlyMode(Symbol("invalidLicense")),_t._showLicenseError(Et)}function Rt(Et){const At=Et.split(".");return At.length!=3?null:At[1]}function Pt(Et){return["exp","jti","vc"].every(Ft=>Ft in Et)}function Ot(Et){return Object.getOwnPropertyNames(Et).sort().filter(zt=>zt!="vc"&&Et[zt]!=null).map(zt=>Et[zt])}function Mt(Et){const{hostname:At}=new URL(window.location.href);if(Et.includes(At))return!0;const Ft=At.split(".");return Et.filter(zt=>zt.includes("*")).map(zt=>zt.split(".")).filter(zt=>zt.length<=Ft.length).map(zt=>Array(Ft.length-zt.length).fill(zt[0]==="*"?"*":"").concat(zt)).some(zt=>Ft.every((Ut,qt)=>zt[qt]===Ut||zt[qt]==="*"))}if(vt=="GPL"){Tt=="cloud"&&St("distributionChannel");return}const Bt=Rt(vt);if(!Bt){St("invalid");return}const Dt=parseBase64EncodedObject(Bt);if(!Dt){St("invalid");return}if(!Pt(Dt)){St("invalid");return}if(Dt.distributionChannel&&!toArray$2(Dt.distributionChannel).includes(Tt)){St("distributionChannel");return}if(crc32(Ot(Dt))!=Dt.vc.toLowerCase()){St("invalid");return}if(new Date(Dt.exp*1e3)<releaseDate){St("expired");return}const kt=Dt.licensedHosts;if(kt&&kt.length>0&&!Mt(kt)){St("domainLimit");return}if(["evaluation","trial"].includes(Dt.licenseType)&&Dt.exp*1e3<Date.now()){St("expired");return}if(["development","evaluation","trial"].includes(Dt.licenseType)){const{licenseType:Et}=Dt,At=Et[0].toUpperCase()+Et.slice(1),Ft=Et==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${At} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(` You are using ${Ft} ${Et} license of CKEditor 5${Et==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(Dt.licenseType)){const Et=Dt.licenseType,At=setTimeout(()=>{St(`${Et}Limit`)},6e5);_t.on("destroy",()=>{clearTimeout(At)})}Dt.usageEndpoint&&_t.once("ready",()=>{const Et={requestId:uid(),requestTime:Math.round(Date.now()/1e3),license:vt,editor:collectUsageData(_t)};_t._sendUsageRequest(Dt.usageEndpoint,Et).then(At=>{const{status:Ft,message:zt}=At;zt&&console.warn(zt),Ft!="ok"&&St("usageLimit")},()=>{logError("license-key-validation-endpoint-not-reachable",{url:Dt.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new CKEditorError("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,de=t.get("plugins"),pe=t.get("removePlugins")||[],Le=t.get("extraPlugins")||[],Ye=t.get("substitutePlugins")||[];return this.plugins.init(de.concat(Le),pe,Ye)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(de=>this.once("ready",de))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...de){try{return this.commands.execute(t,...de)}catch(pe){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(pe,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}_showLicenseError(t,de){setTimeout(()=>{if(t=="invalid")throw new CKEditorError("invalid-license-key");if(t=="expired")throw new CKEditorError("license-key-expired");if(t=="domainLimit")throw new CKEditorError("license-key-domain-limit");if(t=="featureNotAllowed")throw new CKEditorError("license-key-plugin-not-allowed",null,{pluginName:de});if(t=="evaluationLimit")throw new CKEditorError("license-key-evaluation-limit");if(t=="trialLimit")throw new CKEditorError("license-key-trial-limit");if(t=="developmentLimit")throw new CKEditorError("license-key-development-limit");if(t=="usageLimit")throw new CKEditorError("license-key-usage-limit");if(t=="distributionChannel")throw new CKEditorError("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(t,de){const pe=new Headers({"Content-Type":"application/json"}),Le=await fetch(new URL(t),{method:"POST",headers:pe,body:JSON.stringify(de)});if(!Le.ok)throw new Error(`HTTP Response: ${Le.status}`);return Le.json()}}wt(Editor,"defaultConfig"),wt(Editor,"builtinPlugins"),wt(Editor,"Context",Context),wt(Editor,"EditorWatchdog",EditorWatchdog),wt(Editor,"ContextWatchdog",ContextWatchdog);function collectUsageData(me){const u=getEditorUsageData(me);function t(de,pe){if(get(u,de)!==void 0)throw new CKEditorError("editor-usage-data-path-already-set",{path:de});set(u,de,pe)}return me.fire("collectUsageData",{setUsageData:t}),u}function attachToForm(me){if(!isFunction(me.updateSourceElement))throw new CKEditorError("attachtoform-missing-elementapi-interface",me);const u=me.sourceElement;if(isTextArea(u)&&u.form){let t;const de=u.form,pe=()=>me.updateSourceElement();isFunction(de.submit)&&(t=de.submit,de.submit=()=>{pe(),t.apply(de)}),de.addEventListener("submit",pe),me.on("destroy",()=>{de.removeEventListener("submit",pe),t&&(de.submit=t)})}}function isTextArea(me){return!!me&&me.tagName.toLowerCase()==="textarea"}function ElementApiMixin(me){class u extends me{constructor(){super(...arguments);wt(this,"sourceElement")}updateSourceElement(pe){if(!this.sourceElement)throw new CKEditorError("editor-missing-sourceelement",this);const Le=this.config.get("updateSourceElementOnDestroy"),Ye=this.sourceElement instanceof HTMLTextAreaElement;if(!Le&&!Ye){setDataInElement(this.sourceElement,"");return}const tt=typeof pe=="string"?pe:this.data.get();setDataInElement(this.sourceElement,tt)}}return u}ElementApiMixin.updateSourceElement=ElementApiMixin(Object).prototype.updateSourceElement;class PendingActions extends ContextPlugin{constructor(){super(...arguments);wt(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Collection({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if(typeof t!="string")throw new CKEditorError("pendingactions-add-invalid-message",this);const de=new(ObservableMixin());return de.set("message",t),this._actions.add(de),this.hasAny=!0,de}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var cancel='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',colorPalette='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',eraser='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',history='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',lowVision='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',textAlternative='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',loupe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',previousArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',nextArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',image='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',imageUpload='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',imageAssetManager='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',imageUrl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',alignBottom='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectBlockLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectBlockRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeCustom='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',objectSizeLarge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',objectSizeSmall='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',objectSizeMedium='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',pencil='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dragIndicator='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',bold='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',paragraph='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',importExport='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',redo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',undo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',bulletedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',numberedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',todoList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',codeBlock='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',browseFiles='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',heading1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',horizontalLine='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',html='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',indent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',outdent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',table='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',source=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,remove='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',bookmark='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',bookmarkInline='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',emoji=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const icons={bold,cancel,caption,check,cog,colorPalette,eraser,history,image,imageUpload,imageAssetManager,imageUrl,lowVision,textAlternative,loupe,previousArrow,nextArrow,importExport,paragraph,plus,text,alignBottom,alignMiddle,alignTop,alignLeft,alignCenter,alignRight,alignJustify,objectLeft,objectCenter,objectRight,objectFullWidth,objectInline,objectBlockLeft,objectBlockRight,objectSizeCustom,objectSizeFull,objectSizeLarge,objectSizeSmall,objectSizeMedium,pencil,pilcrow,quote,threeVerticalDots,dragIndicator,redo,undo,bulletedList,numberedList,todoList,codeBlock,browseFiles,heading1,heading2,heading3,heading4,heading5,heading6,horizontalLine,html,indent,outdent,table,source,remove,bookmark,bookmarkInline,emoji};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let FileReader$1=class extends ObservableMixin(){constructor(){super();wt(this,"total");wt(this,"_reader");wt(this,"_data");const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=de=>{this.loaded=de.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const de=this._reader;return this.total=t.size,new Promise((pe,Le)=>{de.onload=()=>{const Ye=de.result;this._data=Ye,pe(Ye)},de.onerror=()=>{Le("error")},de.onabort=()=>{Le("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}};class FileRepository extends Plugin{constructor(){super(...arguments);wt(this,"loaders",new Collection);wt(this,"_loadersMap",new Map);wt(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,de)=>de?t/de*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return logWarning("filerepository-no-upload-adapter"),null;const de=new FileLoader(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(de),this._loadersMap.set(t,de),t instanceof Promise&&de.file.then(pe=>{this._loadersMap.set(pe,de)}).catch(()=>{}),de.on("change:uploaded",()=>{let pe=0;for(const Le of this.loaders)pe+=Le.uploaded;this.uploaded=pe}),de.on("change:uploadTotal",()=>{let pe=0;for(const Le of this.loaders)Le.uploadTotal&&(pe+=Le.uploadTotal);this.uploadTotal=pe}),de}destroyLoader(t){const de=t instanceof FileLoader?t:this.getLoader(t);de._destroy(),this.loaders.remove(de),this._loadersMap.forEach((pe,Le)=>{pe===de&&this._loadersMap.delete(Le)})}_updatePendingAction(){const t=this.editor.plugins.get(PendingActions);if(this.loaders.length){if(!this._pendingAction){const de=this.editor.t,pe=Le=>`${de("Upload in progress")} ${parseInt(Le)}%.`;this._pendingAction=t.add(pe(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",pe)}}else t.remove(this._pendingAction),this._pendingAction=null}}class FileLoader extends ObservableMixin(){constructor(t,de){super();wt(this,"id");wt(this,"_filePromiseWrapper");wt(this,"_adapter");wt(this,"_reader");this.id=uid(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=de(this),this._reader=new FileReader$1,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(pe,Le)=>Le?pe/Le*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new CKEditorError("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if(this.status!=="reading")throw this.status;return this.status="idle",t}).catch(t=>{throw t==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:t)})}upload(){if(this.status!="idle")throw new CKEditorError("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{throw this.status==="aborted"?"aborted":(this.status="error",t)})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?t=="reading"?this._reader.abort():t=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const de={};return de.promise=new Promise((pe,Le)=>{de.rejecter=Le,de.isFulfilled=!1,t.then(Ye=>{de.isFulfilled=!0,pe(Ye)}).catch(Ye=>{de.isFulfilled=!0,Le(Ye)})}),de}}var colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName||(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),colorName}var colorNameExports=requireColorName();const names=getDefaultExportFromCjs(colorNameExports);var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$1(me){var u,t=[],de=1,pe;if(typeof me=="string")if(names[me])t=names[me].slice(),pe="rgb";else if(me==="transparent")de=0,pe="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(me)){var Le=me.slice(1),Ye=Le.length,tt=Ye<=4;de=1,tt?(t=[parseInt(Le[0]+Le[0],16),parseInt(Le[1]+Le[1],16),parseInt(Le[2]+Le[2],16)],Ye===4&&(de=parseInt(Le[3]+Le[3],16)/255)):(t=[parseInt(Le[0]+Le[1],16),parseInt(Le[2]+Le[3],16),parseInt(Le[4]+Le[5],16)],Ye===8&&(de=parseInt(Le[6]+Le[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),pe="rgb"}else if(u=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(me)){var st=u[1],ht=st==="rgb",Le=st.replace(/a$/,"");pe=Le;var Ye=Le==="cmyk"?4:Le==="gray"?1:3;t=u[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(bt,_t){if(/%$/.test(bt))return _t===Ye?parseFloat(bt)/100:Le==="rgb"?parseFloat(bt)*255/100:parseFloat(bt);if(Le[_t]==="h"){if(/deg$/.test(bt))return parseFloat(bt);if(baseHues[bt]!==void 0)return baseHues[bt]}return parseFloat(bt)}),st===Le&&t.push(1),de=ht||t[Ye]===void 0?1:t[Ye],t=t.slice(0,Ye)}else me.length>10&&/[0-9](?:\s|\/)/.test(me)&&(t=me.match(/([0-9]+)/g).map(function(mt){return parseFloat(mt)}),pe=me.match(/([a-z])/ig).join("").toLowerCase());else isNaN(me)?Array.isArray(me)||me.length?(t=[me[0],me[1],me[2]],pe="rgb",de=me.length===4?me[3]:1):me instanceof Object&&(me.r!=null||me.red!=null||me.R!=null?(pe="rgb",t=[me.r||me.red||me.R||0,me.g||me.green||me.G||0,me.b||me.blue||me.B||0]):(pe="hsl",t=[me.h||me.hue||me.H||0,me.s||me.saturation||me.S||0,me.l||me.lightness||me.L||me.b||me.brightness]),de=me.a||me.alpha||me.opacity||1,me.opacity!=null&&(de/=100)):(pe="rgb",t=[me>>>16,(me&65280)>>>8,me&255]);return{space:pe,values:t,alpha:de}}var conversions,hasRequiredConversions;function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const me=requireColorName(),u={};for(const pe of Object.keys(me))u[me[pe]]=pe;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=t;for(const pe of Object.keys(t)){if(!("channels"in t[pe]))throw new Error("missing channels property: "+pe);if(!("labels"in t[pe]))throw new Error("missing channel labels property: "+pe);if(t[pe].labels.length!==t[pe].channels)throw new Error("channel and label counts mismatch: "+pe);const{channels:Le,labels:Ye}=t[pe];delete t[pe].channels,delete t[pe].labels,Object.defineProperty(t[pe],"channels",{value:Le}),Object.defineProperty(t[pe],"labels",{value:Ye})}t.rgb.hsl=function(pe){const Le=pe[0]/255,Ye=pe[1]/255,tt=pe[2]/255,st=Math.min(Le,Ye,tt),ht=Math.max(Le,Ye,tt),mt=ht-st;let gt,bt;ht===st?gt=0:Le===ht?gt=(Ye-tt)/mt:Ye===ht?gt=2+(tt-Le)/mt:tt===ht&&(gt=4+(Le-Ye)/mt),gt=Math.min(gt*60,360),gt<0&&(gt+=360);const _t=(st+ht)/2;return ht===st?bt=0:_t<=.5?bt=mt/(ht+st):bt=mt/(2-ht-st),[gt,bt*100,_t*100]},t.rgb.hsv=function(pe){let Le,Ye,tt,st,ht;const mt=pe[0]/255,gt=pe[1]/255,bt=pe[2]/255,_t=Math.max(mt,gt,bt),vt=_t-Math.min(mt,gt,bt),Tt=function(St){return(_t-St)/6/vt+1/2};return vt===0?(st=0,ht=0):(ht=vt/_t,Le=Tt(mt),Ye=Tt(gt),tt=Tt(bt),mt===_t?st=tt-Ye:gt===_t?st=1/3+Le-tt:bt===_t&&(st=2/3+Ye-Le),st<0?st+=1:st>1&&(st-=1)),[st*360,ht*100,_t*100]},t.rgb.hwb=function(pe){const Le=pe[0],Ye=pe[1];let tt=pe[2];const st=t.rgb.hsl(pe)[0],ht=1/255*Math.min(Le,Math.min(Ye,tt));return tt=1-1/255*Math.max(Le,Math.max(Ye,tt)),[st,ht*100,tt*100]},t.rgb.cmyk=function(pe){const Le=pe[0]/255,Ye=pe[1]/255,tt=pe[2]/255,st=Math.min(1-Le,1-Ye,1-tt),ht=(1-Le-st)/(1-st)||0,mt=(1-Ye-st)/(1-st)||0,gt=(1-tt-st)/(1-st)||0;return[ht*100,mt*100,gt*100,st*100]};function de(pe,Le){return(pe[0]-Le[0])**2+(pe[1]-Le[1])**2+(pe[2]-Le[2])**2}return t.rgb.keyword=function(pe){const Le=u[pe];if(Le)return Le;let Ye=1/0,tt;for(const st of Object.keys(me)){const ht=me[st],mt=de(pe,ht);mt<Ye&&(Ye=mt,tt=st)}return tt},t.keyword.rgb=function(pe){return me[pe]},t.rgb.xyz=function(pe){let Le=pe[0]/255,Ye=pe[1]/255,tt=pe[2]/255;Le=Le>.04045?((Le+.055)/1.055)**2.4:Le/12.92,Ye=Ye>.04045?((Ye+.055)/1.055)**2.4:Ye/12.92,tt=tt>.04045?((tt+.055)/1.055)**2.4:tt/12.92;const st=Le*.4124+Ye*.3576+tt*.1805,ht=Le*.2126+Ye*.7152+tt*.0722,mt=Le*.0193+Ye*.1192+tt*.9505;return[st*100,ht*100,mt*100]},t.rgb.lab=function(pe){const Le=t.rgb.xyz(pe);let Ye=Le[0],tt=Le[1],st=Le[2];Ye/=95.047,tt/=100,st/=108.883,Ye=Ye>.008856?Ye**(1/3):7.787*Ye+16/116,tt=tt>.008856?tt**(1/3):7.787*tt+16/116,st=st>.008856?st**(1/3):7.787*st+16/116;const ht=116*tt-16,mt=500*(Ye-tt),gt=200*(tt-st);return[ht,mt,gt]},t.hsl.rgb=function(pe){const Le=pe[0]/360,Ye=pe[1]/100,tt=pe[2]/100;let st,ht,mt;if(Ye===0)return mt=tt*255,[mt,mt,mt];tt<.5?st=tt*(1+Ye):st=tt+Ye-tt*Ye;const gt=2*tt-st,bt=[0,0,0];for(let _t=0;_t<3;_t++)ht=Le+1/3*-(_t-1),ht<0&&ht++,ht>1&&ht--,6*ht<1?mt=gt+(st-gt)*6*ht:2*ht<1?mt=st:3*ht<2?mt=gt+(st-gt)*(2/3-ht)*6:mt=gt,bt[_t]=mt*255;return bt},t.hsl.hsv=function(pe){const Le=pe[0];let Ye=pe[1]/100,tt=pe[2]/100,st=Ye;const ht=Math.max(tt,.01);tt*=2,Ye*=tt<=1?tt:2-tt,st*=ht<=1?ht:2-ht;const mt=(tt+Ye)/2,gt=tt===0?2*st/(ht+st):2*Ye/(tt+Ye);return[Le,gt*100,mt*100]},t.hsv.rgb=function(pe){const Le=pe[0]/60,Ye=pe[1]/100;let tt=pe[2]/100;const st=Math.floor(Le)%6,ht=Le-Math.floor(Le),mt=255*tt*(1-Ye),gt=255*tt*(1-Ye*ht),bt=255*tt*(1-Ye*(1-ht));switch(tt*=255,st){case 0:return[tt,bt,mt];case 1:return[gt,tt,mt];case 2:return[mt,tt,bt];case 3:return[mt,gt,tt];case 4:return[bt,mt,tt];case 5:return[tt,mt,gt]}},t.hsv.hsl=function(pe){const Le=pe[0],Ye=pe[1]/100,tt=pe[2]/100,st=Math.max(tt,.01);let ht,mt;mt=(2-Ye)*tt;const gt=(2-Ye)*st;return ht=Ye*st,ht/=gt<=1?gt:2-gt,ht=ht||0,mt/=2,[Le,ht*100,mt*100]},t.hwb.rgb=function(pe){const Le=pe[0]/360;let Ye=pe[1]/100,tt=pe[2]/100;const st=Ye+tt;let ht;st>1&&(Ye/=st,tt/=st);const mt=Math.floor(6*Le),gt=1-tt;ht=6*Le-mt,(mt&1)!==0&&(ht=1-ht);const bt=Ye+ht*(gt-Ye);let _t,vt,Tt;switch(mt){default:case 6:case 0:_t=gt,vt=bt,Tt=Ye;break;case 1:_t=bt,vt=gt,Tt=Ye;break;case 2:_t=Ye,vt=gt,Tt=bt;break;case 3:_t=Ye,vt=bt,Tt=gt;break;case 4:_t=bt,vt=Ye,Tt=gt;break;case 5:_t=gt,vt=Ye,Tt=bt;break}return[_t*255,vt*255,Tt*255]},t.cmyk.rgb=function(pe){const Le=pe[0]/100,Ye=pe[1]/100,tt=pe[2]/100,st=pe[3]/100,ht=1-Math.min(1,Le*(1-st)+st),mt=1-Math.min(1,Ye*(1-st)+st),gt=1-Math.min(1,tt*(1-st)+st);return[ht*255,mt*255,gt*255]},t.xyz.rgb=function(pe){const Le=pe[0]/100,Ye=pe[1]/100,tt=pe[2]/100;let st,ht,mt;return st=Le*3.2406+Ye*-1.5372+tt*-.4986,ht=Le*-.9689+Ye*1.8758+tt*.0415,mt=Le*.0557+Ye*-.204+tt*1.057,st=st>.0031308?1.055*st**(1/2.4)-.055:st*12.92,ht=ht>.0031308?1.055*ht**(1/2.4)-.055:ht*12.92,mt=mt>.0031308?1.055*mt**(1/2.4)-.055:mt*12.92,st=Math.min(Math.max(0,st),1),ht=Math.min(Math.max(0,ht),1),mt=Math.min(Math.max(0,mt),1),[st*255,ht*255,mt*255]},t.xyz.lab=function(pe){let Le=pe[0],Ye=pe[1],tt=pe[2];Le/=95.047,Ye/=100,tt/=108.883,Le=Le>.008856?Le**(1/3):7.787*Le+16/116,Ye=Ye>.008856?Ye**(1/3):7.787*Ye+16/116,tt=tt>.008856?tt**(1/3):7.787*tt+16/116;const st=116*Ye-16,ht=500*(Le-Ye),mt=200*(Ye-tt);return[st,ht,mt]},t.lab.xyz=function(pe){const Le=pe[0],Ye=pe[1],tt=pe[2];let st,ht,mt;ht=(Le+16)/116,st=Ye/500+ht,mt=ht-tt/200;const gt=ht**3,bt=st**3,_t=mt**3;return ht=gt>.008856?gt:(ht-16/116)/7.787,st=bt>.008856?bt:(st-16/116)/7.787,mt=_t>.008856?_t:(mt-16/116)/7.787,st*=95.047,ht*=100,mt*=108.883,[st,ht,mt]},t.lab.lch=function(pe){const Le=pe[0],Ye=pe[1],tt=pe[2];let st;st=Math.atan2(tt,Ye)*360/2/Math.PI,st<0&&(st+=360);const mt=Math.sqrt(Ye*Ye+tt*tt);return[Le,mt,st]},t.lch.lab=function(pe){const Le=pe[0],Ye=pe[1],st=pe[2]/360*2*Math.PI,ht=Ye*Math.cos(st),mt=Ye*Math.sin(st);return[Le,ht,mt]},t.rgb.ansi16=function(pe,Le=null){const[Ye,tt,st]=pe;let ht=Le===null?t.rgb.hsv(pe)[2]:Le;if(ht=Math.round(ht/50),ht===0)return 30;let mt=30+(Math.round(st/255)<<2|Math.round(tt/255)<<1|Math.round(Ye/255));return ht===2&&(mt+=60),mt},t.hsv.ansi16=function(pe){return t.rgb.ansi16(t.hsv.rgb(pe),pe[2])},t.rgb.ansi256=function(pe){const Le=pe[0],Ye=pe[1],tt=pe[2];return Le===Ye&&Ye===tt?Le<8?16:Le>248?231:Math.round((Le-8)/247*24)+232:16+36*Math.round(Le/255*5)+6*Math.round(Ye/255*5)+Math.round(tt/255*5)},t.ansi16.rgb=function(pe){let Le=pe%10;if(Le===0||Le===7)return pe>50&&(Le+=3.5),Le=Le/10.5*255,[Le,Le,Le];const Ye=(~~(pe>50)+1)*.5,tt=(Le&1)*Ye*255,st=(Le>>1&1)*Ye*255,ht=(Le>>2&1)*Ye*255;return[tt,st,ht]},t.ansi256.rgb=function(pe){if(pe>=232){const ht=(pe-232)*10+8;return[ht,ht,ht]}pe-=16;let Le;const Ye=Math.floor(pe/36)/5*255,tt=Math.floor((Le=pe%36)/6)/5*255,st=Le%6/5*255;return[Ye,tt,st]},t.rgb.hex=function(pe){const Ye=(((Math.round(pe[0])&255)<<16)+((Math.round(pe[1])&255)<<8)+(Math.round(pe[2])&255)).toString(16).toUpperCase();return"000000".substring(Ye.length)+Ye},t.hex.rgb=function(pe){const Le=pe.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!Le)return[0,0,0];let Ye=Le[0];Le[0].length===3&&(Ye=Ye.split("").map(gt=>gt+gt).join(""));const tt=parseInt(Ye,16),st=tt>>16&255,ht=tt>>8&255,mt=tt&255;return[st,ht,mt]},t.rgb.hcg=function(pe){const Le=pe[0]/255,Ye=pe[1]/255,tt=pe[2]/255,st=Math.max(Math.max(Le,Ye),tt),ht=Math.min(Math.min(Le,Ye),tt),mt=st-ht;let gt,bt;return mt<1?gt=ht/(1-mt):gt=0,mt<=0?bt=0:st===Le?bt=(Ye-tt)/mt%6:st===Ye?bt=2+(tt-Le)/mt:bt=4+(Le-Ye)/mt,bt/=6,bt%=1,[bt*360,mt*100,gt*100]},t.hsl.hcg=function(pe){const Le=pe[1]/100,Ye=pe[2]/100,tt=Ye<.5?2*Le*Ye:2*Le*(1-Ye);let st=0;return tt<1&&(st=(Ye-.5*tt)/(1-tt)),[pe[0],tt*100,st*100]},t.hsv.hcg=function(pe){const Le=pe[1]/100,Ye=pe[2]/100,tt=Le*Ye;let st=0;return tt<1&&(st=(Ye-tt)/(1-tt)),[pe[0],tt*100,st*100]},t.hcg.rgb=function(pe){const Le=pe[0]/360,Ye=pe[1]/100,tt=pe[2]/100;if(Ye===0)return[tt*255,tt*255,tt*255];const st=[0,0,0],ht=Le%1*6,mt=ht%1,gt=1-mt;let bt=0;switch(Math.floor(ht)){case 0:st[0]=1,st[1]=mt,st[2]=0;break;case 1:st[0]=gt,st[1]=1,st[2]=0;break;case 2:st[0]=0,st[1]=1,st[2]=mt;break;case 3:st[0]=0,st[1]=gt,st[2]=1;break;case 4:st[0]=mt,st[1]=0,st[2]=1;break;default:st[0]=1,st[1]=0,st[2]=gt}return bt=(1-Ye)*tt,[(Ye*st[0]+bt)*255,(Ye*st[1]+bt)*255,(Ye*st[2]+bt)*255]},t.hcg.hsv=function(pe){const Le=pe[1]/100,Ye=pe[2]/100,tt=Le+Ye*(1-Le);let st=0;return tt>0&&(st=Le/tt),[pe[0],st*100,tt*100]},t.hcg.hsl=function(pe){const Le=pe[1]/100,tt=pe[2]/100*(1-Le)+.5*Le;let st=0;return tt>0&&tt<.5?st=Le/(2*tt):tt>=.5&&tt<1&&(st=Le/(2*(1-tt))),[pe[0],st*100,tt*100]},t.hcg.hwb=function(pe){const Le=pe[1]/100,Ye=pe[2]/100,tt=Le+Ye*(1-Le);return[pe[0],(tt-Le)*100,(1-tt)*100]},t.hwb.hcg=function(pe){const Le=pe[1]/100,tt=1-pe[2]/100,st=tt-Le;let ht=0;return st<1&&(ht=(tt-st)/(1-st)),[pe[0],st*100,ht*100]},t.apple.rgb=function(pe){return[pe[0]/65535*255,pe[1]/65535*255,pe[2]/65535*255]},t.rgb.apple=function(pe){return[pe[0]/255*65535,pe[1]/255*65535,pe[2]/255*65535]},t.gray.rgb=function(pe){return[pe[0]/100*255,pe[0]/100*255,pe[0]/100*255]},t.gray.hsl=function(pe){return[0,0,pe[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(pe){return[0,100,pe[0]]},t.gray.cmyk=function(pe){return[0,0,0,pe[0]]},t.gray.lab=function(pe){return[pe[0],0,0]},t.gray.hex=function(pe){const Le=Math.round(pe[0]/100*255)&255,tt=((Le<<16)+(Le<<8)+Le).toString(16).toUpperCase();return"000000".substring(tt.length)+tt},t.rgb.gray=function(pe){return[(pe[0]+pe[1]+pe[2])/3/255*100]},conversions}var route,hasRequiredRoute;function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const me=requireConversions();function u(){const Le={},Ye=Object.keys(me);for(let tt=Ye.length,st=0;st<tt;st++)Le[Ye[st]]={distance:-1,parent:null};return Le}function t(Le){const Ye=u(),tt=[Le];for(Ye[Le].distance=0;tt.length;){const st=tt.pop(),ht=Object.keys(me[st]);for(let mt=ht.length,gt=0;gt<mt;gt++){const bt=ht[gt],_t=Ye[bt];_t.distance===-1&&(_t.distance=Ye[st].distance+1,_t.parent=st,tt.unshift(bt))}}return Ye}function de(Le,Ye){return function(tt){return Ye(Le(tt))}}function pe(Le,Ye){const tt=[Ye[Le].parent,Le];let st=me[Ye[Le].parent][Le],ht=Ye[Le].parent;for(;Ye[ht].parent;)tt.unshift(Ye[ht].parent),st=de(me[Ye[ht].parent][ht],st),ht=Ye[ht].parent;return st.conversion=tt,st}return route=function(Le){const Ye=t(Le),tt={},st=Object.keys(Ye);for(let ht=st.length,mt=0;mt<ht;mt++){const gt=st[mt];Ye[gt].parent!==null&&(tt[gt]=pe(gt,Ye))}return tt},route}var colorConvert,hasRequiredColorConvert;function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const me=requireConversions(),u=requireRoute(),t={},de=Object.keys(me);function pe(Ye){const tt=function(...st){const ht=st[0];return ht==null?ht:(ht.length>1&&(st=ht),Ye(st))};return"conversion"in Ye&&(tt.conversion=Ye.conversion),tt}function Le(Ye){const tt=function(...st){const ht=st[0];if(ht==null)return ht;ht.length>1&&(st=ht);const mt=Ye(st);if(typeof mt=="object")for(let gt=mt.length,bt=0;bt<gt;bt++)mt[bt]=Math.round(mt[bt]);return mt};return"conversion"in Ye&&(tt.conversion=Ye.conversion),tt}return de.forEach(Ye=>{t[Ye]={},Object.defineProperty(t[Ye],"channels",{value:me[Ye].channels}),Object.defineProperty(t[Ye],"labels",{value:me[Ye].labels});const tt=u(Ye);Object.keys(tt).forEach(ht=>{const mt=tt[ht];t[Ye][ht]=Le(mt),t[Ye][ht].raw=pe(mt)})}),colorConvert=t,colorConvert}var colorConvertExports=requireColorConvert();const index=getDefaultExportFromCjs(colorConvertExports),convert=_mergeNamespaces({__proto__:null,default:index},[colorConvertExports]),clamp$1=(me,u=0,t=1)=>me>t?t:me<u?u:me,round=(me,u=0,t=Math.pow(10,u))=>Math.round(t*me)/t,hexToHsva=me=>rgbaToHsva(hexToRgba(me)),hexToRgba=me=>(me[0]==="#"&&(me=me.substring(1)),me.length<6?{r:parseInt(me[0]+me[0],16),g:parseInt(me[1]+me[1],16),b:parseInt(me[2]+me[2],16),a:me.length===4?round(parseInt(me[3]+me[3],16)/255,2):1}:{r:parseInt(me.substring(0,2),16),g:parseInt(me.substring(2,4),16),b:parseInt(me.substring(4,6),16),a:me.length===8?round(parseInt(me.substring(6,8),16)/255,2):1}),hsvaToHex=me=>rgbaToHex(hsvaToRgba(me)),hsvaToHsla=({h:me,s:u,v:t,a:de})=>{const pe=(200-u)*t/100;return{h:round(me),s:round(pe>0&&pe<200?u*t/100/(pe<=100?pe:200-pe)*100:0),l:round(pe/2),a:round(de,2)}},hsvaToHslString=me=>{const{h:u,s:t,l:de}=hsvaToHsla(me);return`hsl(${u}, ${t}%, ${de}%)`},hsvaToRgba=({h:me,s:u,v:t,a:de})=>{me=me/360*6,u=u/100,t=t/100;const pe=Math.floor(me),Le=t*(1-u),Ye=t*(1-(me-pe)*u),tt=t*(1-(1-me+pe)*u),st=pe%6;return{r:round([t,Ye,Le,Le,tt,t][st]*255),g:round([tt,t,t,Ye,Le,Le][st]*255),b:round([Le,Le,tt,t,t,Ye][st]*255),a:round(de,2)}},format=me=>{const u=me.toString(16);return u.length<2?"0"+u:u},rgbaToHex=({r:me,g:u,b:t,a:de})=>{const pe=de<1?format(round(de*255)):"";return"#"+format(me)+format(u)+format(t)+pe},rgbaToHsva=({r:me,g:u,b:t,a:de})=>{const pe=Math.max(me,u,t),Le=pe-Math.min(me,u,t),Ye=Le?pe===me?(u-t)/Le:pe===u?2+(t-me)/Le:4+(me-u)/Le:0;return{h:round(60*(Ye<0?Ye+6:Ye)),s:round(pe?Le/pe*100:0),v:round(pe/255*100),a:de}},equalColorObjects=(me,u)=>{if(me===u)return!0;for(const t in me)if(me[t]!==u[t])return!1;return!0},equalHex=(me,u)=>me.toLowerCase()===u.toLowerCase()?!0:equalColorObjects(hexToRgba(me),hexToRgba(u)),cache$1={},tpl=me=>{let u=cache$1[me];return u||(u=document.createElement("template"),u.innerHTML=me,cache$1[me]=u),u},fire=(me,u,t)=>{me.dispatchEvent(new CustomEvent(u,{bubbles:!0,detail:t}))};let hasTouched=!1;const isTouch=me=>"touches"in me,isValid=me=>hasTouched&&!isTouch(me)?!1:(hasTouched||(hasTouched=isTouch(me)),!0),pointerMove=(me,u)=>{const t=isTouch(u)?u.touches[0]:u,de=me.el.getBoundingClientRect();fire(me.el,"move",me.getMove({x:clamp$1((t.pageX-(de.left+window.pageXOffset))/de.width),y:clamp$1((t.pageY-(de.top+window.pageYOffset))/de.height)}))},keyMove=(me,u)=>{const t=u.keyCode;t>40||me.xy&&t<37||t<33||(u.preventDefault(),fire(me.el,"move",me.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class Slider{constructor(u,t,de,pe){const Le=tpl(`<div role="slider" tabindex="0" part="${t}" ${de}><div part="${t}-pointer"></div></div>`);u.appendChild(Le.content.cloneNode(!0));const Ye=u.querySelector(`[part=${t}]`);Ye.addEventListener("mousedown",this),Ye.addEventListener("touchstart",this),Ye.addEventListener("keydown",this),this.el=Ye,this.xy=pe,this.nodes=[Ye.firstChild,Ye]}set dragging(u){const t=u?document.addEventListener:document.removeEventListener;t(hasTouched?"touchmove":"mousemove",this),t(hasTouched?"touchend":"mouseup",this)}handleEvent(u){switch(u.type){case"mousedown":case"touchstart":if(u.preventDefault(),!isValid(u)||!hasTouched&&u.button!=0)return;this.el.focus(),pointerMove(this,u),this.dragging=!0;break;case"mousemove":case"touchmove":u.preventDefault(),pointerMove(this,u);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":keyMove(this,u);break}}style(u){u.forEach((t,de)=>{for(const pe in t)this.nodes[de].style.setProperty(pe,t[pe])})}}class Hue extends Slider{constructor(u){super(u,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:u}){this.h=u,this.style([{left:`${u/360*100}%`,color:hsvaToHslString({h:u,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${round(u)}`)}getMove(u,t){return{h:t?clamp$1(this.h+u.x*360,0,360):360*u.x}}}class Saturation extends Slider{constructor(u){super(u,"saturation",'aria-label="Color"',!0)}update(u){this.hsva=u,this.style([{top:`${100-u.v}%`,left:`${u.s}%`,color:hsvaToHslString(u)},{"background-color":hsvaToHslString({h:u.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${round(u.s)}%, Brightness ${round(u.v)}%`)}getMove(u,t){return{s:t?clamp$1(this.hsva.s+u.x*100,0,100):u.x*100,v:t?clamp$1(this.hsva.v-u.y*100,0,100):Math.round(100-u.y*100)}}}const css=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',hueCss="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",saturationCss="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",$isSame=Symbol("same"),$color=Symbol("color"),$hsva=Symbol("hsva"),$update=Symbol("update"),$parts=Symbol("parts"),$css=Symbol("css"),$sliders=Symbol("sliders");class ColorPicker extends HTMLElement{static get observedAttributes(){return["color"]}get[$css](){return[css,hueCss,saturationCss]}get[$sliders](){return[Saturation,Hue]}get color(){return this[$color]}set color(u){if(!this[$isSame](u)){const t=this.colorModel.toHsva(u);this[$update](t),this[$color]=u}}constructor(){super();const u=tpl(`<style>${this[$css].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(u.content.cloneNode(!0)),t.addEventListener("move",this),this[$parts]=this[$sliders].map(de=>new de(t))}connectedCallback(){if(this.hasOwnProperty("color")){const u=this.color;delete this.color,this.color=u}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(u,t,de){const pe=this.colorModel.fromAttr(de);this[$isSame](pe)||(this.color=pe)}handleEvent(u){const t=this[$hsva],de={...t,...u.detail};this[$update](de);let pe;!equalColorObjects(de,t)&&!this[$isSame](pe=this.colorModel.fromHsva(de))&&(this[$color]=pe,fire(this,"color-changed",{value:pe}))}[$isSame](u){return this.color&&this.colorModel.equal(u,this.color)}[$update](u){this[$hsva]=u,this[$parts].forEach(t=>t.update(u))}}const colorModel={defaultColor:"#000",toHsva:hexToHsva,fromHsva:({h:me,s:u,v:t})=>hsvaToHex({h:me,s:u,v:t,a:1}),equal:equalHex,fromAttr:me=>me};class HexBase extends ColorPicker{get colorModel(){return colorModel}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ViewCollection extends Collection{constructor(t=[]){super(t,{idProperty:"viewUid"});wt(this,"_parentElement");this.on("add",(de,pe,Le)=>{this._renderViewIntoCollectionParent(pe,Le)}),this.on("remove",(de,pe)=>{pe.element&&this._parentElement&&pe.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const de of this)this._renderViewIntoCollectionParent(de)}delegate(...t){if(!t.length||!isStringArray(t))throw new CKEditorError("ui-viewcollection-delegate-wrong-events",this);return{to:de=>{for(const pe of this)for(const Le of t)pe.delegate(Le).to(de);this.on("add",(pe,Le)=>{for(const Ye of t)Le.delegate(Ye).to(de)}),this.on("remove",(pe,Le)=>{for(const Ye of t)Le.stopDelegating(Ye,de)})}}}_renderViewIntoCollectionParent(t,de){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[de])}remove(t){return super.remove(t)}}function isStringArray(me){return me.every(u=>typeof u=="string")}const xhtmlNs="http://www.w3.org/1999/xhtml";class Template extends EmitterMixin(){constructor(t){super();wt(this,"ns");wt(this,"tag");wt(this,"text");wt(this,"attributes");wt(this,"children");wt(this,"eventListeners");wt(this,"_isRendered");wt(this,"_revertData");Object.assign(this,normalize(clone(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=getEmptyRevertData(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new CKEditorError("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(de){if(de.children)for(const pe of de.children)isView$2(pe)?yield pe:isTemplate(pe)&&(yield*t(pe))}yield*t(this)}static bind(t,de){return{to(pe,Le){return new TemplateToBinding({eventNameOrFunction:pe,attribute:pe,observable:t,emitter:de,callback:Le})},if(pe,Le,Ye){return new TemplateIfBinding({observable:t,emitter:de,attribute:pe,valueIfTrue:Le,callback:Ye})}}}static extend(t,de){if(t._isRendered)throw new CKEditorError("template-extend-render",[this,t]);extendTemplate(t,normalize(clone(de)))}_renderNode(t){let de;if(t.node?de=this.tag&&this.text:de=this.tag?this.text:!this.text,de)throw new CKEditorError("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let de=t.node;return de||(de=t.node=document.createElementNS(this.ns||xhtmlNs,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),de}_renderText(t){let de=t.node;return de?t.revertData.text=de.textContent:de=t.node=document.createTextNode(""),hasTemplateBinding(this.text)?this._bindToObservable({schema:this.text,updater:getTextUpdater(de),data:t}):de.textContent=this.text.join(""),de}_renderAttributes(t){if(!this.attributes)return;const de=t.node,pe=t.revertData;for(const Le in this.attributes){const Ye=de.getAttribute(Le),tt=this.attributes[Le];pe&&(pe.attributes[Le]=Ye);const st=isNamespaced(tt)?tt[0].ns:null;if(hasTemplateBinding(tt)){const ht=isNamespaced(tt)?tt[0].value:tt;pe&&shouldExtend(Le)&&ht.unshift(Ye),this._bindToObservable({schema:ht,updater:getAttributeUpdater(de,Le,st),data:t})}else if(Le=="style"&&typeof tt[0]!="string")this._renderStyleAttribute(tt[0],t);else{pe&&Ye&&shouldExtend(Le)&&tt.unshift(Ye);const ht=tt.map(mt=>mt&&(mt.value||mt)).reduce((mt,gt)=>mt.concat(gt),[]).reduce(arrayValueReducer,"");isFalsy(ht)||de.setAttributeNS(st,Le,ht)}}}_renderStyleAttribute(t,de){const pe=de.node;for(const Le in t){const Ye=t[Le];hasTemplateBinding(Ye)?this._bindToObservable({schema:[Ye],updater:getStyleUpdater(pe,Le),data:de}):pe.style[Le]=Ye}}_renderElementChildren(t){const de=t.node,pe=t.intoFragment?document.createDocumentFragment():de,Le=t.isApplying;let Ye=0;for(const tt of this.children)if(isViewCollection(tt)){if(!Le){tt.setParent(de);for(const st of tt)pe.appendChild(st.element)}}else if(isView$2(tt))Le||(tt.isRendered||tt.render(),pe.appendChild(tt.element));else if(isNode(tt))pe.appendChild(tt);else if(Le){const st=t.revertData,ht=getEmptyRevertData();st.children.push(ht),tt._renderNode({intoFragment:!1,node:pe.childNodes[Ye++],isApplying:!0,revertData:ht})}else pe.appendChild(tt.render());t.intoFragment&&de.appendChild(pe)}_setUpListeners(t){if(this.eventListeners)for(const de in this.eventListeners){const pe=this.eventListeners[de].map(Le=>{const[Ye,tt]=de.split("@");return Le.activateDomEventListener(Ye,tt,t)});t.revertData&&t.revertData.bindings.push(pe)}}_bindToObservable({schema:t,updater:de,data:pe}){const Le=pe.revertData;syncValueSchemaValue(t,de,pe);const Ye=t.filter(tt=>!isFalsy(tt)).filter(tt=>tt.observable).map(tt=>tt.activateAttributeListener(t,de,pe));Le&&Le.bindings.push(Ye)}_revertTemplateFromNode(t,de){for(const Le of de.bindings)for(const Ye of Le)Ye();if(de.text){t.textContent=de.text;return}const pe=t;for(const Le in de.attributes){const Ye=de.attributes[Le];Ye===null?pe.removeAttribute(Le):pe.setAttribute(Le,Ye)}for(let Le=0;Le<de.children.length;++Le)this._revertTemplateFromNode(pe.childNodes[Le],de.children[Le])}}class TemplateBinding{constructor(u){wt(this,"attribute");wt(this,"observable");wt(this,"emitter");wt(this,"callback");this.attribute=u.attribute,this.observable=u.observable,this.emitter=u.emitter,this.callback=u.callback}getValue(u){const t=this.observable[this.attribute];return this.callback?this.callback(t,u):t}activateAttributeListener(u,t,de){const pe=()=>syncValueSchemaValue(u,t,de);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,pe),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,pe)}}}class TemplateToBinding extends TemplateBinding{constructor(t){super(t);wt(this,"eventNameOrFunction");this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,de,pe){const Le=(Ye,tt)=>{(!de||tt.target.matches(de))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(tt):this.observable.fire(this.eventNameOrFunction,tt))};return this.emitter.listenTo(pe.node,t,Le),()=>{this.emitter.stopListening(pe.node,t,Le)}}}class TemplateIfBinding extends TemplateBinding{constructor(t){super(t);wt(this,"valueIfTrue");this.valueIfTrue=t.valueIfTrue}getValue(t){const de=super.getValue(t);return isFalsy(de)?!1:this.valueIfTrue||!0}}function hasTemplateBinding(me){return me?(me.value&&(me=me.value),Array.isArray(me)?me.some(hasTemplateBinding):me instanceof TemplateBinding):!1}function getValueSchemaValue(me,u){return me.map(t=>t instanceof TemplateBinding?t.getValue(u):t)}function syncValueSchemaValue(me,u,{node:t}){const de=getValueSchemaValue(me,t);let pe;me.length==1&&me[0]instanceof TemplateIfBinding?pe=de[0]:pe=de.reduce(arrayValueReducer,""),isFalsy(pe)?u.remove():u.set(pe)}function getTextUpdater(me){return{set(u){me.textContent=u},remove(){me.textContent=""}}}function getAttributeUpdater(me,u,t){return{set(de){me.setAttributeNS(t,u,de)},remove(){me.removeAttributeNS(t,u)}}}function getStyleUpdater(me,u){return{set(t){me.style[u]=t},remove(){me.style[u]=null}}}function clone(me){return cloneDeepWith(me,t=>{if(t&&(t instanceof TemplateBinding||isTemplate(t)||isView$2(t)||isViewCollection(t)))return t})}function normalize(me){if(typeof me=="string"?me=normalizePlainTextDefinition(me):me.text&&normalizeTextDefinition(me),me.on&&(me.eventListeners=normalizeListeners(me.on),delete me.on),!me.text){me.attributes&&normalizeAttributes(me.attributes);const u=[];if(me.children)if(isViewCollection(me.children))u.push(me.children);else for(const t of me.children)isTemplate(t)||isView$2(t)||isNode(t)?u.push(t):u.push(new Template(t));me.children=u}return me}function normalizeAttributes(me){for(const u in me)me[u].value&&(me[u].value=toArray$2(me[u].value)),arrayify(me,u)}function normalizeListeners(me){for(const u in me)arrayify(me,u);return me}function normalizePlainTextDefinition(me){return{text:[me]}}function normalizeTextDefinition(me){me.text=toArray$2(me.text)}function arrayify(me,u){me[u]=toArray$2(me[u])}function arrayValueReducer(me,u){return isFalsy(u)?me:isFalsy(me)?u:`${me} ${u}`}function extendObjectValueArray(me,u){for(const t in u)me[t]?me[t].push(...u[t]):me[t]=u[t]}function extendTemplate(me,u){if(u.attributes&&(me.attributes||(me.attributes={}),extendObjectValueArray(me.attributes,u.attributes)),u.eventListeners&&(me.eventListeners||(me.eventListeners={}),extendObjectValueArray(me.eventListeners,u.eventListeners)),u.text&&me.text.push(...u.text),u.children&&u.children.length){if(me.children.length!=u.children.length)throw new CKEditorError("ui-template-extend-children-mismatch",me);let t=0;for(const de of u.children)extendTemplate(me.children[t++],de)}}function isFalsy(me){return!me&&me!==0}function isView$2(me){return me instanceof View}function isTemplate(me){return me instanceof Template}function isViewCollection(me){return me instanceof ViewCollection}function isNamespaced(me){return isObject$2(me[0])&&me[0].ns}function getEmptyRevertData(){return{children:[],bindings:[],attributes:{}}}function shouldExtend(me){return me=="class"||me=="style"}class View extends DomEmitterMixin(ObservableMixin()){constructor(t){super();wt(this,"element");wt(this,"isRendered");wt(this,"locale");wt(this,"t");wt(this,"template");wt(this,"_viewCollections");wt(this,"_unboundChildren");wt(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Collection,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(de,pe)=>{pe.locale=t,pe.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Template.bind(this,this)}createCollection(t){const de=new ViewCollection(t);return this._viewCollections.add(de),de}registerChild(t){isIterable(t)||(t=[t]);for(const de of t)this._unboundChildren.add(de)}deregisterChild(t){isIterable(t)||(t=[t]);for(const de of t)this._unboundChildren.remove(de)}setTemplate(t){this.template=new Template(t)}extendTemplate(t){Template.extend(this.template,t)}render(){if(this.isRendered)throw new CKEditorError("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function clickOutsideHandler({emitter:me,activator:u,callback:t,contextElements:de,listenerOptions:pe}){me.listenTo(document,"mousedown",(Le,Ye)=>{if(!u())return;const tt=typeof Ye.composedPath=="function"?Ye.composedPath():[],st=typeof de=="function"?de():de;for(const ht of st)if(ht.contains(Ye.target)||tt.includes(ht))return;t()},pe)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CssTransitionDisablerMixin(me){class u extends me{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...de){super(...de),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function submitHandler({view:me}){me.listenTo(me.element,"submit",(u,t)=>{t.preventDefault(),me.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function addKeyboardHandlingForGrid({keystrokeHandler:me,focusTracker:u,gridItems:t,numberOfColumns:de,uiLanguageDirection:pe}){const Le=typeof de=="number"?()=>de:de;me.set("arrowright",Ye((ht,mt)=>pe==="rtl"?st(ht,mt.length):tt(ht,mt.length))),me.set("arrowleft",Ye((ht,mt)=>pe==="rtl"?tt(ht,mt.length):st(ht,mt.length))),me.set("arrowup",Ye((ht,mt)=>{let gt=ht-Le();return gt<0&&(gt=ht+Le()*Math.floor(mt.length/Le()),gt>mt.length-1&&(gt-=Le())),gt})),me.set("arrowdown",Ye((ht,mt)=>{let gt=ht+Le();return gt>mt.length-1&&(gt=ht%Le()),gt}));function Ye(ht){return mt=>{const gt=t.find(vt=>vt.element===u.focusedElement),bt=t.getIndex(gt),_t=ht(bt,t);t.get(_t).focus(),mt.stopPropagation(),mt.preventDefault()}}function tt(ht,mt){return ht===mt-1?0:ht+1}function st(ht,mt){return ht===0?mt-1:ht-1}}const ll=class ll extends View{constructor(){super();const u=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",u.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",u.if("isColorInherited","ck-icon_inherit-color")],viewBox:u.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),de=t.getAttribute("viewBox");de&&(this.viewBox=de);for(const{name:pe,value:Le}of Array.from(t.attributes))ll.presentationalAttributeNames.includes(pe)&&this.element.setAttribute(pe,Le);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(u=>{u.style.fill=this.fillColor})}};wt(ll,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let IconView=ll;class ButtonLabelView extends View{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const u=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:u.to("style"),id:u.to("id")},children:[{text:u.to("text")}]})}}class ButtonView extends View{constructor(t,de=new ButtonLabelView){super(t);wt(this,"children");wt(this,"labelView");wt(this,"iconView");wt(this,"keystrokeView");wt(this,"_focusDelayed",null);const pe=this.bindTemplate,Le=uid();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${Le}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(de),this.iconView=new IconView,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const Ye={tag:"button",attributes:{class:["ck","ck-button",pe.to("class"),pe.if("isEnabled","ck-disabled",tt=>!tt),pe.if("isVisible","ck-hidden",tt=>!tt),pe.to("isOn",tt=>tt?"ck-on":"ck-off"),pe.if("withText","ck-button_with-text"),pe.if("withKeystroke","ck-button_with-keystroke")],role:pe.to("role"),type:pe.to("type",tt=>tt||"button"),tabindex:pe.to("tabindex"),"aria-checked":pe.to("_ariaChecked"),"aria-pressed":pe.to("_ariaPressed"),"aria-label":pe.to("ariaLabel"),"aria-labelledby":pe.to("ariaLabelledBy"),"aria-disabled":pe.if("isEnabled",!0,tt=>!tt),"data-cke-tooltip-text":pe.to("_tooltipString"),"data-cke-tooltip-position":pe.to("tooltipPosition")},children:this.children,on:{click:pe.to(tt=>{this.isEnabled?this.fire("execute"):tt.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(tt,st,ht)=>!st||isCheckableRole(ht)?!1:String(!!tt)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(tt,st,ht)=>!st||!isCheckableRole(ht)?!1:String(!!tt)),env.isSafari&&(this._focusDelayed||(this._focusDelayed=delay(()=>this.focus(),0)),Ye.on.mousedown=pe.to(()=>{this._focusDelayed()}),Ye.on.mouseup=pe.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(Ye)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new View;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",de=>getEnvKeystrokeText(de))}]}),t}_getTooltipString(t,de,pe){return t?typeof t=="string"?t:(pe&&(pe=getEnvKeystrokeText(pe)),t instanceof Function?t(de,pe):`${de}${pe?` (${pe})`:""}`):""}}function isCheckableRole(me){switch(me){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class FormHeaderView extends View{constructor(t,de={}){super(t);wt(this,"children");wt(this,"iconView");const pe=this.bindTemplate;this.set("label",de.label||""),this.set("class",de.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",pe.to("class")]},children:this.children}),de.icon&&(this.iconView=new IconView,this.iconView.content=de.icon,this.children.add(this.iconView));const Le=new View(t);Le.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:pe.to("label")}]}),this.children.add(Le)}}class FocusCycler extends EmitterMixin(){constructor(t){super();wt(this,"focusables");wt(this,"focusTracker");wt(this,"keystrokeHandler");wt(this,"actions");if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const de in t.actions){let pe=t.actions[de];typeof pe=="string"&&(pe=[pe]);for(const Le of pe)t.keystrokeHandler.set(Le,(Ye,tt)=>{this[de](),tt()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(isDomFocusable)||null}get last(){return this.focusables.filter(isDomFocusable).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((de,pe)=>{const Le=de.element===this.focusTracker.focusedElement;return Le&&(t=pe),Le}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;if(t&&this.focusables.getIndex(t)===this.current){this.fire("forwardCycle");return}t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;if(t&&this.focusables.getIndex(t)===this.current){this.fire("backwardCycle");return}t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const de=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",pe=>{const Le=de();this.focusNext(),Le!==de()&&pe.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",pe=>{const Le=de();this.focusPrevious(),Le!==de()&&pe.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,de){t&&this.focusTracker.focusedElement!==t.element&&t.focus(de)}_getDomFocusableItem(t){const de=this.focusables.length;if(!de)return null;const pe=this.current;if(pe===null)return this[t===1?"first":"last"];let Le=this.focusables.get(pe),Ye=(pe+de+t)%de;do{const tt=this.focusables.get(Ye);if(isDomFocusable(tt)){Le=tt;break}Ye=(Ye+de+t)%de}while(Ye!==pe);return Le}}function isDomFocusable(me){return isFocusable(me)&&isVisible(me.element)}function isFocusable(me){return"focus"in me&&typeof me.focus=="function"}function isViewWithFocusCycler(me){return isFocusable(me)&&"focusCycler"in me&&me.focusCycler instanceof FocusCycler}function DraggableViewMixin(me){class u extends me{constructor(...pe){super(...pe);wt(this,"_onDragBound",this._onDrag.bind(this));wt(this,"_onDragEndBound",this._onDragEnd.bind(this));wt(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(global$1.document,"mouseup",this._onDragEndBound),this.listenTo(global$1.document,"touchend",this._onDragEndBound),this.listenTo(global$1.document,"mousemove",this._onDragBound),this.listenTo(global$1.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(global$1.document,"mouseup",this._onDragEndBound),this.stopListening(global$1.document,"touchend",this._onDragEndBound),this.stopListening(global$1.document,"mousemove",this._onDragBound),this.stopListening(global$1.document,"touchmove",this._onDragBound)}_onDragStart(pe,Le){if(!this._isHandleElementPressed(Le))return;this._attachDragListeners();let Ye=0,tt=0;Le instanceof MouseEvent?(Ye=Le.clientX,tt=Le.clientY):(Ye=Le.touches[0].clientX,tt=Le.touches[0].clientY),this._lastDraggingCoordinates={x:Ye,y:tt},this.isDragging=!0}_onDrag(pe,Le){if(!this.isDragging){this._detachDragListeners();return}let Ye=0,tt=0;Le instanceof MouseEvent?(Ye=Le.clientX,tt=Le.clientY):(Ye=Le.touches[0].clientX,tt=Le.touches[0].clientY),Le.preventDefault(),this.fire("drag",{deltaX:Math.round(Ye-this._lastDraggingCoordinates.x),deltaY:Math.round(tt-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:Ye,y:tt}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(pe){return this.dragHandleElement?this.dragHandleElement===pe.target||pe.target instanceof HTMLElement&&this.dragHandleElement.contains(pe.target):!1}}return u}class DialogActionsView extends View{constructor(t){super(t);wt(this,"children");wt(this,"keystrokes");wt(this,"focusCycler");wt(this,"_focusTracker");wt(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new KeystrokeHandler,this._focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const de of t){const pe=new ButtonView(this.locale);let Le;pe.on("execute",()=>de.onExecute()),de.onCreate&&de.onCreate(pe);for(Le in de)Le!="onExecute"&&Le!="onCreate"&&pe.set(Le,de[Le]);this.children.add(pe)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class DialogContentView extends View{constructor(t){super(t);wt(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const DialogViewPosition={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},toPx$6=toUnit("px"),cl=class cl extends DraggableViewMixin(View){constructor(t,{getCurrentDomRoot:de,getViewportOffset:pe,keystrokeHandlerOptions:Le}){super(t);wt(this,"parts");wt(this,"headerView");wt(this,"closeButtonView");wt(this,"actionsView");wt(this,"contentView");wt(this,"keystrokes");wt(this,"focusTracker");wt(this,"wasMoved",!1);wt(this,"_getCurrentDomRoot");wt(this,"_getViewportOffset");wt(this,"_focusables");wt(this,"_focusCycler");const Ye=this.bindTemplate,tt=t.t;this.set("className",""),this.set("ariaLabel",tt("Editor dialog")),this.set("isModal",!1),this.set("position",DialogViewPosition.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=de,this._getViewportOffset=pe,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:Le}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",Ye.if("isModal","ck-dialog-overlay__transparent",st=>!st),Ye.if("_isVisible","ck-hidden",st=>!st)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",Ye.if("isModal","ck-dialog_modal"),Ye.to("className")],role:"dialog","aria-label":Ye.to("ariaLabel"),style:{top:Ye.to("_top",st=>toPx$6(st)),left:Ye.to("_left",st=>toPx$6(st)),visibility:Ye.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,de)=>{t.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),de())}),this.on("drag",(t,{deltaX:de,deltaY:pe})=>{this.wasMoved=!0,this.moveBy(de,pe)}),this.listenTo(global$1.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(global$1.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,de,pe)=>{pe&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:de,hasCloseButton:pe=!0,content:Le,actionButtons:Ye}){de&&(this.headerView=new FormHeaderView(this.locale,{icon:t}),pe&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=de,this.ariaLabel=de,this.parts.add(this.headerView,0)),Le&&(Le instanceof View&&(Le=[Le]),this.contentView=new DialogContentView(this.locale),this.contentView.children.addMany(Le),this.parts.add(this.contentView)),Ye&&(this.actionsView=new DialogActionsView(this.locale),this.actionsView.setButtons(Ye),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,de){const pe=this._getViewportRect(),Le=this._getDialogRect();t+Le.width>pe.right&&(t=pe.right-Le.width),t<pe.left&&(t=pe.left),de<pe.top&&(de=pe.top),this._moveTo(t,de)}_moveTo(t,de){this._left=t,this._top=de}moveBy(t,de){this.moveTo(this._left+t,this._top+de)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let de=this.position,pe;this._getCurrentDomRoot()?pe=this._getVisibleDomRootRect(t):de=DialogViewPosition.SCREEN_CENTER;const Le=cl.defaultOffset,Ye=this._getDialogRect();switch(de){case DialogViewPosition.EDITOR_TOP_SIDE:{if(pe){const tt=this.locale.contentLanguageDirection==="ltr"?pe.right-Ye.width-Le:pe.left+Le;this.moveTo(tt,pe.top+Le)}else this._moveOffScreen();break}case DialogViewPosition.EDITOR_CENTER:{pe?this.moveTo(Math.round(pe.left+pe.width/2-Ye.width/2),Math.round(pe.top+pe.height/2-Ye.height/2)):this._moveOffScreen();break}case DialogViewPosition.SCREEN_CENTER:{this.moveTo(Math.round((t.width-Ye.width)/2),Math.round((t.height-Ye.height)/2));break}case DialogViewPosition.EDITOR_TOP_CENTER:{pe?this.moveTo(Math.round(pe.left+pe.width/2-Ye.width/2),pe.top+Le):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BOTTOM_CENTER:{pe?this.moveTo(Math.round(pe.left+pe.width/2-Ye.width/2),pe.bottom-Ye.height-Le):this._moveOffScreen();break}case DialogViewPosition.EDITOR_ABOVE_CENTER:{pe?this.moveTo(Math.round(pe.left+pe.width/2-Ye.width/2),pe.top-Ye.height-Le):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BELOW_CENTER:{pe?this.moveTo(Math.round(pe.left+pe.width/2-Ye.width/2),pe.bottom+Le):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let de=new Rect(this._getCurrentDomRoot()).getVisible();if(de){if(de=t.getIntersection(de),!de)return null}else return null;return de}_getDialogRect(){return new Rect(this.element.firstElementChild)}_getViewportRect(){const t=new Rect(global$1.window);if(this.isModal)return t;const de={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return t.top+=de.top,t.height-=de.top,t.bottom-=de.bottom,t.height-=de.bottom,t.left+=de.left,t.right-=de.right,t.width-=de.left+de.right,t}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const de of this.contentView.children)isFocusable(de)&&t.push(de);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(de=>{this._focusables.add(de),this.focusTracker.add(de.element),isViewWithFocusCycler(de)&&this._focusCycler.chain(de.focusCycler)})}_createCloseButton(){const t=new ButtonView(this.locale),de=this.locale.t;return t.set({label:de("Close"),tooltip:!0,icon:icons.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}};wt(cl,"defaultOffset",15);let DialogView=cl;const Yi=class Yi extends Plugin{constructor(t){super(t);wt(this,"view");wt(this,"_onHide");const de=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:de("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),Yi._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,de)=>{this._show(de)}),this.on("show",(t,de)=>{de.onShow&&de.onShow(this)},{priority:"low"}),this.on("hide",()=>{Yi._visibleDialogPlugin&&Yi._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(de,pe)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),pe())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const de=t.document.differ.getChangedRoots();for(const pe of de)pe.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:de,title:pe,hasCloseButton:Le=!0,content:Ye,actionButtons:tt,className:st,isModal:ht,position:mt,onHide:gt,keystrokeHandlerOptions:bt}){const _t=this.editor;this.view=new DialogView(_t.locale,{getCurrentDomRoot:()=>_t.editing.view.getDomRoot(_t.model.document.selection.anchor.root.rootName),getViewportOffset:()=>_t.ui.viewportOffset,keystrokeHandlerOptions:bt});const vt=this.view;vt.on("close",()=>{this.hide()}),_t.ui.view.body.add(vt),_t.keystrokes.listenTo(vt.element),mt||(mt=ht?DialogViewPosition.SCREEN_CENTER:DialogViewPosition.EDITOR_CENTER),ht&&this._lockBodyScroll(),vt.set({position:mt,_isVisible:!0,className:st,isModal:ht}),vt.setupParts({icon:de,title:pe,hasCloseButton:Le,content:Ye,actionButtons:tt}),this.id=t,gt&&(this._onHide=gt),this.isOpen=!0,Yi._visibleDialogPlugin=this}hide(){Yi._visibleDialogPlugin&&Yi._visibleDialogPlugin.fire(`hide:${Yi._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const t=this.editor,de=this.view;de.isModal&&this._unlockBodyScroll(),de.contentView&&de.contentView.reset(),t.ui.view.body.remove(de),t.ui.focusTracker.remove(de.element),t.keystrokes.stopListening(de.element),de.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,Yi._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};wt(Yi,"_visibleDialogPlugin");let Dialog=Yi;class ListItemButtonView extends ButtonView{constructor(t,de=new ButtonLabelView){super(t,de);wt(this,"_checkIconHolderView",new CheckIconHolderView);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const pe=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",pe.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(Le,Ye)=>Le||Ye)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,de,pe)=>{const{children:Le,_checkIconHolderView:Ye}=this;pe?Le.add(Ye,0):Le.remove(Ye)})}}class CheckIconHolderView extends View{constructor(){super();wt(this,"children");wt(this,"_checkIconView",this._createCheckIconView());const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",de=>de?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,de,pe)=>{const{children:Le,_checkIconView:Ye}=this;pe&&!Le.has(Ye)?Le.add(Ye):!pe&&Le.has(Ye)&&Le.remove(Ye)})}_createCheckIconView(){const t=new IconView;return t.content=icons.check,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class MenuBarMenuListItemButtonView extends ListItemButtonView{constructor(u){super(u),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class LabelView extends View{constructor(t){super(t);wt(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${uid()}`;const de=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:de.to("for")},children:[{text:de.to("text")}]})}}class AccessibilityHelpContentView extends View{constructor(u,t){super(u);const de=u.t,pe=new LabelView;pe.text=de("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":pe.id,role:"document",tabindex:-1},children:[createElement(document,"p",{},de("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),pe]})}focus(){this.element.focus()}_createCategories(u){return u.map(t=>{const de=[createElement(document,"h3",{},t.label),...Array.from(t.groups.values()).map(pe=>this._createGroup(pe)).flat()];return t.description&&de.splice(1,0,createElement(document,"p",{},t.description)),createElement(document,"section",{},de)})}_createGroup(u){const t=u.keystrokes.sort((pe,Le)=>pe.label.localeCompare(Le.label)).map(pe=>this._createGroupRow(pe)).flat(),de=[createElement(document,"dl",{},t)];return u.label&&de.unshift(createElement(document,"h4",{},u.label)),de}_createGroupRow(u){const t=this.locale.t,de=createElement(document,"dt"),pe=createElement(document,"dd"),Le=normalizeKeystrokeDefinition(u.keystroke),Ye=[];for(const tt of Le)Ye.push(tt.map(keystrokeToEnvKbd).join(""));return de.innerHTML=u.label,pe.innerHTML=Ye.join(", ")+(u.mayRequireFn&&env.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[de,pe]}}function keystrokeToEnvKbd(me){return getEnvKeystrokeText(me).split("+").map(u=>`<kbd>${u}</kbd>`).join("+")}function normalizeKeystrokeDefinition(me){return typeof me=="string"?[[me]]:typeof me[0]=="string"?[me]:me}var accessibilityIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class AccessibilityHelp extends Plugin{constructor(){super(...arguments);wt(this,"contentView",null)}static get requires(){return[Dialog]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const pe=this._createButton(ButtonView);return pe.set({tooltip:!0,withText:!1,label:de("Accessibility help")}),pe}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const pe=this._createButton(MenuBarMenuListItemButtonView);return pe.label=de("Accessibility"),pe}),t.keystrokes.set("Alt+0",(pe,Le)=>{this._toggleDialog(),Le()}),this._setupRootLabels()}_createButton(t){const de=this.editor,pe=de.plugins.get("Dialog"),Le=de.locale,Ye=new t(Le);return Ye.set({keystroke:"Alt+0",icon:accessibilityIcon,isToggleable:!0}),Ye.on("execute",()=>this._toggleDialog()),Ye.bind("isOn").to(pe,"id",tt=>tt==="accessibilityHelp"),Ye}_setupRootLabels(){const t=this.editor,de=t.editing.view,pe=t.t;t.ui.on("ready",()=>{de.change(Ye=>{for(const tt of de.document.roots)Le(Ye,tt)}),t.on("addRoot",(Ye,tt)=>{const st=t.editing.view.document.getRoot(tt.rootName);de.change(ht=>Le(ht,st))},{priority:"low"})});function Le(Ye,tt){const ht=[tt.getAttribute("aria-label"),pe("Press %0 for help.",[getEnvKeystrokeText("Alt+0")])].filter(mt=>mt).join(". ");Ye.setAttribute("aria-label",ht,tt)}}_toggleDialog(){const t=this.editor,de=t.plugins.get("Dialog"),pe=t.locale.t;this.contentView||(this.contentView=new AccessibilityHelpContentView(t.locale,t.accessibility.keystrokeInfos)),de.id==="accessibilityHelp"?de.hide():de.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:pe("Accessibility help"),icon:accessibilityIcon,hasCloseButton:!0,content:this.contentView})}}const Wi=class Wi extends ViewCollection{constructor(t,de=[]){super(de);wt(this,"locale");wt(this,"_bodyCollectionContainer");this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Template({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Wi._bodyWrapper||!Wi._bodyWrapper.isConnected)&&(Wi._bodyWrapper=createElement(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Wi._bodyWrapper)),Wi._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Wi._bodyWrapper&&!Wi._bodyWrapper.childElementCount&&(Wi._bodyWrapper.remove(),delete Wi._bodyWrapper)}};wt(Wi,"_bodyWrapper");let BodyCollection=Wi;class SwitchButtonView extends ButtonView{constructor(t){super(t);wt(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new View;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class FileDialogButtonView extends FileDialogViewMixin(ButtonView){}class FileDialogListItemButtonView extends FileDialogViewMixin(ListItemButtonView){}function FileDialogViewMixin(me){class u extends me{constructor(...pe){super(...pe);wt(this,"buttonView");wt(this,"_fileInputView");this.buttonView=this,this._fileInputView=new FileInputView(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return u}class FileInputView extends View{constructor(u){super(u),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var dropdownArrowIcon='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class CollapsibleView extends View{constructor(t,de){super(t);wt(this,"buttonView");wt(this,"children");const pe=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),de&&this.children.addMany(de),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",pe.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:pe.if("isCollapsed","hidden"),"aria-labelledby":pe.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new ButtonView(this.locale),de=t.bindTemplate;return t.set({withText:!0,icon:dropdownArrowIcon}),t.extendTemplate({attributes:{"aria-expanded":de.to("isOn",pe=>String(pe))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",pe=>!pe),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedColorOptions(me,u){const t=me.t,de={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return u.map(pe=>{const Le=de[pe.label];return Le&&Le!=pe.label&&(pe.label=Le),pe})}function normalizeColorOptions(me){return me.map(normalizeSingleColorDefinition).filter(u=>!!u)}function normalizeSingleColorDefinition(me){return typeof me=="string"?{model:me,label:me,hasBorder:!1,view:{name:"span",styles:{color:me}}}:{model:me.color,label:me.label||me.color,hasBorder:me.hasBorder===void 0?!1:me.hasBorder,view:{name:"span",styles:{color:`${me.color}`}}}}var checkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class ColorTileView extends ButtonView{constructor(u){super(u);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=checkIcon,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",de=>env.isMediaForcedColors?null:de)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ColorGridView extends View{constructor(t,de){super(t);wt(this,"columns");wt(this,"items");wt(this,"focusTracker");wt(this,"keystrokes");const pe=de&&de.colorDefinitions?de.colorDefinitions:[];this.columns=de&&de.columns?de.columns:5;const Le={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.items.on("add",(Ye,tt)=>{tt.isOn=tt.color===this.selectedColor}),pe.forEach(Ye=>{const tt=new ColorTileView;tt.set({color:Ye.color,label:Ye.label,tooltip:!0,hasBorder:Ye.options.hasBorder}),tt.on("execute",()=>{this.fire("execute",{value:Ye.color,hasBorder:Ye.options.hasBorder,label:Ye.label})}),this.items.add(tt)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:Le}}),this.on("change:selectedColor",(Ye,tt,st)=>{for(const ht of this.items)ht.isOn=ht.color===st})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,de)=>{this.focusTracker.add(de.element)}),this.items.on("remove",(t,de)=>{this.focusTracker.remove(de.element)}),this.keystrokes.listenTo(this.element),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertColor(me,u){if(!me)return"";const t=parseColorString(me);if(!t)return"";if(t.space===u)return me;if(!canConvertParsedColor(t))return"";const pe=convert[t.space][u];if(!pe)return"";const Le=pe(t.space==="hex"?t.hexValue:t.values);return formatColorOutput(Le,u)}function convertToHex(me){if(!me)return"";const u=parseColorString(me);return u?u.space==="hex"?u.hexValue:convertColor(me,"hex"):"#000"}function registerCustomElement(me,u){customElements.get(me)===void 0&&customElements.define(me,u)}function formatColorOutput(me,u){switch(u){case"hex":return`#${me}`;case"rgb":return`rgb(${me[0]}, ${me[1]}, ${me[2]})`;case"hsl":return`hsl(${me[0]}, ${me[1]}%, ${me[2]}%)`;case"hwb":return`hwb(${me[0]}, ${me[1]}, ${me[2]})`;case"lab":return`lab(${me[0]}% ${me[1]} ${me[2]})`;case"lch":return`lch(${me[0]}% ${me[1]} ${me[2]})`;default:return""}}function parseColorString(me){if(me.startsWith("#")){const t=parse$1(me);return{space:"hex",values:t.values,hexValue:me,alpha:t.alpha}}const u=parse$1(me);return u.space?u:null}function canConvertParsedColor(me){return Object.keys(convert).includes(me.space)}class LabeledFieldView extends View{constructor(t,de){super(t);wt(this,"fieldView");wt(this,"labelView");wt(this,"statusView");wt(this,"fieldWrapperChildren");const pe=`ck-labeled-field-view-${uid()}`,Le=`ck-labeled-field-view-status-${uid()}`;this.fieldView=de(this,pe,Le),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(pe),this.statusView=this._createStatusView(Le),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(tt,st)=>tt||st);const Ye=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",Ye.to("class"),Ye.if("isEnabled","ck-disabled",tt=>!tt),Ye.if("isEmpty","ck-labeled-field-view_empty"),Ye.if("isFocused","ck-labeled-field-view_focused"),Ye.if("placeholder","ck-labeled-field-view_placeholder"),Ye.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const de=new LabelView(this.locale);return de.for=t,de.bind("text").to(this,"label"),de}_createStatusView(t){const de=new View(this.locale),pe=this.bindTemplate;return de.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",pe.if("errorText","ck-labeled-field-view__status_error"),pe.if("_statusText","ck-hidden",Le=>!Le)],id:t,role:pe.if("errorText","alert")},children:[{text:pe.to("_statusText")}]}),de}focus(t){this.fieldView.focus(t)}}class InputBase extends View{constructor(t){super(t);wt(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new FocusTracker,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const de=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",de.if("isFocused","ck-input_focused"),de.if("isEmpty","ck-input-text_empty"),de.if("hasError","ck-error")],id:de.to("id"),placeholder:de.to("placeholder"),tabindex:de.to("tabIndex"),readonly:de.to("isReadOnly"),"aria-invalid":de.if("hasError",!0),"aria-describedby":de.to("ariaDescribedById"),"aria-label":de.to("ariaLabel")},on:{input:de.to((...pe)=>{this.fire("input",...pe),this._updateIsEmpty()}),change:de.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,de,pe)=>{this._setDomElementValue(pe),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=isInputElementEmpty(this.element)}_setDomElementValue(t){this.element.value=!t&&t!==0?"":t}}function isInputElementEmpty(me){return!me.value}class InputView extends InputBase{constructor(u){super(u),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class InputTextView extends InputView{constructor(u){super(u),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class InputNumberView extends InputView{constructor(u,{min:t,max:de,step:pe}={}){super(u);const Le=this.bindTemplate;this.set("min",t),this.set("max",de),this.set("step",pe),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:Le.to("min"),max:Le.to("max"),step:Le.to("step")}})}}class DropdownPanelView extends View{constructor(t){super(t);wt(this,"children");const de=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",de.to("position",pe=>`ck-dropdown__panel_${pe}`),de.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:de.to(pe=>{pe.target.tagName.toLocaleLowerCase()!=="input"&&pe.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():logWarning("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}const Jo=class Jo extends View{constructor(t,de,pe){super(t);wt(this,"buttonView");wt(this,"panelView");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"listView");wt(this,"toolbarView");wt(this,"menuView");const Le=this.bindTemplate;this.buttonView=de,this.panelView=pe,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",Le.to("class"),Le.if("isEnabled","ck-disabled",Ye=>!Ye)],id:Le.to("id"),"aria-describedby":Le.to("ariaDescribedById")},children:[de,pe]}),de.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":Le.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(de,pe,Le)=>{if(Le)if(this.panelPosition==="auto"){const Ye=Jo._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=Ye?Ye.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(de,pe)=>{this.isOpen&&(this.isOpen=!1,pe())};this.keystrokes.set("arrowdown",(de,pe)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,pe())}),this.keystrokes.set("arrowright",(de,pe)=>{this.isOpen&&pe()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:de,southEast:pe,southWest:Le,northEast:Ye,northWest:tt,southMiddleEast:st,southMiddleWest:ht,northMiddleEast:mt,northMiddleWest:gt}=Jo.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[pe,Le,st,ht,t,Ye,tt,mt,gt,de]:[Le,pe,ht,st,t,tt,Ye,gt,mt,de]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};wt(Jo,"defaultPanelPositions",{south:(t,de)=>({top:t.bottom,left:t.left-(de.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,de)=>({top:t.bottom,left:t.left-de.width+t.width,name:"sw"}),southMiddleEast:(t,de)=>({top:t.bottom,left:t.left-(de.width-t.width)/4,name:"sme"}),southMiddleWest:(t,de)=>({top:t.bottom,left:t.left-(de.width-t.width)*3/4,name:"smw"}),north:(t,de)=>({top:t.top-de.height,left:t.left-(de.width-t.width)/2,name:"n"}),northEast:(t,de)=>({top:t.top-de.height,left:t.left,name:"ne"}),northWest:(t,de)=>({top:t.top-de.height,left:t.left-de.width+t.width,name:"nw"}),northMiddleEast:(t,de)=>({top:t.top-de.height,left:t.left-(de.width-t.width)/4,name:"nme"}),northMiddleWest:(t,de)=>({top:t.top-de.height,left:t.left-(de.width-t.width)*3/4,name:"nmw"})}),wt(Jo,"_getOptimalPosition",getOptimalPosition);let DropdownView=Jo;class DropdownButtonView extends ButtonView{constructor(t){super(t);wt(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",de=>String(de))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new IconView;return t.content=dropdownArrowIcon,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class ListItemView extends View{constructor(t){super(t);wt(this,"children");const de=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",de.if("isVisible","ck-hidden",pe=>!pe)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class ListSeparatorView extends View{constructor(u){super(u),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class ListItemGroupView extends View{constructor(t,de=new LabelView){super(t);wt(this,"labelView");wt(this,"items");wt(this,"children");const pe=this.bindTemplate,Le=new ListView(t);this.set({label:"",isVisible:!0}),this.labelView=de,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,Le]),Le.set({role:"group",ariaLabelledBy:de.id}),Le.focusTracker.destroy(),Le.keystrokes.destroy(),this.items=Le.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",pe.if("isVisible","ck-hidden",Ye=>!Ye)]},children:this.children})}focus(){if(this.items){const t=this.items.find(de=>!(de instanceof ListSeparatorView));t&&t.focus()}}}class ListView extends View{constructor(t){super(t);wt(this,"focusables");wt(this,"items");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"_focusCycler");wt(this,"_listItemGroupToChangeListeners",new WeakMap);const de=this.bindTemplate;this.focusables=new ViewCollection,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:de.to("role"),"aria-label":de.to("ariaLabel"),"aria-labelledby":de.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof ListItemGroupView?this._registerFocusableItemsGroup(t):t instanceof ListItemView&&this._registerFocusableListItem(t);this.items.on("change",(t,de)=>{for(const pe of de.removed)pe instanceof ListItemGroupView?this._deregisterFocusableItemsGroup(pe):pe instanceof ListItemView&&this._deregisterFocusableListItem(pe);for(const pe of Array.from(de.added).reverse())pe instanceof ListItemGroupView?this._registerFocusableItemsGroup(pe,de.index):this._registerFocusableListItem(pe,de.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,de){this.focusTracker.add(t.element),this.focusables.add(t,de)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(de,pe)=>{for(const Le of pe.removed)this._deregisterFocusableListItem(Le);for(const Le of Array.from(pe.added).reverse())this._registerFocusableListItem(Le,this.items.getIndex(t)+pe.index)}}_registerFocusableItemsGroup(t,de){Array.from(t.items).forEach((Le,Ye)=>{const tt=typeof de<"u"?de+Ye:void 0;this._registerFocusableListItem(Le,tt)});const pe=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,pe),t.items.on("change",pe)}_deregisterFocusableItemsGroup(t){for(const de of t.items)this._deregisterFocusableListItem(de);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}const toPx$5=toUnit("px"),POSITION_OFF_SCREEN={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Mi=class Mi extends View{constructor(t){super(t);wt(this,"content");wt(this,"_pinWhenIsVisibleCallback");wt(this,"_resizeObserver");const de=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",de.to("position",pe=>`ck-balloon-panel_${pe}`),de.if("isVisible","ck-balloon-panel_visible"),de.if("withArrow","ck-balloon-panel_with-arrow"),de.to("class")],style:{top:de.to("top",toPx$5),left:de.to("left",toPx$5)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const de=getDomElement(t.target);if(de&&!isVisible(de))return!1;this.show();const pe=Mi.defaultPositions,Le=Object.assign({},{element:this.element,positions:[pe.southArrowNorth,pe.southArrowNorthMiddleWest,pe.southArrowNorthMiddleEast,pe.southArrowNorthWest,pe.southArrowNorthEast,pe.northArrowSouth,pe.northArrowSouthMiddleWest,pe.northArrowSouthMiddleEast,pe.northArrowSouthWest,pe.northArrowSouthEast,pe.viewportStickyNorth],limiter:global$1.document.body,fitInViewport:!0},t),Ye=Mi._getOptimalPosition(Le)||POSITION_OFF_SCREEN,tt=parseInt(Ye.left),st=parseInt(Ye.top),ht=Ye.name,mt=Ye.config||{},{withArrow:gt=!0}=mt;return this.top=st,this.left=tt,this.position=ht,this.withArrow=gt,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let de=getDomElement(t.target);const pe=t.limiter?getDomElement(t.limiter):global$1.document.body;if(this.listenTo(global$1.document,"scroll",(Le,Ye)=>{const tt=Ye.target,st=de&&tt.contains(de),ht=pe&&tt.contains(pe);(st||ht||!de||!pe)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(global$1.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(de&&isText(de)&&(de=de.parentElement),de)){const Le=()=>{isVisible(de)||this.unpin()};this._resizeObserver=new ResizeObserver$1(de,Le)}return!0}_stopPinning(){this.stopListening(global$1.document,"scroll"),this.stopListening(global$1.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:de=Mi.arrowSideOffset,heightOffset:pe=Mi.arrowHeightOffset,stickyVerticalOffset:Le=Mi.stickyVerticalOffset,config:Ye}=t;return{northWestArrowSouthWest:(ht,mt)=>({top:tt(ht,mt),left:ht.left-de,name:"arrow_sw",...Ye&&{config:Ye}}),northWestArrowSouthMiddleWest:(ht,mt)=>({top:tt(ht,mt),left:ht.left-mt.width*.25-de,name:"arrow_smw",...Ye&&{config:Ye}}),northWestArrowSouth:(ht,mt)=>({top:tt(ht,mt),left:ht.left-mt.width/2,name:"arrow_s",...Ye&&{config:Ye}}),northWestArrowSouthMiddleEast:(ht,mt)=>({top:tt(ht,mt),left:ht.left-mt.width*.75+de,name:"arrow_sme",...Ye&&{config:Ye}}),northWestArrowSouthEast:(ht,mt)=>({top:tt(ht,mt),left:ht.left-mt.width+de,name:"arrow_se",...Ye&&{config:Ye}}),northArrowSouthWest:(ht,mt)=>({top:tt(ht,mt),left:ht.left+ht.width/2-de,name:"arrow_sw",...Ye&&{config:Ye}}),northArrowSouthMiddleWest:(ht,mt)=>({top:tt(ht,mt),left:ht.left+ht.width/2-mt.width*.25-de,name:"arrow_smw",...Ye&&{config:Ye}}),northArrowSouth:(ht,mt)=>({top:tt(ht,mt),left:ht.left+ht.width/2-mt.width/2,name:"arrow_s",...Ye&&{config:Ye}}),northArrowSouthMiddleEast:(ht,mt)=>({top:tt(ht,mt),left:ht.left+ht.width/2-mt.width*.75+de,name:"arrow_sme",...Ye&&{config:Ye}}),northArrowSouthEast:(ht,mt)=>({top:tt(ht,mt),left:ht.left+ht.width/2-mt.width+de,name:"arrow_se",...Ye&&{config:Ye}}),northEastArrowSouthWest:(ht,mt)=>({top:tt(ht,mt),left:ht.right-de,name:"arrow_sw",...Ye&&{config:Ye}}),northEastArrowSouthMiddleWest:(ht,mt)=>({top:tt(ht,mt),left:ht.right-mt.width*.25-de,name:"arrow_smw",...Ye&&{config:Ye}}),northEastArrowSouth:(ht,mt)=>({top:tt(ht,mt),left:ht.right-mt.width/2,name:"arrow_s",...Ye&&{config:Ye}}),northEastArrowSouthMiddleEast:(ht,mt)=>({top:tt(ht,mt),left:ht.right-mt.width*.75+de,name:"arrow_sme",...Ye&&{config:Ye}}),northEastArrowSouthEast:(ht,mt)=>({top:tt(ht,mt),left:ht.right-mt.width+de,name:"arrow_se",...Ye&&{config:Ye}}),southWestArrowNorthWest:ht=>({top:st(ht),left:ht.left-de,name:"arrow_nw",...Ye&&{config:Ye}}),southWestArrowNorthMiddleWest:(ht,mt)=>({top:st(ht),left:ht.left-mt.width*.25-de,name:"arrow_nmw",...Ye&&{config:Ye}}),southWestArrowNorth:(ht,mt)=>({top:st(ht),left:ht.left-mt.width/2,name:"arrow_n",...Ye&&{config:Ye}}),southWestArrowNorthMiddleEast:(ht,mt)=>({top:st(ht),left:ht.left-mt.width*.75+de,name:"arrow_nme",...Ye&&{config:Ye}}),southWestArrowNorthEast:(ht,mt)=>({top:st(ht),left:ht.left-mt.width+de,name:"arrow_ne",...Ye&&{config:Ye}}),southArrowNorthWest:ht=>({top:st(ht),left:ht.left+ht.width/2-de,name:"arrow_nw",...Ye&&{config:Ye}}),southArrowNorthMiddleWest:(ht,mt)=>({top:st(ht),left:ht.left+ht.width/2-mt.width*.25-de,name:"arrow_nmw",...Ye&&{config:Ye}}),southArrowNorth:(ht,mt)=>({top:st(ht),left:ht.left+ht.width/2-mt.width/2,name:"arrow_n",...Ye&&{config:Ye}}),southArrowNorthMiddleEast:(ht,mt)=>({top:st(ht),left:ht.left+ht.width/2-mt.width*.75+de,name:"arrow_nme",...Ye&&{config:Ye}}),southArrowNorthEast:(ht,mt)=>({top:st(ht),left:ht.left+ht.width/2-mt.width+de,name:"arrow_ne",...Ye&&{config:Ye}}),southEastArrowNorthWest:ht=>({top:st(ht),left:ht.right-de,name:"arrow_nw",...Ye&&{config:Ye}}),southEastArrowNorthMiddleWest:(ht,mt)=>({top:st(ht),left:ht.right-mt.width*.25-de,name:"arrow_nmw",...Ye&&{config:Ye}}),southEastArrowNorth:(ht,mt)=>({top:st(ht),left:ht.right-mt.width/2,name:"arrow_n",...Ye&&{config:Ye}}),southEastArrowNorthMiddleEast:(ht,mt)=>({top:st(ht),left:ht.right-mt.width*.75+de,name:"arrow_nme",...Ye&&{config:Ye}}),southEastArrowNorthEast:(ht,mt)=>({top:st(ht),left:ht.right-mt.width+de,name:"arrow_ne",...Ye&&{config:Ye}}),westArrowEast:(ht,mt)=>({top:ht.top+ht.height/2-mt.height/2,left:ht.left-mt.width-pe,name:"arrow_e",...Ye&&{config:Ye}}),eastArrowWest:(ht,mt)=>({top:ht.top+ht.height/2-mt.height/2,left:ht.right+pe,name:"arrow_w",...Ye&&{config:Ye}}),viewportStickyNorth:(ht,mt,gt,bt)=>{const _t=bt||gt;return!ht.getIntersection(_t)||_t.height-ht.height>Le?null:{top:_t.top+Le,left:ht.left+ht.width/2-mt.width/2,name:"arrowless",config:{withArrow:!1,...Ye}}}};function tt(ht,mt){return ht.top-mt.height-pe}function st(ht){return ht.bottom+pe}}};wt(Mi,"arrowSideOffset",25),wt(Mi,"arrowHeightOffset",10),wt(Mi,"stickyVerticalOffset",20),wt(Mi,"_getOptimalPosition",getOptimalPosition),wt(Mi,"defaultPositions",Mi.generatePositions());let BalloonPanelView=Mi;function getDomElement(me){return isElement$2(me)?me:isRange(me)?me.commonAncestorContainer:typeof me=="function"?getDomElement(me()):null}class ToolbarSeparatorView extends View{constructor(u){super(u),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ToolbarLineBreakView extends View{constructor(u){super(u),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function preventDefault(me){return me.bindTemplate.to(u=>{u.target===me.element&&u.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeToolbarConfig(me){if(Array.isArray(me))return{items:me,removeItems:[]};const u={items:[],removeItems:[]};return me?{...u,...me}:u}const NESTED_TOOLBAR_ICONS={alignLeft:icons.alignLeft,bold:icons.bold,importExport:icons.importExport,paragraph:icons.paragraph,plus:icons.plus,text:icons.text,threeVerticalDots:icons.threeVerticalDots,pilcrow:icons.pilcrow,dragIndicator:icons.dragIndicator};class ToolbarView extends View{constructor(t,de){super(t);wt(this,"options");wt(this,"items");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"itemsView");wt(this,"children");wt(this,"focusables");wt(this,"_focusCycler");wt(this,"_behavior");const pe=this.bindTemplate,Le=this.t;this.options=de||{},this.set("ariaLabel",Le("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new ItemsView(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const Ye=t.uiLanguageDirection==="rtl";this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[Ye?"arrowright":"arrowleft","arrowup"],focusNext:[Ye?"arrowleft":"arrowright","arrowdown"]}});const tt=["ck","ck-toolbar",pe.to("class"),pe.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&tt.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:tt,role:pe.to("role"),"aria-label":pe.to("ariaLabel"),style:{maxWidth:pe.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:preventDefault(this)}}),this._behavior=this.options.shouldGroupWhenFull?new DynamicGrouping(this):new StaticLayout(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,de)=>{this.focusTracker.add(de)}),this.items.on("remove",(t,de)=>{this.focusTracker.remove(de)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,de,pe){this.items.addMany(this._buildItemsFromConfig(t,de,pe))}_buildItemsFromConfig(t,de,pe){const Le=normalizeToolbarConfig(t),Ye=pe||Le.removeItems;return this._cleanItemsConfiguration(Le.items,de,Ye).map(st=>isObject$2(st)?this._createNestedToolbarDropdown(st,de,Ye):st==="|"?new ToolbarSeparatorView:st==="-"?new ToolbarLineBreakView:de.create(st)).filter(st=>!!st)}_cleanItemsConfiguration(t,de,pe){const Le=t.filter((Ye,tt,st)=>Ye==="|"?!0:pe.indexOf(Ye)!==-1?!1:Ye==="-"?this.options.shouldGroupWhenFull?(logWarning("toolbarview-line-break-ignored-when-grouping-items",st),!1):!0:!isObject$2(Ye)&&!de.has(Ye)?(logWarning("toolbarview-item-unavailable",{item:Ye}),!1):!0);return this._cleanSeparatorsAndLineBreaks(Le)}_cleanSeparatorsAndLineBreaks(t){const de=tt=>tt!=="-"&&tt!=="|",pe=t.length,Le=t.findIndex(de);if(Le===-1)return[];const Ye=pe-t.slice().reverse().findIndex(de);return t.slice(Le,Ye).filter((tt,st,ht)=>de(tt)?!0:!(st>0&&ht[st-1]===tt))}_createNestedToolbarDropdown(t,de,pe){let{label:Le,icon:Ye,items:tt,tooltip:st=!0,withText:ht=!1}=t;if(tt=this._cleanItemsConfiguration(tt,de,pe),!tt.length)return null;const mt=this.locale,gt=createDropdown(mt);return Le||logWarning("toolbarview-nested-toolbar-dropdown-missing-label",t),gt.class="ck-toolbar__nested-toolbar-dropdown",gt.buttonView.set({label:Le,tooltip:st,withText:!!ht}),Ye!==!1?gt.buttonView.icon=NESTED_TOOLBAR_ICONS[Ye]||Ye||icons.threeVerticalDots:gt.buttonView.withText=!0,addToolbarToDropdown(gt,()=>gt.toolbarView._buildItemsFromConfig(tt,de,pe)),gt}}class ItemsView extends View{constructor(t){super(t);wt(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class StaticLayout{constructor(u){const t=u.bindTemplate;u.set("isVertical",!1),u.itemsView.children.bindTo(u.items).using(de=>de),u.focusables.bindTo(u.items).using(de=>isFocusable(de)?de:null),u.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class DynamicGrouping{constructor(u){wt(this,"view");wt(this,"viewChildren");wt(this,"viewFocusables");wt(this,"viewItemsView");wt(this,"viewFocusTracker");wt(this,"viewLocale");wt(this,"ungroupedItems");wt(this,"groupedItems");wt(this,"groupedItemsDropdown");wt(this,"resizeObserver",null);wt(this,"cachedPadding",null);wt(this,"shouldUpdateGroupingOnNextResize",!1);wt(this,"viewElement");this.view=u,this.viewChildren=u.children,this.viewFocusables=u.focusables,this.viewItemsView=u.itemsView,this.viewFocusTracker=u.focusTracker,this.viewLocale=u.locale,this.ungroupedItems=u.createCollection(),this.groupedItems=u.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),u.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),u.children.on("change",this._updateFocusCyclableItems.bind(this)),u.items.on("change",(t,de)=>{const pe=de.index,Le=Array.from(de.added);for(const Ye of de.removed)pe>=this.ungroupedItems.length?this.groupedItems.remove(Ye):this.ungroupedItems.remove(Ye);for(let Ye=pe;Ye<pe+Le.length;Ye++){const tt=Le[Ye-pe];Ye>this.ungroupedItems.length?this.groupedItems.add(tt,Ye-this.ungroupedItems.length):this.ungroupedItems.add(tt,Ye)}this._updateGrouping()}),u.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(u){this.viewElement=u.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(u)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!isVisible(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const u=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==u&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const u=this.viewElement,t=this.viewLocale.uiLanguageDirection,de=new Rect(u.lastChild),pe=new Rect(u);if(!this.cachedPadding){const Le=global$1.window.getComputedStyle(u),Ye=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(Le[Ye])}return t==="ltr"?de.right>pe.right-this.cachedPadding:de.left<pe.left+this.cachedPadding}_enableGroupingOnResize(){let u;this.resizeObserver=new ResizeObserver$1(this.viewElement,t=>{(!u||u!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),u=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(u){u.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new ToolbarSeparatorView),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const u=this.viewLocale,t=u.t,de=createDropdown(u);return de.class="ck-toolbar__grouped-dropdown",de.panelPosition=u.uiLanguageDirection==="ltr"?"sw":"se",addToolbarToDropdown(de,this.groupedItems),de.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:u.uiLanguageDirection==="rtl"?"se":"sw",icon:icons.threeVerticalDots}),de}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(u=>{isFocusable(u)&&this.viewFocusables.add(u)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class SplitButtonView extends View{constructor(t,de){super(t);wt(this,"children");wt(this,"actionView");wt(this,"arrowView");wt(this,"keystrokes");wt(this,"focusTracker");const pe=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(de),this.arrowView=this._createArrowView(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",pe.to("class"),pe.if("isVisible","ck-hidden",Le=>!Le),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,de)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),de())}),this.keystrokes.set("arrowleft",(t,de)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),de())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const de=t||new ButtonView;return t||de.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),de.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),de.delegate("execute").to(this),de}_createArrowView(){const t=new ButtonView,de=t.bindTemplate;return t.icon=dropdownArrowIcon,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":de.to("isOn"),"aria-haspopup":!0,"aria-expanded":de.to("isOn",pe=>String(pe))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function createDropdown(me,u=DropdownButtonView){const t=typeof u=="function"?new u(me):u,de=new DropdownPanelView(me),pe=new DropdownView(me,t,de);return t.bind("isEnabled").to(pe),t instanceof SplitButtonView?t.arrowView.bind("isOn").to(pe,"isOpen"):t.bind("isOn").to(pe,"isOpen"),addDefaultBehaviors(pe),pe}function addToolbarToDropdown(me,u,t={}){me.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),me.isOpen?addToolbarToOpenDropdown(me,u,t):me.once("change:isOpen",()=>addToolbarToOpenDropdown(me,u,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&focusChildOnDropdownOpen(me,()=>me.toolbarView.items.find(de=>de.isOn))}function addToolbarToOpenDropdown(me,u,t){const de=me.locale,pe=de.t,Le=me.toolbarView=new ToolbarView(de),Ye=typeof u=="function"?u():u;Le.ariaLabel=t.ariaLabel||pe("Dropdown toolbar"),t.maxWidth&&(Le.maxWidth=t.maxWidth),t.class&&(Le.class=t.class),t.isCompact&&(Le.isCompact=t.isCompact),t.isVertical&&(Le.isVertical=!0),Ye instanceof ViewCollection?Le.items.bindTo(Ye).using(tt=>tt):Le.items.addMany(Ye),me.panelView.children.add(Le),me.focusTracker.add(Le),Le.items.delegate("execute").to(me)}function addListToDropdown(me,u,t={}){me.isOpen?addListToOpenDropdown(me,u,t):me.once("change:isOpen",()=>addListToOpenDropdown(me,u,t),{priority:"highest"}),focusChildOnDropdownOpen(me,()=>me.listView.items.find(de=>de instanceof ListItemView?de.children.first.isOn:!1))}function addListToOpenDropdown(me,u,t){const de=me.locale,pe=me.listView=new ListView(de),Le=typeof u=="function"?u():u;pe.ariaLabel=t.ariaLabel,pe.role=t.role,bindViewCollectionItemsToDefinitions(me,pe.items,Le,de),me.panelView.children.add(pe),pe.items.delegate("execute").to(me)}function focusChildOnDropdownOpen(me,u){me.on("change:isOpen",()=>{if(!me.isOpen)return;const t=u();t&&(typeof t.focus=="function"?t.focus():logWarning("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:priorities.low-10})}function addDefaultBehaviors(me){closeDropdownOnClickOutside(me),closeDropdownOnExecute(me),closeDropdownOnBlur(me),focusDropdownContentsOnArrows(me),focusDropdownButtonOnClose(me),focusDropdownPanelOnOpen(me)}function closeDropdownOnClickOutside(me){clickOutsideHandler({emitter:me,activator:()=>me.isRendered&&me.isOpen,callback:()=>{me.isOpen=!1},contextElements:()=>[me.element,...getFocusTrackerTreeElements(me.focusTracker).filter(u=>!me.element.contains(u))]})}function getFocusTrackerTreeElements(me){return[...me.elements,...me.externalViews.flatMap(u=>getFocusTrackerTreeElements(u.focusTracker))]}function closeDropdownOnExecute(me){me.on("execute",u=>{u.source instanceof SwitchButtonView||(me.isOpen=!1)})}function closeDropdownOnBlur(me){me.focusTracker.on("change:isFocused",(u,t,de)=>{de||!me.isOpen||(me.isOpen=!1)})}function focusDropdownContentsOnArrows(me){me.keystrokes.set("arrowdown",(u,t)=>{me.isOpen&&(me.panelView.focus(),t())}),me.keystrokes.set("arrowup",(u,t)=>{me.isOpen&&(me.panelView.focusLast(),t())})}function focusDropdownButtonOnClose(me){me.on("change:isOpen",(u,t,de)=>{if(de)return;me.focusTracker.elements.some(Le=>Le.contains(global$1.document.activeElement))&&me.buttonView.focus()})}function focusDropdownPanelOnOpen(me){me.on("change:isOpen",(u,t,de)=>{de&&me.panelView.focus()},{priority:"low"})}function bindViewCollectionItemsToDefinitions(me,u,t,de){u.on("change",()=>{const pe=[...u].reduce((Ye,tt)=>(tt instanceof ListItemView&&tt.children.first instanceof ListItemButtonView&&Ye.push(tt.children.first),Ye),[]),Le=pe.some(Ye=>Ye.isToggleable);pe.forEach(Ye=>{Ye.hasCheckSpace=Le})}),u.bindTo(t).using(pe=>{if(pe.type==="separator")return new ListSeparatorView(de);if(pe.type==="group"){const Le=new ListItemGroupView(de);return Le.set({label:pe.label}),bindViewCollectionItemsToDefinitions(me,Le.items,pe.items,de),Le.items.delegate("execute").to(me),Le}else if(pe.type==="button"||pe.type==="switchbutton"){const Le=pe.model.role==="menuitemcheckbox"||pe.model.role==="menuitemradio",Ye=new ListItemView(de);let tt;return pe.type==="button"?(tt=new ListItemButtonView(de),tt.set({isToggleable:Le})):tt=new SwitchButtonView(de),tt.bind(...Object.keys(pe.model)).to(pe.model),tt.delegate("execute").to(Ye),Ye.children.add(tt),Ye}return null})}const createLabeledInputText=(me,u,t)=>{const de=new InputTextView(me.locale);return de.set({id:u,ariaDescribedById:t}),de.bind("isReadOnly").to(me,"isEnabled",pe=>!pe),de.bind("hasError").to(me,"errorText",pe=>!!pe),de.on("input",()=>{me.errorText=null}),me.bind("isEmpty","isFocused","placeholder").to(de),de},createLabeledInputNumber=(me,u,t)=>{const de=new InputNumberView(me.locale);return de.set({id:u,ariaDescribedById:t,inputMode:"numeric"}),de.bind("isReadOnly").to(me,"isEnabled",pe=>!pe),de.bind("hasError").to(me,"errorText",pe=>!!pe),de.on("input",()=>{me.errorText=null}),me.bind("isEmpty","isFocused","placeholder").to(de),de},createLabeledDropdown=(me,u,t)=>{const de=createDropdown(me.locale);return de.set({id:u,ariaDescribedById:t}),de.bind("isEnabled").to(me),de},waitingTime=150;class ColorPickerView extends View{constructor(t,de={}){super(t);wt(this,"hexInputRow");wt(this,"_debounceColorPickerEvent");wt(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const pe=this.createCollection();de.hideInput||pe.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:pe}),this._config=de,this._debounceColorPickerEvent=debounce(Le=>{this.set("color",Le),this.fire("colorSelected",{color:this.color})},waitingTime,{leading:!0}),this.on("set:color",(Le,Ye,tt)=>{Le.return=convertColor(tt,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=convertColorToCommonHexFormat(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),convertColorToCommonHexFormat(this.color)!=convertColorToCommonHexFormat(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),registerCustomElement("hex-color-picker",HexBase),this.picker=global$1.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const t=document.createElement("style");t.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(t)}this.picker.addEventListener("color-changed",t=>{const de=t.detail.value;this._debounceColorPickerEvent(de)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(env.isGecko||env.isiOS||env.isSafari||env.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const pe=[...this.picker.shadowRoot.children].filter(Le=>Le.getAttribute("role")==="slider").map(Le=>new SliderView(Le));this.slidersView=this.createCollection(),pe.forEach(Le=>{this.slidersView.add(Le)})}_createInputRow(){const t=this._createColorInput();return new ColorPickerInputRowView(this.locale,t)}_createColorInput(){const t=new LabeledFieldView(this.locale,createLabeledInputText),{t:de}=this.locale;return t.set({label:de("HEX"),class:"color-picker-hex-input"}),t.fieldView.bind("value").to(this,"_hexColor",pe=>t.isFocused?t.fieldView.value:pe.startsWith("#")?pe.substring(1):pe),t.fieldView.on("input",()=>{const pe=t.fieldView.element.value;if(pe){const Le=tryParseHexColor(pe);Le&&this._debounceColorPickerEvent(Le)}}),t}isValid(){const{t}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=t('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function convertColorToCommonHexFormat(me){let u=convertToHex(me);return u||(u="#000"),u.length===4&&(u="#"+[u[1],u[1],u[2],u[2],u[3],u[3]].join("")),u.toLowerCase()}class SliderView extends View{constructor(u){super(),this.element=u}focus(){this.element.focus()}}class HashView extends View{constructor(u){super(u),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class ColorPickerInputRowView extends View{constructor(t,de){super(t);wt(this,"children");wt(this,"inputView");this.inputView=de,this.children=this.createCollection([new HashView,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return tryParseHexColor(this.inputView.fieldView.element.value)}}function tryParseHexColor(me){if(!me)return null;const u=me.trim().replace(/^#/,"");return![3,4,6,8].includes(u.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(u)?null:`#${u}`}class DocumentColorCollection extends ObservableMixin(Collection){constructor(u){super(u),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(u,t){return this.find(de=>de.color===u.color)?this:super.add(u,t)}hasColor(u){return!!this.find(t=>t.color===u)}}class ColorGridsFragmentView extends View{constructor(t,{colors:de,columns:pe,removeButtonLabel:Le,documentColorsLabel:Ye,documentColorsCount:tt,colorPickerLabel:st,focusTracker:ht,focusables:mt}){super(t);wt(this,"items");wt(this,"colorDefinitions");wt(this,"focusTracker");wt(this,"columns");wt(this,"documentColors");wt(this,"documentColorsCount");wt(this,"staticColorsGrid");wt(this,"documentColorsGrid");wt(this,"colorPickerButtonView");wt(this,"removeColorButtonView");wt(this,"_focusables");wt(this,"_documentColorsLabel");wt(this,"_removeButtonLabel");wt(this,"_colorPickerLabel");const gt=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=ht,this.items=this.createCollection(),this.colorDefinitions=de,this.columns=pe,this.documentColors=new DocumentColorCollection,this.documentColorsCount=tt,this._focusables=mt,this._removeButtonLabel=Le,this._colorPickerLabel=st,this._documentColorsLabel=Ye,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",gt.if("isVisible","ck-hidden",bt=>!bt)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(t,de){const pe=t.document,Le=this.documentColorsCount;this.documentColors.clear();for(const Ye of pe.getRoots()){const tt=t.createRangeIn(Ye);for(const st of tt.getItems())if(st.is("$textProxy")&&st.hasAttribute(de)&&(this._addColorToDocumentColors(st.getAttribute(de)),this.documentColors.length>=Le))return}}updateSelectedColors(){const t=this.documentColorsGrid,de=this.staticColorsGrid,pe=this.selectedColor;de.selectedColor=pe,t&&(t.selectedColor=pe)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const t=Template.bind(this.documentColors,this.documentColors),de=new View(this.locale);de.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(de),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ButtonView,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:icons.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const t=new ButtonView;return t.set({withText:!0,icon:icons.eraser,label:this._removeButtonLabel}),t.class="ck-color-selector__remove-color",t.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),t.render(),t}_createStaticColorsGrid(){const t=new ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.on("execute",(de,pe)=>{this.fire("execute",{value:pe.value,source:"staticColorsGrid"})}),t}_createDocumentColorsGrid(){const t=Template.bind(this.documentColors,this.documentColors),de=new ColorGridView(this.locale,{columns:this.columns});return de.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),de.items.bindTo(this.documentColors).using(pe=>{const Le=new ColorTileView;return Le.set({color:pe.color,hasBorder:pe.options&&pe.options.hasBorder}),pe.label&&Le.set({label:pe.label,tooltip:!0}),Le.on("execute",()=>{this.fire("execute",{value:pe.color,source:"documentColorsGrid"})}),Le}),this.documentColors.on("change:isEmpty",(pe,Le,Ye)=>{Ye&&(de.selectedColor=null)}),de}_addColorToDocumentColors(t){const de=this.colorDefinitions.find(pe=>pe.color===t);de?this.documentColors.add(Object.assign({},de)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}class ColorPickerFragmentView extends View{constructor(t,{focusTracker:de,focusables:pe,keystrokes:Le,colorPickerViewConfig:Ye}){super(t);wt(this,"items");wt(this,"colorPickerView");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"actionBarView");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"_focusables");wt(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=de,this.keystrokes=Le,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=pe,this._colorPickerViewConfig=Ye;const tt=this.bindTemplate,{saveButtonView:st,cancelButtonView:ht}=this._createActionButtons();this.saveButtonView=st,this.cancelButtonView=ht,this.actionBarView=this._createActionBarView({saveButtonView:st,cancelButtonView:ht}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",tt.if("isVisible","ck-hidden",mt=>!mt)]},children:this.items})}render(){super.render();const t=new ColorPickerView(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=t,this.colorPickerView.render(),this.selectedColor&&(t.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(de,pe,Le)=>{t.color=Le}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",t=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),t.stopPropagation(),t.preventDefault())})}_stopPropagationOnArrowsKeys(){const t=de=>de.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}_addColorPickersElementsToFocusTracker(){for(const de of this.colorPickerView.slidersView)this.focusTracker.add(de.element),this._focusables.add(de);const t=this.colorPickerView.hexInputRow.children.get(1);t.element&&(this.focusTracker.add(t.element),this._focusables.add(t)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:t,cancelButtonView:de}){const pe=new View,Le=this.createCollection();return Le.add(t),Le.add(de),pe.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:Le}),pe}_createActionButtons(){const t=this.locale,de=t.t,pe=new ButtonView(t),Le=new ButtonView(t);return pe.set({icon:icons.check,class:"ck-button-save",type:"button",withText:!1,label:de("Accept")}),Le.set({icon:icons.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:de("Cancel")}),pe.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),Le.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:pe,cancelButtonView:Le}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(t,de)=>{this.fire("execute",{value:de.color,source:"colorPicker"}),this.set("selectedColor",de.color)})}}class ColorSelectorView extends View{constructor(t,{colors:de,columns:pe,removeButtonLabel:Le,documentColorsLabel:Ye,documentColorsCount:tt,colorPickerLabel:st,colorPickerViewConfig:ht}){super(t);wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"items");wt(this,"colorGridsFragmentView");wt(this,"colorPickerFragmentView");wt(this,"_focusCycler");wt(this,"_focusables");wt(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this._colorPickerViewConfig=ht,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ColorGridsFragmentView(t,{colors:de,columns:pe,removeButtonLabel:Le,documentColorsLabel:Ye,documentColorsCount:tt,colorPickerLabel:st,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ColorPickerFragmentView(t,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:ht}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(mt,gt,bt)=>{this.colorGridsFragmentView.set("selectedColor",bt),this.colorPickerFragmentView.set("selectedColor",bt)}),this.colorGridsFragmentView.on("change:selectedColor",(mt,gt,bt)=>{this.set("selectedColor",bt)}),this.colorPickerFragmentView.on("change:selectedColor",(mt,gt,bt)=>{this.set("selectedColor",bt)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(t,de){this.colorGridsFragmentView.updateDocumentColors(t,de)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class ComponentFactory{constructor(u){wt(this,"editor");wt(this,"_components",new Map);this.editor=u}*names(){for(const u of this._components.values())yield u.originalName}add(u,t){this._components.set(getNormalized(u),{callback:t,originalName:u})}create(u){if(!this.has(u))throw new CKEditorError("componentfactory-item-missing",this,{name:u});return this._components.get(getNormalized(u)).callback(this.editor.locale)}has(u){return this._components.has(getNormalized(u))}}function getNormalized(me){return String(me).toLowerCase()}const BALLOON_CLASS="ck-tooltip",di=class di extends DomEmitterMixin(){constructor(t){super();wt(this,"tooltipTextView");wt(this,"balloonPanelView");wt(this,"_currentElementWithTooltip",null);wt(this,"_currentTooltipPosition",null);wt(this,"_mutationObserver",null);wt(this,"_pinTooltipDebounced");wt(this,"_unpinTooltipDebounced");wt(this,"_watchdogExcluded");if(di._editors.add(t),di._instance)return di._instance;di._instance=this,this.tooltipTextView=new View(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new BalloonPanelView(t.locale),this.balloonPanelView.class=BALLOON_CLASS,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=createMutationObserver(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=debounce(this._pinTooltip,600),this._unpinTooltipDebounced=debounce(this._unpinTooltip,400),this.listenTo(global$1.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const de=t.ui.view&&t.ui.view.body;di._editors.delete(t),this.stopListening(t.ui),de&&de.has(this.balloonPanelView)&&de.remove(this.balloonPanelView),di._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),di._instance=null)}static getPositioningFunctions(t){const de=di.defaultBalloonPositions;return{s:[de.southArrowNorth,de.southArrowNorthEast,de.southArrowNorthWest],n:[de.northArrowSouth],e:[de.eastArrowWest],w:[de.westArrowEast],sw:[de.southArrowNorthEast],se:[de.southArrowNorthWest]}[t]}_onKeyDown(t,de){de.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),de.stopPropagation())}_onEnterOrFocus(t,{target:de}){const pe=getDescendantWithTooltip(de);if(!pe){t.name==="focus"&&this._unpinTooltip();return}if(pe===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),t.name==="focus"&&!pe.matches(":hover")||pe.matches("[data-cke-tooltip-instant]")?this._pinTooltip(pe,getTooltipData(pe)):this._pinTooltipDebounced(pe,getTooltipData(pe))}_onLeaveOrBlur(t,{target:de,relatedTarget:pe}){if(t.name==="mouseleave"){if(!isElement$2(de))return;const Le=this.balloonPanelView.element,Ye=Le&&(Le===pe||Le.contains(pe)),tt=!Ye&&de===Le;if(Ye){this._unpinTooltipDebounced.cancel();return}if(!tt&&this._currentElementWithTooltip&&de!==this._currentElementWithTooltip)return;const st=getDescendantWithTooltip(de),ht=getDescendantWithTooltip(pe);(tt||st&&st!==ht)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||st&&st.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&de!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(t,{target:de}){this._currentElementWithTooltip&&(de.contains(this.balloonPanelView.element)&&de.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:de,position:pe,cssClass:Le}){this._unpinTooltip();const Ye=first(di._editors.values()).ui.view.body;Ye.has(this.balloonPanelView)||Ye.add(this.balloonPanelView),this.tooltipTextView.text=de,this.balloonPanelView.class=[BALLOON_CLASS,Le].filter(tt=>tt).join(" "),this.balloonPanelView.pin({target:t,positions:di.getPositioningFunctions(pe)}),this._mutationObserver.attach(t);for(const tt of di._editors)this.listenTo(tt.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=pe}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of di._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=getTooltipData(this._currentElementWithTooltip);if(!isVisible(this._currentElementWithTooltip)||!t.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:di.getPositioningFunctions(t.position)})}};wt(di,"defaultBalloonPositions",BalloonPanelView.generatePositions({heightOffset:5,sideOffset:13})),wt(di,"_editors",new Set),wt(di,"_instance",null);let TooltipManager=di;function getDescendantWithTooltip(me){return isElement$2(me)?me.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function getTooltipData(me){return{text:me.dataset.ckeTooltipText,position:me.dataset.ckeTooltipPosition||"s",cssClass:me.dataset.ckeTooltipClass||""}}function createMutationObserver(me){const u=new MutationObserver(()=>{me()});return{attach(t){u.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){u.disconnect()}}}const NARROW_ROOT_HEIGHT_THRESHOLD=50,NARROW_ROOT_WIDTH_THRESHOLD=350;class Badge extends DomEmitterMixin(){constructor(t,de={}){super();wt(this,"editor");wt(this,"_balloonView",null);wt(this,"_showBalloonThrottled",throttle(()=>this._showBalloon(),50,{leading:!0}));wt(this,"_lastFocusedEditableElement",null);wt(this,"_balloonClass");this.editor=t,this._balloonClass=de.balloonClass,t.on("ready",()=>this._handleEditorReady())}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;this._isEnabled()&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(de,pe,Le)=>{this._updateLastFocusedEditableElement(),Le?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(de,pe,Le)=>{this._updateLastFocusedEditableElement(),Le&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const t=this._getBalloonAttachOptions();t&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const t=this.editor,de=new BalloonPanelView,pe=this._createBadgeContent();return de.content.add(pe),this._balloonClass&&(de.class=this._balloonClass),t.ui.view.body.add(de),de}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const t=this._getNormalizedConfig(),de=t.side==="right"?getLowerRightCornerPosition(this._lastFocusedEditableElement,t):getLowerLeftCornerPosition(this._lastFocusedEditableElement,t);return{target:this._lastFocusedEditableElement,positions:[de]}}_updateLastFocusedEditableElement(){const t=this.editor,de=t.ui.focusTracker.isFocused,pe=t.ui.focusTracker.focusedElement;if(!de||!pe){this._lastFocusedEditableElement=null;return}const Le=Array.from(t.ui.getEditableElementsNames()).map(Ye=>t.ui.getEditableElement(Ye));Le.includes(pe)?this._lastFocusedEditableElement=pe:this._lastFocusedEditableElement=Le[0]}}function getLowerRightCornerPosition(me,u){return getLowerCornerPosition(me,u,(t,de)=>t.left+t.width-de.width-u.horizontalOffset)}function getLowerLeftCornerPosition(me,u){return getLowerCornerPosition(me,u,t=>t.left+u.horizontalOffset)}function getLowerCornerPosition(me,u,t){return(de,pe)=>{const Le=new Rect(me);if(Le.width<NARROW_ROOT_WIDTH_THRESHOLD||Le.height<NARROW_ROOT_HEIGHT_THRESHOLD)return null;let Ye;u.position==="inside"?Ye=Le.bottom-pe.height:Ye=Le.bottom-pe.height/2,Ye-=u.verticalOffset;const tt=t(Le,pe),ht=de.clone().moveTo(tt,Ye).getIntersection(pe.clone().moveTo(tt,Ye)).getVisible();return!ht||ht.getArea()<pe.getArea()?null:{top:Ye,left:tt,name:`position_${u.position}-side_${u.side}`,config:{withArrow:!1}}}}var poweredByIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const DEFAULT_LABEL="Powered by";class PoweredBy extends Badge{constructor(u){super(u,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const u=this.editor;if(u.config.get("ui.poweredBy.forceVisible"))return!0;const de=u.config.get("licenseKey");if(de=="GPL")return!0;const pe=parseBase64EncodedObject(de.split(".")[1]);return pe?!pe.whiteLabel:!0}_createBadgeContent(){return new PoweredByView(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const u=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},de=t.position||u.position,pe=de==="inside"?5:u.verticalOffset;return{position:de,side:t.side||u.side,label:t.label===void 0?DEFAULT_LABEL:t.label,verticalOffset:t.verticalOffset!==void 0?t.verticalOffset:pe,horizontalOffset:t.horizontalOffset!==void 0?t.horizontalOffset:u.horizontalOffset,forceVisible:!!t.forceVisible}}}class PoweredByView extends View{constructor(u,t){super(u);const de=new IconView,pe=this.bindTemplate;de.set({content:poweredByIcon,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],de],on:{dragstart:pe.to(Le=>Le.preventDefault())}}]})}}class EvaluationBadge extends Badge{constructor(t){super(t,{balloonClass:"ck-evaluation-badge-balloon"});wt(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const de=this.editor.config.get("licenseKey"),pe=getLicenseTypeFromLicenseKey(de);return!!(pe&&this.licenseTypeMessage[pe])}_createBadgeContent(){const t=this.editor.config.get("licenseKey"),de=getLicenseTypeFromLicenseKey(t);return new EvaluationBadgeView(this.editor.locale,this.licenseTypeMessage[de])}_getNormalizedConfig(){const t=super._getNormalizedConfig(),de=this.editor.config.get("ui.poweredBy")||{},pe=de.position||t.position,Le=de.side||t.side;return{position:pe,side:Le==="left"?"right":"left",verticalOffset:t.verticalOffset,horizontalOffset:t.horizontalOffset}}}class EvaluationBadgeView extends View{constructor(u,t){super(u),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[t]}]})}}function getLicenseTypeFromLicenseKey(me){if(me=="GPL")return"GPL";const u=parseBase64EncodedObject(me.split(".")[1]);return u?u.licenseType||"production":null}const AriaLiveAnnouncerPoliteness={POLITE:"polite",ASSERTIVE:"assertive"};class AriaLiveAnnouncer{constructor(u){wt(this,"editor");wt(this,"view");this.editor=u,u.once("ready",()=>{for(const t of Object.values(AriaLiveAnnouncerPoliteness))this.announce("",t)})}announce(u,t=AriaLiveAnnouncerPoliteness.POLITE){const de=this.editor;if(!de.ui.view)return;this.view||(this.view=new AriaLiveAnnouncerView(de.locale),de.ui.view.body.add(this.view));const{politeness:pe,isUnsafeHTML:Le}=typeof t=="string"?{politeness:t}:t;let Ye=this.view.regionViews.find(tt=>tt.politeness===pe);Ye||(Ye=new AriaLiveAnnouncerRegionView(de,pe),this.view.regionViews.add(Ye)),Ye.announce({announcement:u,isUnsafeHTML:Le})}}class AriaLiveAnnouncerView extends View{constructor(t){super(t);wt(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class AriaLiveAnnouncerRegionView extends View{constructor(t,de){super(t.locale);wt(this,"politeness");wt(this,"_domConverter");wt(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":de,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=de,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:de}){if(!t.trim().length)return;const pe=document.createElement("li");de?this._domConverter.setContentOf(pe,t):pe.innerText=t,this._listElement.appendChild(pe)}get _listElement(){return this.element.querySelector("ul")}}class MenuBarMenuListItemView extends ListItemView{constructor(u,t){super(u);const de=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:de.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const NESTED_PANEL_HORIZONTAL_OFFSET=5,MenuBarBehaviors={toggleMenusAndFocusItemsOnHover(me){me.on("menu:mouseenter",u=>{if(!(!me.isFocusBorderEnabled&&!me.isOpen)){if(me.isOpen)for(const t of me.menus){const de=u.path[0],pe=de instanceof MenuBarMenuListItemView&&de.children.first===t;t.isOpen=(u.path.includes(t)||pe)&&t.isEnabled}u.source.focus()}})},focusCycleMenusOnArrows(me){const u=me.locale.uiLanguageDirection==="rtl";me.on("menu:arrowright",de=>{t(de.source,u?-1:1)}),me.on("menu:arrowleft",de=>{t(de.source,u?1:-1)});function t(de,pe){const Le=me.children.getIndex(de),Ye=de.isOpen,tt=me.children.length,st=me.children.get((Le+tt+pe)%tt);de.isOpen=!1,Ye&&(st.isOpen=!0),st.buttonView.focus()}},closeMenusWhenTheBarCloses(me){me.on("change:isOpen",()=>{me.isOpen||me.menus.forEach(u=>{u.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(me){me.on("menu:change:isOpen",(u,t,de)=>{de&&me.menus.filter(pe=>u.source.parentMenuView===pe.parentMenuView&&u.source!==pe&&pe.isOpen).forEach(pe=>{pe.isOpen=!1})})},closeOnClickOutside(me){clickOutsideHandler({emitter:me,activator:()=>me.isOpen,callback:()=>me.close(),contextElements:()=>me.children.map(u=>u.element)})},enableFocusHighlightOnInteraction(me){let u=!1;me.on("change:isOpen",(t,de,pe)=>{pe||(u||(me.isFocusBorderEnabled=!1),u=!1)}),me.listenTo(me.element,"keydown",()=>{u=!0},{useCapture:!0}),me.listenTo(me.element,"keyup",()=>{u=!1},{useCapture:!0}),me.listenTo(me.element,"focus",()=>{u&&(me.isFocusBorderEnabled=!0)},{useCapture:!0})}},MenuBarMenuBehaviors={openAndFocusPanelOnArrowDownKey(me){me.keystrokes.set("arrowdown",(u,t)=>{me.focusTracker.focusedElement===me.buttonView.element&&(me.isOpen||(me.isOpen=!0),me.panelView.focus(),t())})},openOnArrowRightKey(me){const u=me.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";me.keystrokes.set(u,(t,de)=>{me.focusTracker.focusedElement!==me.buttonView.element||!me.isEnabled||(me.isOpen||(me.isOpen=!0),me.panelView.focus(),de())})},openOnButtonClick(me){me.buttonView.on("execute",()=>{me.isOpen=!0})},toggleOnButtonClick(me){me.buttonView.on("execute",()=>{me.isOpen=!me.isOpen})},openAndFocusOnEnterKeyPress(me){me.keystrokes.set("enter",(u,t)=>{me.focusTracker.focusedElement===me.buttonView.element&&(me.isOpen=!0,me.panelView.focus(),t())})},closeOnArrowLeftKey(me){const u=me.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";me.keystrokes.set(u,(t,de)=>{me.isOpen&&(me.isOpen=!1,me.focus(),de())})},closeOnEscKey(me){me.keystrokes.set("esc",(u,t)=>{me.isOpen&&(me.isOpen=!1,me.focus(),t())})},closeOnParentClose(me){me.parentMenuView.on("change:isOpen",(u,t,de)=>{!de&&u.source===me.parentMenuView&&(me.isOpen=!1)})}},MenuBarMenuViewPanelPositioningFunctions={southEast:me=>({top:me.bottom,left:me.left,name:"se"}),southWest:(me,u)=>({top:me.bottom,left:me.left-u.width+me.width,name:"sw"}),northEast:(me,u)=>({top:me.top-u.height,left:me.left,name:"ne"}),northWest:(me,u)=>({top:me.top-u.height,left:me.left-u.width+me.width,name:"nw"}),eastSouth:me=>({top:me.top,left:me.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"es"}),eastNorth:(me,u)=>({top:me.top-u.height,left:me.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"en"}),westSouth:(me,u)=>({top:me.top,left:me.left-u.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"ws"}),westNorth:(me,u)=>({top:me.top-u.height,left:me.left-u.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"wn"})},DefaultMenuBarItems=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function normalizeMenuBarConfig(me){let u;return!("items"in me)||!me.items?u={items:cloneDeep(DefaultMenuBarItems),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...me}:u={items:me.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...me},u}function processMenuBarConfig({normalizedConfig:me,locale:u,componentFactory:t,extraItems:de}){const pe=cloneDeep(me);return handleAdditions(me,pe,de),handleRemovals(me,pe),handleAdditions(me,pe,pe.addItems),purgeUnavailableComponents(me,pe,t),purgeEmptyMenus(me,pe),localizeMenuLabels(pe,u),pe}function handleRemovals(me,u){const t=u.removeItems,de=[];u.items=u.items.filter(({menuId:pe})=>t.includes(pe)?(de.push(pe),!1):!0),walkConfigMenus(u.items,pe=>{pe.groups=pe.groups.filter(({groupId:Le})=>t.includes(Le)?(de.push(Le),!1):!0);for(const Le of pe.groups)Le.items=Le.items.filter(Ye=>{const tt=getIdFromGroupItem(Ye);return t.includes(tt)?(de.push(tt),!1):!0})});for(const pe of t)de.includes(pe)||logWarning("menu-bar-item-could-not-be-removed",{menuBarConfig:me,itemName:pe})}function handleAdditions(me,u,t){const de=[];if(t.length!=0){for(const pe of t){const Le=getRelationFromPosition(pe.position),Ye=getRelativeIdFromPosition(pe.position);if(isMenuBarMenuAddition(pe))if(!Ye)Le==="start"?(u.items.unshift(pe.menu),de.push(pe)):Le==="end"&&(u.items.push(pe.menu),de.push(pe));else{const tt=u.items.findIndex(st=>st.menuId===Ye);tt!=-1?Le==="before"?(u.items.splice(tt,0,pe.menu),de.push(pe)):Le==="after"&&(u.items.splice(tt+1,0,pe.menu),de.push(pe)):addMenuOrItemToGroup(u,pe.menu,Ye,Le)&&de.push(pe)}else isMenuBarMenuGroupAddition(pe)?walkConfigMenus(u.items,tt=>{if(tt.menuId===Ye)Le==="start"?(tt.groups.unshift(pe.group),de.push(pe)):Le==="end"&&(tt.groups.push(pe.group),de.push(pe));else{const st=tt.groups.findIndex(ht=>ht.groupId===Ye);st!==-1&&(Le==="before"?(tt.groups.splice(st,0,pe.group),de.push(pe)):Le==="after"&&(tt.groups.splice(st+1,0,pe.group),de.push(pe)))}}):addMenuOrItemToGroup(u,pe.item,Ye,Le)&&de.push(pe)}for(const pe of t)de.includes(pe)||logWarning("menu-bar-item-could-not-be-added",{menuBarConfig:me,addedItemConfig:pe})}}function addMenuOrItemToGroup(me,u,t,de){let pe=!1;return walkConfigMenus(me.items,Le=>{for(const{groupId:Ye,items:tt}of Le.groups){if(pe)return;if(Ye===t)de==="start"?(tt.unshift(u),pe=!0):de==="end"&&(tt.push(u),pe=!0);else{const st=tt.findIndex(ht=>getIdFromGroupItem(ht)===t);st!==-1&&(de==="before"?(tt.splice(st,0,u),pe=!0):de==="after"&&(tt.splice(st+1,0,u),pe=!0))}}}),pe}function purgeUnavailableComponents(me,u,t){walkConfigMenus(u.items,de=>{for(const pe of de.groups)pe.items=pe.items.filter(Le=>{const Ye=typeof Le=="string"&&!t.has(Le);return Ye&&!u.isUsingDefaultConfig&&logWarning("menu-bar-item-unavailable",{menuBarConfig:me,parentMenuConfig:cloneDeep(de),componentName:Le}),!Ye})})}function purgeEmptyMenus(me,u){const t=u.isUsingDefaultConfig;let de=!1;if(u.items=u.items.filter(pe=>pe.groups.length?!0:(warnAboutEmptyMenu(me,pe,t),!1)),!u.items.length){warnAboutEmptyMenu(me,me,t);return}walkConfigMenus(u.items,pe=>{pe.groups=pe.groups.filter(Le=>Le.items.length?!0:(de=!0,!1));for(const Le of pe.groups)Le.items=Le.items.filter(Ye=>isMenuDefinition(Ye)&&!Ye.groups.length?(warnAboutEmptyMenu(me,Ye,t),de=!0,!1):!0)}),de&&purgeEmptyMenus(me,u)}function warnAboutEmptyMenu(me,u,t){t||logWarning("menu-bar-menu-empty",{menuBarConfig:me,emptyMenuConfig:u})}function localizeMenuLabels(me,u){const t=u.t,de={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};walkConfigMenus(me.items,pe=>{pe.label in de&&(pe.label=de[pe.label])})}function walkConfigMenus(me,u){if(Array.isArray(me))for(const de of me)t(de);function t(de){u(de);for(const pe of de.groups)for(const Le of pe.items)isMenuDefinition(Le)&&t(Le)}}function isMenuBarMenuAddition(me){return typeof me=="object"&&"menu"in me}function isMenuBarMenuGroupAddition(me){return typeof me=="object"&&"group"in me}function getRelationFromPosition(me){return me.startsWith("start")?"start":me.startsWith("end")?"end":me.startsWith("after")?"after":"before"}function getRelativeIdFromPosition(me){const u=me.match(/^[^:]+:(.+)/);return u?u[1]:null}function getIdFromGroupItem(me){return typeof me=="string"?me:me.menuId}function isMenuDefinition(me){return typeof me=="object"&&"menuId"in me}class EditorUI extends ObservableMixin(){constructor(t){super();wt(this,"editor");wt(this,"componentFactory");wt(this,"focusTracker");wt(this,"tooltipManager");wt(this,"poweredBy");wt(this,"evaluationBadge");wt(this,"ariaLiveAnnouncer");wt(this,"isReady",!1);wt(this,"_editableElementsMap",new Map);wt(this,"_focusableToolbarDefinitions",[]);wt(this,"_extraMenuBarElements",[]);wt(this,"_lastFocusedForeignElement",null);const de=t.editing.view;this.editor=t,this.componentFactory=new ComponentFactory(t),this.focusTracker=new FocusTracker,this.tooltipManager=new TooltipManager(t),this.poweredBy=new PoweredBy(t),this.evaluationBadge=new EvaluationBadge(t),this.ariaLiveAnnouncer=new AriaLiveAnnouncer(t),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(de.document,"layoutChanged",this.update.bind(this)),this.listenTo(de,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(t,de){this._editableElementsMap.set(t,de),de.ckeditorInstance||(de.ckeditorInstance=this.editor),this.focusTracker.add(de);const pe=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(de)};this.isReady?pe():this.once("ready",pe)}removeEditableElement(t){const de=this._editableElementsMap.get(t);de&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(de),this.focusTracker.remove(de),de.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,de={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:de})}extendMenuBar(t){this._extraMenuBarElements.push(t)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(t){const de=t.element;this.focusTracker.add(de),this.editor.keystrokes.listenTo(de);const pe=normalizeMenuBarConfig(this.editor.config.get("menuBar")||{});t.fillFromConfig(pe,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(Le,Ye)=>{de.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),Ye())}),this.editor.keystrokes.set("Alt+F9",(Le,Ye)=>{de.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),Ye())})}_readViewportOffsetFromConfig(){const t=this.editor,de=t.config.get("ui.viewportOffset");if(de)return de;const pe=t.config.get("toolbar.viewportTopOffset");return pe?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:pe}):{top:0}}_initFocusTracking(){const t=this.editor;let de;t.keystrokes.set("Alt+F10",(pe,Le)=>{this._saveLastFocusedForeignElement();const Ye=this._getCurrentFocusedToolbarDefinition();(!Ye||!de)&&(de=this._getFocusableCandidateToolbarDefinitions());for(let tt=0;tt<de.length;tt++){const st=de.shift();if(de.push(st),st!==Ye&&this._focusFocusableCandidateToolbar(st)){Ye&&Ye.options.afterBlur&&Ye.options.afterBlur();break}}Le()}),t.keystrokes.set("Esc",(pe,Le)=>{const Ye=this._getCurrentFocusedToolbarDefinition();Ye&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),Ye.options.afterBlur&&Ye.options.afterBlur(),Le())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const de of this._focusableToolbarDefinitions){const{toolbarView:pe,options:Le}=de;(isVisible(pe.element)||Le.beforeFocus)&&t.push(de)}return t.sort((de,pe)=>getToolbarDefinitionWeight(de)-getToolbarDefinitionWeight(pe)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:de,options:{beforeFocus:pe}}=t;return pe&&pe(),isVisible(de.element)?(de.focus(),!0):!1}_handleScrollToTheSelection(t,de){const pe={top:0,bottom:0,left:0,right:0,...this.viewportOffset};de.viewportOffset.top+=pe.top,de.viewportOffset.bottom+=pe.bottom,de.viewportOffset.left+=pe.left,de.viewportOffset.right+=pe.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const de of t)this.focusTracker.add(de.element);t.on("add",(de,pe)=>{this.focusTracker.add(pe.element)}),t.on("remove",(de,pe)=>{this.focusTracker.remove(pe.element)})}}function getToolbarDefinitionWeight(me){const{toolbarView:u,options:t}=me;let de=10;return isVisible(u.element)&&de--,t.isContextual&&de--,de}class EditorUIView extends View{constructor(t){super(t);wt(this,"body");wt(this,"menuBarView");this.body=new BodyCollection(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class BoxedEditorUIView extends EditorUIView{constructor(t){super(t);wt(this,"top");wt(this,"main");wt(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,de=new LabelView;return de.text=t("Rich Text Editor"),de.extendTemplate({attributes:{class:"ck-voice-label"}}),de}}class EditableUIView extends View{constructor(t,de,pe){super(t);wt(this,"name",null);wt(this,"_editingView");wt(this,"_editableElement");wt(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=pe,this._hasExternalElement=!!this._editableElement,this._editingView=de}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;t.isRenderingInProgress?pe(this):de(this);function de(Le){t.change(Ye=>{const tt=t.document.getRoot(Le.name);Ye.addClass(Le.isFocused?"ck-focused":"ck-blurred",tt),Ye.removeClass(Le.isFocused?"ck-blurred":"ck-focused",tt)})}function pe(Le){t.once("change:isRenderingInProgress",(Ye,tt,st)=>{st?pe(Le):de(Le)})}}}class InlineEditableUIView extends EditableUIView{constructor(t,de,pe,Le={}){super(t,de,pe);wt(this,"_options");this._options=Le,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(de=>{const pe=t.document.getRoot(this.name);de.setAttribute("aria-label",this.getEditableAriaLabel(),pe)})}getEditableAriaLabel(){const t=this.locale.t,de=this._options.label,pe=this._editableElement,Le=this.name;if(typeof de=="string")return de;if(typeof de=="object")return de[Le];if(typeof de=="function")return de(this);if(pe){const Ye=pe.getAttribute("aria-label");if(Ye)return Ye}return t("Rich Text Editor. Editing area: %0",Le)}}class Notification extends ContextPlugin{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(u,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(u,t={}){this._showNotification({message:u,type:"success",namespace:t.namespace,title:t.title})}showInfo(u,t={}){this._showNotification({message:u,type:"info",namespace:t.namespace,title:t.title})}showWarning(u,t={}){this._showNotification({message:u,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(u){const t=u.namespace?`show:${u.type}:${u.namespace}`:`show:${u.type}`;this.fire(t,{message:u.message,type:u.type,title:u.title||""})}}class Model extends ObservableMixin(){constructor(u,t){super(),t&&assignIn(this,t),u&&this.set(u)}}const toPx$4=toUnit("px");class ContextualBalloon extends Plugin{constructor(t){super(t);wt(this,"positionLimiter");wt(this,"visibleStack");wt(this,"_viewToStack",new Map);wt(this,"_idToStack",new Map);wt(this,"_view",null);wt(this,"_rotatorView",null);wt(this,"_fakePanelsView",null);this.positionLimiter=()=>{const de=this.editor.editing.view,Le=de.document.selection.editableElement;return Le?de.domConverter.mapViewToDom(Le.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new CKEditorError("contextualballoon-add-view-exist",[this,t]);const de=t.stackId||"main";if(!this._idToStack.has(de)){this._idToStack.set(de,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(de)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||t.singleViewMode)&&this.showStack(de);return}const pe=this._idToStack.get(de);t.singleViewMode&&this.showStack(de),pe.set(t.view,t),this._viewToStack.set(t.view,pe),pe===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new CKEditorError("contextualballoon-remove-view-not-exist",[this,t]);const de=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(de.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(de.values())[de.size-2])),de.size===1?(this._idToStack.delete(this._getStackId(de)),this._numberOfStacks=this._idToStack.size):de.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:this.editor.ui.viewportOffset})),t}showStack(t){this.visibleStack=t;const de=this._idToStack.get(t);if(!de)throw new CKEditorError("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==de&&this._showView(Array.from(de.values()).pop())}_createPanelView(){this._view=new BalloonPanelView(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(pe=>pe[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let de=t.indexOf(this._visibleStack)+1;t[de]||(de=0),this.showStack(this._getStackId(t[de]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let de=t.indexOf(this._visibleStack)-1;t[de]||(de=t.length-1),this.showStack(this._getStackId(t[de]))}_createRotatorView(){const t=new RotatorView(this.editor.locale),de=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(pe,Le)=>!Le&&pe>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(pe,Le)=>{if(Le<2)return"";const Ye=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return de("%0 of %1",[Ye,Le])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new FakePanelsView(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(de,pe)=>!pe&&de>=2?Math.min(de-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:de="",withArrow:pe=!0,singleViewMode:Le=!1}){this.view.class=de,this.view.withArrow=pe,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),Le&&(this._singleViewMode=!0)}}class RotatorView extends View{constructor(t){super(t);wt(this,"focusTracker");wt(this,"buttonPrevView");wt(this,"buttonNextView");wt(this,"content");const de=t.t,pe=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new FocusTracker,this.buttonPrevView=this._createButtonView(de("Previous"),icons.previousArrow),this.buttonNextView=this._createButtonView(de("Next"),icons.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",pe.to("isNavigationVisible",Le=>Le?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:pe.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,de){const pe=new ButtonView(this.locale);return pe.set({label:t,icon:de,tooltip:!0}),pe}}class FakePanelsView extends View{constructor(t,de){super(t);wt(this,"content");wt(this,"_balloonPanelView");const pe=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=de,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",pe.to("numberOfPanels",Le=>Le?"":"ck-hidden")],style:{top:pe.to("top",toPx$4),left:pe.to("left",toPx$4),width:pe.to("width",toPx$4),height:pe.to("height",toPx$4)}},children:this.content}),this.on("change:numberOfPanels",(Le,Ye,tt,st)=>{tt>st?this._addPanels(tt-st):this._removePanels(st-tt),this.updatePosition()})}_addPanels(t){for(;t--;){const de=new View;de.setTemplate({tag:"div"}),this.content.add(de),this.registerChild(de)}}_removePanels(t){for(;t--;){const de=this.content.last;this.content.remove(de),this.deregisterChild(de),de.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:de}=this._balloonPanelView,{width:pe,height:Le}=new Rect(this._balloonPanelView.element);Object.assign(this,{top:t,left:de,width:pe,height:Le})}}}const toPx$3=toUnit("px");class StickyPanelView extends View{constructor(t){super(t);wt(this,"content");wt(this,"contentPanelElement");wt(this,"_contentPanelPlaceholder");const de=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:de.to("isSticky",pe=>pe?"block":"none"),height:de.to("isSticky",pe=>pe?toPx$3(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",de.if("isSticky","ck-sticky-panel__content_sticky"),de.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:de.to("isSticky",pe=>pe?toPx$3(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:de.to("_stickyTopOffset",pe=>pe&&toPx$3(pe)),bottom:de.to("_stickyBottomOffset",pe=>pe&&toPx$3(pe)),marginLeft:de.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(global$1.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const t=new Rect(this.limiterElement);let de=t.getVisible();if(de){const pe=new Rect(global$1.window);pe.top+=this.viewportTopOffset,pe.height-=this.viewportTopOffset,de=de.getIntersection(pe)}if(de&&t.top<de.top){const pe=de.top;if(pe+this._contentPanelRect.height+this.limiterBottomOffset>de.bottom){const Le=Math.max(t.bottom-de.bottom,0)+this.limiterBottomOffset;t.bottom-Le>t.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(Le):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(pe):this._unstick()}else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=toPx$3(-global$1.window.scrollX)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=toPx$3(-global$1.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Rect(this.contentPanelElement)}}class SpinnerView extends View{constructor(){super(),this.set("isVisible",!1);const u=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-spinner-container",u.if("isVisible","ck-hidden",t=>!t)]},children:[{tag:"span",attributes:{class:["ck","ck-spinner"]}}]})}}class MenuBarMenuButtonView extends ListItemButtonView{constructor(t){super(t);wt(this,"arrowView");const de=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",pe=>String(pe)),"data-cke-tooltip-disabled":de.to("isOn")},on:{mouseenter:de.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new IconView;return t.content=dropdownArrowIcon,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class MenuBarMenuPanelView extends View{constructor(t){super(t);wt(this,"children");const de=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",de.to("position",pe=>`ck-menu-bar__menu__panel_position_${pe}`),de.if("isVisible","ck-hidden",pe=>!pe)],tabindex:"-1"},children:this.children,on:{selectstart:de.to(pe=>{pe.target.tagName.toLocaleLowerCase()!=="input"&&pe.preventDefault()})}})}focus(t=1){this.children.length&&(t===1?this.children.first.focus():this.children.last.focus())}}const ul=class ul extends View{constructor(t){super(t);wt(this,"buttonView");wt(this,"panelView");wt(this,"focusTracker");wt(this,"keystrokes");const de=this.bindTemplate;this.buttonView=new MenuBarMenuButtonView(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new MenuBarMenuPanelView(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",de.to("class"),de.if("isEnabled","ck-disabled",pe=>!pe),de.if("parentMenuView","ck-menu-bar__menu_top-level",pe=>!pe)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),MenuBarMenuBehaviors.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(MenuBarMenuBehaviors.openOnButtonClick(this),MenuBarMenuBehaviors.openOnArrowRightKey(this),MenuBarMenuBehaviors.closeOnArrowLeftKey(this),MenuBarMenuBehaviors.openAndFocusOnEnterKeyPress(this),MenuBarMenuBehaviors.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),MenuBarMenuBehaviors.openAndFocusPanelOnArrowDownKey(this),MenuBarMenuBehaviors.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,de)=>{this.fire("arrowright"),de()}),this.keystrokes.set("arrowleft",(t,de)=>{this.fire("arrowleft"),de()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,de,pe)=>{if(!pe)return;const Le=ul._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=Le?Le.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:de,northEast:pe,northWest:Le,westSouth:Ye,eastSouth:tt,westNorth:st,eastNorth:ht}=MenuBarMenuViewPanelPositioningFunctions;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[tt,ht,Ye,st]:[t,de,pe,Le]:this.parentMenuView?[Ye,st,tt,ht]:[de,t,Le,pe]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};wt(ul,"_getOptimalPosition",getOptimalPosition);let MenuBarMenuView=ul;class MenuBarMenuListView extends ListView{constructor(u){super(u),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const u=Array.from(this.items).some(t=>{const de=pickListButtonMenuViewIfPresent(t);return de&&de.isToggleable});this.items.forEach(t=>{const de=pickListButtonMenuViewIfPresent(t);de&&(de.hasCheckSpace=u)})}}function pickListButtonMenuViewIfPresent(me){return me instanceof ListItemView?me.children.map(u=>isNestedMenuLikeView(u)?u.buttonView:u).find(u=>u instanceof ListItemButtonView):null}function isNestedMenuLikeView(me){return typeof me=="object"&&"buttonView"in me&&me.buttonView instanceof ButtonView}class MenuBarMenuListItemFileDialogButtonView extends FileDialogListItemButtonView{constructor(u){super(u),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const EVENT_NAME_DELEGATES=["mouseenter","arrowleft","arrowright","change:isOpen"];class MenuBarView extends View{constructor(t){super(t);wt(this,"children");wt(this,"menus",[]);const de=t.t,pe=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",pe.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":de("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,de,pe=[]){const Le=this.locale,tt=processMenuBarConfig({normalizedConfig:t,locale:Le,componentFactory:de,extraItems:pe}).items.map(st=>this._createMenu({componentFactory:de,menuDefinition:st}));this.children.addMany(tt)}render(){super.render(),MenuBarBehaviors.toggleMenusAndFocusItemsOnHover(this),MenuBarBehaviors.closeMenusWhenTheBarCloses(this),MenuBarBehaviors.closeMenuWhenAnotherOnTheSameLevelOpens(this),MenuBarBehaviors.focusCycleMenusOnArrows(this),MenuBarBehaviors.closeOnClickOutside(this),MenuBarBehaviors.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}registerMenu(t,de=null){de?(t.delegate(...EVENT_NAME_DELEGATES).to(de),t.parentMenuView=de):t.delegate(...EVENT_NAME_DELEGATES).to(this,pe=>"menu:"+pe),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:de,parentMenuView:pe}){const Le=this.locale,Ye=new MenuBarMenuView(Le);return this.registerMenu(Ye,pe),Ye.buttonView.set({label:de.label}),Ye.once("change:isOpen",()=>{const tt=new MenuBarMenuListView(Le);tt.ariaLabel=de.label,Ye.panelView.children.add(tt),tt.items.addMany(this._createMenuItems({menuDefinition:de,parentMenuView:Ye,componentFactory:t}))}),Ye}_createMenuItems({menuDefinition:t,parentMenuView:de,componentFactory:pe}){const Le=this.locale,Ye=[];for(const tt of t.groups){for(const st of tt.items){const ht=new MenuBarMenuListItemView(Le,de);if(isObject$2(st))ht.children.add(this._createMenu({componentFactory:pe,menuDefinition:st,parentMenuView:de}));else{const mt=this._createMenuItemContentFromFactory({componentName:st,componentFactory:pe,parentMenuView:de});if(!mt)continue;ht.children.add(mt)}Ye.push(ht)}tt!==t.groups[t.groups.length-1]&&Ye.push(new ListSeparatorView(Le))}return Ye}_createMenuItemContentFromFactory({componentName:t,parentMenuView:de,componentFactory:pe}){const Le=pe.create(t);return Le instanceof MenuBarMenuView||Le instanceof MenuBarMenuListItemButtonView||Le instanceof MenuBarMenuListItemFileDialogButtonView?(this._registerMenuTree(Le,de),Le.on("execute",()=>{this.close()}),Le):(logWarning("menu-bar-component-unsupported",{componentName:t,componentView:Le}),null)}_registerMenuTree(t,de){if(!(t instanceof MenuBarMenuView)){t.delegate("mouseenter").to(de);return}this.registerMenu(t,de);const pe=t.panelView.children.filter(Ye=>Ye instanceof MenuBarMenuListView)[0];if(!pe){t.delegate("mouseenter").to(de);return}const Le=pe.items.filter(Ye=>Ye instanceof ListItemView);for(const Ye of Le)this._registerMenuTree(Ye.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(de,pe,Le)=>{clearTimeout(t),Le?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(Ye=>Ye.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const supportedOptions=["left","right","center","justify"];function isSupported(me){return supportedOptions.includes(me)}function isDefault(me,u){return u.contentLanguageDirection=="rtl"?me==="right":me==="left"}function normalizeAlignmentOptions(me){const u=me.map(de=>{let pe;return typeof de=="string"?pe={name:de}:pe=de,pe}).filter(de=>{const pe=supportedOptions.includes(de.name);return pe||logWarning("alignment-config-name-not-recognized",{option:de}),pe}),t=u.filter(de=>!!de.className).length;if(t&&t<u.length)throw new CKEditorError("alignment-config-classnames-are-missing",{configuredOptions:me});return u.forEach((de,pe,Le)=>{const Ye=Le.slice(pe+1);if(Ye.some(st=>st.name==de.name))throw new CKEditorError("alignment-config-name-already-defined",{option:de,configuredOptions:me});if(de.className&&Ye.some(ht=>ht.className==de.className))throw new CKEditorError("alignment-config-classname-already-defined",{option:de,configuredOptions:me})}),u}const ALIGNMENT="alignment";class AlignmentCommand extends Command{refresh(){const t=this.editor.locale,de=first(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!de&&this._canBeAligned(de),this.isEnabled&&de.hasAttribute("alignment")?this.value=de.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(u={}){const t=this.editor,de=t.locale,pe=t.model,Le=pe.document,Ye=u.value;pe.change(tt=>{const st=Array.from(Le.selection.getSelectedBlocks()).filter(gt=>this._canBeAligned(gt)),ht=st[0].getAttribute("alignment");isDefault(Ye,de)||ht===Ye||!Ye?removeAlignmentFromSelection(st,tt):setAlignmentOnSelection(st,tt,Ye)})}_canBeAligned(u){return this.editor.model.schema.checkAttribute(u,ALIGNMENT)}}function removeAlignmentFromSelection(me,u){for(const t of me)u.removeAttribute(ALIGNMENT,t)}function setAlignmentOnSelection(me,u,t){for(const de of me)u.setAttribute(ALIGNMENT,t,de)}class AlignmentEditing extends Plugin{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("alignment",{options:supportedOptions.map(t=>({name:t}))})}init(){const u=this.editor,t=u.locale,de=u.model.schema,Le=normalizeAlignmentOptions(u.config.get("alignment.options")).filter(ht=>isSupported(ht.name)&&!isDefault(ht.name,t)),Ye=Le.some(ht=>!!ht.className);de.extend("$block",{allowAttributes:"alignment"}),u.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),Ye?u.conversion.attributeToAttribute(buildClassDefinition(Le)):u.conversion.for("downcast").attributeToAttribute(buildDowncastInlineDefinition(Le));const tt=buildUpcastInlineDefinitions(Le);for(const ht of tt)u.conversion.for("upcast").attributeToAttribute(ht);const st=buildUpcastCompatibilityDefinitions(Le);for(const ht of st)u.conversion.for("upcast").attributeToAttribute(ht);u.commands.add("alignment",new AlignmentCommand(u))}}function buildDowncastInlineDefinition(me){const u={};for(const{name:de}of me)u[de]={key:"style",value:{"text-align":de}};return{model:{key:"alignment",values:me.map(de=>de.name)},view:u}}function buildUpcastInlineDefinitions(me){const u=[];for(const{name:t}of me)u.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return u}function buildUpcastCompatibilityDefinitions(me){const u=[];for(const{name:t}of me)u.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return u}function buildClassDefinition(me){const u={};for(const de of me)u[de.name]={key:"class",value:de.className};return{model:{key:"alignment",values:me.map(de=>de.name)},view:u}}const iconsMap=new Map([["left",icons.alignLeft],["right",icons.alignRight],["center",icons.alignCenter],["justify",icons.alignJustify]]);class AlignmentUI extends Plugin{get localizedOptionTitles(){const u=this.editor.t;return{left:u("Align left"),right:u("Align right"),center:u("Align center"),justify:u("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=normalizeAlignmentOptions(u.config.get("alignment.options"));t.map(de=>de.name).filter(isSupported).forEach(de=>this._addButton(de)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(u){this.editor.ui.componentFactory.add(`alignment:${u}`,de=>this._createButton(de,u))}_createButton(u,t,de={}){const pe=this.editor,Le=pe.commands.get("alignment"),Ye=new ButtonView(u);return Ye.set({label:this.localizedOptionTitles[t],icon:iconsMap.get(t),tooltip:!0,isToggleable:!0,...de}),Ye.bind("isEnabled").to(Le),Ye.bind("isOn").to(Le,"value",tt=>tt===t),this.listenTo(Ye,"execute",()=>{pe.execute("alignment",{value:t}),pe.editing.view.focus()}),Ye}_addToolbarDropdown(u){const t=this.editor;t.ui.componentFactory.add("alignment",pe=>{const Le=createDropdown(pe),Ye=pe.uiLanguageDirection==="rtl"?"w":"e",tt=pe.t;addToolbarToDropdown(Le,()=>u.map(mt=>this._createButton(pe,mt.name,{tooltipPosition:Ye})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:tt("Text alignment toolbar")}),Le.buttonView.set({label:tt("Text alignment"),tooltip:!0}),Le.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const st=pe.contentLanguageDirection==="rtl"?iconsMap.get("right"):iconsMap.get("left"),ht=t.commands.get("alignment");return Le.buttonView.bind("icon").to(ht,"value",mt=>iconsMap.get(mt)||st),Le.bind("isEnabled").to(ht,"isEnabled"),this.listenTo(Le,"execute",()=>{t.editing.view.focus()}),Le})}_addMenuBarMenu(u){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",de=>{const pe=t.commands.get("alignment"),Le=de.t,Ye=new MenuBarMenuView(de),tt=new MenuBarMenuListView(de);Ye.bind("isEnabled").to(pe),tt.set({ariaLabel:Le("Text alignment"),role:"menu"}),Ye.buttonView.set({label:Le("Text alignment")});for(const st of u){const ht=new MenuBarMenuListItemView(de,Ye),mt=new MenuBarMenuListItemButtonView(de);mt.delegate("execute").to(Ye),mt.set({label:this.localizedOptionTitles[st.name],icon:iconsMap.get(st.name),role:"menuitemcheckbox",isToggleable:!0}),mt.on("execute",()=>{t.execute("alignment",{value:st.name}),t.editing.view.focus()}),mt.bind("isOn").to(pe,"value",gt=>gt===st.name),mt.bind("isEnabled").to(pe,"isEnabled"),ht.children.add(mt),tt.items.add(ht)}return Ye.panelView.children.add(tt),Ye})}}class Alignment extends Plugin{static get requires(){return[AlignmentEditing,AlignmentUI]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ChangeBuffer{constructor(u,t=20){wt(this,"model");wt(this,"limit");wt(this,"_isLocked");wt(this,"_size");wt(this,"_batch",null);wt(this,"_changeCallback");wt(this,"_selectionChangeCallback");this.model=u,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(de,pe)=>{pe.isLocal&&pe.isUndoable&&pe!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(u){this._size+=u,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(u=!1){(!this.isLocked||u)&&(this._batch=null,this._size=0)}}class InsertTextCommand extends Command{constructor(t,de){super(t);wt(this,"_buffer");this._buffer=new ChangeBuffer(t.model,de),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const de=this.editor.model,pe=de.document,Le=t.text||"",Ye=Le.length;let tt=pe.selection;if(t.selection?tt=t.selection:t.range&&(tt=de.createSelection(t.range)),!de.canEditAt(tt))return;const st=t.resultRange;de.enqueueChange(this._buffer.batch,ht=>{this._buffer.lock();const mt=Array.from(pe.selection.getAttributes());de.deleteContent(tt),Le&&de.insertContent(ht.createText(Le,mt),tt),st?ht.setSelection(st):tt.is("documentSelection")||ht.setSelection(tt),this._buffer.unlock(),this._buffer.input(Ye)})}}const TYPING_INPUT_TYPES=["insertText","insertReplacementText"],TYPING_INPUT_TYPES_ANDROID=[...TYPING_INPUT_TYPES,"insertCompositionText"];class InsertTextObserver extends Observer{constructor(t){super(t);wt(this,"focusObserver");this.focusObserver=t.getObserver(FocusObserver);const de=env.isAndroid?TYPING_INPUT_TYPES_ANDROID:TYPING_INPUT_TYPES,pe=t.document;pe.on("beforeinput",(Le,Ye)=>{if(!this.isEnabled)return;const{data:tt,targetRanges:st,inputType:ht,domEvent:mt}=Ye;if(!de.includes(ht))return;this.focusObserver.flush();const gt=new EventInfo(pe,"insertText");pe.fire(gt,new DomEventData(t,mt,{text:tt,selection:t.createSelection(st)})),gt.stop.called&&Le.stop()}),env.isAndroid||pe.on("compositionend",(Le,{data:Ye,domEvent:tt})=>{this.isEnabled&&Ye&&pe.fire("insertText",new DomEventData(t,tt,{text:Ye}))},{priority:"lowest"})}observe(){}stopObserving(){}}class Input extends Plugin{constructor(){super(...arguments);wt(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model,pe=t.editing.view,Le=t.editing.mapper,Ye=de.document.selection;this._compositionQueue=new CompositionQueue(t),pe.addObserver(InsertTextObserver);const tt=new InsertTextCommand(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",tt),t.commands.add("input",tt),this.listenTo(pe.document,"insertText",(st,ht)=>{pe.document.isComposing||ht.preventDefault(),env.isAndroid&&pe.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:mt,selection:gt}=ht;let bt;gt?bt=Array.from(gt.getRanges()).map(Tt=>Le.toModelRange(Tt)):bt=Array.from(Ye.getRanges());let _t=mt;if(env.isAndroid){const Tt=Array.from(bt[0].getItems()).reduce((St,Rt)=>St+(Rt.is("$textProxy")?Rt.data:""),"");if(Tt&&(Tt.length<=_t.length?_t.startsWith(Tt)&&(_t=_t.substring(Tt.length),bt[0].start=bt[0].start.getShiftedBy(Tt.length)):Tt.startsWith(_t)&&(bt[0].start=bt[0].start.getShiftedBy(_t.length),_t="")),_t.length==0&&bt[0].isCollapsed)return}const vt={text:_t,selection:de.createSelection(bt)};env.isAndroid&&pe.document.isComposing?this._compositionQueue.push(vt):(t.execute("insertText",vt),pe.scrollToTheSelection())}),env.isAndroid?this.listenTo(pe.document,"keydown",(st,ht)=>{Ye.isCollapsed||ht.keyCode!=229||!pe.document.isComposing||deleteSelectionContent(de,tt)}):this.listenTo(pe.document,"compositionstart",()=>{Ye.isCollapsed||deleteSelectionContent(de,tt)}),env.isAndroid?(this.listenTo(pe.document,"mutations",(st,{mutations:ht})=>{if(pe.document.isComposing)for(const{node:mt}of ht){const gt=findMappedViewAncestor(mt,Le),bt=Le.toModelElement(gt);if(this._compositionQueue.isComposedElement(bt)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(pe.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(pe.document,"compositionend",()=>{const st=[];for(const ht of this._compositionQueue.flushComposedElements()){const mt=Le.toViewElement(ht);mt&&st.push({type:"children",node:mt})}st.length&&pe.document.fire("mutations",{mutations:st})},{priority:"lowest"})):this.listenTo(pe.document,"compositionend",()=>{pe.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class CompositionQueue{constructor(u){wt(this,"editor");wt(this,"flushDebounced",debounce(()=>this.flush("timeout"),50));wt(this,"_queue",[]);wt(this,"_compositionElements",new Set);this.editor=u}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(u){const t={text:u.text};if(u.selection){t.selectionRanges=[];for(const de of u.selection.getRanges())t.selectionRanges.push(LiveRange.fromRange(de)),this._compositionElements.add(de.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const u=this._queue.shift(),t={text:u.text};if(u.selectionRanges){const de=u.selectionRanges.map(pe=>detachLiveRange(pe)).filter(pe=>!!pe);de.length&&(t.selection=this.editor.model.createSelection(de))}return t}flush(u){const t=this.editor,de=t.model,pe=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const Ye=t.commands.get("insertText").buffer;de.enqueueChange(Ye.batch,()=>{for(Ye.lock();this._queue.length;){const tt=this.shift();t.execute("insertText",tt)}Ye.unlock()}),pe.scrollToTheSelection()}isComposedElement(u){return this._compositionElements.has(u)}flushComposedElements(){const u=Array.from(this._compositionElements);return this._compositionElements.clear(),u}}function deleteSelectionContent(me,u){if(!u.isEnabled)return;const t=u.buffer;t.lock(),me.enqueueChange(t.batch,()=>{me.deleteContent(me.document.selection)}),t.unlock()}function detachLiveRange(me){const u=me.toRange();return me.detach(),u.root.rootName=="$graveyard"?null:u}function findMappedViewAncestor(me,u){let t=me.is("$text")?me.parent:me;for(;!u.toModelElement(t);)t=t.parent;return t}class DeleteCommand extends Command{constructor(t,de){super(t);wt(this,"direction");wt(this,"_buffer");this.direction=de,this._buffer=new ChangeBuffer(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const de=this.editor.model,pe=de.document;de.enqueueChange(this._buffer.batch,Le=>{this._buffer.lock();const Ye=Le.createSelection(t.selection||pe.selection);if(!de.canEditAt(Ye))return;const tt=t.sequence||1,st=Ye.isCollapsed;if(Ye.isCollapsed&&de.modifySelection(Ye,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(tt)){this._replaceEntireContentWithParagraph(Le);return}if(this._shouldReplaceFirstBlockWithParagraph(Ye,tt)){this.editor.execute("paragraph",{selection:Ye});return}if(Ye.isCollapsed)return;let ht=0;Ye.getFirstRange().getMinimalFlatRanges().forEach(mt=>{ht+=count(mt.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),de.deleteContent(Ye,{doNotResetEntireContent:st,direction:this.direction}),this._buffer.input(ht),Le.setSelection(Ye),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const de=this.editor.model,Le=de.document.selection,Ye=de.schema.getLimitElement(Le);if(!(Le.isCollapsed&&Le.containsEntireContent(Ye))||!de.schema.checkChild(Ye,"paragraph"))return!1;const st=Ye.getChild(0);return!(st&&st.is("element","paragraph"))}_replaceEntireContentWithParagraph(t){const de=this.editor.model,Le=de.document.selection,Ye=de.schema.getLimitElement(Le),tt=t.createElement("paragraph");t.remove(t.createRangeIn(Ye)),t.insert(tt,Ye),t.setSelection(tt,0)}_shouldReplaceFirstBlockWithParagraph(t,de){const pe=this.editor.model;if(de>1||this.direction!="backward"||!t.isCollapsed)return!1;const Le=t.getFirstPosition(),Ye=pe.schema.getLimitElement(Le),tt=Ye.getChild(0);return!(Le.parent!=tt||!t.containsEntireContent(tt)||!pe.schema.checkChild(Ye,"paragraph")||tt.name=="paragraph")}}const DELETE_CHARACTER="character",DELETE_WORD="word",DELETE_CODE_POINT="codePoint",DELETE_SELECTION="selection",DELETE_BACKWARD="backward",DELETE_FORWARD="forward",DELETE_EVENT_TYPES={deleteContent:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentBackward:{unit:DELETE_CODE_POINT,direction:DELETE_BACKWARD},deleteWordBackward:{unit:DELETE_WORD,direction:DELETE_BACKWARD},deleteHardLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteSoftLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentForward:{unit:DELETE_CHARACTER,direction:DELETE_FORWARD},deleteWordForward:{unit:DELETE_WORD,direction:DELETE_FORWARD},deleteHardLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD},deleteSoftLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD}};class DeleteObserver extends Observer{constructor(u){super(u);const t=u.document;let de=0;t.on("keydown",()=>{de++}),t.on("keyup",()=>{de=0}),t.on("beforeinput",(pe,Le)=>{if(!this.isEnabled)return;const{targetRanges:Ye,domEvent:tt,inputType:st}=Le,ht=DELETE_EVENT_TYPES[st];if(!ht)return;const mt={direction:ht.direction,unit:ht.unit,sequence:de};mt.unit==DELETE_SELECTION&&(mt.selectionToRemove=u.createSelection(Ye[0])),st==="deleteContentBackward"&&(env.isAndroid&&(mt.sequence=1),shouldUseTargetRanges(Ye)&&(mt.unit=DELETE_SELECTION,mt.selectionToRemove=u.createSelection(Ye)));const gt=new BubblingEventInfo(t,"delete",Ye[0]);t.fire(gt,new DomEventData(u,tt,mt)),gt.stop.called&&pe.stop()}),env.isBlink&&enableChromeWorkaround(this)}observe(){}stopObserving(){}}function enableChromeWorkaround(me){const u=me.view,t=u.document;let de=null,pe=!1;t.on("keydown",(tt,{keyCode:st})=>{de=st,pe=!1}),t.on("keyup",(tt,{keyCode:st,domEvent:ht})=>{const mt=t.selection,gt=me.isEnabled&&st==de&&Le(st)&&!mt.isCollapsed&&!pe;if(de=null,gt){const bt=mt.getFirstRange(),_t=new BubblingEventInfo(t,"delete",bt),vt={unit:DELETE_SELECTION,direction:Ye(st),selectionToRemove:mt};t.fire(_t,new DomEventData(u,ht,vt))}}),t.on("beforeinput",(tt,{inputType:st})=>{const ht=DELETE_EVENT_TYPES[st];Le(de)&&ht&&ht.direction==Ye(de)&&(pe=!0)},{priority:"high"}),t.on("beforeinput",(tt,{inputType:st,data:ht})=>{de==keyCodes.delete&&st=="insertText"&&ht==""&&tt.stop()},{priority:"high"});function Le(tt){return tt==keyCodes.backspace||tt==keyCodes.delete}function Ye(tt){return tt==keyCodes.backspace?DELETE_BACKWARD:DELETE_FORWARD}}function shouldUseTargetRanges(me){if(me.length!=1||me[0].isCollapsed)return!1;const u=me[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:de,item:pe}of u){if(de.parent.is("$text")){const Le=de.parent.data,Ye=de.offset;if(isInsideSurrogatePair(Le,Ye)||isInsideCombinedSymbol(Le,Ye)||isInsideEmojiSequence(Le,Ye))continue;t++}else(pe.is("containerElement")||pe.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class Delete extends Plugin{constructor(){super(...arguments);wt(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.editing.view,pe=de.document,Le=t.model.document;de.addObserver(DeleteObserver),this._undoOnBackspace=!1;const Ye=new DeleteCommand(t,"forward");t.commands.add("deleteForward",Ye),t.commands.add("forwardDelete",Ye),t.commands.add("delete",new DeleteCommand(t,"backward")),this.listenTo(pe,"delete",(tt,st)=>{pe.isComposing||st.preventDefault();const{direction:ht,sequence:mt,selectionToRemove:gt,unit:bt}=st,_t=ht==="forward"?"deleteForward":"delete",vt={sequence:mt};if(bt=="selection"){const Tt=Array.from(gt.getRanges()).map(St=>t.editing.mapper.toModelRange(St));vt.selection=t.model.createSelection(Tt)}else vt.unit=bt;t.execute(_t,vt),de.scrollToTheSelection()},{priority:"low"}),this.listenTo(pe,"keydown",(tt,st)=>{if(pe.isComposing||st.keyCode!=keyCodes.backspace||!Le.selection.isCollapsed)return;const ht=t.model.schema.getLimitElement(Le.selection);t.model.createPositionAt(ht,0).isTouching(Le.selection.getFirstPosition())&&st.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(pe,"delete",(tt,st)=>{this._undoOnBackspace&&st.direction=="backward"&&st.sequence==1&&st.unit=="codePoint"&&(this._undoOnBackspace=!1,t.execute("undo"),st.preventDefault(),tt.stop())},{context:"$capture"}),this.listenTo(Le,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Typing extends Plugin{static get requires(){return[Input,Delete]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLastTextLine(me,u){let t=me.start;return{text:Array.from(me.getWalker({ignoreElementEnd:!1})).reduce((pe,{item:Le})=>Le.is("$text")||Le.is("$textProxy")?pe+Le.data:(t=u.createPositionAfter(Le),""),""),range:u.createRange(t,me.end)}}class TextWatcher extends ObservableMixin(){constructor(t,de){super();wt(this,"model");wt(this,"testCallback");wt(this,"_hasMatch");this.model=t,this.testCallback=de,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const de=this.model.document;this.listenTo(de.selection,"change:range",(pe,{directChange:Le})=>{if(Le){if(!de.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(de,"change:data",(pe,Le)=>{Le.isUndo||!Le.isLocal||this._evaluateTextBeforeSelection("data",{batch:Le})})}_evaluateTextBeforeSelection(t,de={}){const pe=this.model,Ye=pe.document.selection,tt=pe.createRange(pe.createPositionAt(Ye.focus.parent,0),Ye.focus),{text:st,range:ht}=getLastTextLine(tt,pe),mt=this.testCallback(st);if(!mt&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!mt,mt){const gt=Object.assign(de,{text:st,range:ht});typeof mt=="object"&&Object.assign(gt,mt),this.fire(`matched:${t}`,gt)}}}class TwoStepCaretMovement extends Plugin{constructor(t){super(t);wt(this,"attributes");wt(this,"_overrideUid");wt(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model,pe=t.editing.view,Le=t.locale,Ye=de.document.selection;this.listenTo(pe.document,"arrowKey",(tt,st)=>{if(!Ye.isCollapsed||st.shiftKey||st.altKey||st.ctrlKey)return;const ht=st.keyCode==keyCodes.arrowright,mt=st.keyCode==keyCodes.arrowleft;if(!ht&&!mt)return;const gt=Le.contentLanguageDirection;let bt=!1;gt==="ltr"&&ht||gt==="rtl"&&mt?bt=this._handleForwardMovement(st):bt=this._handleBackwardMovement(st),bt===!0&&tt.stop()},{context:"$text",priority:"highest"}),this.listenTo(Ye,"change:range",(tt,st)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!st.directChange&&isBetweenDifferentAttributes(Ye.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const de=this.attributes,pe=this.editor.model,Le=pe.document.selection,Ye=Le.getFirstPosition();return this._isGravityOverridden||Ye.isAtStart&&hasAnyAttribute$1(Le,de)?!1:isBetweenDifferentAttributes(Ye,de)?(preventCaretMovement(t),hasAnyAttribute$1(Le,de)&&isBetweenDifferentAttributes(Ye,de,!0)?clearSelectionAttributes(pe,de):this._overrideGravity(),!0):!1}_handleBackwardMovement(t){const de=this.attributes,pe=this.editor.model,Le=pe.document.selection,Ye=Le.getFirstPosition();return this._isGravityOverridden?(preventCaretMovement(t),this._restoreGravity(),isBetweenDifferentAttributes(Ye,de,!0)?clearSelectionAttributes(pe,de):setSelectionAttributesFromTheNodeBefore(pe,de,Ye),!0):Ye.isAtStart?hasAnyAttribute$1(Le,de)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(pe,de,Ye),!0):!1:!hasAnyAttribute$1(Le,de)&&isBetweenDifferentAttributes(Ye,de,!0)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(pe,de,Ye),!0):isStepAfterAnyAttributeBoundary(Ye,de)?Ye.isAtEnd&&!hasAnyAttribute$1(Le,de)&&isBetweenDifferentAttributes(Ye,de)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(pe,de,Ye),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const t=this.editor,de=t.model,pe=de.document.selection,Le=t.editing.view.document;t.editing.view.addObserver(MouseObserver),t.editing.view.addObserver(TouchObserver);let Ye=!1,tt=!1;this.listenTo(Le,"touchstart",()=>{tt=!1,Ye=!0}),this.listenTo(Le,"mousedown",()=>{tt=!0}),this.listenTo(Le,"selectionChange",()=>{const st=this.attributes;if(!tt&&!Ye||(tt=!1,Ye=!1,!pe.isCollapsed)||!hasAnyAttribute$1(pe,st))return;const ht=pe.getFirstPosition();isBetweenDifferentAttributes(ht,st)&&(ht.isAtStart||isBetweenDifferentAttributes(ht,st,!0)?clearSelectionAttributes(de,st):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const de=this.editor.model,pe=de.document.selection,Le=this.attributes;this.listenTo(de,"insertContent",()=>{const Ye=pe.getFirstPosition();hasAnyAttribute$1(pe,Le)&&isBetweenDifferentAttributes(Ye,Le)&&clearSelectionAttributes(de,Le)},{priority:"low"})}_handleDeleteContentAfterNode(){const t=this.editor,de=t.model,pe=de.document.selection,Le=t.editing.view;let Ye=!1,tt=!1;this.listenTo(Le.document,"delete",(st,ht)=>{Ye=ht.direction==="backward"},{priority:"high"}),this.listenTo(de,"deleteContent",()=>{if(!Ye)return;const st=pe.getFirstPosition();tt=hasAnyAttribute$1(pe,this.attributes)&&!isStepAfterAnyAttributeBoundary(st,this.attributes)},{priority:"high"}),this.listenTo(de,"deleteContent",()=>{Ye&&(Ye=!1,!tt&&t.model.enqueueChange(()=>{const st=pe.getFirstPosition();hasAnyAttribute$1(pe,this.attributes)&&isBetweenDifferentAttributes(st,this.attributes)&&(st.isAtStart||isBetweenDifferentAttributes(st,this.attributes,!0)?clearSelectionAttributes(de,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function hasAnyAttribute$1(me,u){for(const t of u)if(me.hasAttribute(t))return!0;return!1}function setSelectionAttributesFromTheNodeBefore(me,u,t){const de=t.nodeBefore;me.change(pe=>{if(de){const Le=[],Ye=me.schema.isObject(de)&&me.schema.isInline(de);for(const[tt,st]of de.getAttributes())me.schema.checkAttribute("$text",tt)&&(!Ye||me.schema.getAttributeProperties(tt).copyFromObject!==!1)&&Le.push([tt,st]);pe.setSelectionAttribute(Le)}else pe.removeSelectionAttribute(u)})}function clearSelectionAttributes(me,u){me.change(t=>{t.removeSelectionAttribute(u)})}function preventCaretMovement(me){me.preventDefault()}function isStepAfterAnyAttributeBoundary(me,u){const t=me.getShiftedBy(-1);return isBetweenDifferentAttributes(t,u)}function isBetweenDifferentAttributes(me,u,t=!1){const{nodeBefore:de,nodeAfter:pe}=me;for(const Le of u){const Ye=de?de.getAttribute(Le):void 0,tt=pe?pe.getAttribute(Le):void 0;if(!(t&&(Ye===void 0||tt===void 0))&&tt!==Ye)return!0}return!1}const TRANSFORMATIONS={copyright:{from:"(c)",to:""},registeredTrademark:{from:"(r)",to:""},trademark:{from:"(tm)",to:""},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"",null]},lessThanOrEqual:{from:"<=",to:""},greaterThanOrEqual:{from:">=",to:""},notEqual:{from:"!=",to:""},arrowLeft:{from:"<-",to:""},arrowRight:{from:"->",to:""},horizontalEllipsis:{from:"...",to:""},enDash:{from:/(^| )(--)( )$/,to:[null,"",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"",null]},quotesPrimary:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesSecondary:{from:buildQuotesRegExp("'"),to:[null,"",null,""]},quotesPrimaryEnGb:{from:buildQuotesRegExp("'"),to:[null,"",null,""]},quotesSecondaryEnGb:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesPrimaryPl:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesSecondaryPl:{from:buildQuotesRegExp("'"),to:[null,"",null,""]}},TRANSFORMATION_GROUPS={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},DEFAULT_TRANSFORMATIONS=["symbols","mathematical","typography","quotes"];class TextTransformation extends Plugin{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("typing",{transformations:{include:DEFAULT_TRANSFORMATIONS}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const u=this.editor,t=u.model,de=u.plugins.get("Delete"),pe=normalizeTransformations(u.config.get("typing.transformations")),Le=tt=>{for(const st of pe)if(st.from.test(tt))return{normalizedTransformation:st}},Ye=new TextWatcher(u.model,Le);Ye.on("matched:data",(tt,st)=>{if(!st.batch.isTyping)return;const{from:ht,to:mt}=st.normalizedTransformation,gt=ht.exec(st.text),bt=mt(gt.slice(1)),_t=st.range;let vt=gt.index;t.enqueueChange(Tt=>{for(let St=1;St<gt.length;St++){const Rt=gt[St],Pt=bt[St-1];if(Pt==null){vt+=Rt.length;continue}const Ot=_t.start.getShiftedBy(vt),Mt=t.createRange(Ot,Ot.getShiftedBy(Rt.length)),Bt=getTextAttributesAfterPosition(Ot);t.insertContent(Tt.createText(Pt,Bt),Mt),vt+=Pt.length}t.enqueueChange(()=>{de.requestUndoOnBackspace()})})}),Ye.bind("isEnabled").to(this)}}function normalizeFrom(me){return typeof me=="string"?new RegExp(`(${escapeRegExp(me)})$`):me}function normalizeTo(me){return typeof me=="string"?()=>[me]:me instanceof Array?()=>me:me}function getTextAttributesAfterPosition(me){return(me.textNode?me.textNode:me.nodeAfter).getAttributes()}function buildQuotesRegExp(me){return new RegExp(`(^|\\s)(${me})([^${me}]*)(${me})$`)}function normalizeTransformations(me){const u=me.extra||[],t=me.remove||[],de=Le=>!t.includes(Le),pe=me.include.concat(u).filter(de);return expandGroupsAndRemoveDuplicates(pe).filter(de).map(Le=>typeof Le=="string"&&TRANSFORMATIONS[Le]?TRANSFORMATIONS[Le]:Le).filter(Le=>typeof Le=="object").map(Le=>({from:normalizeFrom(Le.from),to:normalizeTo(Le.to)}))}function expandGroupsAndRemoveDuplicates(me){const u=new Set;for(const t of me)if(typeof t=="string"&&TRANSFORMATION_GROUPS[t])for(const de of TRANSFORMATION_GROUPS[t])u.add(de);else u.add(t);return Array.from(u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function findAttributeRange(me,u,t,de){return de.createRange(findAttributeRangeBound(me,u,t,!0,de),findAttributeRangeBound(me,u,t,!1,de))}function findAttributeRangeBound(me,u,t,de,pe){let Le=me.textNode||(de?me.nodeBefore:me.nodeAfter),Ye=null;for(;Le&&Le.getAttribute(u)==t;)Ye=Le,Le=de?Le.previousSibling:Le.nextSibling;return Ye?pe.createPositionAt(Ye,de?"before":"after"):me}function inlineHighlight(me,u,t,de){const pe=me.editing.view,Le=new Set;pe.document.registerPostFixer(Ye=>{const tt=me.model.document.selection;let st=!1;if(tt.hasAttribute(u)){const ht=findAttributeRange(tt.getFirstPosition(),u,tt.getAttribute(u),me.model),mt=me.editing.mapper.toViewRange(ht);for(const gt of mt.getItems())gt.is("element",t)&&!gt.hasClass(de)&&(Ye.addClass(de,gt),Le.add(gt),st=!0)}return st}),me.conversion.for("editingDowncast").add(Ye=>{Ye.on("insert",tt,{priority:"highest"}),Ye.on("remove",tt,{priority:"highest"}),Ye.on("attribute",tt,{priority:"highest"}),Ye.on("selection",tt,{priority:"highest"});function tt(){pe.change(st=>{for(const ht of Le.values())st.removeClass(de,ht),Le.delete(ht)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function blockAutoformatEditing(me,u,t,de){let pe,Le=null;typeof de=="function"?pe=de:(Le=me.commands.get(de),pe=()=>{me.execute(de)}),me.model.document.on("change:data",(Ye,tt)=>{if(Le&&!Le.isEnabled||!u.isEnabled)return;const st=first(me.model.document.selection.getRanges());if(!st.isCollapsed||tt.isUndo||!tt.isLocal)return;const ht=Array.from(me.model.document.differ.getChanges()),mt=ht[0];if(ht.length!=1||mt.type!=="insert"||mt.name!="$text"||mt.length!=1)return;const gt=mt.position.parent;if(gt.is("element","codeBlock")||gt.is("element","listItem")&&typeof de!="function"&&!["numberedList","bulletedList","todoList"].includes(de)||Le&&Le.value===!0)return;const bt=gt.getChild(0),_t=me.model.createRangeOn(bt);if(!_t.containsRange(st)&&!st.end.isEqual(_t.end))return;const vt=t.exec(bt.data.substr(0,st.end.offset));vt&&me.model.enqueueChange(Tt=>{const St=Tt.createPositionAt(gt,0),Rt=Tt.createPositionAt(gt,vt[0].length),Pt=new LiveRange(St,Rt);if(pe({match:vt})!==!1){Tt.remove(Pt);const Mt=me.model.document.selection.getFirstRange(),Bt=Tt.createRangeIn(gt);gt.isEmpty&&!Bt.isEqual(Mt)&&!Bt.containsRange(Mt,!0)&&Tt.remove(gt)}Pt.detach(),me.model.enqueueChange(()=>{me.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function inlineAutoformatEditing(me,u,t,de){let pe,Le;t instanceof RegExp?pe=t:Le=t,Le=Le||(Ye=>{let tt;const st=[],ht=[];for(;(tt=pe.exec(Ye))!==null&&!(tt&&tt.length<4);){let{index:mt,"1":gt,"2":bt,"3":_t}=tt;const vt=gt+bt+_t;mt+=tt[0].length-vt.length;const Tt=[mt,mt+gt.length],St=[mt+gt.length+bt.length,mt+gt.length+bt.length+_t.length];st.push(Tt),st.push(St),ht.push([mt+gt.length,mt+gt.length+bt.length])}return{remove:st,format:ht}}),me.model.document.on("change:data",(Ye,tt)=>{if(tt.isUndo||!tt.isLocal||!u.isEnabled)return;const st=me.model,ht=st.document.selection;if(!ht.isCollapsed)return;const mt=Array.from(st.document.differ.getChanges()),gt=mt[0];if(mt.length!=1||gt.type!=="insert"||gt.name!="$text"||gt.length!=1)return;const bt=ht.focus,_t=bt.parent,{text:vt,range:Tt}=getTextAfterCode(st.createRange(st.createPositionAt(_t,0),bt),st),St=Le(vt),Rt=testOutputToRanges(Tt.start,St.format,st),Pt=testOutputToRanges(Tt.start,St.remove,st);Rt.length&&Pt.length&&st.enqueueChange(Ot=>{if(de(Ot,Rt)!==!1){for(const Bt of Pt.reverse())Ot.remove(Bt);st.enqueueChange(()=>{me.plugins.get("Delete").requestUndoOnBackspace()})}})})}function testOutputToRanges(me,u,t){return u.filter(de=>de[0]!==void 0&&de[1]!==void 0).map(de=>t.createRange(me.getShiftedBy(de[0]),me.getShiftedBy(de[1])))}function getTextAfterCode(me,u){let t=me.start;return{text:Array.from(me.getItems()).reduce((pe,Le)=>!(Le.is("$text")||Le.is("$textProxy"))||Le.getAttribute("code")?(t=u.createPositionAfter(Le),""):pe+Le.data,""),range:u.createRange(t,me.end)}}class Autoformat extends Plugin{static get requires(){return[Delete]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const u=this.editor.commands;u.get("bulletedList")&&blockAutoformatEditing(this.editor,this,/^[*-]\s$/,"bulletedList"),u.get("numberedList")&&blockAutoformatEditing(this.editor,this,/^1[.|)]\s$/,"numberedList"),u.get("todoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?\]\s$/,"todoList"),u.get("checkTodoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const u=this.editor.commands;if(u.get("bold")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"bold");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(u.get("italic")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"italic");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(u.get("code")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"code");inlineAutoformatEditing(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(u.get("strikethrough")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"strikethrough");inlineAutoformatEditing(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const u=this.editor.commands.get("heading");u&&u.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const de=t[7],pe=new RegExp(`^(#{${de}})\\s$`);blockAutoformatEditing(this.editor,this,pe,()=>{if(!u.isEnabled||u.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&blockAutoformatEditing(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const u=this.editor,t=u.model.document.selection;u.commands.get("codeBlock")&&blockAutoformatEditing(u,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&blockAutoformatEditing(this.editor,this,/^---$/,"horizontalLine")}}function getCallbackFunctionForInlineAutoformat(me,u){return(t,de)=>{if(!me.commands.get(u).isEnabled)return!1;const Le=me.model.schema.getValidRanges(de,u);for(const Ye of Le)t.setAttribute(u,!0,Ye);t.removeSelectionAttribute(u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AttributeCommand extends Command{constructor(t,de){super(t);wt(this,"attributeKey");this.attributeKey=de}refresh(){const t=this.editor.model,de=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(de.selection,this.attributeKey)}execute(t={}){const de=this.editor.model,Le=de.document.selection,Ye=t.forceValue===void 0?!this.value:t.forceValue;de.change(tt=>{if(Le.isCollapsed)Ye?tt.setSelectionAttribute(this.attributeKey,!0):tt.removeSelectionAttribute(this.attributeKey);else{const st=de.schema.getValidRanges(Le.getRanges(),this.attributeKey);for(const ht of st)Ye?tt.setAttribute(this.attributeKey,Ye,ht):tt.removeAttribute(this.attributeKey,ht)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,de=t.schema,pe=t.document.selection;if(pe.isCollapsed)return pe.hasAttribute(this.attributeKey);for(const Le of pe.getRanges())for(const Ye of Le.getItems())if(de.checkAttribute(Ye,this.attributeKey))return Ye.hasAttribute(this.attributeKey);return!1}}const BOLD$1="bold";class BoldEditing extends Plugin{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:BOLD$1}),u.model.schema.setAttributeProperties(BOLD$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:BOLD$1,view:"strong",upcastAlso:["b",de=>{const pe=de.getStyle("font-weight");return pe&&(pe=="bold"||Number(pe)>=600)?{name:!0,styles:["font-weight"]}:null}]}),u.commands.add(BOLD$1,new AttributeCommand(u,BOLD$1)),u.keystrokes.set("CTRL+B",BOLD$1),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function getButtonCreator({editor:me,commandName:u,plugin:t,icon:de,label:pe,keystroke:Le}){return Ye=>{const tt=me.commands.get(u),st=new Ye(me.locale);return st.set({label:pe,icon:de,keystroke:Le,isToggleable:!0}),st.bind("isEnabled").to(tt,"isEnabled"),st.bind("isOn").to(tt,"value"),st instanceof MenuBarMenuListItemButtonView?st.set({role:"menuitemcheckbox"}):st.set({tooltip:!0}),t.listenTo(st,"execute",()=>{me.execute(u),me.editing.view.focus()}),st}}const BOLD="bold";class BoldUI extends Plugin{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:BOLD,plugin:this,icon:icons.bold,label:t("Bold"),keystroke:"CTRL+B"});u.ui.componentFactory.add(BOLD,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+BOLD,()=>de(MenuBarMenuListItemButtonView))}}class Bold extends Plugin{static get requires(){return[BoldEditing,BoldUI]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const CODE$1="code",HIGHLIGHT_CLASS$2="ck-code_selected";class CodeEditing extends Plugin{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement]}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:CODE$1}),u.model.schema.setAttributeProperties(CODE$1,{isFormatting:!0,copyOnEnter:!1}),u.conversion.attributeToElement({model:CODE$1,view:"code"}),u.commands.add(CODE$1,new AttributeCommand(u,CODE$1)),u.plugins.get(TwoStepCaretMovement).registerAttribute(CODE$1),inlineHighlight(u,CODE$1,"code",HIGHLIGHT_CLASS$2),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}var codeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';const CODE="code";class CodeUI extends Plugin{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:CODE,plugin:this,icon:codeIcon,label:t("Code")});u.ui.componentFactory.add(CODE,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+CODE,()=>de(MenuBarMenuListItemButtonView))}}class Code extends Plugin{static get requires(){return[CodeEditing,CodeUI]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const ITALIC$1="italic";class ItalicEditing extends Plugin{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:ITALIC$1}),u.model.schema.setAttributeProperties(ITALIC$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:ITALIC$1,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),u.commands.add(ITALIC$1,new AttributeCommand(u,ITALIC$1)),u.keystrokes.set("CTRL+I",ITALIC$1),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}var italicIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const ITALIC="italic";class ItalicUI extends Plugin{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:ITALIC,plugin:this,icon:italicIcon,keystroke:"CTRL+I",label:t("Italic")});u.ui.componentFactory.add(ITALIC,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+ITALIC,()=>de(MenuBarMenuListItemButtonView))}}class Italic extends Plugin{static get requires(){return[ItalicEditing,ItalicUI]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const STRIKETHROUGH$1="strikethrough";class StrikethroughEditing extends Plugin{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:STRIKETHROUGH$1}),u.model.schema.setAttributeProperties(STRIKETHROUGH$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:STRIKETHROUGH$1,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),u.commands.add(STRIKETHROUGH$1,new AttributeCommand(u,STRIKETHROUGH$1)),u.keystrokes.set("CTRL+SHIFT+X","strikethrough"),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}var strikethroughIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const STRIKETHROUGH="strikethrough";class StrikethroughUI extends Plugin{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:STRIKETHROUGH,plugin:this,icon:strikethroughIcon,keystroke:"CTRL+SHIFT+X",label:t("Strikethrough")});u.ui.componentFactory.add(STRIKETHROUGH,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+STRIKETHROUGH,()=>de(MenuBarMenuListItemButtonView))}}class Strikethrough extends Plugin{static get requires(){return[StrikethroughEditing,StrikethroughUI]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const SUBSCRIPT$1="subscript";class SubscriptEditing extends Plugin{static get pluginName(){return"SubscriptEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:SUBSCRIPT$1}),u.model.schema.setAttributeProperties(SUBSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:SUBSCRIPT$1,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),u.commands.add(SUBSCRIPT$1,new AttributeCommand(u,SUBSCRIPT$1))}}var subscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const SUBSCRIPT="subscript";class SubscriptUI extends Plugin{static get pluginName(){return"SubscriptUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:SUBSCRIPT,plugin:this,icon:subscriptIcon,label:t("Subscript")});u.ui.componentFactory.add(SUBSCRIPT,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+SUBSCRIPT,()=>de(MenuBarMenuListItemButtonView))}}class Subscript extends Plugin{static get requires(){return[SubscriptEditing,SubscriptUI]}static get pluginName(){return"Subscript"}static get isOfficialPlugin(){return!0}}const SUPERSCRIPT$1="superscript";class SuperscriptEditing extends Plugin{static get pluginName(){return"SuperscriptEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:SUPERSCRIPT$1}),u.model.schema.setAttributeProperties(SUPERSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:SUPERSCRIPT$1,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),u.commands.add(SUPERSCRIPT$1,new AttributeCommand(u,SUPERSCRIPT$1))}}var superscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const SUPERSCRIPT="superscript";class SuperscriptUI extends Plugin{static get pluginName(){return"SuperscriptUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:SUPERSCRIPT,plugin:this,icon:superscriptIcon,label:t("Superscript")});u.ui.componentFactory.add(SUPERSCRIPT,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+SUPERSCRIPT,()=>de(MenuBarMenuListItemButtonView))}}class Superscript extends Plugin{static get requires(){return[SuperscriptEditing,SuperscriptUI]}static get pluginName(){return"Superscript"}static get isOfficialPlugin(){return!0}}const UNDERLINE$1="underline";class UnderlineEditing extends Plugin{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:UNDERLINE$1}),u.model.schema.setAttributeProperties(UNDERLINE$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:UNDERLINE$1,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),u.commands.add(UNDERLINE$1,new AttributeCommand(u,UNDERLINE$1)),u.keystrokes.set("CTRL+U","underline"),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}var underlineIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const UNDERLINE="underline";class UnderlineUI extends Plugin{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=getButtonCreator({editor:u,commandName:UNDERLINE,plugin:this,icon:underlineIcon,label:t("Underline"),keystroke:"CTRL+U"});u.ui.componentFactory.add(UNDERLINE,()=>de(ButtonView)),u.ui.componentFactory.add("menuBar:"+UNDERLINE,()=>de(MenuBarMenuListItemButtonView))}}class Underline extends Plugin{static get requires(){return[UnderlineEditing,UnderlineUI]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*getCopyOnEnterAttributes(me,u){for(const t of u)t&&me.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class EnterCommand extends Command{execute(){this.editor.model.change(u=>{this.enterBlock(u),this.fire("afterExecute",{writer:u})})}enterBlock(u){const t=this.editor.model,de=t.document.selection,pe=t.schema,Le=de.isCollapsed,Ye=de.getFirstRange(),tt=Ye.start.parent,st=Ye.end.parent;if(pe.isLimit(tt)||pe.isLimit(st))return!Le&&tt==st&&t.deleteContent(de),!1;if(Le){const ht=getCopyOnEnterAttributes(u.model.schema,de.getAttributes());return splitBlock(u,Ye.start),u.setSelectionAttribute(ht),!0}else{const ht=!(Ye.start.isAtStart&&Ye.end.isAtEnd),mt=tt==st;if(t.deleteContent(de,{leaveUnmerged:ht}),ht){if(mt)return splitBlock(u,de.focus),!0;u.setSelection(st,0)}}return!1}}function splitBlock(me,u){me.split(u),me.setSelection(u.parent.nextSibling,0)}const ENTER_EVENT_TYPES={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class EnterObserver extends Observer{constructor(u){super(u);const t=this.document;let de=!1;t.on("keydown",(pe,Le)=>{de=Le.shiftKey}),t.on("beforeinput",(pe,Le)=>{if(!this.isEnabled)return;let Ye=Le.inputType;env.isSafari&&de&&Ye=="insertParagraph"&&(Ye="insertLineBreak");const tt=Le.domEvent,st=ENTER_EVENT_TYPES[Ye];if(!st)return;const ht=new BubblingEventInfo(t,"enter",Le.targetRanges[0]);t.fire(ht,new DomEventData(u,tt,{isSoft:st.isSoft})),ht.stop.called&&pe.stop()})}observe(){}stopObserving(){}}class Enter extends Plugin{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.editing.view,de=t.document,pe=this.editor.t;t.addObserver(EnterObserver),u.commands.add("enter",new EnterCommand(u)),this.listenTo(de,"enter",(Le,Ye)=>{de.isComposing||Ye.preventDefault(),!Ye.isSoft&&(u.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:pe("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class ShiftEnterCommand extends Command{execute(){const u=this.editor.model,t=u.document;u.change(de=>{softBreakAction(u,de,t.selection),this.fire("afterExecute",{writer:de})})}refresh(){const u=this.editor.model,t=u.document;this.isEnabled=isEnabled(u.schema,t.selection)}}function isEnabled(me,u){if(u.rangeCount>1)return!1;const t=u.anchor;if(!t||!me.checkChild(t,"softBreak"))return!1;const de=u.getFirstRange(),pe=de.start.parent,Le=de.end.parent;return!((isInsideLimitElement(pe,me)||isInsideLimitElement(Le,me))&&pe!==Le)}function softBreakAction(me,u,t){const de=t.isCollapsed,pe=t.getFirstRange(),Le=pe.start.parent,Ye=pe.end.parent,tt=Le==Ye;if(de){const st=getCopyOnEnterAttributes(me.schema,t.getAttributes());insertBreak(me,u,pe.end),u.removeSelectionAttribute(t.getAttributeKeys()),u.setSelectionAttribute(st)}else{const st=!(pe.start.isAtStart&&pe.end.isAtEnd);me.deleteContent(t,{leaveUnmerged:st}),tt?insertBreak(me,u,t.focus):st&&u.setSelection(Ye,0)}}function insertBreak(me,u,t){const de=u.createElement("softBreak");me.insertContent(de,t),u.setSelection(de,"after")}function isInsideLimitElement(me,u){return me.is("rootElement")?!1:u.isLimit(me)||isInsideLimitElement(me.parent,u)}class ShiftEnter extends Plugin{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model.schema,de=u.conversion,pe=u.editing.view,Le=pe.document,Ye=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),de.for("upcast").elementToElement({model:"softBreak",view:"br"}),de.for("downcast").elementToElement({model:"softBreak",view:(tt,{writer:st})=>st.createEmptyElement("br")}),pe.addObserver(EnterObserver),u.commands.add("shiftEnter",new ShiftEnterCommand(u)),this.listenTo(Le,"enter",(tt,st)=>{Le.isComposing||st.preventDefault(),st.isSoft&&(u.execute("shiftEnter"),pe.scrollToTheSelection())},{priority:"low"}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:Ye("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BlockQuoteCommand extends Command{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(u={}){const t=this.editor.model,de=t.schema,pe=t.document.selection,Le=Array.from(pe.getSelectedBlocks()),Ye=u.forceValue===void 0?!this.value:u.forceValue;t.change(tt=>{if(!Ye)this._removeQuote(tt,Le.filter(findQuote));else{const st=Le.filter(ht=>findQuote(ht)||checkCanBeQuoted(de,ht));this._applyQuote(tt,st)}})}_getValue(){const u=this.editor.model.document.selection,t=first(u.getSelectedBlocks());return!!(t&&findQuote(t))}_checkEnabled(){if(this.value)return!0;const u=this.editor.model.document.selection,t=this.editor.model.schema,de=first(u.getSelectedBlocks());return de?checkCanBeQuoted(t,de):!1}_removeQuote(u,t){getRangesOfBlockGroups(u,t).reverse().forEach(de=>{if(de.start.isAtStart&&de.end.isAtEnd){u.unwrap(de.start.parent);return}if(de.start.isAtStart){const Le=u.createPositionBefore(de.start.parent);u.move(de,Le);return}de.end.isAtEnd||u.split(de.end);const pe=u.createPositionAfter(de.end.parent);u.move(de,pe)})}_applyQuote(u,t){const de=[];getRangesOfBlockGroups(u,t).reverse().forEach(pe=>{let Le=findQuote(pe.start);Le||(Le=u.createElement("blockQuote"),u.wrap(pe,Le)),de.push(Le)}),de.reverse().reduce((pe,Le)=>pe.nextSibling==Le?(u.merge(u.createPositionAfter(pe)),pe):Le)}}function findQuote(me){return me.parent.name=="blockQuote"?me.parent:null}function getRangesOfBlockGroups(me,u){let t,de=0;const pe=[];for(;de<u.length;){const Le=u[de],Ye=u[de+1];t||(t=me.createPositionBefore(Le)),(!Ye||Le.nextSibling!=Ye)&&(pe.push(me.createRange(t,me.createPositionAfter(Le))),t=null),de++}return pe}function checkCanBeQuoted(me,u){const t=me.checkChild(u.parent,"blockQuote"),de=me.checkChild(["$root","blockQuote"],u);return t&&de}class BlockQuoteEditing extends Plugin{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const u=this.editor,t=u.model.schema;u.commands.add("blockQuote",new BlockQuoteCommand(u)),t.register("blockQuote",{inheritAllFrom:"$container"}),u.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),u.model.document.registerPostFixer(Ye=>{const tt=u.model.document.differ.getChanges();for(const st of tt)if(st.type=="insert"){const ht=st.position.nodeAfter;if(!ht)continue;if(ht.is("element","blockQuote")&&ht.isEmpty)return Ye.remove(ht),!0;if(ht.is("element","blockQuote")&&!t.checkChild(st.position,ht))return Ye.unwrap(ht),!0;if(ht.is("element")){const mt=Ye.createRangeIn(ht);for(const gt of mt.getItems())if(gt.is("element","blockQuote")&&!t.checkChild(Ye.createPositionBefore(gt),gt))return Ye.unwrap(gt),!0}}else if(st.type=="remove"){const ht=st.position.parent;if(ht.is("element","blockQuote")&&ht.isEmpty)return Ye.remove(ht),!0}return!1});const de=this.editor.editing.view.document,pe=u.model.document.selection,Le=u.commands.get("blockQuote");this.listenTo(de,"enter",(Ye,tt)=>{if(!pe.isCollapsed||!Le.value)return;pe.getLastPosition().parent.isEmpty&&(u.execute("blockQuote"),u.editing.view.scrollToTheSelection(),tt.preventDefault(),Ye.stop())},{context:"blockquote"}),this.listenTo(de,"delete",(Ye,tt)=>{if(tt.direction!="backward"||!pe.isCollapsed||!Le.value)return;const st=pe.getLastPosition().parent;st.isEmpty&&!st.previousSibling&&(u.execute("blockQuote"),u.editing.view.scrollToTheSelection(),tt.preventDefault(),Ye.stop())},{context:"blockquote"})}}class BlockQuoteUI extends Plugin{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(MenuBarMenuListItemButtonView);return t.set({role:"menuitemcheckbox"}),t})}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get("blockQuote"),Le=new u(t.locale),Ye=de.t;return Le.set({label:Ye("Block quote"),icon:icons.quote,isToggleable:!0}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("isOn").to(pe,"value"),this.listenTo(Le,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),Le}}class BlockQuote extends Plugin{static get requires(){return[BlockQuoteEditing,BlockQuoteUI]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightStack extends EmitterMixin(){constructor(){super(...arguments);wt(this,"_stack",[])}add(t,de){const pe=this._stack,Le=pe[0];this._insertDescriptor(t);const Ye=pe[0];Le!==Ye&&!compareDescriptors(Le,Ye)&&this.fire("change:top",{oldDescriptor:Le,newDescriptor:Ye,writer:de})}remove(t,de){const pe=this._stack,Le=pe[0];this._removeDescriptor(t);const Ye=pe[0];Le!==Ye&&!compareDescriptors(Le,Ye)&&this.fire("change:top",{oldDescriptor:Le,newDescriptor:Ye,writer:de})}_insertDescriptor(t){const de=this._stack,pe=de.findIndex(Ye=>Ye.id===t.id);if(compareDescriptors(t,de[pe]))return;pe>-1&&de.splice(pe,1);let Le=0;for(;de[Le]&&shouldABeBeforeB(de[Le],t);)Le++;de.splice(Le,0,t)}_removeDescriptor(t){const de=this._stack,pe=de.findIndex(Le=>Le.id===t);pe>-1&&de.splice(pe,1)}}function compareDescriptors(me,u){return me&&u&&me.priority==u.priority&&classesToString(me.classes)==classesToString(u.classes)}function shouldABeBeforeB(me,u){return me.priority>u.priority?!0:me.priority<u.priority?!1:classesToString(me.classes)>classesToString(u.classes)}function classesToString(me){return Array.isArray(me)?me.sort().join(","):me}var dragHandleIcon='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const WIDGET_CLASS_NAME="ck-widget",WIDGET_SELECTED_CLASS_NAME="ck-widget_selected";function isWidget(me){return me.is("element")?!!me.getCustomProperty("widget"):!1}function toWidget(me,u,t={}){if(!me.is("containerElement"))throw new CKEditorError("widget-to-widget-wrong-element-type",null,{element:me});return u.setAttribute("contenteditable","false",me),u.addClass(WIDGET_CLASS_NAME,me),u.setCustomProperty("widget",!0,me),me.getFillerOffset=getFillerOffset,u.setCustomProperty("widgetLabel",[],me),t.label&&setLabel(me,t.label),t.hasSelectionHandle&&addSelectionHandle(me,u),setHighlightHandling(me,u),me}function addHighlight(me,u,t){if(u.classes&&t.addClass(toArray$2(u.classes),me),u.attributes)for(const de in u.attributes)t.setAttribute(de,u.attributes[de],me)}function removeHighlight(me,u,t){if(u.classes&&t.removeClass(toArray$2(u.classes),me),u.attributes)for(const de in u.attributes)t.removeAttribute(de,me)}function setHighlightHandling(me,u,t=addHighlight,de=removeHighlight){const pe=new HighlightStack;pe.on("change:top",(tt,st)=>{st.oldDescriptor&&de(me,st.oldDescriptor,st.writer),st.newDescriptor&&t(me,st.newDescriptor,st.writer)});const Le=(tt,st,ht)=>pe.add(st,ht),Ye=(tt,st,ht)=>pe.remove(st,ht);u.setCustomProperty("addHighlight",Le,me),u.setCustomProperty("removeHighlight",Ye,me)}function setLabel(me,u){me.getCustomProperty("widgetLabel").push(u)}function getLabel(me){return me.getCustomProperty("widgetLabel").reduce((t,de)=>typeof de=="function"?t?t+". "+de():de():t?t+". "+de:de,"")}function toWidgetEditable(me,u,t={}){return u.addClass(["ck-editor__editable","ck-editor__nested-editable"],me),u.setAttribute("role","textbox",me),u.setAttribute("tabindex","-1",me),t.label&&u.setAttribute("aria-label",t.label,me),u.setAttribute("contenteditable",me.isReadOnly?"false":"true",me),me.on("change:isReadOnly",(de,pe,Le)=>{u.setAttribute("contenteditable",Le?"false":"true",me)}),me.on("change:isFocused",(de,pe,Le)=>{Le?u.addClass("ck-editor__nested-editable_focused",me):u.removeClass("ck-editor__nested-editable_focused",me)}),setHighlightHandling(me,u),me}function findOptimalInsertionRange(me,u){const t=me.getSelectedElement();if(t){const de=getTypeAroundFakeCaretPosition(me);if(de)return u.createRange(u.createPositionAt(t,de))}return u.schema.findOptimalInsertionRange(me)}function getFillerOffset(){return null}function addSelectionHandle(me,u){const t=u.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(de){const pe=this.toDomElement(de),Le=new IconView;return Le.set("content",dragHandleIcon),Le.render(),pe.appendChild(Le.element),pe});u.insert(u.createPositionAt(me,0),t),u.addClass(["ck-widget_with-selection-handle"],me)}function calculateResizeHostAncestorWidth(me){const u=tt=>{const{width:st,paddingLeft:ht,paddingRight:mt}=tt.ownerDocument.defaultView.getComputedStyle(tt);return parseFloat(st)-(parseFloat(ht)||0)-(parseFloat(mt)||0)},t=me.parentElement;if(!t)return 0;let de=u(t);const pe=5;let Le=0,Ye=t;for(;isNaN(de);){if(Ye=Ye.parentElement,++Le>pe)return 0;de=u(Ye)}return de}function calculateResizeHostPercentageWidth(me,u=new Rect(me)){const t=calculateResizeHostAncestorWidth(me);return t?u.width/t*100:0}const TYPE_AROUND_SELECTION_ATTRIBUTE="widget-type-around";function isTypeAroundWidget(me,u,t){return!!me&&isWidget(me)&&!t.isInline(u)}function getClosestTypeAroundDomButton(me){return me.closest(".ck-widget__type-around__button")}function getTypeAroundButtonPosition(me){return me.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function getClosestWidgetViewElement(me,u){const t=me.closest(".ck-widget");return u.mapDomToView(t)}function getTypeAroundFakeCaretPosition(me){return me.getAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)}var returnIcon='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const POSSIBLE_INSERTION_POSITIONS=["before","after"],RETURN_ARROW_ICON_ELEMENT=new DOMParser().parseFromString(returnIcon,"image/svg+xml").firstChild,PLUGIN_DISABLED_EDITING_ROOT_CLASS="ck-widget__type-around_disabled";class WidgetTypeAround extends Plugin{constructor(){super(...arguments);wt(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const t=this.editor,de=t.editing.view;this.on("change:isEnabled",(pe,Le,Ye)=>{de.change(tt=>{for(const st of de.document.roots)Ye?tt.removeClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,st):tt.addClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,st)}),Ye||t.model.change(tt=>{tt.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,de){const pe=this.editor,Le=pe.editing.view,Ye=pe.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);pe.execute("insertParagraph",{position:pe.model.createPositionAt(t,de),attributes:Ye}),Le.focus(),Le.scrollToTheSelection()}_listenToIfEnabled(t,de,pe,Le){this.listenTo(t,de,(...Ye)=>{this.isEnabled&&pe(...Ye)},Le)}_insertParagraphAccordingToFakeCaretPosition(){const pe=this.editor.model.document.selection,Le=getTypeAroundFakeCaretPosition(pe);if(!Le)return!1;const Ye=pe.getSelectedElement();return this._insertParagraph(Ye,Le),!0}_enableTypeAroundUIInjection(){const t=this.editor,de=t.model.schema,pe=t.locale.t,Le={before:pe("Insert paragraph before block"),after:pe("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(Ye,tt,st)=>{const ht=st.mapper.toViewElement(tt.item);ht&&isTypeAroundWidget(ht,tt.item,de)&&(injectUIIntoWidget(st.writer,Le,ht),ht.getCustomProperty("widgetLabel").push(()=>this.isEnabled?pe("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,de=t.model,pe=de.document.selection,Le=de.schema,Ye=t.editing.view;this._listenToIfEnabled(Ye.document,"arrowKey",(st,ht)=>{this._handleArrowKeyPress(st,ht)},{context:[isWidget,"$text"],priority:"high"}),this._listenToIfEnabled(pe,"change:range",(st,ht)=>{ht.directChange&&t.model.change(mt=>{mt.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(de.document,"change:data",()=>{const st=pe.getSelectedElement();if(st){const ht=t.editing.mapper.toViewElement(st);if(isTypeAroundWidget(ht,st,Le))return}t.model.change(ht=>{ht.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(st,ht,mt)=>{const gt=mt.writer;if(this._currentFakeCaretModelElement){const Tt=mt.mapper.toViewElement(this._currentFakeCaretModelElement);Tt&&(gt.removeClass(POSSIBLE_INSERTION_POSITIONS.map(tt),Tt),this._currentFakeCaretModelElement=null)}const bt=ht.selection.getSelectedElement();if(!bt)return;const _t=mt.mapper.toViewElement(bt);if(!isTypeAroundWidget(_t,bt,Le))return;const vt=getTypeAroundFakeCaretPosition(ht.selection);vt&&(gt.addClass(tt(vt),_t),this._currentFakeCaretModelElement=bt)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(st,ht,mt)=>{mt||t.model.change(gt=>{gt.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})});function tt(st){return`ck-widget_type-around_show-fake-caret_${st}`}}_handleArrowKeyPress(t,de){const pe=this.editor,Le=pe.model,Ye=Le.document.selection,tt=Le.schema,st=pe.editing.view,ht=de.keyCode,mt=isForwardArrowKeyCode(ht,pe.locale.contentLanguageDirection),gt=st.document.selection.getSelectedElement(),bt=pe.editing.mapper.toModelElement(gt);let _t;isTypeAroundWidget(gt,bt,tt)?_t=this._handleArrowKeyPressOnSelectedWidget(mt):Ye.isCollapsed?_t=this._handleArrowKeyPressWhenSelectionNextToAWidget(mt):de.shiftKey||(_t=this._handleArrowKeyPressWhenNonCollapsedSelection(mt)),_t&&(de.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const pe=this.editor.model,Le=pe.document.selection,Ye=getTypeAroundFakeCaretPosition(Le);return pe.change(tt=>{if(Ye){if(!(Ye===(t?"after":"before")))return tt.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE),!0}else return tt.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const de=this.editor,pe=de.model,Le=pe.schema,Ye=de.plugins.get("Widget"),tt=Ye._getObjectElementNextToSelection(t),st=de.editing.mapper.toViewElement(tt);return isTypeAroundWidget(st,tt,Le)?(pe.change(ht=>{Ye._setSelectionOverElement(tt),ht.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(t){const de=this.editor,pe=de.model,Le=pe.schema,Ye=de.editing.mapper,tt=pe.document.selection,st=t?tt.getLastPosition().nodeBefore:tt.getFirstPosition().nodeAfter,ht=Ye.toViewElement(st);return isTypeAroundWidget(ht,st,Le)?(pe.change(mt=>{mt.setSelection(st,"on"),mt.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,de=t.editing.view;this._listenToIfEnabled(de.document,"mousedown",(pe,Le)=>{const Ye=getClosestTypeAroundDomButton(Le.domTarget);if(!Ye)return;const tt=getTypeAroundButtonPosition(Ye),st=getClosestWidgetViewElement(Ye,de.domConverter),ht=t.editing.mapper.toModelElement(st);this._insertParagraph(ht,tt),Le.preventDefault(),pe.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,de=t.model.document.selection,pe=t.editing.view;this._listenToIfEnabled(pe.document,"enter",(Le,Ye)=>{if(Le.eventPhase!="atTarget")return;const tt=de.getSelectedElement(),st=t.editing.mapper.toViewElement(tt),ht=t.model.schema;let mt;this._insertParagraphAccordingToFakeCaretPosition()?mt=!0:isTypeAroundWidget(st,tt,ht)&&(this._insertParagraph(tt,Ye.isSoft?"before":"after"),mt=!0),mt&&(Ye.preventDefault(),Le.stop())},{context:isWidget})}_enableInsertingParagraphsOnTypingKeystroke(){const de=this.editor.editing.view.document;this._listenToIfEnabled(de,"insertText",(pe,Le)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(Le.selection=de.selection)},{priority:"high"}),env.isAndroid?this._listenToIfEnabled(de,"keydown",(pe,Le)=>{Le.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(de,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const t=this.editor,de=t.editing.view,pe=t.model,Le=pe.schema;this._listenToIfEnabled(de.document,"delete",(Ye,tt)=>{if(Ye.eventPhase!="atTarget")return;const st=getTypeAroundFakeCaretPosition(pe.document.selection);if(!st)return;const ht=tt.direction,mt=pe.document.selection.getSelectedElement(),gt=st==="before",bt=ht=="forward";if(gt===bt)t.execute("delete",{selection:pe.createSelection(mt,"on")});else{const vt=Le.getNearestSelectionRange(pe.createPositionAt(mt,st),ht);if(vt)if(!vt.isCollapsed)pe.change(Tt=>{Tt.setSelection(vt),t.execute(bt?"deleteForward":"delete")});else{const Tt=pe.createSelection(vt.start);if(pe.modifySelection(Tt,{direction:ht}),!Tt.focus.isEqual(vt.start))pe.change(St=>{St.setSelection(vt),t.execute(bt?"deleteForward":"delete")});else{const St=getDeepestEmptyElementAncestor(Le,vt.start.parent);pe.deleteContent(pe.createSelection(St,"on"),{doNotAutoparagraph:!0})}}}tt.preventDefault(),Ye.stop()},{context:isWidget})}_enableInsertContentIntegration(){const t=this.editor,de=this.editor.model,pe=de.document.selection;this._listenToIfEnabled(t.model,"insertContent",(Le,[Ye,tt])=>{if(tt&&!tt.is("documentSelection"))return;const st=getTypeAroundFakeCaretPosition(pe);if(st)return Le.stop(),de.change(ht=>{const mt=pe.getSelectedElement(),gt=de.createPositionAt(mt,st),bt=ht.createSelection(gt),_t=de.insertContent(Ye,bt);return ht.setSelection(bt),_t})},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,pe=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(Le,Ye)=>{const[,tt,st={}]=Ye;if(tt&&!tt.is("documentSelection"))return;const ht=getTypeAroundFakeCaretPosition(pe);ht&&(st.findOptimalPosition=ht,Ye[3]=st)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,pe=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(Le,[Ye])=>{if(Ye&&!Ye.is("documentSelection"))return;getTypeAroundFakeCaretPosition(pe)&&Le.stop()},{priority:"high"})}}function injectUIIntoWidget(me,u,t){const de=me.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(pe){const Le=this.toDomElement(pe);return injectButtons(Le,u),injectFakeCaret(Le),Le});me.insert(me.createPositionAt(t,"end"),de)}function injectButtons(me,u){for(const t of POSSIBLE_INSERTION_POSITIONS){const de=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:u[t],"aria-hidden":"true"},children:[me.ownerDocument.importNode(RETURN_ARROW_ICON_ELEMENT,!0)]});me.appendChild(de.render())}}function injectFakeCaret(me){const u=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});me.appendChild(u.render())}function getDeepestEmptyElementAncestor(me,u){let t=u;for(const de of u.getAncestors({parentFirst:!0})){if(de.childCount>1||me.isLimit(de))break;t=de}return t}function verticalNavigationHandler(me){const u=me.model;return(t,de)=>{const pe=de.keyCode==keyCodes.arrowup,Le=de.keyCode==keyCodes.arrowdown,Ye=de.shiftKey,tt=u.document.selection;if(!pe&&!Le)return;const st=Le;if(Ye&&selectionWillShrink(tt,st))return;const ht=findTextRangeFromSelection(me,tt,st);if(ht){if(ht.isCollapsed){if(tt.isCollapsed)return;if(Ye)return}(ht.isCollapsed||isSingleLineRange(me,ht,st))&&(u.change(mt=>{const gt=st?ht.end:ht.start;if(Ye){const bt=u.createSelection(tt.anchor);bt.setFocus(gt),mt.setSelection(bt)}else mt.setSelection(gt)}),t.stop(),de.preventDefault(),de.stopPropagation())}}}function findTextRangeFromSelection(me,u,t){const de=me.model;if(t){const pe=u.isCollapsed?u.focus:u.getLastPosition(),Le=getNearestNonInlineLimit(de,pe,"forward");if(!Le)return null;const Ye=de.createRange(pe,Le),tt=getNearestTextPosition(de.schema,Ye,"backward");return tt?de.createRange(pe,tt):null}else{const pe=u.isCollapsed?u.focus:u.getFirstPosition(),Le=getNearestNonInlineLimit(de,pe,"backward");if(!Le)return null;const Ye=de.createRange(Le,pe),tt=getNearestTextPosition(de.schema,Ye,"forward");return tt?de.createRange(tt,pe):null}}function getNearestNonInlineLimit(me,u,t){const de=me.schema,pe=me.createRangeIn(u.root),Le=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:Ye,item:tt,type:st}of pe.getWalker({startPosition:u,direction:t})){if(de.isLimit(tt)&&!de.isInline(tt))return Ye;if(st==Le&&de.isBlock(tt))return null}return null}function getNearestTextPosition(me,u,t){const de=t=="backward"?u.end:u.start;if(me.checkChild(de,"$text"))return de;for(const{nextPosition:pe}of u.getWalker({direction:t}))if(me.checkChild(pe,"$text"))return pe;return null}function isSingleLineRange(me,u,t){const de=me.model,pe=me.view.domConverter;if(t){const ht=de.createSelection(u.start);de.modifySelection(ht),!ht.focus.isAtEnd&&!u.start.isEqual(ht.focus)&&(u=de.createRange(ht.focus,u.end))}const Le=me.mapper.toViewRange(u),Ye=pe.viewRangeToDom(Le),tt=Rect.getDomRangeRects(Ye);let st;for(const ht of tt){if(st===void 0){st=Math.round(ht.bottom);continue}if(Math.round(ht.top)>=st)return!1;st=Math.max(st,Math.round(ht.bottom))}return!0}function selectionWillShrink(me,u){return!me.isCollapsed&&me.isBackward==u}class Widget extends Plugin{constructor(){super(...arguments);wt(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[WidgetTypeAround,Delete]}init(){const t=this.editor,de=t.editing.view,pe=de.document,Le=t.t;this.editor.editing.downcastDispatcher.on("selection",(Ye,tt,st)=>{const ht=st.writer,mt=tt.selection;if(mt.isCollapsed)return;const gt=mt.getSelectedElement();if(!gt)return;const bt=t.editing.mapper.toViewElement(gt);isWidget(bt)&&st.consumable.consume(mt,"selection")&&ht.setSelection(ht.createRangeOn(bt),{fake:!0,label:getLabel(bt)})}),this.editor.editing.downcastDispatcher.on("selection",(Ye,tt,st)=>{this._clearPreviouslySelectedWidgets(st.writer);const ht=st.writer,mt=ht.document.selection;let gt=null;for(const bt of mt.getRanges())for(const _t of bt){const vt=_t.item;isWidget(vt)&&!isChild(vt,gt)&&(ht.addClass(WIDGET_SELECTED_CLASS_NAME,vt),this._previouslySelected.add(vt),gt=vt)}},{priority:"low"}),de.addObserver(MouseObserver),this.listenTo(pe,"mousedown",(...Ye)=>this._onMousedown(...Ye)),this.listenTo(pe,"arrowKey",(...Ye)=>{this._handleSelectionChangeOnArrowKeyPress(...Ye)},{context:[isWidget,"$text"]}),this.listenTo(pe,"arrowKey",(...Ye)=>{this._preventDefaultOnArrowKeyPress(...Ye)},{context:"$root"}),this.listenTo(pe,"arrowKey",verticalNavigationHandler(this.editor.editing),{context:"$text"}),this.listenTo(pe,"delete",(Ye,tt)=>{this._handleDelete(tt.direction=="forward")&&(tt.preventDefault(),Ye.stop())},{context:"$root"}),this.listenTo(pe,"tab",(Ye,tt)=>{Ye.eventPhase=="atTarget"&&(tt.shiftKey||this._selectFirstNestedEditable()&&(tt.preventDefault(),Ye.stop()))},{context:isWidget,priority:"low"}),this.listenTo(pe,"tab",(Ye,tt)=>{tt.shiftKey&&this._selectAncestorWidget()&&(tt.preventDefault(),Ye.stop())},{priority:"low"}),this.listenTo(pe,"keydown",(Ye,tt)=>{tt.keystroke==keyCodes.esc&&this._selectAncestorWidget()&&(tt.preventDefault(),Ye.stop())},{priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:Le("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:Le("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:Le("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:Le("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:Le("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:Le("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,de){const pe=this.editor,Le=pe.editing.view,Ye=Le.document;let tt=de.target;if(!tt)return;if(de.domEvent.detail>=3){this._selectBlockContent(tt)&&de.preventDefault();return}if(!isWidget(tt)){const ht=findClosestEditableOrWidgetAncestor(tt);if(!ht)return;if(isWidget(ht))tt=ht;else{const mt=getElementFromMouseEvent(Le,de);if(mt&&isWidget(mt))tt=mt;else return}}env.isAndroid&&de.preventDefault(),Ye.isFocused||Le.focus();const st=pe.editing.mapper.toModelElement(tt);this._setSelectionOverElement(st)}_selectBlockContent(t){const de=this.editor,pe=de.model,Le=de.editing.mapper,Ye=pe.schema,tt=Le.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),st=findTextBlockAncestor(Le.toModelElement(tt),pe.schema);return st?(pe.change(ht=>{const mt=Ye.isLimit(st)?null:findNextTextBlock(ht.createPositionAfter(st),Ye),gt=ht.createPositionAt(st,0),bt=mt?ht.createPositionAt(mt,0):ht.createPositionAt(st,"end");ht.setSelection(ht.createRange(gt,bt))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(t,de){const pe=de.keyCode,Le=this.editor.model,Ye=Le.schema,tt=Le.document.selection,st=tt.getSelectedElement(),ht=getLocalizedArrowKeyCodeDirection(pe,this.editor.locale.contentLanguageDirection),mt=ht=="down"||ht=="right",gt=ht=="up"||ht=="down";if(st&&Ye.isObject(st)){const _t=mt?tt.getLastPosition():tt.getFirstPosition(),vt=Ye.getNearestSelectionRange(_t,mt?"forward":"backward");vt&&(Le.change(Tt=>{Tt.setSelection(vt)}),de.preventDefault(),t.stop());return}if(!tt.isCollapsed&&!de.shiftKey){const _t=tt.getFirstPosition(),vt=tt.getLastPosition(),Tt=_t.nodeAfter,St=vt.nodeBefore;(Tt&&Ye.isObject(Tt)||St&&Ye.isObject(St))&&(Le.change(Rt=>{Rt.setSelection(mt?vt:_t)}),de.preventDefault(),t.stop());return}if(!tt.isCollapsed)return;const bt=this._getObjectElementNextToSelection(mt);if(bt&&Ye.isObject(bt)){if(Ye.isInline(bt)&&gt)return;this._setSelectionOverElement(bt),de.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,de){const pe=this.editor.model,Le=pe.schema,Ye=pe.document.selection.getSelectedElement();Ye&&Le.isObject(Ye)&&(de.preventDefault(),t.stop())}_handleDelete(t){const pe=this.editor.model.document.selection;if(!this.editor.model.canEditAt(pe)||!pe.isCollapsed)return;const Le=this._getObjectElementNextToSelection(t);if(Le)return this.editor.model.change(Ye=>{let tt=pe.anchor.parent;for(;tt.isEmpty;){const st=tt;tt=st.parent,Ye.remove(st)}this._setSelectionOverElement(Le)}),!0}_setSelectionOverElement(t){this.editor.model.change(de=>{de.setSelection(de.createRangeOn(t))})}_getObjectElementNextToSelection(t){const de=this.editor.model,pe=de.schema,Le=de.document.selection,Ye=de.createSelection(Le);if(de.modifySelection(Ye,{direction:t?"forward":"backward"}),Ye.isEqual(Le))return null;const tt=t?Ye.focus.nodeBefore:Ye.focus.nodeAfter;return tt&&pe.isObject(tt)?tt:null}_clearPreviouslySelectedWidgets(t){for(const de of this._previouslySelected)t.removeClass(WIDGET_SELECTED_CLASS_NAME,de);this._previouslySelected.clear()}_selectFirstNestedEditable(){const t=this.editor,pe=this.editor.editing.view.document;for(const Le of pe.selection.getFirstRange().getItems())if(Le.is("editableElement")){const Ye=t.editing.mapper.toModelElement(Le);/* istanbul ignore next -- @preserve */if(!Ye)continue;const tt=t.model.createPositionAt(Ye,0),st=t.model.schema.getNearestSelectionRange(tt,"forward");return t.model.change(ht=>{ht.setSelection(st)}),!0}return!1}_selectAncestorWidget(){const t=this.editor,de=t.editing.mapper,Le=t.editing.view.document.selection.getFirstPosition().parent,tt=(Le.is("$text")?Le.parent:Le).findAncestor(isWidget);if(!tt)return!1;const st=de.toModelElement(tt);/* istanbul ignore next -- @preserve */return st?(t.model.change(ht=>{ht.setSelection(st,"on")}),!0):!1}}function findClosestEditableOrWidgetAncestor(me){let u=me;for(;u;){if(u.is("editableElement")||isWidget(u))return u;u=u.parent}return null}function getElementFromMouseEvent(me,u){const t=getRangeFromMouseEvent(u.domEvent);let de=null;if(t?de=me.domConverter.domRangeToView(t):de=me.createRange(me.createPositionAt(u.target,0)),!de)return null;const pe=de.start;if(!pe.parent)return null;let Le=pe.parent;return pe.parent.is("editableElement")&&(pe.isAtEnd&&pe.nodeBefore?Le=pe.nodeBefore:pe.isAtStart&&pe.nodeAfter&&(Le=pe.nodeAfter)),Le.is("$text")?Le.parent:Le}function isChild(me,u){return u?Array.from(me.getAncestors()).includes(u):!1}function findTextBlockAncestor(me,u){for(const t of me.getAncestors({includeSelf:!0,parentFirst:!0})){if(u.checkChild(t,"$text"))return t;if(u.isLimit(t)&&!u.isObject(t))break}return null}function findNextTextBlock(me,u){const t=new TreeWalker({startPosition:me});for(const{item:de}of t){if(u.isLimit(de)||!de.is("element"))return null;if(u.checkChild(de,"$text"))return de}return null}class WidgetToolbarRepository extends Plugin{constructor(){super(...arguments);wt(this,"_toolbarDefinitions",new Map);wt(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const de=t.plugins.get("BalloonToolbar");this.listenTo(de,"show",pe=>{isWidgetSelected(t.editing.view.document.selection)&&pe.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:de,items:pe,getRelatedElement:Le,balloonClassName:Ye="ck-toolbar-container"}){if(!pe.length){logWarning("widget-toolbar-no-items",{toolbarId:t});return}const tt=this.editor,st=tt.t,ht=new ToolbarView(tt.locale);if(ht.ariaLabel=de||st("Widget toolbar"),this._toolbarDefinitions.has(t))throw new CKEditorError("widget-toolbar-duplicated",this,{toolbarId:t});const mt={view:ht,getRelatedElement:Le,balloonClassName:Ye,itemsConfig:pe,initialized:!1};tt.ui.addToolbar(ht,{isContextual:!0,beforeFocus:()=>{const gt=Le(tt.editing.view.document.selection);gt&&this._showToolbar(mt,gt)},afterBlur:()=>{this._hideToolbar(mt)}}),this._toolbarDefinitions.set(t,mt)}_updateToolbarsVisibility(){let t=0,de=null,pe=null;for(const Le of this._toolbarDefinitions.values()){const Ye=Le.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!Ye)this._isToolbarInBalloon(Le)&&this._hideToolbar(Le);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(Le)&&this._hideToolbar(Le);else{const tt=Ye.getAncestors().length;tt>t&&(t=tt,de=Ye,pe=Le)}}pe&&this._showToolbar(pe,de)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,de){this._isToolbarVisible(t)?repositionContextualBalloon$2(this.editor,de):this._isToolbarInBalloon(t)||(t.initialized||(t.initialized=!0,t.view.fillFromConfig(t.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:t.view,position:getBalloonPositionData$1(this.editor,de),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const pe of this._toolbarDefinitions.values())if(this._isToolbarVisible(pe)){const Le=pe.getRelatedElement(this.editor.editing.view.document.selection);repositionContextualBalloon$2(this.editor,Le)}}))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function repositionContextualBalloon$2(me,u){const t=me.plugins.get("ContextualBalloon"),de=getBalloonPositionData$1(me,u);t.updatePosition(de)}function getBalloonPositionData$1(me,u){const t=me.editing.view,de=BalloonPanelView.defaultPositions;return{target:t.domConverter.mapViewToDom(u),positions:[de.northArrowSouth,de.northArrowSouthWest,de.northArrowSouthEast,de.southArrowNorth,de.southArrowNorthWest,de.southArrowNorthEast,de.viewportStickyNorth]}}function isWidgetSelected(me){const u=me.getSelectedElement();return!!(u&&isWidget(u))}class ResizeState extends ObservableMixin(){constructor(t){super();wt(this,"_referenceCoordinates");wt(this,"_options");wt(this,"_originalWidth");wt(this,"_originalHeight");wt(this,"_originalWidthPercents");wt(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(t,de,pe){const Le=new Rect(de);this.activeHandlePosition=getHandlePosition(t),this._referenceCoordinates=getAbsoluteBoundaryPoint(de,getOppositePosition(this.activeHandlePosition)),this._originalWidth=Le.width,this._originalHeight=Le.height,this._aspectRatio=Le.width/Le.height;const Ye=pe.style.width;Ye&&Ye.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(Ye):this._originalWidthPercents=calculateResizeHostPercentageWidth(pe,Le)}update(t){this.proposedWidth=t.width,this.proposedHeight=t.height,this.proposedWidthPercents=t.widthPercents,this.proposedHandleHostWidth=t.handleHostWidth,this.proposedHandleHostHeight=t.handleHostHeight}}function getAbsoluteBoundaryPoint(me,u){const t=new Rect(me),de=u.split("-"),pe={x:de[1]=="right"?t.right:t.left,y:de[0]=="bottom"?t.bottom:t.top};return pe.x+=me.ownerDocument.defaultView.scrollX,pe.y+=me.ownerDocument.defaultView.scrollY,pe}function getResizerHandleClass(me){return`ck-widget__resizer__handle-${me}`}function getHandlePosition(me){const u=["top-left","top-right","bottom-right","bottom-left"];for(const t of u)if(me.classList.contains(getResizerHandleClass(t)))return t}function getOppositePosition(me){const u=me.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[u[0]]}-${t[u[1]]}`}class SizeView extends View{constructor(){super();const u=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",u.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:u.if("_isVisible","none",t=>!t)}},children:[{text:u.to("_label")}]})}_bindToState(u,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(de,pe)=>de!==null&&pe!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(de,pe,Le)=>u.unit==="px"?`${de}${pe}`:`${Le}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(de,pe,Le)=>pe<50||Le<50?"above-center":de)}_dismiss(){this.unbind(),this._isVisible=!1}}class Resizer extends ObservableMixin(){constructor(t){super();wt(this,"_state");wt(this,"_sizeView");wt(this,"_options");wt(this,"_viewResizerWrapper",null);wt(this,"_initialViewWidth");this._options=t,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(de,pe)=>de&&pe),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",de=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),de.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(de=>{de.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(de=>{de.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const t=this,de=this._options.viewElement;this._options.editor.editing.view.change(Le=>{const Ye=Le.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(tt){const st=this.toDomElement(tt);return t._appendHandles(st),t._appendSizeUI(st),st});Le.insert(Le.createPositionAt(de,"end"),Ye),Le.addClass("ck-widget_with-resizer",de),this._viewResizerWrapper=Ye,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(t){this._state=new ResizeState(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const de=this._proposeNewSize(t);this._options.editor.editing.view.change(mt=>{const gt=this._options.unit||"%",bt=(gt==="%"?de.widthPercents:de.width)+gt;mt.setStyle("width",bt,this._options.viewElement)});const Le=this._getHandleHost(),Ye=new Rect(Le),tt=Math.round(Ye.width),st=Math.round(Ye.height),ht=new Rect(Le);de.width=Math.round(ht.width),de.height=Math.round(ht.height),this.redraw(Ye),this.state.update({...de,handleHostWidth:tt,handleHostHeight:st})}commit(){const t=this._options.unit||"%",de=(t==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(de)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const de=this._domResizerWrapper;if(!existsInDom(de))return;const pe=de.parentElement,Le=this._getHandleHost(),Ye=this._viewResizerWrapper,tt=[Ye.getStyle("width"),Ye.getStyle("height"),Ye.getStyle("left"),Ye.getStyle("top")];let st;if(pe.isSameNode(Le)){const ht=t||new Rect(Le);st=[ht.width+"px",ht.height+"px",void 0,void 0]}else st=[Le.offsetWidth+"px",Le.offsetHeight+"px",Le.offsetLeft+"px",Le.offsetTop+"px"];compareArrays(tt,st)!=="same"&&this._options.editor.editing.view.change(ht=>{ht.setStyle({width:st[0],height:st[1],left:st[2],top:st[3]},Ye)})}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(de=>{de.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(t){const de=this.state,pe=extractCoordinates(t),Le=this._options.isCentered?this._options.isCentered(this):!0,Ye={x:de._referenceCoordinates.x-(pe.x+de.originalWidth),y:pe.y-de.originalHeight-de._referenceCoordinates.y};Le&&de.activeHandlePosition.endsWith("-right")&&(Ye.x=pe.x-(de._referenceCoordinates.x+de.originalWidth)),Le&&(Ye.x*=2);let tt=Math.abs(de.originalWidth+Ye.x),st=Math.abs(de.originalHeight+Ye.y);return(tt/de.aspectRatio>st?"width":"height")=="width"?st=tt/de.aspectRatio:tt=st*de.aspectRatio,{width:Math.round(tt),height:Math.round(st),widthPercents:Math.min(Math.round(de.originalWidthPercents/de.originalWidth*tt*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(t){const de=["top-left","top-right","bottom-right","bottom-left"];for(const pe of de)t.appendChild(new Template({tag:"div",attributes:{class:`ck-widget__resizer__handle ${getResizerClass(pe)}`}}).render())}_appendSizeUI(t){this._sizeView=new SizeView,this._sizeView.render(),t.appendChild(this._sizeView.element)}}function getResizerClass(me){return`ck-widget__resizer__handle-${me}`}function extractCoordinates(me){return{x:me.pageX,y:me.pageY}}function existsInDom(me){return me&&me.ownerDocument&&me.ownerDocument.contains(me)}class WidgetResize extends Plugin{constructor(){super(...arguments);wt(this,"_resizers",new Map);wt(this,"_observer");wt(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.editing,de=global$1.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),t.view.addObserver(MouseObserver),this._observer=new(DomEmitterMixin()),this.listenTo(t.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(de,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(de,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=throttle(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[Le,Ye]of this._resizers)Le.isAttached()||(this._resizers.delete(Le),Ye.destroy())},{priority:"lowest"}),this._observer.listenTo(global$1.window,"resize",this._redrawSelectedResizerThrottled);const pe=this.editor.editing.view.document.selection;pe.on("change",()=>{const Le=pe.getSelectedElement(),Ye=this.getResizerByViewElement(Le)||null;Ye?this.select(Ye):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const t of this._resizers.values())t.destroy();this._redrawSelectedResizerThrottled.cancel()}select(t){this.deselect(),this.selectedResizer=t,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(t){const de=new Resizer(t),pe=this.editor.plugins;if(de.attach(),pe.has("WidgetToolbarRepository")){const tt=pe.get("WidgetToolbarRepository");de.on("begin",()=>{tt.forceDisabled("resize")},{priority:"lowest"}),de.on("cancel",()=>{tt.clearForceDisabled("resize")},{priority:"highest"}),de.on("commit",()=>{tt.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(t.viewElement,de);const Ye=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(Ye)==de&&this.select(de),de}getResizerByViewElement(t){return this._resizers.get(t)}_getResizerByHandle(t){for(const de of this._resizers.values())if(de.containsHandle(t))return de}_mouseDownListener(t,de){const pe=de.domTarget;Resizer.isResizeHandle(pe)&&(this._activeResizer=this._getResizerByHandle(pe)||null,this._activeResizer&&(this._activeResizer.begin(pe),t.stop(),de.preventDefault()))}_mouseMoveListener(t,de){this._activeResizer&&this._activeResizer.updateSize(de)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BookmarkFormView extends View{constructor(t,de){super(t);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"idInputView");wt(this,"buttonView");wt(this,"children");wt(this,"_validators");wt(this,"_focusables",new ViewCollection);wt(this,"_focusCycler");const pe=t.t;this._validators=de,this.idInputView=this._createIdInput(),this.buttonView=this._createButton(pe("Insert"),"ck-button-action ck-button-bold"),this.buttonView.type="submit",this.children=this._createViewChildren(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const Le=["ck","ck-bookmark-view"];this.setTemplate({tag:"form",attributes:{class:Le,tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.idInputView,this.buttonView].forEach(de=>{this._focusables.add(de),this.focusTracker.add(de.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const de=t(this);if(de)return this.idInputView.errorText=de,!1}return!0}resetFormStatus(){this.idInputView.errorText=null}_createViewChildren(){const t=this.createCollection(),de=this.t;return t.add(new FormHeaderView(this.locale,{label:de("Bookmark")})),t.add(this._createFormContentView()),t}_createFormContentView(){const t=new View(this.locale),de=this.createCollection(),pe=["ck","ck-bookmark-form","ck-responsive-form"];return de.add(this.idInputView),de.add(this.buttonView),t.setTemplate({tag:"div",attributes:{class:pe},children:de}),t}_createIdInput(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputText);return de.label=t("Bookmark name"),de.infoText=t("Enter the bookmark name without spaces."),de}_createButton(t,de){const pe=new ButtonView(this.locale);return pe.set({label:t,withText:!0}),pe.extendTemplate({attributes:{class:de}}),pe}get id(){const{element:t}=this.idInputView.fieldView;return t?t.value.trim():null}}class BookmarkActionsView extends View{constructor(t){super(t);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"bookmarkPreviewView");wt(this,"removeButtonView");wt(this,"editButtonView");wt(this,"_focusables",new ViewCollection);wt(this,"_focusCycler");const de=t.t;this.bookmarkPreviewView=this._createBookmarkPreviewView(),this.removeButtonView=this._createButton(de("Remove bookmark"),icons.remove,"remove",this.bookmarkPreviewView),this.editButtonView=this._createButton(de("Edit bookmark"),icons.pencil,"edit",this.bookmarkPreviewView),this.set("id",void 0),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-bookmark-actions","ck-responsive-form"],tabindex:"-1"},children:[this.bookmarkPreviewView,this.editButtonView,this.removeButtonView]})}render(){super.render(),[this.editButtonView,this.removeButtonView].forEach(de=>{this._focusables.add(de),this.focusTracker.add(de.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(t,de,pe,Le){const Ye=new ButtonView(this.locale);return Ye.set({label:t,icon:de,tooltip:!0}),Ye.delegate("execute").to(this,pe),Ye.labelView.unbind("id"),Ye.labelView.bind("id").to(Ye,"ariaLabelledBy",tt=>getFirstToken(tt)),Ye.ariaLabelledBy=`${Ye.ariaLabelledBy} ${Le.id}`,Ye}_createBookmarkPreviewView(){const t=new LabelView(this.locale);return t.extendTemplate({attributes:{class:["ck","ck-bookmark-actions__preview"]}}),t.bind("text").to(this,"id"),t}}function getFirstToken(me){return me.split(" ")[0]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isBookmarkIdValid(me){return!(!me||typeof me!="string"||/\s/.test(me))}class InsertBookmarkCommand extends Command{refresh(){const t=this.editor.model.document.selection,de=this._getPositionToInsertBookmark(t);this.isEnabled=!!de}execute(u){if(!u)return;const{bookmarkId:t}=u;if(!isBookmarkIdValid(t)){logWarning("insert-bookmark-command-executed-with-invalid-name");return}const de=this.editor,pe=de.model,Le=pe.document.selection;pe.change(Ye=>{let tt=this._getPositionToInsertBookmark(Le);if(!pe.schema.checkChild(tt,"bookmark")){const mt=de.execute("insertParagraph",{position:tt});if(!mt)return;tt=mt}const ht=Ye.createElement("bookmark",{...Object.fromEntries(Le.getAttributes()),bookmarkId:t});pe.insertObject(ht,tt,null,{setSelection:"on"})})}_getPositionToInsertBookmark(u){const t=this.editor.model,de=t.schema,pe=u.getFirstRange(),Le=pe.start;if(isBookmarkAllowed(Le,de))return Le;for(const{previousPosition:Ye,item:tt}of pe){if(tt.is("element")&&de.checkChild(tt,"$text")&&isBookmarkAllowed(tt,de))return t.createPositionAt(tt,0);if(isBookmarkAllowed(Ye,de))return Ye}return null}}function isBookmarkAllowed(me,u){return u.checkChild(me,"bookmark")?!0:u.checkChild(me,"paragraph")?u.checkChild("paragraph","bookmark"):!1}class UpdateBookmarkCommand extends Command{refresh(){const t=this.editor.model.document.selection,de=getSelectedBookmark(t);this.isEnabled=!!de,this.value=de?de.getAttribute("bookmarkId"):void 0}execute(u){if(!u)return;const{bookmarkId:t}=u;if(!isBookmarkIdValid(t)){logWarning("update-bookmark-command-executed-with-invalid-name");return}const de=this.editor.model,pe=de.document.selection,Le=getSelectedBookmark(pe);Le&&de.change(Ye=>{Ye.setAttribute("bookmarkId",t,Le)})}}function getSelectedBookmark(me){const u=me.getSelectedElement();return u&&u.is("element","bookmark")?u:null}class BookmarkEditing extends Plugin{constructor(){super(...arguments);wt(this,"_bookmarkElements",new Map)}static get pluginName(){return"BookmarkEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:t}=this;this._defineSchema(),this._defineConverters(),t.commands.add("insertBookmark",new InsertBookmarkCommand(t)),t.commands.add("updateBookmark",new UpdateBookmarkCommand(t)),this.listenTo(t.model.document,"change:data",()=>{this._trackBookmarkElements()})}getElementForBookmarkId(t){for(const[de,pe]of this._bookmarkElements)if(pe==t)return de;return null}_defineSchema(){this.editor.model.schema.register("bookmark",{inheritAllFrom:"$inlineObject",allowAttributes:"bookmarkId",disallowAttributes:["linkHref","htmlA"]})}_defineConverters(){const{editor:t}=this,{conversion:de,t:pe}=t;t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(Le=>upcastMatcher(Le)),t.editing.view.domConverter.registerInlineObjectMatcher(Le=>upcastMatcher(Le,!1)),de.for("dataDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(Le,{writer:Ye})=>Ye.createEmptyElement("a",{id:Le.getAttribute("bookmarkId")})}),de.for("editingDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(Le,{writer:Ye})=>{const tt=Le.getAttribute("bookmarkId"),st=Ye.createContainerElement("a",{id:tt,class:"ck-bookmark"},[this._createBookmarkUIElement(Ye)]);return this._bookmarkElements.set(Le,tt),toWidget(st,Ye,{label:()=>`${tt} ${pe("bookmark widget")}`})}}),de.for("upcast").add(Le=>Le.on("element:a",dataViewModelAnchorInsertion(t)))}_createBookmarkUIElement(t){return t.createUIElement("span",{class:"ck-bookmark__icon"},function(de){const pe=this.toDomElement(de),Le=new IconView;return Le.set({content:icons.bookmarkInline,isColorInherited:!1}),Le.render(),pe.appendChild(Le.element),pe})}_trackBookmarkElements(){this._bookmarkElements.forEach((t,de)=>{de.root.rootName==="$graveyard"&&this._bookmarkElements.delete(de)})}}function upcastMatcher(me,u=!0){if(!(me.name==="a")||u&&!me.isEmpty)return null;const de=me.hasAttribute("id"),pe=me.hasAttribute("name"),Le=me.hasAttribute("href");return de&&!Le?{name:!0,attributes:["id"]}:pe&&!Le?{name:!0,attributes:["name"]}:null}function dataViewModelAnchorInsertion(me){return(u,t,de)=>{const pe=t.viewItem,Le=upcastMatcher(pe,!1);if(!Le||!de.consumable.test(pe,Le)||!isEnabledNonEmptyAnchorConversion(me)&&!pe.isEmpty)return;const tt=de.writer,st=pe.getAttribute("id"),ht=pe.getAttribute("name"),mt=st||ht,gt=tt.createElement("bookmark",{bookmarkId:mt});if(!de.safeInsert(gt,t.modelCursor))return;de.consumable.consume(pe,Le),st===ht&&de.consumable.consume(pe,{attributes:["name"]}),de.updateConversionResult(gt,t);const{modelCursor:bt,modelRange:_t}=de.convertChildren(pe,t.modelCursor);t.modelCursor=bt,t.modelRange=tt.createRange(t.modelRange.start,_t.end)}}function isEnabledNonEmptyAnchorConversion(me){const u=me.config.get("bookmark.enableNonEmptyAnchorConversion");return u!==void 0?u:!0}const VISUAL_SELECTION_MARKER_NAME$1="bookmark-ui";class BookmarkUI extends Plugin{constructor(){super(...arguments);wt(this,"actionsView",null);wt(this,"formView",null);wt(this,"_balloon")}static get requires(){return[BookmarkEditing,ContextualBalloon]}static get pluginName(){return"BookmarkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.editing.view.addObserver(ClickObserver),this._balloon=t.plugins.get(ContextualBalloon),this._createToolbarBookmarkButton(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME$1,view:{classes:["ck-fake-bookmark-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME$1,view:(de,{writer:pe})=>{if(!de.markerRange.isCollapsed)return null;const Le=pe.createUIElement("span");return pe.addClass(["ck-fake-bookmark-selection","ck-fake-bookmark-selection_collapsed"],Le),Le}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const t=this.editor,de=new BookmarkActionsView(t.locale),pe=t.commands.get("updateBookmark"),Le=t.commands.get("delete");return de.bind("id").to(pe,"value"),de.editButtonView.bind("isEnabled").to(pe),de.removeButtonView.bind("isEnabled").to(Le),this.listenTo(de,"edit",()=>{this._addFormView()}),this.listenTo(de,"remove",()=>{this._hideUI(),t.execute("delete")}),de.keystrokes.set("Esc",(Ye,tt)=>{this._hideUI(),tt()}),de}_createFormView(){const t=this.editor,de=t.locale,pe=t.commands.get("insertBookmark"),Le=t.commands.get("updateBookmark"),Ye=[pe,Le],tt=new(CssTransitionDisablerMixin(BookmarkFormView))(de,getFormValidators$3(t));return tt.idInputView.fieldView.bind("value").to(Le,"value"),tt.idInputView.bind("isEnabled").toMany(Ye,"isEnabled",(...st)=>st.some(ht=>ht)),tt.buttonView.bind("isEnabled").toMany(Ye,"isEnabled",(...st)=>st.some(ht=>ht)),this.listenTo(tt,"submit",()=>{if(tt.isValid()){const st=tt.id;this._getSelectedBookmarkElement()?t.execute("updateBookmark",{bookmarkId:st}):t.execute("insertBookmark",{bookmarkId:st}),this._closeFormView()}}),this.listenTo(tt.idInputView,"change:errorText",()=>{t.ui.update()}),tt.keystrokes.set("Esc",(st,ht)=>{this._closeFormView(),ht()}),tt}_createToolbarBookmarkButton(){const t=this.editor;t.ui.componentFactory.add("bookmark",()=>{const de=this._createButton(ButtonView);return de.set({tooltip:!0}),de}),t.ui.componentFactory.add("menuBar:bookmark",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(t){const de=this.editor,pe=de.locale,Le=new t(pe),Ye=de.commands.get("insertBookmark"),tt=de.commands.get("updateBookmark"),st=pe.t;return Le.set({label:st("Bookmark"),icon:icons.bookmark}),this.listenTo(Le,"execute",()=>this._showUI(!0)),Le.bind("isEnabled").toMany([Ye,tt],"isEnabled",(...ht)=>ht.some(mt=>mt)),Le.bind("isOn").to(tt,"value",ht=>!!ht),Le}_enableBalloonActivators(){const de=this.editor.editing.view.document;this.listenTo(de,"click",()=>{this._getSelectedBookmarkElement()&&this._showUI()})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,de)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),de())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,de)=>{this._isUIVisible&&(this._hideUI(),de())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_updateFormButtonLabel(t){const de=this.editor.locale.t;this.formView.buttonView.label=de(t?"Update":"Insert")}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const de=this.editor.commands.get("updateBookmark");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.idInputView.fieldView.value=de.value||"",this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){this.editor.commands.get("updateBookmark").value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.buttonView.focus(),this.formView.idInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedBookmarkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const t=this.editor,de=t.editing.view.document;let pe=this._getSelectedBookmarkElement(),Le=tt();this._updateFormButtonLabel(!!pe);const Ye=()=>{const st=this._getSelectedBookmarkElement(),ht=tt();pe&&!st||!pe&&ht!==Le?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),this._updateFormButtonLabel(!!pe),pe=st,Le=ht};function tt(){return de.selection.focus.getAncestors().reverse().find(st=>st.is("element"))}this.listenTo(t.ui,"update",Ye),this.listenTo(this._balloon,"change:visibleView",Ye)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const t=this._balloon.visibleView;return!!this.formView&&t==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,de=this.editor.model;let pe;const Le=this._getSelectedBookmarkElement();if(de.markers.has(VISUAL_SELECTION_MARKER_NAME$1)){const Ye=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME$1)),tt=t.createRange(t.createPositionBefore(Ye[0]),t.createPositionAfter(Ye[Ye.length-1]));pe=t.domConverter.viewRangeToDom(tt)}else Le&&(pe=()=>{const Ye=this.editor.editing.mapper,tt=t.domConverter,st=Ye.toViewElement(Le);return tt.mapViewToDom(st)});return pe&&{target:pe}}_getSelectedBookmarkElement(){const de=this.editor.model.document.selection.getSelectedElement();return de&&de.is("element","bookmark")?de:null}_showFakeVisualSelection(){const t=this.editor.model;t.change(de=>{const pe=t.document.selection.getFirstRange();if(t.markers.has(VISUAL_SELECTION_MARKER_NAME$1))de.updateMarker(VISUAL_SELECTION_MARKER_NAME$1,{range:pe});else if(pe.start.isAtEnd){const Le=pe.start.getLastMatchingPosition(({item:Ye})=>!t.schema.isContent(Ye),{boundaries:pe});de.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:de.createRange(Le,pe.end)})}else de.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:pe})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(VISUAL_SELECTION_MARKER_NAME$1)&&t.change(de=>{de.removeMarker(VISUAL_SELECTION_MARKER_NAME$1)})}}function getFormValidators$3(me){const{t:u}=me,t=me.plugins.get(BookmarkEditing);return[de=>{if(!de.id)return u("Bookmark must not be empty.")},de=>{if(de.id&&/\s/.test(de.id))return u("Bookmark name cannot contain space characters.")},de=>{const pe=me.model.document.selection.getSelectedElement(),Le=t.getElementForBookmarkId(de.id);if(pe!==Le&&Le)return u("Bookmark name already exists.")}]}class Bookmark extends Plugin{static get pluginName(){return"Bookmark"}static get requires(){return[BookmarkEditing,BookmarkUI,Widget]}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClipboardObserver extends DomEventObserver{constructor(t){super(t);wt(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const de=this.document;this.listenTo(de,"paste",pe("clipboardInput"),{priority:"low"}),this.listenTo(de,"drop",pe("clipboardInput"),{priority:"low"}),this.listenTo(de,"dragover",pe("dragging"),{priority:"low"});function pe(Le){return(Ye,tt)=>{tt.preventDefault();const st=tt.dropRange?[tt.dropRange]:null,ht=new EventInfo(de,Le);de.fire(ht,{dataTransfer:tt.dataTransfer,method:Ye.name,targetRanges:st,target:tt.target,domEvent:tt.domEvent}),ht.stop.called&&tt.stopPropagation()}}}onDomEvent(t){const de="clipboardData"in t?t.clipboardData:t.dataTransfer,pe=t.type=="drop"||t.type=="paste",Le={dataTransfer:new DataTransfer$1(de,{cacheFiles:pe})};if(t.type=="drop"||t.type=="dragover"){const Ye=getRangeFromMouseEvent(t);Le.dropRange=Ye&&this.view.domConverter.domRangeToView(Ye)}this.fire(t.type,t,Le)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function plainTextToHtml(me){return me=me.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(me.includes("</p><p>")||me.includes("<br>"))&&(me=`<p>${me}</p>`),me}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeClipboardData(me){return me.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(u,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const smallPaddingElements=["figcaption","li"],listElements=["ol","ul"];function viewToPlainText(me,u){if(u.is("$text")||u.is("$textProxy"))return u.data;if(u.is("element","img")&&u.hasAttribute("alt"))return u.getAttribute("alt");if(u.is("element","br"))return`
`;let t="",de=null;for(const pe of u.getChildren())t+=newLinePadding(pe,de)+viewToPlainText(me,pe),de=pe;if(u.is("rawElement")){const pe=document.createElement("div");u.render(pe,me),t+=domElementToPlainText(pe)}return t}function domElementToPlainText(me){let u="";if(me.nodeType===Node.TEXT_NODE)return me.textContent;if(me.tagName==="BR")return`
`;for(const t of me.childNodes)u+=domElementToPlainText(t);return u}function newLinePadding(me,u){return u?me.is("element","li")&&!me.isEmpty&&me.getChild(0).is("containerElement")||listElements.includes(me.name)&&listElements.includes(u.name)?`

`:!me.is("containerElement")&&!u.is("containerElement")?"":smallPaddingElements.includes(me.name)||smallPaddingElements.includes(u.name)?`
`:me.is("element")&&me.getCustomProperty("dataPipeline:transparentRendering")||u.is("element")&&u.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class ClipboardMarkersUtils extends Plugin{constructor(){super(...arguments);wt(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,de){this._markersToCopy.set(t,de)}_copySelectedFragmentWithMarkers(t,de,pe=Le=>Le.model.getSelectedContent(Le.model.document.selection)){return this.editor.model.change(Le=>{const Ye=Le.model.document.selection;Le.setSelection(de);const tt=this._insertFakeMarkersIntoSelection(Le,Le.model.document.selection,t),st=pe(Le),ht=this._removeFakeMarkersInsideElement(Le,st);for(const[mt,gt]of Object.entries(tt)){ht[mt]||(ht[mt]=Le.createRangeIn(st));for(const bt of gt)Le.remove(bt)}st.markers.clear();for(const[mt,gt]of Object.entries(ht))st.markers.set(mt,gt);return Le.setSelection(Ye),st})}_pasteMarkersIntoTransformedElement(t,de){const pe=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(Le=>{const Ye=this._insertFakeMarkersElements(Le,pe),tt=de(Le),st=this._removeFakeMarkersInsideElement(Le,tt);for(const ht of Object.values(Ye).flat())Le.remove(ht);for(const[ht,mt]of Object.entries(st))Le.model.markers.has(ht)||Le.addMarker(ht,{usingOperation:!0,affectsData:!0,range:mt});return tt})}_pasteFragmentWithMarkers(t){const de=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const pe of de)t.markers.set(pe.name,pe.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,de,pe={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const Le=this._markersToCopy.get(t);this._markersToCopy.set(t,pe),de(),Le?this._markersToCopy.set(t,Le):this._markersToCopy.delete(t)}_isMarkerCopyable(t,de){const pe=this._getMarkerClipboardConfig(t);if(!pe)return!1;if(!de)return!0;const{allowedActions:Le}=pe;return Le==="all"||Le.includes(de)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[de]=t.split(":");return this._markersToCopy.get(de)||null}_insertFakeMarkersIntoSelection(t,de,pe){const Le=this._getCopyableMarkersFromSelection(t,de,pe);return this._insertFakeMarkersElements(t,Le)}_getCopyableMarkersFromSelection(t,de,pe){const Le=Array.from(de.getRanges()),Ye=new Set(Le.flatMap(st=>Array.from(t.model.markers.getMarkersIntersectingRange(st)))),tt=st=>{if(!this._isMarkerCopyable(st.name,pe))return!1;const{copyPartiallySelected:mt}=this._getMarkerClipboardConfig(st.name);if(!mt){const gt=st.getRange();return Le.some(bt=>bt.containsRange(gt,!0))}return!0};return Array.from(Ye).filter(tt).map(st=>({name:pe==="dragstart"?this._getUniqueMarkerName(st.name):st.name,range:st.getRange()}))}_getPasteMarkersFromRangeMap(t,de=null){const{model:pe}=this.editor;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).flatMap(([Ye,tt])=>{if(!this._hasMarkerConfiguration(Ye))return[{name:Ye,range:tt}];if(this._isMarkerCopyable(Ye,de)){const st=this._getMarkerClipboardConfig(Ye),ht=pe.markers.has(Ye)&&pe.markers.get(Ye).getRange().root.rootName==="$graveyard";return(st.duplicateOnPaste||ht)&&(Ye=this._getUniqueMarkerName(Ye)),[{name:Ye,range:tt}]}return[]})}_insertFakeMarkersElements(t,de){const pe={},Le=de.flatMap(Ye=>{const{start:tt,end:st}=Ye.range;return[{position:tt,marker:Ye,type:"start"},{position:st,marker:Ye,type:"end"}]}).sort(({position:Ye},{position:tt})=>Ye.isBefore(tt)?1:-1);for(const{position:Ye,marker:tt,type:st}of Le){const ht=t.createElement("$marker",{"data-name":tt.name,"data-type":st});pe[tt.name]||(pe[tt.name]=[]),pe[tt.name].push(ht),t.insert(ht,Ye)}return pe}_removeFakeMarkersInsideElement(t,de){const Le=this._getAllFakeMarkersFromElement(t,de).reduce((Ye,tt)=>{const st=tt.markerElement&&t.createPositionBefore(tt.markerElement);let ht=Ye[tt.name],mt=!1;return ht&&ht.start&&ht.end&&(this._getMarkerClipboardConfig(tt.name).duplicateOnPaste?Ye[this._getUniqueMarkerName(tt.name)]=Ye[tt.name]:mt=!0,ht=null),mt||(Ye[tt.name]={...ht,[tt.type]:st}),tt.markerElement&&t.remove(tt.markerElement),Ye},{});return mapValues(Le,Ye=>new Range(Ye.start||t.createPositionFromPath(de,[0]),Ye.end||t.createPositionAt(de,"end")))}_getAllFakeMarkersFromElement(t,de){const pe=Array.from(t.createRangeIn(de)).flatMap(({item:tt})=>{if(!tt.is("element","$marker"))return[];const st=tt.getAttribute("data-name"),ht=tt.getAttribute("data-type");return[{markerElement:tt,name:st,type:ht}]}),Le=[],Ye=[];for(const tt of pe)tt.type==="end"&&(pe.some(ht=>ht.name===tt.name&&ht.type==="start")||Le.push({markerElement:null,name:tt.name,type:"start"})),tt.type==="start"&&(pe.some(ht=>ht.name===tt.name&&ht.type==="end")||Ye.unshift({markerElement:null,name:tt.name,type:"end"}));return[...Le,...pe,...Ye]}_getUniqueMarkerName(t){const de=t.split(":"),pe=uid().substring(1,6);return de.length===3?`${de.slice(0,2).join(":")}:${pe}`:`${de.join(":")}:${pe}`}}class ClipboardPipeline extends Plugin{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils]}init(){this.editor.editing.view.addObserver(ClipboardObserver),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(u,t,de){const pe=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:de==="cut"},()=>{const Le=pe._copySelectedFragmentWithMarkers(de,t);this.fire("outputTransformation",{dataTransfer:u,content:Le,method:de})})}_setupPasteDrop(){const u=this.editor,t=u.model,de=u.editing.view,pe=de.document,Le=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(pe,"clipboardInput",(Ye,tt)=>{tt.method=="paste"&&!u.model.canEditAt(u.model.document.selection)&&Ye.stop()},{priority:"highest"}),this.listenTo(pe,"clipboardInput",(Ye,tt)=>{const st=tt.dataTransfer;let ht;if(tt.content)ht=tt.content;else{let bt="";st.getData("text/html")?bt=normalizeClipboardData(st.getData("text/html")):st.getData("text/plain")&&(bt=plainTextToHtml(st.getData("text/plain"))),ht=this.editor.data.htmlProcessor.toView(bt)}const mt=new EventInfo(this,"inputTransformation"),gt=st.getData("application/ckeditor5-editor-id")||null;this.fire(mt,{content:ht,dataTransfer:st,sourceEditorId:gt,targetRanges:tt.targetRanges,method:tt.method}),mt.stop.called&&Ye.stop(),de.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(Ye,tt)=>{if(tt.content.isEmpty)return;const ht=this.editor.data.toModel(tt.content,"$clipboardHolder");ht.childCount!=0&&(Ye.stop(),t.change(()=>{this.fire("contentInsertion",{content:ht,method:tt.method,sourceEditorId:tt.sourceEditorId,dataTransfer:tt.dataTransfer,targetRanges:tt.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(Ye,tt)=>{tt.resultRange=Le._pasteFragmentWithMarkers(tt.content)},{priority:"low"})}_setupCopyCut(){const u=this.editor,t=u.model.document,pe=u.editing.view.document,Le=(Ye,tt)=>{const st=tt.dataTransfer;tt.preventDefault(),this._fireOutputTransformationEvent(st,t.selection,Ye.name)};this.listenTo(pe,"copy",Le,{priority:"low"}),this.listenTo(pe,"cut",(Ye,tt)=>{u.model.canEditAt(u.model.document.selection)?Le(Ye,tt):tt.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(Ye,tt)=>{const st=u.data.toView(tt.content,{isClipboardPipeline:!0});pe.fire("clipboardOutput",{dataTransfer:tt.dataTransfer,content:st,method:tt.method})},{priority:"low"}),this.listenTo(pe,"clipboardOutput",(Ye,tt)=>{tt.content.isEmpty||(tt.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(tt.content)),tt.dataTransfer.setData("text/plain",viewToPlainText(u.data.htmlProcessor.domConverter,tt.content)),tt.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),tt.method=="cut"&&u.model.deleteContent(t.selection)},{priority:"low"})}}const toPx$1=toUnit("px");class LineView extends View{constructor(){super();const u=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",u.if("isVisible","ck-hidden",t=>!t)],style:{left:u.to("left",t=>toPx$1(t)),top:u.to("top",t=>toPx$1(t)),width:u.to("width",t=>toPx$1(t))}}})}}class DragDropTarget extends Plugin{constructor(){super(...arguments);wt(this,"removeDropMarkerDelayed",delay(()=>this.removeDropMarker(),40));wt(this,"_updateDropMarkerThrottled",throttle(t=>this._updateDropMarker(t),40));wt(this,"_reconvertMarkerThrottled",throttle(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));wt(this,"_dropTargetLineView",new LineView);wt(this,"_domEmitter",new(DomEmitterMixin()));wt(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,de,pe,Le,Ye,tt){this.removeDropMarkerDelayed.cancel();const st=findDropTargetRange(this.editor,t,de,pe,Le,Ye,tt);/* istanbul ignore next -- @preserve */if(st){if(tt&&tt.containsRange(st))return this.removeDropMarker();this._updateDropMarkerThrottled(st)}}getFinalDropRange(t,de,pe,Le,Ye,tt){const st=findDropTargetRange(this.editor,t,de,pe,Le,Ye,tt);return this.removeDropMarker(),st}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(de=>{de.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(de,{writer:pe})=>{if(t.model.schema.checkChild(de.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(pe);de.markerRange.isCollapsed?this._updateDropTargetLine(de.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const de=this.editor,pe=de.model.markers;de.model.change(Le=>{pe.has("drop-target")?pe.get("drop-target").getRange().isEqual(t)||Le.updateMarker("drop-target",{range:t}):Le.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(de){const pe=this.toDomElement(de);return pe.append("",de.createElement("span"),""),pe})}_updateDropTargetLine(t){const de=this.editor.editing,pe=t.start.nodeBefore,Le=t.start.nodeAfter,Ye=t.start.parent,tt=pe?de.mapper.toViewElement(pe):null,st=tt?de.view.domConverter.mapViewToDom(tt):null,ht=Le?de.mapper.toViewElement(Le):null,mt=ht?de.view.domConverter.mapViewToDom(ht):null,gt=de.mapper.toViewElement(Ye);if(!gt)return;const bt=de.view.domConverter.mapViewToDom(gt),_t=this._getScrollableRect(gt),{scrollX:vt,scrollY:Tt}=global$1.window,St=st?new Rect(st):null,Rt=mt?new Rect(mt):null,Pt=new Rect(bt).excludeScrollbarsAndBorders(),Ot=St?St.bottom:Pt.top,Mt=Rt?Rt.top:Pt.bottom,Bt=global$1.window.getComputedStyle(bt),Dt=Ot<=Mt?(Ot+Mt)/2:Mt;if(_t.top<Dt&&Dt<_t.bottom){const $t=Pt.left+parseFloat(Bt.paddingLeft),kt=Pt.right-parseFloat(Bt.paddingRight),Et=Math.max($t+vt,_t.left),At=Math.min(kt+vt,_t.right);this._dropTargetLineView.set({isVisible:!0,left:Et,top:Dt+Tt,width:At-Et})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const de=t.root.rootName;let pe;if(this._scrollables.has(de))pe=this._scrollables.get(de).domElement;else{const Le=this.editor.editing.view.domConverter.mapViewToDom(t);pe=findScrollableElement(Le),this._domEmitter.listenTo(pe,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const Ye=new ResizeObserver$1(pe,this._reconvertMarkerThrottled);this._scrollables.set(de,{domElement:pe,resizeObserver:Ye})}return new Rect(pe).excludeScrollbarsAndBorders()}}function findDropTargetRange(me,u,t,de,pe,Le,Ye){const tt=me.model,st=me.editing.mapper;let mt=getClosestMappedModelElement(me,u);for(;mt;){if(!Le){if(tt.schema.checkChild(mt,"$text")){if(t){const gt=t[0].start,bt=st.toModelPosition(gt);if(!Ye||Array.from(Ye.getItems({shallow:!0})).every(vt=>tt.schema.checkChild(bt,vt))){if(tt.schema.checkChild(bt,"$text"))return tt.createRange(bt);if(gt)return findDropTargetRangeForElement(me,getClosestMappedModelElement(me,gt.parent),de,pe)}}}else if(tt.schema.isInline(mt))return findDropTargetRangeForElement(me,mt,de,pe)}if(tt.schema.isBlock(mt))return findDropTargetRangeForElement(me,mt,de,pe);if(tt.schema.checkChild(mt,"$block")){const gt=Array.from(mt.getChildren()).filter(vt=>vt.is("element")&&!shouldIgnoreElement(me,vt));let bt=0,_t=gt.length;if(_t==0)return tt.createRange(tt.createPositionAt(mt,"end"));for(;bt<_t-1;){const vt=Math.floor((bt+_t)/2);findElementSide(me,gt[vt],de,pe)=="before"?_t=vt:bt=vt}return findDropTargetRangeForElement(me,gt[bt],de,pe)}mt=mt.parent}return null}function shouldIgnoreElement(me,u){const t=me.editing.mapper,de=me.editing.view.domConverter,pe=t.toViewElement(u);if(!pe)return!0;const Le=de.mapViewToDom(pe);return global$1.window.getComputedStyle(Le).float!="none"}function findDropTargetRangeForElement(me,u,t,de){const pe=me.model;return pe.createRange(pe.createPositionAt(u,findElementSide(me,u,t,de)))}function findElementSide(me,u,t,de){const pe=me.editing.mapper,Le=me.editing.view.domConverter,Ye=pe.toViewElement(u),tt=Le.mapViewToDom(Ye),st=new Rect(tt);return me.model.schema.isInline(u)?t<(st.left+st.right)/2?"before":"after":de<(st.top+st.bottom)/2?"before":"after"}function getClosestMappedModelElement(me,u){const t=me.editing.mapper,de=me.editing.view,pe=t.toModelElement(u);if(pe)return pe;const Le=de.createPositionBefore(u),Ye=t.findMappedViewAncestor(Le);return t.toModelElement(Ye)}function findScrollableElement(me){let u=me;do{u=u.parentElement;const t=global$1.window.getComputedStyle(u).overflowY;if(t=="auto"||t=="scroll")break}while(u.tagName!="BODY");return u}class DragDropBlockToolbar extends Plugin{constructor(){super(...arguments);wt(this,"_isBlockDragging",!1);wt(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(de,pe,Le)=>{Le?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),env.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const pe=t.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(pe,"dragstart",(Le,Ye)=>this._handleBlockDragStart(Ye)),this._domEmitter.listenTo(global$1.document,"dragover",(Le,Ye)=>this._handleBlockDragging(Ye)),this._domEmitter.listenTo(global$1.document,"drop",(Le,Ye)=>this._handleBlockDragging(Ye)),this._domEmitter.listenTo(global$1.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&pe.setAttribute("draggable","true"),this.on("change:isEnabled",(Le,Ye,tt)=>{pe.setAttribute("draggable",tt?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const de=this.editor.model,pe=de.document.selection,Le=this.editor.editing.view,Ye=Array.from(pe.getSelectedBlocks()),tt=de.createRange(de.createPositionBefore(Ye[0]),de.createPositionAfter(Ye[Ye.length-1]));de.change(st=>st.setSelection(tt)),this._isBlockDragging=!0,Le.focus(),Le.getObserver(ClipboardObserver).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const de=t.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),pe=t.clientY,Le=document.elementFromPoint(de,pe),Ye=this.editor.editing.view;!Le||!Le.closest(".ck-editor__editable")||Ye.getObserver(ClipboardObserver).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:Le,clientX:de,clientY:pe,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class DragDrop extends Plugin{constructor(){super(...arguments);wt(this,"_draggedRange");wt(this,"_draggingUid");wt(this,"_draggableElement");wt(this,"_clearDraggableAttributesDelayed",delay(()=>this._clearDraggableAttributes(),40));wt(this,"_blockMode",!1);wt(this,"_domEmitter",new(DomEmitterMixin()));wt(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline,Widget,DragDropTarget,DragDropBlockToolbar]}init(){const t=this.editor,de=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,de.addObserver(ClipboardObserver),de.addObserver(MouseObserver),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(pe,Le,Ye)=>{Ye?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(pe,Le,Ye)=>{Ye||this._finalizeDragging(!1)}),env.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,de=t.model,pe=t.editing.view,Le=pe.document,Ye=t.plugins.get(DragDropTarget);this.listenTo(Le,"dragstart",(tt,st)=>{if(st.target&&st.target.is("editableElement")){st.preventDefault();return}if(this._prepareDraggedRange(st.target),!this._draggedRange){st.preventDefault();return}this._draggingUid=uid(),st.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",st.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const ht=de.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(st.dataTransfer,ht,"dragstart");const{dataTransfer:gt,domTarget:bt,domEvent:_t}=st,{clientX:vt}=_t;this._updatePreview({dataTransfer:gt,domTarget:bt,clientX:vt}),st.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(Le,"dragend",(tt,st)=>{this._finalizeDragging(!st.dataTransfer.isCanceled&&st.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(global$1.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(Le,"dragenter",()=>{this.isEnabled&&pe.focus()}),this.listenTo(Le,"dragleave",()=>{Ye.removeDropMarkerDelayed()}),this.listenTo(Le,"dragging",(tt,st)=>{if(!this.isEnabled){st.dataTransfer.dropEffect="none";return}const{clientX:ht,clientY:mt}=st.domEvent;Ye.updateDropMarker(st.target,st.targetRanges,ht,mt,this._blockMode,this._draggedRange),this._draggedRange||(st.dataTransfer.dropEffect="copy"),env.isGecko||(st.dataTransfer.effectAllowed=="copy"?st.dataTransfer.dropEffect="copy":["all","copyMove"].includes(st.dataTransfer.effectAllowed)&&(st.dataTransfer.dropEffect="move")),tt.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,pe=t.editing.view.document,Le=t.plugins.get(DragDropTarget);this.listenTo(pe,"clipboardInput",(Ye,tt)=>{if(tt.method!="drop")return;const{clientX:st,clientY:ht}=tt.domEvent,mt=Le.getFinalDropRange(tt.target,tt.targetRanges,st,ht,this._blockMode,this._draggedRange);if(!mt){this._finalizeDragging(!1),Ye.stop();return}if(this._draggedRange&&this._draggingUid!=tt.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),getFinalDropEffect(tt.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(mt,!0)){this._finalizeDragging(!1),Ye.stop();return}tt.targetRanges=[t.editing.mapper.toViewRange(mt)]},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(ClipboardPipeline);t.on("contentInsertion",(de,pe)=>{if(!this.isEnabled||pe.method!=="drop")return;const Le=pe.targetRanges.map(Ye=>this.editor.editing.mapper.toModelRange(Ye));this.editor.model.change(Ye=>Ye.setSelection(Le))},{priority:"high"}),t.on("contentInsertion",(de,pe)=>{if(!this.isEnabled||pe.method!=="drop")return;const Le=getFinalDropEffect(pe.dataTransfer)=="move",Ye=!pe.resultRange||!pe.resultRange.isCollapsed;this._finalizeDragging(Ye&&Le)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,de=t.editing.view,pe=de.document;this.listenTo(pe,"mousedown",(Le,Ye)=>{if(env.isAndroid||!Ye)return;this._clearDraggableAttributesDelayed.cancel();let tt=findDraggableWidget(Ye.target);if(env.isBlink&&!t.isReadOnly&&!tt&&!pe.selection.isCollapsed){const st=pe.selection.getSelectedElement();(!st||!isWidget(st))&&(tt=pe.selection.editableElement)}tt&&(de.change(st=>{st.setAttribute("draggable","true",tt)}),this._draggableElement=t.editing.mapper.toModelElement(tt))}),this.listenTo(pe,"mouseup",()=>{env.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(de=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&de.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const de=this.editor,pe=de.model;de.plugins.get(DragDropTarget).removeDropMarker(),this._clearDraggableAttributes(),de.plugins.has("WidgetToolbarRepository")&&de.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&pe.change(Ye=>{const tt=pe.createSelection(this._draggedRange);pe.deleteContent(tt,{doNotAutoparagraph:!0});const st=tt.getFirstPosition().parent;st.isEmpty&&!pe.schema.checkChild(st,"$text")&&pe.schema.checkChild(st,"paragraph")&&Ye.insertElement("paragraph",st,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const de=this.editor,pe=de.model,Le=pe.document.selection,Ye=t?findDraggableWidget(t):null;if(Ye){const mt=de.editing.mapper.toModelElement(Ye);this._draggedRange=LiveRange.fromRange(pe.createRangeOn(mt)),this._blockMode=pe.schema.isBlock(mt),de.plugins.has("WidgetToolbarRepository")&&de.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(Le.isCollapsed&&!Le.getFirstPosition().parent.isEmpty)return;const tt=Array.from(Le.getSelectedBlocks()),st=Le.getFirstRange();if(tt.length==0){this._draggedRange=LiveRange.fromRange(st);return}const ht=getRangeIncludingFullySelectedParents(pe,tt);if(tt.length>1)this._draggedRange=LiveRange.fromRange(ht),this._blockMode=!0;else if(tt.length==1){const mt=st.start.isTouching(ht.start)&&st.end.isTouching(ht.end);this._draggedRange=LiveRange.fromRange(mt?ht:st),this._blockMode=mt}pe.change(mt=>mt.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:de,clientX:pe}){const Le=this.editor.editing.view,Ye=Le.document.selection.editableElement,tt=Le.domConverter.mapViewToDom(Ye),st=global$1.window.getComputedStyle(tt);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=createElement(global$1.document,"div",{style:"position: fixed; left: -999999px;"}),global$1.document.body.appendChild(this._previewContainer));const ht=new Rect(tt);if(tt.contains(de))return;const mt=parseFloat(st.paddingLeft),gt=createElement(global$1.document,"div");gt.className="ck ck-content",gt.style.width=st.width,gt.style.paddingLeft=`${ht.left-pe+mt}px`,env.isiOS&&(gt.style.backgroundColor="white"),Le.domConverter.setContentOf(gt,t.getData("text/html")),t.setDragImage(gt,0,0),this._previewContainer.appendChild(gt)}}function getFinalDropEffect(me){return env.isGecko?me.dropEffect:["all","copyMove"].includes(me.effectAllowed)?"move":"copy"}function findDraggableWidget(me){if(me.is("editableElement"))return null;if(me.hasClass("ck-widget__selection-handle"))return me.findAncestor(isWidget);if(isWidget(me))return me;const u=me.findAncestor(t=>isWidget(t)||t.is("editableElement"));return isWidget(u)?u:null}function getRangeIncludingFullySelectedParents(me,u){const t=u[0],de=u[u.length-1],pe=t.getCommonAncestor(de),Le=me.createPositionBefore(t),Ye=me.createPositionAfter(de);if(pe&&pe.is("element")&&!me.schema.isLimit(pe)){const tt=me.createRangeOn(pe),st=Le.isTouching(tt.start),ht=Ye.isTouching(tt.end);if(st&&ht)return getRangeIncludingFullySelectedParents(me,[pe])}return me.createRange(Le,Ye)}class PastePlainText extends Plugin{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const u=this.editor,t=u.model,de=u.editing.view,pe=t.document.selection;de.addObserver(ClipboardObserver),u.plugins.get(ClipboardPipeline).on("contentInsertion",(Le,Ye)=>{isUnformattedInlineContent(Ye.content,t)&&t.change(tt=>{const st=Array.from(pe.getAttributes()).filter(([mt])=>t.schema.getAttributeProperties(mt).isFormatting);pe.isCollapsed||t.deleteContent(pe,{doNotAutoparagraph:!0}),st.push(...pe.getAttributes());const ht=tt.createRangeIn(Ye.content);for(const mt of ht.getItems())for(const gt of st)t.schema.checkAttribute(mt,gt[0])&&tt.setAttribute(gt[0],gt[1],mt)})})}}function isUnformattedInlineContent(me,u){let t=u.createRangeIn(me);if(me.childCount==1){const de=me.getChild(0);de.is("element")&&u.schema.isBlock(de)&&!u.schema.isObject(de)&&!u.schema.isLimit(de)&&(t=u.createRangeIn(de))}for(const de of t.getItems())if(!u.schema.isInline(de)||Array.from(de.getAttributeKeys()).find(Le=>u.schema.getAttributeProperties(Le).isFormatting))return!1;return!0}class Clipboard extends Plugin{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,DragDrop,PastePlainText]}init(){const u=this.editor,t=this.editor.t;u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DEFAULT_OPTIONS$1={autoRefresh:!0},DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME=36e5,TOKEN_FAILED_REFRESH_TIMEOUT_TIME=5e3;class Token extends ObservableMixin(){constructor(t,de={}){super();wt(this,"_refresh");wt(this,"_options");wt(this,"_tokenRefreshTimeout");wt(this,"_isDestroyed",!1);if(!t)throw new CKEditorError("token-missing-token-url",this);de.initValue&&this._validateTokenValue(de.initValue),this.set("value",de.initValue),typeof t=="function"?this._refresh=t:this._refresh=()=>defaultRefreshToken(t),this._options={...DEFAULT_OPTIONS$1,...de}}init(){return new Promise((t,de)=>{if(!this.value){this.refreshToken().then(t).catch(de);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),t(this)})}refreshToken(){const t=this._options.autoRefresh;return this._refresh().then(de=>(this._validateTokenValue(de),this.set("value",de),t&&this._registerRefreshTokenTimeout(),this)).catch(de=>{throw logWarning("token-refresh-failed",{autoRefresh:t}),t&&this._registerRefreshTokenTimeout(TOKEN_FAILED_REFRESH_TIMEOUT_TIME),de})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(t){const de=typeof t=="string",pe=!/^".*"$/.test(t),Le=de&&t.split(".").length===3;if(!(pe&&Le))throw new CKEditorError("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(t){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const de=t||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},de)}_getTokenRefreshTimeoutTime(){try{const[,t]=this.value.split("."),{exp:de}=JSON.parse(atob(t));return de?Math.floor((de*1e3-Date.now())/2):DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME}catch{return DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME}}static create(t,de={}){return new Token(t,de).init()}}function defaultRefreshToken(me){return new Promise((u,t)=>{const de=new XMLHttpRequest;de.open("GET",me),de.addEventListener("load",()=>{const pe=de.status,Le=de.response;return pe<200||pe>299?t(new CKEditorError("token-cannot-download-new-token",null)):u(Le)}),de.addEventListener("error",()=>t(new Error("Network Error"))),de.addEventListener("abort",()=>t(new Error("Abort"))),de.send()})}const BASE64_HEADER_REG_EXP=/^data:(\S*?);base64,/;class FileUploader extends EmitterMixin(){constructor(t,de,pe){super();wt(this,"file");wt(this,"xhr");wt(this,"_token");wt(this,"_apiAddress");if(!t)throw new CKEditorError("fileuploader-missing-file",null);if(!de)throw new CKEditorError("fileuploader-missing-token",null);if(!pe)throw new CKEditorError("fileuploader-missing-api-address",null);this.file=_isBase64(t)?_base64ToBlob(t):t,this._token=de,this._apiAddress=pe}onProgress(t){return this.on("progress",(de,pe)=>t(pe)),this}onError(t){return this.once("error",(de,pe)=>t(pe)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t}_attachXHRListeners(){const t=this.xhr,de=pe=>()=>this.fire("error",pe);t.addEventListener("error",de("Network Error")),t.addEventListener("abort",de("Abort"));/* istanbul ignore else -- @preserve */t.upload&&t.upload.addEventListener("progress",pe=>{pe.lengthComputable&&this.fire("progress",{total:pe.total,uploaded:pe.loaded})}),t.addEventListener("load",()=>{const pe=t.status,Le=t.response;if(pe<200||pe>299)return this.fire("error",Le.message||Le.error)})}_sendRequest(){const t=new FormData,de=this.xhr;return t.append("file",this.file),new Promise((pe,Le)=>{de.addEventListener("load",()=>{const Ye=de.status,tt=de.response;return Ye<200||Ye>299?tt.message?Le(new CKEditorError("fileuploader-uploading-data-failed",this,{message:tt.message})):Le(tt.error):pe(tt)}),de.addEventListener("error",()=>Le(new Error("Network Error"))),de.addEventListener("abort",()=>Le(new Error("Abort"))),de.send(t)})}}function _base64ToBlob(me,u=512){try{const t=me.match(BASE64_HEADER_REG_EXP)[1],de=atob(me.replace(BASE64_HEADER_REG_EXP,"")),pe=[];for(let Le=0;Le<de.length;Le+=u){const Ye=de.slice(Le,Le+u),tt=new Array(Ye.length);for(let st=0;st<Ye.length;st++)tt[st]=Ye.charCodeAt(st);pe.push(new Uint8Array(tt))}return new Blob(pe,{type:t})}catch{throw new CKEditorError("fileuploader-decoding-image-data-error",null)}}function _isBase64(me){if(typeof me!="string")return!1;const u=me.match(BASE64_HEADER_REG_EXP);return!!(u&&u.length)}class UploadGateway{constructor(u,t){wt(this,"_token");wt(this,"_apiAddress");if(!u)throw new CKEditorError("uploadgateway-missing-token",null);if(!t)throw new CKEditorError("uploadgateway-missing-api-address",null);this._token=u,this._apiAddress=t}upload(u){return new FileUploader(u,this._token,this._apiAddress)}}class CloudServicesCore extends ContextPlugin{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(u,t){return new Token(u,t)}createUploadGateway(u,t){return new UploadGateway(u,t)}}class CloudServices extends ContextPlugin{constructor(){super(...arguments);wt(this,"tokenUrl");wt(this,"uploadUrl");wt(this,"webSocketUrl");wt(this,"bundleVersion");wt(this,"token",null);wt(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[CloudServicesCore]}async init(){const de=this.context.config.get("cloudServices")||{};for(const[Ye,tt]of Object.entries(de))this[Ye]=tt;if(!this.tokenUrl){this.token=null;return}const Le=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await Le.init(),this._tokens.set(this.tokenUrl,this.token)}catch(Ye){throw Le.destroy(),Ye}}async registerTokenUrl(t){if(this._tokens.has(t))return this.getTokenFor(t);const pe=await this.context.plugins.get("CloudServicesCore").createToken(t).init();return this._tokens.set(t,pe),pe}getTokenFor(t){const de=this._tokens.get(t);if(!de)throw new CKEditorError("cloudservices-token-not-registered",this);return de}destroy(){super.destroy();for(const t of this._tokens.values())t.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getNormalizedAndLocalizedLanguageDefinitions(me){const u=me.t,t=me.config.get("codeBlock.languages");for(const de of t)de.label==="Plain text"&&(de.label=u("Plain text")),de.class===void 0&&(de.class=`language-${de.language}`);return t}function getPropertyAssociation(me,u,t){const de={};for(const pe of me)if(u==="class"){const Le=pe[u].split(" ").shift();de[Le]=pe[t]}else de[pe[u]]=pe[t];return de}function getLeadingWhiteSpaces(me){return me.data.match(/^(\s*)/)[0]}function rawSnippetTextToViewDocumentFragment(me,u){const t=me.createDocumentFragment(),de=u.split(`
`),pe=de.reduce((Le,Ye,tt)=>(Le.push(Ye),tt<de.length-1&&Le.push(me.createElement("br")),Le),[]);return me.appendChild(pe,t),t}function getIndentOutdentPositions(me){const u=me.document.selection,t=[];if(u.isCollapsed)return[u.anchor];const de=u.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:pe}of de){let Le=pe.is("$textProxy")?pe.textNode:pe;const Ye=Le.parent;if(!Ye.is("element","codeBlock")||Le.is("element","softBreak"))continue;for(;Le.previousSibling&&!Le.previousSibling.is("element","softBreak");)Le=Le.previousSibling;const tt=Le.is("$text")?Le.startOffset+getLeadingWhiteSpaces(Le).length:Le.startOffset,st=me.createPositionAt(Ye,tt);t.every(ht=>!ht.isEqual(st))&&t.push(st)}return t}function isModelSelectionInCodeBlock(me){const u=first(me.getSelectedBlocks());return!!u&&u.is("element","codeBlock")}function canBeCodeBlock(me,u){return u.is("rootElement")||me.isLimit(u)?!1:me.checkChild(u.parent,"codeBlock")}function getCodeBlockAriaAnnouncement(me,u,t,de){const pe=getPropertyAssociation(u,"language","label"),Le=t.getAttribute("language");if(Le in pe){const Ye=pe[Le];return me(de==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",Ye)}return me(de==="enter"?"Entering code snippet":"Leaving code snippet")}function getTextNodeAtLineStart(me,u){for(me.textNode&&(me=u.createPositionBefore(me.textNode));me.nodeBefore&&!me.nodeBefore.is("element","softBreak");)me=u.createPositionBefore(me.nodeBefore);const t=me.nodeAfter;return t&&t.is("$text")?t:null}class CodeBlockCommand extends Command{constructor(t){super(t);wt(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const de=this.editor,pe=de.model,Le=pe.document.selection,tt=getNormalizedAndLocalizedLanguageDefinitions(de)[0],st=Array.from(Le.getSelectedBlocks()),ht=t.forceValue==null?!this.value:t.forceValue,mt=getLanguage(t,this._lastLanguage,tt.language);pe.change(gt=>{ht?this._applyCodeBlock(gt,st,mt):this._removeCodeBlock(gt,st)})}_getValue(){const t=this.editor.model.document.selection,de=first(t.getSelectedBlocks());return!!(de&&de.is("element","codeBlock"))?de.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,de=this.editor.model.schema,pe=first(t.getSelectedBlocks());return pe?canBeCodeBlock(de,pe):!1}_applyCodeBlock(t,de,pe){this._lastLanguage=pe;const Le=this.editor.model.schema,Ye=de.filter(tt=>canBeCodeBlock(Le,tt));for(const tt of Ye)t.rename(tt,"codeBlock"),t.setAttribute("language",pe,tt),Le.removeDisallowedAttributes([tt],t),Array.from(tt.getChildren()).filter(st=>!Le.checkChild(tt,st)).forEach(st=>t.remove(st));Ye.reverse().forEach((tt,st)=>{const ht=Ye[st+1];tt.previousSibling===ht&&(t.appendElement("softBreak",ht),t.merge(t.createPositionBefore(tt)))})}_removeCodeBlock(t,de){const pe=de.filter(Le=>Le.is("element","codeBlock"));for(const Le of pe){const Ye=t.createRangeOn(Le);for(const tt of Array.from(Ye.getItems()).reverse())if(tt.is("element","softBreak")&&tt.parent.is("element","codeBlock")){const{position:st}=t.split(t.createPositionBefore(tt)),ht=st.nodeAfter;t.rename(ht,"paragraph"),t.removeAttribute("language",ht),t.remove(tt)}t.rename(Le,"paragraph"),t.removeAttribute("language",Le)}}}function getLanguage(me,u,t){return me.language?me.language:me.usePreviousLanguageChoice&&u?u:t}class IndentCodeBlockCommand extends Command{constructor(t){super(t);wt(this,"_indentSequence");this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const de=this.editor.model;de.change(pe=>{const Le=getIndentOutdentPositions(de);for(const Ye of Le){const tt=pe.createText(this._indentSequence);de.insertContent(tt,Ye)}})}_checkEnabled(){return this._indentSequence?isModelSelectionInCodeBlock(this.editor.model.document.selection):!1}}class OutdentCodeBlockCommand extends Command{constructor(t){super(t);wt(this,"_indentSequence");this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const de=this.editor.model;de.change(()=>{const pe=getIndentOutdentPositions(de);for(const Le of pe){const Ye=getLastOutdentableSequenceRange(de,Le,this._indentSequence);Ye&&de.deleteContent(de.createSelection(Ye))}})}_checkEnabled(){if(!this._indentSequence)return!1;const t=this.editor.model;return isModelSelectionInCodeBlock(t.document.selection)?getIndentOutdentPositions(t).some(de=>getLastOutdentableSequenceRange(t,de,this._indentSequence)):!1}}function getLastOutdentableSequenceRange(me,u,t){const de=getTextNodeAtLineStart(u,me);if(!de)return null;const pe=getLeadingWhiteSpaces(de),Le=pe.lastIndexOf(t);if(Le+t.length!==pe.length||Le===-1)return null;const{parent:Ye,startOffset:tt}=de;return me.createRange(me.createPositionAt(Ye,tt+Le),me.createPositionAt(Ye,tt+Le+t.length))}function modelToViewCodeBlockInsertion(me,u,t=!1){const de=getPropertyAssociation(u,"language","class"),pe=getPropertyAssociation(u,"language","label");return(Le,Ye,tt)=>{const{writer:st,mapper:ht,consumable:mt}=tt;if(!mt.consume(Ye.item,"insert"))return;const gt=Ye.item.getAttribute("language"),bt=ht.toViewPosition(me.createPositionBefore(Ye.item)),_t={};t&&(_t["data-language"]=pe[gt],_t.spellcheck="false");const vt=de[gt]?{class:de[gt]}:void 0,Tt=st.createContainerElement("code",vt),St=st.createContainerElement("pre",_t,Tt);st.insert(bt,St),ht.bindElements(Ye.item,Tt)}}function modelToDataViewSoftBreakInsertion(me){return(u,t,de)=>{if(t.item.parent.name!=="codeBlock")return;const{writer:pe,mapper:Le,consumable:Ye}=de;if(!Ye.consume(t.item,"insert"))return;const tt=Le.toViewPosition(me.createPositionBefore(t.item));pe.insert(tt,pe.createText(`
`))}}function dataViewToModelCodeBlockInsertion(me,u){const t=getPropertyAssociation(u,"class","language"),de=u[0].language;return(pe,Le,Ye)=>{const tt=Le.viewItem,st=tt.parent;if(!st||!st.is("element","pre")||Le.modelCursor.findAncestor("codeBlock"))return;const{consumable:ht,writer:mt}=Ye;if(!ht.test(tt,{name:!0}))return;const gt=mt.createElement("codeBlock"),bt=[...tt.getClassNames()];bt.length||bt.push("");for(const _t of bt){const vt=t[_t];if(vt){mt.setAttribute("language",vt,gt);break}}gt.hasAttribute("language")||mt.setAttribute("language",de,gt),Ye.convertChildren(tt,gt),Ye.safeInsert(gt,Le.modelCursor)&&(ht.consume(tt,{name:!0}),Ye.updateConversionResult(gt,Le))}}function dataViewToModelTextNewlinesInsertion(){return(me,u,{consumable:t,writer:de})=>{let pe=u.modelCursor;if(!t.test(u.viewItem)||!pe.findAncestor("codeBlock"))return;t.consume(u.viewItem);const Ye=u.viewItem.data.split(`
`).map(st=>de.createText(st)),tt=Ye[Ye.length-1];for(const st of Ye)if(de.insert(st,pe),pe=pe.getShiftedBy(st.offsetSize),st!==tt){const ht=de.createElement("softBreak");de.insert(ht,pe),pe=de.createPositionAfter(ht)}u.modelRange=de.createRange(u.modelCursor,pe),u.modelCursor=pe}}function dataViewToModelOrphanNodeConsumer(){return(me,u,{consumable:t})=>{const de=u.viewItem;if(de.findAncestor("pre"))return;const pe=Array.from(de.getChildren()),Le=pe.find(Ye=>Ye.is("element","code"));if(Le)for(const Ye of pe)Ye===Le||!Ye.is("$text")||t.consume(Ye,{name:!0})}}const DEFAULT_ELEMENT="paragraph";class CodeBlockEditing extends Plugin{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ShiftEnter]}constructor(u){super(u),u.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const u=this.editor,t=u.model.schema,de=u.model,pe=u.editing.view,Le=getNormalizedAndLocalizedLanguageDefinitions(u);u.commands.add("codeBlock",new CodeBlockCommand(u)),u.commands.add("indentCodeBlock",new IndentCodeBlockCommand(u)),u.commands.add("outdentCodeBlock",new OutdentCodeBlockCommand(u)),this.listenTo(pe.document,"tab",(Ye,tt)=>{const st=tt.shiftKey?"outdentCodeBlock":"indentCodeBlock";u.commands.get(st).isEnabled&&(u.execute(st),tt.stopPropagation(),tt.preventDefault(),Ye.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((Ye,tt)=>{const st=Ye.getItem(Ye.length-2);if(t.getAttributeProperties(tt).isFormatting&&st&&st.name=="codeBlock")return!1}),u.editing.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(de,Le,!0)),u.data.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(de,Le)),u.data.downcastDispatcher.on("insert:softBreak",modelToDataViewSoftBreakInsertion(de),{priority:"high"}),u.data.upcastDispatcher.on("element:code",dataViewToModelCodeBlockInsertion(pe,Le)),u.data.upcastDispatcher.on("text",dataViewToModelTextNewlinesInsertion()),u.data.upcastDispatcher.on("element:pre",dataViewToModelOrphanNodeConsumer(),{priority:"high"}),this.listenTo(u.editing.view.document,"clipboardInput",(Ye,tt)=>{let st=de.createRange(de.document.selection.anchor);if(tt.targetRanges&&(st=u.editing.mapper.toModelRange(tt.targetRanges[0])),!st.start.parent.is("element","codeBlock"))return;const ht=tt.dataTransfer.getData("text/plain"),mt=new UpcastWriter(u.editing.view.document);tt.content=rawSnippetTextToViewDocumentFragment(mt,ht)}),u.plugins.has("ClipboardPipeline")&&u.plugins.get(ClipboardPipeline).on("contentInsertion",(Ye,tt)=>{const st=u.model,ht=st.document.selection;ht.anchor.parent.is("element","codeBlock")&&st.change(mt=>{const gt=mt.createRangeIn(tt.content);for(const bt of[...gt.getItems()])bt.is("node")&&!t.checkChild(ht.anchor,bt)&&mt.remove(bt)})}),this.listenTo(de,"getSelectedContent",(Ye,[tt])=>{const st=tt.anchor;tt.isCollapsed||!st.parent.is("element","codeBlock")||!st.hasSameParentAs(tt.focus)||de.change(ht=>{const mt=Ye.return;if(st.parent.is("element")&&(mt.childCount>1||tt.containsEntireContent(st.parent))){const bt=ht.createElement("codeBlock",st.parent.getAttributes());ht.append(mt,bt);const _t=ht.createDocumentFragment();ht.append(bt,_t),Ye.return=_t;return}const gt=mt.getChild(0);t.checkAttribute(gt,"code")&&ht.setAttribute("code",!0,gt)})})}afterInit(){const u=this.editor,t=u.commands,de=t.get("indent"),pe=t.get("outdent");de&&de.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),pe&&pe.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(u.editing.view.document,"enter",(Le,Ye)=>{u.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!leaveBlockStartOnEnter(u,Ye.isSoft)&&!leaveBlockEndOnEnter(u,Ye.isSoft)&&breakLineOnEnter(u),Ye.preventDefault(),Le.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:u,ui:t,t:de}=this.editor,pe=getNormalizedAndLocalizedLanguageDefinitions(this.editor);let Le=null;u.document.selection.on("change:range",()=>{const Ye=u.document.selection.focus.parent;!t||Le===Ye||!Ye.is("element")||(Le&&Le.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(de,pe,Le,"leave")),Ye.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(de,pe,Ye,"enter")),Le=Ye)})}}function breakLineOnEnter(me){const u=me.model,t=u.document,de=t.selection.getLastPosition();let pe;const Le=getTextNodeAtLineStart(de,u);Le&&Le.is("$text")&&(pe=getLeadingWhiteSpaces(Le)),me.model.change(Ye=>{me.execute("shiftEnter"),pe&&Ye.insertText(pe,t.selection.anchor)})}function leaveBlockStartOnEnter(me,u){const de=me.model.document,pe=me.editing.view,Le=de.selection.getLastPosition(),Ye=Le.nodeAfter;return u||!de.selection.isCollapsed||!Le.isAtStart||!isSoftBreakNode(Ye)?!1:(me.model.change(tt=>{me.execute("enter");const st=de.selection.anchor.parent.previousSibling;tt.rename(st,DEFAULT_ELEMENT),tt.setSelection(st,"in"),me.model.schema.removeDisallowedAttributes([st],tt),tt.remove(Ye)}),pe.scrollToTheSelection(),!0)}function leaveBlockEndOnEnter(me,u){const t=me.model,de=t.document,pe=me.editing.view,Le=de.selection.getLastPosition(),Ye=Le.nodeBefore;let tt;if(u||!de.selection.isCollapsed||!Le.isAtEnd||!Ye||!Ye.previousSibling)return!1;if(isSoftBreakNode(Ye)&&isSoftBreakNode(Ye.previousSibling))tt=t.createRange(t.createPositionBefore(Ye.previousSibling),t.createPositionAfter(Ye));else if(isEmptyishTextNode(Ye)&&isSoftBreakNode(Ye.previousSibling)&&isSoftBreakNode(Ye.previousSibling.previousSibling))tt=t.createRange(t.createPositionBefore(Ye.previousSibling.previousSibling),t.createPositionAfter(Ye));else if(isEmptyishTextNode(Ye)&&isSoftBreakNode(Ye.previousSibling)&&isEmptyishTextNode(Ye.previousSibling.previousSibling)&&Ye.previousSibling.previousSibling&&isSoftBreakNode(Ye.previousSibling.previousSibling.previousSibling))tt=t.createRange(t.createPositionBefore(Ye.previousSibling.previousSibling.previousSibling),t.createPositionAfter(Ye));else return!1;return me.model.change(st=>{st.remove(tt),me.execute("enter");const ht=de.selection.anchor.parent;st.rename(ht,DEFAULT_ELEMENT),me.model.schema.removeDisallowedAttributes([ht],st)}),pe.scrollToTheSelection(),!0}function isEmptyishTextNode(me){return me&&me.is("$text")&&!me.data.match(/\S/)}function isSoftBreakNode(me){return me&&me.is("element","softBreak")}class CodeBlockUI extends Plugin{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,de=u.ui.componentFactory,pe=getNormalizedAndLocalizedLanguageDefinitions(u),Le=this._getLanguageListItemDefinitions(pe),Ye=u.commands.get("codeBlock");de.add("codeBlock",tt=>{const st=createDropdown(tt,SplitButtonView),ht=st.buttonView,mt=t("Insert code block");return ht.set({label:mt,tooltip:!0,icon:icons.codeBlock,isToggleable:!0}),ht.bind("isOn").to(Ye,"value",gt=>!!gt),ht.on("execute",()=>{u.execute("codeBlock",{usePreviousLanguageChoice:!0}),u.editing.view.focus()}),st.on("execute",gt=>{u.execute("codeBlock",{language:gt.source._codeBlockLanguage,forceValue:!0}),u.editing.view.focus()}),st.class="ck-code-block-dropdown",st.bind("isEnabled").to(Ye),addListToDropdown(st,Le,{role:"menu",ariaLabel:mt}),st}),de.add("menuBar:codeBlock",tt=>{const st=new MenuBarMenuView(tt);st.buttonView.set({role:"menuitem",label:t("Code block"),icon:icons.codeBlock}),st.bind("isEnabled").to(Ye);const ht=new MenuBarMenuListView(tt);ht.set({ariaLabel:t("Insert code block")});for(const mt of Le){const gt=new MenuBarMenuListItemView(tt,st),bt=new MenuBarMenuListItemButtonView(tt);bt.bind(...Object.keys(mt.model)).to(mt.model),bt.set({isToggleable:!0,role:"menuitemcheckbox"}),bt.delegate("execute").to(st),bt.on("execute",()=>{u.execute("codeBlock",{language:mt.model._codeBlockLanguage,forceValue:Ye.value!=mt.model._codeBlockLanguage}),u.editing.view.focus()}),gt.children.add(bt),ht.items.add(gt)}return st.panelView.children.add(ht),st})}_getLanguageListItemDefinitions(u){const de=this.editor.commands.get("codeBlock"),pe=new Collection;for(const Le of u){const Ye={type:"button",model:new Model({_codeBlockLanguage:Le.language,label:Le.label,role:"menuitemradio",withText:!0})};Ye.model.bind("isOn").to(de,"value",tt=>tt===Ye.model._codeBlockLanguage),pe.add(Ye)}return pe}}class CodeBlock extends Plugin{static get requires(){return[CodeBlockEditing,CodeBlockUI]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClassicEditorUI extends EditorUI{constructor(t,de){super(t);wt(this,"view");wt(this,"_toolbarConfig");wt(this,"_elementReplacer");this.view=de,this._toolbarConfig=normalizeToolbarConfig(t.config.get("toolbar")),this._elementReplacer=new ElementReplacer,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const de=this.editor,pe=this.view,Le=de.editing.view,Ye=pe.editable,tt=Le.document.getRoot();Ye.name=tt.rootName,pe.render();const st=Ye.element;this.setEditableElement(Ye.name,st),pe.editable.bind("isFocused").to(this.focusTracker),Le.attachDomRoot(st),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),pe.menuBarView&&this._initMenuBar(pe.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,de=this.editor.editing.view;this._elementReplacer.restore(),de.getDomRoot(t.editable.name)&&de.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:de})=>de||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,de=t.editing.view,pe=de.document.getRoot(),Le=t.sourceElement;let Ye;const tt=t.config.get("placeholder");tt&&(Ye=typeof tt=="string"?tt:tt[this.view.editable.name]),!Ye&&Le&&Le.tagName.toLowerCase()==="textarea"&&(Ye=Le.getAttribute("placeholder")),Ye&&(pe.placeholder=Ye),enablePlaceholder({view:de,element:pe,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,de=this.editor.plugins.get("ContextualBalloon");de.on("getPositionOptions",Le=>{const Ye=Le.return;if(!Ye||!t.isSticky||!t.element)return;const tt=new Rect(t.element).height,st=typeof Ye.target=="function"?Ye.target():Ye.target,ht=typeof Ye.limiter=="function"?Ye.limiter():Ye.limiter;if(st&&ht&&new Rect(st).height>=new Rect(ht).height-tt)return;const mt={...Ye.viewportOffsetConfig},gt=(mt.top||0)+tt;Le.return={...Ye,viewportOffsetConfig:{...mt,top:gt}}},{priority:"low"});const pe=()=>{de.visibleView&&de.updatePosition()};this.listenTo(t,"change:isSticky",pe),this.listenTo(this.editor.ui,"change:viewportOffset",pe)}_handleScrollToTheSelectionWithStickyPanel(t,de,pe){const Le=this.view.stickyPanel;if(Le.isSticky){const Ye=new Rect(Le.element).height;de.viewportOffset.top+=Ye}else{const Ye=()=>{this.editor.editing.view.scrollToTheSelection(pe)};this.listenTo(Le,"change:isSticky",Ye),setTimeout(()=>{this.stopListening(Le,"change:isSticky",Ye)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,de=this.editor.plugins.get("Dialog");de.on("show",()=>{const pe=de.view;pe.on("moveTo",(Le,Ye)=>{if(!t.isSticky||pe.wasMoved||pe.isModal)return;const tt=new Rect(t.contentPanelElement);Ye[1]<tt.bottom+DialogView.defaultOffset&&(Ye[1]=tt.bottom+DialogView.defaultOffset)},{priority:"high"})},{priority:"low"})}}class ClassicEditorUIView extends BoxedEditorUIView{constructor(t,de,pe={}){super(t);wt(this,"stickyPanel");wt(this,"toolbar");wt(this,"editable");this.stickyPanel=new StickyPanelView(t),this.toolbar=new ToolbarView(t,{shouldGroupWhenFull:pe.shouldToolbarGroupWhenFull}),pe.useMenuBar&&(this.menuBarView=new MenuBarView(t)),this.editable=new InlineEditableUIView(t,de,void 0,{label:pe.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class ClassicEditor extends ElementApiMixin(Editor){constructor(t,de={}){if(!isElement(t)&&de.initialData!==void 0)throw new CKEditorError("editor-create-initial-data",null);super(de);wt(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",getInitialData(t)),isElement(t)&&(this.sourceElement=t),this.model.document.createRoot();const pe=!this.config.get("toolbar.shouldNotGroupWhenFull"),Le=this.config.get("menuBar"),Ye=new ClassicEditorUIView(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:pe,useMenuBar:Le.isVisible,label:this.config.get("label")});this.ui=new ClassicEditorUI(this,Ye),attachToForm(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,de={}){return new Promise(pe=>{const Le=new this(t,de);pe(Le.initPlugins().then(()=>Le.ui.init(isElement(t)?t:null)).then(()=>Le.data.init(Le.config.get("initialData"))).then(()=>Le.fire("ready")).then(()=>Le))})}}function getInitialData(me){return isElement(me)?getDataFromElement(me):me}function isElement(me){return isElement$2(me)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SelectAllCommand extends Command{constructor(u){super(u),this.affectsData=!1}execute(){const u=this.editor.model,t=u.document.selection;let de=u.schema.getLimitElement(t);if(t.containsEntireContent(de)||!isSelectAllScope(u.schema,de))do if(de=de.parent,!de)return;while(!isSelectAllScope(u.schema,de));u.change(pe=>{pe.setSelection(de,"in")})}}function isSelectAllScope(me,u){return me.isLimit(u)&&(me.checkChild(u,"$text")||me.checkChild(u,"paragraph"))}const SELECT_ALL_KEYSTROKE=parseKeystroke("Ctrl+A");class SelectAllEditing extends Plugin{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,pe=u.editing.view.document;u.commands.add("selectAll",new SelectAllCommand(u)),this.listenTo(pe,"keydown",(Le,Ye)=>{getCode(Ye)===SELECT_ALL_KEYSTROKE&&(u.execute("selectAll"),Ye.preventDefault())}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}var selectAllIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class SelectAllUI extends Plugin{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get("selectAll"),Le=new u(t.locale),Ye=de.t;return Le.set({label:Ye("Select all"),icon:selectAllIcon,keystroke:"Ctrl+A"}),Le.bind("isEnabled").to(pe,"isEnabled"),this.listenTo(Le,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),Le}}class SelectAll extends Plugin{static get requires(){return[SelectAllEditing,SelectAllUI]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BaseCommand extends Command{constructor(t){super(t);wt(this,"_stack",[]);wt(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(de,pe)=>{pe[1]={...pe[1]};const Le=pe[1];Le.batchType||(Le.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(de,pe)=>{pe[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const de=this.editor.model.document.selection,pe={ranges:de.hasOwnRange?Array.from(de.getRanges()):[],isBackward:de.isBackward};this._stack.push({batch:t,selection:pe}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,de,pe){const Le=this.editor.model,Ye=Le.document,tt=[],st=t.map(mt=>mt.getTransformedByOperations(pe)),ht=st.flat();for(const mt of st){const gt=mt.filter(bt=>bt.root!=Ye.graveyard).filter(bt=>!isRangeContainedByAnyOtherRange(bt,ht));gt.length&&(normalizeRanges(gt),tt.push(gt[0]))}tt.length&&Le.change(mt=>{mt.setSelection(tt,{backward:de})})}_undo(t,de){const pe=this.editor.model,Le=pe.document;this._createdBatches.add(de);const Ye=t.operations.slice().filter(tt=>tt.isDocumentOperation);Ye.reverse();for(const tt of Ye){const st=tt.baseVersion+1,ht=Array.from(Le.history.getOperations(st)),gt=transformSets([tt.getReversed()],ht,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let bt of gt){const _t=bt.affectedSelectable;_t&&!pe.canEditAt(_t)&&(bt=new NoOperation(bt.baseVersion)),de.addOperation(bt),pe.applyOperation(bt),Le.history.setOperationAsUndone(tt,bt)}}}}function normalizeRanges(me){me.sort((u,t)=>u.start.isBefore(t.start)?-1:1);for(let u=1;u<me.length;u++){const de=me[u-1].getJoined(me[u],!0);de&&(u--,me.splice(u,2,de))}}function isRangeContainedByAnyOtherRange(me,u){return u.some(t=>t!==me&&t.containsRange(me,!0))}class UndoCommand extends BaseCommand{execute(u=null){const t=u?this._stack.findIndex(Le=>Le.batch==u):this._stack.length-1,de=this._stack.splice(t,1)[0],pe=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(pe,()=>{this._undo(de.batch,pe);const Le=this.editor.model.document.history.getOperations(de.batch.baseVersion);this._restoreSelection(de.selection.ranges,de.selection.isBackward,Le)}),this.fire("revert",de.batch,pe),this.refresh()}}class RedoCommand extends BaseCommand{execute(){const u=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const pe=u.batch.operations[u.batch.operations.length-1].baseVersion+1,Le=this.editor.model.document.history.getOperations(pe);this._restoreSelection(u.selection.ranges,u.selection.isBackward,Le),this._undo(u.batch,t)}),this.refresh()}}class UndoEditing extends Plugin{constructor(){super(...arguments);wt(this,"_undoCommand");wt(this,"_redoCommand");wt(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.t;this._undoCommand=new UndoCommand(t),this._redoCommand=new RedoCommand(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(pe,Le)=>{const Ye=Le[0];if(!Ye.isDocumentOperation)return;const tt=Ye.batch,st=this._redoCommand.createdBatches.has(tt),ht=this._undoCommand.createdBatches.has(tt);this._batchRegistry.has(tt)||(this._batchRegistry.add(tt),tt.isUndoable&&(st?this._undoCommand.addBatch(tt):ht||(this._undoCommand.addBatch(tt),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(pe,Le,Ye)=>{this._redoCommand.addBatch(Ye)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:de("Undo"),keystroke:"CTRL+Z"},{label:de("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class UndoUI extends Plugin{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale,de=u.t,pe=t.uiLanguageDirection=="ltr"?icons.undo:icons.redo,Le=t.uiLanguageDirection=="ltr"?icons.redo:icons.undo;this._addButtonsToFactory("undo",de("Undo"),"CTRL+Z",pe),this._addButtonsToFactory("redo",de("Redo"),"CTRL+Y",Le)}_addButtonsToFactory(u,t,de,pe){const Le=this.editor;Le.ui.componentFactory.add(u,()=>{const Ye=this._createButton(ButtonView,u,t,de,pe);return Ye.set({tooltip:!0}),Ye}),Le.ui.componentFactory.add("menuBar:"+u,()=>this._createButton(MenuBarMenuListItemButtonView,u,t,de,pe))}_createButton(u,t,de,pe,Le){const Ye=this.editor,tt=Ye.locale,st=Ye.commands.get(t),ht=new u(tt);return ht.set({label:de,icon:Le,keystroke:pe}),ht.bind("isEnabled").to(st,"isEnabled"),this.listenTo(ht,"execute",()=>{Ye.execute(t),Ye.editing.view.focus()}),ht}}class Undo extends Plugin{static get requires(){return[UndoEditing,UndoUI]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Essentials extends Plugin{static get requires(){return[AccessibilityHelp,Clipboard,Enter,SelectAll,ShiftEnter,Typing,Undo]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FindAndReplaceFormView extends View{constructor(t){super(t);wt(this,"children");wt(this,"_findInputView");wt(this,"_replaceInputView");wt(this,"_findButtonView");wt(this,"_findPrevButtonView");wt(this,"_findNextButtonView");wt(this,"_advancedOptionsCollapsibleView");wt(this,"_matchCaseSwitchView");wt(this,"_wholeWordsOnlySwitchView");wt(this,"_replaceButtonView");wt(this,"_replaceAllButtonView");wt(this,"_inputsDivView");wt(this,"_actionButtonsDivView");wt(this,"_focusTracker");wt(this,"_keystrokes");wt(this,"_focusables");wt(this,"focusCycler");const de=t.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(pe,Le)=>pe>0&&!Le),this._findInputView=this._createInputField(de("Find in text")),this._findPrevButtonView=this._createButton({label:de("Previous result"),class:"ck-button-prev",icon:icons.previousArrow,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:de("Next result"),class:"ck-button-next",icon:icons.previousArrow,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(de("Replace with"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:de("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:de("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:de("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new FocusTracker,this._keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const t=this.locale,de=t.t,pe=new View(t);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:Le})=>Le),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:Le})=>Le),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:Le},Ye)=>Le&&Ye),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(Le,Ye)=>Le||!Ye?"":de("Tip: Find some text first in order to replace it.")),pe.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),pe}_onFindButtonExecute(){if(!this._textToFind){const t=this.t;this._findInputView.errorText=t("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const t=this.locale,de=t.t,pe=this.bindTemplate,Le=new View(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(tt,st)=>de("%0 of %1",[tt,st])),Le.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",pe.if("isDirty","ck-hidden")]},children:[{text:pe.to("_resultsCounterText")}]});const Ye=()=>{const tt=this._findInputView.fieldView.element;if(!tt||!isVisible(tt))return;const st=new Rect(Le.element).width,ht=t.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";st?tt.style[ht]=`calc( 2 * var(--ck-spacing-standard) + ${st}px )`:tt.style[ht]=""};this.on("change:_resultsCounterText",Ye,{priority:"low"}),this.on("change:isDirty",Ye,{priority:"low"}),this._findInputView.template.children[0].children.push(Le)}_createAdvancedOptionsCollapsible(){const t=this.locale.t,de=new CollapsibleView(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return de.set({label:t("Advanced options"),isCollapsed:!0}),de}_createActionButtonsDiv(){const t=new View(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:de},pe)=>de&&pe),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:de},pe)=>de&&pe),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),t.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),t}_createMatchCaseSwitch(){const t=this.locale.t,de=new SwitchButtonView(this.locale);return de.set({label:t("Match case"),withText:!0}),de.bind("isOn").to(this,"_matchCase"),de.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),de}_createWholeWordsOnlySwitch(){const t=this.locale.t,de=new SwitchButtonView(this.locale);return de.set({label:t("Whole words only"),withText:!0}),de.bind("isOn").to(this,"_wholeWordsOnly"),de.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),de}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(de=>{this._focusables.add(de),this._focusTracker.add(de.element)})}_initKeystrokeHandling(){const t=pe=>pe.stopPropagation(),de=pe=>{pe.stopPropagation(),pe.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",pe=>{de(pe),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",pe=>{de(pe),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",pe=>{const Le=pe.target;Le===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),de(pe)):Le===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),de(pe))}),this._keystrokes.set("shift+enter",pe=>{pe.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),de(pe))}),this._keystrokes.set("arrowright",t),this._keystrokes.set("arrowleft",t),this._keystrokes.set("arrowup",t),this._keystrokes.set("arrowdown",t)}_createButton(t){const de=new ButtonView(this.locale);return de.set(t),de}_createInputField(t,de){const pe=new LabeledFieldView(this.locale,createLabeledInputText);return pe.label=t,pe.class=de,pe}}var loupeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';class FindAndReplaceUI extends Plugin{constructor(t){super(t);wt(this,"formView");t.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[Dialog]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.config.get("findAndReplace.uiType")==="dropdown",pe=t.commands.get("find"),Le=this.editor.t;t.ui.componentFactory.add("findAndReplace",()=>{let Ye;return de?(Ye=this._createDropdown(),Ye.bind("isEnabled").to(pe)):Ye=this._createDialogButtonForToolbar(),t.keystrokes.set("Ctrl+F",(tt,st)=>{if(pe.isEnabled){if(Ye instanceof DropdownView){const ht=Ye.buttonView;ht.isOn||ht.fire("execute")}else Ye.isOn?t.plugins.get("Dialog").view.focus():Ye.fire("execute");st()}}),Ye}),de||t.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),t.accessibility.addKeystrokeInfos({keystrokes:[{label:Le("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const t=this.editor,de=t.locale.t,pe=createDropdown(t.locale);return pe.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new FormHeaderView(t.locale,{label:de("Find and replace")}),0),pe.panelView.children.add(this.formView)}),pe.on("change:isOpen",(Le,Ye,tt)=>{tt?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),pe.buttonView.set({icon:loupeIcon,label:de("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),pe}_createDialogButtonForToolbar(){const t=this.editor,de=this._createButton(ButtonView),pe=t.plugins.get("Dialog");return de.set({tooltip:!0}),de.bind("isOn").to(pe,"id",Le=>Le==="findAndReplace"),de.on("execute",()=>{de.isOn?pe.hide():this._showDialog()}),de}_createDialogButtonForMenuBar(){const t=this._createButton(MenuBarMenuListItemButtonView),de=this.editor.plugins.get("Dialog"),pe=this.editor.plugins.get("Dialog");return t.set({role:"menuitemcheckbox",isToggleable:!0}),t.bind("isOn").to(pe,"id",Le=>Le==="findAndReplace"),t.on("execute",()=>{if(de.id==="findAndReplace"){de.hide();return}this._showDialog()}),t}_createButton(t){const de=this.editor,pe=de.commands.get("find"),Le=new t(de.locale),Ye=de.locale.t;return Le.bind("isEnabled").to(pe),Le.set({icon:loupeIcon,label:Ye("Find and replace"),keystroke:"CTRL+F"}),Le}_showDialog(){const t=this.editor,de=t.plugins.get("Dialog"),pe=t.locale.t;this.formView||(this.formView=this._createFormView()),de.show({id:"findAndReplace",title:pe("Find and replace"),content:this.formView,position:DialogViewPosition.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const t=this.editor,de=new(CssTransitionDisablerMixin(FindAndReplaceFormView))(t.locale),pe=t.commands,Ye=this.editor.plugins.get("FindAndReplaceEditing").state;de.bind("highlightOffset").to(Ye,"highlightedOffset"),de.listenTo(Ye.results,"change",()=>{de.matchCount=Ye.results.length});const tt=pe.get("findNext"),st=pe.get("findPrevious"),ht=pe.get("replace"),mt=pe.get("replaceAll");return de.bind("_areCommandsEnabled").to(tt,"isEnabled",st,"isEnabled",ht,"isEnabled",mt,"isEnabled",(gt,bt,_t,vt)=>({findNext:gt,findPrevious:bt,replace:_t,replaceAll:vt})),de.delegate("findNext","findPrevious","replace","replaceAll").to(this),de.on("change:isDirty",(gt,bt,_t)=>{_t&&this.fire("searchReseted")}),de}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class FindCommand extends Command{constructor(t,de){super(t);wt(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=de}execute(t,{matchCase:de,wholeWords:pe}={}){const{editor:Le}=this,{model:Ye}=Le,tt=Le.plugins.get("FindAndReplaceUtils");let st,ht="";typeof t=="string"?st=(...bt)=>({results:tt.findByTextCallback(t,{matchCase:de,wholeWords:pe})(...bt),searchText:t}):st=t;const mt=st;st=(...bt)=>{const _t=mt(...bt);return _t&&"searchText"in _t&&(ht=_t.searchText),_t};const gt=Ye.document.getRootNames().reduce((bt,_t)=>tt.updateFindResultFromRange(Ye.createRangeIn(Ye.document.getRoot(_t)),Ye,st,bt),null);return this._state.clear(Ye),this._state.results.addMany(gt),this._state.highlightedResult=gt.get(0),this._state.searchText=ht,st&&(this._state.lastSearchCallback=st),this._state.matchCase=!!de,this._state.matchWholeWords=!!pe,{results:gt,findCallback:st}}}class FindAndReplaceState extends ObservableMixin(){constructor(u){super(),this.set("results",new Collection),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:de,index:pe})=>{if(Array.from(de).length){let Le=!1;if(u.change(Ye=>{for(const tt of de)this.highlightedResult===tt&&(Le=!0),u.markers.has(tt.marker.name)&&Ye.removeMarker(tt.marker)}),Le){const Ye=pe>=this.results.length?0:pe;this.highlightedResult=this.results.get(Ye)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(u)})}clear(u){this.searchText="",u.change(t=>{if(this.highlightedResult){const de=this.highlightedResult.marker.name.split(":")[1],pe=u.markers.get(`findResultHighlighted:${de}`);pe&&t.removeMarker(pe)}[...this.results].forEach(({marker:de})=>{t.removeMarker(de)})}),this.results.clear()}refreshHighlightOffset(u){const{highlightedResult:t,results:de}=this;t?this.highlightedOffset=sortSearchResultsByMarkerPositions(u,[...de]).indexOf(t)+1:this.highlightedOffset=0}}function sortSearchResultsByMarkerPositions(me,u){const t={before:-1,same:0,after:1,different:1};return me.document.getRootNames().flatMap(de=>u.filter(pe=>pe.marker.getStart().root.rootName===de).sort((pe,Le)=>t[pe.marker.getStart().compareWith(Le.marker.getStart())]))}class ReplaceCommandBase extends Command{constructor(t,de){super(t);wt(this,"_state");this.isEnabled=!0,this._state=de,this._isEnabledBasedOnSelection=!1}_replace(t,de){const{model:pe}=this.editor,Le=de.marker.getRange();pe.canEditAt(Le)&&pe.change(Ye=>{if(Le.root.rootName==="$graveyard"){this._state.results.remove(de);return}let tt={};for(const st of Le.getItems())if(st.is("$text")||st.is("$textProxy")){tt=st.getAttributes();break}pe.insertContent(Ye.createText(t,tt),Le),this._state.results.has(de)&&this._state.results.remove(de)})}}class ReplaceCommand extends ReplaceCommandBase{execute(u,t){const de=Math.max(this._state.highlightedOffset-1,0);if(this._replace(u,t),this._state.results.length){const pe=sortSearchResultsByMarkerPositions(this.editor.model,[...this._state.results]);this._state.highlightedResult=pe[de%pe.length]}}}class ReplaceAllCommand extends ReplaceCommandBase{execute(u,t){const{editor:de}=this,{model:pe}=de,Le=de.plugins.get("FindAndReplaceUtils"),Ye=t instanceof Collection?t:pe.document.getRootNames().reduce((tt,st)=>Le.updateFindResultFromRange(pe.createRangeIn(pe.document.getRoot(st)),pe,Le.findByTextCallback(t,this._state),tt),null);Ye.length&&pe.change(()=>{[...Ye].forEach(tt=>{this._replace(u,tt)})})}}class FindNextCommand extends Command{constructor(t,de){super(t);wt(this,"_state");this.affectsData=!1,this._state=de,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const t=this._state.results,de=t.getIndex(this._state.highlightedResult),pe=de+1>=t.length?0:de+1;this._state.highlightedResult=this._state.results.get(pe)}}class FindPreviousCommand extends FindNextCommand{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),de=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(de)}}class FindAndReplaceUtils extends Plugin{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(u,t,de,pe){const Le=pe||new Collection,Ye=tt=>Le.find(st=>{const{marker:ht}=st,mt=ht.getRange(),gt=tt.getRange();return mt.isEqual(gt)});return t.change(tt=>{[...u].forEach(({type:st,item:ht})=>{if(st==="elementStart"&&t.schema.checkChild(ht,"$text")){let mt=de({item:ht,text:this.rangeToText(t.createRangeIn(ht))});if(!mt)return;"results"in mt&&(mt=mt.results),mt.forEach(gt=>{const bt=`findResult:${uid()}`,_t=tt.addMarker(bt,{usingOperation:!1,affectsData:!1,range:tt.createRange(tt.createPositionAt(ht,gt.start),tt.createPositionAt(ht,gt.end))}),vt=findInsertIndex(Le,_t);Ye(_t)||Le.add({id:bt,label:gt.label,marker:_t},vt)})}})}),Le}rangeToText(u){return Array.from(u.getItems({shallow:!0})).reduce((t,de)=>de.is("$text")||de.is("$textProxy")?t+de.data:`${t}
`,"")}findByTextCallback(u,t){let de="gu";t.matchCase||(de+="i");let pe=`(${escapeRegExp(u)})`;if(t.wholeWords){const tt="[^a-zA-Z--]";new RegExp("^"+tt).test(u)||(pe=`(^|${tt}|_)${pe}`),new RegExp(tt+"$").test(u)||(pe=`${pe}(?=_|${tt}|$)`)}const Le=new RegExp(pe,de);function Ye({text:tt}){return[...tt.matchAll(Le)].map(regexpMatchToFindResult)}return Ye}}function findInsertIndex(me,u){const t=me.find(({marker:de})=>u.getStart().isBefore(de.getStart()));return t?me.getIndex(t):me.length}function regexpMatchToFindResult(me){const u=me.length-1;let t=me.index;return me.length===3&&(t+=me[1].length),{label:me[u],start:t,end:t+me[u].length}}const HIGHLIGHT_CLASS$1="ck-find-result_selected";class FindAndReplaceEditing extends Plugin{constructor(){super(...arguments);wt(this,"state");wt(this,"_onDocumentChange",()=>{const t=new Set,de=new Set,pe=this.editor.model,{results:Le}=this.state,Ye=pe.document.differ.getChanges(),tt=pe.document.differ.getChangedMarkers();Ye.forEach(mt=>{mt.position&&(mt.name==="$text"||mt.position.nodeAfter&&pe.schema.isInline(mt.position.nodeAfter)?(t.add(mt.position.parent),[...pe.markers.getMarkersAtPosition(mt.position)].forEach(gt=>{de.add(gt.name)})):mt.type==="insert"&&mt.position.nodeAfter&&t.add(mt.position.nodeAfter))}),tt.forEach(({name:mt,data:{newRange:gt}})=>{gt&&gt.start.root.rootName==="$graveyard"&&de.add(mt)}),t.forEach(mt=>{[...pe.markers.getMarkersIntersectingRange(pe.createRangeIn(mt))].forEach(bt=>de.add(bt.name))}),de.forEach(mt=>{Le.has(mt)&&(Le.get(mt)===this.state.highlightedResult&&(this.state.highlightedResult=null),Le.remove(mt))});const st=[],ht=this.editor.plugins.get("FindAndReplaceUtils");t.forEach(mt=>{const gt=ht.updateFindResultFromRange(pe.createRangeOn(mt),pe,this.state.lastSearchCallback,Le);st.push(...gt)}),tt.forEach(mt=>{if(mt.data.newRange){const gt=ht.updateFindResultFromRange(mt.data.newRange,pe,this.state.lastSearchCallback,Le);st.push(...gt)}}),!this.state.highlightedResult&&st.length?this.state.highlightedResult=st[0]:this.state.refreshHighlightOffset(pe)})}static get requires(){return[FindAndReplaceUtils]}static get pluginName(){return"FindAndReplaceEditing"}static get isOfficialPlugin(){return!0}init(){this.state=new FindAndReplaceState(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(pe,Le,Ye,tt)=>{const{model:st}=this.editor;st.change(ht=>{if(tt){const mt=tt.marker.name.split(":")[1],gt=st.markers.get(`findResultHighlighted:${mt}`);gt&&ht.removeMarker(gt)}if(Ye){const mt=Ye.marker.name.split(":")[1];ht.addMarker(`findResultHighlighted:${mt}`,{usingOperation:!1,affectsData:!1,range:Ye.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const de=debounce(((pe,Le,Ye)=>{if(Ye){const tt=this.editor.editing.view.domConverter,st=this.editor.editing.mapper.toViewRange(Ye.marker.getRange());scrollViewportToShowTarget({target:tt.viewRangeToDom(st),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",de,{priority:"low"}),this.listenTo(this.editor,"destroy",de.cancel),this.on("change:_isSearchActive",(pe,Le,Ye)=>{Ye?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(t,de){return this._isSearchActive=!0,this.editor.execute("find",t,de),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new FindCommand(this.editor,this.state)),this.editor.commands.add("findNext",new FindNextCommand(this.editor,this.state)),this.editor.commands.add("findPrevious",new FindPreviousCommand(this.editor,this.state)),this.editor.commands.add("replace",new ReplaceCommand(this.editor,this.state)),this.editor.commands.add("replaceAll",new ReplaceAllCommand(this.editor,this.state))}_defineConverters(){const{editor:t}=this;t.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:de})=>{const[,pe]=de.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":pe}}}}),t.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:de})=>{const[,pe]=de.split(":");return{name:"span",classes:[HIGHLIGHT_CLASS$1],attributes:{"data-find-result":pe}}}})}}class FindAndReplace extends Plugin{static get requires(){return[FindAndReplaceEditing,FindAndReplaceUI]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing"),de=t.state;u.on("findNext",(pe,Le)=>{Le?(de.searchText=Le.searchText,t.find(Le.searchText,Le)):this.editor.execute("findNext")}),u.on("findPrevious",(pe,Le)=>{Le&&de.searchText!==Le.searchText?t.find(Le.searchText):this.editor.execute("findPrevious")}),u.on("replace",(pe,Le)=>{de.searchText!==Le.searchText&&t.find(Le.searchText);const Ye=de.highlightedResult;Ye&&this.editor.execute("replace",Le.replaceText,Ye)}),u.on("replaceAll",(pe,Le)=>{de.searchText!==Le.searchText&&t.find(Le.searchText),this.editor.execute("replaceAll",Le.replaceText,de.results)}),u.on("searchReseted",()=>{de.clear(this.editor.model),t.stop()})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FontCommand extends Command{constructor(t,de){super(t);wt(this,"attributeKey");this.attributeKey=de}refresh(){const t=this.editor.model,de=t.document;this.value=de.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(de.selection,this.attributeKey)}execute(t={}){const de=this.editor.model,Le=de.document.selection,Ye=t.value,tt=t.batch,st=ht=>{if(Le.isCollapsed)Ye?ht.setSelectionAttribute(this.attributeKey,Ye):ht.removeSelectionAttribute(this.attributeKey);else{const mt=de.schema.getValidRanges(Le.getRanges(),this.attributeKey);for(const gt of mt)Ye?ht.setAttribute(this.attributeKey,Ye,gt):ht.removeAttribute(this.attributeKey,gt)}};tt?de.enqueueChange(tt,ht=>{st(ht)}):de.change(ht=>{st(ht)})}}const FONT_SIZE="fontSize",FONT_FAMILY="fontFamily",FONT_COLOR="fontColor",FONT_BACKGROUND_COLOR="fontBackgroundColor";function buildDefinition(me,u){const t={model:{key:me,values:[]},view:{},upcastAlso:{}};for(const de of u)t.model.values.push(de.model),t.view[de.model]=de.view,de.upcastAlso&&(t.upcastAlso[de.model]=de.upcastAlso);return t}function renderUpcastAttribute(me){return u=>normalizeColorCode(u.getStyle(me))}function renderDowncastElement(me){return(u,{writer:t})=>t.createAttributeElement("span",{style:`${me}:${u}`},{priority:7})}function addColorSelectorToDropdown({dropdownView:me,colors:u,columns:t,removeButtonLabel:de,colorPickerLabel:pe,documentColorsLabel:Le,documentColorsCount:Ye,colorPickerViewConfig:tt}){const st=me.locale,ht=new ColorSelectorView(st,{colors:u,columns:t,removeButtonLabel:de,colorPickerLabel:pe,documentColorsLabel:Le,documentColorsCount:Ye,colorPickerViewConfig:tt});return me.colorSelectorView=ht,me.panelView.children.add(ht),ht}function normalizeColorCode(me){return me.replace(/\s/g,"")}class FontFamilyCommand extends FontCommand{constructor(u){super(u,FONT_FAMILY)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeOptions$1(me){return me.map(getOptionDefinition$1).filter(u=>u!==void 0)}function getOptionDefinition$1(me){if(typeof me=="object")return me;if(me==="default")return{title:"Default",model:void 0};if(typeof me=="string")return generateFontPreset(me)}function generateFontPreset(me){const u=me.replace(/"|'/g,"").split(","),t=u[0],de=u.map(normalizeFontNameForCSS).join(", ");return{title:t,model:de,view:{name:"span",styles:{"font-family":de},priority:7}}}function normalizeFontNameForCSS(me){return me=me.trim(),me.indexOf(" ")>0&&(me=`'${me}'`),me}class FontFamilyEditing extends Plugin{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_FAMILY,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:FONT_FAMILY}),u.model.schema.setAttributeProperties(FONT_FAMILY,{isFormatting:!0,copyOnEnter:!0});const t=normalizeOptions$1(u.config.get("fontFamily.options")).filter(pe=>pe.model),de=buildDefinition(FONT_FAMILY,t);u.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):u.conversion.attributeToElement(de),u.commands.add(FONT_FAMILY,new FontFamilyCommand(u))}_prepareAnyValueConverters(){const u=this.editor;u.conversion.for("downcast").attributeToElement({model:FONT_FAMILY,view:(t,{writer:de})=>de.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),u.conversion.for("upcast").elementToAttribute({model:{key:FONT_FAMILY,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:FONT_FAMILY,value:t=>t.getAttribute("face")}})}}var fontFamilyIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class FontFamilyUI extends Plugin{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,de=this._getLocalizedOptions(),pe=u.commands.get(FONT_FAMILY),Le=t("Font Family"),Ye=_prepareListOptions$1(de,pe);u.ui.componentFactory.add(FONT_FAMILY,tt=>{const st=createDropdown(tt);return addListToDropdown(st,Ye,{role:"menu",ariaLabel:Le}),st.buttonView.set({label:Le,icon:fontFamilyIcon,tooltip:!0}),st.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),st.bind("isEnabled").to(pe),this.listenTo(st,"execute",ht=>{u.execute(ht.source.commandName,{value:ht.source.commandParam}),u.editing.view.focus()}),st}),u.ui.componentFactory.add(`menuBar:${FONT_FAMILY}`,tt=>{const st=new MenuBarMenuView(tt);st.buttonView.set({label:Le,icon:fontFamilyIcon}),st.bind("isEnabled").to(pe);const ht=new MenuBarMenuListView(tt);for(const mt of Ye){const gt=new MenuBarMenuListItemView(tt,st),bt=new MenuBarMenuListItemButtonView(tt);bt.set({role:"menuitemradio",isToggleable:!0}),bt.bind(...Object.keys(mt.model)).to(mt.model),bt.delegate("execute").to(st),bt.on("execute",()=>{u.execute(mt.model.commandName,{value:mt.model.commandParam}),u.editing.view.focus()}),gt.children.add(bt),ht.items.add(gt)}return st.panelView.children.add(ht),st})}_getLocalizedOptions(){const u=this.editor,t=u.t;return normalizeOptions$1(u.config.get(FONT_FAMILY).options).map(pe=>(pe.title==="Default"&&(pe.title=t("Default")),pe))}}function _prepareListOptions$1(me,u){const t=new Collection;for(const de of me){const pe={type:"button",model:new Model({commandName:FONT_FAMILY,commandParam:de.model,label:de.title,role:"menuitemradio",withText:!0})};pe.model.bind("isOn").to(u,"value",Le=>Le===de.model?!0:!Le||!de.model?!1:Le.split(",")[0].replace(/'/g,"").toLowerCase()===de.model.toLowerCase()),de.view&&typeof de.view!="string"&&de.view.styles&&pe.model.set("labelStyle",`font-family: ${de.view.styles["font-family"]}`),t.add(pe)}return t}class FontFamily extends Plugin{static get requires(){return[FontFamilyEditing,FontFamilyUI]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class FontSizeCommand extends FontCommand{constructor(u){super(u,FONT_SIZE)}}function normalizeOptions(me){return me.map(u=>getOptionDefinition(u)).filter(u=>u!==void 0)}const namedPresets={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function getOptionDefinition(me){if(typeof me=="number"&&(me=String(me)),typeof me=="object"&&isFullItemDefinition(me))return attachPriority(me);const u=findPreset(me);if(u)return attachPriority(u);if(me==="default")return{model:void 0,title:"Default"};if(!isNumericalDefinition(me))return generatePixelPreset(me)}function generatePixelPreset(me){return typeof me=="string"&&(me={title:me,model:`${parseFloat(me)}px`}),me.view={name:"span",styles:{"font-size":me.model}},attachPriority(me)}function attachPriority(me){return me.view&&typeof me.view!="string"&&!me.view.priority&&(me.view.priority=7),me}function findPreset(me){return typeof me=="string"?namedPresets[me]:namedPresets[me.model]}function isFullItemDefinition(me){return me.title&&me.model&&me.view}function isNumericalDefinition(me){let u;if(typeof me=="object")if(me.model)u=parseFloat(me.model);else throw new CKEditorError("font-size-invalid-definition",null,me);else u=parseFloat(me);return isNaN(u)}const styleFontSize=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class FontSizeEditing extends Plugin{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_SIZE,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:FONT_SIZE}),u.model.schema.setAttributeProperties(FONT_SIZE,{isFormatting:!0,copyOnEnter:!0});const t=u.config.get("fontSize.supportAllValues"),de=normalizeOptions(this.editor.config.get("fontSize.options")).filter(Le=>Le.model),pe=buildDefinition(FONT_SIZE,de);t?(this._prepareAnyValueConverters(pe),this._prepareCompatibilityConverter()):u.conversion.attributeToElement(pe),u.commands.add(FONT_SIZE,new FontSizeCommand(u))}_prepareAnyValueConverters(u){const t=this.editor,de=u.model.values.filter(pe=>!isLength(String(pe))&&!isPercentage(String(pe)));if(de.length)throw new CKEditorError("font-size-invalid-use-of-named-presets",null,{presets:de});t.conversion.for("downcast").attributeToElement({model:FONT_SIZE,view:(pe,{writer:Le})=>{if(pe)return Le.createAttributeElement("span",{style:"font-size:"+pe},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:FONT_SIZE,value:pe=>pe.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:FONT_SIZE,value:t=>{const de=t.getAttribute("size"),pe=de[0]==="-"||de[0]==="+";let Le=parseInt(de,10);pe&&(Le=3+Le);const Ye=styleFontSize.length-1,tt=Math.min(Math.max(Le,0),Ye);return styleFontSize[tt]}}})}}var fontSizeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class FontSizeUI extends Plugin{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,de=this._getLocalizedOptions(),pe=u.commands.get(FONT_SIZE),Le=t("Font Size"),Ye=_prepareListOptions(de,pe);u.ui.componentFactory.add(FONT_SIZE,tt=>{const st=createDropdown(tt);return addListToDropdown(st,Ye,{role:"menu",ariaLabel:Le}),st.buttonView.set({label:Le,icon:fontSizeIcon,tooltip:!0}),st.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),st.bind("isEnabled").to(pe),this.listenTo(st,"execute",ht=>{u.execute(ht.source.commandName,{value:ht.source.commandParam}),u.editing.view.focus()}),st}),u.ui.componentFactory.add(`menuBar:${FONT_SIZE}`,tt=>{const st=new MenuBarMenuView(tt);st.buttonView.set({label:Le,icon:fontSizeIcon}),st.bind("isEnabled").to(pe);const ht=new MenuBarMenuListView(tt);for(const mt of Ye){const gt=new MenuBarMenuListItemView(tt,st),bt=new MenuBarMenuListItemButtonView(tt);bt.set({role:"menuitemradio",isToggleable:!0}),bt.bind(...Object.keys(mt.model)).to(mt.model),bt.delegate("execute").to(st),bt.on("execute",()=>{u.execute(mt.model.commandName,{value:mt.model.commandParam}),u.editing.view.focus()}),gt.children.add(bt),ht.items.add(gt)}return st.panelView.children.add(ht),st})}_getLocalizedOptions(){const u=this.editor,t=u.t,de={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return normalizeOptions(u.config.get(FONT_SIZE).options).map(Le=>{const Ye=de[Le.title];return Ye&&Ye!=Le.title&&(Le=Object.assign({},Le,{title:Ye})),Le})}}function _prepareListOptions(me,u){const t=new Collection;for(const de of me){const pe={type:"button",model:new Model({commandName:FONT_SIZE,commandParam:de.model,label:de.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};de.view&&typeof de.view!="string"&&(de.view.styles&&pe.model.set("labelStyle",`font-size:${de.view.styles["font-size"]}`),de.view.classes&&pe.model.set("class",`${pe.model.class} ${de.view.classes}`)),pe.model.bind("isOn").to(u,"value",Le=>Le===de.model),t.add(pe)}return t}class FontSize extends Plugin{static get requires(){return[FontSizeEditing,FontSizeUI]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(u){return normalizeOptions(u)}}class FontColorCommand extends FontCommand{constructor(u){super(u,FONT_COLOR)}}class FontColorEditing extends Plugin{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),u.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:FONT_COLOR,value:renderUpcastAttribute("color")}}),u.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:FONT_COLOR,value:t=>t.getAttribute("color")}}),u.conversion.for("downcast").attributeToElement({model:FONT_COLOR,view:renderDowncastElement("color")}),u.commands.add(FONT_COLOR,new FontColorCommand(u)),u.model.schema.extend("$text",{allowAttributes:FONT_COLOR}),u.model.schema.setAttributeProperties(FONT_COLOR,{isFormatting:!0,copyOnEnter:!0})}}class ColorUI extends Plugin{constructor(t,{commandName:de,componentName:pe,icon:Le,dropdownLabel:Ye}){super(t);wt(this,"commandName");wt(this,"componentName");wt(this,"icon");wt(this,"dropdownLabel");wt(this,"columns");this.commandName=de,this.componentName=pe,this.icon=Le,this.dropdownLabel=Ye,this.columns=t.config.get(`${this.componentName}.columns`)}init(){const t=this.editor,de=t.locale,pe=de.t,Le=t.commands.get(this.commandName),Ye=t.config.get(this.componentName),tt=normalizeColorOptions(Ye.colors),st=getLocalizedColorOptions(de,tt),ht=Ye.documentColors,mt=Ye.colorPicker!==!1;t.ui.componentFactory.add(this.componentName,gt=>{const bt=createDropdown(gt);let _t=!1;const vt=addColorSelectorToDropdown({dropdownView:bt,colors:st.map(Tt=>({label:Tt.label,color:Tt.model,options:{hasBorder:Tt.hasBorder}})),columns:this.columns,removeButtonLabel:pe("Remove color"),colorPickerLabel:pe("Color picker"),documentColorsLabel:ht!==0?pe("Document colors"):"",documentColorsCount:ht===void 0?this.columns:ht,colorPickerViewConfig:mt?Ye.colorPicker||{}:!1});return vt.bind("selectedColor").to(Le,"value"),bt.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),bt.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),bt.bind("isEnabled").to(Le),vt.on("execute",(Tt,St)=>{bt.isOpen&&t.execute(this.commandName,{value:St.value,batch:this._undoStepBatch}),St.source!=="colorPicker"&&t.editing.view.focus(),St.source==="colorPickerSaveButton"&&(bt.isOpen=!1)}),vt.on("colorPicker:show",()=>{this._undoStepBatch=t.model.createBatch()}),vt.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(bt.isOpen=!1,t.execute("undo",this._undoStepBatch)),t.editing.view.focus()}),bt.on("change:isOpen",(Tt,St,Rt)=>{_t||(_t=!0,bt.colorSelectorView.appendUI()),Rt&&(ht!==0&&vt.updateDocumentColors(t.model,this.componentName),vt.updateSelectedColors(),vt.showColorGridsFragment())}),focusChildOnDropdownOpen(bt,()=>bt.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(Tt=>Tt.isOn)),bt}),t.ui.componentFactory.add(`menuBar:${this.componentName}`,gt=>{const bt=new MenuBarMenuView(gt);bt.buttonView.set({label:this.dropdownLabel,icon:this.icon}),bt.bind("isEnabled").to(Le);let _t=!1;const vt=new ColorSelectorView(gt,{colors:st.map(Tt=>({label:Tt.label,color:Tt.model,options:{hasBorder:Tt.hasBorder}})),columns:this.columns,removeButtonLabel:pe("Remove color"),colorPickerLabel:pe("Color picker"),documentColorsLabel:ht!==0?pe("Document colors"):"",documentColorsCount:ht===void 0?this.columns:ht,colorPickerViewConfig:!1});return vt.bind("selectedColor").to(Le,"value"),vt.delegate("execute").to(bt),vt.on("execute",(Tt,St)=>{t.execute(this.commandName,{value:St.value,batch:this._undoStepBatch}),t.editing.view.focus()}),bt.on("change:isOpen",(Tt,St,Rt)=>{_t||(_t=!0,vt.appendUI()),Rt&&(ht!==0&&vt.updateDocumentColors(t.model,this.componentName),vt.updateSelectedColors(),vt.showColorGridsFragment())}),bt.panelView.children.add(vt),bt})}}var fontColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class FontColorUI extends ColorUI{constructor(u){const t=u.locale.t;super(u,{commandName:FONT_COLOR,componentName:FONT_COLOR,icon:fontColorIcon,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class FontColor extends Plugin{static get requires(){return[FontColorEditing,FontColorUI]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class FontBackgroundColorCommand extends FontCommand{constructor(u){super(u,FONT_BACKGROUND_COLOR)}}class FontBackgroundColorEditing extends Plugin{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_BACKGROUND_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),u.data.addStyleProcessorRules(addBackgroundRules),u.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:FONT_BACKGROUND_COLOR,value:renderUpcastAttribute("background-color")}}),u.conversion.for("downcast").attributeToElement({model:FONT_BACKGROUND_COLOR,view:renderDowncastElement("background-color")}),u.commands.add(FONT_BACKGROUND_COLOR,new FontBackgroundColorCommand(u)),u.model.schema.extend("$text",{allowAttributes:FONT_BACKGROUND_COLOR}),u.model.schema.setAttributeProperties(FONT_BACKGROUND_COLOR,{isFormatting:!0,copyOnEnter:!0})}}var fontBackgroundColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class FontBackgroundColorUI extends ColorUI{constructor(u){const t=u.locale.t;super(u,{commandName:FONT_BACKGROUND_COLOR,componentName:FONT_BACKGROUND_COLOR,icon:fontBackgroundColorIcon,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class FontBackgroundColor extends Plugin{static get requires(){return[FontBackgroundColorEditing,FontBackgroundColorUI]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class Font extends Plugin{static get requires(){return[FontFamily,FontSize,FontColor,FontBackgroundColor]}static get pluginName(){return"Font"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ParagraphCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}refresh(){const u=this.editor.model,t=u.document,de=first(t.selection.getSelectedBlocks());this.value=!!de&&de.is("element","paragraph"),this.isEnabled=!!de&&checkCanBecomeParagraph(de,u.schema)}execute(u={}){const t=this.editor.model,de=t.document,pe=u.selection||de.selection;t.canEditAt(pe)&&t.change(Le=>{const Ye=pe.getSelectedBlocks();for(const tt of Ye)!tt.is("element","paragraph")&&checkCanBecomeParagraph(tt,t.schema)&&Le.rename(tt,"paragraph")})}}function checkCanBecomeParagraph(me,u){return u.checkChild(me.parent,"paragraph")&&!u.isObject(me)}class InsertParagraphCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}execute(u){const t=this.editor.model,de=u.attributes;let pe=u.position;return t.canEditAt(pe)?t.change(Le=>{if(pe=this._findPositionToInsertParagraph(pe,Le),!pe)return null;const Ye=Le.createElement("paragraph");return de&&t.schema.setAllowedAttributes(Ye,de,Le),t.insertContent(Ye,pe),Le.setSelection(Ye,"in"),Le.createPositionAt(Ye,0)}):null}_findPositionToInsertParagraph(u,t){const de=this.editor.model;if(de.schema.checkChild(u,"paragraph"))return u;const pe=de.schema.findAllowedParent(u,"paragraph");if(!pe)return null;const Le=u.parent,Ye=de.schema.checkChild(Le,"$text");return Le.isEmpty||Ye&&u.isAtEnd?de.createPositionAfter(Le):!Le.isEmpty&&Ye&&u.isAtStart?de.createPositionBefore(Le):t.split(u,pe).position}}const dl=class dl extends Plugin{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model;u.commands.add("paragraph",new ParagraphCommand(u)),u.commands.add("insertParagraph",new InsertParagraphCommand(u)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),u.conversion.elementToElement({model:"paragraph",view:"p"}),u.conversion.for("upcast").elementToElement({model:(de,{writer:pe})=>!dl.paragraphLikeElements.has(de.name)||de.isEmpty?null:pe.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};wt(dl,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Paragraph=dl;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HeadingCommand extends Command{constructor(t,de){super(t);wt(this,"modelElements");this.modelElements=de}refresh(){const t=first(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(de=>checkCanBecomeHeading(t,de,this.editor.model.schema))}execute(t){const de=this.editor.model,pe=de.document,Le=t.value;de.change(Ye=>{const tt=Array.from(pe.selection.getSelectedBlocks()).filter(st=>checkCanBecomeHeading(st,Le,de.schema));for(const st of tt)st.is("element",Le)||Ye.rename(st,Le)})}}function checkCanBecomeHeading(me,u,t){return t.checkChild(me.parent,u)&&!t.isObject(me)}const defaultModelElement="paragraph";class HeadingEditing extends Plugin{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Paragraph]}init(){const u=this.editor,t=u.config.get("heading.options"),de=[];for(const pe of t)pe.model!=="paragraph"&&(u.model.schema.register(pe.model,{inheritAllFrom:"$block"}),u.conversion.elementToElement(pe),de.push(pe.model));this._addDefaultH1Conversion(u),u.commands.add("heading",new HeadingCommand(u,de))}afterInit(){const u=this.editor,t=u.commands.get("enter"),de=u.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(pe,Le)=>{const Ye=u.model.document.selection.getFirstPosition().parent;de.some(st=>Ye.is("element",st.model))&&!Ye.is("element",defaultModelElement)&&Ye.childCount===0&&Le.writer.rename(Ye,defaultModelElement)})}_addDefaultH1Conversion(u){u.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:priorities.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedOptions(me){const u=me.t,t={Paragraph:u("Paragraph"),"Heading 1":u("Heading 1"),"Heading 2":u("Heading 2"),"Heading 3":u("Heading 3"),"Heading 4":u("Heading 4"),"Heading 5":u("Heading 5"),"Heading 6":u("Heading 6")};return me.config.get("heading.options").map(de=>{const pe=t[de.title];return pe&&pe!=de.title&&(de.title=pe),de})}class HeadingUI extends Plugin{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,de=getLocalizedOptions(u),pe=t("Choose heading"),Le=t("Heading");u.ui.componentFactory.add("heading",Ye=>{const tt={},st=new Collection,ht=u.commands.get("heading"),mt=u.commands.get("paragraph"),gt=[ht];for(const _t of de){const vt={type:"button",model:new Model({label:_t.title,class:_t.class,role:"menuitemradio",withText:!0})};_t.model==="paragraph"?(vt.model.bind("isOn").to(mt,"value"),vt.model.set("commandName","paragraph"),gt.push(mt)):(vt.model.bind("isOn").to(ht,"value",Tt=>Tt===_t.model),vt.model.set({commandName:"heading",commandValue:_t.model})),st.add(vt),tt[_t.model]=_t.title}const bt=createDropdown(Ye);return addListToDropdown(bt,st,{ariaLabel:Le,role:"menu"}),bt.buttonView.set({ariaLabel:Le,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:Le}),bt.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),bt.bind("isEnabled").toMany(gt,"isEnabled",(..._t)=>_t.some(vt=>vt)),bt.buttonView.bind("label").to(ht,"value",mt,"value",(_t,vt)=>{const Tt=vt?"paragraph":_t;return typeof Tt=="boolean"||!tt[Tt]?pe:tt[Tt]}),bt.buttonView.bind("ariaLabel").to(ht,"value",mt,"value",(_t,vt)=>{const Tt=vt?"paragraph":_t;return typeof Tt=="boolean"||!tt[Tt]?Le:`${tt[Tt]}, ${Le}`}),this.listenTo(bt,"execute",_t=>{const{commandName:vt,commandValue:Tt}=_t.source;u.execute(vt,Tt?{value:Tt}:void 0),u.editing.view.focus()}),bt}),u.ui.componentFactory.add("menuBar:heading",Ye=>{const tt=new MenuBarMenuView(Ye),st=u.commands.get("heading"),ht=u.commands.get("paragraph"),mt=[st],gt=new MenuBarMenuListView(Ye);tt.set({class:"ck-heading-dropdown"}),gt.set({ariaLabel:t("Heading"),role:"menu"}),tt.buttonView.set({label:t("Heading")}),tt.panelView.children.add(gt);for(const bt of de){const _t=new MenuBarMenuListItemView(Ye,tt),vt=new MenuBarMenuListItemButtonView(Ye);_t.children.add(vt),gt.items.add(_t),vt.set({isToggleable:!0,label:bt.title,role:"menuitemradio",class:bt.class}),vt.delegate("execute").to(tt),vt.on("execute",()=>{const Tt=bt.model==="paragraph"?"paragraph":"heading";u.execute(Tt,{value:bt.model}),u.editing.view.focus()}),bt.model==="paragraph"?(vt.bind("isOn").to(ht,"value"),mt.push(ht)):vt.bind("isOn").to(st,"value",Tt=>Tt===bt.model)}return tt.bind("isEnabled").toMany(mt,"isEnabled",(...bt)=>bt.some(_t=>_t)),tt})}}class Heading extends Plugin{static get requires(){return[HeadingEditing,HeadingUI]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightCommand extends Command{refresh(){const u=this.editor.model,t=u.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=u.schema.checkAttributeInSelection(t.selection,"highlight")}execute(u={}){const t=this.editor.model,pe=t.document.selection,Le=u.value;t.change(Ye=>{if(pe.isCollapsed){const tt=pe.getFirstPosition();if(pe.hasAttribute("highlight")){const st=bt=>bt.item.hasAttribute("highlight")&&bt.item.getAttribute("highlight")===this.value,ht=tt.getLastMatchingPosition(st,{direction:"backward"}),mt=tt.getLastMatchingPosition(st),gt=Ye.createRange(ht,mt);!Le||this.value===Le?(tt.isEqual(mt)||Ye.removeAttribute("highlight",gt),Ye.removeSelectionAttribute("highlight")):(tt.isEqual(mt)||Ye.setAttribute("highlight",Le,gt),Ye.setSelectionAttribute("highlight",Le))}else Le&&Ye.setSelectionAttribute("highlight",Le)}else{const tt=t.schema.getValidRanges(pe.getRanges(),"highlight");for(const st of tt)Le?Ye.setAttribute("highlight",Le,st):Ye.removeAttribute("highlight",st)}})}}class HighlightEditing extends Plugin{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:"highlight"});const t=u.config.get("highlight.options");u.conversion.attributeToElement(_buildDefinition(t)),u.commands.add("highlight",new HighlightCommand(u))}}function _buildDefinition(me){const u={model:{key:"highlight",values:[]},view:{}};for(const t of me)u.model.values.push(t.model),u.view[t.model]={name:"mark",classes:t.class};return u}var markerIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',penIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';class HighlightUI extends Plugin{get localizedOptionTitles(){const u=this.editor.t;return{"Yellow marker":u("Yellow marker"),"Green marker":u("Green marker"),"Pink marker":u("Pink marker"),"Blue marker":u("Blue marker"),"Red pen":u("Red pen"),"Green pen":u("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.config.get("highlight.options");for(const t of u)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(u),this._addMenuBarButton(u)}_addRemoveHighlightButton(){const u=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",u("Remove highlight"),icons.eraser,null,de=>{de.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(u){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+u.model,u.title,getIconForType(u.type),u.model,de);function de(pe){pe.bind("isEnabled").to(t,"isEnabled"),pe.bind("isOn").to(t,"value",Le=>Le===u.model),pe.iconView.fillColor=u.color,pe.isToggleable=!0}}_addButton(u,t,de,pe,Le){const Ye=this.editor;Ye.ui.componentFactory.add(u,tt=>{const st=new ButtonView(tt),ht=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return st.set({label:ht,icon:de,tooltip:!0}),st.on("execute",()=>{Ye.execute("highlight",{value:pe}),Ye.editing.view.focus()}),Le(st),st})}_addDropdown(u){const t=this.editor,de=t.t,pe=t.ui.componentFactory,Le=u[0],Ye=u.reduce((tt,st)=>(tt[st.model]=st,tt),{});pe.add("highlight",tt=>{const st=t.commands.get("highlight"),ht=createDropdown(tt,SplitButtonView),mt=ht.buttonView;mt.set({label:de("Highlight"),tooltip:!0,lastExecuted:Le.model,commandValue:Le.model,isToggleable:!0}),mt.bind("icon").to(st,"value",_t=>getIconForType(bt(_t,"type"))),mt.bind("color").to(st,"value",_t=>bt(_t,"color")),mt.bind("commandValue").to(st,"value",_t=>bt(_t,"model")),mt.bind("isOn").to(st,"value",_t=>!!_t),mt.delegate("execute").to(ht);const gt=()=>{const _t=u.map(vt=>{const Tt=pe.create("highlight:"+vt.model);return this.listenTo(Tt,"execute",()=>{ht.buttonView.set({lastExecuted:vt.model})}),Tt});return _t.push(new ToolbarSeparatorView),_t.push(pe.create("removeHighlight")),_t};ht.bind("isEnabled").to(st,"isEnabled"),addToolbarToDropdown(ht,gt,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:de("Text highlight toolbar")}),bindToolbarIconStyleToActiveColor(ht),mt.on("execute",()=>{t.execute("highlight",{value:mt.commandValue})}),this.listenTo(ht,"execute",()=>{t.editing.view.focus()});function bt(_t,vt){const Tt=!_t||_t===mt.lastExecuted?mt.lastExecuted:_t;return Ye[Tt][vt]}return ht})}_addMenuBarButton(u){const t=this.editor,de=t.t,pe=t.commands.get("highlight");t.ui.componentFactory.add("menuBar:highlight",Le=>{const Ye=new MenuBarMenuView(Le);Ye.buttonView.set({label:de("Highlight"),icon:getIconForType("marker")}),Ye.bind("isEnabled").to(pe),Ye.buttonView.iconView.fillColor="transparent";const tt=new MenuBarMenuListView(Le);for(const mt of u){const gt=new MenuBarMenuListItemView(Le,Ye),bt=new MenuBarMenuListItemButtonView(Le);bt.set({label:mt.title,icon:getIconForType(mt.type),role:"menuitemradio",isToggleable:!0}),bt.iconView.fillColor=mt.color,bt.delegate("execute").to(Ye),bt.bind("isOn").to(pe,"value",_t=>_t===mt.model),bt.on("execute",()=>{t.execute("highlight",{value:mt.model}),t.editing.view.focus()}),gt.children.add(bt),tt.items.add(gt)}tt.items.add(new ListSeparatorView(Le));const st=new MenuBarMenuListItemView(Le,Ye),ht=new MenuBarMenuListItemButtonView(Le);return ht.set({label:de("Remove highlight"),icon:icons.eraser}),ht.delegate("execute").to(Ye),ht.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),st.children.add(ht),tt.items.add(st),Ye.panelView.children.add(tt),Ye})}}function bindToolbarIconStyleToActiveColor(me){me.buttonView.actionView.iconView.bind("fillColor").to(me.buttonView,"color")}function getIconForType(me){return me==="marker"?markerIcon:penIcon}class Highlight extends Plugin{static get requires(){return[HighlightEditing,HighlightUI]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HorizontalLineCommand extends Command{refresh(){const u=this.editor.model,t=u.schema,de=u.document.selection;this.isEnabled=isHorizontalLineAllowedInParent(de,t,u)}execute(){const u=this.editor.model;u.change(t=>{const de=t.createElement("horizontalLine");u.insertObject(de,null,null,{setSelection:"after"})})}}function isHorizontalLineAllowedInParent(me,u,t){const de=getInsertHorizontalLineParent(me,t);return u.checkChild(de,"horizontalLine")}function getInsertHorizontalLineParent(me,u){const de=findOptimalInsertionRange(me,u).start.parent;return de.isEmpty&&!de.is("element","$root")?de.parent:de}class HorizontalLineEditing extends Plugin{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model.schema,de=u.t,pe=u.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),pe.for("dataDowncast").elementToElement({model:"horizontalLine",view:(Le,{writer:Ye})=>Ye.createEmptyElement("hr")}),pe.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(Le,{writer:Ye})=>{const tt=de("Horizontal line"),st=Ye.createContainerElement("div",null,Ye.createEmptyElement("hr"));return Ye.addClass("ck-horizontal-line",st),Ye.setCustomProperty("hr",!0,st),toHorizontalLineWidget(st,Ye,tt)}}),pe.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),u.commands.add("horizontalLine",new HorizontalLineCommand(u))}}function toHorizontalLineWidget(me,u,t){return u.setCustomProperty("horizontalLine",!0,me),toWidget(me,u,{label:t})}class HorizontalLineUI extends Plugin{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get("horizontalLine"),Le=new u(t.locale),Ye=de.t;return Le.set({label:Ye("Horizontal line"),icon:icons.horizontalLine}),Le.bind("isEnabled").to(pe,"isEnabled"),this.listenTo(Le,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),Le}}class HorizontalLine extends Plugin{static get requires(){return[HorizontalLineEditing,HorizontalLineUI,Widget]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createInlineImageViewElement(me){return me.createContainerElement("span",{class:"image-inline"},me.createEmptyElement("img"))}function createBlockImageViewElement(me){return me.createContainerElement("figure",{class:"image"},[me.createEmptyElement("img"),me.createSlot("children")])}function getImgViewElementMatcher(me,u){const t=me.plugins.get("ImageUtils"),de=me.plugins.has("ImageInlineEditing")&&me.plugins.has("ImageBlockEditing");return Le=>t.isInlineImageView(Le)?de&&(Le.getStyle("display")=="block"||Le.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==u?null:pe(Le):null;function pe(Le){const Ye={name:!0};return Le.hasAttribute("src")&&(Ye.attributes=["src"]),Ye}}function determineImageTypeForInsertionAtSelection(me,u){const t=first(u.getSelectedBlocks());return!t||me.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function getSizeValueIfInPx(me){return me&&me.endsWith("px")?parseInt(me):null}function widthAndHeightStylesAreBothSet(me){const u=getSizeValueIfInPx(me.getStyle("width")),t=getSizeValueIfInPx(me.getStyle("height"));return!!(u&&t)}const IMAGE_WIDGETS_CLASSES_MATCH_REGEXP=/^(image|image-inline)$/;class ImageUtils extends Plugin{constructor(){super(...arguments);wt(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},de=null,pe=null,Le={}){const Ye=this.editor,tt=Ye.model,st=tt.document.selection,ht=determineImageTypeForInsertion(Ye,de||st,pe);t={...Object.fromEntries(st.getAttributes()),...t};for(const mt in t)tt.schema.checkAttribute(ht,mt)||delete t[mt];return tt.change(mt=>{const{setImageSizes:gt=!0}=Le,bt=mt.createElement(ht,t);return tt.insertObject(bt,de,null,{setSelection:"on",findOptimalPosition:!de&&ht!="imageInline"?"auto":void 0}),bt.parent?(gt&&this.setImageNaturalSizeAttributes(bt),bt):null})}setImageNaturalSizeAttributes(t){const de=t.getAttribute("src");de&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(pe=>{const Le=new global$1.window.Image;this._domEmitter.listenTo(Le,"load",()=>{!t.getAttribute("width")&&!t.getAttribute("height")&&this.editor.model.enqueueChange(pe.batch,Ye=>{Ye.setAttribute("width",Le.naturalWidth,t),Ye.setAttribute("height",Le.naturalHeight,t)}),this._domEmitter.stopListening(Le,"load")}),Le.src=de}))}getClosestSelectedImageWidget(t){const de=t.getFirstPosition();if(!de)return null;const pe=t.getSelectedElement();if(pe&&this.isImageWidget(pe))return pe;let Le=de.parent;for(;Le;){if(Le.is("element")&&this.isImageWidget(Le))return Le;Le=Le.parent}return null}getClosestSelectedImageElement(t){const de=t.getSelectedElement();return this.isImage(de)?de:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:IMAGE_WIDGETS_CLASSES_MATCH_REGEXP})}isImageAllowed(){const de=this.editor.model.document.selection;return isImageAllowedInParent(this.editor,de)&&isNotInsideImage(de)}toImageWidget(t,de,pe){return de.setCustomProperty("image",!0,t),toWidget(t,de,{label:()=>{const tt=this.findViewImgElement(t).getAttribute("alt");return tt?`${tt} ${pe}`:pe}})}isImageWidget(t){return!!t.getCustomProperty("image")&&isWidget(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const de=this.editor.editing.view;for(const{item:pe}of de.createRangeIn(t))if(this.isInlineImageView(pe))return pe}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function isImageAllowedInParent(me,u){if(determineImageTypeForInsertion(me,u,null)=="imageBlock"){const de=getInsertImageParent(u,me.model);if(me.model.schema.checkChild(de,"imageBlock"))return!0}else if(me.model.schema.checkChild(u.focus,"imageInline"))return!0;return!1}function isNotInsideImage(me){return[...me.focus.getAncestors()].every(u=>!u.is("element","imageBlock"))}function getInsertImageParent(me,u){const de=findOptimalInsertionRange(me,u).start.parent;return de.isEmpty&&!de.is("element","$root")?de.parent:de}function determineImageTypeForInsertion(me,u,t){const de=me.model.schema,pe=me.config.get("image.insert.type");return me.plugins.has("ImageBlockEditing")?me.plugins.has("ImageInlineEditing")?t||(pe==="inline"?"imageInline":pe!=="auto"?"imageBlock":u.is("selection")?determineImageTypeForInsertionAtSelection(de,u):de.checkChild(u,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class ImageTextAlternativeCommand extends Command{refresh(){const de=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!de,this.isEnabled&&de.hasAttribute("alt")?this.value=de.getAttribute("alt"):this.value=!1}execute(u){const t=this.editor,de=t.plugins.get("ImageUtils"),pe=t.model,Le=de.getClosestSelectedImageElement(pe.document.selection);pe.change(Ye=>{Ye.setAttribute("alt",u.newValue,Le)})}}class ImageTextAlternativeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new ImageTextAlternativeCommand(this.editor))}}class TextAlternativeFormView extends View{constructor(t){super(t);wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"labeledInput");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"_focusables");wt(this,"_focusCycler");const de=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(de("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(de("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(t,de,pe,Le){const Ye=new ButtonView(this.locale);return Ye.set({label:t,icon:de,tooltip:!0}),Ye.extendTemplate({attributes:{class:pe}}),Le&&Ye.delegate("execute").to(this,Le),Ye}_createLabeledInputView(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputText);return de.label=t("Text alternative"),de}}function repositionContextualBalloon$1(me){const u=me.plugins.get("ContextualBalloon");if(me.plugins.get("ImageUtils").getClosestSelectedImageWidget(me.editing.view.document.selection)){const de=getBalloonPositionData(me);u.updatePosition(de)}}function getBalloonPositionData(me){const u=me.editing.view,t=BalloonPanelView.defaultPositions,de=me.plugins.get("ImageUtils");return{target:u.domConverter.mapViewToDom(de.getClosestSelectedImageWidget(u.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class ImageTextAlternativeUI extends Plugin{constructor(){super(...arguments);wt(this,"_balloon");wt(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const t=this.editor,de=t.t;t.ui.componentFactory.add("imageTextAlternative",pe=>{const Le=t.commands.get("imageTextAlternative"),Ye=new ButtonView(pe);return Ye.set({label:de("Change image text alternative"),icon:icons.textAlternative,tooltip:!0}),Ye.bind("isEnabled").to(Le,"isEnabled"),Ye.bind("isOn").to(Le,"value",tt=>!!tt),this.listenTo(Ye,"execute",()=>{this._showForm()}),Ye})}_createForm(){const t=this.editor,pe=t.editing.view.document,Le=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(TextAlternativeFormView))(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(Ye,tt)=>{this._hideForm(!0),tt()}),this.listenTo(t.ui,"update",()=>{Le.getClosestSelectedImageWidget(pe.selection)?this._isVisible&&repositionContextualBalloon$1(t):this._hideForm(!0)}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const t=this.editor,de=t.commands.get("imageTextAlternative"),pe=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(t)}),pe.fieldView.value=pe.fieldView.element.value=de.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class ImageTextAlternative extends Plugin{static get requires(){return[ImageTextAlternativeEditing,ImageTextAlternativeUI]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function upcastImageFigure(me){const u=(t,de,pe)=>{if(!pe.consumable.test(de.viewItem,{name:!0,classes:"image"}))return;const Le=me.findViewImgElement(de.viewItem);if(!Le||!pe.consumable.test(Le,{name:!0}))return;pe.consumable.consume(de.viewItem,{name:!0,classes:"image"});const Ye=pe.convertItem(Le,de.modelCursor),tt=first(Ye.modelRange.getItems());if(!tt){pe.consumable.revert(de.viewItem,{name:!0,classes:"image"});return}pe.convertChildren(de.viewItem,tt),pe.updateConversionResult(tt,de)};return t=>{t.on("element:figure",u)}}function downcastSrcsetAttribute(me,u){const t=(de,pe,Le)=>{if(!Le.consumable.consume(pe.item,de.name))return;const Ye=Le.writer,tt=Le.mapper.toViewElement(pe.item),st=me.findViewImgElement(tt);pe.attributeNewValue===null?(Ye.removeAttribute("srcset",st),Ye.removeAttribute("sizes",st)):pe.attributeNewValue&&(Ye.setAttribute("srcset",pe.attributeNewValue,st),Ye.setAttribute("sizes","100vw",st))};return de=>{de.on(`attribute:srcset:${u}`,t)}}function downcastImageAttribute(me,u,t){const de=(pe,Le,Ye)=>{if(!Ye.consumable.consume(Le.item,pe.name))return;const tt=Ye.writer,st=Ye.mapper.toViewElement(Le.item),ht=me.findViewImgElement(st);tt.setAttribute(Le.attributeKey,Le.attributeNewValue||"",ht)};return pe=>{pe.on(`attribute:${t}:${u}`,de)}}class ImageLoadObserver extends Observer{observe(u){this.listenTo(u,"load",(t,de)=>{const pe=de.target;this.checkShouldIgnoreEventFromTarget(pe)||pe.tagName=="IMG"&&this._fireEvents(de)},{useCapture:!0})}stopObserving(u){this.stopListening(u)}_fireEvents(u){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",u))}}class InsertImageCommand extends Command{constructor(u){super(u);const t=u.config.get("image.insert.type");u.plugins.has("ImageBlockEditing")||t==="block"&&logWarning("image-block-plugin-required"),u.plugins.has("ImageInlineEditing")||t==="inline"&&logWarning("image-inline-plugin-required")}refresh(){const u=this.editor.plugins.get("ImageUtils");this.isEnabled=u.isImageAllowed()}execute(u){const t=toArray$2(u.source),de=this.editor.model.document.selection,pe=this.editor.plugins.get("ImageUtils"),Le=Object.fromEntries(de.getAttributes());t.forEach((Ye,tt)=>{const st=de.getSelectedElement();if(typeof Ye=="string"&&(Ye={src:Ye}),tt&&st&&pe.isImage(st)){const ht=this.editor.model.createPositionAfter(st);pe.insertImage({...Ye,...Le},ht,u.imageType)}else u.breakBlock?pe.insertImage({...Ye,...Le},de.getFirstPosition(),u.imageType):pe.insertImage({...Ye,...Le},null,u.imageType)})}}class ReplaceImageSourceCommand extends Command{constructor(u){super(u),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),de=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(de),this.value=this.isEnabled?de.getAttribute("src"):null}execute(u){const t=this.editor.model.document.selection.getSelectedElement(),de=this.editor.plugins.get("ImageUtils");this.editor.model.change(pe=>{pe.setAttribute("src",u.source,t),this.cleanupImage(pe,t),de.setImageNaturalSizeAttributes(t)})}cleanupImage(u,t){u.removeAttribute("srcset",t),u.removeAttribute("sizes",t),u.removeAttribute("sources",t),u.removeAttribute("width",t),u.removeAttribute("height",t),u.removeAttribute("alt",t)}}class ImageEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.conversion;u.editing.view.addObserver(ImageLoadObserver),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const de=new InsertImageCommand(u),pe=new ReplaceImageSourceCommand(u);u.commands.add("insertImage",de),u.commands.add("replaceImageSource",pe),u.commands.add("imageInsert",de)}}class ImageSizeAttributes extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(u){const t=this.editor,de=t.plugins.get("ImageUtils"),pe=u==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:pe,styles:{width:/.+/}},model:{key:"width",value:Ye=>widthAndHeightStylesAreBothSet(Ye)?getSizeValueIfInPx(Ye.getStyle("width")):null}}).attributeToAttribute({view:{name:pe,key:"width"},model:"width"}).attributeToAttribute({view:{name:pe,styles:{height:/.+/}},model:{key:"height",value:Ye=>widthAndHeightStylesAreBothSet(Ye)?getSizeValueIfInPx(Ye.getStyle("height")):null}}).attributeToAttribute({view:{name:pe,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(Ye=>{Le(Ye,"width","width",!0,!0),Le(Ye,"height","height",!0,!0)}),t.conversion.for("dataDowncast").add(Ye=>{Le(Ye,"width","width",!1),Le(Ye,"height","height",!1)});function Le(Ye,tt,st,ht,mt=!1){Ye.on(`attribute:${tt}:${u}`,(gt,bt,_t)=>{if(!_t.consumable.consume(bt.item,gt.name))return;const vt=_t.writer,Tt=_t.mapper.toViewElement(bt.item),St=de.findViewImgElement(Tt);bt.attributeNewValue!==null?vt.setAttribute(st,bt.attributeNewValue,St):vt.removeAttribute(st,St);const Rt=bt.item.getAttribute("width"),Pt=bt.item.getAttribute("height"),Ot=Rt&&Pt;if(Ot&&mt&&vt.setAttribute("loading","lazy",St),bt.item.hasAttribute("sources"))return;const Mt=bt.item.hasAttribute("resizedWidth");u==="imageInline"&&!Mt&&!ht||Ot&&vt.setStyle("aspect-ratio",`${Rt}/${Pt}`,St)})}}}class ImageTypeCommand extends Command{constructor(t,de){super(t);wt(this,"_modelElementName");this._modelElementName=de}refresh(){const de=this.editor.plugins.get("ImageUtils"),pe=de.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=de.isInlineImage(pe):this.isEnabled=de.isBlockImage(pe)}execute(t={}){const de=this.editor,pe=this.editor.model,Le=de.plugins.get("ImageUtils"),Ye=Le.getClosestSelectedImageElement(pe.document.selection),tt=Object.fromEntries(Ye.getAttributes());return!tt.src&&!tt.uploadId?null:pe.change(st=>{const{setImageSizes:ht=!0}=t,mt=Array.from(pe.markers).filter(_t=>_t.getRange().containsItem(Ye)),gt=Le.insertImage(tt,pe.createSelection(Ye,"on"),this._modelElementName,{setImageSizes:ht});if(!gt)return null;const bt=st.createRangeOn(gt);for(const _t of mt){const vt=_t.getRange(),Tt=vt.root.rootName!="$graveyard"?vt.getJoined(bt,!0):bt;st.updateMarker(_t,{range:Tt})}return{oldElement:Ye,newElement:gt}})}}class ImagePlaceholder extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const u=this.editor.model.schema;u.isRegistered("imageBlock")&&u.extend("imageBlock",{allowAttributes:["placeholder"]}),u.isRegistered("imageInline")&&u.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const u=this.editor,t=u.conversion,de=u.plugins.get("ImageUtils");t.for("editingDowncast").add(pe=>{pe.on("attribute:placeholder",(Le,Ye,tt)=>{if(!tt.consumable.test(Ye.item,Le.name)||!Ye.item.is("element","imageBlock")&&!Ye.item.is("element","imageInline"))return;tt.consumable.consume(Ye.item,Le.name);const st=tt.writer,ht=tt.mapper.toViewElement(Ye.item),mt=de.findViewImgElement(ht);Ye.attributeNewValue?(st.addClass("image_placeholder",mt),st.setStyle("background-image",`url(${Ye.attributeNewValue})`,mt),st.setCustomProperty("editingPipeline:doNotReuseOnce",!0,mt)):(st.removeClass("image_placeholder",mt),st.removeStyle("background-image",mt))})})}_setupLoadListener(){const u=this.editor,t=u.model,de=u.editing,pe=de.view,Le=u.plugins.get("ImageUtils");pe.addObserver(ImageLoadObserver),this.listenTo(pe.document,"imageLoaded",(Ye,tt)=>{const st=pe.domConverter.mapDomToView(tt.target);if(!st)return;const ht=Le.getImageWidgetFromImageView(st);if(!ht)return;const mt=de.mapper.toModelElement(ht);!mt||!mt.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},gt=>{gt.removeAttribute("placeholder",mt)})})}}class ImageBlockEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),u.plugins.has("ImageInlineEditing")&&(u.commands.add("imageTypeBlock",new ImageTypeCommand(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const u=this.editor,t=u.t,de=u.conversion,pe=u.plugins.get("ImageUtils");de.for("dataDowncast").elementToStructure({model:"imageBlock",view:(Le,{writer:Ye})=>createBlockImageViewElement(Ye)}),de.for("editingDowncast").elementToStructure({model:"imageBlock",view:(Le,{writer:Ye})=>pe.toImageWidget(createBlockImageViewElement(Ye),Ye,t("image widget"))}),de.for("downcast").add(downcastImageAttribute(pe,"imageBlock","src")).add(downcastImageAttribute(pe,"imageBlock","alt")).add(downcastSrcsetAttribute(pe,"imageBlock")),de.for("upcast").elementToElement({view:getImgViewElementMatcher(u,"imageBlock"),model:(Le,{writer:Ye})=>Ye.createElement("imageBlock",Le.hasAttribute("src")?{src:Le.getAttribute("src")}:void 0)}).add(upcastImageFigure(pe))}_setupClipboardIntegration(){const u=this.editor,t=u.model,de=u.editing.view,pe=u.plugins.get("ImageUtils"),Le=u.plugins.get("ClipboardPipeline");this.listenTo(Le,"inputTransformation",(Ye,tt)=>{const st=Array.from(tt.content.getChildren());let ht;if(!st.every(pe.isInlineImageView))return;tt.targetRanges?ht=u.editing.mapper.toModelRange(tt.targetRanges[0]):ht=t.document.selection.getFirstRange();const mt=t.createSelection(ht);if(determineImageTypeForInsertionAtSelection(t.schema,mt)==="imageBlock"){const gt=new UpcastWriter(de.document),bt=st.map(_t=>gt.createElement("figure",{class:"image"},_t));tt.content=gt.createDocumentFragment(bt)}}),this.listenTo(Le,"contentInsertion",(Ye,tt)=>{tt.method==="paste"&&t.change(st=>{const ht=st.createRangeIn(tt.content);for(const mt of ht.getItems())mt.is("element","imageBlock")&&pe.setImageNaturalSizeAttributes(mt)})})}}class ImageInsertFormView extends View{constructor(t,de=[]){super(t);wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"_focusables");wt(this,"_focusCycler");wt(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.children=this.createCollection(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const pe of de)this.children.add(pe),this._focusables.add(pe),pe instanceof CollapsibleView&&this._focusables.addMany(pe.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),submitHandler({view:this});for(const de of this._focusables)this.focusTracker.add(de.element);this.keystrokes.listenTo(this.element);const t=de=>de.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ImageInsertUI extends Plugin{constructor(t){super(t);wt(this,"dropdownView");wt(this,"_integrations",new Map);t.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const t=this.editor,de=t.model.document.selection,pe=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=pe.isImage(de.getSelectedElement())});const Le=tt=>this._createToolbarComponent(tt),Ye=tt=>this._createMenuBarComponent(tt);t.ui.componentFactory.add("insertImage",Le),t.ui.componentFactory.add("imageInsert",Le),t.ui.componentFactory.add("menuBar:insertImage",Ye)}registerIntegration({name:t,observable:de,buttonViewCreator:pe,formViewCreator:Le,menuBarButtonViewCreator:Ye,requiresForm:tt=!1,override:st=!1}){this._integrations.has(t)&&!st&&logWarning("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:de,buttonViewCreator:pe,menuBarButtonViewCreator:Ye,formViewCreator:Le,requiresForm:tt})}_createToolbarComponent(t){const de=this.editor,pe=t.t,Le=this._prepareIntegrations();if(!Le.length)return null;let Ye;const tt=Le[0];if(Le.length==1){if(!tt.requiresForm)return tt.buttonViewCreator(!0);Ye=tt.buttonViewCreator(!0)}else{const mt=tt.buttonViewCreator(!1);Ye=new SplitButtonView(t,mt),Ye.tooltip=!0,Ye.bind("label").to(this,"isImageSelected",gt=>pe(gt?"Replace image":"Insert image"))}const st=this.dropdownView=createDropdown(t,Ye),ht=Le.map(({observable:mt})=>typeof mt=="function"?mt():mt);return st.bind("isEnabled").toMany(ht,"isEnabled",(...mt)=>mt.some(gt=>gt)),st.once("change:isOpen",()=>{const mt=Le.flatMap(({formViewCreator:bt})=>bt(Le.length==1)),gt=new ImageInsertFormView(de.locale,mt);st.panelView.children.add(gt)}),st}_createMenuBarComponent(t){const de=t.t,pe=this._prepareIntegrations();if(!pe.length)return null;const Le=pe.flatMap(({menuBarButtonViewCreator:st})=>st(pe.length==1)),Ye=new MenuBarMenuView(t),tt=new MenuBarMenuListView(t);Ye.panelView.children.add(tt),Ye.buttonView.set({icon:icons.image,label:de("Image")});for(const st of Le){const ht=new MenuBarMenuListItemView(t,Ye);ht.children.add(st),tt.items.add(ht),st.delegate("execute").to(Ye)}return Ye}_prepareIntegrations(){const de=this.editor.config.get("image.insert.integrations"),pe=[];if(!de.length)return logWarning("image-insert-integrations-not-specified"),pe;for(const Le of de){if(!this._integrations.has(Le)){["upload","assetManager","url"].includes(Le)||logWarning("image-insert-unknown-integration",{item:Le});continue}pe.push(this._integrations.get(Le))}return pe.length||logWarning("image-insert-integrations-not-registered"),pe}}class ImageBlock extends Plugin{static get requires(){return[ImageBlockEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class ImageInlineEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),u.plugins.has("ImageBlockEditing")&&(u.commands.add("imageTypeInline",new ImageTypeCommand(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const u=this.editor,t=u.t,de=u.conversion,pe=u.plugins.get("ImageUtils");de.for("dataDowncast").elementToElement({model:"imageInline",view:(Le,{writer:Ye})=>Ye.createEmptyElement("img")}),de.for("editingDowncast").elementToStructure({model:"imageInline",view:(Le,{writer:Ye})=>pe.toImageWidget(createInlineImageViewElement(Ye),Ye,t("image widget"))}),de.for("downcast").add(downcastImageAttribute(pe,"imageInline","src")).add(downcastImageAttribute(pe,"imageInline","alt")).add(downcastSrcsetAttribute(pe,"imageInline")),de.for("upcast").elementToElement({view:getImgViewElementMatcher(u,"imageInline"),model:(Le,{writer:Ye})=>Ye.createElement("imageInline",Le.hasAttribute("src")?{src:Le.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const u=this.editor,t=u.model,de=u.editing.view,pe=u.plugins.get("ImageUtils"),Le=u.plugins.get("ClipboardPipeline");this.listenTo(Le,"inputTransformation",(Ye,tt)=>{const st=Array.from(tt.content.getChildren());let ht;if(!st.every(pe.isBlockImageView))return;tt.targetRanges?ht=u.editing.mapper.toModelRange(tt.targetRanges[0]):ht=t.document.selection.getFirstRange();const mt=t.createSelection(ht);if(determineImageTypeForInsertionAtSelection(t.schema,mt)==="imageInline"){const gt=new UpcastWriter(de.document),bt=st.map(_t=>_t.childCount===1?(Array.from(_t.getAttributes()).forEach(vt=>gt.setAttribute(...vt,pe.findViewImgElement(_t))),_t.getChild(0)):_t);tt.content=gt.createDocumentFragment(bt)}}),this.listenTo(Le,"contentInsertion",(Ye,tt)=>{tt.method==="paste"&&t.change(st=>{const ht=st.createRangeIn(tt.content);for(const mt of ht.getItems())mt.is("element","imageInline")&&pe.setImageNaturalSizeAttributes(mt)})})}}class ImageInline extends Plugin{static get requires(){return[ImageInlineEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class Image extends Plugin{static get requires(){return[ImageBlock,ImageInline]}static get pluginName(){return"Image"}static get isOfficialPlugin(){return!0}}class ImageCaptionUtils extends Plugin{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}getCaptionFromImageModelElement(u){for(const t of u.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(u){const t=this.editor.plugins.get("ImageUtils"),de=u.getFirstPosition().findAncestor("caption");return de&&t.isBlockImage(de.parent)?de:null}matchImageCaptionViewElement(u){const t=this.editor.plugins.get("ImageUtils");return u.name=="figcaption"&&t.isBlockImageView(u.parent)?{name:!0}:null}}class ToggleImageCaptionCommand extends Command{refresh(){const u=this.editor,t=u.plugins.get("ImageCaptionUtils"),de=u.plugins.get("ImageUtils");if(!u.plugins.has(ImageBlockEditing)){this.isEnabled=!1,this.value=!1;return}const pe=u.model.document.selection,Le=pe.getSelectedElement();if(!Le){const Ye=t.getCaptionFromModelSelection(pe);this.isEnabled=!!Ye,this.value=!!Ye;return}this.isEnabled=de.isImage(Le),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(Le):this.value=!1}execute(u={}){const{focusCaptionOnShow:t}=u;this.editor.model.change(de=>{this.value?this._hideImageCaption(de):this._showImageCaption(de,t)})}_showImageCaption(u,t){const pe=this.editor.model.document.selection,Le=this.editor.plugins.get("ImageCaptionEditing"),Ye=this.editor.plugins.get("ImageUtils");let tt=pe.getSelectedElement();const st=Le._getSavedCaption(tt);Ye.isInlineImage(tt)&&(this.editor.execute("imageTypeBlock"),tt=pe.getSelectedElement());const ht=st||u.createElement("caption");u.append(ht,tt),t&&u.setSelection(ht,"in")}_hideImageCaption(u){const t=this.editor,de=t.model.document.selection,pe=t.plugins.get("ImageCaptionEditing"),Le=t.plugins.get("ImageCaptionUtils");let Ye=de.getSelectedElement(),tt;Ye?tt=Le.getCaptionFromImageModelElement(Ye):(tt=Le.getCaptionFromModelSelection(de),Ye=tt.parent),pe._saveCaption(Ye,tt),u.setSelection(Ye,"on"),u.remove(tt)}}class ImageCaptionEditing extends Plugin{constructor(t){super(t);wt(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[ImageUtils,ImageCaptionUtils]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model.schema;de.isRegistered("caption")?de.extend("caption",{allowIn:"imageBlock"}):de.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleImageCaption",new ToggleImageCaptionCommand(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const t=this.editor,de=t.editing.view,pe=t.plugins.get("ImageUtils"),Le=t.plugins.get("ImageCaptionUtils"),Ye=t.t;t.conversion.for("upcast").elementToElement({view:tt=>Le.matchImageCaptionViewElement(tt),model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(tt,{writer:st})=>pe.isBlockImage(tt.parent)?st.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(tt,{writer:st})=>{if(!pe.isBlockImage(tt.parent))return null;const ht=st.createEditableElement("figcaption");st.setCustomProperty("imageCaption",!0,ht),ht.placeholder=Ye("Enter image caption"),enablePlaceholder({view:de,element:ht,keepOnFocus:!0});const mt=tt.parent.getAttribute("alt"),gt=mt?Ye("Caption for image: %0",[mt]):Ye("Caption for the image");return toWidgetEditable(ht,st,{label:gt})}})}_setupImageTypeCommandsIntegration(){const t=this.editor,de=t.plugins.get("ImageUtils"),pe=t.plugins.get("ImageCaptionUtils"),Le=t.commands.get("imageTypeInline"),Ye=t.commands.get("imageTypeBlock"),tt=st=>{if(!st.return)return;const{oldElement:ht,newElement:mt}=st.return;/* istanbul ignore if: paranoid check -- @preserve */if(!ht)return;if(de.isBlockImage(ht)){const bt=pe.getCaptionFromImageModelElement(ht);if(bt){this._saveCaption(mt,bt);return}}const gt=this._getSavedCaption(ht);gt&&this._saveCaption(mt,gt)};Le&&this.listenTo(Le,"execute",tt,{priority:"low"}),Ye&&this.listenTo(Ye,"execute",tt,{priority:"low"})}_getSavedCaption(t){const de=this._savedCaptionsMap.get(t);return de?Element.fromJSON(de):null}_saveCaption(t,de){this._savedCaptionsMap.set(t,de.toJSON())}_registerCaptionReconversion(){const t=this.editor,de=t.model,pe=t.plugins.get("ImageUtils"),Le=t.plugins.get("ImageCaptionUtils");de.document.on("change:data",()=>{const Ye=de.document.differ.getChanges();for(const tt of Ye){if(tt.attributeKey!=="alt")continue;const st=tt.range.start.nodeAfter;if(pe.isBlockImage(st)){const ht=Le.getCaptionFromImageModelElement(st);if(!ht)return;t.editing.reconvertItem(ht)}}})}}class ImageCaptionUI extends Plugin{static get requires(){return[ImageCaptionUtils]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.editing.view,de=u.plugins.get("ImageCaptionUtils"),pe=u.t;u.ui.componentFactory.add("toggleImageCaption",Le=>{const Ye=u.commands.get("toggleImageCaption"),tt=new ButtonView(Le);return tt.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),tt.bind("isOn","isEnabled").to(Ye,"value","isEnabled"),tt.bind("label").to(Ye,"value",st=>pe(st?"Toggle caption off":"Toggle caption on")),this.listenTo(tt,"execute",()=>{u.execute("toggleImageCaption",{focusCaptionOnShow:!0});const st=de.getCaptionFromModelSelection(u.model.document.selection);if(st){const ht=u.editing.mapper.toViewElement(st);t.scrollToTheSelection(),t.change(mt=>{mt.addClass("image__caption_highlighted",ht)})}u.editing.view.focus()}),tt})}}class ImageCaption extends Plugin{static get requires(){return[ImageCaptionEditing,ImageCaptionUI]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function createImageTypeRegExp(me){const u=me.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${u.join("|")})$`)}function fetchLocalImage(me){return new Promise((u,t)=>{const de=me.getAttribute("src");fetch(de).then(pe=>pe.blob()).then(pe=>{const Le=getImageMimeType(pe,de),tt=`image.${Le.replace("image/","")}`,st=new File([pe],tt,{type:Le});u(st)}).catch(pe=>pe&&pe.name==="TypeError"?convertLocalImageOnCanvas(de).then(u).catch(t):t(pe))})}function isLocalImage(me,u){return!me.isInlineImageView(u)||!u.getAttribute("src")?!1:!!u.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!u.getAttribute("src").match(/^blob:/g)}function getImageMimeType(me,u){return me.type?me.type:u.match(/data:(image\/\w+);base64/)?u.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function convertLocalImageOnCanvas(me){return getBlobFromCanvas(me).then(u=>{const t=getImageMimeType(u,me),pe=`image.${t.replace("image/","")}`;return new File([u],pe,{type:t})})}function getBlobFromCanvas(me){return new Promise((u,t)=>{const de=global$1.document.createElement("img");de.addEventListener("load",()=>{const pe=global$1.document.createElement("canvas");pe.width=de.width,pe.height=de.height,pe.getContext("2d").drawImage(de,0,0),pe.toBlob(Ye=>Ye?u(Ye):t())}),de.addEventListener("error",()=>t()),de.src=me})}class ImageUploadUI extends Plugin{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),u.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),u.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),u.plugins.has("ImageInsertUI")&&u.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>u.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get("uploadImage"),Le=t.config.get("image.upload.types"),Ye=createImageTypeRegExp(Le),tt=new u(t.locale),st=de.t;return tt.set({acceptedType:Le.map(ht=>`image/${ht}`).join(","),allowMultipleFiles:!0,label:st("Upload from computer"),icon:icons.imageUpload}),tt.bind("isEnabled").to(pe),tt.on("done",(ht,mt)=>{const gt=Array.from(mt).filter(bt=>Ye.test(bt.type));gt.length&&(t.execute("uploadImage",{file:gt}),t.editing.view.focus())}),tt}_createToolbarButton(){const u=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),de=this.editor.commands.get("uploadImage"),pe=this._createButton(FileDialogButtonView);return pe.tooltip=!0,pe.bind("label").to(t,"isImageSelected",de,"isAccessAllowed",(Le,Ye)=>u(Ye?Le?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),pe}_createDropdownButton(){const u=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),de=this._createButton(FileDialogButtonView);return de.withText=!0,de.bind("label").to(t,"isImageSelected",pe=>u(pe?"Replace from computer":"Upload from computer")),de.on("execute",()=>{t.dropdownView.isOpen=!1}),de}_createMenuBarButton(u){const t=this.editor.locale.t,de=this._createButton(MenuBarMenuListItemFileDialogButtonView);switch(de.withText=!0,u){case"standalone":de.label=t("Image from computer");break;case"insertOnly":de.label=t("Image");break;case"insertNested":de.label=t("From computer");break}return de}}class ImageUploadProgress extends Plugin{constructor(t){super(t);wt(this,"placeholder");wt(this,"uploadStatusChange",(t,de,pe)=>{const Le=this.editor,Ye=de.item,tt=Ye.getAttribute("uploadId");if(!pe.consumable.consume(de.item,t.name))return;const st=Le.plugins.get("ImageUtils"),ht=Le.plugins.get(FileRepository),mt=tt?de.attributeNewValue:null,gt=this.placeholder,bt=Le.editing.mapper.toViewElement(Ye),_t=pe.writer;if(mt=="reading"){_startAppearEffect(bt,_t),_showPlaceholder(st,gt,bt,_t);return}if(mt=="uploading"){const vt=ht.loaders.get(tt);_startAppearEffect(bt,_t),vt?(_hidePlaceholder(bt,_t),_showProgressBar(bt,_t,vt,Le.editing.view),_displayLocalImage(st,bt,_t,vt)):_showPlaceholder(st,gt,bt,_t);return}mt=="complete"&&ht.loaders.get(tt)&&_showCompleteIcon(bt,_t,Le.editing.view),_hideProgressBar(bt,_t),_hidePlaceholder(bt,_t),_stopAppearEffect(bt,_t)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function _startAppearEffect(me,u){me.hasClass("ck-appear")||u.addClass("ck-appear",me)}function _stopAppearEffect(me,u){u.removeClass("ck-appear",me)}function _showPlaceholder(me,u,t,de){t.hasClass("ck-image-upload-placeholder")||de.addClass("ck-image-upload-placeholder",t);const pe=me.findViewImgElement(t);pe.getAttribute("src")!==u&&de.setAttribute("src",u,pe),_getUIElement(t,"placeholder")||de.insert(de.createPositionAfter(pe),_createPlaceholder(de))}function _hidePlaceholder(me,u){me.hasClass("ck-image-upload-placeholder")&&u.removeClass("ck-image-upload-placeholder",me),_removeUIElement(me,u,"placeholder")}function _showProgressBar(me,u,t,de){const pe=_createProgressBar(u);u.insert(u.createPositionAt(me,"end"),pe),t.on("change:uploadedPercent",(Le,Ye,tt)=>{de.change(st=>{st.setStyle("width",tt+"%",pe)})})}function _hideProgressBar(me,u){_removeUIElement(me,u,"progressBar")}function _showCompleteIcon(me,u,t){const de=u.createUIElement("div",{class:"ck-image-upload-complete-icon"});u.insert(u.createPositionAt(me,"end"),de),setTimeout(()=>{t.change(pe=>pe.remove(pe.createRangeOn(de)))},3e3)}function _createProgressBar(me){const u=me.createUIElement("div",{class:"ck-progress-bar"});return me.setCustomProperty("progressBar",!0,u),u}function _createPlaceholder(me){const u=me.createUIElement("div",{class:"ck-upload-placeholder-loader"});return me.setCustomProperty("placeholder",!0,u),u}function _getUIElement(me,u){for(const t of me.getChildren())if(t.getCustomProperty(u))return t}function _removeUIElement(me,u,t){const de=_getUIElement(me,t);de&&u.remove(u.createRangeOn(de))}function _displayLocalImage(me,u,t,de){if(de.data){const pe=me.findViewImgElement(u);t.setAttribute("src",de.data,pe)}}class UploadImageCommand extends Command{constructor(u){super(u),this.set("isAccessAllowed",!0)}refresh(){const u=this.editor,t=u.plugins.get("ImageUtils"),de=u.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(de)}execute(u){const t=toArray$2(u.file),de=this.editor.model.document.selection,pe=this.editor.plugins.get("ImageUtils"),Le=Object.fromEntries(de.getAttributes());t.forEach((Ye,tt)=>{const st=de.getSelectedElement();if(tt&&st&&pe.isImage(st)){const ht=this.editor.model.createPositionAfter(st);this._uploadImage(Ye,Le,ht)}else this._uploadImage(Ye,Le)})}_uploadImage(u,t,de){const pe=this.editor,Ye=pe.plugins.get(FileRepository).createLoader(u),tt=pe.plugins.get("ImageUtils");Ye&&tt.insertImage({...t,uploadId:Ye.id},de)}}class ImageUploadEditing extends Plugin{constructor(t){super(t);wt(this,"_uploadImageElements");wt(this,"_uploadedImages",new Map);t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[FileRepository,Notification,ClipboardPipeline,ImageUtils]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model.document,pe=t.conversion,Le=t.plugins.get(FileRepository),Ye=t.plugins.get("ImageUtils"),tt=t.plugins.get("ClipboardPipeline"),st=createImageTypeRegExp(t.config.get("image.upload.types")),ht=new UploadImageCommand(t);t.commands.add("uploadImage",ht),t.commands.add("imageUpload",ht),pe.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(mt=>mt.on("element:img",(gt,bt,_t)=>{if(!_t.consumable.test(bt.viewItem,{attributes:["data-ck-upload-id"]}))return;const vt=bt.viewItem.getAttribute("data-ck-upload-id");if(!vt)return;const[Tt]=Array.from(bt.modelRange.getItems({shallow:!0})),St=Le.loaders.get(vt);Tt&&(_t.writer.setAttribute("uploadId",vt,Tt),_t.consumable.consume(bt.viewItem,{attributes:["data-ck-upload-id"]}),St&&St.data&&_t.writer.setAttribute("uploadStatus",St.status,Tt))},{priority:"low"})),this.listenTo(t.editing.view.document,"clipboardInput",(mt,gt)=>{if(isHtmlIncluded(gt.dataTransfer))return;const bt=Array.from(gt.dataTransfer.files).filter(vt=>vt?st.test(vt.type):!1);if(!bt.length)return;if(mt.stop(),t.model.change(vt=>{gt.targetRanges&&vt.setSelection(gt.targetRanges.map(Tt=>t.editing.mapper.toModelRange(Tt))),t.execute("uploadImage",{file:bt})}),!t.commands.get("uploadImage").isAccessAllowed){const vt=t.plugins.get("Notification"),Tt=t.locale.t;vt.showWarning(Tt("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(tt,"inputTransformation",(mt,gt)=>{const bt=Array.from(t.editing.view.createRangeIn(gt.content)).map(vt=>vt.item).filter(vt=>isLocalImage(Ye,vt)&&!vt.getAttribute("uploadProcessed")).map(vt=>({promise:fetchLocalImage(vt),imageElement:vt}));if(!bt.length)return;const _t=new UpcastWriter(t.editing.view.document);for(const vt of bt){_t.setAttribute("uploadProcessed",!0,vt.imageElement);const Tt=Le.createLoader(vt.promise);Tt&&(_t.setAttribute("src","",vt.imageElement),_t.setAttribute("uploadId",Tt.id,vt.imageElement))}}),t.editing.view.document.on("dragover",(mt,gt)=>{gt.preventDefault()}),de.on("change",()=>{const mt=de.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),gt=new Set;for(const bt of mt)if(bt.type=="insert"&&bt.name!="$text"){const _t=bt.position.nodeAfter,vt=bt.position.root.rootName=="$graveyard";for(const Tt of getImagesFromChangeItem(t,_t)){const St=Tt.getAttribute("uploadId");if(!St)continue;const Rt=Le.loaders.get(St);if(!Rt){!vt&&this._uploadedImages.has(St)&&t.model.enqueueChange({isUndoable:!1},Pt=>{Pt.setAttribute("uploadStatus","complete",Tt),this.fire("uploadComplete",{data:this._uploadedImages.get(St),imageElement:Tt})});continue}vt?gt.has(St)||Array.from(this._uploadImageElements.get(St)).every(Ot=>Ot.root.rootName=="$graveyard")&&Rt.abort():(gt.add(St),this._uploadImageElements.has(St)?this._uploadImageElements.get(St).add(Tt):this._uploadImageElements.set(St,new Set([Tt])),Rt.status=="idle"&&this._readAndUpload(Rt))}}}),this.on("uploadComplete",(mt,{imageElement:gt,data:bt})=>{const _t=bt.urls?bt.urls:bt;this.editor.model.change(vt=>{vt.setAttribute("src",_t.default,gt),this._parseAndSetSrcsetAttributeOnImage(_t,gt,vt),Ye.setImageNaturalSizeAttributes(gt)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(t){const de=this.editor,pe=de.model,Le=de.locale.t,Ye=de.plugins.get(FileRepository),tt=de.plugins.get(Notification),st=de.plugins.get("ImageUtils"),ht=this._uploadImageElements;return pe.enqueueChange({isUndoable:!1},gt=>{const bt=ht.get(t.id);for(const _t of bt)gt.setAttribute("uploadStatus","reading",_t)}),t.read().then(()=>{const gt=t.upload();de.ui&&de.ui.ariaLiveAnnouncer.announce(Le("Uploading image"));for(const bt of ht.get(t.id)){/* istanbul ignore next -- @preserve */if(env.isSafari){const _t=de.editing.mapper.toViewElement(bt),vt=st.findViewImgElement(_t);de.editing.view.once("render",()=>{if(!vt.parent)return;const Tt=de.editing.view.domConverter.mapViewToDom(vt.parent);if(!Tt)return;const St=Tt.style.display;Tt.style.display="none",Tt._ckHack=Tt.offsetHeight,Tt.style.display=St})}pe.enqueueChange({isUndoable:!1},_t=>{_t.setAttribute("uploadStatus","uploading",bt)})}return gt}).then(gt=>{pe.enqueueChange({isUndoable:!1},bt=>{for(const _t of ht.get(t.id))bt.setAttribute("uploadStatus","complete",_t),this.fire("uploadComplete",{data:gt,imageElement:_t});de.ui&&de.ui.ariaLiveAnnouncer.announce(Le("Image upload complete")),this._uploadedImages.set(t.id,gt)}),mt()}).catch(gt=>{if(de.ui&&de.ui.ariaLiveAnnouncer.announce(Le("Error during image upload")),t.status!=="error"&&t.status!=="aborted")throw gt;t.status=="error"&&gt&&tt.showWarning(gt,{title:Le("Upload failed"),namespace:"upload"}),pe.enqueueChange({isUndoable:!1},bt=>{for(const _t of ht.get(t.id))_t.root.rootName!=="$graveyard"&&bt.remove(_t)}),mt()});function mt(){pe.enqueueChange({isUndoable:!1},gt=>{for(const bt of ht.get(t.id))gt.removeAttribute("uploadId",bt),gt.removeAttribute("uploadStatus",bt);ht.delete(t.id)}),Ye.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,de,pe){let Le=0;const Ye=Object.keys(t).filter(tt=>{const st=parseInt(tt,10);if(!isNaN(st))return Le=Math.max(Le,st),!0}).map(tt=>`${t[tt]} ${tt}w`).join(", ");if(Ye!=""){const tt={srcset:Ye};!de.hasAttribute("width")&&!de.hasAttribute("height")&&(tt.width=Le),pe.setAttributes(tt,de)}}_registerConverters(t){const{conversion:de,plugins:pe}=this.editor,Le=pe.get(FileRepository),Ye=pe.get(ImageUtils);de.for("dataDowncast").add(tt=>{tt.on(`attribute:uploadId:${t}`,(st,ht,mt)=>{if(!mt.consumable.test(ht.item,st.name))return;const gt=Le.loaders.get(ht.attributeNewValue);if(!gt||!gt.data)return null;const bt=mt.mapper.toViewElement(ht.item),_t=Ye.findViewImgElement(bt);_t&&(mt.consumable.consume(ht.item,st.name),mt.writer.setAttribute("data-ck-upload-id",gt.id,_t))})})}}function isHtmlIncluded(me){return Array.from(me.types).includes("text/html")&&me.getData("text/html")!==""}function getImagesFromChangeItem(me,u){const t=me.plugins.get("ImageUtils");return Array.from(me.model.createRangeOn(u)).filter(de=>t.isImage(de.item)).map(de=>de.item)}class ImageUpload extends Plugin{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUploadEditing,ImageUploadUI,ImageUploadProgress]}}class ImageInsertUrlView extends View{constructor(t){super(t);wt(this,"urlInputView");wt(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new KeystrokeHandler,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),submitHandler({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const t=this.locale,de=t.t,pe=new LabeledFieldView(t,createLabeledInputText);return pe.bind("label").to(this,"isImageSelected",Le=>de(Le?"Update image URL":"Insert image via URL")),pe.bind("isEnabled").to(this),pe.fieldView.inputMode="url",pe.fieldView.placeholder="https://example.com/image.png",pe.fieldView.bind("value").to(this,"imageURLInputValue",Le=>Le||""),pe.fieldView.on("input",()=>{this.imageURLInputValue=pe.fieldView.element.value.trim()}),pe}focus(){this.urlInputView.focus()}}class ImageInsertViaUrlUI extends Plugin{constructor(){super(...arguments);wt(this,"_imageInsertUI");wt(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertUI,Dialog]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createInsertUrlButton(t){const de=new t(this.editor.locale);return de.icon=icons.imageUrl,de.on("execute",()=>{this._showModal()}),de}_createToolbarButton(){const t=this.editor.locale.t,de=this._createInsertUrlButton(ButtonView);return de.tooltip=!0,de.bind("label").to(this._imageInsertUI,"isImageSelected",pe=>t(pe?"Update image URL":"Insert image via URL")),de}_createDropdownButton(){const t=this.editor.locale.t,de=this._createInsertUrlButton(ButtonView);return de.withText=!0,de.bind("label").to(this._imageInsertUI,"isImageSelected",pe=>t(pe?"Update image URL":"Insert via URL")),de}_createMenuBarButton(t){const de=this.editor.locale.t,pe=this._createInsertUrlButton(MenuBarMenuListItemButtonView);switch(pe.withText=!0,t){case"standalone":pe.label=de("Image via URL");break;case"insertOnly":pe.label=de("Image");break;case"insertNested":pe.label=de("Via URL");break}return pe}_createInsertUrlView(){const t=this.editor,de=t.locale,pe=t.commands.get("replaceImageSource"),Le=t.commands.get("insertImage"),Ye=new ImageInsertUrlView(de);return Ye.bind("isImageSelected").to(this._imageInsertUI),Ye.bind("isEnabled").toMany([Le,pe],"isEnabled",(...tt)=>tt.some(st=>st)),Ye}_showModal(){const t=this.editor,pe=t.locale.t,Le=t.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const Ye=t.commands.get("replaceImageSource");this._formView.imageURLInputValue=Ye.value||"",Le.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?pe("Update image URL"):pe("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:pe("Cancel"),withText:!0,onExecute:()=>Le.hide()},{label:pe("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class ImageInsertViaUrl extends Plugin{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertViaUrlUI,ImageInsertUI]}}class ImageInsert extends Plugin{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUpload,ImageInsertViaUrl,ImageInsertUI]}}class ResizeImageCommand extends Command{refresh(){const u=this.editor,de=u.plugins.get("ImageUtils").getClosestSelectedImageElement(u.model.document.selection);this.isEnabled=!!de,!de||!de.hasAttribute("resizedWidth")?this.value=null:this.value={width:de.getAttribute("resizedWidth"),height:null}}execute(u){const t=this.editor,de=t.model,pe=t.plugins.get("ImageUtils"),Le=pe.getClosestSelectedImageElement(de.document.selection);this.value={width:u.width,height:null},Le&&de.change(Ye=>{Ye.setAttribute("resizedWidth",u.width,Le),Ye.removeAttribute("resizedHeight",Le),pe.setImageNaturalSizeAttributes(Le)})}}class ImageResizeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const u=this.editor,t=new ResizeImageCommand(u);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),u.commands.add("resizeImage",t),u.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(u){const t=this.editor,de=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(pe=>pe.on(`attribute:resizedWidth:${u}`,(Le,Ye,tt)=>{if(!tt.consumable.consume(Ye.item,Le.name))return;const st=tt.writer,ht=tt.mapper.toViewElement(Ye.item);Ye.attributeNewValue!==null?(st.setStyle("width",Ye.attributeNewValue,ht),st.addClass("image_resized",ht)):(st.removeStyle("width",ht),st.removeClass("image_resized",ht))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:u,key:"resizedHeight"},view:pe=>({key:"style",value:{height:pe}})}),t.conversion.for("editingDowncast").add(pe=>pe.on(`attribute:resizedHeight:${u}`,(Le,Ye,tt)=>{if(!tt.consumable.consume(Ye.item,Le.name))return;const st=tt.writer,ht=tt.mapper.toViewElement(Ye.item),mt=u==="imageInline"?de.findViewImgElement(ht):ht;Ye.attributeNewValue!==null?st.setStyle("height",Ye.attributeNewValue,mt):st.removeStyle("height",mt)})),t.conversion.for("upcast").attributeToAttribute({view:{name:u==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:pe=>widthAndHeightStylesAreBothSet(pe)?null:pe.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:u==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:pe=>widthAndHeightStylesAreBothSet(pe)?null:pe.getStyle("height")}})}}const RESIZE_ICONS={small:icons.objectSizeSmall,medium:icons.objectSizeMedium,large:icons.objectSizeLarge,custom:icons.objectSizeCustom,original:icons.objectSizeFull};class ImageResizeButtons extends Plugin{constructor(t){super(t);wt(this,"_resizeUnit");this._resizeUnit=t.config.get("image.resizeUnit")}static get requires(){return[ImageResizeEditing]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.config.get("image.resizeOptions"),pe=t.commands.get("resizeImage");this.bind("isEnabled").to(pe);for(const Le of de)this._registerImageResizeButton(Le);this._registerImageResizeDropdown(de)}_registerImageResizeButton(t){const de=this.editor,{name:pe,value:Le,icon:Ye}=t;de.ui.componentFactory.add(pe,tt=>{const st=new ButtonView(tt),ht=de.commands.get("resizeImage"),mt=this._getOptionLabelValue(t,!0);if(!RESIZE_ICONS[Ye])throw new CKEditorError("imageresizebuttons-missing-icon",de,t);if(st.set({label:mt,icon:RESIZE_ICONS[Ye],tooltip:mt,isToggleable:!0}),st.bind("isEnabled").to(this),de.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(t)){const gt=de.plugins.get("ImageCustomResizeUI");this.listenTo(st,"execute",()=>{gt._showForm(this._resizeUnit)})}else{const gt=Le?Le+this._resizeUnit:null;st.bind("isOn").to(ht,"value",getIsOnButtonCallback(gt)),this.listenTo(st,"execute",()=>{de.execute("resizeImage",{width:gt})})}return st})}_registerImageResizeDropdown(t){const de=this.editor,pe=de.t,Le=t.find(tt=>!tt.value),Ye=tt=>{const st=de.commands.get("resizeImage"),ht=createDropdown(tt,DropdownButtonView),mt=ht.buttonView,gt=pe("Resize image");return mt.set({tooltip:gt,commandValue:Le.value,icon:RESIZE_ICONS.medium,isToggleable:!0,label:this._getOptionLabelValue(Le),withText:!0,class:"ck-resize-image-button",ariaLabel:gt,ariaLabelledBy:void 0}),mt.bind("label").to(st,"value",bt=>bt&&bt.width?bt.width:this._getOptionLabelValue(Le)),ht.bind("isEnabled").to(this),addListToDropdown(ht,()=>this._getResizeDropdownListItemDefinitions(t,st),{ariaLabel:pe("Image resize list"),role:"menu"}),this.listenTo(ht,"execute",bt=>{"onClick"in bt.source?bt.source.onClick():(de.execute(bt.source.commandName,{width:bt.source.commandValue}),de.editing.view.focus())}),ht};de.ui.componentFactory.add("resizeImage",Ye),de.ui.componentFactory.add("imageResize",Ye)}_getOptionLabelValue(t,de=!1){const pe=this.editor.t;return t.label?t.label:de?isCustomImageResizeOption(t)?pe("Custom image size"):t.value?pe("Resize image to %0",t.value+this._resizeUnit):pe("Resize image to the original size"):isCustomImageResizeOption(t)?pe("Custom"):t.value?t.value+this._resizeUnit:pe("Original")}_getResizeDropdownListItemDefinitions(t,de){const{editor:pe}=this,Le=new Collection,Ye=t.map(tt=>isCustomImageResizeOption(tt)?{...tt,valueWithUnits:"custom"}:tt.value?{...tt,valueWithUnits:`${tt.value}${this._resizeUnit}`}:{...tt,valueWithUnits:null});for(const tt of Ye){let st=null;if(pe.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(tt)){const ht=pe.plugins.get("ImageCustomResizeUI");st={type:"button",model:new Model({label:this._getOptionLabelValue(tt),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{ht._showForm(this._resizeUnit)}})};const mt=map$1(Ye,"valueWithUnits");st.model.bind("isOn").to(de,"value",getIsOnCustomButtonCallback(mt))}else st={type:"button",model:new Model({commandName:"resizeImage",commandValue:tt.valueWithUnits,label:this._getOptionLabelValue(tt),role:"menuitemradio",withText:!0,icon:null})},st.model.bind("isOn").to(de,"value",getIsOnButtonCallback(tt.valueWithUnits));st.model.bind("isEnabled").to(de,"isEnabled"),Le.add(st)}return Le}}function isCustomImageResizeOption(me){return me.value==="custom"}function getIsOnButtonCallback(me){return u=>{const t=u;return me===null&&t===me?!0:t!==null&&t.width===me}}function getIsOnCustomButtonCallback(me){return u=>!me.some(t=>getIsOnButtonCallback(t)(u))}const RESIZABLE_IMAGES_CSS_SELECTOR="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",RESIZED_IMAGE_CLASS="image_resized";class ImageResizeHandles extends Plugin{static get requires(){return[WidgetResize,ImageUtils]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(u),this._setupResizerCreator()}_setupResizerCreator(){const u=this.editor,t=u.editing.view,de=u.plugins.get("ImageUtils");t.addObserver(ImageLoadObserver),this.listenTo(t.document,"imageLoaded",(pe,Le)=>{if(!Le.target.matches(RESIZABLE_IMAGES_CSS_SELECTOR))return;const Ye=u.editing.view.domConverter,tt=Ye.domToView(Le.target),st=de.getImageWidgetFromImageView(tt);let ht=this.editor.plugins.get(WidgetResize).getResizerByViewElement(st);if(ht){ht.redraw();return}const mt=u.editing.mapper,gt=mt.toModelElement(st);ht=u.plugins.get(WidgetResize).attachTo({unit:u.config.get("image.resizeUnit"),modelElement:gt,viewElement:st,editor:u,getHandleHost(bt){return bt.querySelector("img")},getResizeHost(){return Ye.mapViewToDom(mt.toViewElement(gt))},isCentered(){return gt.getAttribute("imageStyle")=="alignCenter"},onCommit(bt){t.change(_t=>{_t.removeClass(RESIZED_IMAGE_CLASS,st)}),u.execute("resizeImage",{width:bt})}}),ht.on("updateSize",()=>{st.hasClass(RESIZED_IMAGE_CLASS)||t.change(_t=>{_t.addClass(RESIZED_IMAGE_CLASS,st)});const bt=gt.name==="imageInline"?tt:st;bt.getStyle("height")&&t.change(_t=>{_t.removeStyle("height",bt)})}),ht.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tryParseDimensionWithUnit(me){if(!me)return null;const[,u,t]=me.trim().match(/([.,\d]+)(%|px)$/)||[],de=Number.parseFloat(u);return Number.isNaN(de)?null:{value:de,unit:t}}function tryCastDimensionsToUnit(me,u,t){return t==="px"?{value:u.value,unit:"px"}:{value:u.value/me*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedImageEditorNodes(me){const{editing:u}=me,de=me.plugins.get("ImageUtils").getClosestSelectedImageElement(me.model.document.selection);if(!de)return null;const pe=u.mapper.toViewElement(de),Le=u.view.domConverter.mapViewToDom(pe);return{model:de,view:pe,dom:Le}}function getSelectedImageWidthInUnits(me,u){const t=getSelectedImageEditorNodes(me);if(!t)return null;const de=tryParseDimensionWithUnit(t.model.getAttribute("resizedWidth")||null);if(!de)return null;if(de.unit===u)return de;const pe=calculateResizeHostAncestorWidth(t.dom),Le={value:new Rect(t.dom).width};return tryCastDimensionsToUnit(pe,Le,u)}class ImageCustomResizeFormView extends View{constructor(t,de,pe){super(t);wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"unit");wt(this,"labeledInput");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"_focusables");wt(this,"_focusCycler");wt(this,"_validators");const Le=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.unit=de,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(Le("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(Le("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._validators=pe,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(t,de,pe,Le){const Ye=new ButtonView(this.locale);return Ye.set({label:t,icon:de,tooltip:!0}),Ye.extendTemplate({attributes:{class:pe}}),Le&&Ye.delegate("execute").to(this,Le),Ye}_createLabeledInputView(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputNumber);return de.label=t("Resize image (in %0)",this.unit),de.fieldView.set({step:.1}),de}isValid(){this.resetFormStatus();for(const t of this._validators){const de=t(this);if(de)return this.labeledInput.errorText=de,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:t}=this.labeledInput.fieldView;return t?t.value:null}get parsedSize(){const{rawSize:t}=this;if(t===null)return null;const de=Number.parseFloat(t);return Number.isNaN(de)?null:de}get sizeWithUnits(){const{parsedSize:t,unit:de}=this;return t===null?null:`${t}${de}`}}function getSelectedImagePossibleResizeRange(me,u){const t=getSelectedImageEditorNodes(me);if(!t)return null;const de=calculateResizeHostAncestorWidth(t.dom),pe=tryParseDimensionWithUnit(window.getComputedStyle(t.dom).minWidth)||{value:1},Le=Math.max(.1,tryCastDimensionsToUnit(de,pe,u).value);return{unit:u,lower:Le,upper:u==="px"?de:100}}class ImageCustomResizeUI extends Plugin{constructor(){super(...arguments);wt(this,"_balloon");wt(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(t){const de=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(ImageCustomResizeFormView))(de.locale,t,getFormValidators$2(de)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(de.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{de.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(pe,Le)=>{this._hideForm(!0),Le()}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(t){if(this._isVisible)return;this._form||this._createForm(t);const de=this.editor,pe=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(de)});const Le=getSelectedImageWidthInUnits(de,t),Ye=Le?Le.value.toFixed(1):"",tt=getSelectedImagePossibleResizeRange(de,t);pe.fieldView.value=pe.fieldView.element.value=Ye,tt&&Object.assign(pe.fieldView,{min:tt.lower.toFixed(1),max:Math.ceil(tt.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function getFormValidators$2(me){const u=me.t;return[t=>{if(t.rawSize.trim()==="")return u("The value must not be empty.");if(t.parsedSize===null)return u("The value should be a plain number.")}]}class ImageResize extends Plugin{static get requires(){return[ImageResizeEditing,ImageResizeHandles,ImageCustomResizeUI,ImageResizeButtons]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class ImageStyleCommand extends Command{constructor(t,de){super(t);wt(this,"_defaultStyles");wt(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(de.map(pe=>{if(pe.isDefault)for(const Le of pe.modelElements)this._defaultStyles[Le]=pe.name;return[pe.name,pe]}))}refresh(){const pe=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!pe,this.isEnabled?pe.hasAttribute("imageStyle")?this.value=pe.getAttribute("imageStyle"):this.value=this._defaultStyles[pe.name]:this.value=!1}execute(t={}){const de=this.editor,pe=de.model,Le=de.plugins.get("ImageUtils");pe.change(Ye=>{const tt=t.value,{setImageSizes:st=!0}=t;let ht=Le.getClosestSelectedImageElement(pe.document.selection);tt&&this.shouldConvertImageType(tt,ht)&&(this.editor.execute(Le.isBlockImage(ht)?"imageTypeInline":"imageTypeBlock",{setImageSizes:st}),ht=Le.getClosestSelectedImageElement(pe.document.selection)),!tt||this._styles.get(tt).isDefault?Ye.removeAttribute("imageStyle",ht):Ye.setAttribute("imageStyle",tt,ht),st&&Le.setImageNaturalSizeAttributes(ht)})}shouldConvertImageType(t,de){return!this._styles.get(t).modelElements.includes(de.name)}}const DEFAULT_OPTIONS={get inline(){return{name:"inline",title:"In line",icon:icons.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:icons.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:icons.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:icons.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:icons.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:icons.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},DEFAULT_ICONS={full:icons.objectFullWidth,left:icons.objectBlockLeft,right:icons.objectBlockRight,center:icons.objectCenter,inlineLeft:icons.objectLeft,inlineRight:icons.objectRight,inline:icons.objectInline},DEFAULT_DROPDOWN_DEFINITIONS=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function normalizeStyles(me){return(me.configuredStyles.options||[]).map(de=>normalizeDefinition(de)).filter(de=>isValidOption(de,me))}function getDefaultStylesConfiguration(me,u){return me&&u?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:me?{options:["block","side"]}:u?{options:["inline","alignLeft","alignRight"]}:{}}function getDefaultDropdownDefinitions(me){return me.has("ImageBlockEditing")&&me.has("ImageInlineEditing")?[...DEFAULT_DROPDOWN_DEFINITIONS]:[]}function normalizeDefinition(me){return typeof me=="string"?DEFAULT_OPTIONS[me]?me={...DEFAULT_OPTIONS[me]}:me={name:me}:me=extendStyle(DEFAULT_OPTIONS[me.name],me),typeof me.icon=="string"&&(me.icon=DEFAULT_ICONS[me.icon]||me.icon),me}function isValidOption(me,{isBlockPluginLoaded:u,isInlinePluginLoaded:t}){const{modelElements:de,name:pe}=me;if(!de||!de.length||!pe)return warnInvalidStyle({style:me}),!1;{const Le=[u?"imageBlock":null,t?"imageInline":null];if(!de.some(Ye=>Le.includes(Ye)))return logWarning("image-style-missing-dependency",{style:me,missingPlugins:de.map(Ye=>Ye==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function extendStyle(me,u){const t={...u};for(const de in me)Object.prototype.hasOwnProperty.call(u,de)||(t[de]=me[de]);return t}function warnInvalidStyle(me){logWarning("image-style-configuration-definition-invalid",me)}var utils={normalizeStyles,getDefaultStylesConfiguration,getDefaultDropdownDefinitions,warnInvalidStyle,DEFAULT_OPTIONS,DEFAULT_ICONS,DEFAULT_DROPDOWN_DEFINITIONS};function modelToViewStyleAttribute(me){return(u,t,de)=>{if(!de.consumable.consume(t.item,u.name))return;const pe=getStyleDefinitionByName(t.attributeNewValue,me),Le=getStyleDefinitionByName(t.attributeOldValue,me),Ye=de.mapper.toViewElement(t.item),tt=de.writer;Le&&tt.removeClass(Le.className,Ye),pe&&tt.addClass(pe.className,Ye)}}function viewToModelStyleAttribute(me){const u={imageInline:me.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:me.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,de,pe)=>{if(!de.modelRange)return;const Le=de.viewItem,Ye=first(de.modelRange.getItems());if(Ye&&pe.schema.checkAttribute(Ye,"imageStyle"))for(const tt of u[Ye.name])pe.consumable.consume(Le,{classes:tt.className})&&pe.writer.setAttribute("imageStyle",tt.name,Ye)}}function getStyleDefinitionByName(me,u){for(const t of u)if(t.name===me)return t}class ImageStyleEditing extends Plugin{constructor(){super(...arguments);wt(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const{normalizeStyles:t,getDefaultStylesConfiguration:de}=utils,pe=this.editor,Le=pe.plugins.has("ImageBlockEditing"),Ye=pe.plugins.has("ImageInlineEditing");pe.config.define("image.styles",de(Le,Ye)),this.normalizedStyles=t({configuredStyles:pe.config.get("image.styles"),isBlockPluginLoaded:Le,isInlinePluginLoaded:Ye}),this._setupConversion(Le,Ye),this._setupPostFixer(),pe.commands.add("imageStyle",new ImageStyleCommand(pe,this.normalizedStyles))}_setupConversion(t,de){const pe=this.editor,Le=pe.model.schema,Ye=modelToViewStyleAttribute(this.normalizedStyles),tt=viewToModelStyleAttribute(this.normalizedStyles);pe.editing.downcastDispatcher.on("attribute:imageStyle",Ye),pe.data.downcastDispatcher.on("attribute:imageStyle",Ye),t&&(Le.extend("imageBlock",{allowAttributes:"imageStyle"}),pe.data.upcastDispatcher.on("element:figure",tt,{priority:"low"})),de&&(Le.extend("imageInline",{allowAttributes:"imageStyle"}),pe.data.upcastDispatcher.on("element:img",tt,{priority:"low"}))}_setupPostFixer(){const t=this.editor,de=t.model.document,pe=t.plugins.get(ImageUtils),Le=new Map(this.normalizedStyles.map(Ye=>[Ye.name,Ye]));de.registerPostFixer(Ye=>{let tt=!1;for(const st of de.differ.getChanges())if(st.type=="insert"||st.type=="attribute"&&st.attributeKey=="imageStyle"){let ht=st.type=="insert"?st.position.nodeAfter:st.range.start.nodeAfter;if(ht&&ht.is("element","paragraph")&&ht.childCount>0&&(ht=ht.getChild(0)),!pe.isImage(ht))continue;const mt=ht.getAttribute("imageStyle");if(!mt)continue;const gt=Le.get(mt);(!gt||!gt.modelElements.includes(ht.name))&&(Ye.removeAttribute("imageStyle",ht),tt=!0)}return tt})}}class ImageStyleUI extends Plugin{static get requires(){return[ImageStyleEditing]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const u=this.editor.t;return{"Wrap text":u("Wrap text"),"Break text":u("Break text"),"In line":u("In line"),"Full size image":u("Full size image"),"Side image":u("Side image"),"Left aligned image":u("Left aligned image"),"Centered image":u("Centered image"),"Right aligned image":u("Right aligned image")}}init(){const u=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],de=u.get("ImageStyleEditing"),pe=translateStyles(de.normalizedStyles,this.localizedDefaultStylesTitles);for(const Ye of pe)this._createButton(Ye);const Le=translateStyles([...t.filter(isObject$2),...utils.getDefaultDropdownDefinitions(u)],this.localizedDefaultStylesTitles);for(const Ye of Le)this._createDropdown(Ye,pe)}_createDropdown(u,t){const de=this.editor.ui.componentFactory;de.add(u.name,pe=>{let Le;const{defaultItem:Ye,items:tt,title:st}=u,ht=tt.filter(_t=>t.find(({name:vt})=>getUIComponentName(vt)===_t)).map(_t=>{const vt=de.create(_t);return _t===Ye&&(Le=vt),vt});tt.length!==ht.length&&utils.warnInvalidStyle({dropdown:u});const mt=createDropdown(pe,SplitButtonView),gt=mt.buttonView,bt=gt.arrowView;return addToolbarToDropdown(mt,ht,{enableActiveItemFocusOnDropdownOpen:!0}),gt.set({label:getDropdownButtonTitle(st,Le.label),class:null,tooltip:!0}),bt.unbind("label"),bt.set({label:st}),gt.bind("icon").toMany(ht,"isOn",(..._t)=>{const vt=_t.findIndex(identity);return vt<0?Le.icon:ht[vt].icon}),gt.bind("label").toMany(ht,"isOn",(..._t)=>{const vt=_t.findIndex(identity);return getDropdownButtonTitle(st,vt<0?Le.label:ht[vt].label)}),gt.bind("isOn").toMany(ht,"isOn",(..._t)=>_t.some(identity)),gt.bind("class").toMany(ht,"isOn",(..._t)=>_t.some(identity)?"ck-splitbutton_flatten":void 0),gt.on("execute",()=>{ht.some(({isOn:_t})=>_t)?mt.isOpen=!mt.isOpen:Le.fire("execute")}),mt.bind("isEnabled").toMany(ht,"isEnabled",(..._t)=>_t.some(identity)),this.listenTo(mt,"execute",()=>{this.editor.editing.view.focus()}),mt})}_createButton(u){const t=u.name;this.editor.ui.componentFactory.add(getUIComponentName(t),de=>{const pe=this.editor.commands.get("imageStyle"),Le=new ButtonView(de);return Le.set({label:u.title,icon:u.icon,tooltip:!0,isToggleable:!0}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("isOn").to(pe,"value",Ye=>Ye===t),Le.on("execute",this._executeCommand.bind(this,t)),Le})}_executeCommand(u){this.editor.execute("imageStyle",{value:u}),this.editor.editing.view.focus()}}function translateStyles(me,u){for(const t of me)u[t.title]&&(t.title=u[t.title]);return me}function getUIComponentName(me){return`imageStyle:${me}`}function getDropdownButtonTitle(me,u){return(me?me+": ":"")+u}class ImageStyle extends Plugin{static get requires(){return[ImageStyleEditing,ImageStyleUI]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ImageToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository,ImageUtils]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t,de=u.plugins.get(WidgetToolbarRepository),pe=u.plugins.get("ImageUtils");de.register("image",{ariaLabel:t("Image toolbar"),items:normalizeDeclarativeConfig(u.config.get("image.toolbar")||[]),getRelatedElement:Le=>pe.getClosestSelectedImageWidget(Le)})}}function normalizeDeclarativeConfig(me){return me.map(u=>isObject$2(u)?u.name:u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentEditing extends Plugin{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.commands.add("indent",new MultiCommand(u)),u.commands.add("outdent",new MultiCommand(u))}}class IndentUI extends Plugin{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale,de=u.t,pe=t.uiLanguageDirection=="ltr"?icons.indent:icons.outdent,Le=t.uiLanguageDirection=="ltr"?icons.outdent:icons.indent;this._defineButton("indent",de("Increase indent"),pe),this._defineButton("outdent",de("Decrease indent"),Le)}_defineButton(u,t,de){const pe=this.editor;pe.ui.componentFactory.add(u,()=>{const Le=this._createButton(ButtonView,u,t,de);return Le.set({tooltip:!0}),Le}),pe.ui.componentFactory.add("menuBar:"+u,()=>this._createButton(MenuBarMenuListItemButtonView,u,t,de))}_createButton(u,t,de,pe){const Le=this.editor,Ye=Le.commands.get(t),tt=new u(Le.locale);return tt.set({label:de,icon:pe}),tt.bind("isEnabled").to(Ye,"isEnabled"),this.listenTo(tt,"execute",()=>{Le.execute(t),Le.editing.view.focus()}),tt}}class Indent extends Plugin{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[IndentEditing,IndentUI]}}class IndentBlockCommand extends Command{constructor(t,de){super(t);wt(this,"_indentBehavior");this._indentBehavior=de}refresh(){const de=this.editor.model,pe=first(de.document.selection.getSelectedBlocks());if(!pe||!this._isIndentationChangeAllowed(pe)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(pe.getAttribute("blockIndent"))}execute(){const t=this.editor.model,de=this._getBlocksToChange();t.change(pe=>{for(const Le of de){const Ye=Le.getAttribute("blockIndent"),tt=this._indentBehavior.getNextIndent(Ye);tt?pe.setAttribute("blockIndent",tt,Le):pe.removeAttribute("blockIndent",Le)}})}_getBlocksToChange(){const de=this.editor.model.document.selection;return Array.from(de.getSelectedBlocks()).filter(Le=>this._isIndentationChangeAllowed(Le))}_isIndentationChangeAllowed(t){const de=this.editor;return de.model.schema.checkAttribute(t,"blockIndent")?!de.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!de.plugins.get("ListUtils").isListItemBlock(t):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingOffset{constructor(u){wt(this,"isForward");wt(this,"offset");wt(this,"unit");this.isForward=u.direction==="forward",this.offset=u.offset,this.unit=u.unit}checkEnabled(u){const t=parseFloat(u||"0");return this.isForward||t>0}getNextIndent(u){const t=parseFloat(u||"0");if(!(!u||u.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const pe=this.isForward?this.offset:-this.offset,Le=t+pe;return Le>0?Le+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingClasses{constructor(u){wt(this,"isForward");wt(this,"classes");this.isForward=u.direction==="forward",this.classes=u.classes}checkEnabled(u){const t=this.classes.indexOf(u);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(u){const t=this.classes.indexOf(u),de=this.isForward?1:-1;return this.classes[t+de]}}const DEFAULT_ELEMENTS=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class IndentBlock extends Plugin{constructor(u){super(u),u.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),u.commands.add("indentBlock",new IndentBlockCommand(u,new IndentUsingClasses({direction:"forward",classes:t.classes}))),u.commands.add("outdentBlock",new IndentBlockCommand(u,new IndentUsingClasses({direction:"backward",classes:t.classes})))):(u.data.addStyleProcessorRules(addMarginRules),this._setupConversionUsingOffset(),u.commands.add("indentBlock",new IndentBlockCommand(u,new IndentUsingOffset({direction:"forward",offset:t.offset,unit:t.unit}))),u.commands.add("outdentBlock",new IndentBlockCommand(u,new IndentUsingOffset({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const u=this.editor,t=u.model.schema,de=u.commands.get("indent"),pe=u.commands.get("outdent"),Le=u.config.get("heading.options");(Le&&Le.map(st=>st.model)||DEFAULT_ELEMENTS).forEach(st=>{t.isRegistered(st)&&t.extend(st,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),de.registerChildCommand(u.commands.get("indentBlock")),pe.registerChildCommand(u.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const u=this.editor.conversion,de=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";u.for("upcast").attributeToAttribute({view:{styles:{[de]:/[\s\S]+/}},model:{key:"blockIndent",value:pe=>{if(!pe.is("element","li"))return pe.getStyle(de)}}}),u.for("downcast").attributeToAttribute({model:"blockIndent",view:pe=>({key:"style",value:{[de]:pe}})})}_setupConversionUsingClasses(u){const t={model:{key:"blockIndent",values:[]},view:{}};for(const de of u)t.model.values.push(de),t.view[de]={key:"class",value:[de]};this.editor.conversion.attributeToAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AutomaticDecorators{constructor(){wt(this,"_definitions",new Set)}get length(){return this._definitions.size}add(u){Array.isArray(u)?u.forEach(t=>this._definitions.add(t)):this._definitions.add(u)}getDispatcher(){return u=>{u.on("attribute:linkHref",(t,de,pe)=>{if(!pe.consumable.test(de.item,"attribute:linkHref")||!(de.item.is("selection")||pe.schema.isInline(de.item)))return;const Le=pe.writer,Ye=Le.document.selection;for(const tt of this._definitions){const st=Le.createAttributeElement("a",tt.attributes,{priority:5});tt.classes&&Le.addClass(tt.classes,st);for(const ht in tt.styles)Le.setStyle(ht,tt.styles[ht],st);Le.setCustomProperty("link",!0,st),tt.callback(de.attributeNewValue)?de.item.is("selection")?Le.wrap(Ye.getFirstRange(),st):Le.wrap(pe.mapper.toViewRange(de.range),st):Le.unwrap(pe.mapper.toViewRange(de.range),st)}},{priority:"high"})}}getDispatcherForLinkedImage(){return u=>{u.on("attribute:linkHref:imageBlock",(t,de,{writer:pe,mapper:Le})=>{const Ye=Le.toViewElement(de.item),tt=Array.from(Ye.getChildren()).find(st=>st.is("element","a"));if(tt)for(const st of this._definitions){const ht=toMap(st.attributes);if(st.callback(de.attributeNewValue)){for(const[mt,gt]of ht)mt==="class"?pe.addClass(gt,tt):pe.setAttribute(mt,gt,tt);st.classes&&pe.addClass(st.classes,tt);for(const mt in st.styles)pe.setStyle(mt,st.styles[mt],tt)}else{for(const[mt,gt]of ht)mt==="class"?pe.removeClass(gt,tt):pe.removeAttribute(mt,tt);st.classes&&pe.removeClass(st.classes,tt);for(const mt in st.styles)pe.removeStyle(mt,tt)}}})}}}const ATTRIBUTE_WHITESPACES=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,SAFE_URL_TEMPLATE="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",EMAIL_REG_EXP=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,PROTOCOL_REG_EXP=/^((\w+:(\/{2,})?)|(\W))/i,DEFAULT_LINK_PROTOCOLS=["https?","ftps?","mailto"],LINK_KEYSTROKE="Ctrl+K";function isLinkElement(me){return me.is("attributeElement")&&!!me.getCustomProperty("link")}function createLinkElement(me,{writer:u}){const t=u.createAttributeElement("a",{href:me},{priority:5});return u.setCustomProperty("link",!0,t),t}function ensureSafeUrl(me,u=DEFAULT_LINK_PROTOCOLS){const t=String(me),de=u.join("|"),pe=new RegExp(`${SAFE_URL_TEMPLATE.replace("<protocols>",de)}`,"i");return isSafeUrl(t,pe)?t:"#"}function isSafeUrl(me,u){return!!me.replace(ATTRIBUTE_WHITESPACES,"").match(u)}function getLocalizedDecorators(me,u){const t={"Open in a new tab":me("Open in a new tab"),Downloadable:me("Downloadable")};return u.forEach(de=>("label"in de&&t[de.label]&&(de.label=t[de.label]),de)),u}function normalizeDecorators(me){const u=[];if(me)for(const[t,de]of Object.entries(me)){const pe=Object.assign({},de,{id:`link${upperFirst(t)}`});u.push(pe)}return u}function isLinkableElement(me,u){return me?u.checkAttribute(me.name,"linkHref"):!1}function isEmail(me){return EMAIL_REG_EXP.test(me)}function addLinkProtocolIfApplicable(me,u){const t=isEmail(me)?"mailto:":u,de=!!t&&!linkHasProtocol(me);return me&&de?t+me:me}function linkHasProtocol(me){return PROTOCOL_REG_EXP.test(me)}function openLink(me){window.open(me,"_blank","noopener")}function createBookmarkCallbacks(me){const u=me.plugins.has("BookmarkEditing")?me.plugins.get("BookmarkEditing"):null;function t(pe){return!!pe&&pe.startsWith("#")&&!!u&&!!u.getElementForBookmarkId(pe.slice(1))}function de(pe){const Le=pe.slice(1),Ye=u.getElementForBookmarkId(Le);me.model.change(tt=>{tt.setSelection(Ye,"on")}),me.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:t,scrollToTarget:de}}class LinkCommand extends Command{constructor(){super(...arguments);wt(this,"manualDecorators",new Collection);wt(this,"automaticDecorators",new AutomaticDecorators)}restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,de=t.document.selection,pe=de.getSelectedElement()||first(de.getSelectedBlocks());isLinkableElement(pe,t.schema)?(this.value=pe.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(pe,"linkHref")):(this.value=de.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(de,"linkHref"));for(const Le of this.manualDecorators)Le.value=this._getDecoratorStateFromModel(Le.id)}execute(t,de={}){const pe=this.editor.model,Le=pe.document.selection,Ye=[],tt=[];for(const st in de)de[st]?Ye.push(st):tt.push(st);pe.change(st=>{if(Le.isCollapsed){const ht=Le.getFirstPosition();if(Le.hasAttribute("linkHref")){const mt=extractTextFromSelection(Le);let gt=findAttributeRange(ht,"linkHref",Le.getAttribute("linkHref"),pe);Le.getAttribute("linkHref")===mt&&(gt=this._updateLinkContent(pe,st,gt,t)),st.setAttribute("linkHref",t,gt),Ye.forEach(bt=>{st.setAttribute(bt,!0,gt)}),tt.forEach(bt=>{st.removeAttribute(bt,gt)}),st.setSelection(st.createPositionAfter(gt.end.nodeBefore))}else if(t!==""){const mt=toMap(Le.getAttributes());mt.set("linkHref",t),Ye.forEach(bt=>{mt.set(bt,!0)});const{end:gt}=pe.insertContent(st.createText(t,mt),ht);st.setSelection(gt)}["linkHref",...Ye,...tt].forEach(mt=>{st.removeSelectionAttribute(mt)})}else{const ht=pe.schema.getValidRanges(Le.getRanges(),"linkHref"),mt=[];for(const bt of Le.getSelectedBlocks())pe.schema.checkAttribute(bt,"linkHref")&&mt.push(st.createRangeOn(bt));const gt=mt.slice();for(const bt of ht)this._isRangeToUpdate(bt,mt)&&gt.push(bt);for(const bt of gt){let _t=bt;if(gt.length===1){const vt=extractTextFromSelection(Le);Le.getAttribute("linkHref")===vt&&(_t=this._updateLinkContent(pe,st,bt,t),st.setSelection(st.createSelection(_t)))}st.setAttribute("linkHref",t,_t),Ye.forEach(vt=>{st.setAttribute(vt,!0,_t)}),tt.forEach(vt=>{st.removeAttribute(vt,_t)})}}})}_getDecoratorStateFromModel(t){const de=this.editor.model,pe=de.document.selection,Le=pe.getSelectedElement();return isLinkableElement(Le,de.schema)?Le.getAttribute(t):pe.getAttribute(t)}_isRangeToUpdate(t,de){for(const pe of de)if(pe.containsRange(t))return!1;return!0}_updateLinkContent(t,de,pe,Le){const Ye=de.createText(Le,{linkHref:Le});return t.insertContent(Ye,pe)}}function extractTextFromSelection(me){if(me.isCollapsed){const u=me.getFirstPosition();return u.textNode&&u.textNode.data}else{const u=Array.from(me.getFirstRange().getItems());if(u.length>1)return null;const t=u[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}class UnlinkCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,de=t.getSelectedElement();isLinkableElement(de,u.schema)?this.isEnabled=u.schema.checkAttribute(de,"linkHref"):this.isEnabled=u.schema.checkAttributeInSelection(t,"linkHref")}execute(){const u=this.editor,t=this.editor.model,de=t.document.selection,pe=u.commands.get("link");t.change(Le=>{const Ye=de.isCollapsed?[findAttributeRange(de.getFirstPosition(),"linkHref",de.getAttribute("linkHref"),t)]:t.schema.getValidRanges(de.getRanges(),"linkHref");for(const tt of Ye)if(Le.removeAttribute("linkHref",tt),pe)for(const st of pe.manualDecorators)Le.removeAttribute(st.id,tt)})}}class ManualDecorator extends ObservableMixin(){constructor({id:t,label:de,attributes:pe,classes:Le,styles:Ye,defaultValue:tt}){super();wt(this,"id");wt(this,"defaultValue");wt(this,"label");wt(this,"attributes");wt(this,"classes");wt(this,"styles");this.id=t,this.set("value",void 0),this.defaultValue=tt,this.label=de,this.attributes=pe,this.classes=Le,this.styles=Ye}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const HIGHLIGHT_CLASS="ck-link_selected",DECORATOR_AUTOMATIC="automatic",DECORATOR_MANUAL="manual",EXTERNAL_LINKS_REGEXP=/^(https?:)?\/\//;class LinkEditing extends Plugin{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement,Input,ClipboardPipeline]}constructor(u){super(u),u.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const u=this.editor,t=this.editor.config.get("link.allowedProtocols");u.model.schema.extend("$text",{allowAttributes:"linkHref"}),u.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:createLinkElement}),u.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(Le,Ye)=>createLinkElement(ensureSafeUrl(Le,t),Ye)}),u.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:Le=>Le.getAttribute("href")}}),u.commands.add("link",new LinkCommand(u)),u.commands.add("unlink",new UnlinkCommand(u));const de=getLocalizedDecorators(u.t,normalizeDecorators(u.config.get("link.decorators")));this._enableAutomaticDecorators(de.filter(Le=>Le.mode===DECORATOR_AUTOMATIC)),this._enableManualDecorators(de.filter(Le=>Le.mode===DECORATOR_MANUAL)),u.plugins.get(TwoStepCaretMovement).registerAttribute("linkHref"),inlineHighlight(u,"linkHref","a",HIGHLIGHT_CLASS),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(u){const t=this.editor,pe=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&pe.add({id:"linkIsExternal",mode:DECORATOR_AUTOMATIC,callback:Le=>!!Le&&EXTERNAL_LINKS_REGEXP.test(Le),attributes:{target:"_blank",rel:"noopener noreferrer"}}),pe.add(u),pe.length&&t.conversion.for("downcast").add(pe.getDispatcher())}_enableManualDecorators(u){if(!u.length)return;const t=this.editor,pe=t.commands.get("link").manualDecorators;u.forEach(Le=>{t.model.schema.extend("$text",{allowAttributes:Le.id});const Ye=new ManualDecorator(Le);pe.add(Ye),t.conversion.for("downcast").attributeToElement({model:Ye.id,view:(tt,{writer:st,schema:ht},{item:mt})=>{if((mt.is("selection")||ht.isInline(mt))&&tt){const gt=st.createAttributeElement("a",Ye.attributes,{priority:5});Ye.classes&&st.addClass(Ye.classes,gt);for(const bt in Ye.styles)st.setStyle(bt,Ye.styles[bt],gt);return st.setCustomProperty("link",!0,gt),gt}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...Ye._createPattern()},model:{key:Ye.id}})})}_enableLinkOpen(){const u=this.editor,de=u.editing.view.document,pe=createBookmarkCallbacks(u);function Le(Ye){pe.isScrollableToTarget(Ye)?pe.scrollToTarget(Ye):openLink(Ye)}this.listenTo(de,"click",(Ye,tt)=>{if(!(env.isMac?tt.domEvent.metaKey:tt.domEvent.ctrlKey))return;let ht=tt.domTarget;if(ht.tagName.toLowerCase()!="a"&&(ht=ht.closest("a")),!ht)return;const mt=ht.getAttribute("href");mt&&(Ye.stop(),tt.preventDefault(),Le(mt))},{context:"$capture"}),this.listenTo(de,"keydown",(Ye,tt)=>{const ht=u.commands.get("link").value;ht&&tt.keyCode===keyCodes.enter&&tt.altKey&&(Ye.stop(),Le(ht))})}_enableSelectionAttributesFixer(){const t=this.editor.model,de=t.document.selection;this.listenTo(de,"change:attribute",(pe,{attributeKeys:Le})=>{!Le.includes("linkHref")||de.hasAttribute("linkHref")||t.change(Ye=>{removeLinkAttributesFromSelection(Ye,getLinkAttributesAllowedOnText(t.schema))})})}_enableClipboardIntegration(){const u=this.editor,t=u.model,de=this.editor.config.get("link.defaultProtocol");de&&this.listenTo(u.plugins.get("ClipboardPipeline"),"contentInsertion",(pe,Le)=>{t.change(Ye=>{const tt=Ye.createRangeIn(Le.content);for(const st of tt.getItems())if(st.hasAttribute("linkHref")){const ht=addLinkProtocolIfApplicable(st.getAttribute("linkHref"),de);Ye.setAttribute("linkHref",ht,st)}})})}}function removeLinkAttributesFromSelection(me,u){me.removeSelectionAttribute("linkHref");for(const t of u)me.removeSelectionAttribute(t)}function getLinkAttributesAllowedOnText(me){return me.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}class LinkFormView extends View{constructor(t,de,pe){super(t);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"urlInputView");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"_manualDecoratorSwitches");wt(this,"children");wt(this,"_validators");wt(this,"_focusables",new ViewCollection);wt(this,"_focusCycler");const Le=t.t;this._validators=pe,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(Le("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(Le("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(de),this.children=this._createFormChildren(de.manualDecorators),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const Ye=["ck","ck-link-form","ck-responsive-form"];de.manualDecorators.length&&Ye.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:Ye,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((t,de)=>(t[de.name]=de.isOn,t),{})}render(){super.render(),submitHandler({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(de=>{this._focusables.add(de),this.focusTracker.add(de.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const de=t(this);if(de)return this.urlInputView.errorText=de,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputText);return de.fieldView.inputMode="url",de.label=t("Link URL"),de}_createButton(t,de,pe,Le){const Ye=new ButtonView(this.locale);return Ye.set({label:t,icon:de,tooltip:!0}),Ye.extendTemplate({attributes:{class:pe}}),Le&&Ye.delegate("execute").to(this,Le),Ye}_createManualDecoratorSwitches(t){const de=this.createCollection();for(const pe of t.manualDecorators){const Le=new SwitchButtonView(this.locale);Le.set({name:pe.id,label:pe.label,withText:!0}),Le.bind("isOn").toMany([pe,t],"value",(Ye,tt)=>tt===void 0&&Ye===void 0?!!pe.defaultValue:!!Ye),Le.on("execute",()=>{pe.set("value",!Le.isOn)}),de.add(Le)}return de}_createFormChildren(t){const de=this.createCollection();if(de.add(this.urlInputView),t.length){const pe=new View;pe.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(Le=>({tag:"li",children:[Le],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),de.add(pe)}return de.add(this.saveButtonView),de.add(this.cancelButtonView),de}get url(){const{element:t}=this.urlInputView.fieldView;return t?t.value.trim():null}}var unlinkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class LinkActionsView extends View{constructor(t,de={},pe){super(t);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"previewButtonView");wt(this,"unlinkButtonView");wt(this,"editButtonView");wt(this,"_focusables",new ViewCollection);wt(this,"_focusCycler");wt(this,"_linkConfig");wt(this,"_options");const Le=t.t;this._options=pe,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(Le("Unlink"),unlinkIcon,"unlink"),this.editButtonView=this._createButton(Le("Edit link"),icons.pencil,"edit"),this.set("href",void 0),this._linkConfig=de,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(de=>{this._focusables.add(de),this.focusTracker.add(de.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(t,de,pe){const Le=new ButtonView(this.locale);return Le.set({label:t,icon:de,tooltip:!0}),Le.delegate("execute").to(this,pe),Le}_createPreviewButton(){const t=new ButtonView(this.locale),de=this.bindTemplate,pe=this.t;return t.set({withText:!0}),t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:de.to("href",Le=>Le&&ensureSafeUrl(Le,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:de.to(Le=>{this._options&&this._options.isScrollableToTarget(this.href)?(Le.preventDefault(),this._options.scrollToTarget(this.href)):openLink(this.href)})}}),t.bind("tooltip").to(this,"href",Le=>this._options&&this._options.isScrollableToTarget(Le)?pe("Scroll to target"):pe("Open link in new tab")),t.bind("label").to(this,"href",Le=>Le||pe("This link has no URL")),t.bind("isEnabled").to(this,"href",Le=>!!Le),t.template.tag="a",t}}var linkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const VISUAL_SELECTION_MARKER_NAME="link-ui";class LinkUI extends Plugin{constructor(){super(...arguments);wt(this,"actionsView",null);wt(this,"formView",null);wt(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=this.editor.t;t.editing.view.addObserver(ClickObserver),this._balloon=t.plugins.get(ContextualBalloon),this._createToolbarLinkButton(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME,view:(pe,{writer:Le})=>{if(!pe.markerRange.isCollapsed)return null;const Ye=Le.createUIElement("span");return Le.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],Ye),Ye}}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:de("Create link"),keystroke:LINK_KEYSTROKE},{label:de("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const t=this.editor,de=new LinkActionsView(t.locale,t.config.get("link"),createBookmarkCallbacks(t)),pe=t.commands.get("link"),Le=t.commands.get("unlink");return de.bind("href").to(pe,"value"),de.editButtonView.bind("isEnabled").to(pe),de.unlinkButtonView.bind("isEnabled").to(Le),this.listenTo(de,"edit",()=>{this._addFormView()}),this.listenTo(de,"unlink",()=>{t.execute("unlink"),this._hideUI()}),de.keystrokes.set("Esc",(Ye,tt)=>{this._hideUI(),tt()}),de.keystrokes.set(LINK_KEYSTROKE,(Ye,tt)=>{this._addFormView(),tt()}),de}_createFormView(){const t=this.editor,de=t.commands.get("link"),pe=t.config.get("link.defaultProtocol"),Le=new(CssTransitionDisablerMixin(LinkFormView))(t.locale,de,getFormValidators$1(t));return Le.urlInputView.fieldView.bind("value").to(de,"value"),Le.urlInputView.bind("isEnabled").to(de,"isEnabled"),Le.saveButtonView.bind("isEnabled").to(de,"isEnabled"),this.listenTo(Le,"submit",()=>{if(Le.isValid()){const{value:Ye}=Le.urlInputView.fieldView.element,tt=addLinkProtocolIfApplicable(Ye,pe);t.execute("link",tt,Le.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(Le.urlInputView,"change:errorText",()=>{t.ui.update()}),this.listenTo(Le,"cancel",()=>{this._closeFormView()}),Le.keystrokes.set("Esc",(Ye,tt)=>{this._closeFormView(),tt()}),Le}_createToolbarLinkButton(){const t=this.editor;t.ui.componentFactory.add("link",()=>{const de=this._createButton(ButtonView);return de.set({tooltip:!0}),de}),t.ui.componentFactory.add("menuBar:link",()=>{const de=this._createButton(MenuBarMenuListItemButtonView);return de.set({role:"menuitemcheckbox"}),de})}_createButton(t){const de=this.editor,pe=de.locale,Le=de.commands.get("link"),Ye=new t(de.locale),tt=pe.t;return Ye.set({label:tt("Link"),icon:linkIcon,keystroke:LINK_KEYSTROKE,isToggleable:!0}),Ye.bind("isEnabled").to(Le,"isEnabled"),Ye.bind("isOn").to(Le,"value",st=>!!st),this.listenTo(Ye,"execute",()=>this._showUI(!0)),Ye}_enableBalloonActivators(){const t=this.editor,de=t.editing.view.document;this.listenTo(de,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),t.keystrokes.set(LINK_KEYSTROKE,(pe,Le)=>{Le(),t.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,de)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),de())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,de)=>{this._isUIVisible&&(this._hideUI(),de())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const de=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=de.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),t.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const t=this.editor,de=t.editing.view.document;let pe=this._getSelectedLinkElement(),Le=tt();const Ye=()=>{const st=this._getSelectedLinkElement(),ht=tt();pe&&!st||!pe&&ht!==Le?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),pe=st,Le=ht};function tt(){return de.selection.focus.getAncestors().reverse().find(st=>st.is("element"))}this.listenTo(t.ui,"update",Ye),this.listenTo(this._balloon,"change:visibleView",Ye)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const t=this._balloon.visibleView;return!!this.formView&&t==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,de=this.editor.model,pe=t.document;let Le;if(de.markers.has(VISUAL_SELECTION_MARKER_NAME)){const Ye=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME)),tt=t.createRange(t.createPositionBefore(Ye[0]),t.createPositionAfter(Ye[Ye.length-1]));Le=t.domConverter.viewRangeToDom(tt)}else Le=()=>{const Ye=this._getSelectedLinkElement();return Ye?t.domConverter.mapViewToDom(Ye):t.domConverter.viewRangeToDom(pe.selection.getFirstRange())};return{target:Le}}_getSelectedLinkElement(){const t=this.editor.editing.view,de=t.document.selection,pe=de.getSelectedElement();if(de.isCollapsed||pe&&isWidget(pe))return findLinkElementAncestor(de.getFirstPosition());{const Le=de.getFirstRange().getTrimmed(),Ye=findLinkElementAncestor(Le.start),tt=findLinkElementAncestor(Le.end);return!Ye||Ye!=tt?null:t.createRangeIn(Ye).getTrimmed().isEqual(Le)?Ye:null}}_showFakeVisualSelection(){const t=this.editor.model;t.change(de=>{const pe=t.document.selection.getFirstRange();if(t.markers.has(VISUAL_SELECTION_MARKER_NAME))de.updateMarker(VISUAL_SELECTION_MARKER_NAME,{range:pe});else if(pe.start.isAtEnd){const Le=pe.start.getLastMatchingPosition(({item:Ye})=>!t.schema.isContent(Ye),{boundaries:pe});de.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:de.createRange(Le,pe.end)})}else de.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:pe})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(VISUAL_SELECTION_MARKER_NAME)&&t.change(de=>{de.removeMarker(VISUAL_SELECTION_MARKER_NAME)})}}function findLinkElementAncestor(me){return me.getAncestors().find(u=>isLinkElement(u))||null}function getFormValidators$1(me){const u=me.t,t=me.config.get("link.allowCreatingEmptyLinks");return[de=>{if(!t&&!de.url.length)return u("Link URL must not be empty.")}]}const MIN_LINK_LENGTH_WITH_SPACE_AT_END=4,URL_REG_EXP=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),URL_GROUP_IN_MATCH=2;class AutoLink extends Plugin{static get requires(){return[Delete,LinkEditing]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(u,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?findAttributeRange(t,"linkHref",t.textNode.getAttribute("linkHref"),u):null}_selectEntireLinks(u,t){const pe=this.editor.model,Le=pe.document.selection,Ye=Le.getFirstPosition(),tt=Le.getLastPosition();let st=t.getJoined(this._expandLinkRange(pe,Ye)||t);st&&(st=st.getJoined(this._expandLinkRange(pe,tt)||t)),st&&(st.start.isBefore(Ye)||st.end.isAfter(tt))&&u.setSelection(st)}_enablePasteLinking(){const u=this.editor,t=u.model,de=t.document.selection,pe=u.plugins.get("ClipboardPipeline"),Le=u.commands.get("link");pe.on("inputTransformation",(Ye,tt)=>{if(!this.isEnabled||!Le.isEnabled||de.isCollapsed||tt.method!=="paste"||de.rangeCount>1)return;const st=de.getFirstRange(),ht=tt.dataTransfer.getData("text/plain");if(!ht)return;const mt=ht.match(URL_REG_EXP);mt&&mt[2]===ht&&(t.change(gt=>{this._selectEntireLinks(gt,st),Le.execute(ht)}),Ye.stop())},{priority:"high"})}_enableTypingHandling(){const u=this.editor,t=new TextWatcher(u.model,de=>{let pe=de;if(!isSingleSpaceAtTheEnd(pe))return;pe=pe.slice(0,-1),"!.:,;?".includes(pe[pe.length-1])&&(pe=pe.slice(0,-1));const Le=getUrlAtTextEnd(pe);if(Le)return{url:Le,removedTrailingCharacters:de.length-pe.length}});t.on("matched:data",(de,pe)=>{const{batch:Le,range:Ye,url:tt,removedTrailingCharacters:st}=pe;if(!Le.isTyping)return;const ht=Ye.end.getShiftedBy(-st),mt=ht.getShiftedBy(-tt.length),gt=u.model.createRange(mt,ht);this._applyAutoLink(tt,gt)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const u=this.editor,t=u.model,de=u.commands.get("enter");de&&de.on("execute",()=>{const pe=t.document.selection.getFirstPosition();if(!pe.parent.previousSibling)return;const Le=t.createRangeIn(pe.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(Le)})}_enableShiftEnterHandling(){const u=this.editor,t=u.model,de=u.commands.get("shiftEnter");de&&de.on("execute",()=>{const pe=t.document.selection.getFirstPosition(),Le=t.createRange(t.createPositionAt(pe.parent,0),pe.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(Le)})}_checkAndApplyAutoLinkOnRange(u){const t=this.editor.model,{text:de,range:pe}=getLastTextLine(u,t),Le=getUrlAtTextEnd(de);if(Le){const Ye=t.createRange(pe.end.getShiftedBy(-Le.length),pe.end);this._applyAutoLink(Le,Ye)}}_applyAutoLink(u,t){const de=this.editor.model,pe=this.editor.config.get("link.defaultProtocol"),Le=addLinkProtocolIfApplicable(u,pe);!this.isEnabled||!isLinkAllowedOnRange(t,de)||!linkHasProtocol(Le)||linkIsAlreadySet(t)||this._persistAutoLink(Le,t)}_persistAutoLink(u,t){const de=this.editor.model,pe=this.editor.plugins.get("Delete");de.enqueueChange(Le=>{Le.setAttribute("linkHref",u,t),de.enqueueChange(()=>{pe.requestUndoOnBackspace()})})}}function isSingleSpaceAtTheEnd(me){return me.length>MIN_LINK_LENGTH_WITH_SPACE_AT_END&&me[me.length-1]===" "&&me[me.length-2]!==" "}function getUrlAtTextEnd(me){const u=URL_REG_EXP.exec(me);return u?u[URL_GROUP_IN_MATCH]:null}function isLinkAllowedOnRange(me,u){return u.schema.checkAttributeInSelection(u.createSelection(me),"linkHref")}function linkIsAlreadySet(me){const u=me.start.nodeAfter;return!!u&&u.hasAttribute("linkHref")}class Link extends Plugin{static get requires(){return[LinkEditing,LinkUI,AutoLink]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ListWalker{constructor(u,t){wt(this,"_startElement");wt(this,"_referenceIndent");wt(this,"_isForward");wt(this,"_includeSelf");wt(this,"_sameAttributes");wt(this,"_sameIndent");wt(this,"_lowerIndent");wt(this,"_higherIndent");this._startElement=u,this._referenceIndent=u.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=toArray$2(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(u,t){const pe=new this(u,t)[Symbol.iterator]();return first(pe)}*[Symbol.iterator](){const u=[];for(const{node:t}of new SiblingListBlocksIterator(this._getStartNode(),this._isForward?"forward":"backward")){const de=t.getAttribute("listIndent");if(de<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=de}else if(de>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){u.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){u.length&&(yield*u,u.length=0);break}continue}if(this._sameAttributes.some(pe=>t.getAttribute(pe)!==this._startElement.getAttribute(pe)))break}u.length&&(yield*u,u.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class SiblingListBlocksIterator{constructor(u,t="forward"){wt(this,"_node");wt(this,"_isForward");wt(this,"_previousNodesByIndent",[]);wt(this,"_previous",null);wt(this,"_previousNodeIndent",null);this._node=u,this._isForward=t==="forward"}[Symbol.iterator](){return this}next(){if(!isListItemBlock(this._node))return{done:!0,value:void 0};const u=this._node.getAttribute("listIndent");let t=null;if(this._previous){const pe=this._previousNodeIndent;u>pe?this._previousNodesByIndent[pe]=this._previous:u<pe?(t=this._previousNodesByIndent[u]||null,this._previousNodesByIndent.length=u):t=this._previous}const de={node:this._node,previous:this._previous,previousNodeInList:t};return this._previous=this._node,this._previousNodeIndent=u,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:de,done:!1}}}class ListBlocksIterable{constructor(u){wt(this,"_listHead");this._listHead=u}[Symbol.iterator](){return new SiblingListBlocksIterator(this._listHead)}}class ListItemUid{static next(){return uid()}}function isListItemBlock(me){return!!me&&me.is("element")&&me.hasAttribute("listItemId")}function getAllListItemBlocks(me,u={}){return[...getListItemBlocks(me,{...u,direction:"backward"}),...getListItemBlocks(me,{...u,direction:"forward"})]}function getListItemBlocks(me,u={}){const t=u.direction=="forward",de=Array.from(new ListWalker(me,{...u,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?de:de.reverse()}function getNestedListBlocks(me){return Array.from(new ListWalker(me,{direction:"forward",higherIndent:!0}))}function getListItems(me,u){const t=new ListWalker(me,{sameIndent:!0,sameAttributes:"listType",...u}),de=new ListWalker(me,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...u});return[...Array.from(t).reverse(),...de]}function isFirstBlockOfListItem(me){return!ListWalker.first(me,{sameIndent:!0,sameAttributes:"listItemId"})}function isLastBlockOfListItem(me){return!ListWalker.first(me,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function expandListBlocksToCompleteItems(me,u={}){me=toArray$2(me);const t=u.withNested!==!1,de=new Set;for(const pe of me)for(const Le of getAllListItemBlocks(pe,{higherIndent:t}))de.add(Le);return sortBlocks(de)}function expandListBlocksToCompleteList(me){me=toArray$2(me);const u=new Set;for(const t of me)for(const de of getListItems(t))u.add(de);return sortBlocks(u)}function splitListItemBefore(me,u){const t=getListItemBlocks(me,{direction:"forward"}),de=ListItemUid.next();for(const pe of t)u.setAttribute("listItemId",de,pe);return t}function mergeListItemBefore(me,u,t){const de={};for(const[Le,Ye]of u.getAttributes())Le.startsWith("list")&&(de[Le]=Ye);const pe=getListItemBlocks(me,{direction:"forward"});for(const Le of pe)t.setAttributes(de,Le);return pe}function indentBlocks(me,u,{expand:t,indentBy:de=1}={}){me=toArray$2(me);const pe=t?expandListBlocksToCompleteItems(me):me;for(const Le of pe){const Ye=Le.getAttribute("listIndent")+de;Ye<0?removeListAttributes(Le,u):u.setAttribute("listIndent",Ye,Le)}return pe}function outdentBlocksWithMerge(me,u){me=toArray$2(me);const t=expandListBlocksToCompleteItems(me),de=new Set,pe=Math.min(...t.map(Ye=>Ye.getAttribute("listIndent"))),Le=new Map;for(const Ye of t)Le.set(Ye,ListWalker.first(Ye,{lowerIndent:!0}));for(const Ye of t){if(de.has(Ye))continue;de.add(Ye);const tt=Ye.getAttribute("listIndent")-1;if(tt<0){removeListAttributes(Ye,u);continue}if(Ye.getAttribute("listIndent")==pe){const st=mergeListItemIfNotLast(Ye,Le.get(Ye),u);for(const ht of st)de.add(ht);if(st.length)continue}u.setAttribute("listIndent",tt,Ye)}return sortBlocks(de)}function removeListAttributes(me,u){me=toArray$2(me);for(const t of me)t.is("element","listItem")&&u.rename(t,"paragraph");for(const t of me)for(const de of t.getAttributeKeys())de.startsWith("list")&&u.removeAttribute(de,t);return me}function isSingleListItem(me){if(!me.length)return!1;const u=me[0].getAttribute("listItemId");return u?!me.some(t=>t.getAttribute("listItemId")!=u):!1}function outdentFollowingItems(me,u){const t=[];let de=Number.POSITIVE_INFINITY;for(const{node:pe}of new SiblingListBlocksIterator(me.nextSibling)){const Le=pe.getAttribute("listIndent");if(Le==0)break;Le<de&&(de=Le);const Ye=Le-de;u.setAttribute("listIndent",Ye,pe),t.push(pe)}return t}function sortBlocks(me){return Array.from(me).filter(u=>u.root.rootName!=="$graveyard").sort((u,t)=>u.index-t.index)}function getSelectedBlockObject(me){const u=me.document.selection.getSelectedElement();return u&&me.schema.isObject(u)&&me.schema.isBlock(u)?u:null}function canBecomeSimpleListItem(me,u){return u.checkChild(me.parent,"listItem")&&u.checkChild(me,"$text")&&!u.isObject(me)}function isNumberedListType(me){return me=="numbered"||me=="customNumbered"}function mergeListItemIfNotLast(me,u,t){return getListItemBlocks(u,{direction:"forward"}).pop().index>me.index?mergeListItemBefore(me,u,t):[]}class ListIndentCommand extends Command{constructor(t,de){super(t);wt(this,"_direction");this._direction=de}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,de=getSelectedListBlocks(t.document.selection);t.change(pe=>{const Le=[];isSingleListItem(de)&&!isFirstBlockOfListItem(de[0])?(this._direction=="forward"&&Le.push(...indentBlocks(de,pe)),Le.push(...splitListItemBefore(de[0],pe))):this._direction=="forward"?Le.push(...indentBlocks(de,pe,{expand:!0})):Le.push(...outdentBlocksWithMerge(de,pe));for(const Ye of Le){if(!Ye.hasAttribute("listType"))continue;const tt=ListWalker.first(Ye,{sameIndent:!0});tt&&pe.setAttribute("listType",tt.getAttribute("listType"),Ye)}this._fireAfterExecute(Le)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){let t=getSelectedListBlocks(this.editor.model.document.selection),de=t[0];if(!de)return!1;if(this._direction=="backward"||isSingleListItem(t)&&!isFirstBlockOfListItem(t[0]))return!0;t=expandListBlocksToCompleteItems(t),de=t[0];const pe=ListWalker.first(de,{sameIndent:!0});return pe?pe.getAttribute("listType")==de.getAttribute("listType"):!1}}function getSelectedListBlocks(me){const u=Array.from(me.getSelectedBlocks()),t=u.findIndex(de=>!isListItemBlock(de));return t!=-1&&(u.length=t),u}class ListCommand extends Command{constructor(t,de,pe={}){super(t);wt(this,"type");wt(this,"_listWalkerOptions");this.type=de,this._listWalkerOptions=pe.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const de=this.editor.model,pe=de.document,Le=getSelectedBlockObject(de),Ye=Array.from(pe.selection.getSelectedBlocks()).filter(st=>de.schema.checkAttribute(st,"listType")||canBecomeSimpleListItem(st,de.schema)),tt=t.forceValue!==void 0?!t.forceValue:this.value;de.change(st=>{if(tt){const ht=Ye[Ye.length-1],mt=getListItemBlocks(ht,{direction:"forward"}),gt=[];mt.length>1&&gt.push(...splitListItemBefore(mt[1],st)),gt.push(...removeListAttributes(Ye,st)),gt.push(...outdentFollowingItems(ht,st)),this._fireAfterExecute(gt)}else if((Le||pe.selection.isCollapsed)&&isListItemBlock(Ye[0])){const ht=getListItems(Le||Ye[0],this._listWalkerOptions);for(const mt of ht)st.setAttributes({...t.additionalAttributes,listType:this.type},mt);this._fireAfterExecute(ht)}else{const ht=[];for(const mt of Ye)if(!mt.hasAttribute("listType"))!mt.is("element","listItem")&&canBecomeSimpleListItem(mt,de.schema)&&st.rename(mt,"listItem"),st.setAttributes({...t.additionalAttributes,listIndent:0,listItemId:ListItemUid.next(),listType:this.type},mt),ht.push(mt);else for(const gt of expandListBlocksToCompleteItems(mt,{withNested:!1}))gt.getAttribute("listType")!=this.type&&(st.setAttributes({...t.additionalAttributes,listType:this.type},gt),ht.push(gt));this._fireAfterExecute(ht)}})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_getValue(){const t=this.editor.model.document.selection,de=Array.from(t.getSelectedBlocks());if(!de.length)return!1;for(const pe of de)if(pe.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const t=this.editor.model,de=t.schema,pe=t.document.selection,Le=Array.from(pe.getSelectedBlocks());if(!Le.length)return!1;if(this.value)return!0;for(const Ye of Le)if(de.checkAttribute(Ye,"listType")||canBecomeSimpleListItem(Ye,de))return!0;return!1}}class ListMergeCommand extends Command{constructor(t,de){super(t);wt(this,"_direction");this._direction=de}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:t=!1}={}){const de=this.editor.model,pe=de.document.selection,Le=[];de.change(Ye=>{const{firstElement:tt,lastElement:st}=this._getMergeSubjectElements(pe,t),ht=tt.getAttribute("listIndent")||0,mt=st.getAttribute("listIndent"),gt=st.getAttribute("listItemId");if(ht!=mt){const bt=getNestedListBlocks(st);Le.push(...indentBlocks([st,...bt],Ye,{indentBy:ht-mt,expand:ht<mt}))}if(t){let bt=pe;pe.isCollapsed&&(bt=Ye.createSelection(Ye.createRange(Ye.createPositionAt(tt,"end"),Ye.createPositionAt(st,0)))),de.deleteContent(bt,{doNotResetEntireContent:pe.isCollapsed});const _t=bt.getLastPosition().parent,vt=_t.nextSibling;Le.push(_t),vt&&vt!==st&&vt.getAttribute("listItemId")==gt&&Le.push(...mergeListItemBefore(vt,_t,Ye))}else Le.push(...mergeListItemBefore(st,tt,Ye));this._fireAfterExecute(Le)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){const t=this.editor.model,de=t.document.selection,pe=getSelectedBlockObject(t);if(de.isCollapsed||pe){const Le=pe||de.getFirstPosition().parent;if(!isListItemBlock(Le))return!1;const Ye=this._direction=="backward"?Le.previousSibling:Le.nextSibling;if(!Ye||isSingleListItem([Le,Ye]))return!1}else{const Le=de.getLastPosition(),Ye=de.getFirstPosition();if(Le.parent===Ye.parent||!isListItemBlock(Le.parent))return!1}return!0}_getMergeSubjectElements(t,de){const pe=this.editor.model,Le=getSelectedBlockObject(pe);let Ye,tt;if(t.isCollapsed||Le){const st=Le||t.getFirstPosition().parent,ht=isFirstBlockOfListItem(st);this._direction=="backward"?(tt=st,ht&&!de?Ye=ListWalker.first(st,{sameIndent:!0,lowerIndent:!0}):Ye=st.previousSibling):(Ye=st,tt=st.nextSibling)}else Ye=t.getFirstPosition().parent,tt=t.getLastPosition().parent;return{firstElement:Ye,lastElement:tt}}}class ListSplitCommand extends Command{constructor(t,de){super(t);wt(this,"_direction");this._direction=de}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(de=>{const pe=splitListItemBefore(this._getStartBlock(),de);this._fireAfterExecute(pe)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){const t=this.editor.model.document.selection,de=this._getStartBlock();return t.isCollapsed&&isListItemBlock(de)&&!isFirstBlockOfListItem(de)}_getStartBlock(){const de=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?de:de.nextSibling}}class ListUtils extends Plugin{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(u){return expandListBlocksToCompleteList(u)}isFirstBlockOfListItem(u){return isFirstBlockOfListItem(u)}isListItemBlock(u){return isListItemBlock(u)}expandListBlocksToCompleteItems(u,t={}){return expandListBlocksToCompleteItems(u,t)}isNumberedListType(u){return isNumberedListType(u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isListView(me){return me.is("element","ol")||me.is("element","ul")}function isListItemView(me){return me.is("element","li")}function getIndent$1(me){let u=0,t=me.parent;for(;t;){if(isListItemView(t))u++;else{const de=t.previousSibling;de&&isListItemView(de)&&u++}t=t.parent}return u}function createListElement(me,u,t,de=getViewElementIdForListType(t,u)){return me.createAttributeElement(getViewElementNameForListType(t),null,{priority:2*u/100-100,id:de})}function createListItemElement(me,u,t){return me.createAttributeElement("li",null,{priority:(2*u+1)/100-100,id:t})}function getViewElementNameForListType(me){return me=="numbered"||me=="customNumbered"?"ol":"ul"}function getViewElementIdForListType(me,u){return`list-${me}-${u}`}function findAndAddListHeadToMap(me,u,t){const de=me.nodeBefore;if(isListItemBlock(de)){let pe=de;for(const{node:Le}of new SiblingListBlocksIterator(pe,"backward"))if(pe=Le,t.has(pe)||(t.add(pe),u.has(de)))return;u.add(pe)}else{const pe=me.nodeAfter;isListItemBlock(pe)&&u.add(pe)}}function fixListIndents(me,u){let t=0,de=-1,pe=null,Le=!1;for(const{node:Ye}of me){const tt=Ye.getAttribute("listIndent");if(tt>t){let st;pe===null?(pe=tt-t,st=t):(pe>tt&&(pe=tt),st=tt-pe),st>de+1&&(st=de+1),u.setAttribute("listIndent",st,Ye),Le=!0,de=st}else pe=null,t=tt+1,de=tt}return Le}function fixListItemIds(me,u,t){const de=new Set;let pe=!1;for(const{node:Le}of me){if(de.has(Le))continue;let Ye=Le.getAttribute("listType"),tt=Le.getAttribute("listItemId");if(u.has(tt)&&(tt=ListItemUid.next()),u.add(tt),Le.is("element","listItem")){Le.getAttribute("listItemId")!=tt&&(t.setAttribute("listItemId",tt,Le),pe=!0);continue}for(const st of getListItemBlocks(Le,{direction:"forward"}))de.add(st),st.getAttribute("listType")!=Ye&&(tt=ListItemUid.next(),Ye=st.getAttribute("listType")),st.getAttribute("listItemId")!=tt&&(t.setAttribute("listItemId",tt,st),pe=!0)}return pe}function listItemUpcastConverter(){return(me,u,t)=>{const{writer:de,schema:pe}=t;if(!u.modelRange)return;const Le=Array.from(u.modelRange.getItems({shallow:!0})).filter(gt=>pe.checkAttribute(gt,"listItemId"));if(!Le.length)return;const Ye=ListItemUid.next(),tt=getIndent$1(u.viewItem);let st=u.viewItem.parent&&u.viewItem.parent.is("element","ol")?"numbered":"bulleted";const ht=Le[0].getAttribute("listType");ht&&(st=ht);const mt={listItemId:Ye,listIndent:tt,listType:st};for(const gt of Le)gt.hasAttribute("listItemId")||de.setAttributes(mt,gt);Le.length>1&&Le[1].getAttribute("listItemId")!=mt.listItemId&&t.keepEmptyElement(Le[0])}}function reconvertItemsOnDataChange(me,u,t,de){return()=>{const tt=me.document.differ.getChanges(),st=[],ht=new Set,mt=new Set,gt=new Set;for(const bt of tt)if(bt.type=="insert"&&bt.name!="$text")findAndAddListHeadToMap(bt.position,ht,gt),bt.attributes.has("listItemId")?mt.add(bt.position.nodeAfter):findAndAddListHeadToMap(bt.position.getShiftedBy(bt.length),ht,gt);else if(bt.type=="remove"&&bt.attributes.has("listItemId"))findAndAddListHeadToMap(bt.position,ht,gt);else if(bt.type=="attribute"){const _t=bt.range.start.nodeAfter;t.includes(bt.attributeKey)?(findAndAddListHeadToMap(bt.range.start,ht,gt),bt.attributeNewValue===null?(findAndAddListHeadToMap(bt.range.start.getShiftedBy(1),ht,gt),Le(_t)&&st.push(_t)):mt.add(_t)):isListItemBlock(_t)&&Le(_t)&&st.push(_t)}for(const bt of ht.values())st.push(...pe(bt,mt));for(const bt of new Set(st))u.reconvertItem(bt)};function pe(tt,st){const ht=[],mt=new Set,gt=[];for(const{node:bt,previous:_t}of new SiblingListBlocksIterator(tt)){if(mt.has(bt))continue;const vt=bt.getAttribute("listIndent");_t&&vt<_t.getAttribute("listIndent")&&(gt.length=vt+1),gt[vt]=Object.fromEntries(Array.from(bt.getAttributes()).filter(([St])=>t.includes(St)));const Tt=getListItemBlocks(bt,{direction:"forward"});for(const St of Tt)mt.add(St),(Le(St,Tt)||Ye(St,gt,st))&&ht.push(St)}return ht}function Le(tt,st){const ht=u.mapper.toViewElement(tt);if(!ht)return!1;if(de.fire("checkElement",{modelElement:tt,viewElement:ht}))return!0;if(!tt.is("element","paragraph")&&!tt.is("element","listItem"))return!1;const gt=shouldUseBogusParagraph(tt,t,st);return gt&&ht.is("element","p")?!0:!!(!gt&&ht.is("element","span"))}function Ye(tt,st,ht){if(ht.has(tt))return!1;const mt=u.mapper.toViewElement(tt);let gt=st.length-1;for(let bt=mt.parent;!bt.is("editableElement");bt=bt.parent){const _t=isListItemView(bt),vt=isListView(bt);if(!vt&&!_t)continue;const Tt=`checkAttributes:${_t?"item":"list"}`;if(de.fire(Tt,{viewElement:bt,modelAttributes:st[gt]}))break;if(vt&&(gt--,gt<0))return!1}return!0}}function listItemDowncastConverter(me,u,t,{dataPipeline:de}={}){const pe=createAttributesConsumer(me);return(Le,Ye,tt)=>{const{writer:st,mapper:ht,consumable:mt}=tt,gt=Ye.item;if(!me.includes(Ye.attributeKey)||!pe(gt,mt))return;const bt=findMappedViewElement(gt,ht,t);removeCustomMarkerElements(bt,st,ht),unwrapListItemBlock(bt,st);const _t=insertCustomMarkerElements(gt,bt,u,st,{dataPipeline:de});wrapListItemBlock(gt,_t,u,st)}}function listItemDowncastRemoveConverter(me){return(u,t,de)=>{const{writer:pe,mapper:Le}=de,Ye=u.name.split(":")[1];if(!me.checkAttribute(Ye,"listItemId"))return;const tt=Le.toViewPosition(t.position),st=t.position.getShiftedBy(t.length),ht=Le.toViewPosition(st,{isPhantom:!0}),gt=pe.createRange(tt,ht).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */gt&&removeCustomMarkerElements(gt,pe,Le)}}function bogusParagraphCreator(me,{dataPipeline:u}={}){return(t,{writer:de})=>{if(!shouldUseBogusParagraph(t,me))return null;if(!u)return de.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const pe=de.createContainerElement("p");return de.setCustomProperty("dataPipeline:transparentRendering",!0,pe),pe}}function findMappedViewElement(me,u,t){const de=t.createRangeOn(me);return u.toViewRange(de).getTrimmed().end.nodeBefore}function createModelToViewPositionMapper(me,u){return(t,de)=>{if(de.modelPosition.offset>0)return;const pe=de.modelPosition.parent;if(!isListItemBlock(pe)||!me.some(ht=>ht.scope=="itemMarker"&&ht.canInjectMarkerIntoElement&&ht.canInjectMarkerIntoElement(pe)))return;const Le=de.mapper.toViewElement(pe),Ye=u.createRangeIn(Le),tt=Ye.getWalker();let st=Ye.start;for(const{item:ht}of tt){if(ht.is("element")&&de.mapper.toModelElement(ht)||ht.is("$textProxy"))break;ht.is("element")&&ht.getCustomProperty("listItemMarker")&&(st=u.createPositionAfter(ht),tt.skip(({previousPosition:mt})=>!mt.isEqual(st)))}de.viewPosition=st}}function removeCustomMarkerElements(me,u,t){for(;me.parent.is("attributeElement")&&me.parent.getCustomProperty("listItemWrapper");)u.unwrap(u.createRangeOn(me),me.parent);const de=[];pe(u.createPositionBefore(me).getWalker({direction:"backward"})),pe(u.createRangeIn(me).getWalker());for(const Le of de)u.remove(Le);function pe(Le){for(const{item:Ye}of Le){if(Ye.is("element")&&t.toModelElement(Ye))break;Ye.is("element")&&Ye.getCustomProperty("listItemMarker")&&de.push(Ye)}}}function insertCustomMarkerElements(me,u,t,de,{dataPipeline:pe}){let Le=de.createRangeOn(u);if(!isFirstBlockOfListItem(me))return Le;for(const Ye of t){if(Ye.scope!="itemMarker")continue;const tt=Ye.createElement(de,me,{dataPipeline:pe});if(!tt||(de.setCustomProperty("listItemMarker",!0,tt),Ye.canInjectMarkerIntoElement&&Ye.canInjectMarkerIntoElement(me)?de.insert(de.createPositionAt(u,0),tt):(de.insert(Le.start,tt),Le=de.createRange(de.createPositionBefore(tt),de.createPositionAfter(u))),!Ye.createWrapperElement||!Ye.canWrapElement))continue;const st=Ye.createWrapperElement(de,me,{dataPipeline:pe});de.setCustomProperty("listItemWrapper",!0,st),Ye.canWrapElement(me)?Le=de.wrap(Le,st):(Le=de.wrap(de.createRangeOn(tt),st),Le=de.createRange(Le.start,de.createPositionAfter(u)))}return Le}function unwrapListItemBlock(me,u){let t=me.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const de=t.parent;u.unwrap(u.createRangeOn(me),t),t=de}}function wrapListItemBlock(me,u,t,de){if(!me.hasAttribute("listIndent"))return;const pe=me.getAttribute("listIndent");let Le=me;for(let Ye=pe;Ye>=0;Ye--){const tt=createListItemElement(de,Ye,Le.getAttribute("listItemId")),st=createListElement(de,Ye,Le.getAttribute("listType"));for(const ht of t)(ht.scope=="list"||ht.scope=="item")&&Le.hasAttribute(ht.attributeName)&&ht.setAttributeOnDowncast(de,Le.getAttribute(ht.attributeName),ht.scope=="list"?st:tt);if(u=de.wrap(u,tt),u=de.wrap(u,st),Ye==0||(Le=ListWalker.first(Le,{lowerIndent:!0}),!Le))break}}function createAttributesConsumer(me){return(u,t)=>{const de=[];for(const pe of me)u.hasAttribute(pe)&&de.push(`attribute:${pe}`);return de.every(pe=>t.test(u,pe)!==!1)?(de.forEach(pe=>t.consume(u,pe)),!0):!1}}function shouldUseBogusParagraph(me,u,t=getAllListItemBlocks(me)){if(!isListItemBlock(me))return!1;for(const de of me.getAttributeKeys())if(!(de.startsWith("selection:")||de=="htmlEmptyBlock")&&!u.includes(de))return!1;return t.length<2}const LIST_BASE_ATTRIBUTES=["listType","listIndent","listItemId"];class ListEditing extends Plugin{constructor(t){super(t);wt(this,"_downcastStrategies",[]);t.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete,ListUtils,ClipboardPipeline]}init(){const t=this.editor,de=t.model,pe=t.config.get("list.multiBlock");if(t.plugins.has("LegacyListEditing"))throw new CKEditorError("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});de.schema.register("$listItem",{allowAttributes:LIST_BASE_ATTRIBUTES}),pe?(de.schema.extend("$container",{allowAttributesOf:"$listItem"}),de.schema.extend("$block",{allowAttributesOf:"$listItem"}),de.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):de.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const Le of LIST_BASE_ATTRIBUTES)de.schema.setAttributeProperties(Le,{copyOnReplace:!0});t.commands.add("numberedList",new ListCommand(t,"numbered")),t.commands.add("bulletedList",new ListCommand(t,"bulleted")),t.commands.add("customNumberedList",new ListCommand(t,"customNumbered",{multiLevel:!0})),t.commands.add("customBulletedList",new ListCommand(t,"customBulleted",{multiLevel:!0})),t.commands.add("indentList",new ListIndentCommand(t,"forward")),t.commands.add("outdentList",new ListIndentCommand(t,"backward")),t.commands.add("splitListItemBefore",new ListSplitCommand(t,"before")),t.commands.add("splitListItemAfter",new ListSplitCommand(t,"after")),pe&&(t.commands.add("mergeListItemBackward",new ListMergeCommand(t,"backward")),t.commands.add("mergeListItemForward",new ListMergeCommand(t,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const de=this.editor.commands,pe=de.get("indent"),Le=de.get("outdent");pe&&pe.registerChildCommand(de.get("indentList"),{priority:"high"}),Le&&Le.registerChildCommand(de.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(t){this._downcastStrategies.push(t)}getListAttributeNames(){return[...LIST_BASE_ATTRIBUTES,...this._downcastStrategies.map(t=>t.attributeName)]}_setupDeleteIntegration(){const t=this.editor,de=t.commands.get("mergeListItemBackward"),pe=t.commands.get("mergeListItemForward");this.listenTo(t.editing.view.document,"delete",(Le,Ye)=>{const tt=t.model.document.selection;getSelectedBlockObject(t.model)||t.model.change(()=>{const st=tt.getFirstPosition();if(tt.isCollapsed&&Ye.direction=="backward"){if(!st.isAtStart)return;const ht=st.parent;if(!isListItemBlock(ht))return;if(!ListWalker.first(ht,{sameAttributes:"listType",sameIndent:!0})&&ht.getAttribute("listIndent")===0)isLastBlockOfListItem(ht)||t.execute("splitListItemAfter"),t.execute("outdentList");else{if(!de||!de.isEnabled)return;de.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(t.model,"backward")})}Ye.preventDefault(),Le.stop()}else{if(tt.isCollapsed&&!tt.getLastPosition().isAtEnd||!pe||!pe.isEnabled)return;pe.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(t.model,"forward")}),Ye.preventDefault(),Le.stop()}})},{context:"li"})}_setupEnterIntegration(){const t=this.editor,de=t.model,pe=t.commands,Le=pe.get("enter");this.listenTo(t.editing.view.document,"enter",(Ye,tt)=>{const st=de.document,ht=st.selection.getFirstPosition().parent;if(st.selection.isCollapsed&&isListItemBlock(ht)&&ht.isEmpty&&!tt.isSoft){const mt=isFirstBlockOfListItem(ht),gt=isLastBlockOfListItem(ht);mt&&gt?(t.execute("outdentList"),tt.preventDefault(),Ye.stop()):mt&&!gt?(t.execute("splitListItemAfter"),tt.preventDefault(),Ye.stop()):gt&&(t.execute("splitListItemBefore"),tt.preventDefault(),Ye.stop())}},{context:"li"}),this.listenTo(Le,"afterExecute",()=>{const Ye=pe.get("splitListItemBefore");if(Ye.refresh(),!Ye.isEnabled)return;const st=t.model.document.selection.getLastPosition().parent;getAllListItemBlocks(st).length===2&&Ye.execute()})}_setupTabIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"tab",(de,pe)=>{const Le=pe.shiftKey?"outdentList":"indentList";this.editor.commands.get(Le).isEnabled&&(t.execute(Le),pe.stopPropagation(),pe.preventDefault(),de.stop())},{context:"li"})}_setupConversion(){const t=this.editor,de=t.model,pe=this.getListAttributeNames(),Le=t.config.get("list.multiBlock"),Ye=Le?"paragraph":"listItem";t.conversion.for("upcast").elementToElement({view:"li",model:(st,{writer:ht})=>ht.createElement(Ye,{listType:""})}).elementToElement({view:"p",model:(st,{writer:ht})=>st.parent&&st.parent.is("element","li")?ht.createElement(Ye,{listType:""}):null,converterPriority:"high"}).add(st=>{st.on("element:li",listItemUpcastConverter())}),Le||t.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),t.conversion.for("editingDowncast").elementToElement({model:Ye,view:bogusParagraphCreator(pe),converterPriority:"high"}).add(st=>{st.on("attribute",listItemDowncastConverter(pe,this._downcastStrategies,de)),st.on("remove",listItemDowncastRemoveConverter(de.schema))}),t.conversion.for("dataDowncast").elementToElement({model:Ye,view:bogusParagraphCreator(pe,{dataPipeline:!0}),converterPriority:"high"}).add(st=>{st.on("attribute",listItemDowncastConverter(pe,this._downcastStrategies,de,{dataPipeline:!0}))});const tt=createModelToViewPositionMapper(this._downcastStrategies,t.editing.view);t.editing.mapper.on("modelToViewPosition",tt),t.data.mapper.on("modelToViewPosition",tt),this.listenTo(de.document,"change:data",reconvertItemsOnDataChange(de,t.editing,pe,this),{priority:"high"}),this.on("checkAttributes:item",(st,{viewElement:ht,modelAttributes:mt})=>{ht.id!=mt.listItemId&&(st.return=!0,st.stop())}),this.on("checkAttributes:list",(st,{viewElement:ht,modelAttributes:mt})=>{(ht.name!=getViewElementNameForListType(mt.listType)||ht.id!=getViewElementIdForListType(mt.listType,mt.listIndent))&&(st.return=!0,st.stop())})}_setupModelPostFixing(){const t=this.editor.model,de=this.getListAttributeNames();t.document.registerPostFixer(pe=>modelChangePostFixer$1(t,pe,de,this)),this.on("postFixer",(pe,{listNodes:Le,writer:Ye})=>{pe.return=fixListIndents(Le,Ye)||pe.return},{priority:"high"}),this.on("postFixer",(pe,{listNodes:Le,writer:Ye,seenIds:tt})=>{pe.return=fixListItemIds(Le,tt,Ye)||pe.return},{priority:"high"})}_setupClipboardIntegration(){const t=this.editor.model,de=this.editor.plugins.get("ClipboardPipeline");this.listenTo(t,"insertContent",createModelIndentPasteFixer(t),{priority:"high"}),this.listenTo(de,"outputTransformation",(pe,Le)=>{t.change(Ye=>{const tt=Array.from(Le.content.getChildren()),st=tt[tt.length-1];if(tt.length>1&&st.is("element")&&st.isEmpty&&tt.slice(0,-1).every(isListItemBlock)&&Ye.remove(st),Le.method=="copy"||Le.method=="cut"){const ht=Array.from(Le.content.getChildren());isSingleListItem(ht)&&removeListAttributes(ht,Ye)}})})}_setupAccessibilityIntegration(){const t=this.editor,de=t.t;t.accessibility.addKeystrokeInfoGroup({id:"list",label:de("Keystrokes that can be used in a list"),keystrokes:[{label:de("Increase list item indent"),keystroke:"Tab"},{label:de("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function modelChangePostFixer$1(me,u,t,de){const pe=me.document.differ.getChanges(),Le=new Set,Ye=new Set,tt=de.editor.config.get("list.multiBlock");let st=!1;for(const mt of pe){if(mt.type=="insert"&&mt.name!="$text"){const gt=mt.position.nodeAfter;if(!me.schema.checkAttribute(gt,"listItemId"))for(const bt of Array.from(gt.getAttributeKeys()))t.includes(bt)&&(u.removeAttribute(bt,gt),st=!0);findAndAddListHeadToMap(mt.position,Ye,Le),mt.attributes.has("listItemId")||findAndAddListHeadToMap(mt.position.getShiftedBy(mt.length),Ye,Le);for(const{item:bt,previousPosition:_t}of me.createRangeIn(gt))isListItemBlock(bt)&&findAndAddListHeadToMap(_t,Ye,Le)}else mt.type=="remove"?findAndAddListHeadToMap(mt.position,Ye,Le):mt.type=="attribute"&&t.includes(mt.attributeKey)&&(findAndAddListHeadToMap(mt.range.start,Ye,Le),mt.attributeNewValue===null&&findAndAddListHeadToMap(mt.range.start.getShiftedBy(1),Ye,Le));if(!tt&&mt.type=="attribute"&&LIST_BASE_ATTRIBUTES.includes(mt.attributeKey)){const gt=mt.range.start.nodeAfter;mt.attributeNewValue===null&&gt&&gt.is("element","listItem")?(u.rename(gt,"paragraph"),st=!0):mt.attributeOldValue===null&&gt&&gt.is("element")&&gt.name!="listItem"&&(u.rename(gt,"listItem"),st=!0)}}const ht=new Set;for(const mt of Ye.values())st=de.fire("postFixer",{listNodes:new ListBlocksIterable(mt),listHead:mt,writer:u,seenIds:ht})||st;return st}function createModelIndentPasteFixer(me){return(u,[t,de])=>{const pe=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!pe.length)return;const Ye=(de?me.createSelection(de):me.document.selection).getFirstPosition();let tt;if(isListItemBlock(Ye.parent))tt=Ye.parent;else if(isListItemBlock(Ye.nodeBefore)&&isListItemBlock(Ye.nodeAfter))tt=Ye.nodeBefore;else return;me.change(st=>{const ht=tt.getAttribute("listType"),mt=tt.getAttribute("listIndent"),gt=pe[0].getAttribute("listIndent")||0,bt=Math.max(mt-gt,0);for(const _t of pe){const vt=isListItemBlock(_t);tt.is("element","listItem")&&_t.is("element","paragraph")&&st.rename(_t,"listItem"),st.setAttributes({listIndent:(vt?_t.getAttribute("listIndent"):0)+bt,listItemId:vt?_t.getAttribute("listItemId"):ListItemUid.next(),listType:ht},_t)}})}}function shouldMergeOnBlocksContentLevel(me,u){const t=me.document.selection;if(!t.isCollapsed)return!getSelectedBlockObject(me);if(u==="forward")return!0;const pe=t.getFirstPosition().parent,Le=pe.previousSibling;return me.schema.isObject(Le)?!1:Le.isEmpty?!0:isSingleListItem([pe,Le])}function createUIComponents(me,u,t,de){me.ui.componentFactory.add(u,()=>{const pe=_createButton(ButtonView,me,u,t,de);return pe.set({tooltip:!0,isToggleable:!0}),pe}),me.ui.componentFactory.add(`menuBar:${u}`,()=>{const pe=_createButton(MenuBarMenuListItemButtonView,me,u,t,de);return pe.set({role:"menuitemcheckbox",isToggleable:!0}),pe})}function _createButton(me,u,t,de,pe){const Le=u.commands.get(t),Ye=new me(u.locale);return Ye.set({label:de,icon:pe}),Ye.bind("isOn","isEnabled").to(Le,"value","isEnabled"),Ye.on("execute",()=>{u.execute(t),u.editing.view.focus()}),Ye}class ListUI extends Plugin{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||createUIComponents(this.editor,"numberedList",u("Numbered List"),icons.numberedList),this.editor.ui.componentFactory.has("bulletedList")||createUIComponents(this.editor,"bulletedList",u("Bulleted List"),icons.bulletedList)}}class List extends Plugin{static get requires(){return[ListEditing,ListUI]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class ListStartCommand extends Command{refresh(){const u=this._getValue();this.value=u,this.isEnabled=u!=null}execute({startIndex:u=1}={}){const t=this.editor.model,de=t.document;let pe=Array.from(de.selection.getSelectedBlocks()).filter(Le=>isListItemBlock(Le)&&isNumberedListType(Le.getAttribute("listType")));pe=expandListBlocksToCompleteList(pe),t.change(Le=>{for(const Ye of pe)Le.setAttribute("listStart",u>=0?u:1,Ye)})}_getValue(){const t=this.editor.model.document,de=first(t.selection.getSelectedBlocks());return de&&isListItemBlock(de)&&isNumberedListType(de.getAttribute("listType"))?de.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const LIST_STYLE_TO_LIST_TYPE={},LIST_STYLE_TO_TYPE_ATTRIBUTE={},TYPE_ATTRIBUTE_TO_LIST_STYLE={},LIST_STYLE_TYPES=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:me,typeAttribute:u,listType:t}of LIST_STYLE_TYPES)LIST_STYLE_TO_LIST_TYPE[me]=t,LIST_STYLE_TO_TYPE_ATTRIBUTE[me]=u,u&&(TYPE_ATTRIBUTE_TO_LIST_STYLE[u]=me);function getAllSupportedStyleTypes(){return LIST_STYLE_TYPES.map(me=>me.listStyle)}function getListTypeFromListStyleType$1(me){return LIST_STYLE_TO_LIST_TYPE[me]||null}function getListStyleTypeFromTypeAttribute(me){return TYPE_ATTRIBUTE_TO_LIST_STYLE[me]||null}function getTypeAttributeFromListStyleType(me){return LIST_STYLE_TO_TYPE_ATTRIBUTE[me]||null}function normalizeListStyle(me){switch(me){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return me}}class ListStyleCommand extends Command{constructor(t,de,pe){super(t);wt(this,"defaultType");wt(this,"_supportedTypes");this.defaultType=de,this._supportedTypes=pe}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const de=this.editor.model,pe=de.document;de.change(Le=>{this._tryToConvertItemsToList(t);let Ye=Array.from(pe.selection.getSelectedBlocks()).filter(tt=>tt.hasAttribute("listType"));if(Ye.length){Ye=expandListBlocksToCompleteList(Ye);for(const tt of Ye)Le.setAttribute("listStyle",t.type||this.defaultType,tt)}})}isStyleTypeSupported(t){return this._supportedTypes?this._supportedTypes.includes(t):!0}_getValue(){const t=first(this.editor.model.document.selection.getSelectedBlocks());return isListItemBlock(t)?t.getAttribute("listStyle"):null}_checkEnabled(){const t=this.editor,de=t.commands.get("numberedList"),pe=t.commands.get("bulletedList");return de.isEnabled||pe.isEnabled}_tryToConvertItemsToList(t){if(!t.type)return;const de=getListTypeFromListStyleType$1(t.type);if(!de)return;const pe=this.editor,Le=`${de}List`;pe.commands.get(Le).value||pe.execute(Le)}}class ListReversedCommand extends Command{refresh(){const u=this._getValue();this.value=u,this.isEnabled=u!=null}execute(u={}){const t=this.editor.model,de=t.document;let pe=Array.from(de.selection.getSelectedBlocks()).filter(Le=>isListItemBlock(Le)&&Le.getAttribute("listType")=="numbered");pe=expandListBlocksToCompleteList(pe),t.change(Le=>{for(const Ye of pe)Le.setAttribute("listReversed",!!u.reversed,Ye)})}_getValue(){const t=this.editor.model.document,de=first(t.selection.getSelectedBlocks());return isListItemBlock(de)&&de.getAttribute("listType")=="numbered"?de.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function listPropertiesUpcastConverter(me){return(u,t,de)=>{const{writer:pe,schema:Le,consumable:Ye}=de;if(Ye.test(t.viewItem,me.viewConsumables)===!1)return;t.modelRange||Object.assign(t,de.convertChildren(t.viewItem,t.modelCursor));let tt=!1;for(const st of t.modelRange.getItems({shallow:!0}))Le.checkAttribute(st,me.attributeName)&&me.appliesToListItem(st)&&(st.hasAttribute(me.attributeName)||(pe.setAttribute(me.attributeName,me.getAttributeOnUpcast(t.viewItem),st),tt=!0));tt&&Ye.consume(t.viewItem,me.viewConsumables)}}class ListPropertiesUtils extends Plugin{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return getAllSupportedStyleTypes()}getListTypeFromListStyleType(u){return getListTypeFromListStyleType$1(u)}getListStyleTypeFromTypeAttribute(u){return getListStyleTypeFromTypeAttribute(u)}getTypeAttributeFromListStyleType(u){return getTypeAttributeFromListStyleType(u)}}function getNormalizedConfig(me){const{startIndex:u,reversed:t,styles:de}=me;return{styles:getNormalizedStylesConfig(de),startIndex:u||!1,reversed:t||!1}}function getNormalizedStylesConfig(me){const u={listTypes:["bulleted","numbered"],useAttribute:!1};return me===!0||(me?Array.isArray(me)||typeof me=="string"?u.listTypes=toArray$2(me):(u.listTypes=me.listTypes?toArray$2(me.listTypes):u.listTypes,u.useAttribute=!!me.useAttribute,me.listStyleTypes&&(u.listStyleTypes=me.listStyleTypes)):u.listTypes=[]),u}const DEFAULT_LIST_TYPE$1="default";class ListPropertiesEditing extends Plugin{static get requires(){return[ListEditing,ListPropertiesUtils]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const u=this.editor,t=u.model,de=u.plugins.get(ListEditing),pe=u.config.get("list.properties"),Le=createAttributeStrategies$1(pe);for(const Ye of Le)Ye.addCommand(u),t.schema.extend("$listItem",{allowAttributes:Ye.attributeName}),de.registerDowncastStrategy({scope:"list",attributeName:Ye.attributeName,setAttributeOnDowncast(tt,st,ht){Ye.setAttributeOnDowncast(tt,st,ht)}});u.conversion.for("upcast").add(Ye=>{for(const tt of Le)Ye.on("element:ol",listPropertiesUpcastConverter(tt)),Ye.on("element:ul",listPropertiesUpcastConverter(tt))}),de.on("checkAttributes:list",(Ye,{viewElement:tt,modelAttributes:st})=>{for(const ht of Le)ht.getAttributeOnUpcast(tt)!=st[ht.attributeName]&&(Ye.return=!0,Ye.stop())}),this.listenTo(u.commands.get("indentList"),"afterExecute",(Ye,tt)=>{t.change(st=>{for(const ht of tt)for(const mt of Le)mt.appliesToListItem(ht)&&st.setAttribute(mt.attributeName,mt.defaultValue,ht)})}),de.on("postFixer",(Ye,{listNodes:tt,writer:st})=>{for(const{node:ht}of tt)for(const mt of Le)mt.hasValidAttribute(ht)||(mt.appliesToListItem(ht)?st.setAttribute(mt.attributeName,mt.defaultValue,ht):st.removeAttribute(mt.attributeName,ht),Ye.return=!0)}),de.on("postFixer",(Ye,{listNodes:tt,writer:st})=>{for(const{node:ht,previousNodeInList:mt}of tt)if(mt&&mt.getAttribute("listType")==ht.getAttribute("listType"))for(const gt of Le){const{attributeName:bt}=gt;if(!gt.appliesToListItem(ht))continue;const _t=mt.getAttribute(bt);ht.getAttribute(bt)!=_t&&(st.setAttribute(bt,_t,ht),Ye.return=!0)}})}}function createAttributeStrategies$1(me){const u=[],t=getNormalizedConfig(me);if(me.styles){const de=t.styles.useAttribute;u.push({attributeName:"listStyle",defaultValue:DEFAULT_LIST_TYPE$1,viewConsumables:{styles:"list-style-type"},addCommand(pe){let Le=getAllSupportedStyleTypes();de&&(Le=Le.filter(Ye=>!!getTypeAttributeFromListStyleType(Ye))),pe.commands.add("listStyle",new ListStyleCommand(pe,DEFAULT_LIST_TYPE$1,Le))},appliesToListItem(pe){return pe.getAttribute("listType")=="numbered"||pe.getAttribute("listType")=="bulleted"},hasValidAttribute(pe){if(!this.appliesToListItem(pe))return!pe.hasAttribute("listStyle");if(!pe.hasAttribute("listStyle"))return!1;const Le=pe.getAttribute("listStyle");return Le==DEFAULT_LIST_TYPE$1?!0:getListTypeFromListStyleType$1(Le)==pe.getAttribute("listType")},setAttributeOnDowncast(pe,Le,Ye){if(Le&&Le!==DEFAULT_LIST_TYPE$1)if(de){const tt=getTypeAttributeFromListStyleType(Le);if(tt){pe.setAttribute("type",tt,Ye);return}}else{pe.setStyle("list-style-type",Le,Ye);return}pe.removeStyle("list-style-type",Ye),pe.removeAttribute("type",Ye)},getAttributeOnUpcast(pe){const Le=pe.getStyle("list-style-type");if(Le)return normalizeListStyle(Le);const Ye=pe.getAttribute("type");return Ye?getListStyleTypeFromTypeAttribute(Ye):DEFAULT_LIST_TYPE$1}})}return me.reversed&&u.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(de){de.commands.add("listReversed",new ListReversedCommand(de))},appliesToListItem(de){return de.getAttribute("listType")=="numbered"},hasValidAttribute(de){return this.appliesToListItem(de)==de.hasAttribute("listReversed")},setAttributeOnDowncast(de,pe,Le){pe?de.setAttribute("reversed","reversed",Le):de.removeAttribute("reversed",Le)},getAttributeOnUpcast(de){return de.hasAttribute("reversed")}}),me.startIndex&&u.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(de){de.commands.add("listStart",new ListStartCommand(de))},appliesToListItem(de){return isNumberedListType(de.getAttribute("listType"))},hasValidAttribute(de){return this.appliesToListItem(de)==de.hasAttribute("listStart")},setAttributeOnDowncast(de,pe,Le){pe==0||pe>1?de.setAttribute("start",pe,Le):de.removeAttribute("start",Le)},getAttributeOnUpcast(de){const pe=de.getAttribute("start");return pe>=0?pe:1}}),u}class ListPropertiesView extends View{constructor(t,{enabledProperties:de,styleButtonViews:pe,styleGridAriaLabel:Le}){super(t);wt(this,"children");wt(this,"stylesView",null);wt(this,"additionalPropertiesCollapsibleView",null);wt(this,"startIndexFieldView",null);wt(this,"reversedSwitchButtonView",null);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"focusables",new ViewCollection);wt(this,"focusCycler");const Ye=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),pe&&pe.length?(this.stylesView=this._createStylesView(pe,Le),this.children.add(this.stylesView)):Ye.push("ck-list-properties_without-styles"),(de.startIndex||de.reversed)&&(this._addNumberedListPropertyViews(de),Ye.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:Ye},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=de=>de.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,de){const pe=new View(this.locale);return pe.children=pe.createCollection(),pe.children.addMany(t),pe.setTemplate({tag:"div",attributes:{"aria-label":de,class:["ck","ck-list-styles-list"]},children:pe.children}),pe.children.delegate("execute").to(this),pe.focus=function(){for(const Le of this.children)if(Le instanceof ButtonView&&Le.isOn){Le.focus();return}this.children.first.focus()},pe.focusTracker=new FocusTracker,pe.keystrokes=new KeystrokeHandler,pe.render(),pe.keystrokes.listenTo(pe.element),pe}_addNumberedListPropertyViews(t){const de=this.locale.t,pe=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),pe.push(this.startIndexFieldView)),t.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),pe.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,pe),this.additionalPropertiesCollapsibleView.set({label:de("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(pe,"isEnabled",(...Le)=>Le.some(Ye=>Ye)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(Le,Ye,tt)=>{tt||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(pe)}_createStartIndexField(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputNumber);return de.set({label:t("Start at"),class:"ck-numbered-list-properties__start-index"}),de.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),de.fieldView.on("input",()=>{const pe=de.fieldView.element,Le=pe.valueAsNumber;if(Number.isNaN(Le)){de.errorText=t("Invalid start index value.");return}pe.checkValidity()?this.fire("listStart",{startIndex:Le}):de.errorText=t("Start index must be greater than 0.")}),de}_createReversedSwitchButton(){const t=this.locale.t,de=new SwitchButtonView(this.locale);return de.set({withText:!0,label:t("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),de.delegate("execute").to(this,"listReversed"),de}}var listStyleDiscIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',listStyleCircleIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',listStyleSquareIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',listStyleDecimalIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',listStyleDecimalWithLeadingZeroIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class ListPropertiesUI extends Plugin{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,de=u.config.get("list.properties"),pe=getNormalizedConfig(de),Le=pe.styles.listTypes;if(Le.includes("bulleted")){const Ye=[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:listStyleDiscIcon},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:listStyleCircleIcon},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:listStyleSquareIcon}],tt=t("Bulleted List"),st=t("Bulleted list styles toolbar"),ht="bulletedList";u.ui.componentFactory.add(ht,getDropdownViewCreator({editor:u,normalizedConfig:pe,parentCommandName:ht,buttonLabel:tt,buttonIcon:icons.bulletedList,styleGridAriaLabel:st,styleDefinitions:Ye})),u.ui.componentFactory.add(`menuBar:${ht}`,getMenuBarStylesMenuCreator({editor:u,normalizedConfig:pe,parentCommandName:ht,buttonLabel:tt,styleGridAriaLabel:st,styleDefinitions:Ye}))}if(Le.includes("numbered")||de.startIndex||de.reversed){const Ye=[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:listStyleDecimalIcon},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:listStyleDecimalWithLeadingZeroIcon},{label:t("Toggle the lowerroman list style"),tooltip:t("Lowerroman"),type:"lower-roman",icon:listStyleLowerRomanIcon},{label:t("Toggle the upperroman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:listStyleUpperRomanIcon},{label:t("Toggle the lowerlatin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:listStyleLowerLatinIcon},{label:t("Toggle the upperlatin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:listStyleUpperLatinIcon}],tt=t("Numbered List"),st=t("Numbered list styles toolbar"),ht="numberedList";u.ui.componentFactory.add(ht,getDropdownViewCreator({editor:u,normalizedConfig:pe,parentCommandName:ht,buttonLabel:tt,buttonIcon:icons.numberedList,styleGridAriaLabel:st,styleDefinitions:Ye})),Le.includes("numbered")&&u.ui.componentFactory.add(`menuBar:${ht}`,getMenuBarStylesMenuCreator({editor:u,normalizedConfig:pe,parentCommandName:ht,buttonLabel:tt,styleGridAriaLabel:st,styleDefinitions:Ye}))}}}function getDropdownViewCreator({editor:me,normalizedConfig:u,parentCommandName:t,buttonLabel:de,buttonIcon:pe,styleGridAriaLabel:Le,styleDefinitions:Ye}){const tt=me.commands.get(t);return st=>{const ht=createDropdown(st,SplitButtonView),mt=ht.buttonView;return ht.bind("isEnabled").to(tt),ht.class="ck-list-styles-dropdown",mt.on("execute",()=>{me.execute(t),me.editing.view.focus()}),mt.set({label:de,icon:pe,tooltip:!0,isToggleable:!0}),mt.bind("isOn").to(tt,"value",gt=>!!gt),ht.once("change:isOpen",()=>{const gt=createListPropertiesView({editor:me,normalizedConfig:u,dropdownView:ht,parentCommandName:t,styleGridAriaLabel:Le,styleDefinitions:Ye});ht.panelView.children.add(gt)}),ht.on("execute",()=>{me.editing.view.focus()}),ht}}function getStyleButtonCreator({editor:me,listStyleCommand:u,parentCommandName:t}){const de=me.locale,pe=me.commands.get(t);return({label:Le,type:Ye,icon:tt,tooltip:st})=>{const ht=new ButtonView(de);return ht.set({label:Le,icon:tt,tooltip:st}),ht.bind("isOn").to(u,"value",mt=>mt===Ye),ht.on("execute",()=>{pe.value?u.value===Ye?me.execute(t):u.value!==Ye&&me.execute("listStyle",{type:Ye}):me.model.change(()=>{me.execute("listStyle",{type:Ye})})}),ht}}function createListPropertiesView({editor:me,normalizedConfig:u,dropdownView:t,parentCommandName:de,styleDefinitions:pe,styleGridAriaLabel:Le}){const Ye=me.locale,tt={...u,...de!="numberedList"?{startIndex:!1,reversed:!1}:null},st=de.replace("List","");let ht=null;if(u.styles.listTypes.includes(st)){const gt=me.commands.get("listStyle"),bt=getStyleButtonCreator({editor:me,parentCommandName:de,listStyleCommand:gt}),_t=u.styles.listStyleTypes;let vt=pe;if(_t){const St=_t[st];St&&(vt=pe.filter(Rt=>St.includes(Rt.type)))}const Tt=getStyleTypeSupportChecker(gt);ht=vt.filter(Tt).map(bt)}const mt=new ListPropertiesView(Ye,{styleGridAriaLabel:Le,enabledProperties:tt,styleButtonViews:ht});if(u.styles.listTypes.includes(st)&&focusChildOnDropdownOpen(t,()=>mt.stylesView.children.find(gt=>gt.isOn)),tt.startIndex){const gt=me.commands.get("listStart");mt.startIndexFieldView.bind("isEnabled").to(gt),mt.startIndexFieldView.fieldView.bind("value").to(gt),mt.on("listStart",(bt,_t)=>me.execute("listStart",_t))}if(tt.reversed){const gt=me.commands.get("listReversed");mt.reversedSwitchButtonView.bind("isEnabled").to(gt),mt.reversedSwitchButtonView.bind("isOn").to(gt,"value",bt=>!!bt),mt.on("listReversed",()=>{const bt=gt.value;me.execute("listReversed",{reversed:!bt})})}return mt.delegate("execute").to(t),mt}function getMenuBarStylesMenuCreator({editor:me,normalizedConfig:u,parentCommandName:t,buttonLabel:de,styleGridAriaLabel:pe,styleDefinitions:Le}){return Ye=>{const tt=new MenuBarMenuView(Ye),st=me.commands.get(t),ht=me.commands.get("listStyle"),mt=getStyleTypeSupportChecker(ht),gt=getStyleButtonCreator({editor:me,parentCommandName:t,listStyleCommand:ht}),bt=u.styles.listStyleTypes;let _t=Le;if(bt){const St=st.type,Rt=bt[St];Rt&&(_t=Le.filter(Pt=>Rt.includes(Pt.type)))}const vt=_t.filter(mt).map(gt),Tt=new ListPropertiesView(Ye,{styleGridAriaLabel:pe,enabledProperties:{...u,startIndex:!1,reversed:!1},styleButtonViews:vt});return Tt.delegate("execute").to(tt),tt.buttonView.set({label:de,icon:icons[t]}),tt.panelView.children.add(Tt),tt.bind("isEnabled").to(st,"isEnabled"),tt.on("execute",()=>{me.editing.view.focus()}),tt}}function getStyleTypeSupportChecker(me){return typeof me.isStyleTypeSupported=="function"?u=>me.isStyleTypeSupported(u.type):()=>!0}class ListProperties extends Plugin{static get requires(){return[ListPropertiesEditing,ListPropertiesUI]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class CheckTodoListCommand extends Command{constructor(u){super(u),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const u=this._getSelectedItems();this.value=this._getValue(u),this.isEnabled=!!u.length}execute(u={}){this.editor.model.change(t=>{const de=this._getSelectedItems(),pe=u.forceValue===void 0?!this._getValue(de):u.forceValue;for(const Le of de)pe?t.setAttribute("todoListChecked",!0,Le):t.removeAttribute("todoListChecked",Le)})}_getValue(u){return u.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const u=this.editor.model,t=u.schema,de=u.document.selection.getFirstRange(),pe=de.start.parent,Le=[];t.checkAttribute(pe,"todoListChecked")&&Le.push(...getAllListItemBlocks(pe));for(const Ye of de.getItems({shallow:!0}))t.checkAttribute(Ye,"todoListChecked")&&!Le.includes(Ye)&&Le.push(...getAllListItemBlocks(Ye));return Le}}class TodoCheckboxChangeObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType",["change"])}onDomEvent(t){if(t.target){const de=this.view.domConverter.mapDomToView(t.target);de&&de.is("element","input")&&de.getAttribute("type")=="checkbox"&&de.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",t)}}}const ITEM_TOGGLE_KEYSTROKE$1=parseKeystroke("Ctrl+Enter");class TodoListEditing extends Plugin{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ListEditing]}init(){const u=this.editor,t=u.model,de=u.editing,pe=u.plugins.get(ListEditing),Ye=u.config.get("list.multiBlock")?"paragraph":"listItem";u.commands.add("todoList",new ListCommand(u,"todo")),u.commands.add("checkTodoList",new CheckTodoListCommand(u)),de.view.addObserver(TodoCheckboxChangeObserver),t.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),t.schema.addAttributeCheck(tt=>{const st=tt.last;if(!st.getAttribute("listItemId")||st.getAttribute("listType")!="todo")return!1},"todoListChecked"),u.conversion.for("upcast").add(tt=>{tt.on("element:input",todoItemInputConverter()),tt.on("element:li",todoListItemUpcastConverter(),{priority:"low"}),tt.on("element:label",elementUpcastConsumingConverter({name:"label",classes:"todo-list__label"})),tt.on("element:label",elementUpcastConsumingConverter({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),tt.on("element:span",elementUpcastConsumingConverter({name:"span",classes:"todo-list__label__description"})),tt.on("element:ul",attributeUpcastConsumingConverter({name:"ul",classes:"todo-list"}))}),u.conversion.for("downcast").elementToElement({model:Ye,view:(tt,{writer:st})=>{if(isDescriptionBlock(tt,pe.getListAttributeNames()))return st.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),pe.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(tt,st,ht){st=="todo"?tt.addClass("todo-list",ht):tt.removeClass("todo-list",ht)}}),pe.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(tt,st,{dataPipeline:ht}){if(st.getAttribute("listType")!="todo")return null;const mt=tt.createUIElement("input",{type:"checkbox",...st.getAttribute("todoListChecked")?{checked:"checked"}:null,...ht?{disabled:"disabled"}:{tabindex:"-1"}});if(ht)return mt;const gt=tt.createContainerElement("span",{contenteditable:"false"},mt);return gt.getFillerOffset=()=>null,gt},canWrapElement(tt){return isDescriptionBlock(tt,pe.getListAttributeNames())},createWrapperElement(tt,st,{dataPipeline:ht}){const mt=["todo-list__label"];return isDescriptionBlock(st,pe.getListAttributeNames())||mt.push("todo-list__label_without-description"),tt.createAttributeElement(ht?"label":"span",{class:mt.join(" ")})}}),pe.on("checkElement",(tt,{modelElement:st,viewElement:ht})=>{const mt=isDescriptionBlock(st,pe.getListAttributeNames());ht.hasClass("todo-list__label__description")!=mt&&(tt.return=!0,tt.stop())}),pe.on("checkElement",(tt,{modelElement:st,viewElement:ht})=>{const mt=st.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(st);let gt=!1;const bt=u.editing.view.createPositionBefore(ht).getWalker({direction:"backward"});for(const{item:_t}of bt){if(_t.is("element")&&u.editing.mapper.toModelElement(_t))break;_t.is("element","input")&&_t.getAttribute("type")=="checkbox"&&(gt=!0)}gt!=mt&&(tt.return=!0,tt.stop())}),pe.on("postFixer",(tt,{listNodes:st,writer:ht})=>{for(const{node:mt,previousNodeInList:gt}of st){if(!gt||gt.getAttribute("listItemId")!=mt.getAttribute("listItemId"))continue;const bt=gt.hasAttribute("todoListChecked"),_t=mt.hasAttribute("todoListChecked");_t&&!bt?(ht.removeAttribute("todoListChecked",mt),tt.return=!0):!_t&&bt&&(ht.setAttribute("todoListChecked",!0,mt),tt.return=!0)}}),t.document.registerPostFixer(tt=>{const st=t.document.differ.getChanges();let ht=!1;for(const mt of st)if(mt.type=="attribute"&&mt.attributeKey=="listType"){const gt=mt.range.start.nodeAfter;mt.attributeOldValue=="todo"&&gt.hasAttribute("todoListChecked")&&(tt.removeAttribute("todoListChecked",gt),ht=!0)}else if(mt.type=="insert"&&mt.name!="$text")for(const{item:gt}of tt.createRangeOn(mt.position.nodeAfter))gt.is("element")&&gt.getAttribute("listType")!="todo"&&gt.hasAttribute("todoListChecked")&&(tt.removeAttribute("todoListChecked",gt),ht=!0);return ht}),this.listenTo(de.view.document,"keydown",(tt,st)=>{getCode(st)===ITEM_TOGGLE_KEYSTROKE$1&&(u.execute("checkTodoList"),tt.stop())},{priority:"high"}),this.listenTo(de.view.document,"todoCheckboxChange",(tt,st)=>{const ht=st.target;if(!ht||!ht.is("element","input"))return;const mt=de.view.createPositionAfter(ht),bt=de.mapper.toModelPosition(mt).parent;bt&&isListItemBlock(bt)&&bt.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(bt)}),this.listenTo(de.view.document,"arrowKey",jumpOverCheckmarkOnSideArrowKeyPress$1(t,u.locale),{context:"$text"}),this.listenTo(de.mapper,"viewToModelPosition",(tt,st)=>{const ht=st.viewPosition.parent,mt=ht.is("attributeElement","li")&&st.viewPosition.offset==0,gt=isLabelElement(ht)&&st.viewPosition.offset<=1,bt=ht.is("element","span")&&ht.getAttribute("contenteditable")=="false"&&isLabelElement(ht.parent);if(!mt&&!gt&&!bt)return;const _t=st.modelPosition.nodeAfter;_t&&_t.getAttribute("listType")=="todo"&&(st.modelPosition=t.createPositionAt(_t,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(u){const t=this.editor,de=t.model,pe=Array.from(de.document.selection.getRanges());de.change(Le=>{Le.setSelection(u,"end"),t.execute("checkTodoList"),Le.setSelection(pe)})}_initAriaAnnouncements(){const{model:u,ui:t,t:de}=this.editor;let pe=null;t&&u.document.selection.on("change:range",()=>{const Le=u.document.selection.focus.parent,Ye=isTodoListItemElement(pe),tt=isTodoListItemElement(Le);Ye&&!tt?t.ariaLiveAnnouncer.announce(de("Leaving a to-do list")):!Ye&&tt&&t.ariaLiveAnnouncer.announce(de("Entering a to-do list")),pe=Le})}}function todoListItemUpcastConverter(){return(me,u,t)=>{const{writer:de,schema:pe}=t;if(!u.modelRange)return;const Le=Array.from(u.modelRange.getItems({shallow:!0})).filter(Ye=>Ye.getAttribute("listType")==="todo"&&pe.checkAttribute(Ye,"listItemId")).reduce((Ye,tt)=>{const st=tt.getAttribute("listItemId");return Ye.has(st)||Ye.set(st,getAllListItemBlocks(tt)),Ye},new Map);for(const[,Ye]of Le.entries())if(Ye.some(tt=>tt.getAttribute("todoListChecked")))for(const tt of Ye)de.setAttribute("todoListChecked",!0,tt)}}function todoItemInputConverter(){return(me,u,t)=>{const de=u.modelCursor,pe=de.parent,Le=u.viewItem;if(!t.consumable.test(Le,{name:!0})||Le.getAttribute("type")!="checkbox"||!de.isAtStart||!pe.hasAttribute("listType"))return;t.consumable.consume(Le,{name:!0});const Ye=t.writer;Ye.setAttribute("listType","todo",pe),u.viewItem.hasAttribute("checked")&&Ye.setAttribute("todoListChecked",!0,pe),u.modelRange=Ye.createRange(de)}}function elementUpcastConsumingConverter(me){const u=new Matcher(me);return(t,de,pe)=>{const Le=u.match(de.viewItem);Le&&pe.consumable.consume(de.viewItem,Le.match)&&Object.assign(de,pe.convertChildren(de.viewItem,de.modelCursor))}}function attributeUpcastConsumingConverter(me){const u=new Matcher(me);return(t,de,pe)=>{const Le=u.match(de.viewItem);if(!Le)return;const Ye=Le.match;Ye.name=!1,pe.consumable.consume(de.viewItem,Ye)}}function isDescriptionBlock(me,u){return(me.is("element","paragraph")||me.is("element","listItem"))&&me.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(me)&&hasOnlyListAttributes(me,u)}function hasOnlyListAttributes(me,u){for(const t of me.getAttributeKeys())if(!t.startsWith("selection:")&&!u.includes(t))return!1;return!0}function jumpOverCheckmarkOnSideArrowKeyPress$1(me,u){return(t,de)=>{const pe=getLocalizedArrowKeyCodeDirection(de.keyCode,u.contentLanguageDirection),Le=me.schema,Ye=me.document.selection;if(!Ye.isCollapsed)return;const tt=Ye.getFirstPosition(),st=tt.parent;if(pe=="right"&&tt.isAtEnd){const ht=Le.getNearestSelectionRange(me.createPositionAfter(st),"forward");if(!ht)return;const mt=ht.start.parent;mt&&isListItemBlock(mt)&&mt.getAttribute("listType")=="todo"&&(me.change(gt=>gt.setSelection(ht)),de.preventDefault(),de.stopPropagation(),t.stop())}else if(pe=="left"&&tt.isAtStart&&isListItemBlock(st)&&st.getAttribute("listType")=="todo"){const ht=Le.getNearestSelectionRange(me.createPositionBefore(st),"backward");if(!ht)return;me.change(mt=>mt.setSelection(ht)),de.preventDefault(),de.stopPropagation(),t.stop()}}}function isLabelElement(me){return!!me&&me.is("attributeElement")&&me.hasClass("todo-list__label")}function isTodoListItemElement(me){return!me||!me.is("element","paragraph")&&!me.is("element","listItem")?!1:me.getAttribute("listType")=="todo"}class TodoListUI extends Plugin{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.t;createUIComponents(this.editor,"todoList",u("To-do List"),icons.todoList)}}class TodoList extends Plugin{static get requires(){return[TodoListEditing,TodoListUI]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelToViewUrlAttributeConverter(me,u){const t=(de,pe,Le)=>{if(!Le.consumable.consume(pe.item,de.name))return;const Ye=pe.attributeNewValue,tt=Le.writer,st=Le.mapper.toViewElement(pe.item),ht=[...st.getChildren()].find(gt=>gt.getCustomProperty("media-content"));tt.remove(ht);const mt=me.getMediaViewElement(tt,Ye,u);tt.insert(tt.createPositionAt(st,0),mt)};return de=>{de.on("attribute:url:media",t)}}function toMediaWidget(me,u,t){return u.setCustomProperty("media",!0,me),toWidget(me,u,{label:t})}function getSelectedMediaViewWidget(me){const u=me.getSelectedElement();return u&&isMediaWidget(u)?u:null}function isMediaWidget(me){return!!me.getCustomProperty("media")&&isWidget(me)}function createMediaFigureElement(me,u,t,de){return me.createContainerElement("figure",{class:"media"},[u.getMediaViewElement(me,t,de),me.createSlot()])}function getSelectedMediaModelWidget(me){const u=me.getSelectedElement();return u&&u.is("element","media")?u:null}function insertMedia(me,u,t,de){me.change(pe=>{const Le=pe.createElement("media",{url:u});me.insertObject(Le,t,null,{setSelection:"on",findOptimalPosition:de?"auto":void 0})})}class MediaEmbedCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,de=getSelectedMediaModelWidget(t);this.value=de?de.getAttribute("url"):void 0,this.isEnabled=isMediaSelected(t)||isAllowedInParent$1(t,u)}execute(u){const t=this.editor.model,de=t.document.selection,pe=getSelectedMediaModelWidget(de);pe?t.change(Le=>{Le.setAttribute("url",u,pe)}):insertMedia(t,u,de,!0)}}function isAllowedInParent$1(me,u){let de=findOptimalInsertionRange(me,u).start.parent;return de.isEmpty&&!u.schema.isLimit(de)&&(de=de.parent),u.schema.checkChild(de,"media")}function isMediaSelected(me){const u=me.getSelectedElement();return!!u&&u.name==="media"}var mediaPlaceholderIcon='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const mediaPlaceholderIconViewBox="0 0 64 42";class MediaRegistry{constructor(u,t){wt(this,"locale");wt(this,"providerDefinitions");const de=t.providers,pe=t.extraProviders||[],Le=new Set(t.removeProviders),Ye=de.concat(pe).filter(tt=>{const st=tt.name;return st?!Le.has(st):(logWarning("media-embed-no-provider-name",{provider:tt}),!1)});this.locale=u,this.providerDefinitions=Ye}hasMedia(u){return!!this._getMedia(u)}getMediaViewElement(u,t,de){return this._getMedia(t).getViewElement(u,de)}_getMedia(u){if(!u)return new Media(this.locale);u=u.trim();for(const t of this.providerDefinitions){const de=t.html,pe=toArray$2(t.url);for(const Le of pe){const Ye=this._getUrlMatches(u,Le);if(Ye)return new Media(this.locale,u,Ye,de)}}return null}_getUrlMatches(u,t){let de=u.match(t);if(de)return de;let pe=u.replace(/^https?:\/\//,"");return de=pe.match(t),de||(pe=pe.replace(/^www\./,""),de=pe.match(t),de)?de:null}}class Media{constructor(u,t,de,pe){wt(this,"url");wt(this,"_locale");wt(this,"_match");wt(this,"_previewRenderer");this.url=this._getValidUrl(t),this._locale=u,this._match=de,this._previewRenderer=pe}getViewElement(u,t){const de={};let pe;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(de["data-oembed-url"]=this.url),t.renderForEditingView&&(de.class="ck-media__wrapper");const Le=this._getPreviewHtml(t);pe=u.createRawElement("div",de,(Ye,tt)=>{tt.setContentOf(Ye,Le)})}else this.url&&(de.url=this.url),pe=u.createEmptyElement(t.elementName,de);return u.setCustomProperty("media-content",!0,pe),pe}_getPreviewHtml(u){return this._previewRenderer?this._previewRenderer(this._match):this.url&&u.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const u=new IconView,t=this._locale.t;return u.content=mediaPlaceholderIcon,u.viewBox=mediaPlaceholderIconViewBox,new Template({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[u]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(u){return u?u.match(/^https?/)?u:"https://"+u:null}}class MediaEmbedEditing extends Plugin{constructor(t){super(t);wt(this,"registry");t.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:de=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${de[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:de=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${de[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:de=>{const pe=de[1],Le=de[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${pe}${Le?`?start=${Le}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:de=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${de[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new MediaRegistry(t.locale,t.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model.schema,pe=t.t,Le=t.conversion,Ye=t.config.get("mediaEmbed.previewsInData"),tt=t.config.get("mediaEmbed.elementName"),st=this.registry;t.commands.add("mediaEmbed",new MediaEmbedCommand(t)),de.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),Le.for("dataDowncast").elementToStructure({model:"media",view:(ht,{writer:mt})=>{const gt=ht.getAttribute("url");return createMediaFigureElement(mt,st,gt,{elementName:tt,renderMediaPreview:!!gt&&Ye})}}),Le.for("dataDowncast").add(modelToViewUrlAttributeConverter(st,{elementName:tt,renderMediaPreview:Ye})),Le.for("editingDowncast").elementToStructure({model:"media",view:(ht,{writer:mt})=>{const gt=ht.getAttribute("url"),bt=createMediaFigureElement(mt,st,gt,{elementName:tt,renderForEditingView:!0});return toMediaWidget(bt,mt,pe("media widget"))}}),Le.for("editingDowncast").add(modelToViewUrlAttributeConverter(st,{elementName:tt,renderForEditingView:!0})),Le.for("upcast").elementToElement({view:ht=>["oembed",tt].includes(ht.name)&&ht.getAttribute("url")?{name:!0}:null,model:(ht,{writer:mt})=>{const gt=ht.getAttribute("url");return st.hasMedia(gt)?mt.createElement("media",{url:gt}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(ht,{writer:mt})=>{const gt=ht.getAttribute("data-oembed-url");return st.hasMedia(gt)?mt.createElement("media",{url:gt}):null}}).add(ht=>{const mt=(gt,bt,_t)=>{if(!_t.consumable.consume(bt.viewItem,{name:!0,classes:"media"}))return;const{modelRange:vt,modelCursor:Tt}=_t.convertChildren(bt.viewItem,bt.modelCursor);bt.modelRange=vt,bt.modelCursor=Tt,first(vt.getItems())||_t.consumable.revert(bt.viewItem,{name:!0,classes:"media"})};ht.on("element:figure",mt)})}}const URL_REGEXP=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class AutoMediaEmbed extends Plugin{constructor(t){super(t);wt(this,"_timeoutId");wt(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,Delete,Undo]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.model.document,pe=t.plugins.get("ClipboardPipeline");this.listenTo(pe,"inputTransformation",()=>{const Ye=de.selection.getFirstRange(),tt=LivePosition.fromPosition(Ye.start);tt.stickiness="toPrevious";const st=LivePosition.fromPosition(Ye.end);st.stickiness="toNext",de.once("change:data",()=>{this._embedMediaBetweenPositions(tt,st),tt.detach(),st.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(t,de){const pe=this.editor,Le=pe.plugins.get(MediaEmbedEditing).registry,Ye=new LiveRange(t,de),tt=Ye.getWalker({ignoreElementEnd:!0});let st="";for(const mt of tt)mt.item.is("$textProxy")&&(st+=mt.item.data);if(st=st.trim(),!st.match(URL_REGEXP)){Ye.detach();return}if(!Le.hasMedia(st)){Ye.detach();return}if(!pe.commands.get("mediaEmbed").isEnabled){Ye.detach();return}this._positionToInsert=LivePosition.fromPosition(t),this._timeoutId=global$1.window.setTimeout(()=>{pe.model.change(mt=>{this._timeoutId=null,mt.remove(Ye),Ye.detach();let gt=null;this._positionToInsert.root.rootName!=="$graveyard"&&(gt=this._positionToInsert),insertMedia(pe.model,st,gt,!1),this._positionToInsert.detach(),this._positionToInsert=null}),pe.plugins.get(Delete).requestUndoOnBackspace()},100)}}class MediaFormView extends View{constructor(t,de){super(de);wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"urlInputView");wt(this,"_validators");wt(this,"_urlInputViewInfoDefault");wt(this,"_urlInputViewInfoTip");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),submitHandler({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(t){this.urlInputView.fieldView.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const de=t(this);if(de)return this.urlInputView.errorText=de,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,de=new LabeledFieldView(this.locale,createLabeledInputText),pe=de.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),de.label=t("Media URL"),de.infoText=this._urlInputViewInfoDefault,pe.inputMode="url",pe.on("input",()=>{de.infoText=pe.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=pe.element.value.trim()}),de}}var mediaIcon='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class MediaEmbedUI extends Plugin{constructor(){super(...arguments);wt(this,"_formView")}static get requires(){return[MediaEmbedEditing,Dialog]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("mediaEmbed",()=>{const de=this.editor.locale.t,pe=this._createDialogButton(ButtonView);return pe.tooltip=!0,pe.label=de("Insert media"),pe}),t.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const de=this.editor.locale.t,pe=this._createDialogButton(MenuBarMenuListItemButtonView);return pe.label=de("Media"),pe})}_createDialogButton(t){const de=this.editor,pe=new t(de.locale),Le=de.commands.get("mediaEmbed"),Ye=this.editor.plugins.get("Dialog");return pe.icon=mediaIcon,pe.bind("isEnabled").to(Le,"isEnabled"),pe.on("execute",()=>{Ye.id==="mediaEmbed"?Ye.hide():this._showDialog()}),pe}_showDialog(){const t=this.editor,de=t.plugins.get("Dialog"),pe=t.commands.get("mediaEmbed"),Le=t.locale.t;if(!this._formView){const Ye=t.plugins.get(MediaEmbedEditing).registry;this._formView=new(CssTransitionDisablerMixin(MediaFormView))(getFormValidators(t.t,Ye),t.locale),this._formView.on("submit",()=>this._handleSubmitForm())}de.show({id:"mediaEmbed",title:Le("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=pe.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:Le("Cancel"),withText:!0,onExecute:()=>de.hide()},{label:Le("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const t=this.editor,de=t.plugins.get("Dialog");this._formView.isValid()&&(t.execute("mediaEmbed",this._formView.url),de.hide(),t.editing.view.focus())}}function getFormValidators(me,u){return[t=>{if(!t.url.length)return me("The URL must not be empty.")},t=>{if(!u.hasMedia(t.url))return me("This media URL is not supported.")}]}class MediaEmbed extends Plugin{static get requires(){return[MediaEmbedEditing,MediaEmbedUI,AutoMediaEmbed,Widget]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}class MediaEmbedToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"MediaEmbedToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t;u.plugins.get(WidgetToolbarRepository).register("mediaEmbed",{ariaLabel:t("Media toolbar"),items:u.config.get("mediaEmbed.toolbar")||[],getRelatedElement:getSelectedMediaViewWidget})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BRACKET_PAIRS={"(":")","[":"]","{":"}"};class MentionCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}refresh(){const u=this.editor.model,t=u.document;this.isEnabled=u.schema.checkAttributeInSelection(t.selection,"mention")}execute(u){const t=this.editor.model,pe=t.document.selection,Le=typeof u.mention=="string"?{id:u.mention}:u.mention,Ye=Le.id,tt=u.range||pe.getFirstRange();if(!t.canEditAt(tt))return;const st=u.text||Ye,ht=_addMentionAttributes({_text:st,id:Ye},Le);if(!Ye.startsWith(u.marker))throw new CKEditorError("mentioncommand-incorrect-id",this);t.change(mt=>{const gt=toMap(pe.getAttributes()),bt=new Map(gt.entries());bt.set("mention",ht);const _t=t.insertContent(mt.createText(st,bt),tt),vt=_t.start.nodeBefore,Tt=_t.end.nodeAfter,St=Tt&&Tt.is("$text")&&Tt.data.startsWith(" ");let Rt=!1;if(vt&&Tt&&vt.is("$text")&&Tt.is("$text")){const Pt=vt.data.slice(-1),Ot=Pt in BRACKET_PAIRS,Mt=Ot&&Tt.data.startsWith(BRACKET_PAIRS[Pt]);Rt=Ot&&Mt}!Rt&&!St&&t.insertContent(mt.createText(" ",gt),tt.start.getShiftedBy(st.length))})}}class MentionEditing extends Plugin{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model,de=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),u.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:pe=>_toMentionAttribute(pe)}}),u.conversion.for("downcast").attributeToElement({model:"mention",view:createViewMentionElement}),u.conversion.for("downcast").add(preventPartialMentionDowncast),de.registerPostFixer(pe=>removePartialMentionPostFixer(pe,de,t.schema)),de.registerPostFixer(pe=>extendAttributeOnMentionPostFixer(pe,de)),de.registerPostFixer(pe=>selectionMentionAttributePostFixer(pe,de)),u.commands.add("mention",new MentionCommand(u))}}function _addMentionAttributes(me,u){return Object.assign({uid:uid()},me,u||{})}function _toMentionAttribute(me,u){const t=me.getAttribute("data-mention"),de=me.getChild(0);if(!de)return;const pe={id:t,_text:de.data};return _addMentionAttributes(pe,u)}function preventPartialMentionDowncast(me){me.on("attribute:mention",(u,t,de)=>{const pe=t.attributeNewValue;if(!t.item.is("$textProxy")||!pe)return;const Le=t.range.start;(Le.textNode||Le.nodeAfter).data!=pe._text&&de.consumable.consume(t.item,u.name)},{priority:"highest"})}function createViewMentionElement(me,{writer:u}){if(!me)return;const t={class:"mention","data-mention":me.id},de={id:me.uid,priority:20};return u.createAttributeElement("span",t,de)}function selectionMentionAttributePostFixer(me,u){const t=u.selection,de=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&shouldNotTypeWithMentionAt(de)?(me.removeSelectionAttribute("mention"),!0):!1}function shouldNotTypeWithMentionAt(me){const u=me.isAtStart;return me.nodeBefore&&me.nodeBefore.is("$text")||u}function removePartialMentionPostFixer(me,u,t){const de=u.differ.getChanges();let pe=!1;for(const Le of de){if(Le.type=="attribute")continue;const Ye=Le.position;if(Le.name=="$text"){const tt=Ye.textNode&&Ye.textNode.nextSibling;pe=checkAndFix(Ye.textNode,me)||pe,pe=checkAndFix(tt,me)||pe,pe=checkAndFix(Ye.nodeBefore,me)||pe,pe=checkAndFix(Ye.nodeAfter,me)||pe}if(Le.name!="$text"&&Le.type=="insert"){const tt=Ye.nodeAfter;for(const st of me.createRangeIn(tt).getItems())pe=checkAndFix(st,me)||pe}if(Le.type=="insert"&&t.isInline(Le.name)){const tt=Ye.nodeAfter&&Ye.nodeAfter.nextSibling;pe=checkAndFix(Ye.nodeBefore,me)||pe,pe=checkAndFix(tt,me)||pe}}return pe}function extendAttributeOnMentionPostFixer(me,u){const t=u.differ.getChanges();let de=!1;for(const pe of t)if(pe.type==="attribute"&&pe.attributeKey!="mention"){const Le=pe.range.start.nodeBefore,Ye=pe.range.end.nodeAfter;for(const tt of[Le,Ye])isBrokenMentionNode(tt)&&tt.getAttribute(pe.attributeKey)!=pe.attributeNewValue&&(me.setAttribute(pe.attributeKey,pe.attributeNewValue,tt),de=!0)}return de}function isBrokenMentionNode(me){if(!me||!(me.is("$text")||me.is("$textProxy"))||!me.hasAttribute("mention"))return!1;const u=me.data,de=me.getAttribute("mention")._text;return u!=de}function checkAndFix(me,u){return isBrokenMentionNode(me)?(u.removeAttribute("mention",me),!0):!1}class MentionsView extends ListView{constructor(t){super(t);wt(this,"selected");wt(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const t=this.selected,de=this.items.getIndex(t);this.select(de+1)}selectPrevious(){const t=this.selected,de=this.items.getIndex(t);this.select(de-1)}select(t){let de=0;t>0&&t<this.items.length?de=t:t<0&&(de=this.items.length-1);const pe=this.items.get(de);this.selected!==pe&&(this.selected&&this.selected.removeHighlight(),pe.highlight(),this.selected=pe,this._isItemVisibleInScrolledArea(pe)||(this.element.scrollTop=pe.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(t){return new Rect(this.element).contains(new Rect(t.element))}}class DomWrapperView extends View{constructor(t,de){super(t);wt(this,"domElement");this.template=void 0,this.domElement=de,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(pe,Le,Ye)=>{Ye?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class MentionListItemView extends ListItemView{constructor(){super(...arguments);wt(this,"item");wt(this,"marker")}highlight(){const t=this.children.first;t.isOn=!0}removeHighlight(){const t=this.children.first;t.isOn=!1}}const VERTICAL_SPACING=3,defaultHandledKeyCodes=[keyCodes.arrowup,keyCodes.arrowdown,keyCodes.esc],defaultCommitKeyCodes=[keyCodes.enter,keyCodes.tab];class MentionUI extends Plugin{constructor(t){super(t);wt(this,"_mentionsView");wt(this,"_mentionsConfigurations");wt(this,"_balloon");wt(this,"_items",new Collection);wt(this,"_lastRequested");wt(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=debounce(this._requestFeed,100),t.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const t=this.editor,de=t.config.get("mention.commitKeys")||defaultCommitKeyCodes,pe=defaultHandledKeyCodes.concat(de);this._balloon=t.plugins.get(ContextualBalloon),t.editing.view.document.on("keydown",(tt,st)=>{Ye(st.keyCode)&&this._isUIVisible&&(st.preventDefault(),tt.stop(),st.keyCode==keyCodes.arrowdown&&this._mentionsView.selectNext(),st.keyCode==keyCodes.arrowup&&this._mentionsView.selectPrevious(),de.includes(st.keyCode)&&this._mentionsView.executeSelected(),st.keyCode==keyCodes.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),clickOutsideHandler({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const Le=t.config.get("mention.feeds");for(const tt of Le){const{feed:st,marker:ht,dropdownLimit:mt}=tt;if(!isValidMentionMarker(ht))throw new CKEditorError("mentionconfig-incorrect-marker",null,{marker:ht});const gt=typeof st=="function"?st.bind(this.editor):createFeedCallback(st),bt=tt.itemRenderer,_t={marker:ht,feedCallback:gt,itemRenderer:bt,dropdownLimit:mt};this._mentionsConfigurations.set(ht,_t)}this._setupTextWatcher(Le),this.listenTo(t,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(tt,st)=>this._handleFeedResponse(st)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function Ye(tt){return pe.includes(tt)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const t=this.editor.locale,de=new MentionsView(t);return de.items.bindTo(this._items).using(pe=>{const{item:Le,marker:Ye}=pe,{dropdownLimit:tt}=this._mentionsConfigurations.get(Ye),st=tt||this.editor.config.get("mention.dropdownLimit")||10;if(de.items.length>=st)return null;const ht=new MentionListItemView(t),mt=this._renderItem(Le,Ye);return mt.delegate("execute").to(ht),ht.children.add(mt),ht.item=Le,ht.marker=Ye,ht.on("execute",()=>{de.fire("execute",{item:Le,marker:Ye})}),ht}),de.on("execute",(pe,Le)=>{const Ye=this.editor,tt=Ye.model,st=Le.item,ht=Le.marker,mt=Ye.model.markers.get("mention"),gt=tt.createPositionAt(tt.document.selection.focus),bt=tt.createPositionAt(mt.getStart()),_t=tt.createRange(bt,gt);this._hideUIAndRemoveMarker(),Ye.execute("mention",{mention:st,text:st.text,marker:ht,range:_t}),Ye.editing.view.focus()}),de}_getItemRenderer(t){const{itemRenderer:de}=this._mentionsConfigurations.get(t);return de}_requestFeed(t,de){this._lastRequested=de;const{feedCallback:pe}=this._mentionsConfigurations.get(t),Le=pe(de);if(!(Le instanceof Promise)){this.fire("requestFeed:response",{feed:Le,marker:t,feedText:de});return}Le.then(tt=>{this._lastRequested==de?this.fire("requestFeed:response",{feed:tt,marker:t,feedText:de}):this.fire("requestFeed:discarded",{feed:tt,marker:t,feedText:de})}).catch(tt=>{this.fire("requestFeed:error",{error:tt}),logWarning("mention-feed-callback-error",{marker:t})})}_setupTextWatcher(t){const de=this.editor,pe=t.map(tt=>({...tt,pattern:createRegExp(tt.marker,tt.minimumCharacters||0)})),Le=new TextWatcher(de.model,createTestCallback(pe));Le.on("matched",(tt,st)=>{const ht=getLastValidMarkerInText(pe,st.text),gt=de.model.document.selection.focus,bt=de.model.createPositionAt(gt.parent,ht.position);if(isPositionInExistingMention(gt)||isMarkerInExistingMention(bt)){this._hideUIAndRemoveMarker();return}const _t=requestFeedText(ht,st.text),vt=ht.marker.length+_t.length,Tt=gt.getShiftedBy(-vt),St=gt.getShiftedBy(-_t.length),Rt=de.model.createRange(Tt,St);if(checkIfStillInCompletionMode(de)){const Pt=de.model.markers.get("mention");de.model.change(Ot=>{Ot.updateMarker(Pt,{range:Rt})})}else de.model.change(Pt=>{Pt.addMarker("mention",{range:Rt,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(ht.marker,_t)}),Le.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const Ye=de.commands.get("mention");return Le.bind("isEnabled").to(Ye),Le}_handleFeedResponse(t){const{feed:de,marker:pe}=t;if(!checkIfStillInCompletionMode(this.editor))return;this._items.clear();for(const Ye of de){const tt=typeof Ye!="object"?{id:Ye,text:Ye}:Ye;this._items.add({item:tt,marker:pe})}const Le=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(Le):this._hideUIAndRemoveMarker()}_showOrUpdateUI(t){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(t,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(t,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),checkIfStillInCompletionMode(this.editor)&&this.editor.model.change(t=>t.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(t,de){const pe=this.editor;let Le,Ye=t.id;const tt=this._getItemRenderer(de);if(tt){const st=tt(t);typeof st!="string"?Le=new DomWrapperView(pe.locale,st):Ye=st}if(!Le){const st=new ButtonView(pe.locale);st.label=Ye,st.withText=!0,Le=st}return Le}_getBalloonPanelPositionData(t,de){const pe=this.editor,Le=pe.editing,Ye=Le.view.domConverter,tt=Le.mapper,st=pe.locale.uiLanguageDirection;return{target:()=>{let ht=t.getRange();ht.start.root.rootName=="$graveyard"&&(ht=pe.model.document.selection.getFirstRange());const mt=tt.toViewRange(ht);return Rect.getDomRangeRects(Ye.viewRangeToDom(mt)).pop()},limiter:()=>{const ht=this.editor.editing.view,gt=ht.document.selection.editableElement;return gt?ht.domConverter.mapViewToDom(gt.root):null},positions:getBalloonPanelPositions(de,st)}}}function getBalloonPanelPositions(me,u){const t={caret_se:de=>({top:de.bottom+VERTICAL_SPACING,left:de.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(de,pe)=>({top:de.top-pe.height-VERTICAL_SPACING,left:de.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(de,pe)=>({top:de.bottom+VERTICAL_SPACING,left:de.right-pe.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(de,pe)=>({top:de.top-pe.height-VERTICAL_SPACING,left:de.right-pe.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,me)?[t[me]]:u!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function getLastValidMarkerInText(me,u){let t;for(const de of me){const pe=u.lastIndexOf(de.marker);pe>0&&!u.substring(pe-1).match(de.pattern)||(!t||pe>=t.position)&&(t={marker:de.marker,position:pe,minimumCharacters:de.minimumCharacters,pattern:de.pattern})}return t}function createRegExp(me,u){const t=u==0?"*":`{${u},}`,de=env.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,pe=".";me=me.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const Le=`(?:^|[ ${de}])(${me})(${pe}${t})$`;return new RegExp(Le,"u")}function createTestCallback(me){return t=>{const de=getLastValidMarkerInText(me,t);if(!de)return!1;let pe=0;de.position!==0&&(pe=de.position-1);const Le=t.substring(pe);return de.pattern.test(Le)}}function requestFeedText(me,u){let t=0;me.position!==0&&(t=me.position-1);const de=createRegExp(me.marker,0);return u.substring(t).match(de)[2]}function createFeedCallback(me){return u=>me.filter(de=>(typeof de=="string"?de:String(de.id)).toLowerCase().includes(u.toLowerCase()))}function isPositionInExistingMention(me){const u=me.textNode&&me.textNode.hasAttribute("mention"),t=me.nodeBefore;return u||t&&t.is("$text")&&t.hasAttribute("mention")}function isMarkerInExistingMention(me){const u=me.nodeAfter;return u&&u.is("$text")&&u.hasAttribute("mention")}function isValidMentionMarker(me){return!!me}function checkIfStillInCompletionMode(me){return me.model.markers.has("mention")}class Mention extends Plugin{toMentionAttribute(u,t){return _toMentionAttribute(u,t)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[MentionEditing,MentionUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class PageBreakCommand extends Command{refresh(){const u=this.editor.model,t=u.schema,de=u.document.selection;this.isEnabled=isPageBreakAllowedInParent(de,t,u)}execute(){const u=this.editor.model;u.change(t=>{const de=t.createElement("pageBreak");u.insertObject(de,null,null,{setSelection:"after"})})}}function isPageBreakAllowedInParent(me,u,t){const de=getInsertPageBreakParent(me,t);return u.checkChild(de,"pageBreak")}function getInsertPageBreakParent(me,u){const de=findOptimalInsertionRange(me,u).start.parent;return de.isEmpty&&!de.is("element","$root")?de.parent:de}class PageBreakEditing extends Plugin{static get pluginName(){return"PageBreakEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model.schema,de=u.t,pe=u.conversion;t.register("pageBreak",{inheritAllFrom:"$blockObject"}),pe.for("dataDowncast").elementToStructure({model:"pageBreak",view:(Le,{writer:Ye})=>Ye.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},Ye.createContainerElement("span",{style:"display: none"}))}),pe.for("editingDowncast").elementToStructure({model:"pageBreak",view:(Le,{writer:Ye})=>{const tt=de("Page break"),st=Ye.createContainerElement("div"),ht=Ye.createRawElement("span",{class:"page-break__label"},function(mt){mt.innerText=de("Page break")});return Ye.addClass("page-break",st),Ye.insert(Ye.createPositionAt(st,0),ht),toPageBreakWidget(st,Ye,tt)}}),pe.for("upcast").elementToElement({view:Le=>{const Ye=Le.getStyle("page-break-before")=="always",tt=Le.getStyle("page-break-after")=="always";if(!Ye&&!tt)return null;if(Le.childCount==1){const st=Le.getChild(0);if(!st.is("element","span")||st.getStyle("display")!="none")return null}else if(Le.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),u.commands.add("pageBreak",new PageBreakCommand(u))}}function toPageBreakWidget(me,u,t){return u.setCustomProperty("pageBreak",!0,me),toWidget(me,u,{label:t})}var pageBreakIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';class PageBreakUI extends Plugin{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("pageBreak",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get("pageBreak"),Le=new u(t.locale),Ye=de.t;return Le.set({label:Ye("Page break"),icon:pageBreakIcon}),Le.bind("isEnabled").to(pe,"isEnabled"),this.listenTo(Le,"execute",()=>{t.execute("pageBreak"),t.editing.view.focus()}),Le}}class PageBreak extends Plugin{static get requires(){return[PageBreakEditing,PageBreakUI,Widget]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function transformBookmarks(me,u){const t=[];for(const de of u.createRangeIn(me)){const pe=de.item;pe.is("element","a")&&!pe.hasAttribute("href")&&(pe.hasAttribute("id")||pe.hasAttribute("name"))&&t.push(pe)}for(const de of t){const pe=de.parent.getChildIndex(de)+1,Le=de.getChildren();u.insertChild(pe,Le,de.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertCssLengthToPx(me){const u=parseFloat(me);return me.endsWith("pt")?toPx(u*96/72):me.endsWith("pc")?toPx(u*12*96/72):me.endsWith("in")?toPx(u*96):me.endsWith("cm")?toPx(u*96/2.54):me.endsWith("mm")?toPx(u/10*96/2.54):me}function isPx(me){return me!==void 0&&me.endsWith("px")}function toPx(me){return me.toFixed(2).replace(/\.?0+$/,"")+"px"}function transformListItemLikeElementsIntoLists(me,u,t){if(!me.childCount)return;const de=new UpcastWriter(me.document),pe=findAllItemLikeElements(me,de);if(!pe.length)return;const Le={},Ye=[];for(const tt of pe)if(tt.indent!==void 0){isListContinuation(tt)||(Ye.length=0);const st=`${tt.id}:${tt.indent}`,ht=Math.min(tt.indent-1,Ye.length);if(ht<Ye.length&&Ye[ht].id!==tt.id&&(Ye.length=ht),ht<Ye.length-1)Ye.length=ht+1;else{const gt=detectListStyle(tt,u);if(ht>Ye.length-1||Ye[ht].listElement.name!=gt.type){ht==0&&gt.type=="ol"&&tt.id!==void 0&&Le[st]&&(gt.startIndex=Le[st]);const bt=createNewEmptyList(gt,de,t);if(isPx(tt.marginLeft)&&(ht==0||isPx(Ye[ht-1].marginLeft))){let _t=tt.marginLeft;ht>0&&(_t=toPx(parseFloat(_t)-parseFloat(Ye[ht-1].marginLeft))),de.setStyle("padding-left",_t,bt)}if(Ye.length==0){const _t=tt.element.parent,vt=_t.getChildIndex(tt.element)+1;de.insertChild(vt,bt,_t)}else{const _t=Ye[ht-1].listItemElements;de.appendChild(bt,_t[_t.length-1])}Ye[ht]={...tt,listElement:bt,listItemElements:[]},ht==0&&tt.id!==void 0&&(Le[st]=gt.startIndex||1)}}const mt=tt.element.name=="li"?tt.element:de.createElement("li");de.appendChild(mt,Ye[ht].listElement),Ye[ht].listItemElements.push(mt),ht==0&&tt.id!==void 0&&Le[st]++,tt.element!=mt&&de.appendChild(tt.element,mt),removeBulletElement(tt.element,de),de.removeStyle("text-indent",tt.element),de.removeStyle("margin-left",tt.element)}else{const st=Ye.find(ht=>ht.marginLeft==tt.marginLeft);if(st){const ht=st.listItemElements;de.appendChild(tt.element,ht[ht.length-1]),de.removeStyle("margin-left",tt.element)}else Ye.length=0}}function unwrapParagraphInListItem(me,u){for(const t of u.createRangeIn(me)){const de=t.item;if(de.is("element","li")){const pe=de.getChild(0);pe&&pe.is("element","p")&&u.unwrapElement(pe)}}}function findAllItemLikeElements(me,u){const t=u.createRangeIn(me),de=[],pe=new Set;for(const Le of t.getItems()){if(!Le.is("element")||!Le.name.match(/^(p|h\d+|li|div)$/))continue;let Ye=getMarginLeftNormalized(Le);if(Ye!==void 0&&parseFloat(Ye)==0&&!Array.from(Le.getClassNames()).find(tt=>tt.startsWith("MsoList"))&&(Ye=void 0),Le.hasStyle("mso-list")||Ye!==void 0&&pe.has(Ye)){const tt=getListItemData(Le);de.push({element:Le,id:tt.id,order:tt.order,indent:tt.indent,marginLeft:Ye}),Ye!==void 0&&pe.add(Ye)}else pe.clear()}return de}function isListContinuation(me){const u=me.element.previousSibling;return isList(u||me.element.parent)}function isList(me){return me.is("element","ol")||me.is("element","ul")}function detectListStyle(me,u){const t=new RegExp(`@list l${me.id}:level${me.indent}\\s*({[^}]*)`,"gi"),de=/mso-level-number-format:([^;]{0,100});/gi,pe=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,Le=new RegExp(`@list\\s+l${me.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),Ye=new RegExp(`@list l${me.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),tt=Le.exec(u),st=Ye.exec(u),ht=tt&&!st,mt=t.exec(u);let gt="decimal",bt="ol",_t=null;if(mt&&mt[1]){const vt=de.exec(mt[1]);if(vt&&vt[1]&&(gt=vt[1].trim(),bt=gt!=="bullet"&&gt!=="image"?"ol":"ul"),gt==="bullet"){const Tt=findBulletedListStyle(me.element);Tt&&(gt=Tt)}else{const Tt=pe.exec(mt[1]);Tt&&Tt[1]&&(_t=parseInt(Tt[1]))}ht&&(bt="ol")}return{type:bt,startIndex:_t,style:mapListStyleDefinition(gt),isLegalStyleList:ht}}function findBulletedListStyle(me){if(me.name=="li"&&me.parent.name=="ul"&&me.parent.hasAttribute("type"))return me.parent.getAttribute("type");const u=findListMarkerNode(me);if(!u)return null;const t=u._data;return t==="o"?"circle":t===""?"disc":t===""?"square":null}function findListMarkerNode(me){if(me.getChild(0).is("$text"))return null;for(const u of me.getChildren()){if(!u.is("element","span"))continue;const t=u.getChild(0);if(t)return t.is("$text")?t:t.getChild(0)}/* istanbul ignore next -- @preserve */return null}function mapListStyleDefinition(me){if(me.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(me){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return me;default:return null}}function createNewEmptyList(me,u,t){const de=u.createElement(me.type);return me.style&&u.setStyle("list-style-type",me.style,de),me.startIndex&&me.startIndex>1&&u.setAttribute("start",me.startIndex,de),me.isLegalStyleList&&t&&u.addClass("legal-list",de),de}function getListItemData(me){const u=me.getStyle("mso-list");if(u===void 0)return{};const t=u.match(/(^|\s{1,100})l(\d+)/i),de=u.match(/\s{0,100}lfo(\d+)/i),pe=u.match(/\s{0,100}level(\d+)/i);return t&&de&&pe?{id:t[2],order:de[1],indent:parseInt(pe[1])}:{indent:1}}function removeBulletElement(me,u){const t=new Matcher({name:"span",styles:{"mso-list":"Ignore"}}),de=u.createRangeIn(me);for(const pe of de)pe.type==="elementStart"&&t.match(pe.item)&&u.remove(pe.item)}function getMarginLeftNormalized(me){const u=me.getStyle("margin-left");return u===void 0||u.endsWith("px")?u:convertCssLengthToPx(u)}function replaceImagesSourceWithBase64(me,u){if(!me.childCount)return;const t=new UpcastWriter(me.document),de=findAllShapesIds(me,t);removeAllImgElementsRepresentingShapes(de,me,t),insertMissingImgs(de,me,t),removeAllShapeElements(me,t);const pe=findAllImageElementsWithLocalSource(me,t);pe.length&&replaceImagesFileSourceWithInlineRepresentation(pe,extractImageDataFromRtf(u),t)}function _convertHexToBase64(me){return btoa(me.match(/\w{2}/g).map(u=>String.fromCharCode(parseInt(u,16))).join(""))}function findAllShapesIds(me,u){const t=u.createRangeIn(me),de=new Matcher({name:/v:(.+)/}),pe=[];for(const Le of t){if(Le.type!="elementStart")continue;const Ye=Le.item,tt=Ye.previousSibling,st=tt&&tt.is("element")?tt.name:null,ht=["Chart"],mt=de.match(Ye),gt=Ye.getAttribute("o:gfxdata"),bt=st==="v:shapetype",_t=gt&&ht.some(vt=>Ye.getAttribute("id").includes(vt));mt&&gt&&!bt&&!_t&&pe.push(Le.item.getAttribute("id"))}return pe}function removeAllImgElementsRepresentingShapes(me,u,t){const de=t.createRangeIn(u),pe=new Matcher({name:"img"}),Le=[];for(const Ye of de)if(Ye.item.is("element")&&pe.match(Ye.item)){const tt=Ye.item,st=tt.getAttribute("v:shapes")?tt.getAttribute("v:shapes").split(" "):[];st.length&&st.every(ht=>me.indexOf(ht)>-1)?Le.push(tt):tt.getAttribute("src")||Le.push(tt)}for(const Ye of Le)t.remove(Ye)}function removeAllShapeElements(me,u){const t=u.createRangeIn(me),de=new Matcher({name:/v:(.+)/}),pe=[];for(const Le of t)Le.type=="elementStart"&&de.match(Le.item)&&pe.push(Le.item);for(const Le of pe)u.remove(Le)}function insertMissingImgs(me,u,t){const de=t.createRangeIn(u),pe=[];for(const tt of de)if(tt.type=="elementStart"&&tt.item.is("element","v:shape")){const st=tt.item.getAttribute("id");if(me.includes(st))continue;Le(tt.item.parent.getChildren(),st)||pe.push(tt.item)}for(const tt of pe){const st={src:Ye(tt)};tt.hasAttribute("alt")&&(st.alt=tt.getAttribute("alt"));const ht=t.createElement("img",st);t.insertChild(tt.index+1,ht,tt.parent)}function Le(tt,st){for(const ht of tt){/* istanbul ignore else -- @preserve */if(ht.is("element")&&(ht.name=="img"&&ht.getAttribute("v:shapes")==st||Le(ht.getChildren(),st)))return!0}return!1}function Ye(tt){for(const st of tt.getChildren()){/* istanbul ignore else -- @preserve */if(st.is("element")&&st.getAttribute("src"))return st.getAttribute("src")}}}function findAllImageElementsWithLocalSource(me,u){const t=u.createRangeIn(me),de=new Matcher({name:"img"}),pe=[];for(const Le of t)Le.item.is("element")&&de.match(Le.item)&&Le.item.getAttribute("src").startsWith("file://")&&pe.push(Le.item);return pe}function extractImageDataFromRtf(me){if(!me)return[];const u=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+u.source+"))([\\da-fA-F\\s]+)\\}","g"),de=me.match(t),pe=[];if(de)for(const Le of de){let Ye=!1;Le.includes("\\pngblip")?Ye="image/png":Le.includes("\\jpegblip")&&(Ye="image/jpeg"),Ye&&pe.push({hex:Le.replace(u,"").replace(/[^\da-fA-F]/g,""),type:Ye})}return pe}function replaceImagesFileSourceWithInlineRepresentation(me,u,t){if(me.length===u.length)for(let de=0;de<me.length;de++){const pe=`data:${u[de].type};base64,${_convertHexToBase64(u[de].hex)}`;t.setAttribute("src",pe,me[de])}}function removeMSAttributes(me){const u=[],t=new UpcastWriter(me.document);for(const{item:de}of t.createRangeIn(me))if(de.is("element")){for(const pe of de.getClassNames())/\bmso/gi.exec(pe)&&t.removeClass(pe,de);for(const pe of de.getStyleNames())/\bmso/gi.exec(pe)&&t.removeStyle(pe,de);(de.is("element","w:sdt")||de.is("element","w:sdtpr")&&de.isEmpty||de.is("element","o:p")&&de.isEmpty)&&u.push(de)}for(const de of u){const pe=de.parent,Le=pe.getChildIndex(de);t.insertChild(Le,de.getChildren(),pe),t.remove(de)}}const msWordMatch1=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,msWordMatch2=/xmlns:o="urn:schemas-microsoft-com/i;class MSWordNormalizer{constructor(u,t=!1){wt(this,"document");wt(this,"hasMultiLevelListPlugin");this.document=u,this.hasMultiLevelListPlugin=t}isActive(u){return msWordMatch1.test(u)||msWordMatch2.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:de,stylesString:pe}=u._parsedData;transformBookmarks(de,t),transformListItemLikeElementsIntoLists(de,pe,this.hasMultiLevelListPlugin),replaceImagesSourceWithBase64(de,u.dataTransfer.getData("text/rtf")),removeMSAttributes(de),u.content=de}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeBoldWrapper(me,u){for(const t of me.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const de=me.getChildIndex(t);u.remove(t),u.insertChild(de,t.getChildren(),me)}}function transformBlockBrsToParagraphs(me,u){const t=new Document$1(u.document.stylesProcessor),de=new DomConverter(t,{renderingMode:"data"}),pe=de.blockElements,Le=de.inlineObjectElements,Ye=[];for(const tt of u.createRangeIn(me)){const st=tt.item;if(st.is("element","br")){const ht=findSibling(st,"forward",u,{blockElements:pe,inlineObjectElements:Le}),mt=findSibling(st,"backward",u,{blockElements:pe,inlineObjectElements:Le}),gt=isBlockViewElement(ht,pe);(isBlockViewElement(mt,pe)||gt)&&Ye.push(st)}}for(const tt of Ye)tt.hasClass("Apple-interchange-newline")?u.remove(tt):u.replace(tt,u.createElement("p"))}function findSibling(me,u,t,{blockElements:de,inlineObjectElements:pe}){let Le=t.createPositionAt(me,u=="forward"?"after":"before");return Le=Le.getLastMatchingPosition(({item:Ye})=>Ye.is("element")&&!de.includes(Ye.name)&&!pe.includes(Ye.name),{direction:u}),u=="forward"?Le.nodeAfter:Le.nodeBefore}function isBlockViewElement(me,u){return!!me&&me.is("element")&&u.includes(me.name)}const googleDocsMatch=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class GoogleDocsNormalizer{constructor(u){wt(this,"document");this.document=u}isActive(u){return googleDocsMatch.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:de}=u._parsedData;removeBoldWrapper(de,t),unwrapParagraphInListItem(de,t),transformBlockBrsToParagraphs(de,t),u.content=de}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeXmlns(me,u){for(const t of me.getChildren())t.is("element","table")&&t.hasAttribute("xmlns")&&u.removeAttribute("xmlns",t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeGoogleSheetsTag(me,u){for(const t of me.getChildren())if(t.is("element","google-sheets-html-origin")){const de=me.getChildIndex(t);u.remove(t),u.insertChild(de,t.getChildren(),me)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeInvalidTableWidth(me,u){for(const t of me.getChildren())t.is("element","table")&&t.getStyle("width")==="0px"&&u.removeStyle("width",t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeStyleBlock(me,u){for(const t of Array.from(me.getChildren()))t.is("element","style")&&u.remove(t)}const googleSheetsMatch=/<google-sheets-html-origin/i;class GoogleSheetsNormalizer{constructor(u){wt(this,"document");this.document=u}isActive(u){return googleSheetsMatch.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:de}=u._parsedData;removeGoogleSheetsTag(de,t),removeXmlns(de,t),removeInvalidTableWidth(de,t),removeStyleBlock(de,t),u.content=de}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeSpacing(me){return normalizeSafariSpaceSpans(normalizeSafariSpaceSpans(me)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function normalizeSpacerunSpans(me){me.querySelectorAll("span[style*=spacerun]").forEach(u=>{const t=u,de=t.innerText.length||0;t.innerText=Array(de+1).join(" ").substr(0,de)})}function normalizeSafariSpaceSpans(me){return me.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(u,t)=>t.length===1?" ":Array(t.length+1).join(" ").substr(0,t.length))}function parseHtml(me,u){const t=new DOMParser;me=me.replace(/<!--\[if gte vml 1]>/g,""),me=me.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const de=normalizeSpacing(cleanContentAfterBody(me)),pe=t.parseFromString(de,"text/html");normalizeSpacerunSpans(pe);const Le=pe.body.innerHTML,Ye=documentToView(pe,u),tt=extractStyles(pe);return{body:Ye,bodyString:Le,styles:tt.styles,stylesString:tt.stylesString}}function documentToView(me,u){const t=new Document$1(u),de=new DomConverter(t,{renderingMode:"data"}),pe=me.createDocumentFragment(),Le=me.body.childNodes;for(;Le.length>0;)pe.appendChild(Le[0]);return de.domToView(pe,{skipComments:!0})}function extractStyles(me){const u=[],t=[],de=Array.from(me.getElementsByTagName("style"));for(const pe of de)pe.sheet&&pe.sheet.cssRules&&pe.sheet.cssRules.length&&(u.push(pe.sheet),t.push(pe.innerHTML));return{styles:u,stylesString:t.join(" ")}}function cleanContentAfterBody(me){const u="</body>",t="</html>",de=me.indexOf(u);if(de<0)return me;const pe=me.indexOf(t,de+u.length);return me.substring(0,de+u.length)+(pe>=0?me.substring(pe):"")}class PasteFromOffice extends Plugin{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const u=this.editor,t=u.plugins.get("ClipboardPipeline"),de=u.editing.view.document,pe=[],Le=this.editor.plugins.has("MultiLevelList");pe.push(new MSWordNormalizer(de,Le)),pe.push(new GoogleDocsNormalizer(de)),pe.push(new GoogleSheetsNormalizer(de)),t.on("inputTransformation",(Ye,tt)=>{if(tt._isTransformedWithPasteFromOffice||u.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const ht=tt.dataTransfer.getData("text/html"),mt=pe.find(gt=>gt.isActive(ht));mt&&(tt._parsedData||(tt._parsedData=parseHtml(ht,de.stylesProcessor)),mt.execute(tt),tt._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var removeFormatIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const REMOVE_FORMAT="removeFormat";class RemoveFormatUI extends Plugin{static get pluginName(){return"RemoveFormatUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add(REMOVE_FORMAT,()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add(`menuBar:${REMOVE_FORMAT}`,()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.locale,pe=t.commands.get(REMOVE_FORMAT),Le=new u(t.locale),Ye=de.t;return Le.set({label:Ye("Remove Format"),icon:removeFormatIcon}),Le.bind("isEnabled").to(pe,"isEnabled"),this.listenTo(Le,"execute",()=>{t.execute(REMOVE_FORMAT),t.editing.view.focus()}),Le}}class RemoveFormatCommand extends Command{refresh(){const u=this.editor.model;this.isEnabled=!!first(this._getFormattingItems(u.document.selection,u.schema))}execute(){const u=this.editor.model,t=u.schema;u.change(de=>{for(const pe of this._getFormattingItems(u.document.selection,t))if(pe.is("selection"))for(const Le of this._getFormattingAttributes(pe,t))de.removeSelectionAttribute(Le);else{const Le=de.createRangeOn(pe);for(const Ye of this._getFormattingAttributes(pe,t))de.removeAttribute(Ye,Le)}})}*_getFormattingItems(u,t){const de=pe=>!!first(this._getFormattingAttributes(pe,t));for(const pe of u.getRanges())for(const Le of pe.getItems())!t.isBlock(Le)&&de(Le)&&(yield Le);for(const pe of u.getSelectedBlocks())de(pe)&&(yield pe);de(u)&&(yield u)}*_getFormattingAttributes(u,t){for(const[de]of u.getAttributes()){const pe=t.getAttributeProperties(de);pe&&pe.isFormatting&&(yield de)}}}class RemoveFormatEditing extends Plugin{static get pluginName(){return"RemoveFormatEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.commands.add("removeFormat",new RemoveFormatCommand(u))}}class RemoveFormat extends Plugin{static get requires(){return[RemoveFormatEditing,RemoveFormatUI]}static get pluginName(){return"RemoveFormat"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class CharacterGridView extends View{constructor(t){super(t);wt(this,"tiles");wt(this,"focusTracker");wt(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>global$1.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(t,de){const pe=new ButtonView(this.locale);return pe.set({label:t,withText:!0,class:"ck-character-grid__tile"}),pe.extendTemplate({attributes:{title:de},on:{mouseover:pe.bindTemplate.to("mouseover"),focus:pe.bindTemplate.to("focus")}}),pe.on("mouseover",()=>{this.fire("tileHover",{name:de,character:t})}),pe.on("focus",()=>{this.fire("tileFocus",{name:de,character:t})}),pe.on("execute",()=>{this.fire("execute",{name:de,character:t})}),pe}render(){super.render();for(const t of this.tiles)this.focusTracker.add(t.element);this.tiles.on("change",(t,{added:de,removed:pe})=>{if(de.length>0)for(const Le of de)this.focusTracker.add(Le.element);if(pe.length>0)for(const Le of pe)this.focusTracker.remove(Le.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class CharacterInfoView extends View{constructor(u){super(u);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",characterToUnicodeString),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",de=>de||"")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function characterToUnicodeString(me){return me===null?"":"U+"+("0000"+me.codePointAt(0).toString(16)).slice(-4)}class SpecialCharactersView extends View{constructor(t,de,pe,Le){super(t);wt(this,"items");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"_focusCycler");wt(this,"categoriesView");wt(this,"gridView");wt(this,"infoView");this.categoriesView=de,this.gridView=pe,this.infoView=Le,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var specialCharactersIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class SpecialCharactersCategoriesView extends View{constructor(t,de){super(t);wt(this,"_groupNames");wt(this,"_dropdownView");this.set("currentGroupName",Array.from(de.entries())[0][0]),this._groupNames=de,this._dropdownView=new LabeledFieldView(t,createLabeledDropdown),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const t=new Collection;for(const[Le,Ye]of this._groupNames){const tt={type:"button",model:new Model({name:Le,label:Ye,role:"menuitemradio",withText:!0})};tt.model.bind("isOn").to(this,"currentGroupName",st=>st===Le),t.add(tt)}const de=this.locale.t,pe=de("Category");this._dropdownView.set({label:pe,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:pe,ariaLabel:pe,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",Le=>this._groupNames.get(Le)),this._dropdownView.fieldView.on("execute",({source:Le})=>{this.currentGroupName=Le.name}),addListToDropdown(this._dropdownView.fieldView,t,{ariaLabel:pe,role:"menu"})}}const ALL_SPECIAL_CHARACTERS_GROUP="All";class SpecialCharacters extends Plugin{constructor(t){super(t);wt(this,"_characters");wt(this,"_groups");wt(this,"_allSpecialCharactersGroupLabel");const de=t.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=de("All")}static get requires(){return[Typing,Dialog]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("specialCharacters",()=>{const de=this._createDialogButton(ButtonView);return de.set({tooltip:!0}),de}),t.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(MenuBarMenuListItemButtonView))}addItems(t,de,pe={label:t}){if(t===ALL_SPECIAL_CHARACTERS_GROUP)throw new CKEditorError("special-character-invalid-group-name",null);const Le=this._getGroup(t,pe.label);for(const Ye of de)Le.items.add(Ye.title),this._characters.set(Ye.title,Ye.character)}getGroups(){const t=Array.from(this._groups.keys()),de=this.editor.config.get("specialCharacters.order")||[],pe=de.find(Le=>!t.includes(Le));if(pe)throw new CKEditorError("special-character-invalid-order-group-name",null,{invalidGroup:pe});return new Set([...de,...t])}getCharactersForGroup(t){if(t===ALL_SPECIAL_CHARACTERS_GROUP)return new Set(this._characters.keys());const de=this._groups.get(t);if(de)return de.items}getCharacter(t){return this._characters.get(t)}_getGroup(t,de){return this._groups.has(t)||this._groups.set(t,{items:new Set,label:de}),this._groups.get(t)}_updateGrid(t,de){de.tiles.clear();const pe=this.getCharactersForGroup(t);for(const Le of pe){const Ye=this.getCharacter(Le);de.tiles.add(de.createTile(Ye,Le))}}_createDropdownPanelContent(t){const de=Array.from(this.getGroups()).map(st=>[st,this._groups.get(st).label]),pe=new Map([[ALL_SPECIAL_CHARACTERS_GROUP,this._allSpecialCharactersGroupLabel],...de]),Le=new SpecialCharactersCategoriesView(t,pe),Ye=new CharacterGridView(t),tt=new CharacterInfoView(t);return Ye.on("tileHover",(st,ht)=>{tt.set(ht)}),Ye.on("tileFocus",(st,ht)=>{tt.set(ht)}),Le.on("change:currentGroupName",(st,ht,mt)=>{this._updateGrid(mt,Ye)}),this._updateGrid(Le.currentGroupName,Ye),{categoriesView:Le,gridView:Ye,infoView:tt}}_createDialogButton(t){const de=this.editor,pe=de.locale,Le=new t(de.locale),Ye=de.commands.get("insertText"),tt=pe.t,st=this.editor.plugins.get("Dialog");return Le.set({label:tt("Special characters"),icon:specialCharactersIcon,isToggleable:!0}),Le.bind("isOn").to(st,"id",ht=>ht==="specialCharacters"),Le.bind("isEnabled").to(Ye,"isEnabled"),Le.on("execute",()=>{if(st.id==="specialCharacters"){st.hide();return}this._showDialog()}),Le}_showDialog(){const t=this.editor,de=t.plugins.get("Dialog"),pe=t.locale,Le=pe.t,{categoriesView:Ye,gridView:tt,infoView:st}=this._createDropdownPanelContent(pe),ht=new SpecialCharactersView(pe,Ye,tt,st);tt.on("execute",(mt,gt)=>{t.execute("insertText",{text:gt.character})}),de.show({id:"specialCharacters",title:Le("Special characters"),className:"ck-special-characters",content:ht,position:DialogViewPosition.EDITOR_TOP_SIDE})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function upcastStyleToAttribute(me,u){const{modelAttribute:t,styleName:de,viewElement:pe,defaultValue:Le,reduceBoxSides:Ye=!1,shouldUpcast:tt=()=>!0}=u;me.for("upcast").attributeToAttribute({view:{name:pe,styles:{[de]:/[\s\S]+/}},model:{key:t,value:st=>{if(!tt(st))return;const ht=st.getNormalizedStyle(de),mt=Ye?reduceBoxSidesValue(ht):ht;if(Le!==mt)return mt}}})}function upcastBorderStyles(me,u,t,de){me.for("upcast").add(pe=>pe.on("element:"+u,(Le,Ye,tt)=>{if(!Ye.modelRange)return;const st=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(_t=>Ye.viewItem.hasStyle(_t));if(!st.length)return;const ht={styles:st};if(!tt.consumable.test(Ye.viewItem,ht))return;const mt=[...Ye.modelRange.getItems({shallow:!0})].pop();tt.consumable.consume(Ye.viewItem,ht);const gt={style:Ye.viewItem.getNormalizedStyle("border-style"),color:Ye.viewItem.getNormalizedStyle("border-color"),width:Ye.viewItem.getNormalizedStyle("border-width")},bt={style:reduceBoxSidesValue(gt.style),color:reduceBoxSidesValue(gt.color),width:reduceBoxSidesValue(gt.width)};bt.style!==de.style&&tt.writer.setAttribute(t.style,bt.style,mt),bt.color!==de.color&&tt.writer.setAttribute(t.color,bt.color,mt),bt.width!==de.width&&tt.writer.setAttribute(t.width,bt.width,mt)}))}function downcastAttributeToStyle(me,u){const{modelElement:t,modelAttribute:de,styleName:pe}=u;me.for("downcast").attributeToAttribute({model:{name:t,key:de},view:Le=>({key:"style",value:{[pe]:Le}})})}function downcastTableAttribute(me,u){const{modelAttribute:t,styleName:de}=u;me.for("downcast").add(pe=>pe.on(`attribute:${t}:table`,(Le,Ye,tt)=>{const{item:st,attributeNewValue:ht}=Ye,{mapper:mt,writer:gt}=tt;if(!tt.consumable.consume(Ye.item,Le.name))return;const bt=[...mt.toViewElement(st).getChildren()].find(_t=>_t.is("element","table"));ht?gt.setStyle(de,ht,bt):gt.removeStyle(de,bt)}))}function reduceBoxSidesValue(me){if(!me)return;const u=["top","right","bottom","left"];if(!u.every(Le=>me[Le]))return me;const de=me.top;return u.every(Le=>me[Le]===de)?de:me}function updateNumericAttribute(me,u,t,de,pe=1){u!=null&&pe!==void 0&&pe!==null&&u>pe?de.setAttribute(me,u,t):de.removeAttribute(me,t)}function createEmptyTableCell(me,u,t={}){const de=me.createElement("tableCell",t);return me.insertElement("paragraph",de),me.insert(de,u),de}function isHeadingColumnCell(me,u){const t=u.parent.parent,de=parseInt(t.getAttribute("headingColumns")||"0"),{column:pe}=me.getCellLocation(u);return!!de&&pe<de}function enableProperty$1(me,u,t){const{modelAttribute:de}=t;me.extend("tableCell",{allowAttributes:[de]}),upcastStyleToAttribute(u,{viewElement:/^(td|th)$/,...t}),downcastAttributeToStyle(u,{modelElement:"tableCell",...t})}function getSelectionAffectedTable(me){const u=me.getSelectedElement();return u&&u.is("element","table")?u:me.getFirstPosition().findAncestor("table")}function upcastTableFigure(){return me=>{me.on("element:figure",(u,t,de)=>{if(!de.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const pe=getViewTableFromFigure(t.viewItem);if(!pe||!de.consumable.test(pe,{name:!0}))return;de.consumable.consume(t.viewItem,{name:!0,classes:"table"});const Le=de.convertItem(pe,t.modelCursor),Ye=first(Le.modelRange.getItems());if(!Ye){de.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}de.convertChildren(t.viewItem,de.writer.createPositionAt(Ye,"end")),de.updateConversionResult(Ye,t)})}}function upcastTable(){return me=>{me.on("element:table",(u,t,de)=>{const pe=t.viewItem;if(!de.consumable.test(pe,{name:!0}))return;const{rows:Le,headingRows:Ye,headingColumns:tt}=scanTable(pe),st={};tt&&(st.headingColumns=tt),Ye&&(st.headingRows=Ye);const ht=de.writer.createElement("table",st);if(de.safeInsert(ht,t.modelCursor)){if(de.consumable.consume(pe,{name:!0}),Le.forEach(mt=>de.convertItem(mt,de.writer.createPositionAt(ht,"end"))),de.convertChildren(pe,de.writer.createPositionAt(ht,"end")),ht.isEmpty){const mt=de.writer.createElement("tableRow");de.writer.insert(mt,de.writer.createPositionAt(ht,"end")),createEmptyTableCell(de.writer,de.writer.createPositionAt(mt,"end"))}de.updateConversionResult(ht,t)}})}}function skipEmptyTableRow(){return me=>{me.on("element:tr",(u,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&u.stop()},{priority:"high"})}}function ensureParagraphInTableCell(me){return u=>{u.on(`element:${me}`,(t,de,{writer:pe})=>{if(!de.modelRange)return;const Le=de.modelRange.start.nodeAfter,Ye=pe.createPositionAt(Le,0);if(de.viewItem.isEmpty){pe.insertElement("paragraph",Ye);return}const tt=Array.from(Le.getChildren());if(tt.every(st=>st.is("element","$marker"))){const st=pe.createElement("paragraph");pe.insert(st,pe.createPositionAt(Le,0));for(const ht of tt)pe.move(pe.createRangeOn(ht),pe.createPositionAt(st,"end"))}},{priority:"low"})}}function getViewTableFromFigure(me){for(const u of me.getChildren())if(u.is("element","table"))return u}function scanTable(me){let u=0,t;const de=[],pe=[];let Le;for(const Ye of Array.from(me.getChildren())){if(Ye.name!=="tbody"&&Ye.name!=="thead"&&Ye.name!=="tfoot")continue;Ye.name==="thead"&&!Le&&(Le=Ye);const tt=Array.from(Ye.getChildren()).filter(ht=>ht.is("element","tr"));let st=null;for(const ht of tt){const mt=Array.from(ht.getChildren()).filter(gt=>gt.is("element","td")||gt.is("element","th"));if(Le&&Ye===Le||Ye.name==="tbody"&&mt.length>0&&(st===null||mt.length===st)&&mt.every(gt=>gt.is("element","th")))u++,de.push(ht);else{pe.push(ht);const gt=scanRowForHeadingColumns(ht);(!t||gt<t)&&(t=gt)}st=Math.max(st||0,mt.length)}}return{headingRows:u,headingColumns:t||0,rows:[...de,...pe]}}function scanRowForHeadingColumns(me){let u=0,t=0;const de=Array.from(me.getChildren()).filter(pe=>pe.name==="th"||pe.name==="td");for(;t<de.length&&de[t].name==="th";){const pe=de[t],Le=parseInt(pe.getAttribute("colspan")||"1");u=u+Le,t++}return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TableWalker{constructor(u,t={}){wt(this,"_table");wt(this,"_startRow");wt(this,"_endRow");wt(this,"_startColumn");wt(this,"_endColumn");wt(this,"_includeAllSlots");wt(this,"_skipRows");wt(this,"_row");wt(this,"_rowIndex");wt(this,"_column");wt(this,"_cellIndex");wt(this,"_spannedCells");wt(this,"_nextCellAtColumn");wt(this,"_jumpedToStartRow",!1);this._table=u,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const u=this._table.getChild(this._rowIndex);if(!u||this._isOverEndRow())return{done:!0,value:void 0};if(!u.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const de=this._getSpanned();if(de)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(de.cell,de.row,de.column));else{const pe=u.getChild(this._cellIndex);if(!pe)return this._advanceToNextRow();const Le=parseInt(pe.getAttribute("colspan")||"1"),Ye=parseInt(pe.getAttribute("rowspan")||"1");(Le>1||Ye>1)&&this._recordSpans(pe,Ye,Le),this._shouldSkipSlot()||(t=this._formatOutValue(pe)),this._nextCellAtColumn=this._column+Le}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(u){this._skipRows.add(u)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(u,t=this._row,de=this._column){return{done:!1,value:new TableSlot(this,u,t,de)}}_shouldSkipSlot(){const u=this._skipRows.has(this._row),t=this._row<this._startRow,de=this._column<this._startColumn,pe=this._endColumn!==void 0&&this._column>this._endColumn;return u||t||de||pe}_getSpanned(){const u=this._spannedCells.get(this._row);return u&&u.get(this._column)||null}_recordSpans(u,t,de){const pe={cell:u,row:this._row,column:this._column};for(let Le=this._row;Le<this._row+t;Le++)for(let Ye=this._column;Ye<this._column+de;Ye++)(Le!=this._row||Ye!=this._column)&&this._markSpannedCell(Le,Ye,pe)}_markSpannedCell(u,t,de){this._spannedCells.has(u)||this._spannedCells.set(u,new Map),this._spannedCells.get(u).set(t,de)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const u=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)u===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(u){return[...this._table.getChild(u).getChildren()].reduce((de,pe)=>de+parseInt(pe.getAttribute("colspan")||"1"),0)}}class TableSlot{constructor(u,t,de,pe){wt(this,"cell");wt(this,"row");wt(this,"column");wt(this,"cellAnchorRow");wt(this,"cellAnchorColumn");wt(this,"_cellIndex");wt(this,"_rowIndex");wt(this,"_table");this.cell=t,this.row=u._row,this.column=u._column,this.cellAnchorRow=de,this.cellAnchorColumn=pe,this._cellIndex=u._cellIndex,this._rowIndex=u._rowIndex,this._table=u._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function downcastTable(me,u){return(t,{writer:de})=>{const pe=t.getAttribute("headingRows")||0,Le=de.createContainerElement("table",null,[]),Ye=de.createContainerElement("figure",{class:"table"},Le);pe>0&&de.insert(de.createPositionAt(Le,"end"),de.createContainerElement("thead",null,de.createSlot(tt=>tt.is("element","tableRow")&&tt.index<pe))),pe<me.getRows(t)&&de.insert(de.createPositionAt(Le,"end"),de.createContainerElement("tbody",null,de.createSlot(tt=>tt.is("element","tableRow")&&tt.index>=pe)));for(const{positionOffset:tt,filter:st}of u.additionalSlots)de.insert(de.createPositionAt(Le,tt),de.createSlot(st));return de.insert(de.createPositionAt(Le,"after"),de.createSlot(tt=>tt.is("element","tableRow")?!1:!u.additionalSlots.some(({filter:st})=>st(tt)))),u.asWidget?toTableWidget(Ye,de):Ye}}function downcastRow(){return(me,{writer:u})=>me.isEmpty?u.createEmptyElement("tr"):u.createContainerElement("tr")}function downcastCell(me={}){return(u,{writer:t})=>{const de=u.parent,pe=de.parent,Le=pe.getChildIndex(de),Ye=new TableWalker(pe,{row:Le}),tt=pe.getAttribute("headingRows")||0,st=pe.getAttribute("headingColumns")||0;let ht=null;for(const mt of Ye)if(mt.cell==u){const bt=mt.row<tt||mt.column<st?"th":"td";ht=me.asWidget?toWidgetEditable(t.createEditableElement(bt),t):t.createContainerElement(bt);break}return ht}}function convertParagraphInTableCell(me={}){return(u,{writer:t})=>{if(!u.parent.is("element","tableCell")||!isSingleParagraphWithoutAttributes(u))return null;if(me.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const de=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,de),de}}}function isSingleParagraphWithoutAttributes(me){return me.parent.childCount==1&&!hasAnyAttribute(me)}function toTableWidget(me,u){return u.setCustomProperty("table",!0,me),toWidget(me,u,{hasSelectionHandle:!0})}function hasAnyAttribute(me){for(const u of me.getAttributeKeys())if(!(u.startsWith("selection:")||u=="htmlEmptyBlock"))return!0;return!1}class InsertTableCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,de=u.schema;this.isEnabled=isAllowedInParent(t,de)}execute(u={}){const t=this.editor,de=t.model,pe=t.plugins.get("TableUtils"),Le=t.config.get("table.defaultHeadings.rows"),Ye=t.config.get("table.defaultHeadings.columns");u.headingRows===void 0&&Le&&(u.headingRows=Le),u.headingColumns===void 0&&Ye&&(u.headingColumns=Ye),de.change(tt=>{const st=pe.createTable(tt,u);de.insertObject(st,null,null,{findOptimalPosition:"auto"}),tt.setSelection(tt.createPositionAt(st.getNodeByPath([0,0,0]),0))})}}function isAllowedInParent(me,u){const t=me.getFirstPosition().parent,de=t===t.root?t:t.parent;return u.checkChild(de,"table")}class InsertRowCommand extends Command{constructor(t,de={}){super(t);wt(this,"order");this.order=de.order||"below"}refresh(){const t=this.editor.model.document.selection,pe=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=pe}execute(){const t=this.editor,de=t.model.document.selection,pe=t.plugins.get("TableUtils"),Le=this.order==="above",Ye=pe.getSelectionAffectedTableCells(de),tt=pe.getRowIndexes(Ye),st=Le?tt.first:tt.last,ht=Ye[0].findAncestor("table");pe.insertRows(ht,{at:Le?st:st+1,copyStructureFromAbove:!Le})}}class InsertColumnCommand extends Command{constructor(t,de={}){super(t);wt(this,"order");this.order=de.order||"right"}refresh(){const t=this.editor.model.document.selection,pe=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=pe}execute(){const t=this.editor,de=t.model.document.selection,pe=t.plugins.get("TableUtils"),Le=this.order==="left",Ye=pe.getSelectionAffectedTableCells(de),tt=pe.getColumnIndexes(Ye),st=Le?tt.first:tt.last,ht=Ye[0].findAncestor("table");pe.insertColumns(ht,{columns:1,at:Le?st:st+1})}}class SplitCellCommand extends Command{constructor(t,de={}){super(t);wt(this,"direction");this.direction=de.direction||"horizontally"}refresh(){const de=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=de.length===1}execute(){const t=this.editor.plugins.get("TableUtils"),de=t.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?t.splitCellHorizontally(de,2):t.splitCellVertically(de,2)}}function cropTableToDimensions(me,u,t){const{startRow:de,startColumn:pe,endRow:Le,endColumn:Ye}=u,tt=t.createElement("table"),st=Le-de+1;for(let mt=0;mt<st;mt++)t.insertElement("tableRow",tt,"end");const ht=[...new TableWalker(me,{startRow:de,endRow:Le,startColumn:pe,endColumn:Ye,includeAllSlots:!0})];for(const{row:mt,column:gt,cell:bt,isAnchor:_t,cellAnchorRow:vt,cellAnchorColumn:Tt}of ht){const St=mt-de,Rt=tt.getChild(St);if(!_t)(vt<de||Tt<pe)&&createEmptyTableCell(t,t.createPositionAt(Rt,"end"));else{const Pt=t.cloneElement(bt);t.append(Pt,Rt),trimTableCellIfNeeded(Pt,mt,gt,Le,Ye,t)}}return addHeadingsToCroppedTable(tt,me,de,pe,t),tt}function getVerticallyOverlappingCells(me,u,t=0){const de=[],pe=new TableWalker(me,{startRow:t,endRow:u-1});for(const Le of pe){const{row:Ye,cellHeight:tt}=Le,st=Ye+tt-1;Ye<u&&u<=st&&de.push(Le)}return de}function splitHorizontally(me,u,t){const de=me.parent,pe=de.parent,Le=de.index,Ye=parseInt(me.getAttribute("rowspan")),tt=u-Le,st={},ht=Ye-tt;ht>1&&(st.rowspan=ht);const mt=parseInt(me.getAttribute("colspan")||"1");mt>1&&(st.colspan=mt);const gt=Le,bt=gt+tt,_t=[...new TableWalker(pe,{startRow:gt,endRow:bt,includeAllSlots:!0})];let vt=null,Tt;for(const St of _t){const{row:Rt,column:Pt,cell:Ot}=St;Ot===me&&Tt===void 0&&(Tt=Pt),Tt!==void 0&&Tt===Pt&&Rt===bt&&(vt=createEmptyTableCell(t,St.getPositionBefore(),st))}return updateNumericAttribute("rowspan",tt,me,t),vt}function getHorizontallyOverlappingCells(me,u){const t=[],de=new TableWalker(me);for(const pe of de){const{column:Le,cellWidth:Ye}=pe,tt=Le+Ye-1;Le<u&&u<=tt&&t.push(pe)}return t}function splitVertically(me,u,t,de){const pe=parseInt(me.getAttribute("colspan")),Le=t-u,Ye={},tt=pe-Le;tt>1&&(Ye.colspan=tt);const st=parseInt(me.getAttribute("rowspan")||"1");st>1&&(Ye.rowspan=st);const ht=createEmptyTableCell(de,de.createPositionAfter(me),Ye);return updateNumericAttribute("colspan",Le,me,de),ht}function trimTableCellIfNeeded(me,u,t,de,pe,Le){const Ye=parseInt(me.getAttribute("colspan")||"1"),tt=parseInt(me.getAttribute("rowspan")||"1");if(t+Ye-1>pe){const mt=pe-t+1;updateNumericAttribute("colspan",mt,me,Le,1)}if(u+tt-1>de){const mt=de-u+1;updateNumericAttribute("rowspan",mt,me,Le,1)}}function addHeadingsToCroppedTable(me,u,t,de,pe){const Le=parseInt(u.getAttribute("headingRows")||"0");if(Le>0){const tt=Le-t;updateNumericAttribute("headingRows",tt,me,pe,0)}const Ye=parseInt(u.getAttribute("headingColumns")||"0");if(Ye>0){const tt=Ye-de;updateNumericAttribute("headingColumns",tt,me,pe,0)}}function removeEmptyColumns(me,u){const t=u.getColumns(me),de=new Array(t).fill(0);for(const{column:Le}of new TableWalker(me))de[Le]++;const pe=de.reduce((Le,Ye,tt)=>Ye?Le:[...Le,tt],[]);if(pe.length>0){const Le=pe[pe.length-1];return u.removeColumns(me,{at:Le}),!0}return!1}function removeEmptyRows(me,u){const t=[],de=u.getRows(me);for(let pe=0;pe<de;pe++)me.getChild(pe).isEmpty&&t.push(pe);if(t.length>0){const pe=t[t.length-1];return u.removeRows(me,{at:pe}),!0}return!1}function removeEmptyRowsColumns(me,u){removeEmptyColumns(me,u)||removeEmptyRows(me,u)}function adjustLastRowIndex(me,u){const t=Array.from(new TableWalker(me,{startColumn:u.firstColumn,endColumn:u.lastColumn,row:u.lastRow}));if(t.every(({cellHeight:Le})=>Le===1))return u.lastRow;const pe=t[0].cellHeight-1;return u.lastRow+pe}function adjustLastColumnIndex(me,u){const t=Array.from(new TableWalker(me,{startRow:u.firstRow,endRow:u.lastRow,column:u.lastColumn}));if(t.every(({cellWidth:Le})=>Le===1))return u.lastColumn;const pe=t[0].cellWidth-1;return u.lastColumn+pe}class MergeCellCommand extends Command{constructor(t,de){super(t);wt(this,"direction");wt(this,"isHorizontal");this.direction=de.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,de=t.document,Le=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(de.selection)[0],Ye=this.value,tt=this.direction;t.change(st=>{const ht=tt=="right"||tt=="down",mt=ht?Le:Ye,gt=ht?Ye:Le,bt=gt.parent;mergeTableCells$1(gt,mt,st);const _t=this.isHorizontal?"colspan":"rowspan",vt=parseInt(Le.getAttribute(_t)||"1"),Tt=parseInt(Ye.getAttribute(_t)||"1");st.setAttribute(_t,vt+Tt,mt),st.setSelection(st.createRangeIn(mt));const St=this.editor.plugins.get("TableUtils"),Rt=bt.findAncestor("table");removeEmptyRowsColumns(Rt,St)})}_getMergeableCell(){const de=this.editor.model.document,pe=this.editor.plugins.get("TableUtils"),Le=pe.getTableCellsContainingSelection(de.selection)[0];if(!Le)return;const Ye=this.isHorizontal?getHorizontalCell(Le,this.direction,pe):getVerticalCell(Le,this.direction,pe);if(!Ye)return;const tt=this.isHorizontal?"rowspan":"colspan",st=parseInt(Le.getAttribute(tt)||"1");if(parseInt(Ye.getAttribute(tt)||"1")===st)return Ye}}function getHorizontalCell(me,u,t){const pe=me.parent.parent,Le=u=="right"?me.nextSibling:me.previousSibling,Ye=(pe.getAttribute("headingColumns")||0)>0;if(!Le)return;const tt=u=="right"?me:Le,st=u=="right"?Le:me,{column:ht}=t.getCellLocation(tt),{column:mt}=t.getCellLocation(st),gt=parseInt(tt.getAttribute("colspan")||"1"),bt=isHeadingColumnCell(t,tt),_t=isHeadingColumnCell(t,st);return Ye&&bt!=_t?void 0:ht+gt===mt?Le:void 0}function getVerticalCell(me,u,t){const de=me.parent,pe=de.parent,Le=pe.getChildIndex(de);if(u=="down"&&Le===t.getRows(pe)-1||u=="up"&&Le===0)return null;const Ye=parseInt(me.getAttribute("rowspan")||"1"),tt=pe.getAttribute("headingRows")||0,st=u=="down"&&Le+Ye===tt,ht=u=="up"&&Le===tt;if(tt&&(st||ht))return null;const mt=parseInt(me.getAttribute("rowspan")||"1"),gt=u=="down"?Le+mt:Le,bt=[...new TableWalker(pe,{endRow:gt})],vt=bt.find(St=>St.cell===me).column,Tt=bt.find(({row:St,cellHeight:Rt,column:Pt})=>Pt!==vt?!1:u=="down"?St===gt:gt===St+Rt);return Tt&&Tt.cell?Tt.cell:null}function mergeTableCells$1(me,u,t){isEmpty$2(me)||(isEmpty$2(u)&&t.remove(t.createRangeIn(u)),t.move(t.createRangeIn(me),t.createPositionAt(u,"end"))),t.remove(me)}function isEmpty$2(me){const u=me.getChild(0);return me.childCount==1&&u.is("element","paragraph")&&u.isEmpty}class RemoveRowCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=u.getSelectionAffectedTableCells(this.editor.model.document.selection),de=t[0];if(de){const pe=de.findAncestor("table"),Ye=u.getRows(pe)-1,tt=u.getRowIndexes(t),st=tt.first===0&&tt.last===Ye;this.isEnabled=!st}else this.isEnabled=!1}execute(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),de=t.getSelectionAffectedTableCells(u.document.selection),pe=t.getRowIndexes(de),Le=de[0],Ye=Le.findAncestor("table"),tt=t.getCellLocation(Le).column;u.change(st=>{const ht=pe.last-pe.first+1;t.removeRows(Ye,{at:pe.first,rows:ht});const mt=getCellToFocus$1(Ye,pe.first,tt,t.getRows(Ye));st.setSelection(st.createPositionAt(mt,0))})}}function getCellToFocus$1(me,u,t,de){const pe=me.getChild(Math.min(u,de-1));let Le=pe.getChild(0),Ye=0;for(const tt of pe.getChildren()){if(Ye>t)return Le;Le=tt,Ye+=parseInt(tt.getAttribute("colspan")||"1")}return Le}class RemoveColumnCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=u.getSelectionAffectedTableCells(this.editor.model.document.selection),de=t[0];if(de){const pe=de.findAncestor("table"),Le=u.getColumns(pe),{first:Ye,last:tt}=u.getColumnIndexes(t);this.isEnabled=tt-Ye<Le-1}else this.isEnabled=!1}execute(){const u=this.editor.plugins.get("TableUtils"),[t,de]=getBoundaryCells(this.editor.model.document.selection,u),pe=t.parent.parent,Le=[...new TableWalker(pe)],Ye={first:Le.find(st=>st.cell===t).column,last:Le.find(st=>st.cell===de).column},tt=getCellToFocus(Le,t,de,Ye);this.editor.model.change(st=>{const ht=Ye.last-Ye.first+1;u.removeColumns(pe,{at:Ye.first,columns:ht}),st.setSelection(st.createPositionAt(tt,0))})}}function getCellToFocus(me,u,t,de){return parseInt(t.getAttribute("colspan")||"1")>1?t:u.previousSibling||t.nextSibling?t.nextSibling||u.previousSibling:de.first?me.reverse().find(({column:Le})=>Le<de.first).cell:me.reverse().find(({column:Le})=>Le>de.last).cell}function getBoundaryCells(me,u){const t=u.getSelectionAffectedTableCells(me),de=t[0],pe=t.pop(),Le=[de,pe];return de.isBefore(pe)?Le:Le.reverse()}class SetHeaderRowCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=this.editor.model,de=u.getSelectionAffectedTableCells(t.document.selection),pe=de.length>0;this.isEnabled=pe,this.value=pe&&de.every(Le=>this._isInHeading(Le,Le.parent.parent))}execute(u={}){if(u.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),de=this.editor.model,pe=t.getSelectionAffectedTableCells(de.document.selection),Le=pe[0].findAncestor("table"),{first:Ye,last:tt}=t.getRowIndexes(pe),st=this.value?Ye:tt+1,ht=Le.getAttribute("headingRows")||0;de.change(mt=>{if(st){const gt=st>ht?ht:0,bt=getVerticallyOverlappingCells(Le,st,gt);for(const{cell:_t}of bt)splitHorizontally(_t,st,mt)}updateNumericAttribute("headingRows",st,Le,mt,0)})}_isInHeading(u,t){const de=parseInt(t.getAttribute("headingRows")||"0");return!!de&&u.parent.index<de}}class SetHeaderColumnCommand extends Command{refresh(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),de=t.getSelectionAffectedTableCells(u.document.selection),pe=de.length>0;this.isEnabled=pe,this.value=pe&&de.every(Le=>isHeadingColumnCell(t,Le))}execute(u={}){if(u.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),de=this.editor.model,pe=t.getSelectionAffectedTableCells(de.document.selection),Le=pe[0].findAncestor("table"),{first:Ye,last:tt}=t.getColumnIndexes(pe),st=this.value?Ye:tt+1;de.change(ht=>{if(st){const mt=getHorizontallyOverlappingCells(Le,st);for(const{cell:gt,column:bt}of mt)splitVertically(gt,bt,st,ht)}updateNumericAttribute("headingColumns",st,Le,ht,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const COLUMN_MIN_WIDTH_AS_PERCENTAGE=5,COLUMN_MIN_WIDTH_IN_PIXELS=40,COLUMN_WIDTH_PRECISION=2;function getChangedResizedTables(me){const u=new Set;for(const t of me.document.differ.getChanges()){let de=null;switch(t.type){case"insert":de=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":de=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(de=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!de)continue;const pe=de.nodeAfter&&de.nodeAfter.is("element","table")?de.nodeAfter:de.findAncestor("table");for(const Le of me.createRangeOn(pe).getItems())Le.is("element","table")&&getColumnGroupElement(Le)&&u.add(Le)}return u}function getColumnMinWidthAsPercentage(me,u){return COLUMN_MIN_WIDTH_IN_PIXELS*100/getTableWidthInPixels(me,u)}function getTableWidthInPixels(me,u){const t=getChildrenViewElement(me,"tbody",u)||getChildrenViewElement(me,"thead",u),de=u.editing.view.domConverter.mapViewToDom(t);return getElementWidthInPixels(de)}function getChildrenViewElement(me,u,t){return[...[...t.editing.mapper.toViewElement(me).getChildren()].find(Le=>Le.is("element","table")).getChildren()].find(Le=>Le.is("element",u))}function getElementWidthInPixels(me){const u=global$1.window.getComputedStyle(me);return u.boxSizing==="border-box"?parseFloat(u.width)-parseFloat(u.paddingLeft)-parseFloat(u.paddingRight)-parseFloat(u.borderLeftWidth)-parseFloat(u.borderRightWidth):parseFloat(u.width)}function getColumnEdgesIndexes(me,u){const t=u.getCellLocation(me).column,de=me.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+de-1}}function toPrecision(me){const u=Math.pow(10,COLUMN_WIDTH_PRECISION),t=typeof me=="number"?me:parseFloat(me);return Math.round(t*u)/u}function clamp(me,u,t){return me<=u?toPrecision(u):me>=t?toPrecision(t):toPrecision(me)}function createFilledArray(me,u){return Array(me).fill(u)}function sumArray(me){return me.map(u=>typeof u=="number"?u:parseFloat(u)).filter(u=>!Number.isNaN(u)).reduce((u,t)=>u+t,0)}function normalizeColumnWidths(me){const u=me.map(pe=>pe==="auto"?pe:parseFloat(pe.replace("%","")));let t=calculateMissingColumnWidths(u);const de=sumArray(t);return de!==100&&(t=t.map(pe=>toPrecision(pe*100/de)).map((pe,Le,Ye)=>{if(!(Le===Ye.length-1))return pe;const st=sumArray(Ye);return toPrecision(pe+100-st)})),t.map(pe=>pe+"%")}function calculateMissingColumnWidths(me){const u=me.filter(pe=>pe==="auto").length;if(u===0)return me.map(pe=>toPrecision(pe));const t=sumArray(me),de=Math.max((100-t)/u,COLUMN_MIN_WIDTH_AS_PERCENTAGE);return me.map(pe=>pe==="auto"?de:pe).map(pe=>toPrecision(pe))}function getDomCellOuterWidth(me){const u=global$1.window.getComputedStyle(me);return u.boxSizing==="border-box"?parseInt(u.width):parseFloat(u.width)+parseFloat(u.paddingLeft)+parseFloat(u.paddingRight)+parseFloat(u.borderWidth)}function updateColumnElements(me,u,t,de){for(let pe=0;pe<Math.max(t.length,me.length);pe++){const Le=me[pe],Ye=t[pe];Ye?Le?de.setAttribute("columnWidth",Ye,Le):de.appendElement("tableColumn",{columnWidth:Ye},u):de.remove(Le)}}function getColumnGroupElement(me){if(me.is("element","tableColumnGroup"))return me;const u=me.getChildren();return Array.from(u).find(t=>t.is("element","tableColumnGroup"))}function getTableColumnElements(me){const u=getColumnGroupElement(me);return u?Array.from(u.getChildren()):[]}function getTableColumnsWidths(me){return getTableColumnElements(me).map(u=>u.getAttribute("columnWidth"))}function translateColSpanAttribute(me,u){return getTableColumnElements(me).reduce((de,pe)=>{const Le=pe.getAttribute("columnWidth"),Ye=pe.getAttribute("colSpan");if(!Ye)return de.push(Le),de;for(let tt=0;tt<Ye;tt++)de.push(Le);return u.removeAttribute("colSpan",pe),de},[])}class TableUtils extends Plugin{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(u){const t=u.parent,de=t.parent,pe=de.getChildIndex(t),Le=new TableWalker(de,{row:pe});for(const{cell:Ye,row:tt,column:st}of Le)if(Ye===u)return{row:tt,column:st};/* istanbul ignore next -- @preserve */}createTable(u,t){const de=u.createElement("table"),pe=t.rows||2,Le=t.columns||2;return createEmptyRows(u,de,0,pe,Le),t.headingRows&&updateNumericAttribute("headingRows",Math.min(t.headingRows,pe),de,u,0),t.headingColumns&&updateNumericAttribute("headingColumns",Math.min(t.headingColumns,Le),de,u,0),de}insertRows(u,t={}){const de=this.editor.model,pe=t.at||0,Le=t.rows||1,Ye=t.copyStructureFromAbove!==void 0,tt=t.copyStructureFromAbove?pe-1:pe,st=this.getRows(u),ht=this.getColumns(u);if(pe>st)throw new CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:t});de.change(mt=>{const gt=u.getAttribute("headingRows")||0;if(gt>pe&&updateNumericAttribute("headingRows",gt+Le,u,mt,0),!Ye&&(pe===0||pe===st)){createEmptyRows(mt,u,pe,Le,ht);return}const bt=Ye?Math.max(pe,tt):pe,_t=new TableWalker(u,{endRow:bt}),vt=new Array(ht).fill(1);for(const{row:Tt,column:St,cellHeight:Rt,cellWidth:Pt,cell:Ot}of _t){const Mt=Tt+Rt-1,Bt=Tt<pe&&pe<=Mt,Dt=Tt<=tt&&tt<=Mt;Bt?(mt.setAttribute("rowspan",Rt+Le,Ot),vt[St]=-Pt):Ye&&Dt&&(vt[St]=Pt)}for(let Tt=0;Tt<Le;Tt++){const St=mt.createElement("tableRow");mt.insert(St,u,pe);for(let Rt=0;Rt<vt.length;Rt++){const Pt=vt[Rt],Ot=mt.createPositionAt(St,"end");Pt>0&&createEmptyTableCell(mt,Ot,Pt>1?{colspan:Pt}:void 0),Rt+=Math.abs(Pt)-1}}})}insertColumns(u,t={}){const de=this.editor.model,pe=t.at||0,Le=t.columns||1;de.change(Ye=>{const tt=u.getAttribute("headingColumns");pe<tt&&Ye.setAttribute("headingColumns",tt+Le,u);const st=this.getColumns(u);if(pe===0||st===pe){for(const mt of u.getChildren())mt.is("element","tableRow")&&createCells(Le,Ye,Ye.createPositionAt(mt,pe?"end":0));return}const ht=new TableWalker(u,{column:pe,includeAllSlots:!0});for(const mt of ht){const{row:gt,cell:bt,cellAnchorColumn:_t,cellAnchorRow:vt,cellWidth:Tt,cellHeight:St}=mt;if(_t<pe){Ye.setAttribute("colspan",Tt+Le,bt);const Rt=vt+St-1;for(let Pt=gt;Pt<=Rt;Pt++)ht.skipRow(Pt)}else createCells(Le,Ye,mt.getPositionBefore())}})}removeRows(u,t){const de=this.editor.model,pe=t.rows||1,Le=this.getRows(u),Ye=t.at,tt=Ye+pe-1;if(tt>Le-1)throw new CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:u,options:t});de.change(st=>{const ht={first:Ye,last:tt},{cellsToMove:mt,cellsToTrim:gt}=getCellsToMoveAndTrimOnRemoveRow(u,ht);if(mt.size){const bt=tt+1;moveCellsToRow(u,bt,mt,st)}for(let bt=tt;bt>=Ye;bt--)st.remove(u.getChild(bt));for(const{rowspan:bt,cell:_t}of gt)updateNumericAttribute("rowspan",bt,_t,st);updateHeadingRows(u,ht,st),removeEmptyColumns(u,this)||removeEmptyRows(u,this)})}removeColumns(u,t){const de=this.editor.model,pe=t.at,Le=t.columns||1,Ye=t.at+Le-1;de.change(tt=>{adjustHeadingColumns(u,{first:pe,last:Ye},tt);const st=getTableColumnElements(u);for(let ht=Ye;ht>=pe;ht--){for(const{cell:mt,column:gt,cellWidth:bt}of[...new TableWalker(u)])gt<=ht&&bt>1&&gt+bt>ht?updateNumericAttribute("colspan",bt-1,mt,tt):gt===ht&&tt.remove(mt);if(st[ht]){const mt=ht===0?st[1]:st[ht-1],gt=parseFloat(st[ht].getAttribute("columnWidth")),bt=parseFloat(mt.getAttribute("columnWidth"));tt.remove(st[ht]),tt.setAttribute("columnWidth",gt+bt+"%",mt)}}removeEmptyRows(u,this)||removeEmptyColumns(u,this)})}splitCellVertically(u,t=2){const de=this.editor.model,Le=u.parent.parent,Ye=parseInt(u.getAttribute("rowspan")||"1"),tt=parseInt(u.getAttribute("colspan")||"1");de.change(st=>{if(tt>1){const{newCellsSpan:ht,updatedSpan:mt}=breakSpanEvenly(tt,t);updateNumericAttribute("colspan",mt,u,st);const gt={};ht>1&&(gt.colspan=ht),Ye>1&&(gt.rowspan=Ye);const bt=tt>t?t-1:tt-1;createCells(bt,st,st.createPositionAfter(u),gt)}if(tt<t){const ht=t-tt,mt=[...new TableWalker(Le)],{column:gt}=mt.find(({cell:Tt})=>Tt===u),bt=mt.filter(({cell:Tt,cellWidth:St,column:Rt})=>{const Pt=Tt!==u&&Rt===gt,Ot=Rt<gt&&Rt+St>gt;return Pt||Ot});for(const{cell:Tt,cellWidth:St}of bt)st.setAttribute("colspan",St+ht,Tt);const _t={};Ye>1&&(_t.rowspan=Ye),createCells(ht,st,st.createPositionAfter(u),_t);const vt=Le.getAttribute("headingColumns")||0;vt>gt&&updateNumericAttribute("headingColumns",vt+ht,Le,st)}})}splitCellHorizontally(u,t=2){const de=this.editor.model,pe=u.parent,Le=pe.parent,Ye=Le.getChildIndex(pe),tt=parseInt(u.getAttribute("rowspan")||"1"),st=parseInt(u.getAttribute("colspan")||"1");de.change(ht=>{if(tt>1){const mt=[...new TableWalker(Le,{startRow:Ye,endRow:Ye+tt-1,includeAllSlots:!0})],{newCellsSpan:gt,updatedSpan:bt}=breakSpanEvenly(tt,t);updateNumericAttribute("rowspan",bt,u,ht);const{column:_t}=mt.find(({cell:St})=>St===u),vt={};gt>1&&(vt.rowspan=gt),st>1&&(vt.colspan=st);let Tt=0;for(const St of mt){const{column:Rt,row:Pt}=St,Ot=Pt>=Ye+bt,Mt=Rt===_t;Tt>=gt&&Mt&&(Tt=0),Ot&&Mt&&(Tt||createCells(1,ht,St.getPositionBefore(),vt),Tt++)}}if(tt<t){const mt=t-tt,gt=[...new TableWalker(Le,{startRow:0,endRow:Ye})];for(const{cell:vt,cellHeight:Tt,row:St}of gt)if(vt!==u&&St+Tt>Ye){const Rt=Tt+mt;ht.setAttribute("rowspan",Rt,vt)}const bt={};st>1&&(bt.colspan=st),createEmptyRows(ht,Le,Ye+1,mt,1,bt);const _t=Le.getAttribute("headingRows")||0;_t>Ye&&updateNumericAttribute("headingRows",_t+mt,Le,ht)}})}getColumns(u){return[...u.getChild(0).getChildren()].filter(de=>de.is("element","tableCell")).reduce((de,pe)=>{const Le=parseInt(pe.getAttribute("colspan")||"1");return de+Le},0)}getRows(u){return Array.from(u.getChildren()).reduce((t,de)=>de.is("element","tableRow")?t+1:t,0)}createTableWalker(u,t={}){return new TableWalker(u,t)}getSelectedTableCells(u){const t=[];for(const de of this.sortRanges(u.getRanges())){const pe=de.getContainedElement();pe&&pe.is("element","tableCell")&&t.push(pe)}return t}getTableCellsContainingSelection(u){const t=[];for(const de of u.getRanges()){const pe=de.start.findAncestor("tableCell");pe&&t.push(pe)}return t}getSelectionAffectedTableCells(u){const t=this.getSelectedTableCells(u);return t.length?t:this.getTableCellsContainingSelection(u)}getRowIndexes(u){const t=u.map(de=>de.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(u){const t=u[0].findAncestor("table"),pe=[...new TableWalker(t)].filter(Le=>u.includes(Le.cell)).map(Le=>Le.column);return this._getFirstLastIndexesObject(pe)}isSelectionRectangular(u){if(u.length<2||!this._areCellInTheSameTableSection(u))return!1;const t=new Set,de=new Set;let pe=0;for(const Ye of u){const{row:tt,column:st}=this.getCellLocation(Ye),ht=parseInt(Ye.getAttribute("rowspan"))||1,mt=parseInt(Ye.getAttribute("colspan"))||1;t.add(tt),de.add(st),ht>1&&t.add(tt+ht-1),mt>1&&de.add(st+mt-1),pe+=ht*mt}return getBiggestRectangleArea(t,de)==pe}sortRanges(u){return Array.from(u).sort(compareRangeOrder)}_getFirstLastIndexesObject(u){const t=u.sort((Le,Ye)=>Le-Ye),de=t[0],pe=t[t.length-1];return{first:de,last:pe}}_areCellInTheSameTableSection(u){const t=u[0].findAncestor("table"),de=this.getRowIndexes(u),pe=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(de,pe))return!1;const Le=this.getColumnIndexes(u),Ye=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(Le,Ye)}_areIndexesInSameSection({first:u,last:t},de){const pe=u<de,Le=t<de;return pe===Le}}function createEmptyRows(me,u,t,de,pe,Le={}){for(let Ye=0;Ye<de;Ye++){const tt=me.createElement("tableRow");me.insert(tt,u,t),createCells(pe,me,me.createPositionAt(tt,"end"),Le)}}function createCells(me,u,t,de={}){for(let pe=0;pe<me;pe++)createEmptyTableCell(u,t,de)}function breakSpanEvenly(me,u){if(me<u)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(me/u),de=me-t*u+t;return{newCellsSpan:t,updatedSpan:de}}function adjustHeadingColumns(me,u,t){const de=me.getAttribute("headingColumns")||0;if(de&&u.first<de){const pe=Math.min(de-1,u.last)-u.first+1;t.setAttribute("headingColumns",de-pe,me)}}function updateHeadingRows(me,{first:u,last:t},de){const pe=me.getAttribute("headingRows")||0;if(u<pe){const Le=t<pe?pe-(t-u+1):u;updateNumericAttribute("headingRows",Le,me,de,0)}}function getCellsToMoveAndTrimOnRemoveRow(me,{first:u,last:t}){const de=new Map,pe=[];for(const{row:Le,column:Ye,cellHeight:tt,cell:st}of new TableWalker(me,{endRow:t})){const ht=Le+tt-1;if(Le>=u&&Le<=t&&ht>t){const bt=t-Le+1,_t=tt-bt;de.set(Ye,{cell:st,rowspan:_t})}if(Le<u&&ht>=u){let bt;ht>=t?bt=t-u+1:bt=ht-u+1,pe.push({cell:st,rowspan:tt-bt})}}return{cellsToMove:de,cellsToTrim:pe}}function moveCellsToRow(me,u,t,de){const Le=[...new TableWalker(me,{includeAllSlots:!0,row:u})],Ye=me.getChild(u);let tt;for(const{column:st,cell:ht,isAnchor:mt}of Le)if(t.has(st)){const{cell:gt,rowspan:bt}=t.get(st),_t=tt?de.createPositionAfter(tt):de.createPositionAt(Ye,0);de.move(de.createRangeOn(gt),_t),updateNumericAttribute("rowspan",bt,gt,de),tt=gt}else mt&&(tt=ht)}function compareRangeOrder(me,u){const t=me.start,de=u.start;return t.isBefore(de)?-1:1}function getBiggestRectangleArea(me,u){const t=Array.from(me.values()),de=Array.from(u.values()),pe=Math.max(...t),Le=Math.min(...t),Ye=Math.max(...de),tt=Math.min(...de);return(pe-Le+1)*(Ye-tt+1)}class MergeCellsCommand extends Command{refresh(){const u=this.editor.plugins.get(TableUtils),t=u.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=u.isSelectionRectangular(t)}execute(){const u=this.editor.model,t=this.editor.plugins.get(TableUtils);u.change(de=>{const pe=t.getSelectedTableCells(u.document.selection),Le=pe.shift(),{mergeWidth:Ye,mergeHeight:tt}=getMergeDimensions(Le,pe,t);updateNumericAttribute("colspan",Ye,Le,de),updateNumericAttribute("rowspan",tt,Le,de);for(const ht of pe)mergeTableCells(ht,Le,de);const st=Le.findAncestor("table");removeEmptyRowsColumns(st,t),de.setSelection(Le,"in")})}}function mergeTableCells(me,u,t){isEmpty$1(me)||(isEmpty$1(u)&&t.remove(t.createRangeIn(u)),t.move(t.createRangeIn(me),t.createPositionAt(u,"end"))),t.remove(me)}function isEmpty$1(me){const u=me.getChild(0);return me.childCount==1&&u.is("element","paragraph")&&u.isEmpty}function getMergeDimensions(me,u,t){let de=0,pe=0;for(const ht of u){const{row:mt,column:gt}=t.getCellLocation(ht);de=getMaxOffset(ht,gt,de,"colspan"),pe=getMaxOffset(ht,mt,pe,"rowspan")}const{row:Le,column:Ye}=t.getCellLocation(me),tt=de-Ye,st=pe-Le;return{mergeWidth:tt,mergeHeight:st}}function getMaxOffset(me,u,t,de){const pe=parseInt(me.getAttribute(de)||"1");return Math.max(t,u+pe)}class SelectRowCommand extends Command{constructor(u){super(u),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),de=t.getSelectionAffectedTableCells(u.document.selection),pe=t.getRowIndexes(de),Le=de[0].findAncestor("table"),Ye=[];for(let tt=pe.first;tt<=pe.last;tt++)for(const st of Le.getChild(tt).getChildren())Ye.push(u.createRangeOn(st));u.change(tt=>{tt.setSelection(Ye)})}}class SelectColumnCommand extends Command{constructor(u){super(u),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const u=this.editor.plugins.get("TableUtils"),t=this.editor.model,de=u.getSelectionAffectedTableCells(t.document.selection),pe=de[0],Le=de.pop(),Ye=pe.findAncestor("table"),tt=u.getCellLocation(pe),st=u.getCellLocation(Le),ht=Math.min(tt.column,st.column),mt=Math.max(tt.column,st.column),gt=[];for(const bt of new TableWalker(Ye,{startColumn:ht,endColumn:mt}))gt.push(t.createRangeOn(bt.cell));t.change(bt=>{bt.setSelection(gt)})}}function injectTableLayoutPostFixer(me){me.document.registerPostFixer(u=>tableLayoutPostFixer(u,me))}function tableLayoutPostFixer(me,u){const t=u.document.differ.getChanges();let de=!1;const pe=new Set;for(const Le of t){let Ye=null;Le.type=="insert"&&Le.name=="table"&&(Ye=Le.position.nodeAfter),(Le.type=="insert"||Le.type=="remove")&&(Le.name=="tableRow"||Le.name=="tableCell")&&(Ye=Le.position.findAncestor("table")),isTableAttributeEntry(Le)&&(Ye=Le.range.start.findAncestor("table")),Ye&&!pe.has(Ye)&&(de=fixTableCellsRowspan(Ye,me)||de,de=fixTableRowsSizes(Ye,me)||de,pe.add(Ye))}return de}function fixTableCellsRowspan(me,u){let t=!1;const de=findCellsToTrim(me);if(de.length){t=!0;for(const pe of de)updateNumericAttribute("rowspan",pe.rowspan,pe.cell,u,1)}return t}function fixTableRowsSizes(me,u){let t=!1;const de=getChildrenLengths(me),pe=[];for(const[st,ht]of de.entries())!ht&&me.getChild(st).is("element","tableRow")&&pe.push(st);if(pe.length){t=!0;for(const st of pe.reverse())u.remove(me.getChild(st)),de.splice(st,1)}const Le=de.filter((st,ht)=>me.getChild(ht).is("element","tableRow")),Ye=Le[0];if(!Le.every(st=>st===Ye)){const st=Le.reduce((ht,mt)=>mt>ht?mt:ht,0);for(const[ht,mt]of Le.entries()){const gt=st-mt;if(gt){for(let bt=0;bt<gt;bt++)createEmptyTableCell(u,u.createPositionAt(me.getChild(ht),"end"));t=!0}}}return t}function findCellsToTrim(me){const u=parseInt(me.getAttribute("headingRows")||"0"),t=Array.from(me.getChildren()).reduce((pe,Le)=>Le.is("element","tableRow")?pe+1:pe,0),de=[];for(const{row:pe,cell:Le,cellHeight:Ye}of new TableWalker(me)){if(Ye<2)continue;const st=pe<u?u:t;if(pe+Ye>st){const ht=st-pe;de.push({cell:Le,rowspan:ht})}}return de}function getChildrenLengths(me){const u=new Array(me.childCount).fill(0);for(const{rowIndex:t}of new TableWalker(me,{includeAllSlots:!0}))u[t]++;return u}function isTableAttributeEntry(me){if(me.type!=="attribute")return!1;const u=me.attributeKey;return u==="headingRows"||u==="colspan"||u==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCellParagraphPostFixer(me){me.document.registerPostFixer(u=>tableCellContentsPostFixer(u,me))}function tableCellContentsPostFixer(me,u){const t=u.document.differ.getChanges();let de=!1;for(const pe of t)pe.type=="insert"&&pe.name=="table"&&(de=fixTable(pe.position.nodeAfter,me)||de),pe.type=="insert"&&pe.name=="tableRow"&&(de=fixTableRow(pe.position.nodeAfter,me)||de),pe.type=="insert"&&pe.name=="tableCell"&&(de=fixTableCellContent(pe.position.nodeAfter,me)||de),(pe.type=="remove"||pe.type=="insert")&&checkTableCellChange(pe)&&(de=fixTableCellContent(pe.position.parent,me)||de);return de}function fixTable(me,u){let t=!1;for(const de of me.getChildren())de.is("element","tableRow")&&(t=fixTableRow(de,u)||t);return t}function fixTableRow(me,u){let t=!1;for(const de of me.getChildren())t=fixTableCellContent(de,u)||t;return t}function fixTableCellContent(me,u){if(me.childCount==0)return u.insertElement("paragraph",me),!0;const t=Array.from(me.getChildren()).filter(de=>de.is("$text"));for(const de of t)u.wrap(u.createRangeOn(de),"paragraph");return!!t.length}function checkTableCellChange(me){return me.position.parent.is("element","tableCell")?me.type=="insert"&&me.name=="$text"||me.type=="remove":!1}function tableHeadingsRefreshHandler(me,u){const t=me.document.differ;for(const de of t.getChanges()){let pe,Le=!1;if(de.type=="attribute"){const ht=de.range.start.nodeAfter;if(!ht||!ht.is("element","table")||de.attributeKey!="headingRows"&&de.attributeKey!="headingColumns")continue;pe=ht,Le=de.attributeKey=="headingRows"}else(de.name=="tableRow"||de.name=="tableCell")&&(pe=de.position.findAncestor("table"),Le=de.name=="tableRow");if(!pe)continue;const Ye=pe.getAttribute("headingRows")||0,tt=pe.getAttribute("headingColumns")||0,st=new TableWalker(pe);for(const ht of st){const gt=ht.row<Ye||ht.column<tt?"th":"td",bt=u.mapper.toViewElement(ht.cell);bt&&bt.is("element")&&bt.name!=gt&&u.reconvertItem(Le?ht.cell.parent:ht.cell)}}}function tableCellRefreshHandler(me,u){const t=me.document.differ,de=new Set;for(const pe of t.getChanges()){const Le=pe.type=="attribute"?pe.range.start.parent:pe.position.parent;Le.is("element","tableCell")&&de.add(Le)}for(const pe of de.values()){const Le=Array.from(pe.getChildren()).filter(Ye=>shouldRefresh(Ye,u.mapper));for(const Ye of Le)u.reconvertItem(Ye)}}function shouldRefresh(me,u){if(!me.is("element","paragraph"))return!1;const t=u.toViewElement(me);return t?isSingleParagraphWithoutAttributes(me)!==t.is("element","span"):!1}class TableEditing extends Plugin{constructor(t){super(t);wt(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils]}init(){const t=this.editor,de=t.model,pe=de.schema,Le=t.conversion,Ye=t.plugins.get(TableUtils);pe.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),pe.register("tableRow",{allowIn:"table",isLimit:!0}),pe.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),Le.for("upcast").add(upcastTableFigure()),Le.for("upcast").add(upcastTable()),Le.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(Ye,{asWidget:!0,additionalSlots:this._additionalSlots})}),Le.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(Ye,{additionalSlots:this._additionalSlots})}),Le.for("upcast").elementToElement({model:"tableRow",view:"tr"}),Le.for("upcast").add(skipEmptyTableRow()),Le.for("downcast").elementToElement({model:"tableRow",view:downcastRow()}),Le.for("upcast").elementToElement({model:"tableCell",view:"td"}),Le.for("upcast").elementToElement({model:"tableCell",view:"th"}),Le.for("upcast").add(ensureParagraphInTableCell("td")),Le.for("upcast").add(ensureParagraphInTableCell("th")),Le.for("editingDowncast").elementToElement({model:"tableCell",view:downcastCell({asWidget:!0})}),Le.for("dataDowncast").elementToElement({model:"tableCell",view:downcastCell()}),Le.for("editingDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell({asWidget:!0}),converterPriority:"high"}),Le.for("dataDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell(),converterPriority:"high"}),Le.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),Le.for("upcast").attributeToAttribute({model:{key:"colspan",value:upcastCellSpan("colspan")},view:"colspan"}),Le.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),Le.for("upcast").attributeToAttribute({model:{key:"rowspan",value:upcastCellSpan("rowspan")},view:"rowspan"}),t.config.define("table.defaultHeadings.rows",0),t.config.define("table.defaultHeadings.columns",0),t.commands.add("insertTable",new InsertTableCommand(t)),t.commands.add("insertTableRowAbove",new InsertRowCommand(t,{order:"above"})),t.commands.add("insertTableRowBelow",new InsertRowCommand(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new InsertColumnCommand(t,{order:"left"})),t.commands.add("insertTableColumnRight",new InsertColumnCommand(t,{order:"right"})),t.commands.add("removeTableRow",new RemoveRowCommand(t)),t.commands.add("removeTableColumn",new RemoveColumnCommand(t)),t.commands.add("splitTableCellVertically",new SplitCellCommand(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new SplitCellCommand(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new MergeCellsCommand(t)),t.commands.add("mergeTableCellRight",new MergeCellCommand(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new MergeCellCommand(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new MergeCellCommand(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new MergeCellCommand(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new SetHeaderColumnCommand(t)),t.commands.add("setTableRowHeader",new SetHeaderRowCommand(t)),t.commands.add("selectTableRow",new SelectRowCommand(t)),t.commands.add("selectTableColumn",new SelectColumnCommand(t)),injectTableLayoutPostFixer(de),injectTableCellParagraphPostFixer(de),this.listenTo(de.document,"change:data",()=>{tableHeadingsRefreshHandler(de,t.editing),tableCellRefreshHandler(de,t.editing)})}registerAdditionalSlot(t){this._additionalSlots.push(t)}}function upcastCellSpan(me){return u=>{const t=parseInt(u.getAttribute(me));return Number.isNaN(t)||t<=0?null:t}}class InsertTableView extends View{constructor(t){super(t);wt(this,"items");wt(this,"keystrokes");wt(this,"focusTracker");const de=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(pe,Le)=>`${Le}  ${pe}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":de.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:de.to("label")}]}],on:{mousedown:de.to(pe=>{pe.preventDefault()}),click:de.to(()=>{this.fire("execute")})}}),this.on("boxover",(pe,Le)=>{const{row:Ye,column:tt}=Le.target.dataset;this.items.get((parseInt(Ye,10)-1)*10+(parseInt(tt,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(pe,Le,Ye)=>{if(!Ye)return;const{row:tt,column:st}=Ye.dataset;this.set({rows:parseInt(tt),columns:parseInt(st)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const t=this.rows,de=this.columns;this.items.map((pe,Le)=>{const Ye=Math.floor(Le/10),tt=Le%10,st=Ye<t&&tt<de;pe.set("isOn",st)})}_createGridButton(t,de,pe,Le){const Ye=new ButtonView(t);return Ye.set({label:Le,class:"ck-insert-table-dropdown-grid-box"}),Ye.extendTemplate({attributes:{"data-row":de,"data-column":pe}}),Ye}_createGridCollection(){const t=[];for(let de=0;de<100;de++){const pe=Math.floor(de/10),Le=de%10,Ye=`${pe+1}  ${Le+1}`;t.push(this._createGridButton(this.locale,pe+1,Le+1,Ye))}return this.createCollection(t)}}var tableColumnIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tableRowIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',tableMergeCellIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class TableUI extends Plugin{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t,pe=u.locale.contentLanguageDirection==="ltr";u.ui.componentFactory.add("insertTable",Le=>{const Ye=u.commands.get("insertTable"),tt=createDropdown(Le);tt.bind("isEnabled").to(Ye),tt.buttonView.set({icon:icons.table,label:t("Insert table"),tooltip:!0});let st;return tt.on("change:isOpen",()=>{st||(st=new InsertTableView(Le),tt.panelView.children.add(st),st.delegate("execute").to(tt),tt.on("execute",()=>{u.execute("insertTable",{rows:st.rows,columns:st.columns}),u.editing.view.focus()}))}),tt}),u.ui.componentFactory.add("menuBar:insertTable",Le=>{const Ye=u.commands.get("insertTable"),tt=new MenuBarMenuView(Le),st=new InsertTableView(Le);return st.delegate("execute").to(tt),tt.on("change:isOpen",(ht,mt,gt)=>{gt||st.reset()}),st.on("execute",()=>{u.execute("insertTable",{rows:st.rows,columns:st.columns}),u.editing.view.focus()}),tt.buttonView.set({label:t("Table"),icon:icons.table}),tt.panelView.children.add(st),tt.bind("isEnabled").to(Ye),tt}),u.ui.componentFactory.add("tableColumn",Le=>{const Ye=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:pe?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:pe?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),tableColumnIcon,Ye,Le)}),u.ui.componentFactory.add("tableRow",Le=>{const Ye=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),tableRowIcon,Ye,Le)}),u.ui.componentFactory.add("mergeTableCells",Le=>{const Ye=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:pe?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:pe?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),tableMergeCellIcon,Ye,Le)})}_prepareDropdown(u,t,de,pe){const Le=this.editor,Ye=createDropdown(pe),tt=this._fillDropdownWithListOptions(Ye,de);return Ye.buttonView.set({label:u,icon:t,tooltip:!0}),Ye.bind("isEnabled").toMany(tt,"isEnabled",(...st)=>st.some(ht=>ht)),this.listenTo(Ye,"execute",st=>{Le.execute(st.source.commandName),st.source instanceof SwitchButtonView||Le.editing.view.focus()}),Ye}_prepareMergeSplitButtonDropdown(u,t,de,pe){const Le=this.editor,Ye=createDropdown(pe,SplitButtonView),tt="mergeTableCells",st=Le.commands.get(tt),ht=this._fillDropdownWithListOptions(Ye,de);return Ye.buttonView.set({label:u,icon:t,tooltip:!0,isEnabled:!0}),Ye.bind("isEnabled").toMany([st,...ht],"isEnabled",(...mt)=>mt.some(gt=>gt)),this.listenTo(Ye.buttonView,"execute",()=>{Le.execute(tt),Le.editing.view.focus()}),this.listenTo(Ye,"execute",mt=>{Le.execute(mt.source.commandName),Le.editing.view.focus()}),Ye}_fillDropdownWithListOptions(u,t){const de=this.editor,pe=[],Le=new Collection;for(const Ye of t)addListOption(Ye,de,pe,Le);return addListToDropdown(u,Le),pe}}function addListOption(me,u,t,de){if(me.type==="button"||me.type==="switchbutton"){const pe=me.model=new Model(me.model),{commandName:Le,bindIsOn:Ye}=me.model,tt=u.commands.get(Le);t.push(tt),pe.set({commandName:Le}),pe.bind("isEnabled").to(tt),Ye&&pe.bind("isOn").to(tt,"value"),pe.set({withText:!0})}de.add(me)}class TableSelection extends Plugin{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils,TableUtils]}init(){const u=this.editor,t=u.model,de=u.editing.view;this.listenTo(t,"deleteContent",(pe,Le)=>this._handleDeleteContent(pe,Le),{priority:"high"}),this.listenTo(de.document,"insertText",(pe,Le)=>this._handleInsertTextEvent(pe,Le),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const u=this.editor.plugins.get(TableUtils),t=this.editor.model.document.selection,de=u.getSelectedTableCells(t);return de.length==0?null:de}getSelectionAsFragment(){const u=this.editor.plugins.get(TableUtils),t=this.getSelectedTableCells();return t?this.editor.model.change(de=>{const pe=de.createDocumentFragment(),{first:Le,last:Ye}=u.getColumnIndexes(t),{first:tt,last:st}=u.getRowIndexes(t),ht=t[0].findAncestor("table");let mt=st,gt=Ye;if(u.isSelectionRectangular(t)){const vt={firstColumn:Le,lastColumn:Ye,firstRow:tt,lastRow:st};mt=adjustLastRowIndex(ht,vt),gt=adjustLastColumnIndex(ht,vt)}const _t=cropTableToDimensions(ht,{startRow:tt,startColumn:Le,endRow:mt,endColumn:gt},de);return de.insert(_t,pe,0),pe}):null}setCellSelection(u,t){const de=this._getCellsToSelect(u,t);this.editor.model.change(pe=>{pe.setSelection(de.cells.map(Le=>pe.createRangeOn(Le)),{backward:de.backward})})}getFocusCell(){const de=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return de&&de.is("element","tableCell")?de:null}getAnchorCell(){const u=this.editor.model.document.selection,de=first(u.getRanges()).getContainedElement();return de&&de.is("element","tableCell")?de:null}_defineSelectionConverter(){const u=this.editor,t=new Set;u.conversion.for("editingDowncast").add(pe=>pe.on("selection",(Le,Ye,tt)=>{const st=tt.writer;de(st);const ht=this.getSelectedTableCells();if(!ht)return;for(const gt of ht){const bt=tt.mapper.toViewElement(gt);st.addClass("ck-editor__editable_selected",bt),t.add(bt)}const mt=tt.mapper.toViewElement(ht[ht.length-1]);st.setSelection(mt,0)},{priority:"lowest"}));function de(pe){for(const Le of t)pe.removeClass("ck-editor__editable_selected",Le);t.clear()}}_enablePluginDisabling(){const u=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;u.model.change(de=>{const pe=de.createPositionAt(t[0],0),Le=u.model.schema.getNearestSelectionRange(pe);de.setSelection(Le)})}})}_handleDeleteContent(u,t){const de=this.editor.plugins.get(TableUtils),pe=t[0],Le=t[1],Ye=this.editor.model,tt=!Le||Le.direction=="backward",st=de.getSelectedTableCells(pe);st.length&&(u.stop(),Ye.change(ht=>{const mt=st[tt?st.length-1:0];Ye.change(bt=>{for(const _t of st)Ye.deleteContent(bt.createSelection(_t,"in"))});const gt=Ye.schema.getNearestSelectionRange(ht.createPositionAt(mt,0));pe.is("documentSelection")?ht.setSelection(gt):pe.setTo(gt)}))}_handleInsertTextEvent(u,t){const de=this.editor,pe=this.getSelectedTableCells();if(!pe)return;const Le=de.editing.view,Ye=de.editing.mapper,tt=pe.map(st=>Le.createRangeOn(Ye.toViewElement(st)));t.selection=Le.createSelection(tt)}_getCellsToSelect(u,t){const de=this.editor.plugins.get("TableUtils"),pe=de.getCellLocation(u),Le=de.getCellLocation(t),Ye=Math.min(pe.row,Le.row),tt=Math.max(pe.row,Le.row),st=Math.min(pe.column,Le.column),ht=Math.max(pe.column,Le.column),mt=new Array(tt-Ye+1).fill(null).map(()=>[]),gt={startRow:Ye,endRow:tt,startColumn:st,endColumn:ht};for(const{row:vt,cell:Tt}of new TableWalker(u.findAncestor("table"),gt))mt[vt-Ye].push(Tt);const bt=Le.row<pe.row,_t=Le.column<pe.column;return bt&&mt.reverse(),_t&&mt.forEach(vt=>vt.reverse()),{cells:mt.flat(),backward:bt||_t}}}class TableClipboard extends Plugin{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,TableSelection,TableUtils]}init(){const u=this.editor,t=u.editing.view.document;this.listenTo(t,"copy",(de,pe)=>this._onCopyCut(de,pe)),this.listenTo(t,"cut",(de,pe)=>this._onCopyCut(de,pe)),this.listenTo(u.model,"insertContent",(de,[pe,Le])=>this._onInsertContent(de,pe,Le),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(u,t){const de=this.editor.editing.view,pe=this.editor.plugins.get(TableSelection),Le=this.editor.plugins.get(ClipboardMarkersUtils);pe.getSelectedTableCells()&&(u.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),u.stop(),this.editor.model.enqueueChange({isUndoable:u.name==="cut"},()=>{const Ye=Le._copySelectedFragmentWithMarkers(u.name,this.editor.model.document.selection,()=>pe.getSelectionAsFragment());de.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(Ye),method:u.name})})))}_onInsertContent(u,t,de){if(de&&!de.is("documentSelection"))return;const pe=this.editor.model,Le=this.editor.plugins.get(TableUtils),Ye=this.editor.plugins.get(ClipboardMarkersUtils),tt=this.getTableIfOnlyTableInContent(t,pe);if(!tt)return;const st=Le.getSelectionAffectedTableCells(pe.document.selection);if(!st.length){removeEmptyRowsColumns(tt,Le);return}u.stop(),t.is("documentFragment")?Ye._pasteMarkersIntoTransformedElement(t.markers,ht=>this._replaceSelectedCells(tt,st,ht)):this.editor.model.change(ht=>{this._replaceSelectedCells(tt,st,ht)})}_replaceSelectedCells(u,t,de){const pe=this.editor.plugins.get(TableUtils),Le={width:pe.getColumns(u),height:pe.getRows(u)},Ye=prepareTableForPasting(t,Le,de,pe),tt=Ye.lastRow-Ye.firstRow+1,st=Ye.lastColumn-Ye.firstColumn+1,ht={startRow:0,startColumn:0,endRow:Math.min(tt,Le.height)-1,endColumn:Math.min(st,Le.width)-1};u=cropTableToDimensions(u,ht,de);const mt=t[0].findAncestor("table"),gt=this._replaceSelectedCellsWithPasted(u,Le,mt,Ye,de);if(this.editor.plugins.get("TableSelection").isEnabled){const bt=pe.sortRanges(gt.map(_t=>de.createRangeOn(_t)));de.setSelection(bt)}else de.setSelection(gt[0],0);return mt}_replaceSelectedCellsWithPasted(u,t,de,pe,Le){const{width:Ye,height:tt}=t,st=createLocationMap(u,Ye,tt),ht=[...new TableWalker(de,{startRow:pe.firstRow,endRow:pe.lastRow,startColumn:pe.firstColumn,endColumn:pe.lastColumn,includeAllSlots:!0})],mt=[];let gt;for(const St of ht){const{row:Rt,column:Pt}=St;Pt===pe.firstColumn&&(gt=St.getPositionBefore());const Ot=Rt-pe.firstRow,Mt=Pt-pe.firstColumn,Bt=st[Ot%tt][Mt%Ye],Dt=Bt?Le.cloneElement(Bt):null,$t=this._replaceTableSlotCell(St,Dt,gt,Le);$t&&(trimTableCellIfNeeded($t,Rt,Pt,pe.lastRow,pe.lastColumn,Le),mt.push($t),gt=Le.createPositionAfter($t))}const bt=parseInt(de.getAttribute("headingRows")||"0"),_t=parseInt(de.getAttribute("headingColumns")||"0"),vt=pe.firstRow<bt&&bt<=pe.lastRow,Tt=pe.firstColumn<_t&&_t<=pe.lastColumn;if(vt){const St={first:pe.firstColumn,last:pe.lastColumn},Rt=doHorizontalSplit(de,bt,St,Le,pe.firstRow);mt.push(...Rt)}if(Tt){const St={first:pe.firstRow,last:pe.lastRow},Rt=doVerticalSplit(de,_t,St,Le);mt.push(...Rt)}return mt}_replaceTableSlotCell(u,t,de,pe){const{cell:Le,isAnchor:Ye}=u;return Ye&&pe.remove(Le),t?(pe.insert(t,de),t):null}getTableIfOnlyTableInContent(u,t){if(!u.is("documentFragment")&&!u.is("element"))return null;if(u.is("element","table"))return u;if(u.childCount==1&&u.getChild(0).is("element","table"))return u.getChild(0);const de=t.createRangeIn(u);for(const pe of de.getItems())if(pe.is("element","table")){const Le=t.createRange(de.start,t.createPositionBefore(pe));if(t.hasContent(Le,{ignoreWhitespaces:!0}))return null;const Ye=t.createRange(t.createPositionAfter(pe),de.end);return t.hasContent(Ye,{ignoreWhitespaces:!0})?null:pe}return null}}function prepareTableForPasting(me,u,t,de){const pe=me[0].findAncestor("table"),Le=de.getColumnIndexes(me),Ye=de.getRowIndexes(me),tt={firstColumn:Le.first,lastColumn:Le.last,firstRow:Ye.first,lastRow:Ye.last},st=me.length===1;return st&&(tt.lastRow+=u.height-1,tt.lastColumn+=u.width-1,expandTableSize(pe,tt.lastRow+1,tt.lastColumn+1,de)),st||!de.isSelectionRectangular(me)?splitCellsToRectangularSelection(pe,tt,t):(tt.lastRow=adjustLastRowIndex(pe,tt),tt.lastColumn=adjustLastColumnIndex(pe,tt)),tt}function expandTableSize(me,u,t,de){const pe=de.getColumns(me),Le=de.getRows(me);t>pe&&de.insertColumns(me,{at:pe,columns:t-pe}),u>Le&&de.insertRows(me,{at:Le,rows:u-Le})}function createLocationMap(me,u,t){const de=new Array(t).fill(null).map(()=>new Array(u).fill(null));for(const{column:pe,row:Le,cell:Ye}of new TableWalker(me))de[Le][pe]=Ye;return de}function splitCellsToRectangularSelection(me,u,t){const{firstRow:de,lastRow:pe,firstColumn:Le,lastColumn:Ye}=u,tt={first:de,last:pe},st={first:Le,last:Ye};doVerticalSplit(me,Le,tt,t),doVerticalSplit(me,Ye+1,tt,t),doHorizontalSplit(me,de,st,t),doHorizontalSplit(me,pe+1,st,t,de)}function doHorizontalSplit(me,u,t,de,pe=0){return u<1?void 0:getVerticallyOverlappingCells(me,u,pe).filter(({column:tt,cellWidth:st})=>isAffectedBySelection(tt,st,t)).map(({cell:tt})=>splitHorizontally(tt,u,de))}function doVerticalSplit(me,u,t,de){return u<1?void 0:getHorizontallyOverlappingCells(me,u).filter(({row:Ye,cellHeight:tt})=>isAffectedBySelection(Ye,tt,t)).map(({cell:Ye,column:tt})=>splitVertically(Ye,tt,u,de))}function isAffectedBySelection(me,u,t){const de=me+u-1,{first:pe,last:Le}=t,Ye=me>=pe&&me<=Le,tt=me<pe&&de>=pe;return Ye||tt}class TableKeyboard extends Plugin{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){const u=this.editor,de=u.editing.view.document,pe=u.t;this.listenTo(de,"arrowKey",(...Le)=>this._onArrowKey(...Le),{context:"table"}),this.listenTo(de,"tab",(...Le)=>this._handleTabOnSelectedTable(...Le),{context:"figure"}),this.listenTo(de,"tab",(...Le)=>this._handleTab(...Le),{context:["th","td"]}),u.accessibility.addKeystrokeInfoGroup({id:"table",label:pe("Keystrokes that can be used in a table cell"),keystrokes:[{label:pe("Move the selection to the next cell"),keystroke:"Tab"},{label:pe("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:pe("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:pe("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(u,t){const de=this.editor,Le=de.model.document.selection.getSelectedElement();!Le||!Le.is("element","table")||(t.preventDefault(),t.stopPropagation(),u.stop(),de.model.change(Ye=>{Ye.setSelection(Ye.createRangeIn(Le.getChild(0).getChild(0)))}))}_handleTab(u,t){const de=this.editor,pe=this.editor.plugins.get(TableUtils),Le=this.editor.plugins.get("TableSelection"),Ye=de.model.document.selection,tt=!t.shiftKey;let st=pe.getTableCellsContainingSelection(Ye)[0];if(st||(st=Le.getFocusCell()),!st)return;t.preventDefault(),t.stopPropagation(),u.stop();const ht=st.parent,mt=ht.parent,gt=mt.getChildIndex(ht),bt=ht.getChildIndex(st),_t=bt===0;if(!tt&&_t&&gt===0){de.model.change(Rt=>{Rt.setSelection(Rt.createRangeOn(mt))});return}const vt=bt===ht.childCount-1,Tt=gt===pe.getRows(mt)-1;if(tt&&Tt&&vt&&(de.execute("insertTableRowBelow"),gt===pe.getRows(mt)-1)){de.model.change(Rt=>{Rt.setSelection(Rt.createRangeOn(mt))});return}let St;if(tt&&vt)St=mt.getChild(gt+1).getChild(0);else if(!tt&&_t){const Rt=mt.getChild(gt-1);St=Rt.getChild(Rt.childCount-1)}else St=ht.getChild(bt+(tt?1:-1));de.model.change(Rt=>{Rt.setSelection(Rt.createRangeIn(St))})}_onArrowKey(u,t){const de=this.editor,pe=t.keyCode,Le=getLocalizedArrowKeyCodeDirection(pe,de.locale.contentLanguageDirection);this._handleArrowKeys(Le,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),u.stop())}_handleArrowKeys(u,t){const de=this.editor.plugins.get(TableUtils),pe=this.editor.plugins.get("TableSelection"),Le=this.editor.model,Ye=Le.document.selection,tt=["right","down"].includes(u),st=de.getSelectedTableCells(Ye);if(st.length){let mt;return t?mt=pe.getFocusCell():mt=tt?st[st.length-1]:st[0],this._navigateFromCellInDirection(mt,u,t),!0}const ht=Ye.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!ht)return!1;if(!Ye.isCollapsed)if(t){if(Ye.isBackward==tt&&!Ye.containsEntireContent(ht))return!1}else{const mt=Ye.getSelectedElement();if(!mt||!Le.schema.isObject(mt))return!1}return this._isSelectionAtCellEdge(Ye,ht,tt)?(this._navigateFromCellInDirection(ht,u,t),!0):!1}_isSelectionAtCellEdge(u,t,de){const pe=this.editor.model,Le=this.editor.model.schema,Ye=de?u.getLastPosition():u.getFirstPosition();if(!Le.getLimitElement(Ye).is("element","tableCell"))return pe.createPositionAt(t,de?"end":0).isTouching(Ye);const tt=pe.createSelection(Ye);return pe.modifySelection(tt,{direction:de?"forward":"backward"}),Ye.isEqual(tt.focus)}_navigateFromCellInDirection(u,t,de=!1){const pe=this.editor.model,Le=u.findAncestor("table"),Ye=[...new TableWalker(Le,{includeAllSlots:!0})],{row:tt,column:st}=Ye[Ye.length-1],ht=Ye.find(({cell:Pt})=>Pt==u);let{row:mt,column:gt}=ht;switch(t){case"left":gt--;break;case"up":mt--;break;case"right":gt+=ht.cellWidth;break;case"down":mt+=ht.cellHeight;break}const bt=mt<0||mt>tt,_t=gt<0&&mt<=0,vt=gt>st&&mt>=tt;if(bt||_t||vt){pe.change(Pt=>{Pt.setSelection(Pt.createRangeOn(Le))});return}gt<0?(gt=de?0:st,mt--):gt>st&&(gt=de?st:0,mt++);const Tt=Ye.find(Pt=>Pt.row==mt&&Pt.column==gt).cell,St=["right","down"].includes(t),Rt=this.editor.plugins.get("TableSelection");if(de&&Rt.isEnabled){const Pt=Rt.getAnchorCell()||u;Rt.setCellSelection(Pt,Tt)}else{const Pt=pe.createPositionAt(Tt,St?0:"end");pe.change(Ot=>{Ot.setSelection(Pt)})}}}class MouseEventsObserver extends DomEventObserver{constructor(){super(...arguments);wt(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(t){this.fire(t.type,t)}}class TableMouse extends Plugin{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){this.editor.editing.view.addObserver(MouseEventsObserver),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const u=this.editor,t=u.plugins.get(TableUtils);let de=!1;const pe=u.plugins.get(TableSelection);this.listenTo(u.editing.view.document,"mousedown",(Le,Ye)=>{const tt=u.model.document.selection;if(!this.isEnabled||!pe.isEnabled||!Ye.domEvent.shiftKey)return;const st=pe.getAnchorCell()||t.getTableCellsContainingSelection(tt)[0];if(!st)return;const ht=this._getModelTableCellFromDomEvent(Ye);ht&&haveSameTableParent(st,ht)&&(de=!0,pe.setCellSelection(st,ht),Ye.preventDefault())}),this.listenTo(u.editing.view.document,"mouseup",()=>{de=!1}),this.listenTo(u.editing.view.document,"selectionChange",Le=>{de&&Le.stop()},{priority:"highest"})}_enableMouseDragSelection(){const u=this.editor;let t,de,pe=!1,Le=!1;const Ye=u.plugins.get(TableSelection);this.listenTo(u.editing.view.document,"mousedown",(tt,st)=>{!this.isEnabled||!Ye.isEnabled||st.domEvent.shiftKey||st.domEvent.ctrlKey||st.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(st))}),this.listenTo(u.editing.view.document,"mousemove",(tt,st)=>{if(!st.domEvent.buttons||!t)return;const ht=this._getModelTableCellFromDomEvent(st);ht&&haveSameTableParent(t,ht)&&(de=ht,!pe&&de!=t&&(pe=!0)),pe&&(Le=!0,Ye.setCellSelection(t,de),st.preventDefault())}),this.listenTo(u.editing.view.document,"mouseup",()=>{pe=!1,Le=!1,t=null,de=null}),this.listenTo(u.editing.view.document,"selectionChange",tt=>{Le&&tt.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(u){const t=u.target,de=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(de).parent.findAncestor("tableCell",{includeSelf:!0})}}function haveSameTableParent(me,u){return me.parent.parent==u.parent.parent}class Table extends Plugin{static get requires(){return[TableEditing,TableUI,TableSelection,TableMouse,TableKeyboard,TableClipboard,Widget]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function getSelectionAffectedTableWidget(me){const u=getSelectedTableWidget(me);return u||getTableWidgetAncestor(me)}function getSelectedTableWidget(me){const u=me.getSelectedElement();return u&&isTableWidget(u)?u:null}function getTableWidgetAncestor(me){const u=me.getFirstPosition();if(!u)return null;let t=u.parent;for(;t;){if(t.is("element")&&isTableWidget(t))return t;t=t.parent}return null}function isTableWidget(me){return!!me.getCustomProperty("table")&&isWidget(me)}class TableToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t,de=u.plugins.get(WidgetToolbarRepository),pe=u.config.get("table.contentToolbar"),Le=u.config.get("table.tableToolbar");pe&&de.register("tableContent",{ariaLabel:t("Table toolbar"),items:pe,getRelatedElement:getTableWidgetAncestor}),Le&&de.register("table",{ariaLabel:t("Table toolbar"),items:Le,getRelatedElement:getSelectedTableWidget})}}class ColorInputView extends View{constructor(t,de){super(t);wt(this,"options");wt(this,"focusTracker");wt(this,"focusCycler");wt(this,"_focusables");wt(this,"dropdownView");wt(this,"inputView");wt(this,"keystrokes");wt(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=de,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new KeystrokeHandler,this._stillTyping=!1,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(pe,Le,Ye)=>this._setInputValue(Ye))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(t=>{this.focusTracker.add(t.element),this._focusables.add(t)}),this.keystrokes.listenTo(this.element)}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const t=this.locale,de=t.t,pe=this.bindTemplate,Le=this._createColorSelector(t),Ye=createDropdown(t),tt=new View;return tt.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:pe.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",pe.if("value","ck-hidden",st=>st!="")]}}]}),Ye.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),Ye.buttonView.children.add(tt),Ye.buttonView.label=de("Color picker"),Ye.buttonView.tooltip=!0,Ye.panelPosition=t.uiLanguageDirection==="rtl"?"se":"sw",Ye.panelView.children.add(Le),Ye.bind("isEnabled").to(this,"isReadOnly",st=>!st),Ye.on("change:isOpen",(st,ht,mt)=>{mt&&(Le.updateSelectedColors(),Le.showColorGridsFragment())}),Ye}_createInputTextView(){const t=this.locale,de=new InputTextView(t);return de.extendTemplate({on:{blur:de.bindTemplate.to("blur")}}),de.value=this.value,de.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(de),de.on("input",()=>{const pe=de.element.value,Le=this.options.colorDefinitions.find(Ye=>pe===Ye.label);this._stillTyping=!0,this.value=Le&&Le.color||pe}),de.on("blur",()=>{this._stillTyping=!1,this._setInputValue(de.element.value)}),de.delegate("input").to(this),de}_createColorSelector(t){const de=t.t,pe=this.options.defaultColorValue||"",Le=de(pe?"Restore default":"Remove color"),Ye=new ColorSelectorView(t,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:Le,colorPickerLabel:de("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});Ye.appendUI(),Ye.on("execute",(st,ht)=>{if(ht.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=ht.value||pe,this.fire("input"),ht.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let tt=this.value;return Ye.on("colorPicker:cancel",()=>{this.value=tt,this.fire("input"),this.dropdownView.isOpen=!1}),Ye.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{tt=this.value}),Ye.bind("selectedColor").to(this,"value"),Ye}_setInputValue(t){if(!this._stillTyping){const de=normalizeColor(t),pe=this.options.colorDefinitions.find(Le=>de===normalizeColor(Le.color));pe?this.inputView.value=pe.label:this.inputView.value=t||""}}}function normalizeColor(me){return me.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const isEmpty=me=>me==="";function getBorderStyleLabels(me){return{none:me("None"),solid:me("Solid"),dotted:me("Dotted"),dashed:me("Dashed"),double:me("Double"),groove:me("Groove"),ridge:me("Ridge"),inset:me("Inset"),outset:me("Outset")}}function getLocalizedColorErrorText(me){return me('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function getLocalizedLengthErrorText(me){return me('The value is invalid. Try "10px" or "2em" or simply "2".')}function colorFieldValidator(me){return me=me.trim().toLowerCase(),isEmpty(me)||isColor(me)}function lengthFieldValidator(me){return me=me.trim(),isEmpty(me)||isNumberString(me)||isLength(me)||isPercentage(me)}function lineWidthFieldValidator(me){return me=me.trim(),isEmpty(me)||isNumberString(me)||isLength(me)}function getBorderStyleDefinitions(me,u){const t=new Collection,de=getBorderStyleLabels(me.t);for(const pe in de){const Le={type:"button",model:new Model({_borderStyleValue:pe,label:de[pe],role:"menuitemradio",withText:!0})};pe==="none"?Le.model.bind("isOn").to(me,"borderStyle",Ye=>u==="none"?!Ye:Ye===pe):Le.model.bind("isOn").to(me,"borderStyle",Ye=>Ye===pe),t.add(Le)}return t}function fillToolbar(me){const{view:u,icons:t,toolbar:de,labels:pe,propertyName:Le,nameToValue:Ye,defaultValue:tt}=me;for(const st in pe){const ht=new ButtonView(u.locale);ht.set({role:"radio",isToggleable:!0,label:pe[st],icon:t[st],tooltip:pe[st]});const mt=Ye?Ye(st):st;ht.bind("isOn").to(u,Le,gt=>{let bt=gt;return gt===""&&tt&&(bt=tt),mt===bt}),ht.on("execute",()=>{u[Le]=mt}),de.items.add(ht)}}const defaultColors=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function getLabeledColorInputCreator(me){return(u,t,de)=>{const pe=new ColorInputView(u.locale,{colorDefinitions:colorConfigToColorGridDefinitions(me.colorConfig),columns:me.columns,defaultColorValue:me.defaultColorValue,colorPickerConfig:me.colorPickerConfig});return pe.inputView.set({id:t,ariaDescribedById:de}),pe.bind("isReadOnly").to(u,"isEnabled",Le=>!Le),pe.bind("hasError").to(u,"errorText",Le=>!!Le),pe.on("input",()=>{u.errorText=null}),u.bind("isEmpty","isFocused").to(pe),pe}}function isNumberString(me){const u=parseFloat(me);return!Number.isNaN(u)&&me===String(u)}function colorConfigToColorGridDefinitions(me){return me.map(u=>({color:u.model,label:u.label,options:{hasBorder:u.hasBorder}}))}class FormRowView extends View{constructor(t,de={}){super(t);wt(this,"children");const pe=this.bindTemplate;this.set("class",de.class||null),this.children=this.createCollection(),de.children&&de.children.forEach(Le=>this.children.add(Le)),this.set("_role",null),this.set("_ariaLabelledBy",null),de.labelView&&this.set({_role:"group",_ariaLabelledBy:de.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",pe.to("class")],role:pe.to("_role"),"aria-labelledby":pe.to("_ariaLabelledBy")},children:this.children})}}class TableCellPropertiesView extends View{constructor(t,de){super(t);wt(this,"options");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"children");wt(this,"borderStyleDropdown");wt(this,"borderWidthInput");wt(this,"borderColorInput");wt(this,"backgroundInput");wt(this,"paddingInput");wt(this,"widthInput");wt(this,"heightInput");wt(this,"horizontalAlignmentToolbar");wt(this,"verticalAlignmentToolbar");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"_focusables");wt(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=de;const{borderStyleDropdown:pe,borderWidthInput:Le,borderColorInput:Ye,borderRowLabel:tt}=this._createBorderFields(),{backgroundRowLabel:st,backgroundInput:ht}=this._createBackgroundFields(),{widthInput:mt,operatorLabel:gt,heightInput:bt,dimensionsLabel:_t}=this._createDimensionFields(),{horizontalAlignmentToolbar:vt,verticalAlignmentToolbar:Tt,alignmentLabel:St}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=pe,this.borderWidthInput=Le,this.borderColorInput=Ye,this.backgroundInput=ht,this.paddingInput=this._createPaddingField(),this.widthInput=mt,this.heightInput=bt,this.horizontalAlignmentToolbar=vt,this.verticalAlignmentToolbar=Tt;const{saveButtonView:Rt,cancelButtonView:Pt}=this._createActionButtons();this.saveButtonView=Rt,this.cancelButtonView=Pt,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(t,{label:this.t("Cell properties")})),this.children.add(new FormRowView(t,{labelView:tt,children:[tt,pe,Ye,Le],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(t,{labelView:st,children:[st,ht],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(t,{children:[new FormRowView(t,{labelView:_t,children:[_t,mt,gt,bt],class:"ck-table-form__dimensions-row"}),new FormRowView(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new FormRowView(t,{labelView:St,children:[St,vt,Tt],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new FormRowView(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableCellProperties,de={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},pe=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:de.color,colorPickerConfig:this.options.colorPickerConfig}),Le=this.locale,Ye=this.t,tt=Ye("Style"),st=new LabelView(Le);st.text=Ye("Border");const ht=getBorderStyleLabels(Ye),mt=new LabeledFieldView(Le,createLabeledDropdown);mt.set({label:tt,class:"ck-table-form__border-style"}),mt.fieldView.buttonView.set({ariaLabel:tt,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:tt}),mt.fieldView.buttonView.bind("label").to(this,"borderStyle",_t=>ht[_t||"none"]),mt.fieldView.on("execute",_t=>{this.borderStyle=_t.source._borderStyleValue}),mt.bind("isEmpty").to(this,"borderStyle",_t=>!_t),addListToDropdown(mt.fieldView,getBorderStyleDefinitions(this,de.style),{role:"menu",ariaLabel:tt});const gt=new LabeledFieldView(Le,createLabeledInputText);gt.set({label:Ye("Width"),class:"ck-table-form__border-width"}),gt.fieldView.bind("value").to(this,"borderWidth"),gt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),gt.fieldView.on("input",()=>{this.borderWidth=gt.fieldView.element.value});const bt=new LabeledFieldView(Le,pe);return bt.set({label:Ye("Color"),class:"ck-table-form__border-color"}),bt.fieldView.bind("value").to(this,"borderColor"),bt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),bt.fieldView.on("input",()=>{this.borderColor=bt.fieldView.value}),this.on("change:borderStyle",(_t,vt,Tt,St)=>{isBorderStyleSet$1(Tt)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet$1(St)||(this.borderColor=de.color,this.borderWidth=de.width)}),{borderRowLabel:st,borderStyleDropdown:mt,borderColorInput:bt,borderWidthInput:gt}}_createBackgroundFields(){const t=this.locale,de=this.t,pe=new LabelView(t);pe.text=de("Background");const Le=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),Ye=new LabeledFieldView(t,Le);return Ye.set({label:de("Color"),class:"ck-table-cell-properties-form__background"}),Ye.fieldView.bind("value").to(this,"backgroundColor"),Ye.fieldView.on("input",()=>{this.backgroundColor=Ye.fieldView.value}),{backgroundRowLabel:pe,backgroundInput:Ye}}_createDimensionFields(){const t=this.locale,de=this.t,pe=new LabelView(t);pe.text=de("Dimensions");const Le=new LabeledFieldView(t,createLabeledInputText);Le.set({label:de("Width"),class:"ck-table-form__dimensions-row__width"}),Le.fieldView.bind("value").to(this,"width"),Le.fieldView.on("input",()=>{this.width=Le.fieldView.element.value});const Ye=new View(t);Ye.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const tt=new LabeledFieldView(t,createLabeledInputText);return tt.set({label:de("Height"),class:"ck-table-form__dimensions-row__height"}),tt.fieldView.bind("value").to(this,"height"),tt.fieldView.on("input",()=>{this.height=tt.fieldView.element.value}),{dimensionsLabel:pe,widthInput:Le,operatorLabel:Ye,heightInput:tt}}_createPaddingField(){const t=this.locale,de=this.t,pe=new LabeledFieldView(t,createLabeledInputText);return pe.set({label:de("Padding"),class:"ck-table-cell-properties-form__padding"}),pe.fieldView.bind("value").to(this,"padding"),pe.fieldView.on("input",()=>{this.padding=pe.fieldView.element.value}),pe}_createAlignmentFields(){const t=this.locale,de=this.t,pe=new LabelView(t),Le={left:icons.alignLeft,center:icons.alignCenter,right:icons.alignRight,justify:icons.alignJustify,top:icons.alignTop,middle:icons.alignMiddle,bottom:icons.alignBottom};pe.text=de("Table cell text alignment");const Ye=new ToolbarView(t),tt=t.contentLanguageDirection==="rtl";Ye.set({isCompact:!0,role:"radiogroup",ariaLabel:de("Horizontal text alignment toolbar")}),fillToolbar({view:this,icons:Le,toolbar:Ye,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:ht=>{if(tt){if(ht==="left")return"right";if(ht==="right")return"left"}return ht},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const st=new ToolbarView(t);return st.set({isCompact:!0,role:"radiogroup",ariaLabel:de("Vertical text alignment toolbar")}),fillToolbar({view:this,icons:Le,toolbar:st,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:Ye,verticalAlignmentToolbar:st,alignmentLabel:pe}}_createActionButtons(){const t=this.locale,de=this.t,pe=new ButtonView(t),Le=new ButtonView(t),Ye=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return pe.set({label:de("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),pe.bind("isEnabled").toMany(Ye,"errorText",(...tt)=>tt.every(st=>!st)),Le.set({label:de("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),Le.delegate("execute").to(this,"cancel"),{saveButtonView:pe,cancelButtonView:Le}}get _horizontalAlignmentLabels(){const t=this.locale,de=this.t,pe=de("Align cell text to the left"),Le=de("Align cell text to the center"),Ye=de("Align cell text to the right"),tt=de("Justify cell text");return t.uiLanguageDirection==="rtl"?{right:Ye,center:Le,left:pe,justify:tt}:{left:pe,center:Le,right:Ye,justify:tt}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("Align cell text to the top"),middle:t("Align cell text to the middle"),bottom:t("Align cell text to the bottom")}}}function isBorderStyleSet$1(me){return me!=="none"}const BALLOON_POSITIONS=[BalloonPanelView.defaultPositions.northArrowSouth,BalloonPanelView.defaultPositions.northArrowSouthWest,BalloonPanelView.defaultPositions.northArrowSouthEast,BalloonPanelView.defaultPositions.southArrowNorth,BalloonPanelView.defaultPositions.southArrowNorthWest,BalloonPanelView.defaultPositions.southArrowNorthEast,BalloonPanelView.defaultPositions.viewportStickyNorth];function repositionContextualBalloon(me,u){const t=me.plugins.get("ContextualBalloon"),de=me.editing.view.document.selection;let pe;u==="cell"?getTableWidgetAncestor(de)&&(pe=getBalloonCellPositionData(me)):getSelectionAffectedTableWidget(de)&&(pe=getBalloonTablePositionData(me)),pe&&t.updatePosition(pe)}function getBalloonTablePositionData(me){const u=me.model.document.selection,t=getSelectionAffectedTable(u),de=me.editing.mapper.toViewElement(t);return{target:me.editing.view.domConverter.mapViewToDom(de),positions:BALLOON_POSITIONS}}function getBalloonCellPositionData(me){const u=me.editing.mapper,t=me.editing.view.domConverter,de=me.model.document.selection;if(de.rangeCount>1)return{target:()=>createBoundingRect(de.getRanges(),me),positions:BALLOON_POSITIONS};const pe=getTableCellAtPosition(de.getFirstPosition()),Le=u.toViewElement(pe);return{target:t.mapViewToDom(Le),positions:BALLOON_POSITIONS}}function getTableCellAtPosition(me){return me.nodeAfter&&me.nodeAfter.is("element","tableCell")?me.nodeAfter:me.findAncestor("tableCell")}function createBoundingRect(me,u){const t=u.editing.mapper,de=u.editing.view.domConverter,pe=Array.from(me).map(Le=>{const Ye=getTableCellAtPosition(Le.start),tt=t.toViewElement(Ye);return new Rect(de.mapViewToDom(tt))});return Rect.getBoundingRect(pe)}var tableCellProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function getSingleValue(me){if(!me||!isObject$2(me))return me;const{top:u,right:t,bottom:de,left:pe}=me;if(u==t&&t==de&&de==pe)return u}function addDefaultUnitToNumericValue(me,u){const t=parseFloat(me);return Number.isNaN(t)||String(t)!==String(me)?me:`${t}${u}`}function getNormalizedDefaultProperties(me,u={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...me};return u.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),u.includePaddingProperty&&!t.padding&&(t.padding=""),u.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),u.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=u.isRightToLeftContent?"right":"left"),t}function getNormalizedDefaultTableProperties(me,u){return getNormalizedDefaultProperties({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...me},u)}function getNormalizedDefaultCellProperties(me,u){return getNormalizedDefaultProperties({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...me},u)}const ERROR_TEXT_TIMEOUT$1=500,propertyToCommandMap$1={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class TableCellPropertiesUI extends Plugin{constructor(t){super(t);wt(this,"_defaultTableCellProperties");wt(this,"_balloon");wt(this,"view");wt(this,"_undoStepBatch");wt(this,"_isReady");t.config.define("table.tableCellProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.t;this._defaultTableCellProperties=getNormalizedDefaultCellProperties(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"}),this._balloon=t.plugins.get(ContextualBalloon),this.view=null,this._isReady=!1,t.ui.componentFactory.add("tableCellProperties",pe=>{const Le=new ButtonView(pe);Le.set({label:de("Cell properties"),icon:tableCellProperties,tooltip:!0}),this.listenTo(Le,"execute",()=>this._showView());const Ye=Object.values(propertyToCommandMap$1).map(tt=>t.commands.get(tt));return Le.bind("isEnabled").toMany(Ye,"isEnabled",(...tt)=>tt.some(st=>st)),Le})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const t=this.editor,de=t.config.get("table.tableCellProperties"),pe=normalizeColorOptions(de.borderColors),Le=getLocalizedColorOptions(t.locale,pe),Ye=normalizeColorOptions(de.backgroundColors),tt=getLocalizedColorOptions(t.locale,Ye),st=de.colorPicker!==!1,ht=new TableCellPropertiesView(t.locale,{borderColors:Le,backgroundColors:tt,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:st?de.colorPicker||{}:!1}),mt=t.t;ht.render(),this.listenTo(ht,"submit",()=>{this._hideView()}),this.listenTo(ht,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),ht.keystrokes.set("Esc",(_t,vt)=>{this._hideView(),vt()}),clickOutsideHandler({emitter:ht,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const gt=getLocalizedColorErrorText(mt),bt=getLocalizedLengthErrorText(mt);return ht.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),ht.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ht.borderColorInput,commandName:"tableCellBorderColor",errorText:gt,validator:colorFieldValidator})),ht.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ht.borderWidthInput,commandName:"tableCellBorderWidth",errorText:bt,validator:lineWidthFieldValidator})),ht.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:ht.paddingInput,commandName:"tableCellPadding",errorText:bt,validator:lengthFieldValidator})),ht.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ht.widthInput,commandName:"tableCellWidth",errorText:bt,validator:lengthFieldValidator})),ht.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ht.heightInput,commandName:"tableCellHeight",errorText:bt,validator:lengthFieldValidator})),ht.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ht.backgroundInput,commandName:"tableCellBackgroundColor",errorText:gt,validator:colorFieldValidator})),ht.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),ht.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),ht}_fillViewFormFromCommandValues(){const t=this.editor.commands,de=t.get("tableCellBorderStyle");Object.entries(propertyToCommandMap$1).map(([pe,Le])=>{const Ye=this._defaultTableCellProperties[pe]||"";return[pe,t.get(Le).value||Ye]}).forEach(([pe,Le])=>{(pe==="borderColor"||pe==="borderWidth")&&de.value==="none"||this.view.set(pe,Le)}),this._isReady=!0}_showView(){const t=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonCellPositionData(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,de=t.editing.view.document;getTableWidgetAncestor(de.selection)?this._isViewVisible&&repositionContextualBalloon(t,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(de,pe,Le)=>{this._isReady&&this.editor.execute(t,{value:Le,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:de,viewField:pe,validator:Le,errorText:Ye}=t,tt=debounce(()=>{pe.errorText=Ye},ERROR_TEXT_TIMEOUT$1);return(st,ht,mt)=>{tt.cancel(),this._isReady&&(Le(mt)?(this.editor.execute(de,{value:mt,batch:this._undoStepBatch}),pe.errorText=null):tt())}}}class TableCellPropertyCommand extends Command{constructor(t,de,pe){super(t);wt(this,"attributeName");wt(this,"_defaultValue");this.attributeName=de,this._defaultValue=pe}refresh(){const t=this.editor,pe=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t.model.document.selection);this.isEnabled=!!pe.length,this.value=this._getSingleValue(pe)}execute(t={}){const{value:de,batch:pe}=t,Le=this.editor.model,tt=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(Le.document.selection),st=this._getValueToSet(de);Le.enqueueChange(pe,ht=>{st?tt.forEach(mt=>ht.setAttribute(this.attributeName,st,mt)):tt.forEach(mt=>ht.removeAttribute(this.attributeName,mt))})}_getAttribute(t){if(!t)return;const de=t.getAttribute(this.attributeName);if(de!==this._defaultValue)return de}_getValueToSet(t){if(t!==this._defaultValue)return t}_getSingleValue(t){const de=this._getAttribute(t[0]);return t.every(Le=>this._getAttribute(Le)===de)?de:void 0}}class TableCellWidthCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellWidth",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableCellWidthEditing extends Plugin{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const u=this.editor,t=getNormalizedDefaultCellProperties(u.config.get("table.tableCellProperties.defaultProperties"));enableProperty$1(u.model.schema,u.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),u.commands.add("tableCellWidth",new TableCellWidthCommand(u,t.width))}}class TableCellPaddingCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellPadding",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableCellHeightCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellHeight",t)}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableCellBackgroundColorCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBackgroundColor",t)}}class TableCellVerticalAlignmentCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellVerticalAlignment",t)}}class TableCellHorizontalAlignmentCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellHorizontalAlignment",t)}}class TableCellBorderStyleCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderStyle",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableCellBorderColorCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderColor",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableCellBorderWidthCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderWidth",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}const VALIGN_VALUES_REG_EXP=/^(top|middle|bottom)$/,ALIGN_VALUES_REG_EXP$1=/^(left|center|right|justify)$/;class TableCellPropertiesEditing extends Plugin{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing,TableCellWidthEditing]}init(){const u=this.editor,t=u.model.schema,de=u.conversion;u.config.define("table.tableCellProperties.defaultProperties",{});const pe=getNormalizedDefaultCellProperties(u.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:u.locale.contentLanguageDirection==="rtl"});u.data.addStyleProcessorRules(addBorderRules),enableBorderProperties$1(t,de,{color:pe.borderColor,style:pe.borderStyle,width:pe.borderWidth}),u.commands.add("tableCellBorderStyle",new TableCellBorderStyleCommand(u,pe.borderStyle)),u.commands.add("tableCellBorderColor",new TableCellBorderColorCommand(u,pe.borderColor)),u.commands.add("tableCellBorderWidth",new TableCellBorderWidthCommand(u,pe.borderWidth)),enableProperty$1(t,de,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:pe.height}),u.commands.add("tableCellHeight",new TableCellHeightCommand(u,pe.height)),u.data.addStyleProcessorRules(addPaddingRules),enableProperty$1(t,de,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:pe.padding}),u.commands.add("tableCellPadding",new TableCellPaddingCommand(u,pe.padding)),u.data.addStyleProcessorRules(addBackgroundRules),enableProperty$1(t,de,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:pe.backgroundColor}),u.commands.add("tableCellBackgroundColor",new TableCellBackgroundColorCommand(u,pe.backgroundColor)),enableHorizontalAlignmentProperty(t,de,pe.horizontalAlignment),u.commands.add("tableCellHorizontalAlignment",new TableCellHorizontalAlignmentCommand(u,pe.horizontalAlignment)),enableVerticalAlignmentProperty(t,de,pe.verticalAlignment),u.commands.add("tableCellVerticalAlignment",new TableCellVerticalAlignmentCommand(u,pe.verticalAlignment))}}function enableBorderProperties$1(me,u,t){const de={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};me.extend("tableCell",{allowAttributes:Object.values(de)}),upcastBorderStyles(u,"td",de,t),upcastBorderStyles(u,"th",de,t),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:de.style,styleName:"border-style"}),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:de.color,styleName:"border-color"}),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:de.width,styleName:"border-width"})}function enableHorizontalAlignmentProperty(me,u,t){me.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:de=>({key:"style",value:{"text-align":de}})}),u.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:de=>{const pe=de.getStyle("text-align");return pe===t?null:pe}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:de=>{const pe=de.getAttribute("align");return pe===t?null:pe}}})}function enableVerticalAlignmentProperty(me,u,t){me.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:de=>({key:"style",value:{"vertical-align":de}})}),u.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:de=>{const pe=de.getStyle("vertical-align");return pe===t?null:pe}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:de=>{const pe=de.getAttribute("valign");return pe===t?null:pe}}})}class TableCellProperties extends Plugin{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCellPropertiesEditing,TableCellPropertiesUI]}}class TablePropertyCommand extends Command{constructor(t,de,pe){super(t);wt(this,"attributeName");wt(this,"_defaultValue");this.attributeName=de,this._defaultValue=pe}refresh(){const de=this.editor.model.document.selection,pe=getSelectionAffectedTable(de);this.isEnabled=!!pe,this.value=this._getValue(pe)}execute(t={}){const de=this.editor.model,pe=de.document.selection,{value:Le,batch:Ye}=t,tt=getSelectionAffectedTable(pe),st=this._getValueToSet(Le);de.enqueueChange(Ye,ht=>{st?ht.setAttribute(this.attributeName,st,tt):ht.removeAttribute(this.attributeName,tt)})}_getValue(t){if(!t)return;const de=t.getAttribute(this.attributeName);if(de!==this._defaultValue)return de}_getValueToSet(t){if(t!==this._defaultValue)return t}}class TableBackgroundColorCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBackgroundColor",t)}}class TableBorderColorCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderColor",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableBorderStyleCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderStyle",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableBorderWidthCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderWidth",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableWidthCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableWidth",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableHeightCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableHeight",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableAlignmentCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableAlignment",t)}}const ALIGN_VALUES_REG_EXP=/^(left|center|right)$/,FLOAT_VALUES_REG_EXP=/^(left|none|right)$/;class TablePropertiesEditing extends Plugin{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const u=this.editor,t=u.model.schema,de=u.conversion;u.config.define("table.tableProperties.defaultProperties",{});const pe=getNormalizedDefaultTableProperties(u.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});u.data.addStyleProcessorRules(addBorderRules),enableBorderProperties(t,de,{color:pe.borderColor,style:pe.borderStyle,width:pe.borderWidth}),u.commands.add("tableBorderColor",new TableBorderColorCommand(u,pe.borderColor)),u.commands.add("tableBorderStyle",new TableBorderStyleCommand(u,pe.borderStyle)),u.commands.add("tableBorderWidth",new TableBorderWidthCommand(u,pe.borderWidth)),enableAlignmentProperty(t,de,pe.alignment),u.commands.add("tableAlignment",new TableAlignmentCommand(u,pe.alignment)),enableTableToFigureProperty(t,de,{modelAttribute:"tableWidth",styleName:"width",defaultValue:pe.width}),u.commands.add("tableWidth",new TableWidthCommand(u,pe.width)),enableTableToFigureProperty(t,de,{modelAttribute:"tableHeight",styleName:"height",defaultValue:pe.height}),u.commands.add("tableHeight",new TableHeightCommand(u,pe.height)),u.data.addStyleProcessorRules(addBackgroundRules),enableProperty(t,de,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:pe.backgroundColor}),u.commands.add("tableBackgroundColor",new TableBackgroundColorCommand(u,pe.backgroundColor))}}function enableBorderProperties(me,u,t){const de={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};me.extend("table",{allowAttributes:Object.values(de)}),upcastBorderStyles(u,"table",de,t),downcastTableAttribute(u,{modelAttribute:de.color,styleName:"border-color"}),downcastTableAttribute(u,{modelAttribute:de.style,styleName:"border-style"}),downcastTableAttribute(u,{modelAttribute:de.width,styleName:"border-width"})}function enableAlignmentProperty(me,u,t){me.extend("table",{allowAttributes:["tableAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:de=>({key:"style",value:{float:de==="center"?"none":de}}),converterPriority:"high"}),u.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:FLOAT_VALUES_REG_EXP}},model:{key:"tableAlignment",value:de=>{let pe=de.getStyle("float");return pe==="none"&&(pe="center"),pe===t?null:pe}}}).attributeToAttribute({view:{attributes:{align:ALIGN_VALUES_REG_EXP}},model:{name:"table",key:"tableAlignment",value:de=>{const pe=de.getAttribute("align");return pe===t?null:pe}}})}function enableProperty(me,u,t){const{modelAttribute:de}=t;me.extend("table",{allowAttributes:[de]}),upcastStyleToAttribute(u,{viewElement:"table",...t}),downcastTableAttribute(u,t)}function enableTableToFigureProperty(me,u,t){const{modelAttribute:de}=t;me.extend("table",{allowAttributes:[de]}),upcastStyleToAttribute(u,{viewElement:/^(table|figure)$/,shouldUpcast:pe=>!(pe.name=="table"&&pe.parent.name=="figure"),...t}),downcastAttributeToStyle(u,{modelElement:"table",...t})}class TablePropertiesView extends View{constructor(t,de){super(t);wt(this,"options");wt(this,"focusTracker");wt(this,"keystrokes");wt(this,"children");wt(this,"borderStyleDropdown");wt(this,"borderWidthInput");wt(this,"borderColorInput");wt(this,"backgroundInput");wt(this,"widthInput");wt(this,"heightInput");wt(this,"alignmentToolbar");wt(this,"saveButtonView");wt(this,"cancelButtonView");wt(this,"_focusables");wt(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=de;const{borderStyleDropdown:pe,borderWidthInput:Le,borderColorInput:Ye,borderRowLabel:tt}=this._createBorderFields(),{backgroundRowLabel:st,backgroundInput:ht}=this._createBackgroundFields(),{widthInput:mt,operatorLabel:gt,heightInput:bt,dimensionsLabel:_t}=this._createDimensionFields(),{alignmentToolbar:vt,alignmentLabel:Tt}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=pe,this.borderWidthInput=Le,this.borderColorInput=Ye,this.backgroundInput=ht,this.widthInput=mt,this.heightInput=bt,this.alignmentToolbar=vt;const{saveButtonView:St,cancelButtonView:Rt}=this._createActionButtons();this.saveButtonView=St,this.cancelButtonView=Rt,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(t,{label:this.t("Table properties")})),this.children.add(new FormRowView(t,{labelView:tt,children:[tt,pe,Ye,Le],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(t,{labelView:st,children:[st,ht],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(t,{children:[new FormRowView(t,{labelView:_t,children:[_t,mt,gt,bt],class:"ck-table-form__dimensions-row"}),new FormRowView(t,{labelView:Tt,children:[Tt,vt],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new FormRowView(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableProperties,de={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},pe=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:de.color,colorPickerConfig:this.options.colorPickerConfig}),Le=this.locale,Ye=this.t,tt=Ye("Style"),st=new LabelView(Le);st.text=Ye("Border");const ht=getBorderStyleLabels(Ye),mt=new LabeledFieldView(Le,createLabeledDropdown);mt.set({label:tt,class:"ck-table-form__border-style"}),mt.fieldView.buttonView.set({ariaLabel:tt,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:tt}),mt.fieldView.buttonView.bind("label").to(this,"borderStyle",_t=>ht[_t||"none"]),mt.fieldView.on("execute",_t=>{this.borderStyle=_t.source._borderStyleValue}),mt.bind("isEmpty").to(this,"borderStyle",_t=>!_t),addListToDropdown(mt.fieldView,getBorderStyleDefinitions(this,de.style),{role:"menu",ariaLabel:tt});const gt=new LabeledFieldView(Le,createLabeledInputText);gt.set({label:Ye("Width"),class:"ck-table-form__border-width"}),gt.fieldView.bind("value").to(this,"borderWidth"),gt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),gt.fieldView.on("input",()=>{this.borderWidth=gt.fieldView.element.value});const bt=new LabeledFieldView(Le,pe);return bt.set({label:Ye("Color"),class:"ck-table-form__border-color"}),bt.fieldView.bind("value").to(this,"borderColor"),bt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),bt.fieldView.on("input",()=>{this.borderColor=bt.fieldView.value}),this.on("change:borderStyle",(_t,vt,Tt,St)=>{isBorderStyleSet(Tt)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet(St)||(this.borderColor=de.color,this.borderWidth=de.width)}),{borderRowLabel:st,borderStyleDropdown:mt,borderColorInput:bt,borderWidthInput:gt}}_createBackgroundFields(){const t=this.locale,de=this.t,pe=new LabelView(t);pe.text=de("Background");const Le=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),Ye=new LabeledFieldView(t,Le);return Ye.set({label:de("Color"),class:"ck-table-properties-form__background"}),Ye.fieldView.bind("value").to(this,"backgroundColor"),Ye.fieldView.on("input",()=>{this.backgroundColor=Ye.fieldView.value}),{backgroundRowLabel:pe,backgroundInput:Ye}}_createDimensionFields(){const t=this.locale,de=this.t,pe=new LabelView(t);pe.text=de("Dimensions");const Le=new LabeledFieldView(t,createLabeledInputText);Le.set({label:de("Width"),class:"ck-table-form__dimensions-row__width"}),Le.fieldView.bind("value").to(this,"width"),Le.fieldView.on("input",()=>{this.width=Le.fieldView.element.value});const Ye=new View(t);Ye.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const tt=new LabeledFieldView(t,createLabeledInputText);return tt.set({label:de("Height"),class:"ck-table-form__dimensions-row__height"}),tt.fieldView.bind("value").to(this,"height"),tt.fieldView.on("input",()=>{this.height=tt.fieldView.element.value}),{dimensionsLabel:pe,widthInput:Le,operatorLabel:Ye,heightInput:tt}}_createAlignmentFields(){const t=this.locale,de=this.t,pe=new LabelView(t);pe.text=de("Alignment");const Le=new ToolbarView(t);return Le.set({role:"radiogroup",isCompact:!0,ariaLabel:de("Table alignment toolbar")}),fillToolbar({view:this,icons:{left:icons.objectLeft,center:icons.objectCenter,right:icons.objectRight},toolbar:Le,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:pe,alignmentToolbar:Le}}_createActionButtons(){const t=this.locale,de=this.t,pe=new ButtonView(t),Le=new ButtonView(t),Ye=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return pe.set({label:de("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),pe.bind("isEnabled").toMany(Ye,"errorText",(...tt)=>tt.every(st=>!st)),Le.set({label:de("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),Le.delegate("execute").to(this,"cancel"),{saveButtonView:pe,cancelButtonView:Le}}get _alignmentLabels(){const t=this.locale,de=this.t,pe=de("Align table to the left"),Le=de("Center table"),Ye=de("Align table to the right");return t.uiLanguageDirection==="rtl"?{right:Ye,center:Le,left:pe}:{left:pe,center:Le,right:Ye}}}function isBorderStyleSet(me){return me!=="none"}var tableProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const ERROR_TEXT_TIMEOUT=500,propertyToCommandMap={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class TablePropertiesUI extends Plugin{constructor(t){super(t);wt(this,"_defaultTableProperties");wt(this,"_balloon");wt(this,"view",null);wt(this,"_undoStepBatch");wt(this,"_isReady");t.config.define("table.tableProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,de=t.t;this._defaultTableProperties=getNormalizedDefaultTableProperties(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=t.plugins.get(ContextualBalloon),t.ui.componentFactory.add("tableProperties",pe=>{const Le=new ButtonView(pe);Le.set({label:de("Table properties"),icon:tableProperties,tooltip:!0}),this.listenTo(Le,"execute",()=>this._showView());const Ye=Object.values(propertyToCommandMap).map(tt=>t.commands.get(tt));return Le.bind("isEnabled").toMany(Ye,"isEnabled",(...tt)=>tt.some(st=>st)),Le})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const t=this.editor,de=t.config.get("table.tableProperties"),pe=normalizeColorOptions(de.borderColors),Le=getLocalizedColorOptions(t.locale,pe),Ye=normalizeColorOptions(de.backgroundColors),tt=getLocalizedColorOptions(t.locale,Ye),st=de.colorPicker!==!1,ht=new TablePropertiesView(t.locale,{borderColors:Le,backgroundColors:tt,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:st?de.colorPicker||{}:!1}),mt=t.t;ht.render(),this.listenTo(ht,"submit",()=>{this._hideView()}),this.listenTo(ht,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),ht.keystrokes.set("Esc",(_t,vt)=>{this._hideView(),vt()}),clickOutsideHandler({emitter:ht,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const gt=getLocalizedColorErrorText(mt),bt=getLocalizedLengthErrorText(mt);return ht.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),ht.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ht.borderColorInput,commandName:"tableBorderColor",errorText:gt,validator:colorFieldValidator})),ht.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ht.borderWidthInput,commandName:"tableBorderWidth",errorText:bt,validator:lineWidthFieldValidator})),ht.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ht.backgroundInput,commandName:"tableBackgroundColor",errorText:gt,validator:colorFieldValidator})),ht.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ht.widthInput,commandName:"tableWidth",errorText:bt,validator:lengthFieldValidator})),ht.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ht.heightInput,commandName:"tableHeight",errorText:bt,validator:lengthFieldValidator})),ht.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),ht}_fillViewFormFromCommandValues(){const t=this.editor.commands,de=t.get("tableBorderStyle");Object.entries(propertyToCommandMap).map(([pe,Le])=>{const Ye=pe,tt=this._defaultTableProperties[Ye]||"";return[Ye,t.get(Le).value||tt]}).forEach(([pe,Le])=>{(pe==="borderColor"||pe==="borderWidth")&&de.value==="none"||this.view.set(pe,Le)}),this._isReady=!0}_showView(){const t=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonTablePositionData(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,de=t.editing.view.document;getSelectionAffectedTableWidget(de.selection)?this._isViewVisible&&repositionContextualBalloon(t,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(de,pe,Le)=>{this._isReady&&this.editor.execute(t,{value:Le,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:de,viewField:pe,validator:Le,errorText:Ye}=t,tt=debounce(()=>{pe.errorText=Ye},ERROR_TEXT_TIMEOUT);return(st,ht,mt)=>{tt.cancel(),this._isReady&&(Le(mt)?(this.editor.execute(de,{value:mt,batch:this._undoStepBatch}),pe.errorText=null):tt())}}}class TableProperties extends Plugin{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TablePropertiesEditing,TablePropertiesUI]}}class TableWidthsCommand extends Command{refresh(){this.isEnabled=!0}execute(u={}){const{model:t,plugins:de}=this.editor;let{table:pe=t.document.selection.getSelectedElement(),columnWidths:Le,tableWidth:Ye}=u;Le&&(Le=Array.isArray(Le)?Le:Le.split(",")),t.change(tt=>{Ye?tt.setAttribute("tableWidth",Ye,pe):tt.removeAttribute("tableWidth",pe);const st=de.get("TableColumnResizeEditing").getColumnGroupElement(pe);if(!Le&&!st)return;if(!Le)return tt.remove(st);const ht=normalizeColumnWidths(Le);if(st)Array.from(st.getChildren()).forEach((mt,gt)=>tt.setAttribute("columnWidth",ht[gt],mt));else{const mt=tt.createElement("tableColumnGroup");ht.forEach(gt=>tt.appendElement("tableColumn",{columnWidth:gt},mt)),tt.append(mt,pe)}})}}function upcastColgroupElement(me){return u=>u.on("element:colgroup",(t,de,pe)=>{const Le=de.modelCursor.findAncestor("table"),Ye=getColumnGroupElement(Le);if(!Ye)return;const tt=getTableColumnElements(Ye),st=me.getColumns(Le);let ht=translateColSpanAttribute(Ye,pe.writer);ht=Array.from({length:st},(mt,gt)=>ht[gt]||"auto"),(ht.length!=tt.length||ht.includes("auto"))&&updateColumnElements(tt,Ye,normalizeColumnWidths(ht),pe.writer)},{priority:"low"})}function downcastTableResizedClass(){return me=>me.on("insert:table",(u,t,de)=>{const pe=de.writer,Le=t.item,Ye=de.mapper.toViewElement(Le),tt=Ye.is("element","table")?Ye:Array.from(Ye.getChildren()).find(ht=>ht.is("element","table"));getColumnGroupElement(Le)?pe.addClass("ck-table-resized",tt):pe.removeClass("ck-table-resized",tt)},{priority:"low"})}class TableColumnResizeEditing extends Plugin{constructor(t){super(t);wt(this,"_isResizingActive");wt(this,"_resizingData");wt(this,"_domEmitter");wt(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(DomEmitterMixin()),this._tableUtilsPlugin=t.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(de,pe,Le)=>{const Ye=Le?"removeClass":"addClass";t.editing.view.change(tt=>{for(const st of t.editing.view.document.roots)tt[Ye]("ck-column-resize_disabled",t.editing.view.document.getRoot(st.rootName))})})}static get requires(){return[TableEditing,TableUtils]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const t=this.editor,de=t.plugins.get("TableColumnResize");t.plugins.get("TableEditing").registerAdditionalSlot({filter:Ye=>Ye.is("element","tableColumnGroup"),positionOffset:0});const Le=new TableWidthsCommand(t);t.commands.add("resizeTableWidth",Le),t.commands.add("resizeColumnWidths",Le),this.bind("_isResizingAllowed").to(t,"isReadOnly",de,"isEnabled",Le,"isEnabled",(Ye,tt,st)=>!Ye&&tt&&st)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(t){return getColumnGroupElement(t)}getTableColumnElements(t){return getTableColumnElements(t)}getTableColumnsWidths(t){return getTableColumnsWidths(t)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const de=this.editor.model;de.document.registerPostFixer(Ye=>{let tt=!1;for(const st of getChangedResizedTables(de)){const ht=this.getColumnGroupElement(st),mt=this.getTableColumnElements(ht),gt=this.getTableColumnsWidths(ht);let bt=normalizeColumnWidths(gt);bt=pe(bt,st,this),!isEqual(gt,bt)&&(updateColumnElements(mt,ht,bt,Ye),tt=!0)}return tt});function pe(Ye,tt,st){const ht=st._tableUtilsPlugin.getColumns(tt);if(ht-Ye.length===0)return Ye;const gt=Ye.map(_t=>Number(_t.replace("%",""))),bt=Le(st.editor.model.document.differ,tt);for(const _t of bt){const vt=ht-gt.length;if(vt===0)continue;const Tt=vt>0,St=st._tableUtilsPlugin.getCellLocation(_t).column;if(Tt){const Rt=getColumnMinWidthAsPercentage(tt,st.editor),Pt=createFilledArray(vt,Rt);gt.splice(St,0,...Pt)}else{const Rt=gt.splice(St,Math.abs(vt));gt[St]+=sumArray(Rt)}}return gt.map(_t=>_t+"%")}function Le(Ye,tt){const st=new Set;for(const ht of Ye.getChanges())if(ht.type=="insert"&&ht.position.nodeAfter&&ht.position.nodeAfter.name=="tableCell"&&ht.position.nodeAfter.getAncestors().includes(tt))st.add(ht.position.nodeAfter);else if(ht.type=="remove"){const mt=ht.position.nodeBefore||ht.position.nodeAfter;mt.name=="tableCell"&&mt.getAncestors().includes(tt)&&st.add(mt)}return st}}_registerConverters(){const de=this.editor.conversion;de.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:pe=>pe.getStyle("width")}}),de.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:pe=>({name:"figure",key:"style",value:{width:pe}})}),de.elementToElement({model:"tableColumnGroup",view:"colgroup"}),de.elementToElement({model:"tableColumn",view:"col"}),de.for("downcast").add(downcastTableResizedClass()),de.for("upcast").add(upcastColgroupElement(this._tableUtilsPlugin)),de.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:pe=>{const Le=pe.getStyle("width");return!Le||!Le.endsWith("%")&&!Le.endsWith("pt")?"auto":Le}}}),de.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),de.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:pe=>({key:"style",value:{width:pe}})})}_registerResizingListeners(){const t=this.editor.editing.view;t.addObserver(MouseEventsObserver),t.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(global$1.window.document,"mousemove",throttle(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(global$1.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(t,de){const pe=de.target;if(!pe.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const Le=this.editor,Ye=Le.editing.mapper.toModelElement(pe.findAncestor("figure"));if(!Le.model.canEditAt(Ye))return;de.preventDefault(),t.stop();const tt=mt(Ye,this._tableUtilsPlugin,Le),st=pe.findAncestor("table"),ht=Le.editing.view;Array.from(st.getChildren()).find(_t=>_t.is("element","colgroup"))||ht.change(_t=>{gt(_t,tt,st)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(de,tt),ht.change(_t=>bt(_t,st,this._resizingData));function mt(_t,vt,Tt){const St=Array(vt.getColumns(_t)),Rt=new TableWalker(_t);for(const Pt of Rt){const Ot=Tt.editing.mapper.toViewElement(Pt.cell),Mt=Tt.editing.view.domConverter.mapViewToDom(Ot),Bt=getDomCellOuterWidth(Mt);(!St[Pt.column]||Bt<St[Pt.column])&&(St[Pt.column]=toPrecision(Bt))}return St}function gt(_t,vt,Tt){const St=_t.createContainerElement("colgroup");for(let Rt=0;Rt<vt.length;Rt++){const Pt=_t.createEmptyElement("col"),Ot=`${toPrecision(vt[Rt]/sumArray(vt)*100)}%`;_t.setStyle("width",Ot,Pt),_t.insert(_t.createPositionAt(St,"end"),Pt)}_t.insert(_t.createPositionAt(Tt,0),St)}function bt(_t,vt,Tt){const St=Tt.widths.viewFigureWidth/Tt.widths.viewFigureParentWidth;_t.addClass("ck-table-resized",vt),_t.addClass("ck-table-column-resizer__active",Tt.elements.viewResizer),_t.setStyle("width",`${toPrecision(St*100)}%`,vt.findAncestor("figure"))}}_onMouseMoveHandler(t,de){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:pe,flags:{isRightEdge:Le,isTableCentered:Ye,isLtrContent:tt},elements:{viewFigure:st,viewLeftColumn:ht,viewRightColumn:mt},widths:{viewFigureParentWidth:gt,tableWidth:bt,leftColumnWidth:_t,rightColumnWidth:vt}}=this._resizingData,Tt=-_t+COLUMN_MIN_WIDTH_IN_PIXELS,St=Le?gt-bt:vt-COLUMN_MIN_WIDTH_IN_PIXELS,Rt=(tt?1:-1)*(Le&&Ye?2:1),Pt=clamp((de.clientX-pe)*Rt,Math.min(Tt,0),Math.max(St,0));Pt!==0&&this.editor.editing.view.change(Ot=>{const Mt=toPrecision((_t+Pt)*100/bt);if(Ot.setStyle("width",`${Mt}%`,ht),Le){const Bt=toPrecision((bt+Pt)*100/gt);Ot.setStyle("width",`${Bt}%`,st)}else{const Bt=toPrecision((vt-Pt)*100/bt);Ot.setStyle("width",`${Bt}%`,mt)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:t,modelTable:de,viewFigure:pe,viewColgroup:Le}=this._resizingData.elements,Ye=this.editor,tt=Ye.editing.view,st=this.getColumnGroupElement(de),ht=Array.from(Le.getChildren()).filter(St=>St.is("view:element")),mt=st?this.getTableColumnsWidths(st):null,gt=ht.map(St=>St.getStyle("width")),bt=!isEqual(mt,gt),_t=de.getAttribute("tableWidth"),vt=pe.getStyle("width"),Tt=_t!==vt;(bt||Tt)&&(this._isResizingAllowed?Ye.execute("resizeTableWidth",{table:de,tableWidth:`${toPrecision(vt)}%`,columnWidths:gt}):tt.change(St=>{if(mt)for(const Rt of ht)St.setStyle("width",mt.shift(),Rt);else St.remove(Le);Tt&&(_t?St.setStyle("width",_t,pe):St.removeStyle("width",pe)),!mt&&!_t&&St.removeClass("ck-table-resized",[...pe.getChildren()].find(Rt=>Rt.name==="table"))})),tt.change(St=>{St.removeClass("ck-table-column-resizer__active",t)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(t,de){const pe=this.editor,Le=t.domEvent.clientX,Ye=t.target,tt=Ye.findAncestor("td")||Ye.findAncestor("th"),st=pe.editing.mapper.toModelElement(tt),ht=st.findAncestor("table"),mt=getColumnEdgesIndexes(st,this._tableUtilsPlugin).rightEdge,gt=this._tableUtilsPlugin.getColumns(ht)-1,bt=mt===gt,_t=!ht.hasAttribute("tableAlignment"),vt=pe.locale.contentLanguageDirection!=="rtl",Tt=tt.findAncestor("table"),St=Tt.findAncestor("figure"),Rt=[...Tt.getChildren()].find(Et=>Et.is("element","colgroup")),Pt=Rt.getChild(mt),Ot=bt?void 0:Rt.getChild(mt+1),Mt=getElementWidthInPixels(pe.editing.view.domConverter.mapViewToDom(St.parent)),Bt=getElementWidthInPixels(pe.editing.view.domConverter.mapViewToDom(St)),Dt=getTableWidthInPixels(ht,pe),$t=de[mt],kt=bt?void 0:de[mt+1];return{columnPosition:Le,flags:{isRightEdge:bt,isTableCentered:_t,isLtrContent:vt},elements:{viewResizer:Ye,modelTable:ht,viewFigure:St,viewColgroup:Rt,viewLeftColumn:Pt,viewRightColumn:Ot},widths:{viewFigureParentWidth:Mt,viewFigureWidth:Bt,tableWidth:Dt,leftColumnWidth:$t,rightColumnWidth:kt}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(t=>{t.on("insert:tableCell",(de,pe,Le)=>{const Ye=pe.item,tt=Le.mapper.toViewElement(Ye),st=Le.writer;st.insert(st.createPositionAt(tt,"end"),st.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class TableColumnResize extends Plugin{static get requires(){return[TableColumnResizeEditing,TableCellWidthEditing]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelElementToPlainText(me){if(me.is("$text")||me.is("$textProxy"))return me.data;const u=me;let t="",de=null;for(const pe of u.getChildren()){const Le=modelElementToPlainText(pe);de&&de.is("element")&&(t+=`
`),t+=Le,de=pe}return t}class WordCount extends Plugin{constructor(t){super(t);wt(this,"_config");wt(this,"_outputView");wt(this,"_wordsMatchRegExp");this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=t.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=env.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9-]+\S?)+/gu}static get pluginName(){return"WordCount"}static get isOfficialPlugin(){return!0}init(){this.editor.model.document.on("change:data",throttle(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(de,pe)=>{this._config.onUpdate(pe)}),isElement$2(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const t=this.editor,de=t.t,pe=t.config.get("wordCount.displayWords"),Le=t.config.get("wordCount.displayCharacters"),Ye=Template.bind(this,this),tt=[];return this._outputView||(this._outputView=new View,(pe||pe===void 0)&&(this.bind("_wordsLabel").to(this,"words",st=>de("Words: %0",st)),tt.push({tag:"div",children:[{text:[Ye.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(Le||Le===void 0)&&(this.bind("_charactersLabel").to(this,"characters",st=>de("Characters: %0",st)),tt.push({tag:"div",children:[{text:[Ye.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:tt}),this._outputView.render()),this._outputView.element}_getText(){let t="";for(const de of this.editor.model.document.getRoots())t!==""&&(t+=`
`),t+=modelElementToPlainText(de);return t}_getCharacters(t){return t.replace(/\n/g,"").length}_getWords(t){return(t.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const t=this._getText(),de=this.words=this._getWords(t),pe=this.characters=this._getCharacters(t);this.fire("update",{words:de,characters:pe})}}const a$4={paintRoller:`<svg viewBox="0 0 20 20" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V3Z"/><path d="M16 3.25a1.5 1.5 0 0 1 1.5 1.5v1.7a2.25 2.25 0 0 1-1.932 2.226l-4.424.632a.75.75 0 0 0-.644.743V11a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1v-.95a2.25 2.25 0 0 1 1.932-2.226l4.424-.632A.75.75 0 0 0 16 6.449V3.25Z"/></svg>
`};function d$1(me,u){const t=me.t;switch(u){case"Export to PDF":return t("Export to PDF");case"An error occurred while generating the PDF.":return t("An error occurred while generating the PDF.");case"PDF export started":return t("PDF export started");case"PDF export failed":return t("PDF export failed");case"PDF export successful":return t("PDF export successful");case"Exporting PDF document":return t("Exporting PDF document");default:return u}}let e$4=class extends Command{constructor(u){super(u),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(u={}){const t=this.editor,de=u.converterUrl||"https://pdf-converter.cke-cs.com/v1/convert/",pe=u.dataCallback||(tt=>tt.data.get()),Le=t.plugins.get("ExportPdf"),Ye=u.token||Le._token;return this.isBusy=!0,this.refresh(),collectStylesheets(u.stylesheets||["EDITOR_STYLES"]).then(async tt=>{if(t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export started")),t.plugins.has("MergeFields")){u.converterOptions||(u.converterOptions={});const mt=t.plugins.get("MergeFieldsEditing"),gt=mt.previewMode,{prefix:bt,suffix:_t}=t.config.get("mergeFields"),vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP88B8AAuUB8e2ujYwAAAAASUVORK5CYII=",Tt={prefix:bt,suffix:_t,data:{}};if(gt==="$labels")for(const St of mt.getMergeFieldsIds())mt.getMergeFieldType(St)==="image"?Tt.data[St]=vt:Tt.data[St]=mt.wrapInAffixes(mt.getLabel(St)||St);else{const St=gt==="$defaultValues"?mt.getDefaultValues():mt.getDataSetValues(gt,!0);for(const Rt of Object.entries(St)){const[Pt,Ot]=Rt;mt.getMergeFieldType(Pt)==="image"?Tt.data[Pt]=Ot!==null?Ot:vt:Tt.data[Pt]=Ot!==null?Ot:mt.getLabel(Pt)||Pt}}u.converterOptions.merge_fields=Tt}const st={html:`<html>
						<head>
							<title>CKEditor 5 PDF document</title>
							<meta charset="utf-8">
						</head>
						<body>
							<div class="ck-content" dir="`+t.locale.contentLanguageDirection+`">
								`+await pe(t)+`
							</div>
						</body>
					</html>`,css:tt,options:u.converterOptions},ht={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/pdf",...Ye?{Authorization:Ye.value}:null,"x-cs-app-id":u.appID||"cke5"},body:JSON.stringify(st)};return window.fetch(de,ht).then(mt=>{if(mt.status!==200)throw mt;return mt.blob()}).then(mt=>{t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export successful"));const gt=typeof u.fileName=="function"?u.fileName():u.fileName;this._downloadFile(mt,gt||"document.pdf")})}).catch(tt=>{const st=t.plugins.get("Notification");throw t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export failed"),{politeness:"assertive"}),st.showWarning(d$1(t.locale,"An error occurred while generating the PDF.")),tt}).finally(()=>{this.isBusy=!1,this.refresh()})}_downloadFile(u,t){const de=document.createElement("a");de.href=window.URL.createObjectURL(u),de.download=t,de.click(),de.remove()}},s$4=class extends Plugin{static get pluginName(){return"ExportPdfUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("exportPdf",()=>{const t=this._createButton(ButtonView),de=u.commands.get("exportPdf");return t.set({tooltip:!0}),t.bind("isOn").to(de,"isBusy"),t}),u.ui.componentFactory.add("menuBar:exportPdf",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.config.get("exportPdf")||{},pe=t.commands.get("exportPdf"),Le=new u(t.locale),Ye=new SpinnerView;return Le.children.add(Ye),Ye.bind("isVisible").to(pe,"isBusy"),Le.iconView.bind("isVisible").to(pe,"isBusy",tt=>!tt),Le.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v6.5h1.5v-5h8v5h5V11H19V4.5ZM14 2l3.3 3H14V2Z"/><path d="m12.452 18.5 1.25 1.5H3v-3h1.5v1.5h7.952Z"/><path d="M19.826 16.843a.75.75 0 1 0-1.152-.96L17.5 17.29V13H16v4.29l-1.174-1.408a.75.75 0 1 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path d="M1.63 14.24V12.3h.88c.66 0 1.14-.15 1.46-.45.32-.3.48-.71.48-1.24 0-.52-.15-.91-.44-1.2C3.7 9.15 3.28 9 2.69 9H0v5.24h1.63Zm.4-3h-.4v-1.17h.46c.3 0 .5.05.62.17.1.11.16.25.16.42 0 .16-.06.3-.19.41-.13.11-.34.16-.66.16l.01.01Zm5.7 3c.28 0 .6-.05.96-.14.26-.07.5-.21.73-.42.22-.2.4-.47.53-.77.12-.31.19-.75.19-1.3 0-.37-.04-.7-.13-1.02a2.3 2.3 0 0 0-.42-.84c-.19-.24-.43-.43-.72-.56C8.57 9.06 8.2 9 7.72 9h-2.4v5.24H7.73Zm-.4-1.19h-.4v-2.86h.4c.43 0 .73.1.91.3.18.2.27.59.27 1.14 0 .42-.04.73-.12.91a.76.76 0 0 1-.34.4c-.14.07-.38.11-.72.11Zm5.3 1.2V12.1h2.02v-1.06h-2.03v-.91H15V9h-4v5.24h1.62l.01.01Z"/></svg>
`}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("label").to(pe,"isBusy",tt=>d$1(t.locale,tt?"Exporting PDF document":"Export to PDF")),this.listenTo(Le,"execute",()=>{t.execute("exportPdf",de),t.editing.view.focus()}),Le}},o$3=class extends Plugin{constructor(){super(...arguments);wt(this,"_token")}static get pluginName(){return"ExportPdf"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["CloudServices",Notification,s$4]}init(){const t=this.editor,de=t.config.get("exportPdf")||{};t.commands.add("exportPdf",new e$4(t));const pe=t.plugins.get("CloudServices");de.tokenUrl===!1?this._token=null:de.tokenUrl?pe.registerTokenUrl(de.tokenUrl).then(Le=>{this._token=Le}):this._token=pe.token}};function a$3(me,u={}){const t=me.plugins.has("Users"),de=me.plugins.has("CommentsRepository"),pe=me.plugins.has("TrackChanges"),Le=u;if(t&&de){const Ye=function(tt){const st={};if(!tt.length)return st;for(const ht of tt)ht.comments.map(mt=>{st[ht.id]===void 0&&(st[ht.id]=[]),st[ht.id].push({author:mt.author.name,content:mt.content,created:mt.createdAt,is_resolved:ht.isResolved})});return st}(me.plugins.get("CommentsRepository").getCommentThreads({skipNotAttached:!0,skipEmpty:!0}));Object.keys(Ye).length&&(Le.comments=Ye)}if(t&&pe){const Ye=me.plugins.get("TrackChanges"),tt=me.plugins.get("Users"),st=function(ht,mt){const gt={};if(!ht.length||!mt.length)return gt;for(const{id:bt,createdAt:_t,authorId:vt,attributes:Tt}of ht){const St=Tt&&Tt["@external"],Rt=St?St.authorName:mt.get(vt).name;gt[bt]={author:Rt,created:_t}}return gt}(Ye.getSuggestions({toJSON:!0}),tt.users);Object.keys(st).length&&(Le.suggestions=st)}return(Le.suggestions||Le.comments)&&(Le.timezone=new Intl.DateTimeFormat().resolvedOptions().timeZone),Le}function m$4(me,u={}){const t=me.plugins.has("Users"),de=me.plugins.has("CommentsRepository"),pe=me.plugins.has("TrackChanges"),Le=me.plugins.has("MergeFields"),Ye=me.locale.contentLanguage,tt=u,st={};if(tt.document=tt.document||{},tt.document.language=tt.document.language||Ye,t&&de){const ht=function(mt){const gt=[];if(!mt.length)return gt;for(const bt of mt){const _t=bt.comments.map(vt=>({author:vt.author.name,content:vt.content,created_at:vt.createdAt}));gt.push({thread_id:bt.id,is_resolved:bt.isResolved,comments:_t})}return gt}(me.plugins.get("CommentsRepository").getCommentThreads({skipNotAttached:!0,skipEmpty:!0}));ht.length&&(st.comment_threads=ht)}if(t&&pe){const ht=me.plugins.get("TrackChanges"),mt=me.plugins.get("Users"),gt=function(bt,_t){return!bt.length||!_t.length?[]:bt.map(({id:vt,createdAt:Tt,authorId:St,attributes:Rt})=>{const Pt=Rt&&Rt["@external"];return{id:vt,author:Pt?Pt.authorName:_t.get(St).name,created_at:Tt}})}(ht.getSuggestions({toJSON:!0}),mt.users);gt.length&&(st.suggestions=gt)}if(Le){const ht=me.plugins.get("MergeFieldsEditing"),mt=ht.previewMode,{prefix:gt,suffix:bt}=me.config.get("mergeFields");if(tt.merge_fields={prefix:gt,suffix:bt},mt!=="$labels"){tt.merge_fields.data={};const _t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP88B8AAuUB8e2ujYwAAAAASUVORK5CYII=",vt=mt==="$defaultValues"?ht.getDefaultValues():ht.getDataSetValues(mt,!0);for(const Tt of Object.entries(vt)){const[St,Rt]=Tt;ht.getMergeFieldType(St)==="image"?tt.merge_fields.data[St]=Rt!==null?Rt:_t:tt.merge_fields.data[St]=Rt!==null?Rt:ht.getLabel(St)||St}}}return(st.comment_threads||st.suggestions)&&(tt.timezone=new Intl.DateTimeFormat().resolvedOptions().timeZone,tt.collaboration_features=st),tt}function p$2(me,u){const t=me.t;switch(u){case"Export to Word":return t("Export to Word");case"An error occurred while generating the Word file.":return t("An error occurred while generating the Word file.");case"Word document export started":return t("Word document export started");case"Word document export failed":return t("Word document export failed");case"Word document export successful":return t("Word document export successful");case"Exporting Word document":return t("Exporting Word document");default:return u}}const h$2=["orientation","margin_top","margin_right","margin_bottom","margin_left","format","header","footer","comments","suggestions"];let e$3=class extends Command{constructor(u){super(u),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(u={}){const t=this.editor,de=u.version||2,pe=de===1,Le=u.converterUrl||(pe?"https://docx-converter.cke-cs.com/v1/convert":"https://docx-converter.cke-cs.com/v2/convert/html-docx"),Ye=u.converterOptions||{},tt=t.plugins.get("ExportWord"),st=u.token||tt._token,ht=Ye.auto_pagination===!0,mt=u.dataCallback||(gt=>gt.data.get({pagination:ht}));return de===2&&function(gt){for(const bt of h$2)if(gt[bt]!==void 0)return!0;return!1}(Ye)&&logWarning("export-word-v1-api-is-deprecated"),this.isBusy=!0,this.refresh(),collectStylesheets(u.stylesheets||["EDITOR_STYLES"]).then(async gt=>{t.ui.ariaLiveAnnouncer.announce(p$2(t.locale,"Word document export started"));const bt=await mt(t),_t={html:'<div class="ck-content" dir="'+t.locale.contentLanguageDirection+'">'+bt+"</div>",css:gt,[pe?"options":"config"]:{...Ye,...pe?a$3(t,Ye):m$4(t,Ye)}},vt={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/docx",...st?{Authorization:st.value}:null},body:JSON.stringify(_t)};return window.fetch(Le,vt).then(Tt=>{if(Tt.status!==200)throw Tt;return Tt.blob()}).then(Tt=>{t.ui.ariaLiveAnnouncer.announce(p$2(t.locale,"Word document export successful"));const St=typeof u.fileName=="function"?u.fileName():u.fileName;this._downloadFile(Tt,St||"document.docx")})}).catch(gt=>{const bt=t.plugins.get("Notification");throw t.ui.ariaLiveAnnouncer.announce(p$2(t.locale,"Word document export failed"),{politeness:"assertive"}),bt.showWarning(p$2(t.locale,"An error occurred while generating the Word file.")),gt}).finally(()=>{this.isBusy=!1,this.refresh()})}_downloadFile(u,t){const de=document.createElement("a");de.href=window.URL.createObjectURL(u),de.download=t,de.click(),de.remove()}},o$2=class extends Plugin{static get pluginName(){return"ExportWordUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("exportWord",()=>{const t=u.commands.get("exportWord"),de=this._createButton(ButtonView);return de.set({tooltip:!0}),de.bind("isOn").to(t,"isBusy"),de}),u.ui.componentFactory.add("menuBar:exportWord",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,de=t.config.get("exportWord")||{},pe=t.commands.get("exportWord"),Le=new u(t.locale),Ye=new SpinnerView;return Le.children.add(Ye),Ye.bind("isVisible").to(pe,"isBusy"),Le.iconView.bind("isVisible").to(pe,"isBusy",tt=>!tt),Le.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.826 16.843a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path d="m14 0 5 4.5v9.741a2.737 2.737 0 0 0-1.5-.617V6.5h-5v-5h-8v3H3V0h11Zm0 2v3h3.3L14 2Z"/><path d="M3 17.5h6.746c.1.22.23.429.391.623l.731.877H3v-1.5Z"/><path d="M8.5 6a1.5 1.5 0 0 1 1.493 1.356L10 7.5v7a1.5 1.5 0 0 1-1.356 1.493L8.5 16h-7a1.5 1.5 0 0 1-1.493-1.356L0 14.5v-7a1.5 1.5 0 0 1 1.356-1.493L1.5 6h7ZM7.483 8.795l-.042.088-.986 2.534-.947-2.528-.043-.092a.601.601 0 0 0-1.042.008l-.042.093-.883 2.465-.937-2.475-.042-.089a.6.6 0 0 0-1.107.42l.027.093 1.514 4 .044.092a.6.6 0 0 0 1.041-.01l.041-.092.88-2.458.925 2.467.046.096a.6.6 0 0 0 1.032 0l.043-.09 1.554-4 .028-.093a.6.6 0 0 0-1.104-.43v.001Z"/></svg>
`}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("label").to(pe,"isBusy",tt=>p$2(t.locale,tt?"Exporting Word document":"Export to Word")),this.listenTo(Le,"execute",()=>{t.execute("exportWord",de),t.editing.view.focus()}),Le}},s$3=class extends Plugin{constructor(){super(...arguments);wt(this,"_token")}static get pluginName(){return"ExportWord"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["CloudServices",Notification,o$2]}init(){const t=this.editor,de=t.config.get("exportWord")||{};t.commands.add("exportWord",new e$3(t));const pe=t.plugins.get("CloudServices");de.tokenUrl===!1?this._token=null:de.tokenUrl?pe.registerTokenUrl(de.tokenUrl).then(Le=>{this._token=Le}):this._token=pe.token}};const c$2="copyFormat",e$2="pasteFormat",b$2="ck-format-painter-active";class r extends Command{constructor(u){super(u),this.value=void 0,this.on("change:isEnabled",(t,de,pe)=>{pe||this.reset()}),this.on("change:value",()=>u.commands.get(e$2).refresh())}execute(){this.value=this._getFormattingAttributes()}reset(){this.value=void 0}_getFormattingAttributes(){const u=this.editor.model,t=u.document.selection;return Object.fromEntries(Array.from(t.getAttributes()).filter(([de])=>u.schema.getAttributeProperties(de).isFormatting))}}let o$1=class extends Command{constructor(u){super(u),this._removeFormatCommand=new _$1(u)}execute(u={}){const t=this.editor.model,de=t.document.selection,pe=Array.from(de.getRanges()),Le=de.isCollapsed?[this._createRangeOnEntireWord(t,de)]:pe;t.change(Ye=>{Ye.setSelection(Le),this._removeFormatCommand.execute();for(const tt in u)for(const st of t.schema.getValidRanges(Le,tt))Ye.setAttribute(tt,u[tt],st);Ye.setSelection(pe)})}_createRangeOnEntireWord(u,t){const de=u.createSelection(t);u.modifySelection(de,{unit:"word",direction:"backward"});const pe=de.getFirstPosition();u.modifySelection(de,{unit:"word",direction:"forward"});const Le=de.getLastPosition();return u.createRange(pe,Le)}},_$1=class extends Command{execute(){const u=this.editor.model,t=u.schema;u.change(de=>{for(const pe of this._getFormattingItems(u.document.selection,t))if(pe.is("selection"))for(const Le of this._getFormattingAttributes(pe,t))de.removeSelectionAttribute(Le);else{const Le=de.createRangeOn(pe);for(const Ye of this._getFormattingAttributes(pe,t))de.removeAttribute(Ye,Le)}})}*_getFormattingItems(u,t){const de=pe=>!!first(this._getFormattingAttributes(pe,t));for(const pe of u.getRanges())for(const Le of pe.getItems())!t.isBlock(Le)&&de(Le)&&(yield Le);for(const pe of u.getSelectedBlocks())de(pe)&&(yield pe);de(u)&&(yield u)}*_getFormattingAttributes(u,t){for(const[de]of u.getAttributes()){const pe=t.getAttributeProperties(de);pe&&pe.isFormatting&&(yield de)}}},a$2=class extends Plugin{constructor(){super(...arguments);wt(this,"licenseKey");wt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"FormatPainterEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const t=this.editor;t.commands.add(c$2,new r(t)),t.commands.add(e$2,new o$1(t)),this.licenseKey=this.editor.config.get("licenseKey");const de=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let pe;for(const Le in de){const Ye=Le,tt=de[Ye];if(tt=="formatPainterLicenseKeyValid"||tt=="formatPainterLicenseKeyInvalid"||tt=="formatPainterLicenseKeyExpired"||tt=="formatPainterLicenseKeyDomainLimit"||tt=="formatPainterLicenseKeyNotAllowed"||tt=="formatPainterLicenseKeyEvaluationLimit"||tt=="formatPainterLicenseKeyTrialLimit"||tt=="formatPainterLicenseKeyUsageLimit"){delete de[Ye],pe=tt,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}pe=="formatPainterLicenseKeyInvalid"&&de._showLicenseError("invalid"),pe=="formatPainterLicenseKeyExpired"&&de._showLicenseError("expired"),pe=="formatPainterLicenseKeyDomainLimit"&&de._showLicenseError("domainLimit"),pe=="formatPainterLicenseKeyNotAllowed"&&de._showLicenseError("featureNotAllowed","FormatPainter"),pe=="formatPainterLicenseKeyEvaluationLimit"&&de._showLicenseError("evaluationLimit"),pe=="formatPainterLicenseKeyTrialLimit"&&de._showLicenseError("trialLimit"),pe=="formatPainterLicenseKeyUsageLimit"&&de._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}};function C$1(me,u){const t=me.t;switch(u){case"Paint formatting":return t("Paint formatting");case"Copy text formatting":return t("Copy text formatting");case"Paste text formatting":return t("Paste text formatting");case"Continuous painting":return t("Continuous painting");case"Keeps the painter on after setting the formatting.":return t("Keeps the painter on after setting the formatting.");case"Formatting copied.":return t("Formatting copied.");case"Pasted formatting.":return t("Pasted formatting.");default:return u}}let m$3=class extends DomEmitterMixin(Plugin){static get pluginName(){return"FormatPainterUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.editing.view.addObserver(ClickObserver),u.accessibility.addKeystrokeInfos({keystrokes:[{label:C$1(u.locale,"Copy text formatting"),keystroke:"Ctrl+Alt+C"},{label:C$1(u.locale,"Paste text formatting"),keystroke:"Ctrl+Alt+V"}]}),u.ui.componentFactory.add("formatPainter",t=>{const de=createDropdown(t,SplitButtonView),pe=u.commands.get(c$2);de.buttonView.set({label:C$1(u.locale,"Paint formatting"),icon:a$4.paintRoller,keystroke:"Ctrl+Alt+C",tooltip:!0}),de.class="ck-format-painter-dropdown",pe&&(de.bind("isEnabled").to(pe,"isEnabled"),this.listenTo(pe,"change:isEnabled",(tt,st,ht)=>{ht||this._finishPainting()}),de.buttonView.bind("isOn").to(pe,"value",tt=>!!tt),this.listenTo(u,"destroy",()=>this._toggleSpecialCursor(!1)),this.listenTo(pe,"change:value",(tt,st,ht)=>{this._toggleSpecialCursor(!!ht)}));const Le=new Model({withText:!0,label:C$1(u.locale,"Continuous painting"),tooltip:C$1(u.locale,"Keeps the painter on after setting the formatting."),isOn:!1,role:"menuitemcheckbox"});addListToDropdown(de,new Collection([{type:"switchbutton",model:Le}]),{role:"menu"});const Ye=()=>{this._copyFormatting(),this.listenTo(global$1.window.document,"mouseup",()=>{this._pasteFormatting(),Le.isOn||this._finishPainting()})};return this.listenTo(de,"execute",()=>{Le.isOn=!Le.isOn}),this.listenTo(de.buttonView,"execute",()=>{u.editing.view.focus(),de.buttonView.isOn?this._finishPainting():Ye()}),u.keystrokes.set("Ctrl+Alt+C",(tt,st)=>{Ye(),Le.isOn=!0,st()},{priority:"high"}),u.keystrokes.set("Ctrl+Alt+V",(tt,st)=>{de.buttonView.isOn&&(this._pasteFormatting(),Le.isOn||this._finishPainting(),st())},{priority:"high"}),u.keystrokes.set("Esc",(tt,st)=>{de.buttonView.isOn&&(Le.isOn=!1,this._finishPainting(),st())}),de})}afterInit(){(async function(u){const t=kt([117,70,89,106,54,97,108,51,109,78,66,112,110,83,67,104,105,98,80,103,100,85,48,86,68,90,115,107,76,114,53,72,88,73,79,118,81,116,121,113,77,57,120,65,52,111,87,84,122,101,69,56,55,82,74,75,71,102,49,119,99,50]),de=1808401739,pe=1808622603^de,Le=window[kt([68,97,116,101])][kt([110,111,119])](),Ye=u[kt([101,100,105,116,111,114])],tt=new window[kt([80,114,111,109,105,115,101])](Et=>{Ye[kt([111,110,99,101])](kt([114,101,97,100,121]),Et)}),st={[kt([107,116,121])]:kt([69,67]),[kt([117,115,101])]:kt([115,105,103]),[kt([99,114,118])]:kt([80,45,50,53,54]),[kt([120])]:kt([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[kt([121])]:kt([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[kt([97,108,103])]:kt([69,83,50,53,54])},ht=Ye[kt([99,111,110,102,105,103])][kt([103,101,116])](kt([108,105,99,101,110,115,101,75,101,121]));async function mt(){let Et,At=null,Ft=null;try{return ht==kt([71,80,76])?kt([78,111,116,65,108,108,111,119,101,100]):(Et=St(),Et?(Et[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(Ft=gt(Et[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])],Et[kt([106,116,105])])),await Rt()?Ut()?zt()?kt([69,120,112,105,114,101,100]):qt()?(Et[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([101,118,97,108,117,97,116,105,111,110])&&(At=bt(kt([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),Et[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([116,114,105,97,108])&&(At=bt(kt([84,114,105,97,108,76,105,109,105,116]))),await Gt()):kt([68,111,109,97,105,110,76,105,109,105,116]):kt([78,111,116,65,108,108,111,119,101,100]):kt([73,110,118,97,108,105,100])):kt([73,110,118,97,108,105,100]))}catch{return kt([73,110,118,97,108,105,100])}function zt(){const Nt=[kt([101,118,97,108,117,97,116,105,111,110]),kt([116,114,105,97,108])][kt([105,110,99,108,117,100,101,115])](Et[kt([108,105,99,101,110,115,101,84,121,112,101])])?Le/1e3:3600*pe;return Et[kt([101,120,112])]<Nt}function Ut(){const Nt=Et[kt([102,101,97,116,117,114,101,115])];return!!Nt&&(!!Nt[kt([105,110,99,108,117,100,101,115])](kt([42]))||!!Nt[kt([105,110,99,108,117,100,101,115])](kt([70,80]))||!!Nt[kt([105,110,99,108,117,100,101,115])](kt([80,80])))}function qt(){const Nt=Et[kt([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!Nt||Nt[kt([108,101,110,103,116,104])]==0)return!0;const{hostname:jt}=new URL(window[kt([108,111,99,97,116,105,111,110])].href);if(Nt[kt([105,110,99,108,117,100,101,115])](jt))return!0;const Qt=jt[kt([115,112,108,105,116])](kt([46]));return Nt[kt([102,105,108,116,101,114])](Kt=>Kt[kt([105,110,99,108,117,100,101,115])](kt([42])))[kt([109,97,112])](Kt=>Kt[kt([115,112,108,105,116])](kt([46])))[kt([115,111,109,101])](Kt=>Qt[kt([101,118,101,114,121])]((Vt,en)=>Kt[en]===Vt||Kt[en]===kt([42])))}function Gt(){return At&&Ft?new window[kt([80,114,111,109,105,115,101])]((Nt,jt)=>{At[kt([116,104,101,110])](Nt,jt),Ft[kt([116,104,101,110])](Qt=>{Qt!=kt([86,97,108,105,100])&&Nt(Qt)},jt)}):At||Ft||kt([86,97,108,105,100])}}function gt(Et,At){return new window[kt([80,114,111,109,105,115,101])](Ut=>{if(Ft())return Ut(kt([86,97,108,105,100]));zt(),Ye[kt([100,101,99,111,114,97,116,101])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let qt=!1;const Gt=uid();function Nt(Qt){return!!Qt&&(typeof Qt===kt([111,98,106,101,99,116])||typeof Qt===kt([102,117,110,99,116,105,111,110]))&&typeof Qt[kt([116,104,101,110])]===kt([102,117,110,99,116,105,111,110])&&typeof Qt[kt([99,97,116,99,104])]===kt([102,117,110,99,116,105,111,110])}function jt(Qt){cn(Qt)[kt([116,104,101,110])](nn=>!nn||nn[kt([115,116,97,116,117,115])]!=kt([111,107])?kt([85,115,97,103,101,76,105,109,105,116]):Bt(Mt(Gt+At))!=nn[kt([118,101,114,105,102,105,99,97,116,105,111,110])]?kt([85,115,97,103,101,76,105,109,105,116]):kt([86,97,108,105,100]))[kt([116,104,101,110])](nn=>(Vt(),nn),()=>{const nn=en();return nn==null?(Vt(),kt([86,97,108,105,100])):kt(Le-nn>(1338409291^de)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[kt([116,104,101,110])](Ut)[kt([99,97,116,99,104])](()=>{Ut(kt([85,115,97,103,101,76,105,109,105,116]))});const Kt=1811737547^de;function Vt(){const nn=kt([108,108,99,116,45])+Bt(Mt(Et)),sn=Dt(Bt(window[kt([77,97,116,104])][kt([99,101,105,108])](Le/Kt)));window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([115,101,116,73,116,101,109])](nn,sn)}function en(){const nn=kt([108,108,99,116,45])+Bt(Mt(Et)),sn=window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([103,101,116,73,116,101,109])](nn);return sn?window[kt([112,97,114,115,101,73,110,116])](Dt(sn),16)*Kt:null}function cn(nn){return new window[kt([80,114,111,109,105,115,101])]((sn,un)=>{nn[kt([116,104,101,110])](sn,un),window[kt([115,101,116,84,105,109,101,111,117,116])](un,1808519563^de)})}}Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(Qt,Kt)=>{if(Kt[0]!=Et)return Ut(kt([85,115,97,103,101,76,105,109,105,116]));Kt[1]={...Kt[1],[kt([114,101,113,117,101,115,116,73,100])]:Gt}},{[kt([112,114,105,111,114,105,116,121])]:kt([104,105,103,104])}),Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),Qt=>{Nt(Qt[kt([114,101,116,117,114,110])])&&(qt=!0,jt(Qt[kt([114,101,116,117,114,110])]))},{[kt([112,114,105,111,114,105,116,121])]:kt([108,111,119])}),tt[kt([116,104,101,110])](()=>{qt||Ut(kt([85,115,97,103,101,76,105,109,105,116]))})});function Ft(){return Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==kt([97,117,116,111])}function zt(){Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=kt([97,117,116,111])}}function bt(Et){const At=[new window[kt([80,114,111,109,105,115,101])](Ft=>setTimeout(Ft,1807956871^de)),tt[kt([116,104,101,110])](()=>new window[kt([80,114,111,109,105,115,101])](Ft=>{let zt=0;Ye[kt([109,111,100,101,108])][kt([111,110])](kt([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(Ut,qt)=>{qt[0][kt([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&zt++,zt==(1808401587^de)&&(Ft(),Ut[kt([111,102,102])]())})}))];return window[kt([80,114,111,109,105,115,101])][kt([114,97,99,101])](At)[kt([116,104,101,110])](()=>Et)}async function _t(){await tt,Ye[kt([109,111,100,101,108])][kt([99,104,97,110,103,101])]=$t,Ye[kt([109,111,100,101,108])][kt([101,110,113,117,101,117,101,67,104,97,110,103,101])]=$t,Ye[kt([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](kt([109,111,100,101,108]))}function vt(Et){const At=Tt();Ye[At]=kt([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121])+Et,Et!=kt([86,97,108,105,100])&&_t()}function Tt(){const Et=window[kt([83,116,114,105,110,103])](window[kt([112,101,114,102,111,114,109,97,110,99,101])][kt([110,111,119])]())[kt([114,101,112,108,97,99,101])](kt([46]),"");let At=kt([117]);for(let Ft=0;Ft<Et[kt([108,101,110,103,116,104])];Ft+=2){let zt=window[kt([112,97,114,115,101,73,110,116])](Et[kt([115,117,98,115,116,114,105,110,103])](Ft,Ft+2));zt>=t[kt([108,101,110,103,116,104])]&&(zt-=t[kt([108,101,110,103,116,104])]),At+=t[zt]}return At}function St(){const Et=ht[kt([115,112,108,105,116])](kt([46]));if(Et[kt([108,101,110,103,116,104])]!=3)return null;return At(Et[1]);function At(Ft){const zt=Pt(Ft);return zt&&Ut()?zt:null;function Ut(){const qt=zt[kt([106,116,105])],Gt=window[kt([112,97,114,115,101,73,110,116])](qt[kt([115,117,98,115,116,114,105,110,103])](qt[kt([108,101,110,103,116,104])]-8),16),Nt={...zt,[kt([106,116,105])]:qt[kt([115,117,98,115,116,114,105,110,103])](0,qt[kt([108,101,110,103,116,104])]-8)};return delete Nt[kt([118,99])],Mt(Nt)==Gt}}}async function Rt(){let Et=!0;try{const zt=ht[kt([115,112,108,105,116])](kt([46])),[Ut,qt,Gt]=zt;return At(Ut),await Ft(Ut,qt,Gt),Et}catch{return!1}function At(zt){const Ut=Pt(zt);Ut&&Ut[kt([97,108,103])]==kt([69,83,50,53,54])||(Et=!1)}async function Ft(zt,Ut,qt){const Gt=window[kt([85,105,110,116,56,65,114,114,97,121])][kt([102,114,111,109])](Ot(qt),Kt=>Kt[kt([99,104,97,114,67,111,100,101,65,116])](0)),Nt=new window[kt([84,101,120,116,69,110,99,111,100,101,114])]()[kt([101,110,99,111,100,101])](zt+kt([46])+Ut),jt=window[kt([99,114,121,112,116,111])][kt([115,117,98,116,108,101])];if(!jt)return;const Qt=await jt[kt([105,109,112,111,114,116,75,101,121])](kt([106,119,107]),st,{[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([110,97,109,101,100,67,117,114,118,101])]:kt([80,45,50,53,54])},!1,[kt([118,101,114,105,102,121])]);await jt[kt([118,101,114,105,102,121])]({[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([104,97,115,104])]:{[kt([110,97,109,101])]:kt([83,72,65,45,50,53,54])}},Qt,Gt,Nt)||(Et=!1)}}function Pt(Et){return Et[kt([115,116,97,114,116,115,87,105,116,104])](kt([101,121]))?JSON[kt([112,97,114,115,101])](Ot(Et)):null}function Ot(Et){return window[kt([97,116,111,98])](Et[kt([114,101,112,108,97,99,101])](/-/g,kt([43]))[kt([114,101,112,108,97,99,101])](/_/g,kt([47])))}function Mt(Et){let At=5381;function Ft(Ut){for(let qt=0;qt<Ut[kt([108,101,110,103,116,104])];qt++){const Gt=Ut[kt([99,104,97,114,67,111,100,101,65,116])](qt);At=(At<<5)+At+Gt,At&=At}}function zt(Ut){Array[kt([105,115,65,114,114,97,121])](Ut)?Ut[kt([102,111,114,69,97,99,104])](zt):Ut&&typeof Ut==kt([111,98,106,101,99,116])?Object[kt([101,110,116,114,105,101,115])](Ut)[kt([115,111,114,116])]()[kt([102,111,114,69,97,99,104])](([qt,Gt])=>{Ft(qt),zt(Gt)}):Ft(window[kt([83,116,114,105,110,103])](Ut))}return zt(Et),At>>>0}function Bt(Et){return Et[kt([116,111,83,116,114,105,110,103])](16)[kt([112,97,100,83,116,97,114,116])](8,kt([48]))}function Dt(Et){return Et[kt([115,112,108,105,116])]("")[kt([114,101,118,101,114,115,101])]()[kt([106,111,105,110])]("")}function $t(){}function kt(Et){return Et.map(At=>String.fromCharCode(At)).join("")}vt(await mt())})(this)}_toggleSpecialCursor(u){this.editor.editing.view.change(t=>{for(const de of this.editor.editing.view.document.roots)u?t.addClass(b$2,de):t.removeClass(b$2,de)})}_copyFormatting(){const{editor:u}=this;u.execute(c$2),u.ui.ariaLiveAnnouncer.announce(C$1(u.locale,"Formatting copied."))}_pasteFormatting(){const{editor:u}=this,t=u.commands.get(c$2).value;u.execute(e$2,t),u.ui.ariaLiveAnnouncer.announce(C$1(u.locale,"Pasted formatting."))}_finishPainting(){this.editor.commands.get(c$2).reset(),this.stopListening(global$1.window.document,"mouseup")}},n$1=class extends Plugin{static get requires(){return[a$2,m$3]}static get pluginName(){return"FormatPainter"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}};function p$1(me,u){const t=me.t;switch(u){case"Import from Word":return t("Import from Word");case"An error occurred while importing the Word file.":return t("An error occurred while importing the Word file.");case"Importing Word document":return t("Importing Word document");default:return u}}let i$3=class extends Plugin{static get pluginName(){return"ImportWordUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("importWord",()=>{const t=this._createButton(FileDialogButtonView),de=u.commands.get("importWord");return t.bind("isOn").to(de,"isBusy"),t.tooltip=!0,t}),u.ui.componentFactory.add("menuBar:importWord",()=>this._createButton(MenuBarMenuListItemFileDialogButtonView))}_createButton(u){const t=this.editor,de=t.commands.get("importWord"),pe=new u(t.locale),Le=new SpinnerView;return pe.set({acceptedType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.wordprocessingml.template"}),pe.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14 0 5 4.5v8.892l-1.5-1.8V6.5h-5v-5h-8v3H3V0h11Zm0 2v3h3.3L14 2Z"/><path d="M10.74 18a2.76 2.76 0 0 1-.469-.5H3V19h9.25v-.374A2.737 2.737 0 0 1 10.74 18Z"/><path d="M8.5 6a1.5 1.5 0 0 1 1.493 1.356L10 7.5v7a1.5 1.5 0 0 1-1.356 1.493L8.5 16h-7a1.5 1.5 0 0 1-1.493-1.356L0 14.5v-7a1.5 1.5 0 0 1 1.356-1.493L1.5 6h7ZM7.483 8.795l-.042.088-.986 2.534-.947-2.528-.043-.092a.601.601 0 0 0-1.042.008l-.042.093-.883 2.465-.937-2.475-.042-.089a.6.6 0 0 0-1.107.42l.027.093 1.514 4 .044.092a.6.6 0 0 0 1.041-.01l.041-.092.88-2.458.925 2.467.046.096a.602.602 0 0 0 1.032 0l.043-.09 1.554-4 .028-.093a.6.6 0 0 0-1.104-.43v.001ZM11.674 15.407a.75.75 0 1 0 1.152.96L14 14.96V20h1.5v-5.04l1.174 1.408a.75.75 0 1 0 1.152-.96l-2.346-2.816a.95.95 0 0 0-1.46 0l-2.346 2.815Z"/></svg>
`}),pe.bind("isEnabled").to(de),pe.bind("label").to(de,"isBusy",Ye=>p$1(t.locale,Ye?"Importing Word document":"Import from Word")),Le.bind("isVisible").to(de,"isBusy"),pe.iconView.bind("isVisible").to(de,"isBusy",Ye=>!Ye),pe.children.add(Le),pe.on("done",(Ye,tt)=>{t.execute("importWord",tt[0],{}),t.editing.view.focus()}),pe}};class d extends Command{constructor(t){super(t);wt(this,"_importMarker");wt(this,"_undoStepBatch");wt(this,"_abortController");this.set("isBusy",!1),this._importMarker=null,this._undoStepBatch=null,this._abortController=null,this.on("dataInsert",(de,pe)=>{const Le=new DataTransfer;Le.setData("text/html",pe.html);const Ye=this._importMarker.getRange();this.editor.model.enqueueChange(this._undoStepBatch,tt=>{this._importMarker.stopListening(),tt.setSelection(Ye),t.editing.view.document.fire("clipboardInput",{dataTransfer:Le})})},{priority:"low"})}refresh(){this.isEnabled=this._checkEnabled()}execute(t,de={}){if(this.isBusy)return Promise.resolve();const pe=this.editor.config.get("importWord");if(this.editor.plugins.has("MergeFields")){const{prefix:Ye,suffix:tt}=this.editor.config.get("mergeFields");de.merge_fields={prefix:Ye,suffix:tt}}const Le={url:pe.converterUrl,file:t,serviceConfig:{...de,formatting:pe.formatting,timezone:new Intl.DateTimeFormat().resolvedOptions().timeZone}};return this._prepareForImport(),this._sendImportRequest(Le).then(this._handleImportResponse.bind(this)).catch(this._handleImportFailure.bind(this)).finally(this._cleanUpAfterImport.bind(this))}_checkEnabled(){if(this.isBusy)return!1;const t=this.editor.model,de=t.schema,pe=t.document.selection,Le=first(pe.getSelectedBlocks());return!!Le&&de.checkChild(Le.parent,"paragraph")}_prepareForImport(){const t=this.editor,de=t.model,pe=de.document.selection;this._abortController=new AbortController,this._undoStepBatch=t.model.createBatch({isUndoable:!0}),de.enqueueChange(this._undoStepBatch,Le=>{pe.isCollapsed||de.deleteContent(pe,{leaveUnmerged:!0});const Ye=pe.getFirstPosition(),tt=first(pe.getSelectedBlocks());let st;st=tt.is("element","paragraph")&&tt.isEmpty?Ye:Ye.isAtStart?de.createPositionBefore(tt):Ye.isAtEnd?de.createPositionAfter(tt):Le.split(Ye).position,this._importMarker=Le.addMarker("importWord:"+uid(),{usingOperation:!1,affectsData:!1,range:new Range(st)}),this._importMarker.on("change:range",()=>{this._importMarker.getRange().root.rootName==="$graveyard"&&this._abortController.abort()})}),this.isBusy=!0,this.refresh()}_cleanUpAfterImport(){const t=this.editor.model;t.markers.has(this._importMarker)&&t.enqueueChange(this._undoStepBatch,de=>{de.removeMarker(this._importMarker)}),this._importMarker=null,this._undoStepBatch=null,this._abortController=null,this.isBusy=!1,this.refresh()}_sendImportRequest({url:t,file:de,serviceConfig:pe}){const Le=this.editor.plugins.get("ImportWordEditing").getToken(),Ye=new FormData;Ye.set("config",JSON.stringify(pe)),Ye.set("file",de);const tt={method:"POST",headers:{},body:Ye,signal:this._abortController.signal};return Le&&(tt.headers.Authorization=Le.value),fetch(t,tt)}_handleImportResponse(t){return t.ok?t.json().then(de=>{this.editor.model.markers.has(this._importMarker)&&this._importMarker.getRange().root.rootName!=="$graveyard"&&this.fire("dataInsert",de)}):Promise.reject()}_handleImportFailure(){if(this._abortController.signal.aborted)return void logWarning("import-word-plugin-import-cancelled");const t=this.editor,de=p$1(t.locale,"An error occurred while importing the Word file.");t.plugins.get("Notification").showWarning(de),logError("import-word-plugin-conversion-failed")}}let e$1=class extends Plugin{constructor(t){super(t);wt(this,"_token");this._token=null}static get pluginName(){return"ImportWordEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[Notification,ClipboardPipeline,"CloudServices"]}async init(){const t=this.editor;t.config.define("importWord",{converterUrl:"https://docx-converter.cke-cs.com/v2/convert/docx-html",tokenUrl:(t.config.get("cloudServices")||{}).tokenUrl,formatting:{resets:"none",defaults:"none",styles:"inline"}}),t.commands.add("importWord",new d(t));const{tokenUrl:de}=t.config.get("importWord");if(de){const{tokenUrl:pe}=t.config.get("cloudServices")||{};this._token=de===pe?t.plugins.get("CloudServices").token:await t.plugins.get("CloudServices").registerTokenUrl(de)}}getToken(){return this._token}};class o extends Plugin{static get pluginName(){return"ImportWord"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[e$1,i$3]}}let h$1=class extends Command{constructor(t,de,pe){super(t);wt(this,"defaultListMarkerStyle");wt(this,"_listDefinitions");wt(this,"_listUtils");this.defaultListMarkerStyle=de,this._listDefinitions=pe,this._listUtils=this.editor.plugins.get("ListUtils")}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const de=this.editor.model,pe=t.listMarkerStyle||this.defaultListMarkerStyle;de.change(()=>{const Le=this._getListTypeFromListMarkerStyle(pe);if(!Le)return;const Ye=Le+"List";this.editor.execute(Ye,{additionalAttributes:{listMarkerStyle:pe}})})}_getValue(){const t=first(this.editor.model.document.selection.getSelectedBlocks());return this._listUtils.isListItemBlock(t)?t.getAttribute("listMarkerStyle"):null}_checkEnabled(){const t=this.editor,de=t.commands.get("customNumberedList"),pe=t.commands.get("customBulletedList");return de.isEnabled||pe.isEnabled}_getListTypeFromListMarkerStyle(t){const de=this._listDefinitions.find(pe=>pe.listMarkerStyle==t);return de?de.listType:null}},i$2=class extends Plugin{constructor(t){super(t);wt(this,"_listDefinitions");const de=this.editor.config.get("listMultiLevel.listDefinitions")||[];this._listDefinitions=[{listType:"customNumbered",listMarkerStyle:"legal",className:"legal-list",listMarkers:[{marker:pe=>pe+"."}]},...de]}static get pluginName(){return"MultiLevelListEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["ListEditing"]}init(){const t=this.editor,de=t.model,pe=t.editing.view,Le=t.plugins.get("ListEditing");t.commands.add("multiLevelList",new h$1(t,"legal",this._listDefinitions)),de.schema.extend("$listItem",{allowAttributes:["listMarkerStyle","listMarker"]}),de.schema.addAttributeCheck((tt,st)=>{const ht=tt.last;if(st=="listMarker"||st=="listMarkerStyle")return!(!ht.getAttribute("listItemId")||!this._listDefinitions.find(mt=>mt.listType==ht.getAttribute("listType")))&&void 0});for(const tt of this._listDefinitions)t.conversion.for("upcast").add(st=>{st.on("element:"+(tt.listType=="customNumbered"?"ol":"ul"),m$2(tt,de.schema),{priority:"low"})}),Le.registerDowncastStrategy({scope:"list",attributeName:"listMarkerStyle",setAttributeOnDowncast(st,ht,mt){ht==tt.listMarkerStyle?(st.addClass(["multi-level-list",tt.className],mt),st.setStyle("list-style-type","none",mt)):(st.removeClass(["multi-level-list",tt.className],mt),st.removeStyle("list-style-type",mt))}}),Le.registerDowncastStrategy({scope:"itemMarker",attributeName:"listMarker",createElement(st,ht,{dataPipeline:mt}){if(!ht.hasAttribute("listMarker")||ht.getAttribute("listType")!=tt.listType||ht.getAttribute("listMarkerStyle")!=tt.listMarkerStyle)return null;const gt=ht.getAttribute("listMarker")+" ";return st.createUIElement("span",{class:"multi-level-list__marker",...!mt&&{contenteditable:"false","data-multi-level-list-marker":gt}},function(bt){const _t=this.toDomElement(bt);return mt&&_t.appendChild(bt.createTextNode(gt)),_t})},canInjectMarkerIntoElement:st=>de.schema.checkChild(st,"$text")&&de.schema.checkChild(st,"$inlineObject")&&!de.schema.isLimit(st)&&st.getAttribute("listType")==tt.listType&&st.getAttribute("listMarkerStyle")==tt.listMarkerStyle});t.conversion.for("upcast").add(tt=>{tt.on("element:span",function(st){return(ht,mt,{writer:gt,consumable:bt})=>{const _t=mt.modelCursor,vt=_t.parent,Tt=mt.viewItem;if(bt.consume(Tt,{name:!0,classes:"multi-level-list__marker"})&&_t.isAtStart&&vt.hasAttribute("listType")&&Tt.childCount>0){const St=st.createRangeIn(Tt);let Rt="";for(const Pt of St.getItems())Pt.is("$textProxy")&&(Rt+=Pt.data.trim(),bt.consume(Pt.textNode));gt.setAttribute("listMarker",Rt.trim(),vt)}}}(pe))}),Le.on("postFixer",(tt,{listNodes:st,writer:ht})=>{const mt=[];for(const{node:gt,previousNodeInList:bt}of st){const _t=gt.getAttribute("listType"),vt=gt.getAttribute("listMarkerStyle")||(_t=="customNumbered"?"legal":void 0),Tt=this._listDefinitions.find(Pt=>Pt.listType==_t&&Pt.listMarkerStyle==vt);if(_t!="customNumbered"&&_t!="customBulleted"&&(gt.hasAttribute("listMarker")&&(ht.removeAttribute("listMarker",gt),tt.return=!0),gt.hasAttribute("listMarkerStyle")&&(ht.removeAttribute("listMarkerStyle",gt),tt.return=!0)),!Tt){_t!="customBulleted"||vt||(ht.setAttribute("listType","bulleted",gt),tt.return=!0);continue}gt.hasAttribute("listMarkerStyle")||(ht.setAttribute("listMarkerStyle",vt,gt),tt.return=!0);const St=gt.getAttribute("listIndent");if(bt&&bt.getAttribute("listItemId")==gt.getAttribute("listItemId"))continue;mt.length=St+1,bt||mt[St]?bt&&bt.getAttribute("listType")!=Tt.listType?mt[St]=1:mt[St]++:mt[St]=gt.getAttribute("listStart")||1;const Rt=f$1(St,Tt,mt);gt.getAttribute("listMarker")!=Rt&&(ht.setAttribute("listMarker",Rt,gt),tt.return=!0)}});const Ye=t.editing.view.document;this.listenTo(Ye,"clipboardOutput",(tt,st)=>{const ht=new Matcher({name:"span",classes:"multi-level-list__marker"}),mt=new Matcher({name:"ol",classes:"multi-level-list",styles:{"list-style-type":"none"}}),gt=new UpcastWriter(st.content.document),bt=[];for(const _t of gt.createRangeIn(st.content).getItems())_t.is("element")&&ht.match(_t)&&bt.push(_t),_t.is("element")&&mt.match(_t)&&gt.removeStyle("list-style-type",_t);for(const _t of bt)gt.remove(_t)})}afterInit(){(async function(t){const de=Et([82,55,77,70,68,115,80,105,69,50,122,109,65,99,88,67,73,54,110,52,72,107,90,49,103,84,119,85,104,117,56,53,111,116,81,98,121,66,57,78,83,108,89,97,114,86,102,79,51,71,75,120,74,101,112,48,76,106,100,87,113,118]),pe=383068201,Le=382880105^pe,Ye=window[Et([68,97,116,101])][Et([110,111,119])](),tt=t[Et([101,100,105,116,111,114])],st=new window[Et([80,114,111,109,105,115,101])](At=>{tt[Et([111,110,99,101])](Et([114,101,97,100,121]),At)}),ht={[Et([107,116,121])]:Et([69,67]),[Et([117,115,101])]:Et([115,105,103]),[Et([99,114,118])]:Et([80,45,50,53,54]),[Et([120])]:Et([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[Et([121])]:Et([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[Et([97,108,103])]:Et([69,83,50,53,54])},mt=tt[Et([99,111,110,102,105,103])][Et([103,101,116])](Et([108,105,99,101,110,115,101,75,101,121]));async function gt(){let At,Ft=null,zt=null;try{return mt==Et([71,80,76])?Et([78,111,116,65,108,108,111,119,101,100]):(At=Rt(),At?(At[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(zt=bt(At[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])],At[Et([106,116,105])])),await Pt()?qt()?Ut()?Et([69,120,112,105,114,101,100]):Gt()?(At[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([101,118,97,108,117,97,116,105,111,110])&&(Ft=_t(Et([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),At[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([116,114,105,97,108])&&(Ft=_t(Et([84,114,105,97,108,76,105,109,105,116]))),await Nt()):Et([68,111,109,97,105,110,76,105,109,105,116]):Et([78,111,116,65,108,108,111,119,101,100]):Et([73,110,118,97,108,105,100])):Et([73,110,118,97,108,105,100]))}catch{return Et([73,110,118,97,108,105,100])}function Ut(){const jt=[Et([101,118,97,108,117,97,116,105,111,110]),Et([116,114,105,97,108])][Et([105,110,99,108,117,100,101,115])](At[Et([108,105,99,101,110,115,101,84,121,112,101])])?Ye/1e3:3600*Le;return At[Et([101,120,112])]<jt}function qt(){const jt=At[Et([102,101,97,116,117,114,101,115])];return!!jt&&(!!jt[Et([105,110,99,108,117,100,101,115])](Et([42]))||!!jt[Et([105,110,99,108,117,100,101,115])](Et([77,76,76])))}function Gt(){const jt=At[Et([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!jt||jt[Et([108,101,110,103,116,104])]==0)return!0;const{hostname:Qt}=new URL(window[Et([108,111,99,97,116,105,111,110])].href);if(jt[Et([105,110,99,108,117,100,101,115])](Qt))return!0;const Kt=Qt[Et([115,112,108,105,116])](Et([46]));return jt[Et([102,105,108,116,101,114])](Vt=>Vt[Et([105,110,99,108,117,100,101,115])](Et([42])))[Et([109,97,112])](Vt=>Vt[Et([115,112,108,105,116])](Et([46])))[Et([115,111,109,101])](Vt=>Kt[Et([101,118,101,114,121])]((en,cn)=>Vt[cn]===en||Vt[cn]===Et([42])))}function Nt(){return Ft&&zt?new window[Et([80,114,111,109,105,115,101])]((jt,Qt)=>{Ft[Et([116,104,101,110])](jt,Qt),zt[Et([116,104,101,110])](Kt=>{Kt!=Et([86,97,108,105,100])&&jt(Kt)},Qt)}):Ft||zt||Et([86,97,108,105,100])}}function bt(At,Ft){return new window[Et([80,114,111,109,105,115,101])](qt=>{if(zt())return qt(Et([86,97,108,105,100]));Ut(),tt[Et([100,101,99,111,114,97,116,101])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let Gt=!1;const Nt=uid();function jt(Kt){return!!Kt&&(typeof Kt===Et([111,98,106,101,99,116])||typeof Kt===Et([102,117,110,99,116,105,111,110]))&&typeof Kt[Et([116,104,101,110])]===Et([102,117,110,99,116,105,111,110])&&typeof Kt[Et([99,97,116,99,104])]===Et([102,117,110,99,116,105,111,110])}function Qt(Kt){nn(Kt)[Et([116,104,101,110])](sn=>!sn||sn[Et([115,116,97,116,117,115])]!=Et([111,107])?Et([85,115,97,103,101,76,105,109,105,116]):Dt(Bt(Nt+Ft))!=sn[Et([118,101,114,105,102,105,99,97,116,105,111,110])]?Et([85,115,97,103,101,76,105,109,105,116]):Et([86,97,108,105,100]))[Et([116,104,101,110])](sn=>(en(),sn),()=>{const sn=cn();return sn==null?(en(),Et([86,97,108,105,100])):Et(Ye-sn>(853126185^pe)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[Et([116,104,101,110])](qt)[Et([99,97,116,99,104])](()=>{qt(Et([85,115,97,103,101,76,105,109,105,116]))});const Vt=384026281^pe;function en(){const sn=Et([108,108,99,116,45])+Dt(Bt(At)),un=$t(Dt(window[Et([77,97,116,104])][Et([99,101,105,108])](Ye/Vt)));window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([115,101,116,73,116,101,109])](sn,un)}function cn(){const sn=Et([108,108,99,116,45])+Dt(Bt(At)),un=window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([103,101,116,73,116,101,109])](sn);return un?window[Et([112,97,114,115,101,73,110,116])]($t(un),16)*Vt:null}function nn(sn){return new window[Et([80,114,111,109,105,115,101])]((un,dn)=>{sn[Et([116,104,101,110])](un,dn),window[Et([115,101,116,84,105,109,101,111,117,116])](dn,383057129^pe)})}}tt[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(Kt,Vt)=>{if(Vt[0]!=At)return qt(Et([85,115,97,103,101,76,105,109,105,116]));Vt[1]={...Vt[1],[Et([114,101,113,117,101,115,116,73,100])]:Nt}},{[Et([112,114,105,111,114,105,116,121])]:Et([104,105,103,104])}),tt[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),Kt=>{jt(Kt[Et([114,101,116,117,114,110])])&&(Gt=!0,Qt(Kt[Et([114,101,116,117,114,110])]))},{[Et([112,114,105,111,114,105,116,121])]:Et([108,111,119])}),st[Et([116,104,101,110])](()=>{Gt||qt(Et([85,115,97,103,101,76,105,109,105,116]))})});function zt(){return tt[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==Et([97,117,116,111])}function Ut(){tt[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=Et([97,117,116,111])}}function _t(At){const Ft=[new window[Et([80,114,111,109,105,115,101])](zt=>setTimeout(zt,383522533^pe)),st[Et([116,104,101,110])](()=>new window[Et([80,114,111,109,105,115,101])](zt=>{let Ut=0;tt[Et([109,111,100,101,108])][Et([111,110])](Et([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(qt,Gt)=>{Gt[0][Et([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&Ut++,Ut==(383068625^pe)&&(zt(),qt[Et([111,102,102])]())})}))];return window[Et([80,114,111,109,105,115,101])][Et([114,97,99,101])](Ft)[Et([116,104,101,110])](()=>At)}async function vt(){await st,tt[Et([109,111,100,101,108])][Et([99,104,97,110,103,101])]=kt,tt[Et([109,111,100,101,108])][Et([101,110,113,117,101,117,101,67,104,97,110,103,101])]=kt,tt[Et([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](Et([109,111,100,101,108]))}function Tt(At){const Ft=St();tt[Ft]=Et([109,117,108,116,105,76,101,118,101,108,76,105,115,116,76,105,99,101,110,115,101,75,101,121])+At,At!=Et([86,97,108,105,100])&&vt()}function St(){const At=window[Et([83,116,114,105,110,103])](window[Et([112,101,114,102,111,114,109,97,110,99,101])][Et([110,111,119])]())[Et([114,101,112,108,97,99,101])](Et([46]),"");let Ft=Et([82]);for(let zt=0;zt<At[Et([108,101,110,103,116,104])];zt+=2){let Ut=window[Et([112,97,114,115,101,73,110,116])](At[Et([115,117,98,115,116,114,105,110,103])](zt,zt+2));Ut>=de[Et([108,101,110,103,116,104])]&&(Ut-=de[Et([108,101,110,103,116,104])]),Ft+=de[Ut]}return Ft}function Rt(){const At=mt[Et([115,112,108,105,116])](Et([46]));if(At[Et([108,101,110,103,116,104])]!=3)return null;return Ft(At[1]);function Ft(zt){const Ut=Ot(zt);return Ut&&qt()?Ut:null;function qt(){const Gt=Ut[Et([106,116,105])],Nt=window[Et([112,97,114,115,101,73,110,116])](Gt[Et([115,117,98,115,116,114,105,110,103])](Gt[Et([108,101,110,103,116,104])]-8),16),jt={...Ut,[Et([106,116,105])]:Gt[Et([115,117,98,115,116,114,105,110,103])](0,Gt[Et([108,101,110,103,116,104])]-8)};return delete jt[Et([118,99])],Bt(jt)==Nt}}}async function Pt(){let At=!0;try{const Ut=mt[Et([115,112,108,105,116])](Et([46])),[qt,Gt,Nt]=Ut;return Ft(qt),await zt(qt,Gt,Nt),At}catch{return!1}function Ft(Ut){const qt=Ot(Ut);qt&&qt[Et([97,108,103])]==Et([69,83,50,53,54])||(At=!1)}async function zt(Ut,qt,Gt){const Nt=window[Et([85,105,110,116,56,65,114,114,97,121])][Et([102,114,111,109])](Mt(Gt),Vt=>Vt[Et([99,104,97,114,67,111,100,101,65,116])](0)),jt=new window[Et([84,101,120,116,69,110,99,111,100,101,114])]()[Et([101,110,99,111,100,101])](Ut+Et([46])+qt),Qt=window[Et([99,114,121,112,116,111])][Et([115,117,98,116,108,101])];if(!Qt)return;const Kt=await Qt[Et([105,109,112,111,114,116,75,101,121])](Et([106,119,107]),ht,{[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([110,97,109,101,100,67,117,114,118,101])]:Et([80,45,50,53,54])},!1,[Et([118,101,114,105,102,121])]);await Qt[Et([118,101,114,105,102,121])]({[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([104,97,115,104])]:{[Et([110,97,109,101])]:Et([83,72,65,45,50,53,54])}},Kt,Nt,jt)||(At=!1)}}function Ot(At){return At[Et([115,116,97,114,116,115,87,105,116,104])](Et([101,121]))?JSON[Et([112,97,114,115,101])](Mt(At)):null}function Mt(At){return window[Et([97,116,111,98])](At[Et([114,101,112,108,97,99,101])](/-/g,Et([43]))[Et([114,101,112,108,97,99,101])](/_/g,Et([47])))}function Bt(At){let Ft=5381;function zt(qt){for(let Gt=0;Gt<qt[Et([108,101,110,103,116,104])];Gt++){const Nt=qt[Et([99,104,97,114,67,111,100,101,65,116])](Gt);Ft=(Ft<<5)+Ft+Nt,Ft&=Ft}}function Ut(qt){Array[Et([105,115,65,114,114,97,121])](qt)?qt[Et([102,111,114,69,97,99,104])](Ut):qt&&typeof qt==Et([111,98,106,101,99,116])?Object[Et([101,110,116,114,105,101,115])](qt)[Et([115,111,114,116])]()[Et([102,111,114,69,97,99,104])](([Gt,Nt])=>{zt(Gt),Ut(Nt)}):zt(window[Et([83,116,114,105,110,103])](qt))}return Ut(At),Ft>>>0}function Dt(At){return At[Et([116,111,83,116,114,105,110,103])](16)[Et([112,97,100,83,116,97,114,116])](8,Et([48]))}function $t(At){return At[Et([115,112,108,105,116])]("")[Et([114,101,118,101,114,115,101])]()[Et([106,111,105,110])]("")}function kt(){}function Et(At){return At.map(Ft=>String.fromCharCode(Ft)).join("")}Tt(await gt())})(this)}};function f$1(me,u,t){let de=u.listMarkers[me%u.listMarkers.length];if(de.showMarkerPath===void 0||de.showMarkerPath)return t.slice(0,me+1).map((pe,Le)=>(de=u.listMarkers[Le%u.listMarkers.length],w(de.marker,pe))).join("");{const pe=t[t.length-1];return w(de.marker,pe)}}function w(me,u){return typeof me=="function"?me(u):me}function m$2(me,u){return(t,de,pe)=>{const Le=de.viewItem;if(de.modelRange||Object.assign(de,pe.convertChildren(de.viewItem,de.modelCursor)),!pe.consumable.test(Le,{classes:me.className}))return;const Ye=Array.from(de.modelRange.getItems({shallow:!0})).filter(st=>u.checkAttribute(st,"listItemId"));if(!Ye.length)return;pe.consumable.consume(Le,{classes:me.className}),pe.consumable.consume(Le,{classes:"multi-level-list"}),pe.consumable.consume(Le,{styles:"list-style-type"});const tt=Ye[0].getAttribute("listIndent");for(const st of Ye)st.getAttribute("listIndent")==tt&&(pe.writer.setAttribute("listType",me.listType,st),pe.writer.setAttribute("listMarkerStyle",me.listMarkerStyle,st))}}function K$1(me,u){const t=me.t,de=me.t;switch(u){case"Start at":return t("Start at");case"Start index must be greater than 0.":return t("Start index must be greater than 0.");case"Invalid start index value.":return t("Invalid start index value.");case"List properties":return t("List properties");case"Multi-level List":return de("Multi-level List");case"Multi-level list styles toolbar":return de("Multi-level list styles toolbar");default:return u}}class C extends View{constructor(t,{enabledProperties:de,styleButtonViews:pe,styleGridAriaLabel:Le}){super(t);wt(this,"children");wt(this,"stylesView",null);wt(this,"additionalPropertiesCollapsibleView",null);wt(this,"startIndexFieldView",null);wt(this,"focusTracker",new FocusTracker);wt(this,"keystrokes",new KeystrokeHandler);wt(this,"focusables",new ViewCollection);wt(this,"focusCycler");const Ye=["ck","ck-multi-level-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),de.styles?(this.stylesView=this._createStylesView(pe,Le),this.children.add(this.stylesView)):Ye.push("ck-multi-level-list-properties_without-styles"),de.startIndex&&(this._addListPropertyViews(de),Ye.push("ck-multi-level-list-properties_with-multi-level-properties")),this.setTemplate({tag:"div",attributes:{class:Ye},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),this.startIndexFieldView&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=de=>de.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,de){const pe=new View(this.locale);return pe.children=pe.createCollection(),pe.children.addMany(t),pe.setTemplate({tag:"div",attributes:{"aria-label":de,class:["ck","ck-multi-level-list-styles"]},children:pe.children}),pe.children.delegate("execute").to(this),pe.focus=function(){this.children.first.focus()},pe.focusTracker=new FocusTracker,pe.keystrokes=new KeystrokeHandler,pe.render(),pe.keystrokes.listenTo(pe.element),pe}_addListPropertyViews(t){const de=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),de.push(this.startIndexFieldView)),t.styles?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,de),this.additionalPropertiesCollapsibleView.set({label:K$1(this.locale,"List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(de,"isEnabled",(...pe)=>pe.some(Le=>Le)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(pe,Le,Ye)=>{Ye||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(de)}_createStartIndexField(){const t=new LabeledFieldView(this.locale,createLabeledInputNumber);return t.set({label:K$1(this.locale,"Start at"),class:"ck-multi-level-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const de=t.fieldView.element,pe=de.valueAsNumber;Number.isNaN(pe)?t.errorText=K$1(this.locale,"Invalid start index value."):de.checkValidity()?this.fire("listStart",{startIndex:pe}):t.errorText=K$1(this.locale,"Start index must be greater than 0.")}),t}}var b$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.85 6.5a.75.75 0 0 1 0-1.5h9.5a.75.75 0 1 1 0 1.5h-9.5Z"/><path d="M3 8V2.7H.5v1h1V8H3Z"/><path d="M13.42 14.185a.75.75 0 0 0 .53 1.28h3.4a.75.75 0 1 0 0-1.5h-3.4a.75.75 0 0 0-.53.22Z"/><path d="M5.636 8.035V6.8H4.4v1.235h1.236Z"/><path d="M9 17.865v-5.3H6.5v1h1v4.3H9Z"/><path d="M11.636 17.9v-1.235H10.4V17.9h1.236Z"/><path d="M3.2 17.865v-5.3H.7v1h1v4.3h1.5Z"/><path d="M5.836 17.9v-1.235H4.6V17.9h1.236Z"/></svg>';let l$1=class extends Plugin{constructor(){super(...arguments);wt(this,"licenseKey");wt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"MultiLevelListUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("multiLevelList",function({editor:pe,parentCommandName:Le,buttonLabel:Ye,buttonIcon:tt,styleGridAriaLabel:st,styleDefinitions:ht}){const mt=pe.commands.get(Le),gt=pe.config.get("list.properties")||{},bt=pe.plugins.has("ListProperties"),_t=gt.startIndex;return!bt||!_t?vt=>{const Tt=new ButtonView(vt);return Tt.set({label:Ye,icon:tt,tooltip:!0,isToggleable:!0}),Tt.bind("isOn").to(mt,"value",St=>!!St),Tt.on("execute",()=>{pe.execute(Le),pe.editing.view.focus()}),Tt}:vt=>{const Tt=createDropdown(vt,SplitButtonView),St=Tt.buttonView;return Tt.bind("isEnabled").to(mt),Tt.class="ck-list-styles-dropdown",St.on("execute",()=>{pe.execute(Le),pe.editing.view.focus()}),St.set({label:Ye,icon:tt,tooltip:!0,isToggleable:!0}),St.bind("isOn").to(mt,"value",Rt=>!!Rt),Tt.once("change:isOpen",()=>{const Rt=function({editor:Pt,dropdownView:Ot,styleDefinitions:Mt,styleGridAriaLabel:Bt}){const Dt=Pt.locale,$t=Pt.config.get("list.properties"),kt=null;$t.reversed=!1,Mt.length||($t.styles=!1);const Et=new C(Dt,{styleGridAriaLabel:Bt,enabledProperties:$t,styleButtonViews:kt});if($t.startIndex){const At=Pt.commands.get("listStart");Et.startIndexFieldView.bind("isEnabled").to(At),Et.startIndexFieldView.fieldView.bind("value").to(At),Et.on("listStart",(Ft,zt)=>Pt.execute("listStart",zt))}return Et.delegate("execute").to(Ot),Et}({editor:pe,dropdownView:Tt,styleGridAriaLabel:st,styleDefinitions:ht});Tt.panelView.children.add(Rt)}),Tt.on("execute",()=>{pe.editing.view.focus()}),Tt}}({editor:t,parentCommandName:"multiLevelList",buttonLabel:K$1(t.locale,"Multi-level List"),buttonIcon:b$1,styleGridAriaLabel:K$1(t.locale,"Multi-level list styles toolbar"),styleDefinitions:[]})),t.ui.componentFactory.add("menuBar:multiLevelList",()=>{const pe=t.commands.get("multiLevelList"),Le=new MenuBarMenuListItemButtonView(t.locale);return Le.set({label:K$1(t.locale,"Multi-level List"),icon:b$1}),Le.bind("isEnabled").to(pe),Le.bind("isOn").to(pe,"value",Ye=>!!Ye),Le.on("execute",()=>{t.execute("multiLevelList"),t.editing.view.focus()}),Le}),this.licenseKey=this.editor.config.get("licenseKey");const de=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let pe;for(const Le in de){const Ye=Le,tt=de[Ye];if(tt=="multiLevelListLicenseKeyValid"||tt=="multiLevelListLicenseKeyInvalid"||tt=="multiLevelListLicenseKeyExpired"||tt=="multiLevelListLicenseKeyDomainLimit"||tt=="multiLevelListLicenseKeyNotAllowed"||tt=="multiLevelListLicenseKeyEvaluationLimit"||tt=="multiLevelListLicenseKeyTrialLimit"||tt=="multiLevelListLicenseKeyUsageLimit"){delete de[Ye],pe=tt,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}pe=="multiLevelListLicenseKeyInvalid"&&de._showLicenseError("invalid"),pe=="multiLevelListLicenseKeyExpired"&&de._showLicenseError("expired"),pe=="multiLevelListLicenseKeyDomainLimit"&&de._showLicenseError("domainLimit"),pe=="multiLevelListLicenseKeyNotAllowed"&&de._showLicenseError("featureNotAllowed","MultiLevelList"),pe=="multiLevelListLicenseKeyEvaluationLimit"&&de._showLicenseError("evaluationLimit"),pe=="multiLevelListLicenseKeyTrialLimit"&&de._showLicenseError("trialLimit"),pe=="multiLevelListLicenseKeyUsageLimit"&&de._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}},s$2=class extends Plugin{static get pluginName(){return"MultiLevelList"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[i$2,l$1]}};class n extends Plugin{constructor(){super(...arguments);wt(this,"_recalculatePageBreaksDebounced",debounce(()=>this._recalculatePageBreaks(),200));wt(this,"_pagesContainer",null)}static get pluginName(){return"PaginationLookup"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){if(this.set({pageBreaks:[]}),!this.editor.config.get("pagination"))return void logWarning("pagination-config-not-found",this.editor.config);const t=this.editor.plugins.get("PaginationEditing");this.bind("isEnabled").to(t),this.editor.ui.once("ready",()=>this._onUiReady()),this.on("change:isEnabled",(de,pe,Le)=>{Le&&this._recalculatePageBreaksDebounced()})}afterInit(){(async function(t){const de=Et([53,77,101,109,66,82,79,86,107,119,122,72,75,71,74,50,56,68,89,97,85,100,103,48,76,69,49,104,80,114,78,105,112,111,106,113,67,110,118,120,84,90,51,108,98,52,81,54,116,65,115,55,117,87,99,57,121,88,70,102,83,73]),pe=116564407,Le=116769015^pe,Ye=window[Et([68,97,116,101])][Et([110,111,119])](),tt=t[Et([101,100,105,116,111,114])],st=new window[Et([80,114,111,109,105,115,101])](At=>{tt[Et([111,110,99,101])](Et([114,101,97,100,121]),At)}),ht={[Et([107,116,121])]:Et([69,67]),[Et([117,115,101])]:Et([115,105,103]),[Et([99,114,118])]:Et([80,45,50,53,54]),[Et([120])]:Et([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[Et([121])]:Et([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[Et([97,108,103])]:Et([69,83,50,53,54])},mt=tt[Et([99,111,110,102,105,103])][Et([103,101,116])](Et([108,105,99,101,110,115,101,75,101,121]));async function gt(){let At,Ft=null,zt=null;try{return mt==Et([71,80,76])?Et([78,111,116,65,108,108,111,119,101,100]):(At=Rt(),At?(At[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(zt=bt(At[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])],At[Et([106,116,105])])),await Pt()?qt()?Ut()?Et([69,120,112,105,114,101,100]):Gt()?(At[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([101,118,97,108,117,97,116,105,111,110])&&(Ft=_t(Et([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),At[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([116,114,105,97,108])&&(Ft=_t(Et([84,114,105,97,108,76,105,109,105,116]))),await Nt()):Et([68,111,109,97,105,110,76,105,109,105,116]):Et([78,111,116,65,108,108,111,119,101,100]):Et([73,110,118,97,108,105,100])):Et([73,110,118,97,108,105,100]))}catch{return Et([73,110,118,97,108,105,100])}function Ut(){const jt=[Et([101,118,97,108,117,97,116,105,111,110]),Et([116,114,105,97,108])][Et([105,110,99,108,117,100,101,115])](At[Et([108,105,99,101,110,115,101,84,121,112,101])])?Ye/1e3:3600*Le;return At[Et([101,120,112])]<jt}function qt(){const jt=At[Et([102,101,97,116,117,114,101,115])];return!!jt&&(!!jt[Et([105,110,99,108,117,100,101,115])](Et([42]))||!!jt[Et([105,110,99,108,117,100,101,115])](Et([80,65,71])))}function Gt(){const jt=At[Et([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!jt||jt[Et([108,101,110,103,116,104])]==0)return!0;const{hostname:Qt}=new URL(window[Et([108,111,99,97,116,105,111,110])].href);if(jt[Et([105,110,99,108,117,100,101,115])](Qt))return!0;const Kt=Qt[Et([115,112,108,105,116])](Et([46]));return jt[Et([102,105,108,116,101,114])](Vt=>Vt[Et([105,110,99,108,117,100,101,115])](Et([42])))[Et([109,97,112])](Vt=>Vt[Et([115,112,108,105,116])](Et([46])))[Et([115,111,109,101])](Vt=>Kt[Et([101,118,101,114,121])]((en,cn)=>Vt[cn]===en||Vt[cn]===Et([42])))}function Nt(){return Ft&&zt?new window[Et([80,114,111,109,105,115,101])]((jt,Qt)=>{Ft[Et([116,104,101,110])](jt,Qt),zt[Et([116,104,101,110])](Kt=>{Kt!=Et([86,97,108,105,100])&&jt(Kt)},Qt)}):Ft||zt||Et([86,97,108,105,100])}}function bt(At,Ft){return new window[Et([80,114,111,109,105,115,101])](qt=>{if(zt())return qt(Et([86,97,108,105,100]));Ut(),tt[Et([100,101,99,111,114,97,116,101])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let Gt=!1;const Nt=uid();function jt(Kt){return!!Kt&&(typeof Kt===Et([111,98,106,101,99,116])||typeof Kt===Et([102,117,110,99,116,105,111,110]))&&typeof Kt[Et([116,104,101,110])]===Et([102,117,110,99,116,105,111,110])&&typeof Kt[Et([99,97,116,99,104])]===Et([102,117,110,99,116,105,111,110])}function Qt(Kt){nn(Kt)[Et([116,104,101,110])](sn=>!sn||sn[Et([115,116,97,116,117,115])]!=Et([111,107])?Et([85,115,97,103,101,76,105,109,105,116]):Dt(Bt(Nt+Ft))!=sn[Et([118,101,114,105,102,105,99,97,116,105,111,110])]?Et([85,115,97,103,101,76,105,109,105,116]):Et([86,97,108,105,100]))[Et([116,104,101,110])](sn=>(en(),sn),()=>{const sn=cn();return sn==null?(en(),Et([86,97,108,105,100])):Et(Ye-sn>(587081143^pe)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[Et([116,104,101,110])](qt)[Et([99,97,116,99,104])](()=>{qt(Et([85,115,97,103,101,76,105,109,105,116]))});const Vt=113528631^pe;function en(){const sn=Et([108,108,99,116,45])+Dt(Bt(At)),un=$t(Dt(window[Et([77,97,116,104])][Et([99,101,105,108])](Ye/Vt)));window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([115,101,116,73,116,101,109])](sn,un)}function cn(){const sn=Et([108,108,99,116,45])+Dt(Bt(At)),un=window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([103,101,116,73,116,101,109])](sn);return un?window[Et([112,97,114,115,101,73,110,116])]($t(un),16)*Vt:null}function nn(sn){return new window[Et([80,114,111,109,105,115,101])]((un,dn)=>{sn[Et([116,104,101,110])](un,dn),window[Et([115,101,116,84,105,109,101,111,117,116])](dn,116618615^pe)})}}tt[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(Kt,Vt)=>{if(Vt[0]!=At)return qt(Et([85,115,97,103,101,76,105,109,105,116]));Vt[1]={...Vt[1],[Et([114,101,113,117,101,115,116,73,100])]:Nt}},{[Et([112,114,105,111,114,105,116,121])]:Et([104,105,103,104])}),tt[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),Kt=>{jt(Kt[Et([114,101,116,117,114,110])])&&(Gt=!0,Qt(Kt[Et([114,101,116,117,114,110])]))},{[Et([112,114,105,111,114,105,116,121])]:Et([108,111,119])}),st[Et([116,104,101,110])](()=>{Gt||qt(Et([85,115,97,103,101,76,105,109,105,116]))})});function zt(){return tt[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==Et([97,117,116,111])}function Ut(){tt[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=Et([97,117,116,111])}}function _t(At){const Ft=[new window[Et([80,114,111,109,105,115,101])](zt=>setTimeout(zt,117153659^pe)),st[Et([116,104,101,110])](()=>new window[Et([80,114,111,109,105,115,101])](zt=>{let Ut=0;tt[Et([109,111,100,101,108])][Et([111,110])](Et([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(qt,Gt)=>{Gt[0][Et([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&Ut++,Ut==(116564047^pe)&&(zt(),qt[Et([111,102,102])]())})}))];return window[Et([80,114,111,109,105,115,101])][Et([114,97,99,101])](Ft)[Et([116,104,101,110])](()=>At)}async function vt(){await st,tt[Et([109,111,100,101,108])][Et([99,104,97,110,103,101])]=kt,tt[Et([109,111,100,101,108])][Et([101,110,113,117,101,117,101,67,104,97,110,103,101])]=kt,tt[Et([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](Et([109,111,100,101,108]))}function Tt(At){const Ft=St();tt[Ft]=Et([112,97,103,105,110,97,116,105,111,110,76,105,99,101,110,115,101,75,101,121])+At,At!=Et([86,97,108,105,100])&&vt()}function St(){const At=window[Et([83,116,114,105,110,103])](window[Et([112,101,114,102,111,114,109,97,110,99,101])][Et([110,111,119])]())[Et([114,101,112,108,97,99,101])](Et([46]),"");let Ft=Et([77]);for(let zt=0;zt<At[Et([108,101,110,103,116,104])];zt+=2){let Ut=window[Et([112,97,114,115,101,73,110,116])](At[Et([115,117,98,115,116,114,105,110,103])](zt,zt+2));Ut>=de[Et([108,101,110,103,116,104])]&&(Ut-=de[Et([108,101,110,103,116,104])]),Ft+=de[Ut]}return Ft}function Rt(){const At=mt[Et([115,112,108,105,116])](Et([46]));if(At[Et([108,101,110,103,116,104])]!=3)return null;return Ft(At[1]);function Ft(zt){const Ut=Ot(zt);return Ut&&qt()?Ut:null;function qt(){const Gt=Ut[Et([106,116,105])],Nt=window[Et([112,97,114,115,101,73,110,116])](Gt[Et([115,117,98,115,116,114,105,110,103])](Gt[Et([108,101,110,103,116,104])]-8),16),jt={...Ut,[Et([106,116,105])]:Gt[Et([115,117,98,115,116,114,105,110,103])](0,Gt[Et([108,101,110,103,116,104])]-8)};return delete jt[Et([118,99])],Bt(jt)==Nt}}}async function Pt(){let At=!0;try{const Ut=mt[Et([115,112,108,105,116])](Et([46])),[qt,Gt,Nt]=Ut;return Ft(qt),await zt(qt,Gt,Nt),At}catch{return!1}function Ft(Ut){const qt=Ot(Ut);qt&&qt[Et([97,108,103])]==Et([69,83,50,53,54])||(At=!1)}async function zt(Ut,qt,Gt){const Nt=window[Et([85,105,110,116,56,65,114,114,97,121])][Et([102,114,111,109])](Mt(Gt),Vt=>Vt[Et([99,104,97,114,67,111,100,101,65,116])](0)),jt=new window[Et([84,101,120,116,69,110,99,111,100,101,114])]()[Et([101,110,99,111,100,101])](Ut+Et([46])+qt),Qt=window[Et([99,114,121,112,116,111])][Et([115,117,98,116,108,101])];if(!Qt)return;const Kt=await Qt[Et([105,109,112,111,114,116,75,101,121])](Et([106,119,107]),ht,{[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([110,97,109,101,100,67,117,114,118,101])]:Et([80,45,50,53,54])},!1,[Et([118,101,114,105,102,121])]);await Qt[Et([118,101,114,105,102,121])]({[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([104,97,115,104])]:{[Et([110,97,109,101])]:Et([83,72,65,45,50,53,54])}},Kt,Nt,jt)||(At=!1)}}function Ot(At){return At[Et([115,116,97,114,116,115,87,105,116,104])](Et([101,121]))?JSON[Et([112,97,114,115,101])](Mt(At)):null}function Mt(At){return window[Et([97,116,111,98])](At[Et([114,101,112,108,97,99,101])](/-/g,Et([43]))[Et([114,101,112,108,97,99,101])](/_/g,Et([47])))}function Bt(At){let Ft=5381;function zt(qt){for(let Gt=0;Gt<qt[Et([108,101,110,103,116,104])];Gt++){const Nt=qt[Et([99,104,97,114,67,111,100,101,65,116])](Gt);Ft=(Ft<<5)+Ft+Nt,Ft&=Ft}}function Ut(qt){Array[Et([105,115,65,114,114,97,121])](qt)?qt[Et([102,111,114,69,97,99,104])](Ut):qt&&typeof qt==Et([111,98,106,101,99,116])?Object[Et([101,110,116,114,105,101,115])](qt)[Et([115,111,114,116])]()[Et([102,111,114,69,97,99,104])](([Gt,Nt])=>{zt(Gt),Ut(Nt)}):zt(window[Et([83,116,114,105,110,103])](qt))}return Ut(At),Ft>>>0}function Dt(At){return At[Et([116,111,83,116,114,105,110,103])](16)[Et([112,97,100,83,116,97,114,116])](8,Et([48]))}function $t(At){return At[Et([115,112,108,105,116])]("")[Et([114,101,118,101,114,115,101])]()[Et([106,111,105,110])]("")}function kt(){}function Et(At){return At.map(Ft=>String.fromCharCode(Ft)).join("")}Tt(await gt())})(this)}destroy(){super.destroy(),this._pagesContainer&&(this._recalculatePageBreaksDebounced.cancel(),this._pagesContainer.destroy(),this._pagesContainer.element.remove())}_onUiReady(){const t=this.editor,de=t.editing.view,pe=this._getAttachedDomRoot();if(!pe||pe.childElementCount===0)return void t.ui.once("update",()=>this._onUiReady());const{pageWidth:Le,pageHeight:Ye}=t.config.get("pagination"),{top:tt,left:st,bottom:ht,right:mt}=this._configuredPaddings;this._pagesContainer=new View(t.locale);const gt=this._pagesContainer;gt.set("class",""),gt.setTemplate({tag:"div",attributes:{contenteditable:!0,style:{columnWidth:Le,width:Le,height:"calc( "+Ye+" - "+tt+" - "+ht+" )",minWidth:"auto",minHeight:"auto",padding:"0 "+mt+" 0 "+st,columnGap:"100px",border:0,boxSizing:"border-box",columnCount:"auto",columnFill:"auto",overflow:"hidden",position:"absolute",top:"-99999px",left:"-99999px"},tabindex:"-1",class:gt.bindTemplate.to("class")}}),gt.render(),pe.parentNode.insertBefore(gt.element,pe.nextSibling),this.listenTo(de,"render",()=>this._recalculatePageBreaksDebounced(),{priority:"low"}),this._recalculatePageBreaksDebounced()}_getAttachedDomRoot(){for(const t of this.editor.editing.view.domRoots.values())if(t.ownerDocument.body.contains(t))return t;return null}_recalculatePageBreaks(){if(!this.isEnabled)return Promise.resolve();const t=this.editor.editing.view,de=this._pagesContainer,pe=this._getAttachedDomRoot();if(!pe)return Promise.resolve();for(de.class=["ck-reset","ck-pagination-view",...pe.classList].join(" ");de.element.firstChild;)de.element.firstChild.remove();const Le=Array.from(t.domRoots);Le.sort(([,Ye],[,tt])=>Ye.compareDocumentPosition(tt)==Node.DOCUMENT_POSITION_PRECEDING?1:-1);for(const[Ye,tt]of Le){const st=tt.cloneNode(!0);"attributeStyleMap"in st&&st.attributeStyleMap.clear(),st.className="",st.removeAttribute("id"),st.dataset.rootName=Ye,de.element.append(st)}return function(Ye){return Promise.all(Ye.map(tt=>Promise.race([p(tt),y$1(1e3)])))}(Array.from(de.element.querySelectorAll("img"))).then(()=>this._updatePageBreaksData())}_updatePageBreaksData(){const t=this._pagesContainer.element;if(!t.ownerDocument.body.contains(t))return;const de=new Rect(t).excludeScrollbarsAndBorders(),pe=global$1.window.getComputedStyle(t),Le=parseFloat(pe.paddingLeft)+parseFloat(pe.paddingRight),Ye=Math.floor(de.width+100-Le),tt=x$1(t,Math.floor(de.left-t.scrollLeft),Ye,de.height).map(st=>this._mapPageStarterInfoToPageBreakInfo(st));tt.every(st=>!!st)&&(this.pageBreaks=tt)}_mapPageStarterInfoToPageBreakInfo(t){const de=this.editor.editing.view,pe=this.editor.editing.mapper,Le=de.domConverter,Ye=t.path.shift(),tt=this._pagesContainer.element.childNodes[Ye].dataset.rootName,st=de.getDomRoot(tt);if(!st)return null;const ht=function(gt,bt){let _t=gt;for(const vt of bt.path){if(!_t)return null;_t=_t.childNodes[vt]}return _t}(st,t);if(!ht)return null;const mt=Le.domPositionToView(ht,t.textOffset||0);return mt?t.type=="manual"?this._mapManualPageStarterInfoToPageBreakInfo(mt,ht):t.type=="text"&&pe.toModelPosition(mt).offset?this._mapTextPageStarterInfoToPageBreakInfo(mt,ht,t.textOffset):this._mapElementPageStarterInfoToPageBreakInfo(mt,ht,t.offset):null}_mapManualPageStarterInfoToPageBreakInfo(t,de){const pe=this.editor.model,Le=this.editor.editing.mapper.toModelElement(t.parent),Ye=pe.createRangeOn(Le);return new K({type:"manual",modelRange:Ye,domNode:de,offset:0})}_mapTextPageStarterInfoToPageBreakInfo(t,de,pe){const Le=this.editor.model,Ye=this.editor.editing.mapper,tt=this.editor.editing.view.domConverter;if(pe>=de.length)return null;const st=Ye.toModelPosition(t),ht=Le.createRange(st),mt=Ye.findMappedViewAncestor(t),gt=tt.mapViewToDom(mt);return new K({type:"text",modelRange:ht,domNode:de,offset:m$1(de,pe,gt)})}_mapElementPageStarterInfoToPageBreakInfo(t,de,pe){const Le=this.editor.model,Ye=this.editor.editing,tt=Ye.mapper,st=Ye.view.domConverter,ht=tt.findMappedViewAncestor(t),mt=tt.toModelElement(ht),gt=function(Mt){const Bt=Mt.parent,Dt=Bt.root.document.model,$t=Bt.getAncestors({parentFirst:!0,includeSelf:!0});let kt=null;for(const Et of $t){if(Et.is("rootElement")||!Dt.createPositionBefore(Et).isTouching(Mt))return kt;kt=Et}}(Le.createPositionBefore(mt)),bt=gt||mt;let _t=tt.toViewElement(bt),vt=Le.createRangeOn(bt);const Tt=Le.createPositionBefore(bt).nodeBefore;if(Tt&&Tt.is("element","imageBlock")){const Mt=tt.toViewElement(Tt),Bt=st.mapViewToDom(Mt),Dt=global$1.window.getComputedStyle(Bt).float;Dt!="left"&&Dt!="right"||(vt=Le.createRangeOn(Tt))}for(;_t.parent!==_t.root&&_t.index===0;)_t=_t.parent;const St=new Rect(N(de)?de:P$1(de)),Rt=pe?St.height-pe:0,Pt=st.mapViewToDom(_t),Ot=new Rect(Pt);return new K({type:"element",modelRange:vt,domNode:Pt,offset:Math.round(Rt)?Rt+St.top-Ot.top:0})}get _configuredPaddings(){const t=this.editor.config.get("pagination.pageMargins");return Object.assign({top:"10mm",bottom:"10mm",left:"10mm",right:"10mm"},t)}static _findPageStarterInfos(t,de,pe,Le,Ye){return x$1(t,de,pe,Le,Ye)}}class K{constructor({type:u,modelRange:t,domNode:de,offset:pe}){wt(this,"type");wt(this,"modelRange");wt(this,"_domNode");wt(this,"_offset");this.type=u,this.modelRange=t,this._domNode=de,this._offset=pe}get offset(){if(!this._domNode.ownerDocument.body.contains(this._domNode))return 0;const u=new Rect(N(this._domNode)?this._domNode:P$1(this._domNode));return this.type=="manual"?u.top+u.height/2:u.top+this._offset}}function m$1(me,u,t){const de=P$1(me),pe=function(st){const ht=global$1.document.createRange();return ht.selectNodeContents(st),ht}(t);let Le;Le=u==0?b(pe.startContainer,pe.startOffset,me.parentNode,Array.from(me.parentNode.childNodes).indexOf(me)):b(pe.startContainer,pe.startOffset,me,u);const Ye=b(me,u,pe.endContainer,pe.endOffset),tt=new Rect(Le).bottom;return(new Rect(Ye).top+tt)/2-new Rect(de).top}function p(me){return me.hasAttribute("width")&&me.hasAttribute("height")?Promise.resolve():new Promise(u=>{function t(){me.removeEventListener("load",t),me.removeEventListener("error",t),u()}me.complete?u():(me.addEventListener("load",t),me.addEventListener("error",t))})}function y$1(me){return new Promise(u=>setTimeout(u,me))}function P$1(me){const u=global$1.document.createRange();return u.selectNode(me),u}function k(me,u,t){const de=global$1.document.createRange();return de.setStart(me,u),de.setEnd(me,t),de}function b(me,u,t,de){const pe=global$1.document.createRange();return pe.setStart(me,u),pe.setEnd(t,de),pe}function x$1(me,u,t,de,pe){const Le=[];for(const[Ye,tt]of me.childNodes.entries()){let st=[];N(tt)&&tt.offsetParent&&!tt.style.position?st=I(tt,Ye,u,t,de,pe):M(tt)&&(st=B(tt,Ye,u,t,pe)),st.length&&(Le.push(...st),u+=st.length*t,pe=!1)}return Le}function I(me,u,t,de,pe,Le){const Ye=[];var tt;if((tt=me.previousSibling)&&N(tt)&&(tt.classList.contains("page-break")||tt.closest(".page-break"))&&(Ye.push({type:"manual",offset:0,path:[u-1]}),Le=!0),global$1.window.getComputedStyle(me).display=="table-row"){let mt=0,gt=!1;for(const bt of me.getClientRects())mt+=bt.height,bt.left>=t&&(gt=!0);if(mt<pe&&gt)return Ye.push({type:"element",offset:0,path:[u]}),Ye}const st=me.closest("figure.image");if(st&&function(mt){let gt=!1;const bt=mt.parentElement,_t=bt.dataset.rootName,vt=mt.nextElementSibling,Tt=mt.previousElementSibling,St=vt&&global$1.window.getComputedStyle(vt).float,Rt=vt&&vt.className==="ck-fake-selection-container";return!_t||vt||Tt||(gt=!0),_t&&!Tt&&Rt&&(gt=!0),_t&&!Tt&&St!=="none"&&(gt=!0),!gt}(st)){const mt=global$1.window.getComputedStyle(st).float;if(mt=="left"||mt=="right")return Ye}const ht=x$1(me,t,de,pe,Le);if(ht.length){for(const mt of ht)Ye.push({type:mt.type,offset:mt.offset,textOffset:mt.textOffset,path:[u,...mt.path]}),t+=de,Le=!1;return Ye}return Ye.push(...function(mt,gt,bt,_t,vt){const Tt=[];if(global$1.window.getComputedStyle(mt).display=="table-cell")return[];const St=[];for(const Rt of mt.getClientRects())if(Rt.left>=bt){for(const Pt of St)Pt.height+=Rt.height;St.push({height:Rt.height}),bt+=_t}for(const Rt of St)vt||Tt.push({type:"element",offset:Rt.height,textOffset:0,path:[gt]}),vt=!1;return Tt}(me,u,t,de,Le)),Ye}function B(me,u,t,de,pe){const Le=P$1(me),Ye=[];let tt=0;for(const st of Le.getClientRects())if(st.left>=t){const ht=_(me,tt,t,de);pe||Ye.push({type:"text",path:[u],textOffset:ht}),tt=ht,t+=de,pe=!1}return Ye}function _(me,u,t,de){let pe=u,Le=me.length;for(;Le-pe>1;){const Ye=Math.ceil((pe+Le)/2);S$1(k(me,pe,Ye),t,de)?Le=Ye:pe=Ye}return pe}function S$1(me,u,t){for(const de of me.getClientRects())if(de.left>=u&&de.left<u+t)return!0;return!1}function N(me){return me.nodeType==Node.ELEMENT_NODE}function M(me){return me.nodeType==Node.TEXT_NODE}const z=toUnit("px");class q extends View{constructor(){super();const u=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null,pageNumber:null}),this.setTemplate({tag:"div",attributes:{"data-page-number":u.to("pageNumber"),class:["ck","ck-pagination-view-line",u.if("isVisible","ck-hidden",t=>!t)],style:{left:u.to("left",t=>z(t)),top:u.to("top",t=>z(t)),width:u.to("width",t=>z(t))}}})}}let O$1=class{constructor(u){wt(this,"_viewCollection");wt(this,"_visibleLines",new Set);wt(this,"_hiddenLines",new Set);this._viewCollection=u.ui.view.body}destroy(){for(const u of this._hiddenLines)u.destroy()}cleanLines(){for(const u of this._visibleLines)u.isVisible=!1,this._hiddenLines.add(u);this._visibleLines.clear()}showLine(u,t,de,pe){let Le;this._hiddenLines.size?(Le=first(this._hiddenLines.values()),this._hiddenLines.delete(Le)):Le=new q,Le.set({pageNumber:pe,left:u,top:t,width:de}),Le.isVisible=!0,this._viewCollection.has(Le)||this._viewCollection.add(Le),this._visibleLines.add(Le)}};const E$1="ck-pagination_enabled";class g extends Plugin{constructor(){super(...arguments);wt(this,"_linesRepository");wt(this,"_scrollableEditingRootDomAncestor",null);wt(this,"_resizeObserver",null);wt(this,"_paginationLookupPlugin")}static get pluginName(){return"PaginationRenderer"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){this.set({pageNumber:1}),this._linesRepository=new O$1(this.editor),this._scrollableEditingRootDomAncestor=null,this._resizeObserver=null,this._paginationLookupPlugin=this.editor.plugins.get("PaginationLookup"),this.bind("isEnabled").to(this.editor.plugins.get("PaginationEditing")),this.editor.ui.once("ready",()=>this._onUiReady()),this._toggleEditingRootsClass(E$1),this.on("change:isEnabled",(t,de,pe)=>{pe||this._linesRepository.cleanLines(),this._toggleEditingRootsClass(E$1,pe)})}destroy(){this._toggleEditingRootsClass(E$1,!1),this._linesRepository.destroy(),this._scrollableEditingRootDomAncestor=null,this._resizeObserver&&this._resizeObserver.destroy()}scrollToPage(t){if(!this.isEnabled)return;const de=t>1?this._getPageBreakLineOffset(t-1):0;this._scrollableEditingRootDomAncestor.scrollTo({top:de-10,left:this._scrollableEditingRootDomAncestor.scrollLeft,behavior:env.isMotionReduced?"instant":"smooth"})}_onUiReady(){const t=this.editor,de=this._getAttachedDomRoot();de?(this._scrollableEditingRootDomAncestor=function(pe){let Le=pe;do{Le=Le.parentElement;const Ye=global$1.window.getComputedStyle(Le).overflowY;if(Ye=="auto"||Ye=="scroll")break}while(Le.tagName!="BODY");return Le}(de),t.ui.view.listenTo(this._scrollableEditingRootDomAncestor,"scroll",()=>{this._updatePageBreakLines()},{usePassive:!0}),t.ui.view.listenTo(global$1.window,"resize",()=>this._updatePageBreakLines()),this._resizeObserver=new ResizeObserver$1(this._scrollableEditingRootDomAncestor,()=>{this._updatePageBreakLines()}),this.listenTo(this._paginationLookupPlugin,"change:pageBreaks",()=>this._updatePageBreakLines())):t.ui.once("update",()=>this._onUiReady())}_getAttachedDomRoot(){for(const t of this.editor.editing.view.domRoots.values())if(t.ownerDocument.body.contains(t))return t;return null}_updatePageBreakLines(){if(!this.isEnabled)return;const t=this._getAttachedDomRoot(),de=this._paginationLookupPlugin.pageBreaks;if(this._linesRepository.cleanLines(),!t||de.length==1)return void(this.pageNumber=1);const pe=new Rect(t).excludeScrollbarsAndBorders(),Le=new Rect(this._scrollableEditingRootDomAncestor).excludeScrollbarsAndBorders(),Ye=Le.top+Le.height/3;let tt=!1;const st=[];for(let ht=1;ht<de.length;ht++){const mt=this._getPageBreakLineOffset(ht,Le);if(!mt)continue;const gt=Le.top+mt-this._scrollableEditingRootDomAncestor.scrollTop;st.push({pageOffsetTop:gt,domRootRect:pe,domScrollableRect:Le,pageNumber:ht}),gt>Ye&&!tt&&(this.pageNumber=ht,tt=!0)}this._renderPageBreakLines(st),tt||(this.pageNumber=de.length)}_renderPageBreakLines(t){const{scrollX:de,scrollY:pe}=global$1.window;if(t.length)for(const{domScrollableRect:Le,pageOffsetTop:Ye,domRootRect:tt,pageNumber:st}of t)Le.top<Ye&&Ye<Le.bottom&&this._linesRepository.showLine(tt.left+de,Ye+pe,tt.width,st+1)}_getPageBreakLineOffset(t,de=null){const pe=this._paginationLookupPlugin.pageBreaks[t].offset;return pe?(de||(de=new Rect(this._scrollableEditingRootDomAncestor).excludeScrollbarsAndBorders()),pe-de.top+this._scrollableEditingRootDomAncestor.scrollTop):0}_toggleEditingRootsClass(t,de=!0){const pe=this.editor.editing.view;pe.change(Le=>{for(const Ye of pe.document.roots)de?Le.addClass(t,Ye):Le.removeClass(t,Ye)})}}function c$1(me,u,...t){const de=me.t;switch(u){case"Go to next page":return de("Go to next page");case"Go to previous page":return de("Go to previous page");case"Current page number (from 1 to %0)":return de("Current page number (from 1 to %0)",...t);case"Keystrokes for navigating through documents":return de("Keystrokes for navigating through documents");case"Go to the previous page (also move selection)":return de("Go to the previous page (also move selection)");case"Go to the next page (also move selection)":return de("Go to the next page (also move selection)");default:return u}}let s$1=class extends Plugin{constructor(){super(...arguments);wt(this,"licenseKey");wt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"PaginationEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[n,g]}init(){this.set({pageNumber:1,totalPages:1});const t=this.editor.plugins.get("Pagination"),de=this.editor.plugins.get(n),pe=this.editor.plugins.get(g);this.bind("isEnabled").to(t),this._setUpDataDowncastConversion(),this.bind("pageNumber").to(pe),this.listenTo(de,"change:pageBreaks",(Ye,tt,st,ht)=>{this.totalPages=st.length,this._updatePageBreakMarkers(st,ht)}),this._setupKeystrokes(),this.licenseKey=this.editor.config.get("licenseKey");const Le=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let Ye;for(const tt in Le){const st=tt,ht=Le[st];if(ht=="paginationLicenseKeyValid"||ht=="paginationLicenseKeyInvalid"||ht=="paginationLicenseKeyExpired"||ht=="paginationLicenseKeyDomainLimit"||ht=="paginationLicenseKeyNotAllowed"||ht=="paginationLicenseKeyEvaluationLimit"||ht=="paginationLicenseKeyTrialLimit"||ht=="paginationLicenseKeyUsageLimit"){delete Le[st],Ye=ht,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}Ye=="paginationLicenseKeyInvalid"&&Le._showLicenseError("invalid"),Ye=="paginationLicenseKeyExpired"&&Le._showLicenseError("expired"),Ye=="paginationLicenseKeyDomainLimit"&&Le._showLicenseError("domainLimit"),Ye=="paginationLicenseKeyNotAllowed"&&Le._showLicenseError("featureNotAllowed","Pagination"),Ye=="paginationLicenseKeyEvaluationLimit"&&Le._showLicenseError("evaluationLimit"),Ye=="paginationLicenseKeyTrialLimit"&&Le._showLicenseError("trialLimit"),Ye=="paginationLicenseKeyUsageLimit"&&Le._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}scrollToPage(t){this.isEnabled&&this.editor.plugins.get(g).scrollToPage(this._validatePageNumber(t))}moveSelectionToPage(t){if(!this.isEnabled)return;const de=this.editor,pe=this.editor.plugins.get(n).pageBreaks[t-1];pe&&de.model.change(Le=>{switch(pe.type){case"manual":{const Ye=de.model.schema.getNearestSelectionRange(pe.modelRange.end,"forward");Le.setSelection(Ye);break}case"element":{const Ye=de.model.schema.getNearestSelectionRange(pe.modelRange.start,"forward");Le.setSelection(Ye);break}case"text":{const Ye=pe.modelRange.start;if(Ye.textNode.data[Ye.offset]===" "){const tt=Le.createPositionAt(Ye.parent,Ye.offset+1);Le.setSelection(tt)}else Le.setSelection(pe.modelRange)}}de.editing.view.focus()})}goToNextPage(){const t=this._validatePageNumber(this.pageNumber+1);this.moveSelectionToPage(t),this.scrollToPage(t)}goToPreviousPage(){const t=this._validatePageNumber(this.pageNumber-1);this.moveSelectionToPage(t),this.scrollToPage(t)}_updatePageBreakMarkers(t,de){const pe=this.editor.model;this.isEnabled&&pe.change(Le=>{for(let Ye=1;Ye<t.length;Ye++){const tt=t[Ye].modelRange,st="pagination:"+(Ye+1);pe.markers.has(st)?Le.updateMarker(st,{range:tt}):Le.addMarker(st,{range:tt,usingOperation:!1,affectsData:!0})}for(let Ye=t.length;Ye<de.length;Ye++){const tt="pagination:"+(Ye+1);pe.markers.has(tt)&&Le.removeMarker(tt)}})}_setUpDataDowncastConversion(){const t="pagination";this.editor.conversion.for("dataDowncast").add(de=>{de.on("addMarker:"+t,(pe,{markerRange:Le,markerName:Ye},tt)=>{if(!tt.options.pagination||!tt.consumable.consume(Le,pe.name))return;const st=Le.getContainedElement();let ht=st?tt.mapper.toViewElement(st):null;if(!ht){const gt=Le.start;if(tt.schema.checkChild(gt,"$text")){const bt=tt.mapper.toViewPosition(gt);ht=tt.writer.createContainerElement("span"),ht.getFillerOffset=()=>null,tt.writer.insert(bt,ht)}else{const bt=gt.nodeAfter;ht=tt.mapper.toViewElement(bt)}}for(;ht.parent!==ht.root&&ht.index===0;)ht=ht.parent;const mt=Ye.substring(11);ht.hasClass("page-break")||(tt.writer.setStyle("page-break-before","always",ht),tt.writer.setAttribute("data-pagination-page",mt,ht),tt.mapper.bindElementToMarker(ht,Ye)),pe.stop()})})}_setupKeystrokes(){const t=this.editor;t.keystrokes.set("Shift+Pageup",(de,pe)=>{this.goToPreviousPage(),pe()}),t.keystrokes.set("Shift+Pagedown",(de,pe)=>{this.goToNextPage(),pe()}),t.accessibility.addKeystrokeInfoGroup({id:"pagination",label:c$1(t.locale,"Keystrokes for navigating through documents"),keystrokes:[{label:c$1(t.locale,"Go to the previous page (also move selection)"),keystroke:"Shift+Pageup",mayRequireFn:!0},{label:c$1(t.locale,"Go to the next page (also move selection)"),keystroke:"Shift+Pagedown",mayRequireFn:!0}]})}_validatePageNumber(t){return t<1&&(t=1),t>this.totalPages&&(t=this.totalPages),t}};class j extends View{constructor(t){super(t);wt(this,"pageNumberView");const de=this.bindTemplate;this.set({pageNumber:1,totalPages:1,isEnabled:!0}),this.pageNumberView=new InputNumberView(t,{min:1,step:1}),this.pageNumberView.set({inputMode:"numeric",tabIndex:-1}),this.pageNumberView.bind("ariaLabel").to(this,"totalPages",pe=>c$1(t,"Current page number (from 1 to %0)",pe)),this.pageNumberView.bind("max").to(this,"totalPages"),this.pageNumberView.bind("isReadOnly").to(this,"isEnabled",pe=>!pe),this.setTemplate({tag:"div",attributes:{class:["ck","ck-page-navigator",de.if("isEnabled","ck-disabled",pe=>!pe)]},children:[this.pageNumberView,{tag:"span",children:[{text:de.to("totalPages")}]}]})}render(){super.render();const t=this.pageNumberView.element,de=pe=>{this.pageNumberView.element.value=String(pe)};de(this.pageNumber),this.on("change:pageNumber",(pe,Le,Ye)=>{de(Ye)}),this.listenTo(t,"keydown",(pe,Le)=>{if(Le.key==="ArrowUp"||Le.key==="ArrowDown")return void Le.stopPropagation();if(Le.keyCode!==keyCodes.enter)return;Le.preventDefault();const Ye=t.valueAsNumber;Number.isNaN(Ye)?t.value=String(this.pageNumber):(t.checkValidity()?this.pageNumber=Ye:Ye>this.totalPages?(this.pageNumber=this.totalPages,t.value=String(this.totalPages)):(this.pageNumber=1,t.value="1"),this.fire("navigation",this.pageNumber))}),this.listenTo(t,"blur",()=>{t.value=String(this.pageNumber)}),this.listenTo(t,"focus",()=>{this.pageNumberView.select()})}focus(){this.element.firstChild.focus()}}class e extends Plugin{static get pluginName(){return"PaginationUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor,t=u.plugins.get("PaginationEditing");u.ui.componentFactory.add("pageNavigation",de=>{const pe=new j(de);return pe.bind("pageNumber").to(t),pe.bind("totalPages").to(t),pe.bind("isEnabled").to(t),pe.on("navigation",(Le,Ye)=>{t.moveSelectionToPage(Ye),t.scrollToPage(Ye)}),pe}),u.ui.componentFactory.add("nextPage",de=>{const pe=new ButtonView(de);return pe.isEnabled=!0,pe.label=c$1(u.locale,"Go to next page"),pe.icon=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 .75a9.25 9.25 0 110 18.5 9.25 9.25 0 010-18.5zm0 1.5a7.75 7.75 0 100 15.5 7.75 7.75 0 000-15.5zm0 2.022a.75.75 0 01.743.649l.007.101v8.165l2.714-2.705a.75.75 0 01.977-.07l.084.072a.75.75 0 01.07.976l-.072.084-3.994 3.981a.75.75 0 01-.975.073l-.084-.073-3.99-3.98a.75.75 0 01.975-1.135l.085.072 2.71 2.706V5.022a.75.75 0 01.75-.75z"/></svg>
`,pe.tooltip=!0,pe.keystroke="Shift+PageDown",pe.bind("isEnabled").to(t),this.listenTo(pe,"execute",()=>{t.goToNextPage()}),pe}),u.ui.componentFactory.add("previousPage",de=>{const pe=new ButtonView(de);return pe.isEnabled=!0,pe.label=c$1(u.locale,"Go to previous page"),pe.icon=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 19.25a9.25 9.25 0 100-18.5 9.25 9.25 0 000 18.5zm0-1.5a7.75 7.75 0 110-15.5 7.75 7.75 0 010 15.5zm0-2.022a.75.75 0 00.743-.649l.007-.101V6.813l2.714 2.705a.75.75 0 00.977.07l.084-.072a.75.75 0 00.07-.976l-.072-.084-3.994-3.981a.75.75 0 00-.975-.073l-.084.073-3.99 3.98a.75.75 0 00.975 1.135l.085-.072 2.71-2.706v8.166c0 .414.336.75.75.75z"/></svg>
`,pe.tooltip=!0,pe.keystroke="Shift+PageUp",pe.bind("isEnabled").to(t),this.listenTo(pe,"execute",()=>{t.goToPreviousPage()}),pe})}}let a$1=class extends Plugin{static get pluginName(){return"Pagination"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[s$1,e]}constructor(u){super(u),this.isEnabled=!1}init(){this.set({pageNumber:1,totalPages:1});const u=this.editor.plugins.get(s$1);this.bind("pageNumber").to(u),this.bind("totalPages").to(u),env.isBlink||this.editor.config.get("pagination.enableOnUnsupportedBrowsers")?this.editor.on("ready",()=>{this.isEnabled=!0}):this.forceDisabled("browserCheck")}scrollToPage(u){this.editor.plugins.get(s$1).scrollToPage(u)}};const m=/<meta\s*name="?generator"?\s*content="?microsoft\s*excel\s*\d+"?\/?>/i;function l(me){return m.test(me)}const S=/^(?<tagName>(?!\.)[\w-]+)?(\.(?<className>[\w-]+))?$/i;function x(me,u){const t=new Map;for(const[de,pe]of u){if(!de.tagName&&!de.className)continue;const Le=!de.tagName||me.name===de.tagName,Ye=!de.className||me.hasClass(de.className);Le&&Ye&&t.set(de,pe)}return t}function h(me){const u={};for(let t=0;t<me.length;t++){const de=me[t],pe=me.getPropertyValue(de);pe!=="initial"&&(u[de]=pe)}return u}function O(me){const u=me.split(",").map(de=>de.trim()),t=[];for(const de of u){const pe=S.exec(de);pe&&t.push(pe.groups)}return t}function y(me){const u={};for(const t of me)Object.assign(u,t);return u}class c extends MSWordNormalizer{execute(u){const{body:t,styles:de}=u._parsedData,pe=new UpcastWriter(t.document),Le=pe.createRangeIn(t),Ye=function(st){const ht={};for(const mt of st)for(const gt of mt.cssRules)if(gt instanceof CSSStyleRule){const bt=h(gt.style);ht[gt.selectorText]=Object.assign({},ht[gt.selectorText]||{},bt)}return ht}(de),tt=function(st){const ht=new Map;for(const mt in st){const gt=O(mt),bt=st[mt];for(const _t of gt)ht.set(_t,bt)}return ht}(Ye);for(const st of Le){if(st.type!=="elementStart")continue;const ht=x(st.item,tt);if(ht.size){const mt=y(Array.from(ht.values()));for(const gt in mt){const bt=st.item;bt.hasStyle(gt)||pe.setStyle(gt,mt[gt],bt)}}}u.content=t}isActive(u){return super.isActive(u)||l(u)}}let i$1=class extends Plugin{static get pluginName(){return"PasteFromOfficeEnhancedInliner"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const u=this.editor,t=u.plugins.get("ClipboardPipeline"),de=u.editing.view.document,pe=new c(de);t.on("inputTransformation",(Le,Ye)=>{const tt=Ye.dataTransfer.getData("text/html");pe.isActive(tt)&&(Ye._parsedData||(Ye._parsedData=parseHtml(tt,de.stylesProcessor)),pe.execute(Ye))},{priority:priorities.get("high")+11})}afterInit(){(async function(u){const t=kt([121,55,85,122,89,113,117,98,53,108,99,52,67,71,82,72,78,116,105,106,68,109,87,112,83,66,70,86,77,80,115,100,76,110,54,48,51,73,49,79,104,57,97,69,118,74,120,103,114,119,107,81,84,102,50,56,88,101,111,75,65,90]),de=1846868564,pe=1846778644^de,Le=window[kt([68,97,116,101])][kt([110,111,119])](),Ye=u[kt([101,100,105,116,111,114])],tt=new window[kt([80,114,111,109,105,115,101])](Et=>{Ye[kt([111,110,99,101])](kt([114,101,97,100,121]),Et)}),st={[kt([107,116,121])]:kt([69,67]),[kt([117,115,101])]:kt([115,105,103]),[kt([99,114,118])]:kt([80,45,50,53,54]),[kt([120])]:kt([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[kt([121])]:kt([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[kt([97,108,103])]:kt([69,83,50,53,54])},ht=Ye[kt([99,111,110,102,105,103])][kt([103,101,116])](kt([108,105,99,101,110,115,101,75,101,121]));async function mt(){let Et,At=null,Ft=null;try{return ht==kt([71,80,76])?kt([78,111,116,65,108,108,111,119,101,100]):(Et=St(),Et?(Et[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(Ft=gt(Et[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])],Et[kt([106,116,105])])),await Rt()?Ut()?zt()?kt([69,120,112,105,114,101,100]):qt()?(Et[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([101,118,97,108,117,97,116,105,111,110])&&(At=bt(kt([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),Et[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([116,114,105,97,108])&&(At=bt(kt([84,114,105,97,108,76,105,109,105,116]))),await Gt()):kt([68,111,109,97,105,110,76,105,109,105,116]):kt([78,111,116,65,108,108,111,119,101,100]):kt([73,110,118,97,108,105,100])):kt([73,110,118,97,108,105,100]))}catch{return kt([73,110,118,97,108,105,100])}function zt(){const Nt=[kt([101,118,97,108,117,97,116,105,111,110]),kt([116,114,105,97,108])][kt([105,110,99,108,117,100,101,115])](Et[kt([108,105,99,101,110,115,101,84,121,112,101])])?Le/1e3:3600*pe;return Et[kt([101,120,112])]<Nt}function Ut(){const Nt=Et[kt([102,101,97,116,117,114,101,115])];return!!Nt&&(!!Nt[kt([105,110,99,108,117,100,101,115])](kt([42]))||!!Nt[kt([105,110,99,108,117,100,101,115])](kt([80,79,69]))||!!Nt[kt([105,110,99,108,117,100,101,115])](kt([80,80])))}function qt(){const Nt=Et[kt([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!Nt||Nt[kt([108,101,110,103,116,104])]==0)return!0;const{hostname:jt}=new URL(window[kt([108,111,99,97,116,105,111,110])].href);if(Nt[kt([105,110,99,108,117,100,101,115])](jt))return!0;const Qt=jt[kt([115,112,108,105,116])](kt([46]));return Nt[kt([102,105,108,116,101,114])](Kt=>Kt[kt([105,110,99,108,117,100,101,115])](kt([42])))[kt([109,97,112])](Kt=>Kt[kt([115,112,108,105,116])](kt([46])))[kt([115,111,109,101])](Kt=>Qt[kt([101,118,101,114,121])]((Vt,en)=>Kt[en]===Vt||Kt[en]===kt([42])))}function Gt(){return At&&Ft?new window[kt([80,114,111,109,105,115,101])]((Nt,jt)=>{At[kt([116,104,101,110])](Nt,jt),Ft[kt([116,104,101,110])](Qt=>{Qt!=kt([86,97,108,105,100])&&Nt(Qt)},jt)}):At||Ft||kt([86,97,108,105,100])}}function gt(Et,At){return new window[kt([80,114,111,109,105,115,101])](Ut=>{if(Ft())return Ut(kt([86,97,108,105,100]));zt(),Ye[kt([100,101,99,111,114,97,116,101])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let qt=!1;const Gt=uid();function Nt(Qt){return!!Qt&&(typeof Qt===kt([111,98,106,101,99,116])||typeof Qt===kt([102,117,110,99,116,105,111,110]))&&typeof Qt[kt([116,104,101,110])]===kt([102,117,110,99,116,105,111,110])&&typeof Qt[kt([99,97,116,99,104])]===kt([102,117,110,99,116,105,111,110])}function jt(Qt){cn(Qt)[kt([116,104,101,110])](nn=>!nn||nn[kt([115,116,97,116,117,115])]!=kt([111,107])?kt([85,115,97,103,101,76,105,109,105,116]):Bt(Mt(Gt+At))!=nn[kt([118,101,114,105,102,105,99,97,116,105,111,110])]?kt([85,115,97,103,101,76,105,109,105,116]):kt([86,97,108,105,100]))[kt([116,104,101,110])](nn=>(Vt(),nn),()=>{const nn=en();return nn==null?(Vt(),kt([86,97,108,105,100])):kt(Le-nn>(1243119188^de)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[kt([116,104,101,110])](Ut)[kt([99,97,116,99,104])](()=>{Ut(kt([85,115,97,103,101,76,105,109,105,116]))});const Kt=1847727316^de;function Vt(){const nn=kt([108,108,99,116,45])+Bt(Mt(Et)),sn=Dt(Bt(window[kt([77,97,116,104])][kt([99,101,105,108])](Le/Kt)));window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([115,101,116,73,116,101,109])](nn,sn)}function en(){const nn=kt([108,108,99,116,45])+Bt(Mt(Et)),sn=window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([103,101,116,73,116,101,109])](nn);return sn?window[kt([112,97,114,115,101,73,110,116])](Dt(sn),16)*Kt:null}function cn(nn){return new window[kt([80,114,111,109,105,115,101])]((sn,un)=>{nn[kt([116,104,101,110])](sn,un),window[kt([115,101,116,84,105,109,101,111,117,116])](un,1846881940^de)})}}Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(Qt,Kt)=>{if(Kt[0]!=Et)return Ut(kt([85,115,97,103,101,76,105,109,105,116]));Kt[1]={...Kt[1],[kt([114,101,113,117,101,115,116,73,100])]:Gt}},{[kt([112,114,105,111,114,105,116,121])]:kt([104,105,103,104])}),Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),Qt=>{Nt(Qt[kt([114,101,116,117,114,110])])&&(qt=!0,jt(Qt[kt([114,101,116,117,114,110])]))},{[kt([112,114,105,111,114,105,116,121])]:kt([108,111,119])}),tt[kt([116,104,101,110])](()=>{qt||Ut(kt([85,115,97,103,101,76,105,109,105,116]))})});function Ft(){return Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==kt([97,117,116,111])}function zt(){Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=kt([97,117,116,111])}}function bt(Et){const At=[new window[kt([80,114,111,109,105,115,101])](Ft=>setTimeout(Ft,1847444632^de)),tt[kt([116,104,101,110])](()=>new window[kt([80,114,111,109,105,115,101])](Ft=>{let zt=0;Ye[kt([109,111,100,101,108])][kt([111,110])](kt([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(Ut,qt)=>{qt[0][kt([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&zt++,zt==(1846868908^de)&&(Ft(),Ut[kt([111,102,102])]())})}))];return window[kt([80,114,111,109,105,115,101])][kt([114,97,99,101])](At)[kt([116,104,101,110])](()=>Et)}async function _t(){await tt,Ye[kt([109,111,100,101,108])][kt([99,104,97,110,103,101])]=$t,Ye[kt([109,111,100,101,108])][kt([101,110,113,117,101,117,101,67,104,97,110,103,101])]=$t,Ye[kt([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](kt([109,111,100,101,108]))}function vt(Et){const At=Tt();Ye[At]=kt([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121])+Et,Et!=kt([86,97,108,105,100])&&_t()}function Tt(){const Et=window[kt([83,116,114,105,110,103])](window[kt([112,101,114,102,111,114,109,97,110,99,101])][kt([110,111,119])]())[kt([114,101,112,108,97,99,101])](kt([46]),"");let At=kt([121]);for(let Ft=0;Ft<Et[kt([108,101,110,103,116,104])];Ft+=2){let zt=window[kt([112,97,114,115,101,73,110,116])](Et[kt([115,117,98,115,116,114,105,110,103])](Ft,Ft+2));zt>=t[kt([108,101,110,103,116,104])]&&(zt-=t[kt([108,101,110,103,116,104])]),At+=t[zt]}return At}function St(){const Et=ht[kt([115,112,108,105,116])](kt([46]));if(Et[kt([108,101,110,103,116,104])]!=3)return null;return At(Et[1]);function At(Ft){const zt=Pt(Ft);return zt&&Ut()?zt:null;function Ut(){const qt=zt[kt([106,116,105])],Gt=window[kt([112,97,114,115,101,73,110,116])](qt[kt([115,117,98,115,116,114,105,110,103])](qt[kt([108,101,110,103,116,104])]-8),16),Nt={...zt,[kt([106,116,105])]:qt[kt([115,117,98,115,116,114,105,110,103])](0,qt[kt([108,101,110,103,116,104])]-8)};return delete Nt[kt([118,99])],Mt(Nt)==Gt}}}async function Rt(){let Et=!0;try{const zt=ht[kt([115,112,108,105,116])](kt([46])),[Ut,qt,Gt]=zt;return At(Ut),await Ft(Ut,qt,Gt),Et}catch{return!1}function At(zt){const Ut=Pt(zt);Ut&&Ut[kt([97,108,103])]==kt([69,83,50,53,54])||(Et=!1)}async function Ft(zt,Ut,qt){const Gt=window[kt([85,105,110,116,56,65,114,114,97,121])][kt([102,114,111,109])](Ot(qt),Kt=>Kt[kt([99,104,97,114,67,111,100,101,65,116])](0)),Nt=new window[kt([84,101,120,116,69,110,99,111,100,101,114])]()[kt([101,110,99,111,100,101])](zt+kt([46])+Ut),jt=window[kt([99,114,121,112,116,111])][kt([115,117,98,116,108,101])];if(!jt)return;const Qt=await jt[kt([105,109,112,111,114,116,75,101,121])](kt([106,119,107]),st,{[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([110,97,109,101,100,67,117,114,118,101])]:kt([80,45,50,53,54])},!1,[kt([118,101,114,105,102,121])]);await jt[kt([118,101,114,105,102,121])]({[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([104,97,115,104])]:{[kt([110,97,109,101])]:kt([83,72,65,45,50,53,54])}},Qt,Gt,Nt)||(Et=!1)}}function Pt(Et){return Et[kt([115,116,97,114,116,115,87,105,116,104])](kt([101,121]))?JSON[kt([112,97,114,115,101])](Ot(Et)):null}function Ot(Et){return window[kt([97,116,111,98])](Et[kt([114,101,112,108,97,99,101])](/-/g,kt([43]))[kt([114,101,112,108,97,99,101])](/_/g,kt([47])))}function Mt(Et){let At=5381;function Ft(Ut){for(let qt=0;qt<Ut[kt([108,101,110,103,116,104])];qt++){const Gt=Ut[kt([99,104,97,114,67,111,100,101,65,116])](qt);At=(At<<5)+At+Gt,At&=At}}function zt(Ut){Array[kt([105,115,65,114,114,97,121])](Ut)?Ut[kt([102,111,114,69,97,99,104])](zt):Ut&&typeof Ut==kt([111,98,106,101,99,116])?Object[kt([101,110,116,114,105,101,115])](Ut)[kt([115,111,114,116])]()[kt([102,111,114,69,97,99,104])](([qt,Gt])=>{Ft(qt),zt(Gt)}):Ft(window[kt([83,116,114,105,110,103])](Ut))}return zt(Et),At>>>0}function Bt(Et){return Et[kt([116,111,83,116,114,105,110,103])](16)[kt([112,97,100,83,116,97,114,116])](8,kt([48]))}function Dt(Et){return Et[kt([115,112,108,105,116])]("")[kt([114,101,118,101,114,115,101])]()[kt([106,111,105,110])]("")}function $t(){}function kt(Et){return Et.map(At=>String.fromCharCode(At)).join("")}vt(await mt())})(this)}};const L=["color","font-family","font-size","text-decoration","text-decoration-line","font-weight","font-style","vertical-align"],E=["color","font-family","font-size"],F={"font-style":[["italic","i"]],"font-weight":[["medium","strong"],["bold","strong"],["bolder","strong"],[me=>Number(me)>=600,"strong"]],"text-decoration":[["underline","u"],["line-through","s"]],"text-decoration-line":[["underline","u"],["line-through","s"]],"vertical-align":[["sub","sub"],["super","sup"]]};function P(me){return L.includes(me)}function v(me,u,t){const{spanStyles:de,stylesToBeHtmlElements:pe}=function(Le,Ye){const tt={},st={};return Ye.forEach(ht=>{const mt=Le.getStyle(ht);if(mt){if(function(gt){return E.includes(gt)}(ht))tt[ht]=mt;else if(function(gt){return gt in F}(ht)){const gt=mt.split(" ");F[ht].forEach(([bt,_t])=>{for(const vt of gt)(typeof bt=="function"&&bt(vt)||bt===vt)&&(st[ht]=[...st[ht]||[],[bt,_t]])})}}}),{spanStyles:tt,stylesToBeHtmlElements:st}}(me,t);(function(Le,Ye,tt){for(const st in tt)tt[st].forEach(([,ht])=>{const mt=Ye.createElement(ht,[],Le.getChildren());Ye.insertChild(0,mt,Le)}),Ye.removeStyle(st,Le)})(me,u,pe),function(Le,Ye,tt){if(!Object.keys(tt).length)return;const st=Ye.createElement("span",[],Le.getChildren());Ye.setStyle(tt,st),Ye.insertChild(0,st,Le),Ye.removeStyle(Object.keys(tt),Le)}(me,u,de)}class f extends MSWordNormalizer{execute(u){const{body:t}=u._parsedData,de=new UpcastWriter(t.document),pe=de.createRangeIn(t),Le=new Document$1(de.document.stylesProcessor),Ye=[...new DomConverter(Le).blockElements,"font"],tt=pe.getItems();for(const ht of tt)ht.is("element")&&Ye.includes(ht.name)&&v(ht,de,(st=ht,Array.from(st.getStyleNames()).filter(P)));var st;u.content=t}isActive(u){return super.isActive(u)||l(u)}}class s extends Plugin{constructor(){super(...arguments);wt(this,"licenseKey");wt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"PasteFromOfficeEnhancedPropagator"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const t=this.editor,de=t.plugins.get("ClipboardPipeline"),pe=t.editing.view.document,Le=new f(pe);de.on("inputTransformation",(tt,st)=>{const ht=st.dataTransfer.getData("text/html");Le.isActive(ht)&&(st._parsedData||(st._parsedData=parseHtml(ht,pe.stylesProcessor)),Le.execute(st))},{priority:priorities.get("high")+10}),this.licenseKey=this.editor.config.get("licenseKey");const Ye=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let tt;for(const st in Ye){const ht=st,mt=Ye[ht];if(mt=="pasteFromOfficeEnhancedLicenseKeyValid"||mt=="pasteFromOfficeEnhancedLicenseKeyInvalid"||mt=="pasteFromOfficeEnhancedLicenseKeyExpired"||mt=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"||mt=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"||mt=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"||mt=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"||mt=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"){delete Ye[ht],tt=mt,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}tt=="pasteFromOfficeEnhancedLicenseKeyInvalid"&&Ye._showLicenseError("invalid"),tt=="pasteFromOfficeEnhancedLicenseKeyExpired"&&Ye._showLicenseError("expired"),tt=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"&&Ye._showLicenseError("domainLimit"),tt=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"&&Ye._showLicenseError("featureNotAllowed","PasteFromOfficeEnhanced"),tt=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"&&Ye._showLicenseError("evaluationLimit"),tt=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"&&Ye._showLicenseError("trialLimit"),tt=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"&&Ye._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}}class a extends Plugin{static get pluginName(){return"PasteFromOfficeEnhanced"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice",i$1,s]}}var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=me;function me(u,t){for(var de=new Array(arguments.length-1),pe=0,Le=2,Ye=!0;Le<arguments.length;)de[pe++]=arguments[Le++];return new Promise(function(st,ht){de[pe]=function(gt){if(Ye)if(Ye=!1,gt)ht(gt);else{for(var bt=new Array(arguments.length-1),_t=0;_t<bt.length;)bt[_t++]=arguments[_t];st.apply(null,bt)}};try{u.apply(t||null,de)}catch(mt){Ye&&(Ye=!1,ht(mt))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(me){var u=me;u.length=function(tt){var st=tt.length;if(!st)return 0;for(var ht=0;--st%4>1&&tt.charAt(st)==="=";)++ht;return Math.ceil(tt.length*3)/4-ht};for(var t=new Array(64),de=new Array(123),pe=0;pe<64;)de[t[pe]=pe<26?pe+65:pe<52?pe+71:pe<62?pe-4:pe-59|43]=pe++;u.encode=function(tt,st,ht){for(var mt=null,gt=[],bt=0,_t=0,vt;st<ht;){var Tt=tt[st++];switch(_t){case 0:gt[bt++]=t[Tt>>2],vt=(Tt&3)<<4,_t=1;break;case 1:gt[bt++]=t[vt|Tt>>4],vt=(Tt&15)<<2,_t=2;break;case 2:gt[bt++]=t[vt|Tt>>6],gt[bt++]=t[Tt&63],_t=0;break}bt>8191&&((mt||(mt=[])).push(String.fromCharCode.apply(String,gt)),bt=0)}return _t&&(gt[bt++]=t[vt],gt[bt++]=61,_t===1&&(gt[bt++]=61)),mt?(bt&&mt.push(String.fromCharCode.apply(String,gt.slice(0,bt))),mt.join("")):String.fromCharCode.apply(String,gt.slice(0,bt))};var Le="invalid encoding";u.decode=function(tt,st,ht){for(var mt=ht,gt=0,bt,_t=0;_t<tt.length;){var vt=tt.charCodeAt(_t++);if(vt===61&&gt>1)break;if((vt=de[vt])===void 0)throw Error(Le);switch(gt){case 0:bt=vt,gt=1;break;case 1:st[ht++]=bt<<2|(vt&48)>>4,bt=vt,gt=2;break;case 2:st[ht++]=(bt&15)<<4|(vt&60)>>2,bt=vt,gt=3;break;case 3:st[ht++]=(bt&3)<<6|vt,gt=0;break}}if(gt===1)throw Error(Le);return ht-mt},u.test=function(tt){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(tt)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=me;function me(){this._listeners={}}return me.prototype.on=function(t,de,pe){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:de,ctx:pe||this}),this},me.prototype.off=function(t,de){if(t===void 0)this._listeners={};else if(de===void 0)this._listeners[t]=[];else for(var pe=this._listeners[t],Le=0;Le<pe.length;)pe[Le].fn===de?pe.splice(Le,1):++Le;return this},me.prototype.emit=function(t){var de=this._listeners[t];if(de){for(var pe=[],Le=1;Le<arguments.length;)pe.push(arguments[Le++]);for(Le=0;Le<de.length;)de[Le].fn.apply(de[Le++].ctx,pe)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=me(me);function me(Le){return typeof Float32Array<"u"?function(){var Ye=new Float32Array([-0]),tt=new Uint8Array(Ye.buffer),st=tt[3]===128;function ht(_t,vt,Tt){Ye[0]=_t,vt[Tt]=tt[0],vt[Tt+1]=tt[1],vt[Tt+2]=tt[2],vt[Tt+3]=tt[3]}function mt(_t,vt,Tt){Ye[0]=_t,vt[Tt]=tt[3],vt[Tt+1]=tt[2],vt[Tt+2]=tt[1],vt[Tt+3]=tt[0]}Le.writeFloatLE=st?ht:mt,Le.writeFloatBE=st?mt:ht;function gt(_t,vt){return tt[0]=_t[vt],tt[1]=_t[vt+1],tt[2]=_t[vt+2],tt[3]=_t[vt+3],Ye[0]}function bt(_t,vt){return tt[3]=_t[vt],tt[2]=_t[vt+1],tt[1]=_t[vt+2],tt[0]=_t[vt+3],Ye[0]}Le.readFloatLE=st?gt:bt,Le.readFloatBE=st?bt:gt}():function(){function Ye(st,ht,mt,gt){var bt=ht<0?1:0;if(bt&&(ht=-ht),ht===0)st(1/ht>0?0:2147483648,mt,gt);else if(isNaN(ht))st(2143289344,mt,gt);else if(ht>34028234663852886e22)st((bt<<31|2139095040)>>>0,mt,gt);else if(ht<11754943508222875e-54)st((bt<<31|Math.round(ht/1401298464324817e-60))>>>0,mt,gt);else{var _t=Math.floor(Math.log(ht)/Math.LN2),vt=Math.round(ht*Math.pow(2,-_t)*8388608)&8388607;st((bt<<31|_t+127<<23|vt)>>>0,mt,gt)}}Le.writeFloatLE=Ye.bind(null,u),Le.writeFloatBE=Ye.bind(null,t);function tt(st,ht,mt){var gt=st(ht,mt),bt=(gt>>31)*2+1,_t=gt>>>23&255,vt=gt&8388607;return _t===255?vt?NaN:bt*(1/0):_t===0?bt*1401298464324817e-60*vt:bt*Math.pow(2,_t-150)*(vt+8388608)}Le.readFloatLE=tt.bind(null,de),Le.readFloatBE=tt.bind(null,pe)}(),typeof Float64Array<"u"?function(){var Ye=new Float64Array([-0]),tt=new Uint8Array(Ye.buffer),st=tt[7]===128;function ht(_t,vt,Tt){Ye[0]=_t,vt[Tt]=tt[0],vt[Tt+1]=tt[1],vt[Tt+2]=tt[2],vt[Tt+3]=tt[3],vt[Tt+4]=tt[4],vt[Tt+5]=tt[5],vt[Tt+6]=tt[6],vt[Tt+7]=tt[7]}function mt(_t,vt,Tt){Ye[0]=_t,vt[Tt]=tt[7],vt[Tt+1]=tt[6],vt[Tt+2]=tt[5],vt[Tt+3]=tt[4],vt[Tt+4]=tt[3],vt[Tt+5]=tt[2],vt[Tt+6]=tt[1],vt[Tt+7]=tt[0]}Le.writeDoubleLE=st?ht:mt,Le.writeDoubleBE=st?mt:ht;function gt(_t,vt){return tt[0]=_t[vt],tt[1]=_t[vt+1],tt[2]=_t[vt+2],tt[3]=_t[vt+3],tt[4]=_t[vt+4],tt[5]=_t[vt+5],tt[6]=_t[vt+6],tt[7]=_t[vt+7],Ye[0]}function bt(_t,vt){return tt[7]=_t[vt],tt[6]=_t[vt+1],tt[5]=_t[vt+2],tt[4]=_t[vt+3],tt[3]=_t[vt+4],tt[2]=_t[vt+5],tt[1]=_t[vt+6],tt[0]=_t[vt+7],Ye[0]}Le.readDoubleLE=st?gt:bt,Le.readDoubleBE=st?bt:gt}():function(){function Ye(st,ht,mt,gt,bt,_t){var vt=gt<0?1:0;if(vt&&(gt=-gt),gt===0)st(0,bt,_t+ht),st(1/gt>0?0:2147483648,bt,_t+mt);else if(isNaN(gt))st(0,bt,_t+ht),st(2146959360,bt,_t+mt);else if(gt>17976931348623157e292)st(0,bt,_t+ht),st((vt<<31|2146435072)>>>0,bt,_t+mt);else{var Tt;if(gt<22250738585072014e-324)Tt=gt/5e-324,st(Tt>>>0,bt,_t+ht),st((vt<<31|Tt/4294967296)>>>0,bt,_t+mt);else{var St=Math.floor(Math.log(gt)/Math.LN2);St===1024&&(St=1023),Tt=gt*Math.pow(2,-St),st(Tt*4503599627370496>>>0,bt,_t+ht),st((vt<<31|St+1023<<20|Tt*1048576&1048575)>>>0,bt,_t+mt)}}}Le.writeDoubleLE=Ye.bind(null,u,0,4),Le.writeDoubleBE=Ye.bind(null,t,4,0);function tt(st,ht,mt,gt,bt){var _t=st(gt,bt+ht),vt=st(gt,bt+mt),Tt=(vt>>31)*2+1,St=vt>>>20&2047,Rt=4294967296*(vt&1048575)+_t;return St===2047?Rt?NaN:Tt*(1/0):St===0?Tt*5e-324*Rt:Tt*Math.pow(2,St-1075)*(Rt+4503599627370496)}Le.readDoubleLE=tt.bind(null,de,0,4),Le.readDoubleBE=tt.bind(null,pe,4,0)}(),Le}function u(Le,Ye,tt){Ye[tt]=Le&255,Ye[tt+1]=Le>>>8&255,Ye[tt+2]=Le>>>16&255,Ye[tt+3]=Le>>>24}function t(Le,Ye,tt){Ye[tt]=Le>>>24,Ye[tt+1]=Le>>>16&255,Ye[tt+2]=Le>>>8&255,Ye[tt+3]=Le&255}function de(Le,Ye){return(Le[Ye]|Le[Ye+1]<<8|Le[Ye+2]<<16|Le[Ye+3]<<24)>>>0}function pe(Le,Ye){return(Le[Ye]<<24|Le[Ye+1]<<16|Le[Ye+2]<<8|Le[Ye+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(me){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(me){var u=me;u.length=function(de){for(var pe=0,Le=0,Ye=0;Ye<de.length;++Ye)Le=de.charCodeAt(Ye),Le<128?pe+=1:Le<2048?pe+=2:(Le&64512)===55296&&(de.charCodeAt(Ye+1)&64512)===56320?(++Ye,pe+=4):pe+=3;return pe},u.read=function(de,pe,Le){var Ye=Le-pe;if(Ye<1)return"";for(var tt=null,st=[],ht=0,mt;pe<Le;)mt=de[pe++],mt<128?st[ht++]=mt:mt>191&&mt<224?st[ht++]=(mt&31)<<6|de[pe++]&63:mt>239&&mt<365?(mt=((mt&7)<<18|(de[pe++]&63)<<12|(de[pe++]&63)<<6|de[pe++]&63)-65536,st[ht++]=55296+(mt>>10),st[ht++]=56320+(mt&1023)):st[ht++]=(mt&15)<<12|(de[pe++]&63)<<6|de[pe++]&63,ht>8191&&((tt||(tt=[])).push(String.fromCharCode.apply(String,st)),ht=0);return tt?(ht&&tt.push(String.fromCharCode.apply(String,st.slice(0,ht))),tt.join("")):String.fromCharCode.apply(String,st.slice(0,ht))},u.write=function(de,pe,Le){for(var Ye=Le,tt,st,ht=0;ht<de.length;++ht)tt=de.charCodeAt(ht),tt<128?pe[Le++]=tt:tt<2048?(pe[Le++]=tt>>6|192,pe[Le++]=tt&63|128):(tt&64512)===55296&&((st=de.charCodeAt(ht+1))&64512)===56320?(tt=65536+((tt&1023)<<10)+(st&1023),++ht,pe[Le++]=tt>>18|240,pe[Le++]=tt>>12&63|128,pe[Le++]=tt>>6&63|128,pe[Le++]=tt&63|128):(pe[Le++]=tt>>12|224,pe[Le++]=tt>>6&63|128,pe[Le++]=tt&63|128);return Le-Ye}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=me;function me(u,t,de){var pe=de||8192,Le=pe>>>1,Ye=null,tt=pe;return function(ht){if(ht<1||ht>Le)return u(ht);tt+ht>pe&&(Ye=u(pe),tt=0);var mt=t.call(Ye,tt,tt+=ht);return tt&7&&(tt=(tt|7)+1),mt}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=u;var me=requireMinimal$1();function u(Le,Ye){this.lo=Le>>>0,this.hi=Ye>>>0}var t=u.zero=new u(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var de=u.zeroHash="\0\0\0\0\0\0\0\0";u.fromNumber=function(Ye){if(Ye===0)return t;var tt=Ye<0;tt&&(Ye=-Ye);var st=Ye>>>0,ht=(Ye-st)/4294967296>>>0;return tt&&(ht=~ht>>>0,st=~st>>>0,++st>4294967295&&(st=0,++ht>4294967295&&(ht=0))),new u(st,ht)},u.from=function(Ye){if(typeof Ye=="number")return u.fromNumber(Ye);if(me.isString(Ye))if(me.Long)Ye=me.Long.fromString(Ye);else return u.fromNumber(parseInt(Ye,10));return Ye.low||Ye.high?new u(Ye.low>>>0,Ye.high>>>0):t},u.prototype.toNumber=function(Ye){if(!Ye&&this.hi>>>31){var tt=~this.lo+1>>>0,st=~this.hi>>>0;return tt||(st=st+1>>>0),-(tt+st*4294967296)}return this.lo+this.hi*4294967296},u.prototype.toLong=function(Ye){return me.Long?new me.Long(this.lo|0,this.hi|0,!!Ye):{low:this.lo|0,high:this.hi|0,unsigned:!!Ye}};var pe=String.prototype.charCodeAt;return u.fromHash=function(Ye){return Ye===de?t:new u((pe.call(Ye,0)|pe.call(Ye,1)<<8|pe.call(Ye,2)<<16|pe.call(Ye,3)<<24)>>>0,(pe.call(Ye,4)|pe.call(Ye,5)<<8|pe.call(Ye,6)<<16|pe.call(Ye,7)<<24)>>>0)},u.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},u.prototype.zzEncode=function(){var Ye=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Ye)>>>0,this.lo=(this.lo<<1^Ye)>>>0,this},u.prototype.zzDecode=function(){var Ye=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Ye)>>>0,this.hi=(this.hi>>>1^Ye)>>>0,this},u.prototype.length=function(){var Ye=this.lo,tt=(this.lo>>>28|this.hi<<4)>>>0,st=this.hi>>>24;return st===0?tt===0?Ye<16384?Ye<128?1:2:Ye<2097152?3:4:tt<16384?tt<128?5:6:tt<2097152?7:8:st<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(me){var u=me;u.asPromise=requireAspromise(),u.base64=requireBase64(),u.EventEmitter=requireEventemitter(),u.float=requireFloat(),u.inquire=requireInquire(),u.utf8=requireUtf8(),u.pool=requirePool(),u.LongBits=requireLongbits(),u.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),u.global=u.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||function(Le){return typeof Le=="number"&&isFinite(Le)&&Math.floor(Le)===Le},u.isString=function(Le){return typeof Le=="string"||Le instanceof String},u.isObject=function(Le){return Le&&typeof Le=="object"},u.isset=u.isSet=function(Le,Ye){var tt=Le[Ye];return tt!=null&&Le.hasOwnProperty(Ye)?typeof tt!="object"||(Array.isArray(tt)?tt.length:Object.keys(tt).length)>0:!1},u.Buffer=function(){try{var pe=u.inquire("buffer").Buffer;return pe.prototype.utf8Write?pe:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=function(Le){return typeof Le=="number"?u.Buffer?u._Buffer_allocUnsafe(Le):new u.Array(Le):u.Buffer?u._Buffer_from(Le):typeof Uint8Array>"u"?Le:new Uint8Array(Le)},u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=function(Le){return Le?u.LongBits.from(Le).toHash():u.LongBits.zeroHash},u.longFromHash=function(Le,Ye){var tt=u.LongBits.fromHash(Le);return u.Long?u.Long.fromBits(tt.lo,tt.hi,Ye):tt.toNumber(!!Ye)};function t(pe,Le,Ye){for(var tt=Object.keys(Le),st=0;st<tt.length;++st)(pe[tt[st]]===void 0||!Ye)&&(pe[tt[st]]=Le[tt[st]]);return pe}u.merge=t,u.lcFirst=function(Le){return Le.charAt(0).toLowerCase()+Le.substring(1)};function de(pe){function Le(Ye,tt){if(!(this instanceof Le))return new Le(Ye,tt);Object.defineProperty(this,"message",{get:function(){return Ye}}),Error.captureStackTrace?Error.captureStackTrace(this,Le):Object.defineProperty(this,"stack",{value:new Error().stack||""}),tt&&t(this,tt)}return Le.prototype=Object.create(Error.prototype,{constructor:{value:Le,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return pe},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),Le}u.newError=de,u.ProtocolError=de("ProtocolError"),u.oneOfGetter=function(Le){for(var Ye={},tt=0;tt<Le.length;++tt)Ye[Le[tt]]=1;return function(){for(var st=Object.keys(this),ht=st.length-1;ht>-1;--ht)if(Ye[st[ht]]===1&&this[st[ht]]!==void 0&&this[st[ht]]!==null)return st[ht]}},u.oneOfSetter=function(Le){return function(Ye){for(var tt=0;tt<Le.length;++tt)Le[tt]!==Ye&&delete this[Le[tt]]}},u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var pe=u.Buffer;if(!pe){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=pe.from!==Uint8Array.from&&pe.from||function(Ye,tt){return new pe(Ye,tt)},u._Buffer_allocUnsafe=pe.allocUnsafe||function(Ye){return new pe(Ye)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=st;var me=requireMinimal$1(),u,t=me.LongBits,de=me.base64,pe=me.utf8;function Le(St,Rt,Pt){this.fn=St,this.len=Rt,this.next=void 0,this.val=Pt}function Ye(){}function tt(St){this.head=St.head,this.tail=St.tail,this.len=St.len,this.next=St.states}function st(){this.len=0,this.head=new Le(Ye,0,0),this.tail=this.head,this.states=null}var ht=function(){return me.Buffer?function(){return(st.create=function(){return new u})()}:function(){return new st}};st.create=ht(),st.alloc=function(Rt){return new me.Array(Rt)},me.Array!==Array&&(st.alloc=me.pool(st.alloc,me.Array.prototype.subarray)),st.prototype._push=function(Rt,Pt,Ot){return this.tail=this.tail.next=new Le(Rt,Pt,Ot),this.len+=Pt,this};function mt(St,Rt,Pt){Rt[Pt]=St&255}function gt(St,Rt,Pt){for(;St>127;)Rt[Pt++]=St&127|128,St>>>=7;Rt[Pt]=St}function bt(St,Rt){this.len=St,this.next=void 0,this.val=Rt}bt.prototype=Object.create(Le.prototype),bt.prototype.fn=gt,st.prototype.uint32=function(Rt){return this.len+=(this.tail=this.tail.next=new bt((Rt=Rt>>>0)<128?1:Rt<16384?2:Rt<2097152?3:Rt<268435456?4:5,Rt)).len,this},st.prototype.int32=function(Rt){return Rt<0?this._push(_t,10,t.fromNumber(Rt)):this.uint32(Rt)},st.prototype.sint32=function(Rt){return this.uint32((Rt<<1^Rt>>31)>>>0)};function _t(St,Rt,Pt){for(;St.hi;)Rt[Pt++]=St.lo&127|128,St.lo=(St.lo>>>7|St.hi<<25)>>>0,St.hi>>>=7;for(;St.lo>127;)Rt[Pt++]=St.lo&127|128,St.lo=St.lo>>>7;Rt[Pt++]=St.lo}st.prototype.uint64=function(Rt){var Pt=t.from(Rt);return this._push(_t,Pt.length(),Pt)},st.prototype.int64=st.prototype.uint64,st.prototype.sint64=function(Rt){var Pt=t.from(Rt).zzEncode();return this._push(_t,Pt.length(),Pt)},st.prototype.bool=function(Rt){return this._push(mt,1,Rt?1:0)};function vt(St,Rt,Pt){Rt[Pt]=St&255,Rt[Pt+1]=St>>>8&255,Rt[Pt+2]=St>>>16&255,Rt[Pt+3]=St>>>24}st.prototype.fixed32=function(Rt){return this._push(vt,4,Rt>>>0)},st.prototype.sfixed32=st.prototype.fixed32,st.prototype.fixed64=function(Rt){var Pt=t.from(Rt);return this._push(vt,4,Pt.lo)._push(vt,4,Pt.hi)},st.prototype.sfixed64=st.prototype.fixed64,st.prototype.float=function(Rt){return this._push(me.float.writeFloatLE,4,Rt)},st.prototype.double=function(Rt){return this._push(me.float.writeDoubleLE,8,Rt)};var Tt=me.Array.prototype.set?function(Rt,Pt,Ot){Pt.set(Rt,Ot)}:function(Rt,Pt,Ot){for(var Mt=0;Mt<Rt.length;++Mt)Pt[Ot+Mt]=Rt[Mt]};return st.prototype.bytes=function(Rt){var Pt=Rt.length>>>0;if(!Pt)return this._push(mt,1,0);if(me.isString(Rt)){var Ot=st.alloc(Pt=de.length(Rt));de.decode(Rt,Ot,0),Rt=Ot}return this.uint32(Pt)._push(Tt,Pt,Rt)},st.prototype.string=function(Rt){var Pt=pe.length(Rt);return Pt?this.uint32(Pt)._push(pe.write,Pt,Rt):this._push(mt,1,0)},st.prototype.fork=function(){return this.states=new tt(this),this.head=this.tail=new Le(Ye,0,0),this.len=0,this},st.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Le(Ye,0,0),this.len=0),this},st.prototype.ldelim=function(){var Rt=this.head,Pt=this.tail,Ot=this.len;return this.reset().uint32(Ot),Ot&&(this.tail.next=Rt.next,this.tail=Pt,this.len+=Ot),this},st.prototype.finish=function(){for(var Rt=this.head.next,Pt=this.constructor.alloc(this.len),Ot=0;Rt;)Rt.fn(Rt.val,Pt,Ot),Ot+=Rt.len,Rt=Rt.next;return Pt},st._configure=function(St){u=St,st.create=ht(),u._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=t;var me=requireWriter();(t.prototype=Object.create(me.prototype)).constructor=t;var u=requireMinimal$1();function t(){me.call(this)}t._configure=function(){t.alloc=u._Buffer_allocUnsafe,t.writeBytesBuffer=u.Buffer&&u.Buffer.prototype instanceof Uint8Array&&u.Buffer.prototype.set.name==="set"?function(Le,Ye,tt){Ye.set(Le,tt)}:function(Le,Ye,tt){if(Le.copy)Le.copy(Ye,tt,0,Le.length);else for(var st=0;st<Le.length;)Ye[tt++]=Le[st++]}},t.prototype.bytes=function(Le){u.isString(Le)&&(Le=u._Buffer_from(Le,"base64"));var Ye=Le.length>>>0;return this.uint32(Ye),Ye&&this._push(t.writeBytesBuffer,Ye,Le),this};function de(pe,Le,Ye){pe.length<40?u.utf8.write(pe,Le,Ye):Le.utf8Write?Le.utf8Write(pe,Ye):Le.write(pe,Ye)}return t.prototype.string=function(Le){var Ye=u.Buffer.byteLength(Le);return this.uint32(Ye),Ye&&this._push(de,Ye,Le),this},t._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=Le;var me=requireMinimal$1(),u,t=me.LongBits,de=me.utf8;function pe(gt,bt){return RangeError("index out of range: "+gt.pos+" + "+(bt||1)+" > "+gt.len)}function Le(gt){this.buf=gt,this.pos=0,this.len=gt.length}var Ye=typeof Uint8Array<"u"?function(bt){if(bt instanceof Uint8Array||Array.isArray(bt))return new Le(bt);throw Error("illegal buffer")}:function(bt){if(Array.isArray(bt))return new Le(bt);throw Error("illegal buffer")},tt=function(){return me.Buffer?function(_t){return(Le.create=function(Tt){return me.Buffer.isBuffer(Tt)?new u(Tt):Ye(Tt)})(_t)}:Ye};Le.create=tt(),Le.prototype._slice=me.Array.prototype.subarray||me.Array.prototype.slice,Le.prototype.uint32=function(){var bt=4294967295;return function(){if(bt=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(bt=(bt|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return bt;if((this.pos+=5)>this.len)throw this.pos=this.len,pe(this,10);return bt}}(),Le.prototype.int32=function(){return this.uint32()|0},Le.prototype.sint32=function(){var bt=this.uint32();return bt>>>1^-(bt&1)|0};function st(){var gt=new t(0,0),bt=0;if(this.len-this.pos>4){for(;bt<4;++bt)if(gt.lo=(gt.lo|(this.buf[this.pos]&127)<<bt*7)>>>0,this.buf[this.pos++]<128)return gt;if(gt.lo=(gt.lo|(this.buf[this.pos]&127)<<28)>>>0,gt.hi=(gt.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return gt;bt=0}else{for(;bt<3;++bt){if(this.pos>=this.len)throw pe(this);if(gt.lo=(gt.lo|(this.buf[this.pos]&127)<<bt*7)>>>0,this.buf[this.pos++]<128)return gt}return gt.lo=(gt.lo|(this.buf[this.pos++]&127)<<bt*7)>>>0,gt}if(this.len-this.pos>4){for(;bt<5;++bt)if(gt.hi=(gt.hi|(this.buf[this.pos]&127)<<bt*7+3)>>>0,this.buf[this.pos++]<128)return gt}else for(;bt<5;++bt){if(this.pos>=this.len)throw pe(this);if(gt.hi=(gt.hi|(this.buf[this.pos]&127)<<bt*7+3)>>>0,this.buf[this.pos++]<128)return gt}throw Error("invalid varint encoding")}Le.prototype.bool=function(){return this.uint32()!==0};function ht(gt,bt){return(gt[bt-4]|gt[bt-3]<<8|gt[bt-2]<<16|gt[bt-1]<<24)>>>0}Le.prototype.fixed32=function(){if(this.pos+4>this.len)throw pe(this,4);return ht(this.buf,this.pos+=4)},Le.prototype.sfixed32=function(){if(this.pos+4>this.len)throw pe(this,4);return ht(this.buf,this.pos+=4)|0};function mt(){if(this.pos+8>this.len)throw pe(this,8);return new t(ht(this.buf,this.pos+=4),ht(this.buf,this.pos+=4))}return Le.prototype.float=function(){if(this.pos+4>this.len)throw pe(this,4);var bt=me.float.readFloatLE(this.buf,this.pos);return this.pos+=4,bt},Le.prototype.double=function(){if(this.pos+8>this.len)throw pe(this,4);var bt=me.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,bt},Le.prototype.bytes=function(){var bt=this.uint32(),_t=this.pos,vt=this.pos+bt;if(vt>this.len)throw pe(this,bt);if(this.pos+=bt,Array.isArray(this.buf))return this.buf.slice(_t,vt);if(_t===vt){var Tt=me.Buffer;return Tt?Tt.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,_t,vt)},Le.prototype.string=function(){var bt=this.bytes();return de.read(bt,0,bt.length)},Le.prototype.skip=function(bt){if(typeof bt=="number"){if(this.pos+bt>this.len)throw pe(this,bt);this.pos+=bt}else do if(this.pos>=this.len)throw pe(this);while(this.buf[this.pos++]&128);return this},Le.prototype.skipType=function(gt){switch(gt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(gt=this.uint32()&7)!==4;)this.skipType(gt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+gt+" at offset "+this.pos)}return this},Le._configure=function(gt){u=gt,Le.create=tt(),u._configure();var bt=me.Long?"toLong":"toNumber";me.merge(Le.prototype,{int64:function(){return st.call(this)[bt](!1)},uint64:function(){return st.call(this)[bt](!0)},sint64:function(){return st.call(this).zzDecode()[bt](!1)},fixed64:function(){return mt.call(this)[bt](!0)},sfixed64:function(){return mt.call(this)[bt](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=t;var me=requireReader();(t.prototype=Object.create(me.prototype)).constructor=t;var u=requireMinimal$1();function t(de){me.call(this,de)}return t._configure=function(){u.Buffer&&(t.prototype._slice=u.Buffer.prototype.slice)},t.prototype.string=function(){var pe=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+pe,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+pe,this.len))},t._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=u;var me=requireMinimal$1();(u.prototype=Object.create(me.EventEmitter.prototype)).constructor=u;function u(t,de,pe){if(typeof t!="function")throw TypeError("rpcImpl must be a function");me.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!de,this.responseDelimited=!!pe}return u.prototype.rpcCall=function t(de,pe,Le,Ye,tt){if(!Ye)throw TypeError("request must be specified");var st=this;if(!tt)return me.asPromise(t,st,de,pe,Le,Ye);if(!st.rpcImpl){setTimeout(function(){tt(Error("already ended"))},0);return}try{return st.rpcImpl(de,pe[st.requestDelimited?"encodeDelimited":"encode"](Ye).finish(),function(mt,gt){if(mt)return st.emit("error",mt,de),tt(mt);if(gt===null){st.end(!0);return}if(!(gt instanceof Le))try{gt=Le[st.responseDelimited?"decodeDelimited":"decode"](gt)}catch(bt){return st.emit("error",bt,de),tt(bt)}return st.emit("data",gt,de),tt(null,gt)})}catch(ht){st.emit("error",ht,de),setTimeout(function(){tt(ht)},0);return}},u.prototype.end=function(de){return this.rpcImpl&&(de||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(me){var u=me;u.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(me){var u=me;u.build="minimal",u.Writer=requireWriter(),u.BufferWriter=requireWriter_buffer(),u.Reader=requireReader(),u.BufferReader=requireReader_buffer(),u.util=requireMinimal$1(),u.rpc=requireRpc(),u.roots=requireRoots(),u.configure=t;function t(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}t()}(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}requireMinimal();const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(me=>{PACKET_TYPES_REVERSE[PACKET_TYPES[me]]=me});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=me=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(me):me&&me.buffer instanceof ArrayBuffer,encodePacket=({type:me,data:u},t,de)=>withNativeBlob$1&&u instanceof Blob?t?de(u):encodeBlobAsBase64(u,de):withNativeArrayBuffer$2&&(u instanceof ArrayBuffer||isView$1(u))?t?de(u):encodeBlobAsBase64(new Blob([u]),de):de(PACKET_TYPES[me]+(u||"")),encodeBlobAsBase64=(me,u)=>{const t=new FileReader;return t.onload=function(){const de=t.result.split(",")[1];u("b"+(de||""))},t.readAsDataURL(me)};function toArray(me){return me instanceof Uint8Array?me:me instanceof ArrayBuffer?new Uint8Array(me):new Uint8Array(me.buffer,me.byteOffset,me.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(me,u){if(withNativeBlob$1&&me.data instanceof Blob)return me.data.arrayBuffer().then(toArray).then(u);if(withNativeArrayBuffer$2&&(me.data instanceof ArrayBuffer||isView$1(me.data)))return u(toArray(me.data));encodePacket(me,!1,t=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),u(TEXT_ENCODER.encode(t))})}const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let me=0;me<chars.length;me++)lookup$1[chars.charCodeAt(me)]=me;const decode$1=me=>{let u=me.length*.75,t=me.length,de,pe=0,Le,Ye,tt,st;me[me.length-1]==="="&&(u--,me[me.length-2]==="="&&u--);const ht=new ArrayBuffer(u),mt=new Uint8Array(ht);for(de=0;de<t;de+=4)Le=lookup$1[me.charCodeAt(de)],Ye=lookup$1[me.charCodeAt(de+1)],tt=lookup$1[me.charCodeAt(de+2)],st=lookup$1[me.charCodeAt(de+3)],mt[pe++]=Le<<2|Ye>>4,mt[pe++]=(Ye&15)<<4|tt>>2,mt[pe++]=(tt&3)<<6|st&63;return ht},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(me,u)=>{if(typeof me!="string")return{type:"message",data:mapBinary(me,u)};const t=me.charAt(0);return t==="b"?{type:"message",data:decodeBase64Packet(me.substring(1),u)}:PACKET_TYPES_REVERSE[t]?me.length>1?{type:PACKET_TYPES_REVERSE[t],data:me.substring(1)}:{type:PACKET_TYPES_REVERSE[t]}:ERROR_PACKET},decodeBase64Packet=(me,u)=>{if(withNativeArrayBuffer$1){const t=decode$1(me);return mapBinary(t,u)}else return{base64:!0,data:me}},mapBinary=(me,u)=>{switch(u){case"blob":return me instanceof Blob?me:new Blob([me]);case"arraybuffer":default:return me instanceof ArrayBuffer?me:me.buffer}},SEPARATOR="",encodePayload=(me,u)=>{const t=me.length,de=new Array(t);let pe=0;me.forEach((Le,Ye)=>{encodePacket(Le,!1,tt=>{de[Ye]=tt,++pe===t&&u(de.join(SEPARATOR))})})},decodePayload=(me,u)=>{const t=me.split(SEPARATOR),de=[];for(let pe=0;pe<t.length;pe++){const Le=decodePacket(t[pe],u);if(de.push(Le),Le.type==="error")break}return de};function createPacketEncoderStream(){return new TransformStream({transform(me,u){encodePacketToBinary(me,t=>{const de=t.length;let pe;if(de<126)pe=new Uint8Array(1),new DataView(pe.buffer).setUint8(0,de);else if(de<65536){pe=new Uint8Array(3);const Le=new DataView(pe.buffer);Le.setUint8(0,126),Le.setUint16(1,de)}else{pe=new Uint8Array(9);const Le=new DataView(pe.buffer);Le.setUint8(0,127),Le.setBigUint64(1,BigInt(de))}me.data&&typeof me.data!="string"&&(pe[0]|=128),u.enqueue(pe),u.enqueue(t)})}})}let TEXT_DECODER;function totalLength(me){return me.reduce((u,t)=>u+t.length,0)}function concatChunks(me,u){if(me[0].length===u)return me.shift();const t=new Uint8Array(u);let de=0;for(let pe=0;pe<u;pe++)t[pe]=me[0][de++],de===me[0].length&&(me.shift(),de=0);return me.length&&de<me[0].length&&(me[0]=me[0].slice(de)),t}function createPacketDecoderStream(me,u){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const t=[];let de=0,pe=-1,Le=!1;return new TransformStream({transform(Ye,tt){for(t.push(Ye);;){if(de===0){if(totalLength(t)<1)break;const st=concatChunks(t,1);Le=(st[0]&128)===128,pe=st[0]&127,pe<126?de=3:pe===126?de=1:de=2}else if(de===1){if(totalLength(t)<2)break;const st=concatChunks(t,2);pe=new DataView(st.buffer,st.byteOffset,st.length).getUint16(0),de=3}else if(de===2){if(totalLength(t)<8)break;const st=concatChunks(t,8),ht=new DataView(st.buffer,st.byteOffset,st.length),mt=ht.getUint32(0);if(mt>Math.pow(2,21)-1){tt.enqueue(ERROR_PACKET);break}pe=mt*Math.pow(2,32)+ht.getUint32(4),de=3}else{if(totalLength(t)<pe)break;const st=concatChunks(t,pe);tt.enqueue(decodePacket(Le?st:TEXT_DECODER.decode(st),u)),de=0}if(pe===0||pe>me){tt.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(me){if(me)return mixin(me)}function mixin(me){for(var u in Emitter.prototype)me[u]=Emitter.prototype[u];return me}Emitter.prototype.on=Emitter.prototype.addEventListener=function(me,u){return this._callbacks=this._callbacks||{},(this._callbacks["$"+me]=this._callbacks["$"+me]||[]).push(u),this};Emitter.prototype.once=function(me,u){function t(){this.off(me,t),u.apply(this,arguments)}return t.fn=u,this.on(me,t),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(me,u){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+me];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+me],this;for(var de,pe=0;pe<t.length;pe++)if(de=t[pe],de===u||de.fn===u){t.splice(pe,1);break}return t.length===0&&delete this._callbacks["$"+me],this};Emitter.prototype.emit=function(me){this._callbacks=this._callbacks||{};for(var u=new Array(arguments.length-1),t=this._callbacks["$"+me],de=1;de<arguments.length;de++)u[de-1]=arguments[de];if(t){t=t.slice(0);for(var de=0,pe=t.length;de<pe;++de)t[de].apply(this,u)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(me){return this._callbacks=this._callbacks||{},this._callbacks["$"+me]||[]};Emitter.prototype.hasListeners=function(me){return!!this.listeners(me).length};const globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function pick(me,...u){return u.reduce((t,de)=>(me.hasOwnProperty(de)&&(t[de]=me[de]),t),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(me,u){u.useNativeTimers?(me.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),me.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(me.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),me.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(me){return typeof me=="string"?utf8Length(me):Math.ceil((me.byteLength||me.size)*BASE64_OVERHEAD)}function utf8Length(me){let u=0,t=0;for(let de=0,pe=me.length;de<pe;de++)u=me.charCodeAt(de),u<128?t+=1:u<2048?t+=2:u<55296||u>=57344?t+=3:(de++,t+=4);return t}function encode$1(me){let u="";for(let t in me)me.hasOwnProperty(t)&&(u.length&&(u+="&"),u+=encodeURIComponent(t)+"="+encodeURIComponent(me[t]));return u}function decode(me){let u={},t=me.split("&");for(let de=0,pe=t.length;de<pe;de++){let Le=t[de].split("=");u[decodeURIComponent(Le[0])]=decodeURIComponent(Le[1])}return u}class TransportError extends Error{constructor(u,t,de){super(u),this.description=t,this.context=de,this.type="TransportError"}}class Transport extends Emitter{constructor(u){super(),this.writable=!1,installTimerFunctions(this,u),this.opts=u,this.query=u.query,this.socket=u.socket}onError(u,t,de){return super.emitReserved("error",new TransportError(u,t,de)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(u){this.readyState==="open"&&this.write(u)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(u){const t=decodePacket(u,this.socket.binaryType);this.onPacket(t)}onPacket(u){super.emitReserved("packet",u)}onClose(u){this.readyState="closed",super.emitReserved("close",u)}pause(u){}createUri(u,t={}){return u+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const u=this.opts.hostname;return u.indexOf(":")===-1?u:"["+u+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(u){const t=encode$1(u);return t.length?"?"+t:""}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let seed=0,i=0,prev;function encode(me){let u="";do u=alphabet[me%length]+u,me=Math.floor(me/length);while(me>0);return u}function yeast(){const me=encode(+new Date);return me!==prev?(seed=0,prev=me):me+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(me){}const hasCORS=value;function XHR(me){const u=me.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!u||hasCORS))return new XMLHttpRequest}catch{}if(!u)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function createCookieJar(){}function empty(){}const hasXHR2=function(){return new XHR({xdomain:!1}).responseType!=null}();class Polling extends Transport{constructor(u){if(super(u),this.polling=!1,typeof location<"u"){const de=location.protocol==="https:";let pe=location.port;pe||(pe=de?"443":"80"),this.xd=typeof location<"u"&&u.hostname!==location.hostname||pe!==u.port}const t=u&&u.forceBase64;this.supportsBinary=hasXHR2&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(u){this.readyState="pausing";const t=()=>{this.readyState="paused",u()};if(this.polling||!this.writable){let de=0;this.polling&&(de++,this.once("pollComplete",function(){--de||t()})),this.writable||(de++,this.once("drain",function(){--de||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(u){const t=de=>{if(this.readyState==="opening"&&de.type==="open"&&this.onOpen(),de.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(de)};decodePayload(u,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const u=()=>{this.write([{type:"close"}])};this.readyState==="open"?u():this.once("open",u)}write(u){this.writable=!1,encodePayload(u,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const u=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=yeast()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(u,t)}request(u={}){return Object.assign(u,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Request$1(this.uri(),u)}doWrite(u,t){const de=this.request({method:"POST",data:u});de.on("success",t),de.on("error",(pe,Le)=>{this.onError("xhr post error",pe,Le)})}doPoll(){const u=this.request();u.on("data",this.onData.bind(this)),u.on("error",(t,de)=>{this.onError("xhr poll error",t,de)}),this.pollXhr=u}}let Request$1=class al extends Emitter{constructor(u,t){super(),installTimerFunctions(this,t),this.opts=t,this.method=t.method||"GET",this.uri=u,this.data=t.data!==void 0?t.data:null,this.create()}create(){var u;const t=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const de=this.xhr=new XHR(t);try{de.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){de.setDisableHeaderCheck&&de.setDisableHeaderCheck(!0);for(let pe in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(pe)&&de.setRequestHeader(pe,this.opts.extraHeaders[pe])}}catch{}if(this.method==="POST")try{de.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{de.setRequestHeader("Accept","*/*")}catch{}(u=this.opts.cookieJar)===null||u===void 0||u.addCookies(de),"withCredentials"in de&&(de.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(de.timeout=this.opts.requestTimeout),de.onreadystatechange=()=>{var pe;de.readyState===3&&((pe=this.opts.cookieJar)===null||pe===void 0||pe.parseCookies(de)),de.readyState===4&&(de.status===200||de.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof de.status=="number"?de.status:0)},0))},de.send(this.data)}catch(pe){this.setTimeoutFn(()=>{this.onError(pe)},0);return}typeof document<"u"&&(this.index=al.requestsCount++,al.requests[this.index]=this)}onError(u){this.emitReserved("error",u,this.xhr),this.cleanup(!0)}cleanup(u){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=empty,u)try{this.xhr.abort()}catch{}typeof document<"u"&&delete al.requests[this.index],this.xhr=null}}onLoad(){const u=this.xhr.responseText;u!==null&&(this.emitReserved("data",u),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Request$1.requestsCount=0;Request$1.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const me="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(me,unloadHandler,!1)}}function unloadHandler(){for(let me in Request$1.requests)Request$1.requests.hasOwnProperty(me)&&Request$1.requests[me].abort()}const nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?u=>Promise.resolve().then(u):(u,t)=>t(u,0),WebSocket=globalThisShim.WebSocket||globalThisShim.MozWebSocket,usingBrowserWebSocket=!0,defaultBinaryType="arraybuffer",isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class WS extends Transport{constructor(u){super(u),this.supportsBinary=!u.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const u=this.uri(),t=this.opts.protocols,de=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(de.headers=this.opts.extraHeaders);try{this.ws=usingBrowserWebSocket&&!isReactNative?t?new WebSocket(u,t):new WebSocket(u):new WebSocket(u,t,de)}catch(pe){return this.emitReserved("error",pe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=u=>this.onClose({description:"websocket connection closed",context:u}),this.ws.onmessage=u=>this.onData(u.data),this.ws.onerror=u=>this.onError("websocket error",u)}write(u){this.writable=!1;for(let t=0;t<u.length;t++){const de=u[t],pe=t===u.length-1;encodePacket(de,this.supportsBinary,Le=>{const Ye={};try{usingBrowserWebSocket&&this.ws.send(Le)}catch{}pe&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const u=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=yeast()),this.supportsBinary||(t.b64=1),this.createUri(u,t)}check(){return!!WebSocket}}class WT extends Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(u=>{this.onError("webtransport error",u)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(u=>{const t=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),de=u.readable.pipeThrough(t).getReader(),pe=createPacketEncoderStream();pe.readable.pipeTo(u.writable),this.writer=pe.writable.getWriter();const Le=()=>{de.read().then(({done:tt,value:st})=>{tt||(this.onPacket(st),Le())}).catch(tt=>{})};Le();const Ye={type:"open"};this.query.sid&&(Ye.data=`{"sid":"${this.query.sid}"}`),this.writer.write(Ye).then(()=>this.onOpen())})}))}write(u){this.writable=!1;for(let t=0;t<u.length;t++){const de=u[t],pe=t===u.length-1;this.writer.write(de).then(()=>{pe&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var u;(u=this.transport)===null||u===void 0||u.close()}}const transports={websocket:WS,webtransport:WT,polling:Polling},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(me){if(me.length>2e3)throw"URI too long";const u=me,t=me.indexOf("["),de=me.indexOf("]");t!=-1&&de!=-1&&(me=me.substring(0,t)+me.substring(t,de).replace(/:/g,";")+me.substring(de,me.length));let pe=re.exec(me||""),Le={},Ye=14;for(;Ye--;)Le[parts[Ye]]=pe[Ye]||"";return t!=-1&&de!=-1&&(Le.source=u,Le.host=Le.host.substring(1,Le.host.length-1).replace(/;/g,":"),Le.authority=Le.authority.replace("[","").replace("]","").replace(/;/g,":"),Le.ipv6uri=!0),Le.pathNames=pathNames(Le,Le.path),Le.queryKey=queryKey(Le,Le.query),Le}function pathNames(me,u){const t=/\/{2,9}/g,de=u.replace(t,"/").split("/");return(u.slice(0,1)=="/"||u.length===0)&&de.splice(0,1),u.slice(-1)=="/"&&de.splice(de.length-1,1),de}function queryKey(me,u){const t={};return u.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(de,pe,Le){pe&&(t[pe]=Le)}),t}let Socket$1=class Qo extends Emitter{constructor(u,t={}){super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],u&&typeof u=="object"&&(t=u,u=null),u?(u=parse(u),t.hostname=u.host,t.secure=u.protocol==="https"||u.protocol==="wss",t.port=u.port,u.query&&(t.query=u.query)):t.host&&(t.hostname=parse(t.host).host),installTimerFunctions(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(u){const t=Object.assign({},this.opts.query);t.EIO=protocol$1,t.transport=u,this.id&&(t.sid=this.id);const de=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[u]);return new transports[u](de)}open(){let u;if(this.opts.rememberUpgrade&&Qo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)u="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else u=this.transports[0];this.readyState="opening";try{u=this.createTransport(u)}catch{this.transports.shift(),this.open();return}u.open(),this.setTransport(u)}setTransport(u){this.transport&&this.transport.removeAllListeners(),this.transport=u,u.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(u){let t=this.createTransport(u),de=!1;Qo.priorWebsocketSuccess=!1;const pe=()=>{de||(t.send([{type:"ping",data:"probe"}]),t.once("packet",gt=>{if(!de)if(gt.type==="pong"&&gt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Qo.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{de||this.readyState!=="closed"&&(mt(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const bt=new Error("probe error");bt.transport=t.name,this.emitReserved("upgradeError",bt)}}))};function Le(){de||(de=!0,mt(),t.close(),t=null)}const Ye=gt=>{const bt=new Error("probe error: "+gt);bt.transport=t.name,Le(),this.emitReserved("upgradeError",bt)};function tt(){Ye("transport closed")}function st(){Ye("socket closed")}function ht(gt){t&&gt.name!==t.name&&Le()}const mt=()=>{t.removeListener("open",pe),t.removeListener("error",Ye),t.removeListener("close",tt),this.off("close",st),this.off("upgrading",ht)};t.once("open",pe),t.once("error",Ye),t.once("close",tt),this.once("close",st),this.once("upgrading",ht),this.upgrades.indexOf("webtransport")!==-1&&u!=="webtransport"?this.setTimeoutFn(()=>{de||t.open()},200):t.open()}onOpen(){if(this.readyState="open",Qo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let u=0;const t=this.upgrades.length;for(;u<t;u++)this.probe(this.upgrades[u])}}onPacket(u){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",u),this.emitReserved("heartbeat"),this.resetPingTimeout(),u.type){case"open":this.onHandshake(JSON.parse(u.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=u.data,this.onError(t);break;case"message":this.emitReserved("data",u.data),this.emitReserved("message",u.data);break}}onHandshake(u){this.emitReserved("handshake",u),this.id=u.sid,this.transport.query.sid=u.sid,this.upgrades=this.filterUpgrades(u.upgrades),this.pingInterval=u.pingInterval,this.pingTimeout=u.pingTimeout,this.maxPayload=u.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const u=this.getWritablePackets();this.transport.send(u),this.prevBufferLen=u.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let de=0;de<this.writeBuffer.length;de++){const pe=this.writeBuffer[de].data;if(pe&&(t+=byteLength(pe)),de>0&&t>this.maxPayload)return this.writeBuffer.slice(0,de);t+=2}return this.writeBuffer}write(u,t,de){return this.sendPacket("message",u,t,de),this}send(u,t,de){return this.sendPacket("message",u,t,de),this}sendPacket(u,t,de,pe){if(typeof t=="function"&&(pe=t,t=void 0),typeof de=="function"&&(pe=de,de=null),this.readyState==="closing"||this.readyState==="closed")return;de=de||{},de.compress=de.compress!==!1;const Le={type:u,data:t,options:de};this.emitReserved("packetCreate",Le),this.writeBuffer.push(Le),pe&&this.once("flush",pe),this.flush()}close(){const u=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),u()},de=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?de():u()}):this.upgrading?de():u()),this}onError(u){Qo.priorWebsocketSuccess=!1,this.emitReserved("error",u),this.onClose("transport error",u)}onClose(u,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",u,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(u){const t=[];let de=0;const pe=u.length;for(;de<pe;de++)~this.transports.indexOf(u[de])&&t.push(u[de]);return t}};Socket$1.protocol=protocol$1;function url(me,u="",t){let de=me;t=t||typeof location<"u"&&location,me==null&&(me=t.protocol+"//"+t.host),typeof me=="string"&&(me.charAt(0)==="/"&&(me.charAt(1)==="/"?me=t.protocol+me:me=t.host+me),/^(https?|wss?):\/\//.test(me)||(typeof t<"u"?me=t.protocol+"//"+me:me="https://"+me),de=parse(me)),de.port||(/^(http|ws)$/.test(de.protocol)?de.port="80":/^(http|ws)s$/.test(de.protocol)&&(de.port="443")),de.path=de.path||"/";const Le=de.host.indexOf(":")!==-1?"["+de.host+"]":de.host;return de.id=de.protocol+"://"+Le+":"+de.port+u,de.href=de.protocol+"://"+Le+(t&&t.port===de.port?"":":"+de.port),de}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=me=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(me):me.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString.call(File)==="[object FileConstructor]";function isBinary(me){return withNativeArrayBuffer&&(me instanceof ArrayBuffer||isView(me))||withNativeBlob&&me instanceof Blob||withNativeFile&&me instanceof File}function hasBinary(me,u){if(!me||typeof me!="object")return!1;if(Array.isArray(me)){for(let t=0,de=me.length;t<de;t++)if(hasBinary(me[t]))return!0;return!1}if(isBinary(me))return!0;if(me.toJSON&&typeof me.toJSON=="function"&&arguments.length===1)return hasBinary(me.toJSON(),!0);for(const t in me)if(Object.prototype.hasOwnProperty.call(me,t)&&hasBinary(me[t]))return!0;return!1}function deconstructPacket(me){const u=[],t=me.data,de=me;return de.data=_deconstructPacket(t,u),de.attachments=u.length,{packet:de,buffers:u}}function _deconstructPacket(me,u){if(!me)return me;if(isBinary(me)){const t={_placeholder:!0,num:u.length};return u.push(me),t}else if(Array.isArray(me)){const t=new Array(me.length);for(let de=0;de<me.length;de++)t[de]=_deconstructPacket(me[de],u);return t}else if(typeof me=="object"&&!(me instanceof Date)){const t={};for(const de in me)Object.prototype.hasOwnProperty.call(me,de)&&(t[de]=_deconstructPacket(me[de],u));return t}return me}function reconstructPacket(me,u){return me.data=_reconstructPacket(me.data,u),delete me.attachments,me}function _reconstructPacket(me,u){if(!me)return me;if(me&&me._placeholder===!0){if(typeof me.num=="number"&&me.num>=0&&me.num<u.length)return u[me.num];throw new Error("illegal attachments")}else if(Array.isArray(me))for(let t=0;t<me.length;t++)me[t]=_reconstructPacket(me[t],u);else if(typeof me=="object")for(const t in me)Object.prototype.hasOwnProperty.call(me,t)&&(me[t]=_reconstructPacket(me[t],u));return me}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType;(function(me){me[me.CONNECT=0]="CONNECT",me[me.DISCONNECT=1]="DISCONNECT",me[me.EVENT=2]="EVENT",me[me.ACK=3]="ACK",me[me.CONNECT_ERROR=4]="CONNECT_ERROR",me[me.BINARY_EVENT=5]="BINARY_EVENT",me[me.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));let Encoder$1=class{constructor(u){this.replacer=u}encode(u){return(u.type===PacketType.EVENT||u.type===PacketType.ACK)&&hasBinary(u)?this.encodeAsBinary({type:u.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:u.nsp,data:u.data,id:u.id}):[this.encodeAsString(u)]}encodeAsString(u){let t=""+u.type;return(u.type===PacketType.BINARY_EVENT||u.type===PacketType.BINARY_ACK)&&(t+=u.attachments+"-"),u.nsp&&u.nsp!=="/"&&(t+=u.nsp+","),u.id!=null&&(t+=u.id),u.data!=null&&(t+=JSON.stringify(u.data,this.replacer)),t}encodeAsBinary(u){const t=deconstructPacket(u),de=this.encodeAsString(t.packet),pe=t.buffers;return pe.unshift(de),pe}};function isObject(me){return Object.prototype.toString.call(me)==="[object Object]"}let Decoder$1=class bm extends Emitter{constructor(u){super(),this.reviver=u}add(u){let t;if(typeof u=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(u);const de=t.type===PacketType.BINARY_EVENT;de||t.type===PacketType.BINARY_ACK?(t.type=de?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(isBinary(u)||u.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(u),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+u)}decodeString(u){let t=0;const de={type:Number(u.charAt(0))};if(PacketType[de.type]===void 0)throw new Error("unknown packet type "+de.type);if(de.type===PacketType.BINARY_EVENT||de.type===PacketType.BINARY_ACK){const Le=t+1;for(;u.charAt(++t)!=="-"&&t!=u.length;);const Ye=u.substring(Le,t);if(Ye!=Number(Ye)||u.charAt(t)!=="-")throw new Error("Illegal attachments");de.attachments=Number(Ye)}if(u.charAt(t+1)==="/"){const Le=t+1;for(;++t&&!(u.charAt(t)===","||t===u.length););de.nsp=u.substring(Le,t)}else de.nsp="/";const pe=u.charAt(t+1);if(pe!==""&&Number(pe)==pe){const Le=t+1;for(;++t;){const Ye=u.charAt(t);if(Ye==null||Number(Ye)!=Ye){--t;break}if(t===u.length)break}de.id=Number(u.substring(Le,t+1))}if(u.charAt(++t)){const Le=this.tryParse(u.substr(t));if(bm.isPayloadValid(de.type,Le))de.data=Le;else throw new Error("invalid payload")}return de}tryParse(u){try{return JSON.parse(u,this.reviver)}catch{return!1}}static isPayloadValid(u,t){switch(u){case PacketType.CONNECT:return isObject(t);case PacketType.DISCONNECT:return t===void 0;case PacketType.CONNECT_ERROR:return typeof t=="string"||isObject(t);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&RESERVED_EVENTS$1.indexOf(t[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class BinaryReconstructor{constructor(u){this.packet=u,this.buffers=[],this.reconPack=u}takeBinaryData(u){if(this.buffers.push(u),this.buffers.length===this.reconPack.attachments){const t=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Decoder$1,Encoder:Encoder$1,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(me,u,t){return me.on(u,t),function(){me.off(u,t)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(u,t,de){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=u,this.nsp=t,de&&de.auth&&(this.auth=de.auth),this._opts=Object.assign({},de),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const u=this.io;this.subs=[on(u,"open",this.onopen.bind(this)),on(u,"packet",this.onpacket.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...u){return u.unshift("message"),this.emit.apply(this,u),this}emit(u,...t){if(RESERVED_EVENTS.hasOwnProperty(u))throw new Error('"'+u.toString()+'" is a reserved event name');if(t.unshift(u),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const de={type:PacketType.EVENT,data:t};if(de.options={},de.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const Ye=this.ids++,tt=t.pop();this._registerAckCallback(Ye,tt),de.id=Ye}const pe=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!pe||!this.connected)||(this.connected?(this.notifyOutgoingListeners(de),this.packet(de)):this.sendBuffer.push(de)),this.flags={},this}_registerAckCallback(u,t){var de;const pe=(de=this.flags.timeout)!==null&&de!==void 0?de:this._opts.ackTimeout;if(pe===void 0){this.acks[u]=t;return}const Le=this.io.setTimeoutFn(()=>{delete this.acks[u];for(let Ye=0;Ye<this.sendBuffer.length;Ye++)this.sendBuffer[Ye].id===u&&this.sendBuffer.splice(Ye,1);t.call(this,new Error("operation has timed out"))},pe);this.acks[u]=(...Ye)=>{this.io.clearTimeoutFn(Le),t.apply(this,[null,...Ye])}}emitWithAck(u,...t){const de=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((pe,Le)=>{t.push((Ye,tt)=>de?Ye?Le(Ye):pe(tt):pe(Ye)),this.emit(u,...t)})}_addToQueue(u){let t;typeof u[u.length-1]=="function"&&(t=u.pop());const de={id:this._queueSeq++,tryCount:0,pending:!1,args:u,flags:Object.assign({fromQueue:!0},this.flags)};u.push((pe,...Le)=>de!==this._queue[0]?void 0:(pe!==null?de.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(pe)):(this._queue.shift(),t&&t(null,...Le)),de.pending=!1,this._drainQueue())),this._queue.push(de),this._drainQueue()}_drainQueue(u=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!u||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(u){u.nsp=this.nsp,this.io._packet(u)}onopen(){typeof this.auth=="function"?this.auth(u=>{this._sendConnectPacket(u)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(u){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},u):u})}onerror(u){this.connected||this.emitReserved("connect_error",u)}onclose(u,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",u,t)}onpacket(u){if(u.nsp===this.nsp)switch(u.type){case PacketType.CONNECT:u.data&&u.data.sid?this.onconnect(u.data.sid,u.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(u);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(u);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const de=new Error(u.data.message);de.data=u.data.data,this.emitReserved("connect_error",de);break}}onevent(u){const t=u.data||[];u.id!=null&&t.push(this.ack(u.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(u){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const de of t)de.apply(this,u)}super.emit.apply(this,u),this._pid&&u.length&&typeof u[u.length-1]=="string"&&(this._lastOffset=u[u.length-1])}ack(u){const t=this;let de=!1;return function(...pe){de||(de=!0,t.packet({type:PacketType.ACK,id:u,data:pe}))}}onack(u){const t=this.acks[u.id];typeof t=="function"&&(t.apply(this,u.data),delete this.acks[u.id])}onconnect(u,t){this.id=u,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(u=>this.emitEvent(u)),this.receiveBuffer=[],this.sendBuffer.forEach(u=>{this.notifyOutgoingListeners(u),this.packet(u)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(u=>u()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(u){return this.flags.compress=u,this}get volatile(){return this.flags.volatile=!0,this}timeout(u){return this.flags.timeout=u,this}onAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(u),this}prependAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(u),this}offAny(u){if(!this._anyListeners)return this;if(u){const t=this._anyListeners;for(let de=0;de<t.length;de++)if(u===t[de])return t.splice(de,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(u),this}prependAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(u),this}offAnyOutgoing(u){if(!this._anyOutgoingListeners)return this;if(u){const t=this._anyOutgoingListeners;for(let de=0;de<t.length;de++)if(u===t[de])return t.splice(de,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(u){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const de of t)de.apply(this,u.data)}}}function Backoff(me){me=me||{},this.ms=me.min||100,this.max=me.max||1e4,this.factor=me.factor||2,this.jitter=me.jitter>0&&me.jitter<=1?me.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var me=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var u=Math.random(),t=Math.floor(u*this.jitter*me);me=(Math.floor(u*10)&1)==0?me-t:me+t}return Math.min(me,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(me){this.ms=me};Backoff.prototype.setMax=function(me){this.max=me};Backoff.prototype.setJitter=function(me){this.jitter=me};class Manager extends Emitter{constructor(u,t){var de;super(),this.nsps={},this.subs=[],u&&typeof u=="object"&&(t=u,u=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,installTimerFunctions(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((de=t.randomizationFactor)!==null&&de!==void 0?de:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=u;const pe=t.parser||parser;this.encoder=new pe.Encoder,this.decoder=new pe.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(u){return arguments.length?(this._reconnection=!!u,this):this._reconnection}reconnectionAttempts(u){return u===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=u,this)}reconnectionDelay(u){var t;return u===void 0?this._reconnectionDelay:(this._reconnectionDelay=u,(t=this.backoff)===null||t===void 0||t.setMin(u),this)}randomizationFactor(u){var t;return u===void 0?this._randomizationFactor:(this._randomizationFactor=u,(t=this.backoff)===null||t===void 0||t.setJitter(u),this)}reconnectionDelayMax(u){var t;return u===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=u,(t=this.backoff)===null||t===void 0||t.setMax(u),this)}timeout(u){return arguments.length?(this._timeout=u,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(u){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const t=this.engine,de=this;this._readyState="opening",this.skipReconnect=!1;const pe=on(t,"open",function(){de.onopen(),u&&u()}),Le=tt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",tt),u?u(tt):this.maybeReconnectOnOpen()},Ye=on(t,"error",Le);if(this._timeout!==!1){const tt=this._timeout,st=this.setTimeoutFn(()=>{pe(),Le(new Error("timeout")),t.close()},tt);this.opts.autoUnref&&st.unref(),this.subs.push(()=>{this.clearTimeoutFn(st)})}return this.subs.push(pe),this.subs.push(Ye),this}connect(u){return this.open(u)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const u=this.engine;this.subs.push(on(u,"ping",this.onping.bind(this)),on(u,"data",this.ondata.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(u){try{this.decoder.add(u)}catch(t){this.onclose("parse error",t)}}ondecoded(u){nextTick(()=>{this.emitReserved("packet",u)},this.setTimeoutFn)}onerror(u){this.emitReserved("error",u)}socket(u,t){let de=this.nsps[u];return de?this._autoConnect&&!de.active&&de.connect():(de=new Socket(this,u,t),this.nsps[u]=de),de}_destroy(u){const t=Object.keys(this.nsps);for(const de of t)if(this.nsps[de].active)return;this._close()}_packet(u){const t=this.encoder.encode(u);for(let de=0;de<t.length;de++)this.engine.write(t[de],u.options)}cleanup(){this.subs.forEach(u=>u()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(u,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",u,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const u=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const de=this.setTimeoutFn(()=>{u.skipReconnect||(this.emitReserved("reconnect_attempt",u.backoff.attempts),!u.skipReconnect&&u.open(pe=>{pe?(u._reconnecting=!1,u.reconnect(),this.emitReserved("reconnect_error",pe)):u.onreconnect()}))},t);this.opts.autoUnref&&de.unref(),this.subs.push(()=>{this.clearTimeoutFn(de)})}}onreconnect(){const u=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",u)}}const cache={};function lookup(me,u){typeof me=="object"&&(u=me,me=void 0),u=u||{};const t=url(me,u.path||"/socket.io"),de=t.source,pe=t.id,Le=t.path,Ye=cache[pe]&&Le in cache[pe].nsps,tt=u.forceNew||u["force new connection"]||u.multiplex===!1||Ye;let st;return tt?st=new Manager(de,u):(cache[pe]||(cache[pe]=new Manager(de,u)),st=cache[pe]),t.query&&!u.query&&(u.query=t.queryKey),st.socket(t.path,u)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});var requiresPort,hasRequiredRequiresPort;function requireRequiresPort(){return hasRequiredRequiresPort||(hasRequiredRequiresPort=1,requiresPort=function(u,t){if(t=t.split(":")[0],u=+u,!u)return!1;switch(t){case"http":case"ws":return u!==80;case"https":case"wss":return u!==443;case"ftp":return u!==21;case"gopher":return u!==70;case"file":return!1}return u!==0}),requiresPort}var querystringify={},hasRequiredQuerystringify;function requireQuerystringify(){if(hasRequiredQuerystringify)return querystringify;hasRequiredQuerystringify=1;var me=Object.prototype.hasOwnProperty,u;function t(Ye){try{return decodeURIComponent(Ye.replace(/\+/g," "))}catch{return null}}function de(Ye){try{return encodeURIComponent(Ye)}catch{return null}}function pe(Ye){for(var tt=/([^=?#&]+)=?([^&]*)/g,st={},ht;ht=tt.exec(Ye);){var mt=t(ht[1]),gt=t(ht[2]);mt===null||gt===null||mt in st||(st[mt]=gt)}return st}function Le(Ye,tt){tt=tt||"";var st=[],ht,mt;typeof tt!="string"&&(tt="?");for(mt in Ye)if(me.call(Ye,mt)){if(ht=Ye[mt],!ht&&(ht===null||ht===u||isNaN(ht))&&(ht=""),mt=de(mt),ht=de(ht),mt===null||ht===null)continue;st.push(mt+"="+ht)}return st.length?tt+st.join("&"):""}return querystringify.stringify=Le,querystringify.parse=pe,querystringify}var urlParse,hasRequiredUrlParse;function requireUrlParse(){if(hasRequiredUrlParse)return urlParse;hasRequiredUrlParse=1;var me=requireRequiresPort(),u=requireQuerystringify(),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,de=/[\n\r\t]/g,pe=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Le=/:\d+$/,Ye=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,tt=/^[a-zA-Z]:/;function st(Pt){return(Pt||"").toString().replace(t,"")}var ht=[["#","hash"],["?","query"],function(Ot,Mt){return bt(Mt.protocol)?Ot.replace(/\\/g,"/"):Ot},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],mt={hash:1,query:1};function gt(Pt){var Ot;typeof window<"u"?Ot=window:typeof commonjsGlobal<"u"?Ot=commonjsGlobal:typeof self<"u"?Ot=self:Ot={};var Mt=Ot.location||{};Pt=Pt||Mt;var Bt={},Dt=typeof Pt,$t;if(Pt.protocol==="blob:")Bt=new Tt(unescape(Pt.pathname),{});else if(Dt==="string"){Bt=new Tt(Pt,{});for($t in mt)delete Bt[$t]}else if(Dt==="object"){for($t in Pt)$t in mt||(Bt[$t]=Pt[$t]);Bt.slashes===void 0&&(Bt.slashes=pe.test(Pt.href))}return Bt}function bt(Pt){return Pt==="file:"||Pt==="ftp:"||Pt==="http:"||Pt==="https:"||Pt==="ws:"||Pt==="wss:"}function _t(Pt,Ot){Pt=st(Pt),Pt=Pt.replace(de,""),Ot=Ot||{};var Mt=Ye.exec(Pt),Bt=Mt[1]?Mt[1].toLowerCase():"",Dt=!!Mt[2],$t=!!Mt[3],kt=0,Et;return Dt?$t?(Et=Mt[2]+Mt[3]+Mt[4],kt=Mt[2].length+Mt[3].length):(Et=Mt[2]+Mt[4],kt=Mt[2].length):$t?(Et=Mt[3]+Mt[4],kt=Mt[3].length):Et=Mt[4],Bt==="file:"?kt>=2&&(Et=Et.slice(2)):bt(Bt)?Et=Mt[4]:Bt?Dt&&(Et=Et.slice(2)):kt>=2&&bt(Ot.protocol)&&(Et=Mt[4]),{protocol:Bt,slashes:Dt||bt(Bt),slashesCount:kt,rest:Et}}function vt(Pt,Ot){if(Pt==="")return Ot;for(var Mt=(Ot||"/").split("/").slice(0,-1).concat(Pt.split("/")),Bt=Mt.length,Dt=Mt[Bt-1],$t=!1,kt=0;Bt--;)Mt[Bt]==="."?Mt.splice(Bt,1):Mt[Bt]===".."?(Mt.splice(Bt,1),kt++):kt&&(Bt===0&&($t=!0),Mt.splice(Bt,1),kt--);return $t&&Mt.unshift(""),(Dt==="."||Dt==="..")&&Mt.push(""),Mt.join("/")}function Tt(Pt,Ot,Mt){if(Pt=st(Pt),Pt=Pt.replace(de,""),!(this instanceof Tt))return new Tt(Pt,Ot,Mt);var Bt,Dt,$t,kt,Et,At,Ft=ht.slice(),zt=typeof Ot,Ut=this,qt=0;for(zt!=="object"&&zt!=="string"&&(Mt=Ot,Ot=null),Mt&&typeof Mt!="function"&&(Mt=u.parse),Ot=gt(Ot),Dt=_t(Pt||"",Ot),Bt=!Dt.protocol&&!Dt.slashes,Ut.slashes=Dt.slashes||Bt&&Ot.slashes,Ut.protocol=Dt.protocol||Ot.protocol||"",Pt=Dt.rest,(Dt.protocol==="file:"&&(Dt.slashesCount!==2||tt.test(Pt))||!Dt.slashes&&(Dt.protocol||Dt.slashesCount<2||!bt(Ut.protocol)))&&(Ft[3]=[/(.*)/,"pathname"]);qt<Ft.length;qt++){if(kt=Ft[qt],typeof kt=="function"){Pt=kt(Pt,Ut);continue}$t=kt[0],At=kt[1],$t!==$t?Ut[At]=Pt:typeof $t=="string"?(Et=$t==="@"?Pt.lastIndexOf($t):Pt.indexOf($t),~Et&&(typeof kt[2]=="number"?(Ut[At]=Pt.slice(0,Et),Pt=Pt.slice(Et+kt[2])):(Ut[At]=Pt.slice(Et),Pt=Pt.slice(0,Et)))):(Et=$t.exec(Pt))&&(Ut[At]=Et[1],Pt=Pt.slice(0,Et.index)),Ut[At]=Ut[At]||Bt&&kt[3]&&Ot[At]||"",kt[4]&&(Ut[At]=Ut[At].toLowerCase())}Mt&&(Ut.query=Mt(Ut.query)),Bt&&Ot.slashes&&Ut.pathname.charAt(0)!=="/"&&(Ut.pathname!==""||Ot.pathname!=="")&&(Ut.pathname=vt(Ut.pathname,Ot.pathname)),Ut.pathname.charAt(0)!=="/"&&bt(Ut.protocol)&&(Ut.pathname="/"+Ut.pathname),me(Ut.port,Ut.protocol)||(Ut.host=Ut.hostname,Ut.port=""),Ut.username=Ut.password="",Ut.auth&&(Et=Ut.auth.indexOf(":"),~Et?(Ut.username=Ut.auth.slice(0,Et),Ut.username=encodeURIComponent(decodeURIComponent(Ut.username)),Ut.password=Ut.auth.slice(Et+1),Ut.password=encodeURIComponent(decodeURIComponent(Ut.password))):Ut.username=encodeURIComponent(decodeURIComponent(Ut.auth)),Ut.auth=Ut.password?Ut.username+":"+Ut.password:Ut.username),Ut.origin=Ut.protocol!=="file:"&&bt(Ut.protocol)&&Ut.host?Ut.protocol+"//"+Ut.host:"null",Ut.href=Ut.toString()}function St(Pt,Ot,Mt){var Bt=this;switch(Pt){case"query":typeof Ot=="string"&&Ot.length&&(Ot=(Mt||u.parse)(Ot)),Bt[Pt]=Ot;break;case"port":Bt[Pt]=Ot,me(Ot,Bt.protocol)?Ot&&(Bt.host=Bt.hostname+":"+Ot):(Bt.host=Bt.hostname,Bt[Pt]="");break;case"hostname":Bt[Pt]=Ot,Bt.port&&(Ot+=":"+Bt.port),Bt.host=Ot;break;case"host":Bt[Pt]=Ot,Le.test(Ot)?(Ot=Ot.split(":"),Bt.port=Ot.pop(),Bt.hostname=Ot.join(":")):(Bt.hostname=Ot,Bt.port="");break;case"protocol":Bt.protocol=Ot.toLowerCase(),Bt.slashes=!Mt;break;case"pathname":case"hash":if(Ot){var Dt=Pt==="pathname"?"/":"#";Bt[Pt]=Ot.charAt(0)!==Dt?Dt+Ot:Ot}else Bt[Pt]=Ot;break;case"username":case"password":Bt[Pt]=encodeURIComponent(Ot);break;case"auth":var $t=Ot.indexOf(":");~$t?(Bt.username=Ot.slice(0,$t),Bt.username=encodeURIComponent(decodeURIComponent(Bt.username)),Bt.password=Ot.slice($t+1),Bt.password=encodeURIComponent(decodeURIComponent(Bt.password))):Bt.username=encodeURIComponent(decodeURIComponent(Ot))}for(var kt=0;kt<ht.length;kt++){var Et=ht[kt];Et[4]&&(Bt[Et[1]]=Bt[Et[1]].toLowerCase())}return Bt.auth=Bt.password?Bt.username+":"+Bt.password:Bt.username,Bt.origin=Bt.protocol!=="file:"&&bt(Bt.protocol)&&Bt.host?Bt.protocol+"//"+Bt.host:"null",Bt.href=Bt.toString(),Bt}function Rt(Pt){(!Pt||typeof Pt!="function")&&(Pt=u.stringify);var Ot,Mt=this,Bt=Mt.host,Dt=Mt.protocol;Dt&&Dt.charAt(Dt.length-1)!==":"&&(Dt+=":");var $t=Dt+(Mt.protocol&&Mt.slashes||bt(Mt.protocol)?"//":"");return Mt.username?($t+=Mt.username,Mt.password&&($t+=":"+Mt.password),$t+="@"):Mt.password?($t+=":"+Mt.password,$t+="@"):Mt.protocol!=="file:"&&bt(Mt.protocol)&&!Bt&&Mt.pathname!=="/"&&($t+="@"),(Bt[Bt.length-1]===":"||Le.test(Mt.hostname)&&!Mt.port)&&(Bt+=":"),$t+=Bt+Mt.pathname,Ot=typeof Mt.query=="object"?Pt(Mt.query):Mt.query,Ot&&($t+=Ot.charAt(0)!=="?"?"?"+Ot:Ot),Mt.hash&&($t+=Mt.hash),$t}return Tt.prototype={set:St,toString:Rt},Tt.extractProtocol=_t,Tt.location=gt,Tt.trimLeft=st,Tt.qs=u,urlParse=Tt,urlParse}requireUrlParse();const Be=["tableCellBorderWidth","tableCellBorderColor","tableCellBorderStyle","tableCellHorizontalAlignment","tableCellVerticalAlignment","tableCellBackgroundColor","tableCellPadding"];Object.fromEntries(Be.map(me=>[me,null]));function App(){const[me,u]=reactExports.useState(""),[t,de]=reactExports.useState(["Protocol_Document_Template.docx","sample.docx"]),[pe,Le]=reactExports.useState(""),[Ye,tt]=reactExports.useState(null),[st,ht]=reactExports.useState({top:0,left:0,visible:!1}),mt=reactExports.useRef(""),[gt,bt]=reactExports.useState(""),[_t,vt]=reactExports.useState(""),[Tt,St]=reactExports.useState(!1),[Rt,Pt]=reactExports.useState(!1);console.log(de);const Ot=(kt,Et)=>{u(Et.getData())},Mt=kt=>{const Et=kt.model.document.selection;if(Et.isCollapsed)ht(At=>({...At,visible:!1})),bt(""),vt(""),Pt(!1);else{const At=kt.data.stringify(kt.model.getSelectedContent(Et));mt.current=At;let Ft=document.createElement("div");Ft.innerHTML=At;let zt=Ft.innerText.trim();bt(zt),vt(""),kt.editing.view.change(Ut=>{if(kt.editing.view.document.selection.getFirstRange()){const Nt=kt.data.stringify(kt.model.getSelectedContent(Et));mt.current=Nt;const jt=window.getSelection();if(jt.rangeCount>0){const Qt=jt.getRangeAt(0).getBoundingClientRect();ht({top:Qt.top+window.scrollY-40,left:Qt.left+window.scrollX,visible:!0})}}})}};reactExports.useEffect(()=>{Ye&&Ye.model.document.selection.on("change",()=>Mt(Ye))},[Ye]),reactExports.useEffect(()=>{if(Ye){const kt=()=>Mt(Ye);return Ye.model.document.selection.on("change",kt),()=>Ye.model.document.selection.off("change",kt)}},[Ye]);const Bt=async kt=>{u("");const Et=kt.target.value;if(Le(Et),Ye)try{const Ft=await fetch(`/CKEditor/${Et}`);if(!Ft.ok)throw new Error(`Failed to fetch file: ${Ft.statusText}`);const zt=await Ft.blob(),Ut=new File([zt],Et,{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});Ye.execute("importWord",Ut)}catch(At){console.error("Error loading file:",At),alert("An error occurred while importing the Word file.")}},Dt=async()=>{St(!0),Pt(!0),ht({top:0,left:0,visible:!1});try{const kt=await axios.post("https://smart-suggest.azurewebsites.net/rag/stream/1/kesimpta",{sentence:gt},{headers:{"Content-Type":"application/x-www-form-urlencoded"}});kt.status===200?(St(!1),vt(kt.data.corrected_sentence)):(console.error("API response error:",kt),alert("Failed to fetch suggestion."))}catch(kt){console.error("Fetch error:",kt),alert("Error fetching suggestion.")}},$t=()=>{if(Ye&&mt.current&&_t){let Et=new DOMParser().parseFromString(Ye.getData(),"text/html"),At=zt=>{zt.nodeType===Node.TEXT_NODE?zt.nodeValue=zt.nodeValue.replace(gt,_t):zt.childNodes.forEach(At)};At(Et.body);let Ft=Et.body.innerHTML;Ye.setData(Ft),u(Ft),ht({visible:!1}),bt(""),vt(""),Pt(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",padding:"1rem"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"75vw",height:"84vh",minHeight:"84vh"},children:[jsxRuntimeExports.jsx(CKEditor,{editor:ClassicEditor,config:{licenseKey:"eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjE3NDQ0MTU5OTksImp0aSI6IjRmZjg0YTQ0LWQzODktNDcxZS05NjMyLTIyNzJhZjhlOWJlMSIsInVzYWdlRW5kcG9pbnQiOiJodHRwczovL3Byb3h5LWV2ZW50LmNrZWRpdG9yLmNvbSIsImRpc3RyaWJ1dGlvbkNoYW5uZWwiOlsiY2xvdWQiLCJkcnVwYWwiLCJzaCJdLCJ3aGl0ZUxhYmVsIjp0cnVlLCJsaWNlbnNlVHlwZSI6InRyaWFsIiwiZmVhdHVyZXMiOlsiKiJdLCJ2YyI6IjQwMTQyMGNkIn0.5dxVePK1-qdrqjzrCJdPVdoBTdWJq2T-QDFUkDlQUxsjliIuPOTAmsiZjKfCK29OPeUf1_b_vqxfWgazgPCFQw",toolbar:["importWord","exportPdf","exportWord","|","undo","redo","|","fontFamily","fontSize","fontColor","formatPainter","|","heading","|","bold","italic","underline","strikethrough","|","alignment","outdent","indent","|","link","insertTable","tableCellProperties","tableProperties","mergeTableCells","tableColumn","tableRow","TableColumnResize","|","mediaEmbed","imageUpload","imageInsert","|","bulletedList","numberedList","todoList","multiLevelList","|","codeBlock","blockQuote","highlight","|","subscript","superscript","horizontalLine","|","removeFormat","findAndReplace","specialCharacters","|","pageBreak","pagination","documentOutline"],plugins:[e$1,i$3,o,n$1,s$2,a,a$1,o$3,s$3,Alignment,Autoformat,BlockQuote,Bold,Code,CodeBlock,Clipboard,Essentials,FindAndReplace,Font,FontColor,FontFamily,FontSize,Heading,Highlight,HorizontalLine,Image,ImageCaption,ImageInsert,ImageResize,ImageStyle,ImageToolbar,ImageUpload,Indent,IndentBlock,Italic,Link,List,ListProperties,MediaEmbed,MediaEmbedToolbar,PageBreak,Paragraph,PasteFromOffice,RemoveFormat,SpecialCharacters,Strikethrough,Subscript,Superscript,Table,TableCellProperties,TableProperties,TableToolbar,TableColumnResize,TextTransformation,TodoList,Underline,Undo,WordCount,Mention,Bookmark,CloudServices],fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif","Comic Sans MS, cursive","Impact, Charcoal, sans-serif","Roboto, sans-serif","Open Sans, sans-serif","Lora, serif","Montserrat, sans-serif","Poppins, sans-serif","Nunito, sans-serif","Raleway, sans-serif","Inter, sans-serif","Fira Sans, sans-serif","DM Sans, sans-serif","Playfair Display, serif","Merriweather, serif","EB Garamond, serif","Crimson Text, serif","Libre Baskerville, serif","Source Sans Pro, sans-serif","Work Sans, sans-serif","Rubik, sans-serif","Manrope, sans-serif","Lexend, sans-serif","Jost, sans-serif","Quicksand, sans-serif","Titillium Web, sans-serif","Ubuntu, sans-serif","Oxygen, sans-serif","Heebo, sans-serif","Assistant, sans-serif","Overpass, sans-serif","Cairo, sans-serif","Tajawal, sans-serif","Barlow, sans-serif","Karla, sans-serif","Signika, sans-serif","Varela Round, sans-serif","Hind, sans-serif","Questrial, sans-serif","Bitter, serif","Alegreya, serif","Cormorant, serif","Spectral, serif","Source Serif Pro, serif","Inknut Antiqua, serif","PT Serif, serif","Neuton, serif","Vollkorn, serif","Domine, serif","Prata, serif","Tinos, serif","Abhaya Libre, serif","Martel, serif","Faustina, serif","Gentium Book Basic, serif","Sorts Mill Goudy, serif"],supportAllValues:!0},fontSize:{options:["10px","12px","14px","16px","18px","20px","24px","28px","32px","36px"],supportAllValues:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableRow"],tableProperties:{style:"display: table;"}},pasteFromOffice:{removeStyles:!1,keepFormatting:!0}},data:me,onChange:Ot,onReady:kt=>tt(kt),onError:kt=>console.error("CKEditor Error:",kt)}),st.visible&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:`${st.top}px`,left:`${st.left}px`,background:"#fff",border:"1px solid #ddd",padding:"5px 10px",boxShadow:"0px 2px 5px rgba(0,0,0,0.2)",borderRadius:"5px",zIndex:1e3,cursor:"pointer",transition:"top 0.2s ease-out, left 0.2s ease-out"},onClick:Dt,children:" Suggestion"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.5rem"},children:[jsxRuntimeExports.jsx("h3",{style:{textAlign:"left",margin:"0",color:"#1565c0"},children:"Select File :"}),jsxRuntimeExports.jsx(FormControl,{style:{minWidth:200,backgroundColor:"white"},children:jsxRuntimeExports.jsxs(Select,{labelId:"file-select-label",value:pe,onChange:Bt,displayEmpty:!0,children:[jsxRuntimeExports.jsx(MenuItem,{value:"",disabled:!0,children:"-- Select a file --"}),t.map((kt,Et)=>jsxRuntimeExports.jsx(MenuItem,{value:kt,children:kt},Et))]})})]}),jsxRuntimeExports.jsxs("div",{children:[me&&jsxRuntimeExports.jsx("h3",{style:{textAlign:"left",margin:"0",color:"#1565c0"},children:"Suggestion(s) :"}),me&&jsxRuntimeExports.jsxs("div",{style:{border:"0.5px solid #cbcbcb",borderRadius:"5px",padding:"0.5rem",marginTop:"0.5rem",backgroundColor:"white"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"0.7rem"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:"bold",margin:"0"},children:"Selected Text :"}),jsxRuntimeExports.jsx("p",{style:{margin:"0"},children:gt||"No text selected"})]}),Rt&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"0.7rem"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:"bold",margin:"0"},children:"Suggestion :"}),jsxRuntimeExports.jsx("p",{style:{margin:"0"},children:Tt?jsxRuntimeExports.jsx(CircularProgress,{size:15}):_t})]}),_t&&jsxRuntimeExports.jsx("button",{style:{backgroundColor:"darkgreen",color:"white",padding:"0.3rem 0.8rem",display:"flex",borderRadius:"0.2rem",cursor:"pointer"},onClick:$t,children:"REPLACE"})]})]})]})]})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default Mp();
