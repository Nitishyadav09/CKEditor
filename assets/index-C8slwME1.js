var Ip=Object.defineProperty;var Pp=(de,u,t)=>u in de?Ip(de,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):de[u]=t;var Op=(de,u)=>()=>(u||de((u={exports:{}}).exports,u),u.exports);var xt=(de,u,t)=>Pp(de,typeof u!="symbol"?u+"":u,t);var Bp=Op((exports,module)=>{function _mergeNamespaces(de,u){for(var t=0;t<u.length;t++){const N=u[t];if(typeof N!="string"&&!Array.isArray(N)){for(const me in N)if(me!=="default"&&!(me in de)){const pe=Object.getOwnPropertyDescriptor(N,me);pe&&Object.defineProperty(de,me,pe.get?pe:{enumerable:!0,get:()=>N[me]})}}}return Object.freeze(Object.defineProperty(de,Symbol.toStringTag,{value:"Module"}))}(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const me of document.querySelectorAll('link[rel="modulepreload"]'))N(me);new MutationObserver(me=>{for(const pe of me)if(pe.type==="childList")for(const Le of pe.addedNodes)Le.tagName==="LINK"&&Le.rel==="modulepreload"&&N(Le)}).observe(document,{childList:!0,subtree:!0});function t(me){const pe={};return me.integrity&&(pe.integrity=me.integrity),me.referrerPolicy&&(pe.referrerPolicy=me.referrerPolicy),me.crossOrigin==="use-credentials"?pe.credentials="include":me.crossOrigin==="anonymous"?pe.credentials="omit":pe.credentials="same-origin",pe}function N(me){if(me.ep)return;me.ep=!0;const pe=t(me);fetch(me.href,pe)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(de){return de&&de.__esModule&&Object.prototype.hasOwnProperty.call(de,"default")?de.default:de}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var de=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function t(N,me,pe){var Le=null;if(pe!==void 0&&(Le=""+pe),me.key!==void 0&&(Le=""+me.key),"key"in me){pe={};for(var Ye in me)Ye!=="key"&&(pe[Ye]=me[Ye])}else pe=me;return me=pe.ref,{$$typeof:de,type:N,key:Le,ref:me!==void 0?me:null,props:pe}}return reactJsxRuntime_production.Fragment=u,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var de=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),Le=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),ot=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),mt=Symbol.iterator;function bt(Vt){return Vt===null||typeof Vt!="object"?null:(Vt=mt&&Vt[mt]||Vt["@@iterator"],typeof Vt=="function"?Vt:null)}var yt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_t=Object.assign,Ct={};function Tt(Vt,Jt,ln){this.props=Vt,this.context=Jt,this.refs=Ct,this.updater=ln||yt}Tt.prototype.isReactComponent={},Tt.prototype.setState=function(Vt,Jt){if(typeof Vt!="object"&&typeof Vt!="function"&&Vt!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Vt,Jt,"setState")},Tt.prototype.forceUpdate=function(Vt){this.updater.enqueueForceUpdate(this,Vt,"forceUpdate")};function At(){}At.prototype=Tt.prototype;function It(Vt,Jt,ln){this.props=Vt,this.context=Jt,this.refs=Ct,this.updater=ln||yt}var Pt=It.prototype=new At;Pt.constructor=It,_t(Pt,Tt.prototype),Pt.isPureReactComponent=!0;var Bt=Array.isArray,Ot={H:null,A:null,T:null,S:null,V:null},Nt=Object.prototype.hasOwnProperty;function Lt(Vt,Jt,ln,tn,an,cn){return ln=cn.ref,{$$typeof:de,type:Vt,key:Jt,ref:ln!==void 0?ln:null,props:cn}}function Et(Vt,Jt){return Lt(Vt.type,Jt,void 0,void 0,void 0,Vt.props)}function kt(Vt){return typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===de}function St(Vt){var Jt={"=":"=0",":":"=2"};return"$"+Vt.replace(/[=:]/g,function(ln){return Jt[ln]})}var $t=/\/+/g;function zt(Vt,Jt){return typeof Vt=="object"&&Vt!==null&&Vt.key!=null?St(""+Vt.key):Jt.toString(36)}function Ut(){}function qt(Vt){switch(Vt.status){case"fulfilled":return Vt.value;case"rejected":throw Vt.reason;default:switch(typeof Vt.status=="string"?Vt.then(Ut,Ut):(Vt.status="pending",Vt.then(function(Jt){Vt.status==="pending"&&(Vt.status="fulfilled",Vt.value=Jt)},function(Jt){Vt.status==="pending"&&(Vt.status="rejected",Vt.reason=Jt)})),Vt.status){case"fulfilled":return Vt.value;case"rejected":throw Vt.reason}}throw Vt}function Zt(Vt,Jt,ln,tn,an){var cn=typeof Vt;(cn==="undefined"||cn==="boolean")&&(Vt=null);var un=!1;if(Vt===null)un=!0;else switch(cn){case"bigint":case"string":case"number":un=!0;break;case"object":switch(Vt.$$typeof){case de:case u:un=!0;break;case ft:return un=Vt._init,Zt(un(Vt._payload),Jt,ln,tn,an)}}if(un)return an=an(Vt),un=tn===""?"."+zt(Vt,0):tn,Bt(an)?(ln="",un!=null&&(ln=un.replace($t,"$&/")+"/"),Zt(an,Jt,ln,"",function(Rn){return Rn})):an!=null&&(kt(an)&&(an=Et(an,ln+(an.key==null||Vt&&Vt.key===an.key?"":(""+an.key).replace($t,"$&/")+"/")+un)),Jt.push(an)),1;un=0;var An=tn===""?".":tn+":";if(Bt(Vt))for(var yn=0;yn<Vt.length;yn++)tn=Vt[yn],cn=An+zt(tn,yn),un+=Zt(tn,Jt,ln,cn,an);else if(yn=bt(Vt),typeof yn=="function")for(Vt=yn.call(Vt),yn=0;!(tn=Vt.next()).done;)tn=tn.value,cn=An+zt(tn,yn++),un+=Zt(tn,Jt,ln,cn,an);else if(cn==="object"){if(typeof Vt.then=="function")return Zt(qt(Vt),Jt,ln,tn,an);throw Jt=String(Vt),Error("Objects are not valid as a React child (found: "+(Jt==="[object Object]"?"object with keys {"+Object.keys(Vt).join(", ")+"}":Jt)+"). If you meant to render a collection of children, use an array instead.")}return un}function Dt(Vt,Jt,ln){if(Vt==null)return Vt;var tn=[],an=0;return Zt(Vt,tn,"","",function(cn){return Jt.call(ln,cn,an++)}),tn}function jt(Vt){if(Vt._status===-1){var Jt=Vt._result;Jt=Jt(),Jt.then(function(ln){(Vt._status===0||Vt._status===-1)&&(Vt._status=1,Vt._result=ln)},function(ln){(Vt._status===0||Vt._status===-1)&&(Vt._status=2,Vt._result=ln)}),Vt._status===-1&&(Vt._status=0,Vt._result=Jt)}if(Vt._status===1)return Vt._result.default;throw Vt._result}var en=typeof reportError=="function"?reportError:function(Vt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Jt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Vt=="object"&&Vt!==null&&typeof Vt.message=="string"?String(Vt.message):String(Vt),error:Vt});if(!window.dispatchEvent(Jt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Vt);return}console.error(Vt)};function Kt(){}return react_production.Children={map:Dt,forEach:function(Vt,Jt,ln){Dt(Vt,function(){Jt.apply(this,arguments)},ln)},count:function(Vt){var Jt=0;return Dt(Vt,function(){Jt++}),Jt},toArray:function(Vt){return Dt(Vt,function(Jt){return Jt})||[]},only:function(Vt){if(!kt(Vt))throw Error("React.Children.only expected to receive a single React element child.");return Vt}},react_production.Component=Tt,react_production.Fragment=t,react_production.Profiler=me,react_production.PureComponent=It,react_production.StrictMode=N,react_production.Suspense=nt,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ot,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Vt){return Ot.H.useMemoCache(Vt)}},react_production.cache=function(Vt){return function(){return Vt.apply(null,arguments)}},react_production.cloneElement=function(Vt,Jt,ln){if(Vt==null)throw Error("The argument must be a React element, but you passed "+Vt+".");var tn=_t({},Vt.props),an=Vt.key,cn=void 0;if(Jt!=null)for(un in Jt.ref!==void 0&&(cn=void 0),Jt.key!==void 0&&(an=""+Jt.key),Jt)!Nt.call(Jt,un)||un==="key"||un==="__self"||un==="__source"||un==="ref"&&Jt.ref===void 0||(tn[un]=Jt[un]);var un=arguments.length-2;if(un===1)tn.children=ln;else if(1<un){for(var An=Array(un),yn=0;yn<un;yn++)An[yn]=arguments[yn+2];tn.children=An}return Lt(Vt.type,an,void 0,void 0,cn,tn)},react_production.createContext=function(Vt){return Vt={$$typeof:Le,_currentValue:Vt,_currentValue2:Vt,_threadCount:0,Provider:null,Consumer:null},Vt.Provider=Vt,Vt.Consumer={$$typeof:pe,_context:Vt},Vt},react_production.createElement=function(Vt,Jt,ln){var tn,an={},cn=null;if(Jt!=null)for(tn in Jt.key!==void 0&&(cn=""+Jt.key),Jt)Nt.call(Jt,tn)&&tn!=="key"&&tn!=="__self"&&tn!=="__source"&&(an[tn]=Jt[tn]);var un=arguments.length-2;if(un===1)an.children=ln;else if(1<un){for(var An=Array(un),yn=0;yn<un;yn++)An[yn]=arguments[yn+2];an.children=An}if(Vt&&Vt.defaultProps)for(tn in un=Vt.defaultProps,un)an[tn]===void 0&&(an[tn]=un[tn]);return Lt(Vt,cn,void 0,void 0,null,an)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Vt){return{$$typeof:Ye,render:Vt}},react_production.isValidElement=kt,react_production.lazy=function(Vt){return{$$typeof:ft,_payload:{_status:-1,_result:Vt},_init:jt}},react_production.memo=function(Vt,Jt){return{$$typeof:ot,type:Vt,compare:Jt===void 0?null:Jt}},react_production.startTransition=function(Vt){var Jt=Ot.T,ln={};Ot.T=ln;try{var tn=Vt(),an=Ot.S;an!==null&&an(ln,tn),typeof tn=="object"&&tn!==null&&typeof tn.then=="function"&&tn.then(Kt,en)}catch(cn){en(cn)}finally{Ot.T=Jt}},react_production.unstable_useCacheRefresh=function(){return Ot.H.useCacheRefresh()},react_production.use=function(Vt){return Ot.H.use(Vt)},react_production.useActionState=function(Vt,Jt,ln){return Ot.H.useActionState(Vt,Jt,ln)},react_production.useCallback=function(Vt,Jt){return Ot.H.useCallback(Vt,Jt)},react_production.useContext=function(Vt){return Ot.H.useContext(Vt)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Vt,Jt){return Ot.H.useDeferredValue(Vt,Jt)},react_production.useEffect=function(Vt,Jt,ln){var tn=Ot.H;if(typeof ln=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tn.useEffect(Vt,Jt)},react_production.useId=function(){return Ot.H.useId()},react_production.useImperativeHandle=function(Vt,Jt,ln){return Ot.H.useImperativeHandle(Vt,Jt,ln)},react_production.useInsertionEffect=function(Vt,Jt){return Ot.H.useInsertionEffect(Vt,Jt)},react_production.useLayoutEffect=function(Vt,Jt){return Ot.H.useLayoutEffect(Vt,Jt)},react_production.useMemo=function(Vt,Jt){return Ot.H.useMemo(Vt,Jt)},react_production.useOptimistic=function(Vt,Jt){return Ot.H.useOptimistic(Vt,Jt)},react_production.useReducer=function(Vt,Jt,ln){return Ot.H.useReducer(Vt,Jt,ln)},react_production.useRef=function(Vt){return Ot.H.useRef(Vt)},react_production.useState=function(Vt){return Ot.H.useState(Vt)},react_production.useSyncExternalStore=function(Vt,Jt,ln){return Ot.H.useSyncExternalStore(Vt,Jt,ln)},react_production.useTransition=function(){return Ot.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(de){function u(Dt,jt){var en=Dt.length;Dt.push(jt);e:for(;0<en;){var Kt=en-1>>>1,Vt=Dt[Kt];if(0<me(Vt,jt))Dt[Kt]=jt,Dt[en]=Vt,en=Kt;else break e}}function t(Dt){return Dt.length===0?null:Dt[0]}function N(Dt){if(Dt.length===0)return null;var jt=Dt[0],en=Dt.pop();if(en!==jt){Dt[0]=en;e:for(var Kt=0,Vt=Dt.length,Jt=Vt>>>1;Kt<Jt;){var ln=2*(Kt+1)-1,tn=Dt[ln],an=ln+1,cn=Dt[an];if(0>me(tn,en))an<Vt&&0>me(cn,tn)?(Dt[Kt]=cn,Dt[an]=en,Kt=an):(Dt[Kt]=tn,Dt[ln]=en,Kt=ln);else if(an<Vt&&0>me(cn,en))Dt[Kt]=cn,Dt[an]=en,Kt=an;else break e}}return jt}function me(Dt,jt){var en=Dt.sortIndex-jt.sortIndex;return en!==0?en:Dt.id-jt.id}if(de.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var pe=performance;de.unstable_now=function(){return pe.now()}}else{var Le=Date,Ye=Le.now();de.unstable_now=function(){return Le.now()-Ye}}var nt=[],ot=[],ft=1,mt=null,bt=3,yt=!1,_t=!1,Ct=!1,Tt=!1,At=typeof setTimeout=="function"?setTimeout:null,It=typeof clearTimeout=="function"?clearTimeout:null,Pt=typeof setImmediate<"u"?setImmediate:null;function Bt(Dt){for(var jt=t(ot);jt!==null;){if(jt.callback===null)N(ot);else if(jt.startTime<=Dt)N(ot),jt.sortIndex=jt.expirationTime,u(nt,jt);else break;jt=t(ot)}}function Ot(Dt){if(Ct=!1,Bt(Dt),!_t)if(t(nt)!==null)_t=!0,Nt||(Nt=!0,zt());else{var jt=t(ot);jt!==null&&Zt(Ot,jt.startTime-Dt)}}var Nt=!1,Lt=-1,Et=5,kt=-1;function St(){return Tt?!0:!(de.unstable_now()-kt<Et)}function $t(){if(Tt=!1,Nt){var Dt=de.unstable_now();kt=Dt;var jt=!0;try{e:{_t=!1,Ct&&(Ct=!1,It(Lt),Lt=-1),yt=!0;var en=bt;try{t:{for(Bt(Dt),mt=t(nt);mt!==null&&!(mt.expirationTime>Dt&&St());){var Kt=mt.callback;if(typeof Kt=="function"){mt.callback=null,bt=mt.priorityLevel;var Vt=Kt(mt.expirationTime<=Dt);if(Dt=de.unstable_now(),typeof Vt=="function"){mt.callback=Vt,Bt(Dt),jt=!0;break t}mt===t(nt)&&N(nt),Bt(Dt)}else N(nt);mt=t(nt)}if(mt!==null)jt=!0;else{var Jt=t(ot);Jt!==null&&Zt(Ot,Jt.startTime-Dt),jt=!1}}break e}finally{mt=null,bt=en,yt=!1}jt=void 0}}finally{jt?zt():Nt=!1}}}var zt;if(typeof Pt=="function")zt=function(){Pt($t)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,qt=Ut.port2;Ut.port1.onmessage=$t,zt=function(){qt.postMessage(null)}}else zt=function(){At($t,0)};function Zt(Dt,jt){Lt=At(function(){Dt(de.unstable_now())},jt)}de.unstable_IdlePriority=5,de.unstable_ImmediatePriority=1,de.unstable_LowPriority=4,de.unstable_NormalPriority=3,de.unstable_Profiling=null,de.unstable_UserBlockingPriority=2,de.unstable_cancelCallback=function(Dt){Dt.callback=null},de.unstable_forceFrameRate=function(Dt){0>Dt||125<Dt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<Dt?Math.floor(1e3/Dt):5},de.unstable_getCurrentPriorityLevel=function(){return bt},de.unstable_next=function(Dt){switch(bt){case 1:case 2:case 3:var jt=3;break;default:jt=bt}var en=bt;bt=jt;try{return Dt()}finally{bt=en}},de.unstable_requestPaint=function(){Tt=!0},de.unstable_runWithPriority=function(Dt,jt){switch(Dt){case 1:case 2:case 3:case 4:case 5:break;default:Dt=3}var en=bt;bt=Dt;try{return jt()}finally{bt=en}},de.unstable_scheduleCallback=function(Dt,jt,en){var Kt=de.unstable_now();switch(typeof en=="object"&&en!==null?(en=en.delay,en=typeof en=="number"&&0<en?Kt+en:Kt):en=Kt,Dt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=en+Vt,Dt={id:ft++,callback:jt,priorityLevel:Dt,startTime:en,expirationTime:Vt,sortIndex:-1},en>Kt?(Dt.sortIndex=en,u(ot,Dt),t(nt)===null&&Dt===t(ot)&&(Ct?(It(Lt),Lt=-1):Ct=!0,Zt(Ot,en-Kt))):(Dt.sortIndex=Vt,u(nt,Dt),_t||yt||(_t=!0,Nt||(Nt=!0,zt()))),Dt},de.unstable_shouldYield=St,de.unstable_wrapCallback=function(Dt){var jt=bt;return function(){var en=bt;bt=jt;try{return Dt.apply(this,arguments)}finally{bt=en}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var de=requireReact();function u(nt){var ot="https://react.dev/errors/"+nt;if(1<arguments.length){ot+="?args[]="+encodeURIComponent(arguments[1]);for(var ft=2;ft<arguments.length;ft++)ot+="&args[]="+encodeURIComponent(arguments[ft])}return"Minified React error #"+nt+"; visit "+ot+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var N={d:{f:t,r:function(){throw Error(u(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},me=Symbol.for("react.portal");function pe(nt,ot,ft){var mt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:mt==null?null:""+mt,children:nt,containerInfo:ot,implementation:ft}}var Le=de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ye(nt,ot){if(nt==="font")return"";if(typeof ot=="string")return ot==="use-credentials"?ot:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,reactDom_production.createPortal=function(nt,ot){var ft=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ot||ot.nodeType!==1&&ot.nodeType!==9&&ot.nodeType!==11)throw Error(u(299));return pe(nt,ot,null,ft)},reactDom_production.flushSync=function(nt){var ot=Le.T,ft=N.p;try{if(Le.T=null,N.p=2,nt)return nt()}finally{Le.T=ot,N.p=ft,N.d.f()}},reactDom_production.preconnect=function(nt,ot){typeof nt=="string"&&(ot?(ot=ot.crossOrigin,ot=typeof ot=="string"?ot==="use-credentials"?ot:"":void 0):ot=null,N.d.C(nt,ot))},reactDom_production.prefetchDNS=function(nt){typeof nt=="string"&&N.d.D(nt)},reactDom_production.preinit=function(nt,ot){if(typeof nt=="string"&&ot&&typeof ot.as=="string"){var ft=ot.as,mt=Ye(ft,ot.crossOrigin),bt=typeof ot.integrity=="string"?ot.integrity:void 0,yt=typeof ot.fetchPriority=="string"?ot.fetchPriority:void 0;ft==="style"?N.d.S(nt,typeof ot.precedence=="string"?ot.precedence:void 0,{crossOrigin:mt,integrity:bt,fetchPriority:yt}):ft==="script"&&N.d.X(nt,{crossOrigin:mt,integrity:bt,fetchPriority:yt,nonce:typeof ot.nonce=="string"?ot.nonce:void 0})}},reactDom_production.preinitModule=function(nt,ot){if(typeof nt=="string")if(typeof ot=="object"&&ot!==null){if(ot.as==null||ot.as==="script"){var ft=Ye(ot.as,ot.crossOrigin);N.d.M(nt,{crossOrigin:ft,integrity:typeof ot.integrity=="string"?ot.integrity:void 0,nonce:typeof ot.nonce=="string"?ot.nonce:void 0})}}else ot==null&&N.d.M(nt)},reactDom_production.preload=function(nt,ot){if(typeof nt=="string"&&typeof ot=="object"&&ot!==null&&typeof ot.as=="string"){var ft=ot.as,mt=Ye(ft,ot.crossOrigin);N.d.L(nt,ft,{crossOrigin:mt,integrity:typeof ot.integrity=="string"?ot.integrity:void 0,nonce:typeof ot.nonce=="string"?ot.nonce:void 0,type:typeof ot.type=="string"?ot.type:void 0,fetchPriority:typeof ot.fetchPriority=="string"?ot.fetchPriority:void 0,referrerPolicy:typeof ot.referrerPolicy=="string"?ot.referrerPolicy:void 0,imageSrcSet:typeof ot.imageSrcSet=="string"?ot.imageSrcSet:void 0,imageSizes:typeof ot.imageSizes=="string"?ot.imageSizes:void 0,media:typeof ot.media=="string"?ot.media:void 0})}},reactDom_production.preloadModule=function(nt,ot){if(typeof nt=="string")if(ot){var ft=Ye(ot.as,ot.crossOrigin);N.d.m(nt,{as:typeof ot.as=="string"&&ot.as!=="script"?ot.as:void 0,crossOrigin:ft,integrity:typeof ot.integrity=="string"?ot.integrity:void 0})}else N.d.m(nt)},reactDom_production.requestFormReset=function(nt){N.d.r(nt)},reactDom_production.unstable_batchedUpdates=function(nt,ot){return nt(ot)},reactDom_production.useFormState=function(nt,ot,ft){return Le.H.useFormState(nt,ot,ft)},reactDom_production.useFormStatus=function(){return Le.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function de(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(de)}catch(u){console.error(u)}}return de(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var de=requireScheduler(),u=requireReact(),t=requireReactDom();function N(tt){var st="https://react.dev/errors/"+tt;if(1<arguments.length){st+="?args[]="+encodeURIComponent(arguments[1]);for(var ht=2;ht<arguments.length;ht++)st+="&args[]="+encodeURIComponent(arguments[ht])}return"Minified React error #"+tt+"; visit "+st+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function me(tt){return!(!tt||tt.nodeType!==1&&tt.nodeType!==9&&tt.nodeType!==11)}function pe(tt){var st=tt,ht=tt;if(tt.alternate)for(;st.return;)st=st.return;else{tt=st;do st=tt,(st.flags&4098)!==0&&(ht=st.return),tt=st.return;while(tt)}return st.tag===3?ht:null}function Le(tt){if(tt.tag===13){var st=tt.memoizedState;if(st===null&&(tt=tt.alternate,tt!==null&&(st=tt.memoizedState)),st!==null)return st.dehydrated}return null}function Ye(tt){if(pe(tt)!==tt)throw Error(N(188))}function nt(tt){var st=tt.alternate;if(!st){if(st=pe(tt),st===null)throw Error(N(188));return st!==tt?null:tt}for(var ht=tt,gt=st;;){var wt=ht.return;if(wt===null)break;var vt=wt.alternate;if(vt===null){if(gt=wt.return,gt!==null){ht=gt;continue}break}if(wt.child===vt.child){for(vt=wt.child;vt;){if(vt===ht)return Ye(wt),tt;if(vt===gt)return Ye(wt),st;vt=vt.sibling}throw Error(N(188))}if(ht.return!==gt.return)ht=wt,gt=vt;else{for(var Rt=!1,Mt=wt.child;Mt;){if(Mt===ht){Rt=!0,ht=wt,gt=vt;break}if(Mt===gt){Rt=!0,gt=wt,ht=vt;break}Mt=Mt.sibling}if(!Rt){for(Mt=vt.child;Mt;){if(Mt===ht){Rt=!0,ht=vt,gt=wt;break}if(Mt===gt){Rt=!0,gt=vt,ht=wt;break}Mt=Mt.sibling}if(!Rt)throw Error(N(189))}}if(ht.alternate!==gt)throw Error(N(190))}if(ht.tag!==3)throw Error(N(188));return ht.stateNode.current===ht?tt:st}function ot(tt){var st=tt.tag;if(st===5||st===26||st===27||st===6)return tt;for(tt=tt.child;tt!==null;){if(st=ot(tt),st!==null)return st;tt=tt.sibling}return null}var ft=Object.assign,mt=Symbol.for("react.element"),bt=Symbol.for("react.transitional.element"),yt=Symbol.for("react.portal"),_t=Symbol.for("react.fragment"),Ct=Symbol.for("react.strict_mode"),Tt=Symbol.for("react.profiler"),At=Symbol.for("react.provider"),It=Symbol.for("react.consumer"),Pt=Symbol.for("react.context"),Bt=Symbol.for("react.forward_ref"),Ot=Symbol.for("react.suspense"),Nt=Symbol.for("react.suspense_list"),Lt=Symbol.for("react.memo"),Et=Symbol.for("react.lazy"),kt=Symbol.for("react.activity"),St=Symbol.for("react.memo_cache_sentinel"),$t=Symbol.iterator;function zt(tt){return tt===null||typeof tt!="object"?null:(tt=$t&&tt[$t]||tt["@@iterator"],typeof tt=="function"?tt:null)}var Ut=Symbol.for("react.client.reference");function qt(tt){if(tt==null)return null;if(typeof tt=="function")return tt.$$typeof===Ut?null:tt.displayName||tt.name||null;if(typeof tt=="string")return tt;switch(tt){case _t:return"Fragment";case Tt:return"Profiler";case Ct:return"StrictMode";case Ot:return"Suspense";case Nt:return"SuspenseList";case kt:return"Activity"}if(typeof tt=="object")switch(tt.$$typeof){case yt:return"Portal";case Pt:return(tt.displayName||"Context")+".Provider";case It:return(tt._context.displayName||"Context")+".Consumer";case Bt:var st=tt.render;return tt=tt.displayName,tt||(tt=st.displayName||st.name||"",tt=tt!==""?"ForwardRef("+tt+")":"ForwardRef"),tt;case Lt:return st=tt.displayName||null,st!==null?st:qt(tt.type)||"Memo";case Et:st=tt._payload,tt=tt._init;try{return qt(tt(st))}catch{}}return null}var Zt=Array.isArray,Dt=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jt=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,en={pending:!1,data:null,method:null,action:null},Kt=[],Vt=-1;function Jt(tt){return{current:tt}}function ln(tt){0>Vt||(tt.current=Kt[Vt],Kt[Vt]=null,Vt--)}function tn(tt,st){Vt++,Kt[Vt]=tt.current,tt.current=st}var an=Jt(null),cn=Jt(null),un=Jt(null),An=Jt(null);function yn(tt,st){switch(tn(un,st),tn(cn,tt),tn(an,null),st.nodeType){case 9:case 11:tt=(tt=st.documentElement)&&(tt=tt.namespaceURI)?$f(tt):0;break;default:if(tt=st.tagName,st=st.namespaceURI)st=$f(st),tt=Uf(st,tt);else switch(tt){case"svg":tt=1;break;case"math":tt=2;break;default:tt=0}}ln(an),tn(an,tt)}function Rn(){ln(an),ln(cn),ln(un)}function wn(tt){tt.memoizedState!==null&&tn(An,tt);var st=an.current,ht=Uf(st,tt.type);st!==ht&&(tn(cn,tt),tn(an,ht))}function _n(tt){cn.current===tt&&(ln(an),ln(cn)),An.current===tt&&(ln(An),Wo._currentValue=en)}var xn=Object.prototype.hasOwnProperty,Qn=de.unstable_scheduleCallback,kn=de.unstable_cancelCallback,zn=de.unstable_shouldYield,Ti=de.unstable_requestPaint,Hn=de.unstable_now,ri=de.unstable_getCurrentPriorityLevel,Wi=de.unstable_ImmediatePriority,mi=de.unstable_UserBlockingPriority,Kn=de.unstable_NormalPriority,gn=de.unstable_LowPriority,ns=de.unstable_IdlePriority,gi=de.log,ys=de.unstable_setDisableYieldValue,ji=null,ni=null;function xi(tt){if(typeof gi=="function"&&ys(tt),ni&&typeof ni.setStrictMode=="function")try{ni.setStrictMode(ji,tt)}catch{}}var Jn=Math.clz32?Math.clz32:_s,is=Math.log,$n=Math.LN2;function _s(tt){return tt>>>=0,tt===0?32:31-(is(tt)/$n|0)|0}var Yi=256,Ks=4194304;function fn(tt){var st=tt&42;if(st!==0)return st;switch(tt&-tt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tt&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return tt&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return tt}}function On(tt,st,ht){var gt=tt.pendingLanes;if(gt===0)return 0;var wt=0,vt=tt.suspendedLanes,Rt=tt.pingedLanes;tt=tt.warmLanes;var Mt=gt&134217727;return Mt!==0?(gt=Mt&~vt,gt!==0?wt=fn(gt):(Rt&=Mt,Rt!==0?wt=fn(Rt):ht||(ht=Mt&~tt,ht!==0&&(wt=fn(ht))))):(Mt=gt&~vt,Mt!==0?wt=fn(Mt):Rt!==0?wt=fn(Rt):ht||(ht=gt&~tt,ht!==0&&(wt=fn(ht)))),wt===0?0:st!==0&&st!==wt&&(st&vt)===0&&(vt=wt&-wt,ht=st&-st,vt>=ht||vt===32&&(ht&4194048)!==0)?st:wt}function jn(tt,st){return(tt.pendingLanes&~(tt.suspendedLanes&~tt.pingedLanes)&st)===0}function vs(tt,st){switch(tt){case 1:case 2:case 4:case 8:case 64:return st+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return st+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(){var tt=Yi;return Yi<<=1,(Yi&4194048)===0&&(Yi=256),tt}function Cu(){var tt=Ks;return Ks<<=1,(Ks&62914560)===0&&(Ks=4194304),tt}function dl(tt){for(var st=[],ht=0;31>ht;ht++)st.push(tt);return st}function Jr(tt,st){tt.pendingLanes|=st,st!==268435456&&(tt.suspendedLanes=0,tt.pingedLanes=0,tt.warmLanes=0)}function xm(tt,st,ht,gt,wt,vt){var Rt=tt.pendingLanes;tt.pendingLanes=ht,tt.suspendedLanes=0,tt.pingedLanes=0,tt.warmLanes=0,tt.expiredLanes&=ht,tt.entangledLanes&=ht,tt.errorRecoveryDisabledLanes&=ht,tt.shellSuspendCounter=0;var Mt=tt.entanglements,Ft=tt.expirationTimes,Yt=tt.hiddenUpdates;for(ht=Rt&~ht;0<ht;){var nn=31-Jn(ht),rn=1<<nn;Mt[nn]=0,Ft[nn]=-1;var Xt=Yt[nn];if(Xt!==null)for(Yt[nn]=null,nn=0;nn<Xt.length;nn++){var Qt=Xt[nn];Qt!==null&&(Qt.lane&=-536870913)}ht&=~rn}gt!==0&&Eu(tt,gt,0),vt!==0&&wt===0&&tt.tag!==0&&(tt.suspendedLanes|=vt&~(Rt&~st))}function Eu(tt,st,ht){tt.pendingLanes|=st,tt.suspendedLanes&=~st;var gt=31-Jn(st);tt.entangledLanes|=st,tt.entanglements[gt]=tt.entanglements[gt]|1073741824|ht&4194090}function Tu(tt,st){var ht=tt.entangledLanes|=st;for(tt=tt.entanglements;ht;){var gt=31-Jn(ht),wt=1<<gt;wt&st|tt[gt]&st&&(tt[gt]|=st),ht&=~wt}}function hl(tt){switch(tt){case 2:tt=1;break;case 8:tt=4;break;case 32:tt=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:tt=128;break;case 268435456:tt=134217728;break;default:tt=0}return tt}function fl(tt){return tt&=-tt,2<tt?8<tt?(tt&134217727)!==0?32:268435456:8:2}function ku(){var tt=jt.p;return tt!==0?tt:(tt=window.event,tt===void 0?32:om(tt.type))}function wm(tt,st){var ht=jt.p;try{return jt.p=tt,st()}finally{jt.p=ht}}var Cs=Math.random().toString(36).slice(2),pi="__reactFiber$"+Cs,yi="__reactProps$"+Cs,dr="__reactContainer$"+Cs,ml="__reactEvents$"+Cs,ym="__reactListeners$"+Cs,_m="__reactHandles$"+Cs,Su="__reactResources$"+Cs,eo="__reactMarker$"+Cs;function gl(tt){delete tt[pi],delete tt[yi],delete tt[ml],delete tt[ym],delete tt[_m]}function hr(tt){var st=tt[pi];if(st)return st;for(var ht=tt.parentNode;ht;){if(st=ht[dr]||ht[pi]){if(ht=st.alternate,st.child!==null||ht!==null&&ht.child!==null)for(tt=jf(tt);tt!==null;){if(ht=tt[pi])return ht;tt=jf(tt)}return st}tt=ht,ht=tt.parentNode}return null}function fr(tt){if(tt=tt[pi]||tt[dr]){var st=tt.tag;if(st===5||st===6||st===13||st===26||st===27||st===3)return tt}return null}function to(tt){var st=tt.tag;if(st===5||st===26||st===27||st===6)return tt.stateNode;throw Error(N(33))}function mr(tt){var st=tt[Su];return st||(st=tt[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),st}function oi(tt){tt[eo]=!0}var Au=new Set,Ru={};function Gs(tt,st){gr(tt,st),gr(tt+"Capture",st)}function gr(tt,st){for(Ru[tt]=st,tt=0;tt<st.length;tt++)Au.add(st[tt])}var vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Iu={},Pu={};function Cm(tt){return xn.call(Pu,tt)?!0:xn.call(Iu,tt)?!1:vm.test(tt)?Pu[tt]=!0:(Iu[tt]=!0,!1)}function Yo(tt,st,ht){if(Cm(st))if(ht===null)tt.removeAttribute(st);else{switch(typeof ht){case"undefined":case"function":case"symbol":tt.removeAttribute(st);return;case"boolean":var gt=st.toLowerCase().slice(0,5);if(gt!=="data-"&&gt!=="aria-"){tt.removeAttribute(st);return}}tt.setAttribute(st,""+ht)}}function Xo(tt,st,ht){if(ht===null)tt.removeAttribute(st);else{switch(typeof ht){case"undefined":case"function":case"symbol":case"boolean":tt.removeAttribute(st);return}tt.setAttribute(st,""+ht)}}function ss(tt,st,ht,gt){if(gt===null)tt.removeAttribute(ht);else{switch(typeof gt){case"undefined":case"function":case"symbol":case"boolean":tt.removeAttribute(ht);return}tt.setAttributeNS(st,ht,""+gt)}}var pl,Ou;function pr(tt){if(pl===void 0)try{throw Error()}catch(ht){var st=ht.stack.trim().match(/\n( *(at )?)/);pl=st&&st[1]||"",Ou=-1<ht.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ht.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pl+tt+Ou}var bl=!1;function xl(tt,st){if(!tt||bl)return"";bl=!0;var ht=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var gt={DetermineComponentFrameRoot:function(){try{if(st){var rn=function(){throw Error()};if(Object.defineProperty(rn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rn,[])}catch(Qt){var Xt=Qt}Reflect.construct(tt,[],rn)}else{try{rn.call()}catch(Qt){Xt=Qt}tt.call(rn.prototype)}}else{try{throw Error()}catch(Qt){Xt=Qt}(rn=tt())&&typeof rn.catch=="function"&&rn.catch(function(){})}}catch(Qt){if(Qt&&Xt&&typeof Qt.stack=="string")return[Qt.stack,Xt.stack]}return[null,null]}};gt.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var wt=Object.getOwnPropertyDescriptor(gt.DetermineComponentFrameRoot,"name");wt&&wt.configurable&&Object.defineProperty(gt.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var vt=gt.DetermineComponentFrameRoot(),Rt=vt[0],Mt=vt[1];if(Rt&&Mt){var Ft=Rt.split(`
`),Yt=Mt.split(`
`);for(wt=gt=0;gt<Ft.length&&!Ft[gt].includes("DetermineComponentFrameRoot");)gt++;for(;wt<Yt.length&&!Yt[wt].includes("DetermineComponentFrameRoot");)wt++;if(gt===Ft.length||wt===Yt.length)for(gt=Ft.length-1,wt=Yt.length-1;1<=gt&&0<=wt&&Ft[gt]!==Yt[wt];)wt--;for(;1<=gt&&0<=wt;gt--,wt--)if(Ft[gt]!==Yt[wt]){if(gt!==1||wt!==1)do if(gt--,wt--,0>wt||Ft[gt]!==Yt[wt]){var nn=`
`+Ft[gt].replace(" at new "," at ");return tt.displayName&&nn.includes("<anonymous>")&&(nn=nn.replace("<anonymous>",tt.displayName)),nn}while(1<=gt&&0<=wt);break}}}finally{bl=!1,Error.prepareStackTrace=ht}return(ht=tt?tt.displayName||tt.name:"")?pr(ht):""}function Em(tt){switch(tt.tag){case 26:case 27:case 5:return pr(tt.type);case 16:return pr("Lazy");case 13:return pr("Suspense");case 19:return pr("SuspenseList");case 0:case 15:return xl(tt.type,!1);case 11:return xl(tt.type.render,!1);case 1:return xl(tt.type,!0);case 31:return pr("Activity");default:return""}}function Bu(tt){try{var st="";do st+=Em(tt),tt=tt.return;while(tt);return st}catch(ht){return`
Error generating stack: `+ht.message+`
`+ht.stack}}function Mi(tt){switch(typeof tt){case"bigint":case"boolean":case"number":case"string":case"undefined":return tt;case"object":return tt;default:return""}}function Mu(tt){var st=tt.type;return(tt=tt.nodeName)&&tt.toLowerCase()==="input"&&(st==="checkbox"||st==="radio")}function Tm(tt){var st=Mu(tt)?"checked":"value",ht=Object.getOwnPropertyDescriptor(tt.constructor.prototype,st),gt=""+tt[st];if(!tt.hasOwnProperty(st)&&typeof ht<"u"&&typeof ht.get=="function"&&typeof ht.set=="function"){var wt=ht.get,vt=ht.set;return Object.defineProperty(tt,st,{configurable:!0,get:function(){return wt.call(this)},set:function(Rt){gt=""+Rt,vt.call(this,Rt)}}),Object.defineProperty(tt,st,{enumerable:ht.enumerable}),{getValue:function(){return gt},setValue:function(Rt){gt=""+Rt},stopTracking:function(){tt._valueTracker=null,delete tt[st]}}}}function Qo(tt){tt._valueTracker||(tt._valueTracker=Tm(tt))}function Lu(tt){if(!tt)return!1;var st=tt._valueTracker;if(!st)return!0;var ht=st.getValue(),gt="";return tt&&(gt=Mu(tt)?tt.checked?"true":"false":tt.value),tt=gt,tt!==ht?(st.setValue(tt),!0):!1}function Jo(tt){if(tt=tt||(typeof document<"u"?document:void 0),typeof tt>"u")return null;try{return tt.activeElement||tt.body}catch{return tt.body}}var km=/[\n"\\]/g;function Li(tt){return tt.replace(km,function(st){return"\\"+st.charCodeAt(0).toString(16)+" "})}function wl(tt,st,ht,gt,wt,vt,Rt,Mt){tt.name="",Rt!=null&&typeof Rt!="function"&&typeof Rt!="symbol"&&typeof Rt!="boolean"?tt.type=Rt:tt.removeAttribute("type"),st!=null?Rt==="number"?(st===0&&tt.value===""||tt.value!=st)&&(tt.value=""+Mi(st)):tt.value!==""+Mi(st)&&(tt.value=""+Mi(st)):Rt!=="submit"&&Rt!=="reset"||tt.removeAttribute("value"),st!=null?yl(tt,Rt,Mi(st)):ht!=null?yl(tt,Rt,Mi(ht)):gt!=null&&tt.removeAttribute("value"),wt==null&&vt!=null&&(tt.defaultChecked=!!vt),wt!=null&&(tt.checked=wt&&typeof wt!="function"&&typeof wt!="symbol"),Mt!=null&&typeof Mt!="function"&&typeof Mt!="symbol"&&typeof Mt!="boolean"?tt.name=""+Mi(Mt):tt.removeAttribute("name")}function Vu(tt,st,ht,gt,wt,vt,Rt,Mt){if(vt!=null&&typeof vt!="function"&&typeof vt!="symbol"&&typeof vt!="boolean"&&(tt.type=vt),st!=null||ht!=null){if(!(vt!=="submit"&&vt!=="reset"||st!=null))return;ht=ht!=null?""+Mi(ht):"",st=st!=null?""+Mi(st):ht,Mt||st===tt.value||(tt.value=st),tt.defaultValue=st}gt=gt??wt,gt=typeof gt!="function"&&typeof gt!="symbol"&&!!gt,tt.checked=Mt?tt.checked:!!gt,tt.defaultChecked=!!gt,Rt!=null&&typeof Rt!="function"&&typeof Rt!="symbol"&&typeof Rt!="boolean"&&(tt.name=Rt)}function yl(tt,st,ht){st==="number"&&Jo(tt.ownerDocument)===tt||tt.defaultValue===""+ht||(tt.defaultValue=""+ht)}function br(tt,st,ht,gt){if(tt=tt.options,st){st={};for(var wt=0;wt<ht.length;wt++)st["$"+ht[wt]]=!0;for(ht=0;ht<tt.length;ht++)wt=st.hasOwnProperty("$"+tt[ht].value),tt[ht].selected!==wt&&(tt[ht].selected=wt),wt&&gt&&(tt[ht].defaultSelected=!0)}else{for(ht=""+Mi(ht),st=null,wt=0;wt<tt.length;wt++){if(tt[wt].value===ht){tt[wt].selected=!0,gt&&(tt[wt].defaultSelected=!0);return}st!==null||tt[wt].disabled||(st=tt[wt])}st!==null&&(st.selected=!0)}}function Nu(tt,st,ht){if(st!=null&&(st=""+Mi(st),st!==tt.value&&(tt.value=st),ht==null)){tt.defaultValue!==st&&(tt.defaultValue=st);return}tt.defaultValue=ht!=null?""+Mi(ht):""}function Du(tt,st,ht,gt){if(st==null){if(gt!=null){if(ht!=null)throw Error(N(92));if(Zt(gt)){if(1<gt.length)throw Error(N(93));gt=gt[0]}ht=gt}ht==null&&(ht=""),st=ht}ht=Mi(st),tt.defaultValue=ht,gt=tt.textContent,gt===ht&&gt!==""&&gt!==null&&(tt.value=gt)}function xr(tt,st){if(st){var ht=tt.firstChild;if(ht&&ht===tt.lastChild&&ht.nodeType===3){ht.nodeValue=st;return}}tt.textContent=st}var Sm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fu(tt,st,ht){var gt=st.indexOf("--")===0;ht==null||typeof ht=="boolean"||ht===""?gt?tt.setProperty(st,""):st==="float"?tt.cssFloat="":tt[st]="":gt?tt.setProperty(st,ht):typeof ht!="number"||ht===0||Sm.has(st)?st==="float"?tt.cssFloat=ht:tt[st]=(""+ht).trim():tt[st]=ht+"px"}function $u(tt,st,ht){if(st!=null&&typeof st!="object")throw Error(N(62));if(tt=tt.style,ht!=null){for(var gt in ht)!ht.hasOwnProperty(gt)||st!=null&&st.hasOwnProperty(gt)||(gt.indexOf("--")===0?tt.setProperty(gt,""):gt==="float"?tt.cssFloat="":tt[gt]="");for(var wt in st)gt=st[wt],st.hasOwnProperty(wt)&&ht[wt]!==gt&&Fu(tt,wt,gt)}else for(var vt in st)st.hasOwnProperty(vt)&&Fu(tt,vt,st[vt])}function _l(tt){if(tt.indexOf("-")===-1)return!1;switch(tt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ea(tt){return Rm.test(""+tt)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":tt}var vl=null;function Cl(tt){return tt=tt.target||tt.srcElement||window,tt.correspondingUseElement&&(tt=tt.correspondingUseElement),tt.nodeType===3?tt.parentNode:tt}var wr=null,yr=null;function Uu(tt){var st=fr(tt);if(st&&(tt=st.stateNode)){var ht=tt[yi]||null;e:switch(tt=st.stateNode,st.type){case"input":if(wl(tt,ht.value,ht.defaultValue,ht.defaultValue,ht.checked,ht.defaultChecked,ht.type,ht.name),st=ht.name,ht.type==="radio"&&st!=null){for(ht=tt;ht.parentNode;)ht=ht.parentNode;for(ht=ht.querySelectorAll('input[name="'+Li(""+st)+'"][type="radio"]'),st=0;st<ht.length;st++){var gt=ht[st];if(gt!==tt&&gt.form===tt.form){var wt=gt[yi]||null;if(!wt)throw Error(N(90));wl(gt,wt.value,wt.defaultValue,wt.defaultValue,wt.checked,wt.defaultChecked,wt.type,wt.name)}}for(st=0;st<ht.length;st++)gt=ht[st],gt.form===tt.form&&Lu(gt)}break e;case"textarea":Nu(tt,ht.value,ht.defaultValue);break e;case"select":st=ht.value,st!=null&&br(tt,!!ht.multiple,st,!1)}}}var El=!1;function zu(tt,st,ht){if(El)return tt(st,ht);El=!0;try{var gt=tt(st);return gt}finally{if(El=!1,(wr!==null||yr!==null)&&(Fa(),wr&&(st=wr,tt=yr,yr=wr=null,Uu(st),tt)))for(st=0;st<tt.length;st++)Uu(tt[st])}}function no(tt,st){var ht=tt.stateNode;if(ht===null)return null;var gt=ht[yi]||null;if(gt===null)return null;ht=gt[st];e:switch(st){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(gt=!gt.disabled)||(tt=tt.type,gt=!(tt==="button"||tt==="input"||tt==="select"||tt==="textarea")),tt=!gt;break e;default:tt=!1}if(tt)return null;if(ht&&typeof ht!="function")throw Error(N(231,st,typeof ht));return ht}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tl=!1;if(rs)try{var io={};Object.defineProperty(io,"passive",{get:function(){Tl=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Tl=!1}var Es=null,kl=null,ta=null;function Hu(){if(ta)return ta;var tt,st=kl,ht=st.length,gt,wt="value"in Es?Es.value:Es.textContent,vt=wt.length;for(tt=0;tt<ht&&st[tt]===wt[tt];tt++);var Rt=ht-tt;for(gt=1;gt<=Rt&&st[ht-gt]===wt[vt-gt];gt++);return ta=wt.slice(tt,1<gt?1-gt:void 0)}function na(tt){var st=tt.keyCode;return"charCode"in tt?(tt=tt.charCode,tt===0&&st===13&&(tt=13)):tt=st,tt===10&&(tt=13),32<=tt||tt===13?tt:0}function ia(){return!0}function Wu(){return!1}function _i(tt){function st(ht,gt,wt,vt,Rt){this._reactName=ht,this._targetInst=wt,this.type=gt,this.nativeEvent=vt,this.target=Rt,this.currentTarget=null;for(var Mt in tt)tt.hasOwnProperty(Mt)&&(ht=tt[Mt],this[Mt]=ht?ht(vt):vt[Mt]);return this.isDefaultPrevented=(vt.defaultPrevented!=null?vt.defaultPrevented:vt.returnValue===!1)?ia:Wu,this.isPropagationStopped=Wu,this}return ft(st.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ht=this.nativeEvent;ht&&(ht.preventDefault?ht.preventDefault():typeof ht.returnValue!="unknown"&&(ht.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var ht=this.nativeEvent;ht&&(ht.stopPropagation?ht.stopPropagation():typeof ht.cancelBubble!="unknown"&&(ht.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),st}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(tt){return tt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=_i(Zs),so=ft({},Zs,{view:0,detail:0}),Im=_i(so),Sl,Al,ro,ra=ft({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(tt){return tt.relatedTarget===void 0?tt.fromElement===tt.srcElement?tt.toElement:tt.fromElement:tt.relatedTarget},movementX:function(tt){return"movementX"in tt?tt.movementX:(tt!==ro&&(ro&&tt.type==="mousemove"?(Sl=tt.screenX-ro.screenX,Al=tt.screenY-ro.screenY):Al=Sl=0,ro=tt),Sl)},movementY:function(tt){return"movementY"in tt?tt.movementY:Al}}),ju=_i(ra),Pm=ft({},ra,{dataTransfer:0}),Om=_i(Pm),Bm=ft({},so,{relatedTarget:0}),Rl=_i(Bm),Mm=ft({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=_i(Mm),Vm=ft({},Zs,{clipboardData:function(tt){return"clipboardData"in tt?tt.clipboardData:window.clipboardData}}),Nm=_i(Vm),Dm=ft({},Zs,{data:0}),qu=_i(Dm),Fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(tt){var st=this.nativeEvent;return st.getModifierState?st.getModifierState(tt):(tt=Um[tt])?!!st[tt]:!1}function Il(){return zm}var Hm=ft({},so,{key:function(tt){if(tt.key){var st=Fm[tt.key]||tt.key;if(st!=="Unidentified")return st}return tt.type==="keypress"?(tt=na(tt),tt===13?"Enter":String.fromCharCode(tt)):tt.type==="keydown"||tt.type==="keyup"?$m[tt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(tt){return tt.type==="keypress"?na(tt):0},keyCode:function(tt){return tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0},which:function(tt){return tt.type==="keypress"?na(tt):tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0}}),Wm=_i(Hm),jm=ft({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ku=_i(jm),qm=ft({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),Km=_i(qm),Gm=ft({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zm=_i(Gm),Ym=ft({},ra,{deltaX:function(tt){return"deltaX"in tt?tt.deltaX:"wheelDeltaX"in tt?-tt.wheelDeltaX:0},deltaY:function(tt){return"deltaY"in tt?tt.deltaY:"wheelDeltaY"in tt?-tt.wheelDeltaY:"wheelDelta"in tt?-tt.wheelDelta:0},deltaZ:0,deltaMode:0}),Xm=_i(Ym),Qm=ft({},Zs,{newState:0,oldState:0}),Jm=_i(Qm),eg=[9,13,27,32],Pl=rs&&"CompositionEvent"in window,oo=null;rs&&"documentMode"in document&&(oo=document.documentMode);var tg=rs&&"TextEvent"in window&&!oo,Gu=rs&&(!Pl||oo&&8<oo&&11>=oo),Zu=" ",Yu=!1;function Xu(tt,st){switch(tt){case"keyup":return eg.indexOf(st.keyCode)!==-1;case"keydown":return st.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(tt){return tt=tt.detail,typeof tt=="object"&&"data"in tt?tt.data:null}var _r=!1;function ng(tt,st){switch(tt){case"compositionend":return Qu(st);case"keypress":return st.which!==32?null:(Yu=!0,Zu);case"textInput":return tt=st.data,tt===Zu&&Yu?null:tt;default:return null}}function ig(tt,st){if(_r)return tt==="compositionend"||!Pl&&Xu(tt,st)?(tt=Hu(),ta=kl=Es=null,_r=!1,tt):null;switch(tt){case"paste":return null;case"keypress":if(!(st.ctrlKey||st.altKey||st.metaKey)||st.ctrlKey&&st.altKey){if(st.char&&1<st.char.length)return st.char;if(st.which)return String.fromCharCode(st.which)}return null;case"compositionend":return Gu&&st.locale!=="ko"?null:st.data;default:return null}}var sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(tt){var st=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return st==="input"?!!sg[tt.type]:st==="textarea"}function ed(tt,st,ht,gt){wr?yr?yr.push(gt):yr=[gt]:wr=gt,st=ja(st,"onChange"),0<st.length&&(ht=new sa("onChange","change",null,ht,gt),tt.push({event:ht,listeners:st}))}var ao=null,lo=null;function rg(tt){Lf(tt,0)}function oa(tt){var st=to(tt);if(Lu(st))return tt}function td(tt,st){if(tt==="change")return st}var nd=!1;if(rs){var Ol;if(rs){var Bl="oninput"in document;if(!Bl){var id=document.createElement("div");id.setAttribute("oninput","return;"),Bl=typeof id.oninput=="function"}Ol=Bl}else Ol=!1;nd=Ol&&(!document.documentMode||9<document.documentMode)}function sd(){ao&&(ao.detachEvent("onpropertychange",rd),lo=ao=null)}function rd(tt){if(tt.propertyName==="value"&&oa(lo)){var st=[];ed(st,lo,tt,Cl(tt)),zu(rg,st)}}function og(tt,st,ht){tt==="focusin"?(sd(),ao=st,lo=ht,ao.attachEvent("onpropertychange",rd)):tt==="focusout"&&sd()}function ag(tt){if(tt==="selectionchange"||tt==="keyup"||tt==="keydown")return oa(lo)}function lg(tt,st){if(tt==="click")return oa(st)}function cg(tt,st){if(tt==="input"||tt==="change")return oa(st)}function ug(tt,st){return tt===st&&(tt!==0||1/tt===1/st)||tt!==tt&&st!==st}var ki=typeof Object.is=="function"?Object.is:ug;function co(tt,st){if(ki(tt,st))return!0;if(typeof tt!="object"||tt===null||typeof st!="object"||st===null)return!1;var ht=Object.keys(tt),gt=Object.keys(st);if(ht.length!==gt.length)return!1;for(gt=0;gt<ht.length;gt++){var wt=ht[gt];if(!xn.call(st,wt)||!ki(tt[wt],st[wt]))return!1}return!0}function od(tt){for(;tt&&tt.firstChild;)tt=tt.firstChild;return tt}function ad(tt,st){var ht=od(tt);tt=0;for(var gt;ht;){if(ht.nodeType===3){if(gt=tt+ht.textContent.length,tt<=st&&gt>=st)return{node:ht,offset:st-tt};tt=gt}e:{for(;ht;){if(ht.nextSibling){ht=ht.nextSibling;break e}ht=ht.parentNode}ht=void 0}ht=od(ht)}}function ld(tt,st){return tt&&st?tt===st?!0:tt&&tt.nodeType===3?!1:st&&st.nodeType===3?ld(tt,st.parentNode):"contains"in tt?tt.contains(st):tt.compareDocumentPosition?!!(tt.compareDocumentPosition(st)&16):!1:!1}function cd(tt){tt=tt!=null&&tt.ownerDocument!=null&&tt.ownerDocument.defaultView!=null?tt.ownerDocument.defaultView:window;for(var st=Jo(tt.document);st instanceof tt.HTMLIFrameElement;){try{var ht=typeof st.contentWindow.location.href=="string"}catch{ht=!1}if(ht)tt=st.contentWindow;else break;st=Jo(tt.document)}return st}function Ml(tt){var st=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return st&&(st==="input"&&(tt.type==="text"||tt.type==="search"||tt.type==="tel"||tt.type==="url"||tt.type==="password")||st==="textarea"||tt.contentEditable==="true")}var dg=rs&&"documentMode"in document&&11>=document.documentMode,vr=null,Ll=null,uo=null,Vl=!1;function ud(tt,st,ht){var gt=ht.window===ht?ht.document:ht.nodeType===9?ht:ht.ownerDocument;Vl||vr==null||vr!==Jo(gt)||(gt=vr,"selectionStart"in gt&&Ml(gt)?gt={start:gt.selectionStart,end:gt.selectionEnd}:(gt=(gt.ownerDocument&&gt.ownerDocument.defaultView||window).getSelection(),gt={anchorNode:gt.anchorNode,anchorOffset:gt.anchorOffset,focusNode:gt.focusNode,focusOffset:gt.focusOffset}),uo&&co(uo,gt)||(uo=gt,gt=ja(Ll,"onSelect"),0<gt.length&&(st=new sa("onSelect","select",null,st,ht),tt.push({event:st,listeners:gt}),st.target=vr)))}function Ys(tt,st){var ht={};return ht[tt.toLowerCase()]=st.toLowerCase(),ht["Webkit"+tt]="webkit"+st,ht["Moz"+tt]="moz"+st,ht}var Cr={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Nl={},dd={};rs&&(dd=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function Xs(tt){if(Nl[tt])return Nl[tt];if(!Cr[tt])return tt;var st=Cr[tt],ht;for(ht in st)if(st.hasOwnProperty(ht)&&ht in dd)return Nl[tt]=st[ht];return tt}var hd=Xs("animationend"),fd=Xs("animationiteration"),md=Xs("animationstart"),hg=Xs("transitionrun"),fg=Xs("transitionstart"),mg=Xs("transitioncancel"),gd=Xs("transitionend"),pd=new Map,Dl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dl.push("scrollEnd");function qi(tt,st){pd.set(tt,st),Gs(st,[tt])}var bd=new WeakMap;function Vi(tt,st){if(typeof tt=="object"&&tt!==null){var ht=bd.get(tt);return ht!==void 0?ht:(st={value:tt,source:st,stack:Bu(st)},bd.set(tt,st),st)}return{value:tt,source:st,stack:Bu(st)}}var Ni=[],Er=0,Fl=0;function aa(){for(var tt=Er,st=Fl=Er=0;st<tt;){var ht=Ni[st];Ni[st++]=null;var gt=Ni[st];Ni[st++]=null;var wt=Ni[st];Ni[st++]=null;var vt=Ni[st];if(Ni[st++]=null,gt!==null&&wt!==null){var Rt=gt.pending;Rt===null?wt.next=wt:(wt.next=Rt.next,Rt.next=wt),gt.pending=wt}vt!==0&&xd(ht,wt,vt)}}function la(tt,st,ht,gt){Ni[Er++]=tt,Ni[Er++]=st,Ni[Er++]=ht,Ni[Er++]=gt,Fl|=gt,tt.lanes|=gt,tt=tt.alternate,tt!==null&&(tt.lanes|=gt)}function $l(tt,st,ht,gt){return la(tt,st,ht,gt),ca(tt)}function Tr(tt,st){return la(tt,null,null,st),ca(tt)}function xd(tt,st,ht){tt.lanes|=ht;var gt=tt.alternate;gt!==null&&(gt.lanes|=ht);for(var wt=!1,vt=tt.return;vt!==null;)vt.childLanes|=ht,gt=vt.alternate,gt!==null&&(gt.childLanes|=ht),vt.tag===22&&(tt=vt.stateNode,tt===null||tt._visibility&1||(wt=!0)),tt=vt,vt=vt.return;return tt.tag===3?(vt=tt.stateNode,wt&&st!==null&&(wt=31-Jn(ht),tt=vt.hiddenUpdates,gt=tt[wt],gt===null?tt[wt]=[st]:gt.push(st),st.lane=ht|536870912),vt):null}function ca(tt){if(50<Vo)throw Vo=0,qc=null,Error(N(185));for(var st=tt.return;st!==null;)tt=st,st=tt.return;return tt.tag===3?tt.stateNode:null}var kr={};function gg(tt,st,ht,gt){this.tag=tt,this.key=ht,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=st,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=gt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(tt,st,ht,gt){return new gg(tt,st,ht,gt)}function Ul(tt){return tt=tt.prototype,!(!tt||!tt.isReactComponent)}function os(tt,st){var ht=tt.alternate;return ht===null?(ht=Si(tt.tag,st,tt.key,tt.mode),ht.elementType=tt.elementType,ht.type=tt.type,ht.stateNode=tt.stateNode,ht.alternate=tt,tt.alternate=ht):(ht.pendingProps=st,ht.type=tt.type,ht.flags=0,ht.subtreeFlags=0,ht.deletions=null),ht.flags=tt.flags&65011712,ht.childLanes=tt.childLanes,ht.lanes=tt.lanes,ht.child=tt.child,ht.memoizedProps=tt.memoizedProps,ht.memoizedState=tt.memoizedState,ht.updateQueue=tt.updateQueue,st=tt.dependencies,ht.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext},ht.sibling=tt.sibling,ht.index=tt.index,ht.ref=tt.ref,ht.refCleanup=tt.refCleanup,ht}function wd(tt,st){tt.flags&=65011714;var ht=tt.alternate;return ht===null?(tt.childLanes=0,tt.lanes=st,tt.child=null,tt.subtreeFlags=0,tt.memoizedProps=null,tt.memoizedState=null,tt.updateQueue=null,tt.dependencies=null,tt.stateNode=null):(tt.childLanes=ht.childLanes,tt.lanes=ht.lanes,tt.child=ht.child,tt.subtreeFlags=0,tt.deletions=null,tt.memoizedProps=ht.memoizedProps,tt.memoizedState=ht.memoizedState,tt.updateQueue=ht.updateQueue,tt.type=ht.type,st=ht.dependencies,tt.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext}),tt}function ua(tt,st,ht,gt,wt,vt){var Rt=0;if(gt=tt,typeof tt=="function")Ul(tt)&&(Rt=1);else if(typeof tt=="string")Rt=bp(tt,ht,an.current)?26:tt==="html"||tt==="head"||tt==="body"?27:5;else e:switch(tt){case kt:return tt=Si(31,ht,st,wt),tt.elementType=kt,tt.lanes=vt,tt;case _t:return Qs(ht.children,wt,vt,st);case Ct:Rt=8,wt|=24;break;case Tt:return tt=Si(12,ht,st,wt|2),tt.elementType=Tt,tt.lanes=vt,tt;case Ot:return tt=Si(13,ht,st,wt),tt.elementType=Ot,tt.lanes=vt,tt;case Nt:return tt=Si(19,ht,st,wt),tt.elementType=Nt,tt.lanes=vt,tt;default:if(typeof tt=="object"&&tt!==null)switch(tt.$$typeof){case At:case Pt:Rt=10;break e;case It:Rt=9;break e;case Bt:Rt=11;break e;case Lt:Rt=14;break e;case Et:Rt=16,gt=null;break e}Rt=29,ht=Error(N(130,tt===null?"null":typeof tt,"")),gt=null}return st=Si(Rt,ht,st,wt),st.elementType=tt,st.type=gt,st.lanes=vt,st}function Qs(tt,st,ht,gt){return tt=Si(7,tt,gt,st),tt.lanes=ht,tt}function zl(tt,st,ht){return tt=Si(6,tt,null,st),tt.lanes=ht,tt}function Hl(tt,st,ht){return st=Si(4,tt.children!==null?tt.children:[],tt.key,st),st.lanes=ht,st.stateNode={containerInfo:tt.containerInfo,pendingChildren:null,implementation:tt.implementation},st}var Sr=[],Ar=0,da=null,ha=0,Di=[],Fi=0,Js=null,as=1,ls="";function er(tt,st){Sr[Ar++]=ha,Sr[Ar++]=da,da=tt,ha=st}function yd(tt,st,ht){Di[Fi++]=as,Di[Fi++]=ls,Di[Fi++]=Js,Js=tt;var gt=as;tt=ls;var wt=32-Jn(gt)-1;gt&=~(1<<wt),ht+=1;var vt=32-Jn(st)+wt;if(30<vt){var Rt=wt-wt%5;vt=(gt&(1<<Rt)-1).toString(32),gt>>=Rt,wt-=Rt,as=1<<32-Jn(st)+wt|ht<<wt|gt,ls=vt+tt}else as=1<<vt|ht<<wt|gt,ls=tt}function Wl(tt){tt.return!==null&&(er(tt,1),yd(tt,1,0))}function jl(tt){for(;tt===da;)da=Sr[--Ar],Sr[Ar]=null,ha=Sr[--Ar],Sr[Ar]=null;for(;tt===Js;)Js=Di[--Fi],Di[Fi]=null,ls=Di[--Fi],Di[Fi]=null,as=Di[--Fi],Di[Fi]=null}var wi=null,Gn=null,Pn=!1,tr=null,Xi=!1,ql=Error(N(519));function nr(tt){var st=Error(N(418,""));throw mo(Vi(st,tt)),ql}function _d(tt){var st=tt.stateNode,ht=tt.type,gt=tt.memoizedProps;switch(st[pi]=tt,st[yi]=gt,ht){case"dialog":Tn("cancel",st),Tn("close",st);break;case"iframe":case"object":case"embed":Tn("load",st);break;case"video":case"audio":for(ht=0;ht<Do.length;ht++)Tn(Do[ht],st);break;case"source":Tn("error",st);break;case"img":case"image":case"link":Tn("error",st),Tn("load",st);break;case"details":Tn("toggle",st);break;case"input":Tn("invalid",st),Vu(st,gt.value,gt.defaultValue,gt.checked,gt.defaultChecked,gt.type,gt.name,!0),Qo(st);break;case"select":Tn("invalid",st);break;case"textarea":Tn("invalid",st),Du(st,gt.value,gt.defaultValue,gt.children),Qo(st)}ht=gt.children,typeof ht!="string"&&typeof ht!="number"&&typeof ht!="bigint"||st.textContent===""+ht||gt.suppressHydrationWarning===!0||Ff(st.textContent,ht)?(gt.popover!=null&&(Tn("beforetoggle",st),Tn("toggle",st)),gt.onScroll!=null&&Tn("scroll",st),gt.onScrollEnd!=null&&Tn("scrollend",st),gt.onClick!=null&&(st.onclick=qa),st=!0):st=!1,st||nr(tt)}function vd(tt){for(wi=tt.return;wi;)switch(wi.tag){case 5:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:wi=wi.return}}function ho(tt){if(tt!==wi)return!1;if(!Pn)return vd(tt),Pn=!0,!1;var st=tt.tag,ht;if((ht=st!==3&&st!==27)&&((ht=st===5)&&(ht=tt.type,ht=!(ht!=="form"&&ht!=="button")||lu(tt.type,tt.memoizedProps)),ht=!ht),ht&&Gn&&nr(tt),vd(tt),st===13){if(tt=tt.memoizedState,tt=tt!==null?tt.dehydrated:null,!tt)throw Error(N(317));e:{for(tt=tt.nextSibling,st=0;tt;){if(tt.nodeType===8)if(ht=tt.data,ht==="/$"){if(st===0){Gn=Gi(tt.nextSibling);break e}st--}else ht!=="$"&&ht!=="$!"&&ht!=="$?"||st++;tt=tt.nextSibling}Gn=null}}else st===27?(st=Gn,$s(tt.type)?(tt=hu,hu=null,Gn=tt):Gn=st):Gn=wi?Gi(tt.stateNode.nextSibling):null;return!0}function fo(){Gn=wi=null,Pn=!1}function Cd(){var tt=tr;return tt!==null&&(Ei===null?Ei=tt:Ei.push.apply(Ei,tt),tr=null),tt}function mo(tt){tr===null?tr=[tt]:tr.push(tt)}var Kl=Jt(null),ir=null,cs=null;function Ts(tt,st,ht){tn(Kl,st._currentValue),st._currentValue=ht}function us(tt){tt._currentValue=Kl.current,ln(Kl)}function Gl(tt,st,ht){for(;tt!==null;){var gt=tt.alternate;if((tt.childLanes&st)!==st?(tt.childLanes|=st,gt!==null&&(gt.childLanes|=st)):gt!==null&&(gt.childLanes&st)!==st&&(gt.childLanes|=st),tt===ht)break;tt=tt.return}}function Zl(tt,st,ht,gt){var wt=tt.child;for(wt!==null&&(wt.return=tt);wt!==null;){var vt=wt.dependencies;if(vt!==null){var Rt=wt.child;vt=vt.firstContext;e:for(;vt!==null;){var Mt=vt;vt=wt;for(var Ft=0;Ft<st.length;Ft++)if(Mt.context===st[Ft]){vt.lanes|=ht,Mt=vt.alternate,Mt!==null&&(Mt.lanes|=ht),Gl(vt.return,ht,tt),gt||(Rt=null);break e}vt=Mt.next}}else if(wt.tag===18){if(Rt=wt.return,Rt===null)throw Error(N(341));Rt.lanes|=ht,vt=Rt.alternate,vt!==null&&(vt.lanes|=ht),Gl(Rt,ht,tt),Rt=null}else Rt=wt.child;if(Rt!==null)Rt.return=wt;else for(Rt=wt;Rt!==null;){if(Rt===tt){Rt=null;break}if(wt=Rt.sibling,wt!==null){wt.return=Rt.return,Rt=wt;break}Rt=Rt.return}wt=Rt}}function go(tt,st,ht,gt){tt=null;for(var wt=st,vt=!1;wt!==null;){if(!vt){if((wt.flags&524288)!==0)vt=!0;else if((wt.flags&262144)!==0)break}if(wt.tag===10){var Rt=wt.alternate;if(Rt===null)throw Error(N(387));if(Rt=Rt.memoizedProps,Rt!==null){var Mt=wt.type;ki(wt.pendingProps.value,Rt.value)||(tt!==null?tt.push(Mt):tt=[Mt])}}else if(wt===An.current){if(Rt=wt.alternate,Rt===null)throw Error(N(387));Rt.memoizedState.memoizedState!==wt.memoizedState.memoizedState&&(tt!==null?tt.push(Wo):tt=[Wo])}wt=wt.return}tt!==null&&Zl(st,tt,ht,gt),st.flags|=262144}function fa(tt){for(tt=tt.firstContext;tt!==null;){if(!ki(tt.context._currentValue,tt.memoizedValue))return!0;tt=tt.next}return!1}function sr(tt){ir=tt,cs=null,tt=tt.dependencies,tt!==null&&(tt.firstContext=null)}function bi(tt){return Ed(ir,tt)}function ma(tt,st){return ir===null&&sr(tt),Ed(tt,st)}function Ed(tt,st){var ht=st._currentValue;if(st={context:st,memoizedValue:ht,next:null},cs===null){if(tt===null)throw Error(N(308));cs=st,tt.dependencies={lanes:0,firstContext:st},tt.flags|=524288}else cs=cs.next=st;return ht}var pg=typeof AbortController<"u"?AbortController:function(){var tt=[],st=this.signal={aborted:!1,addEventListener:function(ht,gt){tt.push(gt)}};this.abort=function(){st.aborted=!0,tt.forEach(function(ht){return ht()})}},bg=de.unstable_scheduleCallback,xg=de.unstable_NormalPriority,ii={$$typeof:Pt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yl(){return{controller:new pg,data:new Map,refCount:0}}function po(tt){tt.refCount--,tt.refCount===0&&bg(xg,function(){tt.controller.abort()})}var bo=null,Xl=0,Rr=0,Ir=null;function wg(tt,st){if(bo===null){var ht=bo=[];Xl=0,Rr=Jc(),Ir={status:"pending",value:void 0,then:function(gt){ht.push(gt)}}}return Xl++,st.then(Td,Td),st}function Td(){if(--Xl===0&&bo!==null){Ir!==null&&(Ir.status="fulfilled");var tt=bo;bo=null,Rr=0,Ir=null;for(var st=0;st<tt.length;st++)(0,tt[st])()}}function yg(tt,st){var ht=[],gt={status:"pending",value:null,reason:null,then:function(wt){ht.push(wt)}};return tt.then(function(){gt.status="fulfilled",gt.value=st;for(var wt=0;wt<ht.length;wt++)(0,ht[wt])(st)},function(wt){for(gt.status="rejected",gt.reason=wt,wt=0;wt<ht.length;wt++)(0,ht[wt])(void 0)}),gt}var kd=Dt.S;Dt.S=function(tt,st){typeof st=="object"&&st!==null&&typeof st.then=="function"&&wg(tt,st),kd!==null&&kd(tt,st)};var rr=Jt(null);function Ql(){var tt=rr.current;return tt!==null?tt:Un.pooledCache}function ga(tt,st){st===null?tn(rr,rr.current):tn(rr,st.pool)}function Sd(){var tt=Ql();return tt===null?null:{parent:ii._currentValue,pool:tt}}var xo=Error(N(460)),Ad=Error(N(474)),pa=Error(N(542)),Jl={then:function(){}};function Rd(tt){return tt=tt.status,tt==="fulfilled"||tt==="rejected"}function ba(){}function Id(tt,st,ht){switch(ht=tt[ht],ht===void 0?tt.push(st):ht!==st&&(st.then(ba,ba),st=ht),st.status){case"fulfilled":return st.value;case"rejected":throw tt=st.reason,Od(tt),tt;default:if(typeof st.status=="string")st.then(ba,ba);else{if(tt=Un,tt!==null&&100<tt.shellSuspendCounter)throw Error(N(482));tt=st,tt.status="pending",tt.then(function(gt){if(st.status==="pending"){var wt=st;wt.status="fulfilled",wt.value=gt}},function(gt){if(st.status==="pending"){var wt=st;wt.status="rejected",wt.reason=gt}})}switch(st.status){case"fulfilled":return st.value;case"rejected":throw tt=st.reason,Od(tt),tt}throw wo=st,xo}}var wo=null;function Pd(){if(wo===null)throw Error(N(459));var tt=wo;return wo=null,tt}function Od(tt){if(tt===xo||tt===pa)throw Error(N(483))}var ks=!1;function ec(tt){tt.updateQueue={baseState:tt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tc(tt,st){tt=tt.updateQueue,st.updateQueue===tt&&(st.updateQueue={baseState:tt.baseState,firstBaseUpdate:tt.firstBaseUpdate,lastBaseUpdate:tt.lastBaseUpdate,shared:tt.shared,callbacks:null})}function Ss(tt){return{lane:tt,tag:0,payload:null,callback:null,next:null}}function As(tt,st,ht){var gt=tt.updateQueue;if(gt===null)return null;if(gt=gt.shared,(Bn&2)!==0){var wt=gt.pending;return wt===null?st.next=st:(st.next=wt.next,wt.next=st),gt.pending=st,st=ca(tt),xd(tt,null,ht),st}return la(tt,gt,st,ht),ca(tt)}function yo(tt,st,ht){if(st=st.updateQueue,st!==null&&(st=st.shared,(ht&4194048)!==0)){var gt=st.lanes;gt&=tt.pendingLanes,ht|=gt,st.lanes=ht,Tu(tt,ht)}}function nc(tt,st){var ht=tt.updateQueue,gt=tt.alternate;if(gt!==null&&(gt=gt.updateQueue,ht===gt)){var wt=null,vt=null;if(ht=ht.firstBaseUpdate,ht!==null){do{var Rt={lane:ht.lane,tag:ht.tag,payload:ht.payload,callback:null,next:null};vt===null?wt=vt=Rt:vt=vt.next=Rt,ht=ht.next}while(ht!==null);vt===null?wt=vt=st:vt=vt.next=st}else wt=vt=st;ht={baseState:gt.baseState,firstBaseUpdate:wt,lastBaseUpdate:vt,shared:gt.shared,callbacks:gt.callbacks},tt.updateQueue=ht;return}tt=ht.lastBaseUpdate,tt===null?ht.firstBaseUpdate=st:tt.next=st,ht.lastBaseUpdate=st}var ic=!1;function _o(){if(ic){var tt=Ir;if(tt!==null)throw tt}}function vo(tt,st,ht,gt){ic=!1;var wt=tt.updateQueue;ks=!1;var vt=wt.firstBaseUpdate,Rt=wt.lastBaseUpdate,Mt=wt.shared.pending;if(Mt!==null){wt.shared.pending=null;var Ft=Mt,Yt=Ft.next;Ft.next=null,Rt===null?vt=Yt:Rt.next=Yt,Rt=Ft;var nn=tt.alternate;nn!==null&&(nn=nn.updateQueue,Mt=nn.lastBaseUpdate,Mt!==Rt&&(Mt===null?nn.firstBaseUpdate=Yt:Mt.next=Yt,nn.lastBaseUpdate=Ft))}if(vt!==null){var rn=wt.baseState;Rt=0,nn=Yt=Ft=null,Mt=vt;do{var Xt=Mt.lane&-536870913,Qt=Xt!==Mt.lane;if(Qt?(Sn&Xt)===Xt:(gt&Xt)===Xt){Xt!==0&&Xt===Rr&&(ic=!0),nn!==null&&(nn=nn.next={lane:0,tag:Mt.tag,payload:Mt.payload,callback:null,next:null});e:{var bn=tt,mn=Mt;Xt=st;var Nn=ht;switch(mn.tag){case 1:if(bn=mn.payload,typeof bn=="function"){rn=bn.call(Nn,rn,Xt);break e}rn=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=mn.payload,Xt=typeof bn=="function"?bn.call(Nn,rn,Xt):bn,Xt==null)break e;rn=ft({},rn,Xt);break e;case 2:ks=!0}}Xt=Mt.callback,Xt!==null&&(tt.flags|=64,Qt&&(tt.flags|=8192),Qt=wt.callbacks,Qt===null?wt.callbacks=[Xt]:Qt.push(Xt))}else Qt={lane:Xt,tag:Mt.tag,payload:Mt.payload,callback:Mt.callback,next:null},nn===null?(Yt=nn=Qt,Ft=rn):nn=nn.next=Qt,Rt|=Xt;if(Mt=Mt.next,Mt===null){if(Mt=wt.shared.pending,Mt===null)break;Qt=Mt,Mt=Qt.next,Qt.next=null,wt.lastBaseUpdate=Qt,wt.shared.pending=null}}while(!0);nn===null&&(Ft=rn),wt.baseState=Ft,wt.firstBaseUpdate=Yt,wt.lastBaseUpdate=nn,vt===null&&(wt.shared.lanes=0),Vs|=Rt,tt.lanes=Rt,tt.memoizedState=rn}}function Bd(tt,st){if(typeof tt!="function")throw Error(N(191,tt));tt.call(st)}function Md(tt,st){var ht=tt.callbacks;if(ht!==null)for(tt.callbacks=null,tt=0;tt<ht.length;tt++)Bd(ht[tt],st)}var Pr=Jt(null),xa=Jt(0);function Ld(tt,st){tt=bs,tn(xa,tt),tn(Pr,st),bs=tt|st.baseLanes}function sc(){tn(xa,bs),tn(Pr,Pr.current)}function rc(){bs=xa.current,ln(Pr),ln(xa)}var Rs=0,vn=null,Ln=null,ei=null,wa=!1,Or=!1,or=!1,ya=0,Co=0,Br=null,_g=0;function Yn(){throw Error(N(321))}function oc(tt,st){if(st===null)return!1;for(var ht=0;ht<st.length&&ht<tt.length;ht++)if(!ki(tt[ht],st[ht]))return!1;return!0}function ac(tt,st,ht,gt,wt,vt){return Rs=vt,vn=st,st.memoizedState=null,st.updateQueue=null,st.lanes=0,Dt.H=tt===null||tt.memoizedState===null?xh:wh,or=!1,vt=ht(gt,wt),or=!1,Or&&(vt=Nd(st,ht,gt,wt)),Vd(tt),vt}function Vd(tt){Dt.H=ka;var st=Ln!==null&&Ln.next!==null;if(Rs=0,ei=Ln=vn=null,wa=!1,Co=0,Br=null,st)throw Error(N(300));tt===null||ai||(tt=tt.dependencies,tt!==null&&fa(tt)&&(ai=!0))}function Nd(tt,st,ht,gt){vn=tt;var wt=0;do{if(Or&&(Br=null),Co=0,Or=!1,25<=wt)throw Error(N(301));if(wt+=1,ei=Ln=null,tt.updateQueue!=null){var vt=tt.updateQueue;vt.lastEffect=null,vt.events=null,vt.stores=null,vt.memoCache!=null&&(vt.memoCache.index=0)}Dt.H=Ag,vt=st(ht,gt)}while(Or);return vt}function vg(){var tt=Dt.H,st=tt.useState()[0];return st=typeof st.then=="function"?Eo(st):st,tt=tt.useState()[0],(Ln!==null?Ln.memoizedState:null)!==tt&&(vn.flags|=1024),st}function lc(){var tt=ya!==0;return ya=0,tt}function cc(tt,st,ht){st.updateQueue=tt.updateQueue,st.flags&=-2053,tt.lanes&=~ht}function uc(tt){if(wa){for(tt=tt.memoizedState;tt!==null;){var st=tt.queue;st!==null&&(st.pending=null),tt=tt.next}wa=!1}Rs=0,ei=Ln=vn=null,Or=!1,Co=ya=0,Br=null}function vi(){var tt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?vn.memoizedState=ei=tt:ei=ei.next=tt,ei}function ti(){if(Ln===null){var tt=vn.alternate;tt=tt!==null?tt.memoizedState:null}else tt=Ln.next;var st=ei===null?vn.memoizedState:ei.next;if(st!==null)ei=st,Ln=tt;else{if(tt===null)throw vn.alternate===null?Error(N(467)):Error(N(310));Ln=tt,tt={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},ei===null?vn.memoizedState=ei=tt:ei=ei.next=tt}return ei}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(tt){var st=Co;return Co+=1,Br===null&&(Br=[]),tt=Id(Br,tt,st),st=vn,(ei===null?st.memoizedState:ei.next)===null&&(st=st.alternate,Dt.H=st===null||st.memoizedState===null?xh:wh),tt}function _a(tt){if(tt!==null&&typeof tt=="object"){if(typeof tt.then=="function")return Eo(tt);if(tt.$$typeof===Pt)return bi(tt)}throw Error(N(438,String(tt)))}function hc(tt){var st=null,ht=vn.updateQueue;if(ht!==null&&(st=ht.memoCache),st==null){var gt=vn.alternate;gt!==null&&(gt=gt.updateQueue,gt!==null&&(gt=gt.memoCache,gt!=null&&(st={data:gt.data.map(function(wt){return wt.slice()}),index:0})))}if(st==null&&(st={data:[],index:0}),ht===null&&(ht=dc(),vn.updateQueue=ht),ht.memoCache=st,ht=st.data[st.index],ht===void 0)for(ht=st.data[st.index]=Array(tt),gt=0;gt<tt;gt++)ht[gt]=St;return st.index++,ht}function ds(tt,st){return typeof st=="function"?st(tt):st}function va(tt){var st=ti();return fc(st,Ln,tt)}function fc(tt,st,ht){var gt=tt.queue;if(gt===null)throw Error(N(311));gt.lastRenderedReducer=ht;var wt=tt.baseQueue,vt=gt.pending;if(vt!==null){if(wt!==null){var Rt=wt.next;wt.next=vt.next,vt.next=Rt}st.baseQueue=wt=vt,gt.pending=null}if(vt=tt.baseState,wt===null)tt.memoizedState=vt;else{st=wt.next;var Mt=Rt=null,Ft=null,Yt=st,nn=!1;do{var rn=Yt.lane&-536870913;if(rn!==Yt.lane?(Sn&rn)===rn:(Rs&rn)===rn){var Xt=Yt.revertLane;if(Xt===0)Ft!==null&&(Ft=Ft.next={lane:0,revertLane:0,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null}),rn===Rr&&(nn=!0);else if((Rs&Xt)===Xt){Yt=Yt.next,Xt===Rr&&(nn=!0);continue}else rn={lane:0,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},Ft===null?(Mt=Ft=rn,Rt=vt):Ft=Ft.next=rn,vn.lanes|=Xt,Vs|=Xt;rn=Yt.action,or&&ht(vt,rn),vt=Yt.hasEagerState?Yt.eagerState:ht(vt,rn)}else Xt={lane:rn,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},Ft===null?(Mt=Ft=Xt,Rt=vt):Ft=Ft.next=Xt,vn.lanes|=rn,Vs|=rn;Yt=Yt.next}while(Yt!==null&&Yt!==st);if(Ft===null?Rt=vt:Ft.next=Mt,!ki(vt,tt.memoizedState)&&(ai=!0,nn&&(ht=Ir,ht!==null)))throw ht;tt.memoizedState=vt,tt.baseState=Rt,tt.baseQueue=Ft,gt.lastRenderedState=vt}return wt===null&&(gt.lanes=0),[tt.memoizedState,gt.dispatch]}function mc(tt){var st=ti(),ht=st.queue;if(ht===null)throw Error(N(311));ht.lastRenderedReducer=tt;var gt=ht.dispatch,wt=ht.pending,vt=st.memoizedState;if(wt!==null){ht.pending=null;var Rt=wt=wt.next;do vt=tt(vt,Rt.action),Rt=Rt.next;while(Rt!==wt);ki(vt,st.memoizedState)||(ai=!0),st.memoizedState=vt,st.baseQueue===null&&(st.baseState=vt),ht.lastRenderedState=vt}return[vt,gt]}function Dd(tt,st,ht){var gt=vn,wt=ti(),vt=Pn;if(vt){if(ht===void 0)throw Error(N(407));ht=ht()}else ht=st();var Rt=!ki((Ln||wt).memoizedState,ht);Rt&&(wt.memoizedState=ht,ai=!0),wt=wt.queue;var Mt=Ud.bind(null,gt,wt,tt);if(To(2048,8,Mt,[tt]),wt.getSnapshot!==st||Rt||ei!==null&&ei.memoizedState.tag&1){if(gt.flags|=2048,Mr(9,Ca(),$d.bind(null,gt,wt,ht,st),null),Un===null)throw Error(N(349));vt||(Rs&124)!==0||Fd(gt,st,ht)}return ht}function Fd(tt,st,ht){tt.flags|=16384,tt={getSnapshot:st,value:ht},st=vn.updateQueue,st===null?(st=dc(),vn.updateQueue=st,st.stores=[tt]):(ht=st.stores,ht===null?st.stores=[tt]:ht.push(tt))}function $d(tt,st,ht,gt){st.value=ht,st.getSnapshot=gt,zd(st)&&Hd(tt)}function Ud(tt,st,ht){return ht(function(){zd(st)&&Hd(tt)})}function zd(tt){var st=tt.getSnapshot;tt=tt.value;try{var ht=st();return!ki(tt,ht)}catch{return!0}}function Hd(tt){var st=Tr(tt,2);st!==null&&Oi(st,tt,2)}function gc(tt){var st=vi();if(typeof tt=="function"){var ht=tt;if(tt=ht(),or){xi(!0);try{ht()}finally{xi(!1)}}}return st.memoizedState=st.baseState=tt,st.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:tt},st}function Wd(tt,st,ht,gt){return tt.baseState=ht,fc(tt,Ln,typeof gt=="function"?gt:ds)}function Cg(tt,st,ht,gt,wt){if(Ta(tt))throw Error(N(485));if(tt=st.action,tt!==null){var vt={payload:wt,action:tt,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Rt){vt.listeners.push(Rt)}};Dt.T!==null?ht(!0):vt.isTransition=!1,gt(vt),ht=st.pending,ht===null?(vt.next=st.pending=vt,jd(st,vt)):(vt.next=ht.next,st.pending=ht.next=vt)}}function jd(tt,st){var ht=st.action,gt=st.payload,wt=tt.state;if(st.isTransition){var vt=Dt.T,Rt={};Dt.T=Rt;try{var Mt=ht(wt,gt),Ft=Dt.S;Ft!==null&&Ft(Rt,Mt),qd(tt,st,Mt)}catch(Yt){pc(tt,st,Yt)}finally{Dt.T=vt}}else try{vt=ht(wt,gt),qd(tt,st,vt)}catch(Yt){pc(tt,st,Yt)}}function qd(tt,st,ht){ht!==null&&typeof ht=="object"&&typeof ht.then=="function"?ht.then(function(gt){Kd(tt,st,gt)},function(gt){return pc(tt,st,gt)}):Kd(tt,st,ht)}function Kd(tt,st,ht){st.status="fulfilled",st.value=ht,Gd(st),tt.state=ht,st=tt.pending,st!==null&&(ht=st.next,ht===st?tt.pending=null:(ht=ht.next,st.next=ht,jd(tt,ht)))}function pc(tt,st,ht){var gt=tt.pending;if(tt.pending=null,gt!==null){gt=gt.next;do st.status="rejected",st.reason=ht,Gd(st),st=st.next;while(st!==gt)}tt.action=null}function Gd(tt){tt=tt.listeners;for(var st=0;st<tt.length;st++)(0,tt[st])()}function Zd(tt,st){return st}function Yd(tt,st){if(Pn){var ht=Un.formState;if(ht!==null){e:{var gt=vn;if(Pn){if(Gn){t:{for(var wt=Gn,vt=Xi;wt.nodeType!==8;){if(!vt){wt=null;break t}if(wt=Gi(wt.nextSibling),wt===null){wt=null;break t}}vt=wt.data,wt=vt==="F!"||vt==="F"?wt:null}if(wt){Gn=Gi(wt.nextSibling),gt=wt.data==="F!";break e}}nr(gt)}gt=!1}gt&&(st=ht[0])}}return ht=vi(),ht.memoizedState=ht.baseState=st,gt={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:st},ht.queue=gt,ht=gh.bind(null,vn,gt),gt.dispatch=ht,gt=gc(!1),vt=_c.bind(null,vn,!1,gt.queue),gt=vi(),wt={state:st,dispatch:null,action:tt,pending:null},gt.queue=wt,ht=Cg.bind(null,vn,wt,vt,ht),wt.dispatch=ht,gt.memoizedState=tt,[st,ht,!1]}function Xd(tt){var st=ti();return Qd(st,Ln,tt)}function Qd(tt,st,ht){if(st=fc(tt,st,Zd)[0],tt=va(ds)[0],typeof st=="object"&&st!==null&&typeof st.then=="function")try{var gt=Eo(st)}catch(Rt){throw Rt===xo?pa:Rt}else gt=st;st=ti();var wt=st.queue,vt=wt.dispatch;return ht!==st.memoizedState&&(vn.flags|=2048,Mr(9,Ca(),Eg.bind(null,wt,ht),null)),[gt,vt,tt]}function Eg(tt,st){tt.action=st}function Jd(tt){var st=ti(),ht=Ln;if(ht!==null)return Qd(st,ht,tt);ti(),st=st.memoizedState,ht=ti();var gt=ht.queue.dispatch;return ht.memoizedState=tt,[st,gt,!1]}function Mr(tt,st,ht,gt){return tt={tag:tt,create:ht,deps:gt,inst:st,next:null},st=vn.updateQueue,st===null&&(st=dc(),vn.updateQueue=st),ht=st.lastEffect,ht===null?st.lastEffect=tt.next=tt:(gt=ht.next,ht.next=tt,tt.next=gt,st.lastEffect=tt),tt}function Ca(){return{destroy:void 0,resource:void 0}}function eh(){return ti().memoizedState}function Ea(tt,st,ht,gt){var wt=vi();gt=gt===void 0?null:gt,vn.flags|=tt,wt.memoizedState=Mr(1|st,Ca(),ht,gt)}function To(tt,st,ht,gt){var wt=ti();gt=gt===void 0?null:gt;var vt=wt.memoizedState.inst;Ln!==null&&gt!==null&&oc(gt,Ln.memoizedState.deps)?wt.memoizedState=Mr(st,vt,ht,gt):(vn.flags|=tt,wt.memoizedState=Mr(1|st,vt,ht,gt))}function th(tt,st){Ea(8390656,8,tt,st)}function nh(tt,st){To(2048,8,tt,st)}function ih(tt,st){return To(4,2,tt,st)}function sh(tt,st){return To(4,4,tt,st)}function rh(tt,st){if(typeof st=="function"){tt=tt();var ht=st(tt);return function(){typeof ht=="function"?ht():st(null)}}if(st!=null)return tt=tt(),st.current=tt,function(){st.current=null}}function oh(tt,st,ht){ht=ht!=null?ht.concat([tt]):null,To(4,4,rh.bind(null,st,tt),ht)}function bc(){}function ah(tt,st){var ht=ti();st=st===void 0?null:st;var gt=ht.memoizedState;return st!==null&&oc(st,gt[1])?gt[0]:(ht.memoizedState=[tt,st],tt)}function lh(tt,st){var ht=ti();st=st===void 0?null:st;var gt=ht.memoizedState;if(st!==null&&oc(st,gt[1]))return gt[0];if(gt=tt(),or){xi(!0);try{tt()}finally{xi(!1)}}return ht.memoizedState=[gt,st],gt}function xc(tt,st,ht){return ht===void 0||(Rs&1073741824)!==0?tt.memoizedState=st:(tt.memoizedState=ht,tt=hf(),vn.lanes|=tt,Vs|=tt,ht)}function ch(tt,st,ht,gt){return ki(ht,st)?ht:Pr.current!==null?(tt=xc(tt,ht,gt),ki(tt,st)||(ai=!0),tt):(Rs&42)===0?(ai=!0,tt.memoizedState=ht):(tt=hf(),vn.lanes|=tt,Vs|=tt,st)}function uh(tt,st,ht,gt,wt){var vt=jt.p;jt.p=vt!==0&&8>vt?vt:8;var Rt=Dt.T,Mt={};Dt.T=Mt,_c(tt,!1,st,ht);try{var Ft=wt(),Yt=Dt.S;if(Yt!==null&&Yt(Mt,Ft),Ft!==null&&typeof Ft=="object"&&typeof Ft.then=="function"){var nn=yg(Ft,gt);ko(tt,st,nn,Pi(tt))}else ko(tt,st,gt,Pi(tt))}catch(rn){ko(tt,st,{then:function(){},status:"rejected",reason:rn},Pi())}finally{jt.p=vt,Dt.T=Rt}}function Tg(){}function wc(tt,st,ht,gt){if(tt.tag!==5)throw Error(N(476));var wt=dh(tt).queue;uh(tt,wt,st,en,ht===null?Tg:function(){return hh(tt),ht(gt)})}function dh(tt){var st=tt.memoizedState;if(st!==null)return st;st={memoizedState:en,baseState:en,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:en},next:null};var ht={};return st.next={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:ht},next:null},tt.memoizedState=st,tt=tt.alternate,tt!==null&&(tt.memoizedState=st),st}function hh(tt){var st=dh(tt).next.queue;ko(tt,st,{},Pi())}function yc(){return bi(Wo)}function fh(){return ti().memoizedState}function mh(){return ti().memoizedState}function kg(tt){for(var st=tt.return;st!==null;){switch(st.tag){case 24:case 3:var ht=Pi();tt=Ss(ht);var gt=As(st,tt,ht);gt!==null&&(Oi(gt,st,ht),yo(gt,st,ht)),st={cache:Yl()},tt.payload=st;return}st=st.return}}function Sg(tt,st,ht){var gt=Pi();ht={lane:gt,revertLane:0,action:ht,hasEagerState:!1,eagerState:null,next:null},Ta(tt)?ph(st,ht):(ht=$l(tt,st,ht,gt),ht!==null&&(Oi(ht,tt,gt),bh(ht,st,gt)))}function gh(tt,st,ht){var gt=Pi();ko(tt,st,ht,gt)}function ko(tt,st,ht,gt){var wt={lane:gt,revertLane:0,action:ht,hasEagerState:!1,eagerState:null,next:null};if(Ta(tt))ph(st,wt);else{var vt=tt.alternate;if(tt.lanes===0&&(vt===null||vt.lanes===0)&&(vt=st.lastRenderedReducer,vt!==null))try{var Rt=st.lastRenderedState,Mt=vt(Rt,ht);if(wt.hasEagerState=!0,wt.eagerState=Mt,ki(Mt,Rt))return la(tt,st,wt,0),Un===null&&aa(),!1}catch{}finally{}if(ht=$l(tt,st,wt,gt),ht!==null)return Oi(ht,tt,gt),bh(ht,st,gt),!0}return!1}function _c(tt,st,ht,gt){if(gt={lane:2,revertLane:Jc(),action:gt,hasEagerState:!1,eagerState:null,next:null},Ta(tt)){if(st)throw Error(N(479))}else st=$l(tt,ht,gt,2),st!==null&&Oi(st,tt,2)}function Ta(tt){var st=tt.alternate;return tt===vn||st!==null&&st===vn}function ph(tt,st){Or=wa=!0;var ht=tt.pending;ht===null?st.next=st:(st.next=ht.next,ht.next=st),tt.pending=st}function bh(tt,st,ht){if((ht&4194048)!==0){var gt=st.lanes;gt&=tt.pendingLanes,ht|=gt,st.lanes=ht,Tu(tt,ht)}}var ka={readContext:bi,use:_a,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn},xh={readContext:bi,use:_a,useCallback:function(tt,st){return vi().memoizedState=[tt,st===void 0?null:st],tt},useContext:bi,useEffect:th,useImperativeHandle:function(tt,st,ht){ht=ht!=null?ht.concat([tt]):null,Ea(4194308,4,rh.bind(null,st,tt),ht)},useLayoutEffect:function(tt,st){return Ea(4194308,4,tt,st)},useInsertionEffect:function(tt,st){Ea(4,2,tt,st)},useMemo:function(tt,st){var ht=vi();st=st===void 0?null:st;var gt=tt();if(or){xi(!0);try{tt()}finally{xi(!1)}}return ht.memoizedState=[gt,st],gt},useReducer:function(tt,st,ht){var gt=vi();if(ht!==void 0){var wt=ht(st);if(or){xi(!0);try{ht(st)}finally{xi(!1)}}}else wt=st;return gt.memoizedState=gt.baseState=wt,tt={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:wt},gt.queue=tt,tt=tt.dispatch=Sg.bind(null,vn,tt),[gt.memoizedState,tt]},useRef:function(tt){var st=vi();return tt={current:tt},st.memoizedState=tt},useState:function(tt){tt=gc(tt);var st=tt.queue,ht=gh.bind(null,vn,st);return st.dispatch=ht,[tt.memoizedState,ht]},useDebugValue:bc,useDeferredValue:function(tt,st){var ht=vi();return xc(ht,tt,st)},useTransition:function(){var tt=gc(!1);return tt=uh.bind(null,vn,tt.queue,!0,!1),vi().memoizedState=tt,[!1,tt]},useSyncExternalStore:function(tt,st,ht){var gt=vn,wt=vi();if(Pn){if(ht===void 0)throw Error(N(407));ht=ht()}else{if(ht=st(),Un===null)throw Error(N(349));(Sn&124)!==0||Fd(gt,st,ht)}wt.memoizedState=ht;var vt={value:ht,getSnapshot:st};return wt.queue=vt,th(Ud.bind(null,gt,vt,tt),[tt]),gt.flags|=2048,Mr(9,Ca(),$d.bind(null,gt,vt,ht,st),null),ht},useId:function(){var tt=vi(),st=Un.identifierPrefix;if(Pn){var ht=ls,gt=as;ht=(gt&~(1<<32-Jn(gt)-1)).toString(32)+ht,st=""+st+"R"+ht,ht=ya++,0<ht&&(st+="H"+ht.toString(32)),st+=""}else ht=_g++,st=""+st+"r"+ht.toString(32)+"";return tt.memoizedState=st},useHostTransitionStatus:yc,useFormState:Yd,useActionState:Yd,useOptimistic:function(tt){var st=vi();st.memoizedState=st.baseState=tt;var ht={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return st.queue=ht,st=_c.bind(null,vn,!0,ht),ht.dispatch=st,[tt,st]},useMemoCache:hc,useCacheRefresh:function(){return vi().memoizedState=kg.bind(null,vn)}},wh={readContext:bi,use:_a,useCallback:ah,useContext:bi,useEffect:nh,useImperativeHandle:oh,useInsertionEffect:ih,useLayoutEffect:sh,useMemo:lh,useReducer:va,useRef:eh,useState:function(){return va(ds)},useDebugValue:bc,useDeferredValue:function(tt,st){var ht=ti();return ch(ht,Ln.memoizedState,tt,st)},useTransition:function(){var tt=va(ds)[0],st=ti().memoizedState;return[typeof tt=="boolean"?tt:Eo(tt),st]},useSyncExternalStore:Dd,useId:fh,useHostTransitionStatus:yc,useFormState:Xd,useActionState:Xd,useOptimistic:function(tt,st){var ht=ti();return Wd(ht,Ln,tt,st)},useMemoCache:hc,useCacheRefresh:mh},Ag={readContext:bi,use:_a,useCallback:ah,useContext:bi,useEffect:nh,useImperativeHandle:oh,useInsertionEffect:ih,useLayoutEffect:sh,useMemo:lh,useReducer:mc,useRef:eh,useState:function(){return mc(ds)},useDebugValue:bc,useDeferredValue:function(tt,st){var ht=ti();return Ln===null?xc(ht,tt,st):ch(ht,Ln.memoizedState,tt,st)},useTransition:function(){var tt=mc(ds)[0],st=ti().memoizedState;return[typeof tt=="boolean"?tt:Eo(tt),st]},useSyncExternalStore:Dd,useId:fh,useHostTransitionStatus:yc,useFormState:Jd,useActionState:Jd,useOptimistic:function(tt,st){var ht=ti();return Ln!==null?Wd(ht,Ln,tt,st):(ht.baseState=tt,[tt,ht.queue.dispatch])},useMemoCache:hc,useCacheRefresh:mh},Lr=null,So=0;function Sa(tt){var st=So;return So+=1,Lr===null&&(Lr=[]),Id(Lr,tt,st)}function Ao(tt,st){st=st.props.ref,tt.ref=st!==void 0?st:null}function Aa(tt,st){throw st.$$typeof===mt?Error(N(525)):(tt=Object.prototype.toString.call(st),Error(N(31,tt==="[object Object]"?"object with keys {"+Object.keys(st).join(", ")+"}":tt)))}function yh(tt){var st=tt._init;return st(tt._payload)}function _h(tt){function st(Wt,Ht){if(tt){var Gt=Wt.deletions;Gt===null?(Wt.deletions=[Ht],Wt.flags|=16):Gt.push(Ht)}}function ht(Wt,Ht){if(!tt)return null;for(;Ht!==null;)st(Wt,Ht),Ht=Ht.sibling;return null}function gt(Wt){for(var Ht=new Map;Wt!==null;)Wt.key!==null?Ht.set(Wt.key,Wt):Ht.set(Wt.index,Wt),Wt=Wt.sibling;return Ht}function wt(Wt,Ht){return Wt=os(Wt,Ht),Wt.index=0,Wt.sibling=null,Wt}function vt(Wt,Ht,Gt){return Wt.index=Gt,tt?(Gt=Wt.alternate,Gt!==null?(Gt=Gt.index,Gt<Ht?(Wt.flags|=67108866,Ht):Gt):(Wt.flags|=67108866,Ht)):(Wt.flags|=1048576,Ht)}function Rt(Wt){return tt&&Wt.alternate===null&&(Wt.flags|=67108866),Wt}function Mt(Wt,Ht,Gt,sn){return Ht===null||Ht.tag!==6?(Ht=zl(Gt,Wt.mode,sn),Ht.return=Wt,Ht):(Ht=wt(Ht,Gt),Ht.return=Wt,Ht)}function Ft(Wt,Ht,Gt,sn){var dn=Gt.type;return dn===_t?nn(Wt,Ht,Gt.props.children,sn,Gt.key):Ht!==null&&(Ht.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===Et&&yh(dn)===Ht.type)?(Ht=wt(Ht,Gt.props),Ao(Ht,Gt),Ht.return=Wt,Ht):(Ht=ua(Gt.type,Gt.key,Gt.props,null,Wt.mode,sn),Ao(Ht,Gt),Ht.return=Wt,Ht)}function Yt(Wt,Ht,Gt,sn){return Ht===null||Ht.tag!==4||Ht.stateNode.containerInfo!==Gt.containerInfo||Ht.stateNode.implementation!==Gt.implementation?(Ht=Hl(Gt,Wt.mode,sn),Ht.return=Wt,Ht):(Ht=wt(Ht,Gt.children||[]),Ht.return=Wt,Ht)}function nn(Wt,Ht,Gt,sn,dn){return Ht===null||Ht.tag!==7?(Ht=Qs(Gt,Wt.mode,sn,dn),Ht.return=Wt,Ht):(Ht=wt(Ht,Gt),Ht.return=Wt,Ht)}function rn(Wt,Ht,Gt){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return Ht=zl(""+Ht,Wt.mode,Gt),Ht.return=Wt,Ht;if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case bt:return Gt=ua(Ht.type,Ht.key,Ht.props,null,Wt.mode,Gt),Ao(Gt,Ht),Gt.return=Wt,Gt;case yt:return Ht=Hl(Ht,Wt.mode,Gt),Ht.return=Wt,Ht;case Et:var sn=Ht._init;return Ht=sn(Ht._payload),rn(Wt,Ht,Gt)}if(Zt(Ht)||zt(Ht))return Ht=Qs(Ht,Wt.mode,Gt,null),Ht.return=Wt,Ht;if(typeof Ht.then=="function")return rn(Wt,Sa(Ht),Gt);if(Ht.$$typeof===Pt)return rn(Wt,ma(Wt,Ht),Gt);Aa(Wt,Ht)}return null}function Xt(Wt,Ht,Gt,sn){var dn=Ht!==null?Ht.key:null;if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return dn!==null?null:Mt(Wt,Ht,""+Gt,sn);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case bt:return Gt.key===dn?Ft(Wt,Ht,Gt,sn):null;case yt:return Gt.key===dn?Yt(Wt,Ht,Gt,sn):null;case Et:return dn=Gt._init,Gt=dn(Gt._payload),Xt(Wt,Ht,Gt,sn)}if(Zt(Gt)||zt(Gt))return dn!==null?null:nn(Wt,Ht,Gt,sn,null);if(typeof Gt.then=="function")return Xt(Wt,Ht,Sa(Gt),sn);if(Gt.$$typeof===Pt)return Xt(Wt,Ht,ma(Wt,Gt),sn);Aa(Wt,Gt)}return null}function Qt(Wt,Ht,Gt,sn,dn){if(typeof sn=="string"&&sn!==""||typeof sn=="number"||typeof sn=="bigint")return Wt=Wt.get(Gt)||null,Mt(Ht,Wt,""+sn,dn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case bt:return Wt=Wt.get(sn.key===null?Gt:sn.key)||null,Ft(Ht,Wt,sn,dn);case yt:return Wt=Wt.get(sn.key===null?Gt:sn.key)||null,Yt(Ht,Wt,sn,dn);case Et:var Cn=sn._init;return sn=Cn(sn._payload),Qt(Wt,Ht,Gt,sn,dn)}if(Zt(sn)||zt(sn))return Wt=Wt.get(Gt)||null,nn(Ht,Wt,sn,dn,null);if(typeof sn.then=="function")return Qt(Wt,Ht,Gt,Sa(sn),dn);if(sn.$$typeof===Pt)return Qt(Wt,Ht,Gt,ma(Ht,sn),dn);Aa(Ht,sn)}return null}function bn(Wt,Ht,Gt,sn){for(var dn=null,Cn=null,hn=Ht,pn=Ht=0,ci=null;hn!==null&&pn<Gt.length;pn++){hn.index>pn?(ci=hn,hn=null):ci=hn.sibling;var In=Xt(Wt,hn,Gt[pn],sn);if(In===null){hn===null&&(hn=ci);break}tt&&hn&&In.alternate===null&&st(Wt,hn),Ht=vt(In,Ht,pn),Cn===null?dn=In:Cn.sibling=In,Cn=In,hn=ci}if(pn===Gt.length)return ht(Wt,hn),Pn&&er(Wt,pn),dn;if(hn===null){for(;pn<Gt.length;pn++)hn=rn(Wt,Gt[pn],sn),hn!==null&&(Ht=vt(hn,Ht,pn),Cn===null?dn=hn:Cn.sibling=hn,Cn=hn);return Pn&&er(Wt,pn),dn}for(hn=gt(hn);pn<Gt.length;pn++)ci=Qt(hn,Wt,pn,Gt[pn],sn),ci!==null&&(tt&&ci.alternate!==null&&hn.delete(ci.key===null?pn:ci.key),Ht=vt(ci,Ht,pn),Cn===null?dn=ci:Cn.sibling=ci,Cn=ci);return tt&&hn.forEach(function(js){return st(Wt,js)}),Pn&&er(Wt,pn),dn}function mn(Wt,Ht,Gt,sn){if(Gt==null)throw Error(N(151));for(var dn=null,Cn=null,hn=Ht,pn=Ht=0,ci=null,In=Gt.next();hn!==null&&!In.done;pn++,In=Gt.next()){hn.index>pn?(ci=hn,hn=null):ci=hn.sibling;var js=Xt(Wt,hn,In.value,sn);if(js===null){hn===null&&(hn=ci);break}tt&&hn&&js.alternate===null&&st(Wt,hn),Ht=vt(js,Ht,pn),Cn===null?dn=js:Cn.sibling=js,Cn=js,hn=ci}if(In.done)return ht(Wt,hn),Pn&&er(Wt,pn),dn;if(hn===null){for(;!In.done;pn++,In=Gt.next())In=rn(Wt,In.value,sn),In!==null&&(Ht=vt(In,Ht,pn),Cn===null?dn=In:Cn.sibling=In,Cn=In);return Pn&&er(Wt,pn),dn}for(hn=gt(hn);!In.done;pn++,In=Gt.next())In=Qt(hn,Wt,pn,In.value,sn),In!==null&&(tt&&In.alternate!==null&&hn.delete(In.key===null?pn:In.key),Ht=vt(In,Ht,pn),Cn===null?dn=In:Cn.sibling=In,Cn=In);return tt&&hn.forEach(function(Rp){return st(Wt,Rp)}),Pn&&er(Wt,pn),dn}function Nn(Wt,Ht,Gt,sn){if(typeof Gt=="object"&&Gt!==null&&Gt.type===_t&&Gt.key===null&&(Gt=Gt.props.children),typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case bt:e:{for(var dn=Gt.key;Ht!==null;){if(Ht.key===dn){if(dn=Gt.type,dn===_t){if(Ht.tag===7){ht(Wt,Ht.sibling),sn=wt(Ht,Gt.props.children),sn.return=Wt,Wt=sn;break e}}else if(Ht.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===Et&&yh(dn)===Ht.type){ht(Wt,Ht.sibling),sn=wt(Ht,Gt.props),Ao(sn,Gt),sn.return=Wt,Wt=sn;break e}ht(Wt,Ht);break}else st(Wt,Ht);Ht=Ht.sibling}Gt.type===_t?(sn=Qs(Gt.props.children,Wt.mode,sn,Gt.key),sn.return=Wt,Wt=sn):(sn=ua(Gt.type,Gt.key,Gt.props,null,Wt.mode,sn),Ao(sn,Gt),sn.return=Wt,Wt=sn)}return Rt(Wt);case yt:e:{for(dn=Gt.key;Ht!==null;){if(Ht.key===dn)if(Ht.tag===4&&Ht.stateNode.containerInfo===Gt.containerInfo&&Ht.stateNode.implementation===Gt.implementation){ht(Wt,Ht.sibling),sn=wt(Ht,Gt.children||[]),sn.return=Wt,Wt=sn;break e}else{ht(Wt,Ht);break}else st(Wt,Ht);Ht=Ht.sibling}sn=Hl(Gt,Wt.mode,sn),sn.return=Wt,Wt=sn}return Rt(Wt);case Et:return dn=Gt._init,Gt=dn(Gt._payload),Nn(Wt,Ht,Gt,sn)}if(Zt(Gt))return bn(Wt,Ht,Gt,sn);if(zt(Gt)){if(dn=zt(Gt),typeof dn!="function")throw Error(N(150));return Gt=dn.call(Gt),mn(Wt,Ht,Gt,sn)}if(typeof Gt.then=="function")return Nn(Wt,Ht,Sa(Gt),sn);if(Gt.$$typeof===Pt)return Nn(Wt,Ht,ma(Wt,Gt),sn);Aa(Wt,Gt)}return typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint"?(Gt=""+Gt,Ht!==null&&Ht.tag===6?(ht(Wt,Ht.sibling),sn=wt(Ht,Gt),sn.return=Wt,Wt=sn):(ht(Wt,Ht),sn=zl(Gt,Wt.mode,sn),sn.return=Wt,Wt=sn),Rt(Wt)):ht(Wt,Ht)}return function(Wt,Ht,Gt,sn){try{So=0;var dn=Nn(Wt,Ht,Gt,sn);return Lr=null,dn}catch(hn){if(hn===xo||hn===pa)throw hn;var Cn=Si(29,hn,null,Wt.mode);return Cn.lanes=sn,Cn.return=Wt,Cn}finally{}}}var Vr=_h(!0),vh=_h(!1),$i=Jt(null),Qi=null;function Is(tt){var st=tt.alternate;tn(si,si.current&1),tn($i,tt),Qi===null&&(st===null||Pr.current!==null||st.memoizedState!==null)&&(Qi=tt)}function Ch(tt){if(tt.tag===22){if(tn(si,si.current),tn($i,tt),Qi===null){var st=tt.alternate;st!==null&&st.memoizedState!==null&&(Qi=tt)}}else Ps()}function Ps(){tn(si,si.current),tn($i,$i.current)}function hs(tt){ln($i),Qi===tt&&(Qi=null),ln(si)}var si=Jt(0);function Ra(tt){for(var st=tt;st!==null;){if(st.tag===13){var ht=st.memoizedState;if(ht!==null&&(ht=ht.dehydrated,ht===null||ht.data==="$?"||du(ht)))return st}else if(st.tag===19&&st.memoizedProps.revealOrder!==void 0){if((st.flags&128)!==0)return st}else if(st.child!==null){st.child.return=st,st=st.child;continue}if(st===tt)break;for(;st.sibling===null;){if(st.return===null||st.return===tt)return null;st=st.return}st.sibling.return=st.return,st=st.sibling}return null}function vc(tt,st,ht,gt){st=tt.memoizedState,ht=ht(gt,st),ht=ht==null?st:ft({},st,ht),tt.memoizedState=ht,tt.lanes===0&&(tt.updateQueue.baseState=ht)}var Cc={enqueueSetState:function(tt,st,ht){tt=tt._reactInternals;var gt=Pi(),wt=Ss(gt);wt.payload=st,ht!=null&&(wt.callback=ht),st=As(tt,wt,gt),st!==null&&(Oi(st,tt,gt),yo(st,tt,gt))},enqueueReplaceState:function(tt,st,ht){tt=tt._reactInternals;var gt=Pi(),wt=Ss(gt);wt.tag=1,wt.payload=st,ht!=null&&(wt.callback=ht),st=As(tt,wt,gt),st!==null&&(Oi(st,tt,gt),yo(st,tt,gt))},enqueueForceUpdate:function(tt,st){tt=tt._reactInternals;var ht=Pi(),gt=Ss(ht);gt.tag=2,st!=null&&(gt.callback=st),st=As(tt,gt,ht),st!==null&&(Oi(st,tt,ht),yo(st,tt,ht))}};function Eh(tt,st,ht,gt,wt,vt,Rt){return tt=tt.stateNode,typeof tt.shouldComponentUpdate=="function"?tt.shouldComponentUpdate(gt,vt,Rt):st.prototype&&st.prototype.isPureReactComponent?!co(ht,gt)||!co(wt,vt):!0}function Th(tt,st,ht,gt){tt=st.state,typeof st.componentWillReceiveProps=="function"&&st.componentWillReceiveProps(ht,gt),typeof st.UNSAFE_componentWillReceiveProps=="function"&&st.UNSAFE_componentWillReceiveProps(ht,gt),st.state!==tt&&Cc.enqueueReplaceState(st,st.state,null)}function ar(tt,st){var ht=st;if("ref"in st){ht={};for(var gt in st)gt!=="ref"&&(ht[gt]=st[gt])}if(tt=tt.defaultProps){ht===st&&(ht=ft({},ht));for(var wt in tt)ht[wt]===void 0&&(ht[wt]=tt[wt])}return ht}var Ia=typeof reportError=="function"?reportError:function(tt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof tt=="object"&&tt!==null&&typeof tt.message=="string"?String(tt.message):String(tt),error:tt});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",tt);return}console.error(tt)};function kh(tt){Ia(tt)}function Sh(tt){console.error(tt)}function Ah(tt){Ia(tt)}function Pa(tt,st){try{var ht=tt.onUncaughtError;ht(st.value,{componentStack:st.stack})}catch(gt){setTimeout(function(){throw gt})}}function Rh(tt,st,ht){try{var gt=tt.onCaughtError;gt(ht.value,{componentStack:ht.stack,errorBoundary:st.tag===1?st.stateNode:null})}catch(wt){setTimeout(function(){throw wt})}}function Ec(tt,st,ht){return ht=Ss(ht),ht.tag=3,ht.payload={element:null},ht.callback=function(){Pa(tt,st)},ht}function Ih(tt){return tt=Ss(tt),tt.tag=3,tt}function Ph(tt,st,ht,gt){var wt=ht.type.getDerivedStateFromError;if(typeof wt=="function"){var vt=gt.value;tt.payload=function(){return wt(vt)},tt.callback=function(){Rh(st,ht,gt)}}var Rt=ht.stateNode;Rt!==null&&typeof Rt.componentDidCatch=="function"&&(tt.callback=function(){Rh(st,ht,gt),typeof wt!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var Mt=gt.stack;this.componentDidCatch(gt.value,{componentStack:Mt!==null?Mt:""})})}function Rg(tt,st,ht,gt,wt){if(ht.flags|=32768,gt!==null&&typeof gt=="object"&&typeof gt.then=="function"){if(st=ht.alternate,st!==null&&go(st,ht,wt,!0),ht=$i.current,ht!==null){switch(ht.tag){case 13:return Qi===null?Gc():ht.alternate===null&&Zn===0&&(Zn=3),ht.flags&=-257,ht.flags|=65536,ht.lanes=wt,gt===Jl?ht.flags|=16384:(st=ht.updateQueue,st===null?ht.updateQueue=new Set([gt]):st.add(gt),Yc(tt,gt,wt)),!1;case 22:return ht.flags|=65536,gt===Jl?ht.flags|=16384:(st=ht.updateQueue,st===null?(st={transitions:null,markerInstances:null,retryQueue:new Set([gt])},ht.updateQueue=st):(ht=st.retryQueue,ht===null?st.retryQueue=new Set([gt]):ht.add(gt)),Yc(tt,gt,wt)),!1}throw Error(N(435,ht.tag))}return Yc(tt,gt,wt),Gc(),!1}if(Pn)return st=$i.current,st!==null?((st.flags&65536)===0&&(st.flags|=256),st.flags|=65536,st.lanes=wt,gt!==ql&&(tt=Error(N(422),{cause:gt}),mo(Vi(tt,ht)))):(gt!==ql&&(st=Error(N(423),{cause:gt}),mo(Vi(st,ht))),tt=tt.current.alternate,tt.flags|=65536,wt&=-wt,tt.lanes|=wt,gt=Vi(gt,ht),wt=Ec(tt.stateNode,gt,wt),nc(tt,wt),Zn!==4&&(Zn=2)),!1;var vt=Error(N(520),{cause:gt});if(vt=Vi(vt,ht),Lo===null?Lo=[vt]:Lo.push(vt),Zn!==4&&(Zn=2),st===null)return!0;gt=Vi(gt,ht),ht=st;do{switch(ht.tag){case 3:return ht.flags|=65536,tt=wt&-wt,ht.lanes|=tt,tt=Ec(ht.stateNode,gt,tt),nc(ht,tt),!1;case 1:if(st=ht.type,vt=ht.stateNode,(ht.flags&128)===0&&(typeof st.getDerivedStateFromError=="function"||vt!==null&&typeof vt.componentDidCatch=="function"&&(Ns===null||!Ns.has(vt))))return ht.flags|=65536,wt&=-wt,ht.lanes|=wt,wt=Ih(wt),Ph(wt,tt,ht,gt),nc(ht,wt),!1}ht=ht.return}while(ht!==null);return!1}var Oh=Error(N(461)),ai=!1;function di(tt,st,ht,gt){st.child=tt===null?vh(st,null,ht,gt):Vr(st,tt.child,ht,gt)}function Bh(tt,st,ht,gt,wt){ht=ht.render;var vt=st.ref;if("ref"in gt){var Rt={};for(var Mt in gt)Mt!=="ref"&&(Rt[Mt]=gt[Mt])}else Rt=gt;return sr(st),gt=ac(tt,st,ht,Rt,vt,wt),Mt=lc(),tt!==null&&!ai?(cc(tt,st,wt),fs(tt,st,wt)):(Pn&&Mt&&Wl(st),st.flags|=1,di(tt,st,gt,wt),st.child)}function Mh(tt,st,ht,gt,wt){if(tt===null){var vt=ht.type;return typeof vt=="function"&&!Ul(vt)&&vt.defaultProps===void 0&&ht.compare===null?(st.tag=15,st.type=vt,Lh(tt,st,vt,gt,wt)):(tt=ua(ht.type,null,gt,st,st.mode,wt),tt.ref=st.ref,tt.return=st,st.child=tt)}if(vt=tt.child,!Oc(tt,wt)){var Rt=vt.memoizedProps;if(ht=ht.compare,ht=ht!==null?ht:co,ht(Rt,gt)&&tt.ref===st.ref)return fs(tt,st,wt)}return st.flags|=1,tt=os(vt,gt),tt.ref=st.ref,tt.return=st,st.child=tt}function Lh(tt,st,ht,gt,wt){if(tt!==null){var vt=tt.memoizedProps;if(co(vt,gt)&&tt.ref===st.ref)if(ai=!1,st.pendingProps=gt=vt,Oc(tt,wt))(tt.flags&131072)!==0&&(ai=!0);else return st.lanes=tt.lanes,fs(tt,st,wt)}return Tc(tt,st,ht,gt,wt)}function Vh(tt,st,ht){var gt=st.pendingProps,wt=gt.children,vt=tt!==null?tt.memoizedState:null;if(gt.mode==="hidden"){if((st.flags&128)!==0){if(gt=vt!==null?vt.baseLanes|ht:ht,tt!==null){for(wt=st.child=tt.child,vt=0;wt!==null;)vt=vt|wt.lanes|wt.childLanes,wt=wt.sibling;st.childLanes=vt&~gt}else st.childLanes=0,st.child=null;return Nh(tt,st,gt,ht)}if((ht&536870912)!==0)st.memoizedState={baseLanes:0,cachePool:null},tt!==null&&ga(st,vt!==null?vt.cachePool:null),vt!==null?Ld(st,vt):sc(),Ch(st);else return st.lanes=st.childLanes=536870912,Nh(tt,st,vt!==null?vt.baseLanes|ht:ht,ht)}else vt!==null?(ga(st,vt.cachePool),Ld(st,vt),Ps(),st.memoizedState=null):(tt!==null&&ga(st,null),sc(),Ps());return di(tt,st,wt,ht),st.child}function Nh(tt,st,ht,gt){var wt=Ql();return wt=wt===null?null:{parent:ii._currentValue,pool:wt},st.memoizedState={baseLanes:ht,cachePool:wt},tt!==null&&ga(st,null),sc(),Ch(st),tt!==null&&go(tt,st,gt,!0),null}function Oa(tt,st){var ht=st.ref;if(ht===null)tt!==null&&tt.ref!==null&&(st.flags|=4194816);else{if(typeof ht!="function"&&typeof ht!="object")throw Error(N(284));(tt===null||tt.ref!==ht)&&(st.flags|=4194816)}}function Tc(tt,st,ht,gt,wt){return sr(st),ht=ac(tt,st,ht,gt,void 0,wt),gt=lc(),tt!==null&&!ai?(cc(tt,st,wt),fs(tt,st,wt)):(Pn&&gt&&Wl(st),st.flags|=1,di(tt,st,ht,wt),st.child)}function Dh(tt,st,ht,gt,wt,vt){return sr(st),st.updateQueue=null,ht=Nd(st,gt,ht,wt),Vd(tt),gt=lc(),tt!==null&&!ai?(cc(tt,st,vt),fs(tt,st,vt)):(Pn&&gt&&Wl(st),st.flags|=1,di(tt,st,ht,vt),st.child)}function Fh(tt,st,ht,gt,wt){if(sr(st),st.stateNode===null){var vt=kr,Rt=ht.contextType;typeof Rt=="object"&&Rt!==null&&(vt=bi(Rt)),vt=new ht(gt,vt),st.memoizedState=vt.state!==null&&vt.state!==void 0?vt.state:null,vt.updater=Cc,st.stateNode=vt,vt._reactInternals=st,vt=st.stateNode,vt.props=gt,vt.state=st.memoizedState,vt.refs={},ec(st),Rt=ht.contextType,vt.context=typeof Rt=="object"&&Rt!==null?bi(Rt):kr,vt.state=st.memoizedState,Rt=ht.getDerivedStateFromProps,typeof Rt=="function"&&(vc(st,ht,Rt,gt),vt.state=st.memoizedState),typeof ht.getDerivedStateFromProps=="function"||typeof vt.getSnapshotBeforeUpdate=="function"||typeof vt.UNSAFE_componentWillMount!="function"&&typeof vt.componentWillMount!="function"||(Rt=vt.state,typeof vt.componentWillMount=="function"&&vt.componentWillMount(),typeof vt.UNSAFE_componentWillMount=="function"&&vt.UNSAFE_componentWillMount(),Rt!==vt.state&&Cc.enqueueReplaceState(vt,vt.state,null),vo(st,gt,vt,wt),_o(),vt.state=st.memoizedState),typeof vt.componentDidMount=="function"&&(st.flags|=4194308),gt=!0}else if(tt===null){vt=st.stateNode;var Mt=st.memoizedProps,Ft=ar(ht,Mt);vt.props=Ft;var Yt=vt.context,nn=ht.contextType;Rt=kr,typeof nn=="object"&&nn!==null&&(Rt=bi(nn));var rn=ht.getDerivedStateFromProps;nn=typeof rn=="function"||typeof vt.getSnapshotBeforeUpdate=="function",Mt=st.pendingProps!==Mt,nn||typeof vt.UNSAFE_componentWillReceiveProps!="function"&&typeof vt.componentWillReceiveProps!="function"||(Mt||Yt!==Rt)&&Th(st,vt,gt,Rt),ks=!1;var Xt=st.memoizedState;vt.state=Xt,vo(st,gt,vt,wt),_o(),Yt=st.memoizedState,Mt||Xt!==Yt||ks?(typeof rn=="function"&&(vc(st,ht,rn,gt),Yt=st.memoizedState),(Ft=ks||Eh(st,ht,Ft,gt,Xt,Yt,Rt))?(nn||typeof vt.UNSAFE_componentWillMount!="function"&&typeof vt.componentWillMount!="function"||(typeof vt.componentWillMount=="function"&&vt.componentWillMount(),typeof vt.UNSAFE_componentWillMount=="function"&&vt.UNSAFE_componentWillMount()),typeof vt.componentDidMount=="function"&&(st.flags|=4194308)):(typeof vt.componentDidMount=="function"&&(st.flags|=4194308),st.memoizedProps=gt,st.memoizedState=Yt),vt.props=gt,vt.state=Yt,vt.context=Rt,gt=Ft):(typeof vt.componentDidMount=="function"&&(st.flags|=4194308),gt=!1)}else{vt=st.stateNode,tc(tt,st),Rt=st.memoizedProps,nn=ar(ht,Rt),vt.props=nn,rn=st.pendingProps,Xt=vt.context,Yt=ht.contextType,Ft=kr,typeof Yt=="object"&&Yt!==null&&(Ft=bi(Yt)),Mt=ht.getDerivedStateFromProps,(Yt=typeof Mt=="function"||typeof vt.getSnapshotBeforeUpdate=="function")||typeof vt.UNSAFE_componentWillReceiveProps!="function"&&typeof vt.componentWillReceiveProps!="function"||(Rt!==rn||Xt!==Ft)&&Th(st,vt,gt,Ft),ks=!1,Xt=st.memoizedState,vt.state=Xt,vo(st,gt,vt,wt),_o();var Qt=st.memoizedState;Rt!==rn||Xt!==Qt||ks||tt!==null&&tt.dependencies!==null&&fa(tt.dependencies)?(typeof Mt=="function"&&(vc(st,ht,Mt,gt),Qt=st.memoizedState),(nn=ks||Eh(st,ht,nn,gt,Xt,Qt,Ft)||tt!==null&&tt.dependencies!==null&&fa(tt.dependencies))?(Yt||typeof vt.UNSAFE_componentWillUpdate!="function"&&typeof vt.componentWillUpdate!="function"||(typeof vt.componentWillUpdate=="function"&&vt.componentWillUpdate(gt,Qt,Ft),typeof vt.UNSAFE_componentWillUpdate=="function"&&vt.UNSAFE_componentWillUpdate(gt,Qt,Ft)),typeof vt.componentDidUpdate=="function"&&(st.flags|=4),typeof vt.getSnapshotBeforeUpdate=="function"&&(st.flags|=1024)):(typeof vt.componentDidUpdate!="function"||Rt===tt.memoizedProps&&Xt===tt.memoizedState||(st.flags|=4),typeof vt.getSnapshotBeforeUpdate!="function"||Rt===tt.memoizedProps&&Xt===tt.memoizedState||(st.flags|=1024),st.memoizedProps=gt,st.memoizedState=Qt),vt.props=gt,vt.state=Qt,vt.context=Ft,gt=nn):(typeof vt.componentDidUpdate!="function"||Rt===tt.memoizedProps&&Xt===tt.memoizedState||(st.flags|=4),typeof vt.getSnapshotBeforeUpdate!="function"||Rt===tt.memoizedProps&&Xt===tt.memoizedState||(st.flags|=1024),gt=!1)}return vt=gt,Oa(tt,st),gt=(st.flags&128)!==0,vt||gt?(vt=st.stateNode,ht=gt&&typeof ht.getDerivedStateFromError!="function"?null:vt.render(),st.flags|=1,tt!==null&&gt?(st.child=Vr(st,tt.child,null,wt),st.child=Vr(st,null,ht,wt)):di(tt,st,ht,wt),st.memoizedState=vt.state,tt=st.child):tt=fs(tt,st,wt),tt}function $h(tt,st,ht,gt){return fo(),st.flags|=256,di(tt,st,ht,gt),st.child}var kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sc(tt){return{baseLanes:tt,cachePool:Sd()}}function Ac(tt,st,ht){return tt=tt!==null?tt.childLanes&~ht:0,st&&(tt|=Ui),tt}function Uh(tt,st,ht){var gt=st.pendingProps,wt=!1,vt=(st.flags&128)!==0,Rt;if((Rt=vt)||(Rt=tt!==null&&tt.memoizedState===null?!1:(si.current&2)!==0),Rt&&(wt=!0,st.flags&=-129),Rt=(st.flags&32)!==0,st.flags&=-33,tt===null){if(Pn){if(wt?Is(st):Ps(),Pn){var Mt=Gn,Ft;if(Ft=Mt){e:{for(Ft=Mt,Mt=Xi;Ft.nodeType!==8;){if(!Mt){Mt=null;break e}if(Ft=Gi(Ft.nextSibling),Ft===null){Mt=null;break e}}Mt=Ft}Mt!==null?(st.memoizedState={dehydrated:Mt,treeContext:Js!==null?{id:as,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},Ft=Si(18,null,null,0),Ft.stateNode=Mt,Ft.return=st,st.child=Ft,wi=st,Gn=null,Ft=!0):Ft=!1}Ft||nr(st)}if(Mt=st.memoizedState,Mt!==null&&(Mt=Mt.dehydrated,Mt!==null))return du(Mt)?st.lanes=32:st.lanes=536870912,null;hs(st)}return Mt=gt.children,gt=gt.fallback,wt?(Ps(),wt=st.mode,Mt=Ba({mode:"hidden",children:Mt},wt),gt=Qs(gt,wt,ht,null),Mt.return=st,gt.return=st,Mt.sibling=gt,st.child=Mt,wt=st.child,wt.memoizedState=Sc(ht),wt.childLanes=Ac(tt,Rt,ht),st.memoizedState=kc,gt):(Is(st),Rc(st,Mt))}if(Ft=tt.memoizedState,Ft!==null&&(Mt=Ft.dehydrated,Mt!==null)){if(vt)st.flags&256?(Is(st),st.flags&=-257,st=Ic(tt,st,ht)):st.memoizedState!==null?(Ps(),st.child=tt.child,st.flags|=128,st=null):(Ps(),wt=gt.fallback,Mt=st.mode,gt=Ba({mode:"visible",children:gt.children},Mt),wt=Qs(wt,Mt,ht,null),wt.flags|=2,gt.return=st,wt.return=st,gt.sibling=wt,st.child=gt,Vr(st,tt.child,null,ht),gt=st.child,gt.memoizedState=Sc(ht),gt.childLanes=Ac(tt,Rt,ht),st.memoizedState=kc,st=wt);else if(Is(st),du(Mt)){if(Rt=Mt.nextSibling&&Mt.nextSibling.dataset,Rt)var Yt=Rt.dgst;Rt=Yt,gt=Error(N(419)),gt.stack="",gt.digest=Rt,mo({value:gt,source:null,stack:null}),st=Ic(tt,st,ht)}else if(ai||go(tt,st,ht,!1),Rt=(ht&tt.childLanes)!==0,ai||Rt){if(Rt=Un,Rt!==null&&(gt=ht&-ht,gt=(gt&42)!==0?1:hl(gt),gt=(gt&(Rt.suspendedLanes|ht))!==0?0:gt,gt!==0&&gt!==Ft.retryLane))throw Ft.retryLane=gt,Tr(tt,gt),Oi(Rt,tt,gt),Oh;Mt.data==="$?"||Gc(),st=Ic(tt,st,ht)}else Mt.data==="$?"?(st.flags|=192,st.child=tt.child,st=null):(tt=Ft.treeContext,Gn=Gi(Mt.nextSibling),wi=st,Pn=!0,tr=null,Xi=!1,tt!==null&&(Di[Fi++]=as,Di[Fi++]=ls,Di[Fi++]=Js,as=tt.id,ls=tt.overflow,Js=st),st=Rc(st,gt.children),st.flags|=4096);return st}return wt?(Ps(),wt=gt.fallback,Mt=st.mode,Ft=tt.child,Yt=Ft.sibling,gt=os(Ft,{mode:"hidden",children:gt.children}),gt.subtreeFlags=Ft.subtreeFlags&65011712,Yt!==null?wt=os(Yt,wt):(wt=Qs(wt,Mt,ht,null),wt.flags|=2),wt.return=st,gt.return=st,gt.sibling=wt,st.child=gt,gt=wt,wt=st.child,Mt=tt.child.memoizedState,Mt===null?Mt=Sc(ht):(Ft=Mt.cachePool,Ft!==null?(Yt=ii._currentValue,Ft=Ft.parent!==Yt?{parent:Yt,pool:Yt}:Ft):Ft=Sd(),Mt={baseLanes:Mt.baseLanes|ht,cachePool:Ft}),wt.memoizedState=Mt,wt.childLanes=Ac(tt,Rt,ht),st.memoizedState=kc,gt):(Is(st),ht=tt.child,tt=ht.sibling,ht=os(ht,{mode:"visible",children:gt.children}),ht.return=st,ht.sibling=null,tt!==null&&(Rt=st.deletions,Rt===null?(st.deletions=[tt],st.flags|=16):Rt.push(tt)),st.child=ht,st.memoizedState=null,ht)}function Rc(tt,st){return st=Ba({mode:"visible",children:st},tt.mode),st.return=tt,tt.child=st}function Ba(tt,st){return tt=Si(22,tt,null,st),tt.lanes=0,tt.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},tt}function Ic(tt,st,ht){return Vr(st,tt.child,null,ht),tt=Rc(st,st.pendingProps.children),tt.flags|=2,st.memoizedState=null,tt}function zh(tt,st,ht){tt.lanes|=st;var gt=tt.alternate;gt!==null&&(gt.lanes|=st),Gl(tt.return,st,ht)}function Pc(tt,st,ht,gt,wt){var vt=tt.memoizedState;vt===null?tt.memoizedState={isBackwards:st,rendering:null,renderingStartTime:0,last:gt,tail:ht,tailMode:wt}:(vt.isBackwards=st,vt.rendering=null,vt.renderingStartTime=0,vt.last=gt,vt.tail=ht,vt.tailMode=wt)}function Hh(tt,st,ht){var gt=st.pendingProps,wt=gt.revealOrder,vt=gt.tail;if(di(tt,st,gt.children,ht),gt=si.current,(gt&2)!==0)gt=gt&1|2,st.flags|=128;else{if(tt!==null&&(tt.flags&128)!==0)e:for(tt=st.child;tt!==null;){if(tt.tag===13)tt.memoizedState!==null&&zh(tt,ht,st);else if(tt.tag===19)zh(tt,ht,st);else if(tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===st)break e;for(;tt.sibling===null;){if(tt.return===null||tt.return===st)break e;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}gt&=1}switch(tn(si,gt),wt){case"forwards":for(ht=st.child,wt=null;ht!==null;)tt=ht.alternate,tt!==null&&Ra(tt)===null&&(wt=ht),ht=ht.sibling;ht=wt,ht===null?(wt=st.child,st.child=null):(wt=ht.sibling,ht.sibling=null),Pc(st,!1,wt,ht,vt);break;case"backwards":for(ht=null,wt=st.child,st.child=null;wt!==null;){if(tt=wt.alternate,tt!==null&&Ra(tt)===null){st.child=wt;break}tt=wt.sibling,wt.sibling=ht,ht=wt,wt=tt}Pc(st,!0,ht,null,vt);break;case"together":Pc(st,!1,null,null,void 0);break;default:st.memoizedState=null}return st.child}function fs(tt,st,ht){if(tt!==null&&(st.dependencies=tt.dependencies),Vs|=st.lanes,(ht&st.childLanes)===0)if(tt!==null){if(go(tt,st,ht,!1),(ht&st.childLanes)===0)return null}else return null;if(tt!==null&&st.child!==tt.child)throw Error(N(153));if(st.child!==null){for(tt=st.child,ht=os(tt,tt.pendingProps),st.child=ht,ht.return=st;tt.sibling!==null;)tt=tt.sibling,ht=ht.sibling=os(tt,tt.pendingProps),ht.return=st;ht.sibling=null}return st.child}function Oc(tt,st){return(tt.lanes&st)!==0?!0:(tt=tt.dependencies,!!(tt!==null&&fa(tt)))}function Ig(tt,st,ht){switch(st.tag){case 3:yn(st,st.stateNode.containerInfo),Ts(st,ii,tt.memoizedState.cache),fo();break;case 27:case 5:wn(st);break;case 4:yn(st,st.stateNode.containerInfo);break;case 10:Ts(st,st.type,st.memoizedProps.value);break;case 13:var gt=st.memoizedState;if(gt!==null)return gt.dehydrated!==null?(Is(st),st.flags|=128,null):(ht&st.child.childLanes)!==0?Uh(tt,st,ht):(Is(st),tt=fs(tt,st,ht),tt!==null?tt.sibling:null);Is(st);break;case 19:var wt=(tt.flags&128)!==0;if(gt=(ht&st.childLanes)!==0,gt||(go(tt,st,ht,!1),gt=(ht&st.childLanes)!==0),wt){if(gt)return Hh(tt,st,ht);st.flags|=128}if(wt=st.memoizedState,wt!==null&&(wt.rendering=null,wt.tail=null,wt.lastEffect=null),tn(si,si.current),gt)break;return null;case 22:case 23:return st.lanes=0,Vh(tt,st,ht);case 24:Ts(st,ii,tt.memoizedState.cache)}return fs(tt,st,ht)}function Wh(tt,st,ht){if(tt!==null)if(tt.memoizedProps!==st.pendingProps)ai=!0;else{if(!Oc(tt,ht)&&(st.flags&128)===0)return ai=!1,Ig(tt,st,ht);ai=(tt.flags&131072)!==0}else ai=!1,Pn&&(st.flags&1048576)!==0&&yd(st,ha,st.index);switch(st.lanes=0,st.tag){case 16:e:{tt=st.pendingProps;var gt=st.elementType,wt=gt._init;if(gt=wt(gt._payload),st.type=gt,typeof gt=="function")Ul(gt)?(tt=ar(gt,tt),st.tag=1,st=Fh(null,st,gt,tt,ht)):(st.tag=0,st=Tc(null,st,gt,tt,ht));else{if(gt!=null){if(wt=gt.$$typeof,wt===Bt){st.tag=11,st=Bh(null,st,gt,tt,ht);break e}else if(wt===Lt){st.tag=14,st=Mh(null,st,gt,tt,ht);break e}}throw st=qt(gt)||gt,Error(N(306,st,""))}}return st;case 0:return Tc(tt,st,st.type,st.pendingProps,ht);case 1:return gt=st.type,wt=ar(gt,st.pendingProps),Fh(tt,st,gt,wt,ht);case 3:e:{if(yn(st,st.stateNode.containerInfo),tt===null)throw Error(N(387));gt=st.pendingProps;var vt=st.memoizedState;wt=vt.element,tc(tt,st),vo(st,gt,null,ht);var Rt=st.memoizedState;if(gt=Rt.cache,Ts(st,ii,gt),gt!==vt.cache&&Zl(st,[ii],ht,!0),_o(),gt=Rt.element,vt.isDehydrated)if(vt={element:gt,isDehydrated:!1,cache:Rt.cache},st.updateQueue.baseState=vt,st.memoizedState=vt,st.flags&256){st=$h(tt,st,gt,ht);break e}else if(gt!==wt){wt=Vi(Error(N(424)),st),mo(wt),st=$h(tt,st,gt,ht);break e}else{switch(tt=st.stateNode.containerInfo,tt.nodeType){case 9:tt=tt.body;break;default:tt=tt.nodeName==="HTML"?tt.ownerDocument.body:tt}for(Gn=Gi(tt.firstChild),wi=st,Pn=!0,tr=null,Xi=!0,ht=vh(st,null,gt,ht),st.child=ht;ht;)ht.flags=ht.flags&-3|4096,ht=ht.sibling}else{if(fo(),gt===wt){st=fs(tt,st,ht);break e}di(tt,st,gt,ht)}st=st.child}return st;case 26:return Oa(tt,st),tt===null?(ht=Zf(st.type,null,st.pendingProps,null))?st.memoizedState=ht:Pn||(ht=st.type,tt=st.pendingProps,gt=Ka(un.current).createElement(ht),gt[pi]=st,gt[yi]=tt,fi(gt,ht,tt),oi(gt),st.stateNode=gt):st.memoizedState=Zf(st.type,tt.memoizedProps,st.pendingProps,tt.memoizedState),null;case 27:return wn(st),tt===null&&Pn&&(gt=st.stateNode=qf(st.type,st.pendingProps,un.current),wi=st,Xi=!0,wt=Gn,$s(st.type)?(hu=wt,Gn=Gi(gt.firstChild)):Gn=wt),di(tt,st,st.pendingProps.children,ht),Oa(tt,st),tt===null&&(st.flags|=4194304),st.child;case 5:return tt===null&&Pn&&((wt=gt=Gn)&&(gt=sp(gt,st.type,st.pendingProps,Xi),gt!==null?(st.stateNode=gt,wi=st,Gn=Gi(gt.firstChild),Xi=!1,wt=!0):wt=!1),wt||nr(st)),wn(st),wt=st.type,vt=st.pendingProps,Rt=tt!==null?tt.memoizedProps:null,gt=vt.children,lu(wt,vt)?gt=null:Rt!==null&&lu(wt,Rt)&&(st.flags|=32),st.memoizedState!==null&&(wt=ac(tt,st,vg,null,null,ht),Wo._currentValue=wt),Oa(tt,st),di(tt,st,gt,ht),st.child;case 6:return tt===null&&Pn&&((tt=ht=Gn)&&(ht=rp(ht,st.pendingProps,Xi),ht!==null?(st.stateNode=ht,wi=st,Gn=null,tt=!0):tt=!1),tt||nr(st)),null;case 13:return Uh(tt,st,ht);case 4:return yn(st,st.stateNode.containerInfo),gt=st.pendingProps,tt===null?st.child=Vr(st,null,gt,ht):di(tt,st,gt,ht),st.child;case 11:return Bh(tt,st,st.type,st.pendingProps,ht);case 7:return di(tt,st,st.pendingProps,ht),st.child;case 8:return di(tt,st,st.pendingProps.children,ht),st.child;case 12:return di(tt,st,st.pendingProps.children,ht),st.child;case 10:return gt=st.pendingProps,Ts(st,st.type,gt.value),di(tt,st,gt.children,ht),st.child;case 9:return wt=st.type._context,gt=st.pendingProps.children,sr(st),wt=bi(wt),gt=gt(wt),st.flags|=1,di(tt,st,gt,ht),st.child;case 14:return Mh(tt,st,st.type,st.pendingProps,ht);case 15:return Lh(tt,st,st.type,st.pendingProps,ht);case 19:return Hh(tt,st,ht);case 31:return gt=st.pendingProps,ht=st.mode,gt={mode:gt.mode,children:gt.children},tt===null?(ht=Ba(gt,ht),ht.ref=st.ref,st.child=ht,ht.return=st,st=ht):(ht=os(tt.child,gt),ht.ref=st.ref,st.child=ht,ht.return=st,st=ht),st;case 22:return Vh(tt,st,ht);case 24:return sr(st),gt=bi(ii),tt===null?(wt=Ql(),wt===null&&(wt=Un,vt=Yl(),wt.pooledCache=vt,vt.refCount++,vt!==null&&(wt.pooledCacheLanes|=ht),wt=vt),st.memoizedState={parent:gt,cache:wt},ec(st),Ts(st,ii,wt)):((tt.lanes&ht)!==0&&(tc(tt,st),vo(st,null,null,ht),_o()),wt=tt.memoizedState,vt=st.memoizedState,wt.parent!==gt?(wt={parent:gt,cache:gt},st.memoizedState=wt,st.lanes===0&&(st.memoizedState=st.updateQueue.baseState=wt),Ts(st,ii,gt)):(gt=vt.cache,Ts(st,ii,gt),gt!==wt.cache&&Zl(st,[ii],ht,!0))),di(tt,st,st.pendingProps.children,ht),st.child;case 29:throw st.pendingProps}throw Error(N(156,st.tag))}function ms(tt){tt.flags|=4}function jh(tt,st){if(st.type!=="stylesheet"||(st.state.loading&4)!==0)tt.flags&=-16777217;else if(tt.flags|=16777216,!em(st)){if(st=$i.current,st!==null&&((Sn&4194048)===Sn?Qi!==null:(Sn&62914560)!==Sn&&(Sn&536870912)===0||st!==Qi))throw wo=Jl,Ad;tt.flags|=8192}}function Ma(tt,st){st!==null&&(tt.flags|=4),tt.flags&16384&&(st=tt.tag!==22?Cu():536870912,tt.lanes|=st,$r|=st)}function Ro(tt,st){if(!Pn)switch(tt.tailMode){case"hidden":st=tt.tail;for(var ht=null;st!==null;)st.alternate!==null&&(ht=st),st=st.sibling;ht===null?tt.tail=null:ht.sibling=null;break;case"collapsed":ht=tt.tail;for(var gt=null;ht!==null;)ht.alternate!==null&&(gt=ht),ht=ht.sibling;gt===null?st||tt.tail===null?tt.tail=null:tt.tail.sibling=null:gt.sibling=null}}function qn(tt){var st=tt.alternate!==null&&tt.alternate.child===tt.child,ht=0,gt=0;if(st)for(var wt=tt.child;wt!==null;)ht|=wt.lanes|wt.childLanes,gt|=wt.subtreeFlags&65011712,gt|=wt.flags&65011712,wt.return=tt,wt=wt.sibling;else for(wt=tt.child;wt!==null;)ht|=wt.lanes|wt.childLanes,gt|=wt.subtreeFlags,gt|=wt.flags,wt.return=tt,wt=wt.sibling;return tt.subtreeFlags|=gt,tt.childLanes=ht,st}function Pg(tt,st,ht){var gt=st.pendingProps;switch(jl(st),st.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(st),null;case 1:return qn(st),null;case 3:return ht=st.stateNode,gt=null,tt!==null&&(gt=tt.memoizedState.cache),st.memoizedState.cache!==gt&&(st.flags|=2048),us(ii),Rn(),ht.pendingContext&&(ht.context=ht.pendingContext,ht.pendingContext=null),(tt===null||tt.child===null)&&(ho(st)?ms(st):tt===null||tt.memoizedState.isDehydrated&&(st.flags&256)===0||(st.flags|=1024,Cd())),qn(st),null;case 26:return ht=st.memoizedState,tt===null?(ms(st),ht!==null?(qn(st),jh(st,ht)):(qn(st),st.flags&=-16777217)):ht?ht!==tt.memoizedState?(ms(st),qn(st),jh(st,ht)):(qn(st),st.flags&=-16777217):(tt.memoizedProps!==gt&&ms(st),qn(st),st.flags&=-16777217),null;case 27:_n(st),ht=un.current;var wt=st.type;if(tt!==null&&st.stateNode!=null)tt.memoizedProps!==gt&&ms(st);else{if(!gt){if(st.stateNode===null)throw Error(N(166));return qn(st),null}tt=an.current,ho(st)?_d(st):(tt=qf(wt,gt,ht),st.stateNode=tt,ms(st))}return qn(st),null;case 5:if(_n(st),ht=st.type,tt!==null&&st.stateNode!=null)tt.memoizedProps!==gt&&ms(st);else{if(!gt){if(st.stateNode===null)throw Error(N(166));return qn(st),null}if(tt=an.current,ho(st))_d(st);else{switch(wt=Ka(un.current),tt){case 1:tt=wt.createElementNS("http://www.w3.org/2000/svg",ht);break;case 2:tt=wt.createElementNS("http://www.w3.org/1998/Math/MathML",ht);break;default:switch(ht){case"svg":tt=wt.createElementNS("http://www.w3.org/2000/svg",ht);break;case"math":tt=wt.createElementNS("http://www.w3.org/1998/Math/MathML",ht);break;case"script":tt=wt.createElement("div"),tt.innerHTML="<script><\/script>",tt=tt.removeChild(tt.firstChild);break;case"select":tt=typeof gt.is=="string"?wt.createElement("select",{is:gt.is}):wt.createElement("select"),gt.multiple?tt.multiple=!0:gt.size&&(tt.size=gt.size);break;default:tt=typeof gt.is=="string"?wt.createElement(ht,{is:gt.is}):wt.createElement(ht)}}tt[pi]=st,tt[yi]=gt;e:for(wt=st.child;wt!==null;){if(wt.tag===5||wt.tag===6)tt.appendChild(wt.stateNode);else if(wt.tag!==4&&wt.tag!==27&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===st)break e;for(;wt.sibling===null;){if(wt.return===null||wt.return===st)break e;wt=wt.return}wt.sibling.return=wt.return,wt=wt.sibling}st.stateNode=tt;e:switch(fi(tt,ht,gt),ht){case"button":case"input":case"select":case"textarea":tt=!!gt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}tt&&ms(st)}}return qn(st),st.flags&=-16777217,null;case 6:if(tt&&st.stateNode!=null)tt.memoizedProps!==gt&&ms(st);else{if(typeof gt!="string"&&st.stateNode===null)throw Error(N(166));if(tt=un.current,ho(st)){if(tt=st.stateNode,ht=st.memoizedProps,gt=null,wt=wi,wt!==null)switch(wt.tag){case 27:case 5:gt=wt.memoizedProps}tt[pi]=st,tt=!!(tt.nodeValue===ht||gt!==null&&gt.suppressHydrationWarning===!0||Ff(tt.nodeValue,ht)),tt||nr(st)}else tt=Ka(tt).createTextNode(gt),tt[pi]=st,st.stateNode=tt}return qn(st),null;case 13:if(gt=st.memoizedState,tt===null||tt.memoizedState!==null&&tt.memoizedState.dehydrated!==null){if(wt=ho(st),gt!==null&&gt.dehydrated!==null){if(tt===null){if(!wt)throw Error(N(318));if(wt=st.memoizedState,wt=wt!==null?wt.dehydrated:null,!wt)throw Error(N(317));wt[pi]=st}else fo(),(st.flags&128)===0&&(st.memoizedState=null),st.flags|=4;qn(st),wt=!1}else wt=Cd(),tt!==null&&tt.memoizedState!==null&&(tt.memoizedState.hydrationErrors=wt),wt=!0;if(!wt)return st.flags&256?(hs(st),st):(hs(st),null)}if(hs(st),(st.flags&128)!==0)return st.lanes=ht,st;if(ht=gt!==null,tt=tt!==null&&tt.memoizedState!==null,ht){gt=st.child,wt=null,gt.alternate!==null&&gt.alternate.memoizedState!==null&&gt.alternate.memoizedState.cachePool!==null&&(wt=gt.alternate.memoizedState.cachePool.pool);var vt=null;gt.memoizedState!==null&&gt.memoizedState.cachePool!==null&&(vt=gt.memoizedState.cachePool.pool),vt!==wt&&(gt.flags|=2048)}return ht!==tt&&ht&&(st.child.flags|=8192),Ma(st,st.updateQueue),qn(st),null;case 4:return Rn(),tt===null&&iu(st.stateNode.containerInfo),qn(st),null;case 10:return us(st.type),qn(st),null;case 19:if(ln(si),wt=st.memoizedState,wt===null)return qn(st),null;if(gt=(st.flags&128)!==0,vt=wt.rendering,vt===null)if(gt)Ro(wt,!1);else{if(Zn!==0||tt!==null&&(tt.flags&128)!==0)for(tt=st.child;tt!==null;){if(vt=Ra(tt),vt!==null){for(st.flags|=128,Ro(wt,!1),tt=vt.updateQueue,st.updateQueue=tt,Ma(st,tt),st.subtreeFlags=0,tt=ht,ht=st.child;ht!==null;)wd(ht,tt),ht=ht.sibling;return tn(si,si.current&1|2),st.child}tt=tt.sibling}wt.tail!==null&&Hn()>Na&&(st.flags|=128,gt=!0,Ro(wt,!1),st.lanes=4194304)}else{if(!gt)if(tt=Ra(vt),tt!==null){if(st.flags|=128,gt=!0,tt=tt.updateQueue,st.updateQueue=tt,Ma(st,tt),Ro(wt,!0),wt.tail===null&&wt.tailMode==="hidden"&&!vt.alternate&&!Pn)return qn(st),null}else 2*Hn()-wt.renderingStartTime>Na&&ht!==536870912&&(st.flags|=128,gt=!0,Ro(wt,!1),st.lanes=4194304);wt.isBackwards?(vt.sibling=st.child,st.child=vt):(tt=wt.last,tt!==null?tt.sibling=vt:st.child=vt,wt.last=vt)}return wt.tail!==null?(st=wt.tail,wt.rendering=st,wt.tail=st.sibling,wt.renderingStartTime=Hn(),st.sibling=null,tt=si.current,tn(si,gt?tt&1|2:tt&1),st):(qn(st),null);case 22:case 23:return hs(st),rc(),gt=st.memoizedState!==null,tt!==null?tt.memoizedState!==null!==gt&&(st.flags|=8192):gt&&(st.flags|=8192),gt?(ht&536870912)!==0&&(st.flags&128)===0&&(qn(st),st.subtreeFlags&6&&(st.flags|=8192)):qn(st),ht=st.updateQueue,ht!==null&&Ma(st,ht.retryQueue),ht=null,tt!==null&&tt.memoizedState!==null&&tt.memoizedState.cachePool!==null&&(ht=tt.memoizedState.cachePool.pool),gt=null,st.memoizedState!==null&&st.memoizedState.cachePool!==null&&(gt=st.memoizedState.cachePool.pool),gt!==ht&&(st.flags|=2048),tt!==null&&ln(rr),null;case 24:return ht=null,tt!==null&&(ht=tt.memoizedState.cache),st.memoizedState.cache!==ht&&(st.flags|=2048),us(ii),qn(st),null;case 25:return null;case 30:return null}throw Error(N(156,st.tag))}function Og(tt,st){switch(jl(st),st.tag){case 1:return tt=st.flags,tt&65536?(st.flags=tt&-65537|128,st):null;case 3:return us(ii),Rn(),tt=st.flags,(tt&65536)!==0&&(tt&128)===0?(st.flags=tt&-65537|128,st):null;case 26:case 27:case 5:return _n(st),null;case 13:if(hs(st),tt=st.memoizedState,tt!==null&&tt.dehydrated!==null){if(st.alternate===null)throw Error(N(340));fo()}return tt=st.flags,tt&65536?(st.flags=tt&-65537|128,st):null;case 19:return ln(si),null;case 4:return Rn(),null;case 10:return us(st.type),null;case 22:case 23:return hs(st),rc(),tt!==null&&ln(rr),tt=st.flags,tt&65536?(st.flags=tt&-65537|128,st):null;case 24:return us(ii),null;case 25:return null;default:return null}}function qh(tt,st){switch(jl(st),st.tag){case 3:us(ii),Rn();break;case 26:case 27:case 5:_n(st);break;case 4:Rn();break;case 13:hs(st);break;case 19:ln(si);break;case 10:us(st.type);break;case 22:case 23:hs(st),rc(),tt!==null&&ln(rr);break;case 24:us(ii)}}function Io(tt,st){try{var ht=st.updateQueue,gt=ht!==null?ht.lastEffect:null;if(gt!==null){var wt=gt.next;ht=wt;do{if((ht.tag&tt)===tt){gt=void 0;var vt=ht.create,Rt=ht.inst;gt=vt(),Rt.destroy=gt}ht=ht.next}while(ht!==wt)}}catch(Mt){Dn(st,st.return,Mt)}}function Os(tt,st,ht){try{var gt=st.updateQueue,wt=gt!==null?gt.lastEffect:null;if(wt!==null){var vt=wt.next;gt=vt;do{if((gt.tag&tt)===tt){var Rt=gt.inst,Mt=Rt.destroy;if(Mt!==void 0){Rt.destroy=void 0,wt=st;var Ft=ht,Yt=Mt;try{Yt()}catch(nn){Dn(wt,Ft,nn)}}}gt=gt.next}while(gt!==vt)}}catch(nn){Dn(st,st.return,nn)}}function Kh(tt){var st=tt.updateQueue;if(st!==null){var ht=tt.stateNode;try{Md(st,ht)}catch(gt){Dn(tt,tt.return,gt)}}}function Gh(tt,st,ht){ht.props=ar(tt.type,tt.memoizedProps),ht.state=tt.memoizedState;try{ht.componentWillUnmount()}catch(gt){Dn(tt,st,gt)}}function Po(tt,st){try{var ht=tt.ref;if(ht!==null){switch(tt.tag){case 26:case 27:case 5:var gt=tt.stateNode;break;case 30:gt=tt.stateNode;break;default:gt=tt.stateNode}typeof ht=="function"?tt.refCleanup=ht(gt):ht.current=gt}}catch(wt){Dn(tt,st,wt)}}function Ji(tt,st){var ht=tt.ref,gt=tt.refCleanup;if(ht!==null)if(typeof gt=="function")try{gt()}catch(wt){Dn(tt,st,wt)}finally{tt.refCleanup=null,tt=tt.alternate,tt!=null&&(tt.refCleanup=null)}else if(typeof ht=="function")try{ht(null)}catch(wt){Dn(tt,st,wt)}else ht.current=null}function Zh(tt){var st=tt.type,ht=tt.memoizedProps,gt=tt.stateNode;try{e:switch(st){case"button":case"input":case"select":case"textarea":ht.autoFocus&&gt.focus();break e;case"img":ht.src?gt.src=ht.src:ht.srcSet&&(gt.srcset=ht.srcSet)}}catch(wt){Dn(tt,tt.return,wt)}}function Bc(tt,st,ht){try{var gt=tt.stateNode;Jg(gt,tt.type,ht,st),gt[yi]=st}catch(wt){Dn(tt,tt.return,wt)}}function Yh(tt){return tt.tag===5||tt.tag===3||tt.tag===26||tt.tag===27&&$s(tt.type)||tt.tag===4}function Mc(tt){e:for(;;){for(;tt.sibling===null;){if(tt.return===null||Yh(tt.return))return null;tt=tt.return}for(tt.sibling.return=tt.return,tt=tt.sibling;tt.tag!==5&&tt.tag!==6&&tt.tag!==18;){if(tt.tag===27&&$s(tt.type)||tt.flags&2||tt.child===null||tt.tag===4)continue e;tt.child.return=tt,tt=tt.child}if(!(tt.flags&2))return tt.stateNode}}function Lc(tt,st,ht){var gt=tt.tag;if(gt===5||gt===6)tt=tt.stateNode,st?(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).insertBefore(tt,st):(st=ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht,st.appendChild(tt),ht=ht._reactRootContainer,ht!=null||st.onclick!==null||(st.onclick=qa));else if(gt!==4&&(gt===27&&$s(tt.type)&&(ht=tt.stateNode,st=null),tt=tt.child,tt!==null))for(Lc(tt,st,ht),tt=tt.sibling;tt!==null;)Lc(tt,st,ht),tt=tt.sibling}function La(tt,st,ht){var gt=tt.tag;if(gt===5||gt===6)tt=tt.stateNode,st?ht.insertBefore(tt,st):ht.appendChild(tt);else if(gt!==4&&(gt===27&&$s(tt.type)&&(ht=tt.stateNode),tt=tt.child,tt!==null))for(La(tt,st,ht),tt=tt.sibling;tt!==null;)La(tt,st,ht),tt=tt.sibling}function Xh(tt){var st=tt.stateNode,ht=tt.memoizedProps;try{for(var gt=tt.type,wt=st.attributes;wt.length;)st.removeAttributeNode(wt[0]);fi(st,gt,ht),st[pi]=tt,st[yi]=ht}catch(vt){Dn(tt,tt.return,vt)}}var gs=!1,Xn=!1,Vc=!1,Qh=typeof WeakSet=="function"?WeakSet:Set,li=null;function Bg(tt,st){if(tt=tt.containerInfo,ou=Ja,tt=cd(tt),Ml(tt)){if("selectionStart"in tt)var ht={start:tt.selectionStart,end:tt.selectionEnd};else e:{ht=(ht=tt.ownerDocument)&&ht.defaultView||window;var gt=ht.getSelection&&ht.getSelection();if(gt&&gt.rangeCount!==0){ht=gt.anchorNode;var wt=gt.anchorOffset,vt=gt.focusNode;gt=gt.focusOffset;try{ht.nodeType,vt.nodeType}catch{ht=null;break e}var Rt=0,Mt=-1,Ft=-1,Yt=0,nn=0,rn=tt,Xt=null;t:for(;;){for(var Qt;rn!==ht||wt!==0&&rn.nodeType!==3||(Mt=Rt+wt),rn!==vt||gt!==0&&rn.nodeType!==3||(Ft=Rt+gt),rn.nodeType===3&&(Rt+=rn.nodeValue.length),(Qt=rn.firstChild)!==null;)Xt=rn,rn=Qt;for(;;){if(rn===tt)break t;if(Xt===ht&&++Yt===wt&&(Mt=Rt),Xt===vt&&++nn===gt&&(Ft=Rt),(Qt=rn.nextSibling)!==null)break;rn=Xt,Xt=rn.parentNode}rn=Qt}ht=Mt===-1||Ft===-1?null:{start:Mt,end:Ft}}else ht=null}ht=ht||{start:0,end:0}}else ht=null;for(au={focusedElem:tt,selectionRange:ht},Ja=!1,li=st;li!==null;)if(st=li,tt=st.child,(st.subtreeFlags&1024)!==0&&tt!==null)tt.return=st,li=tt;else for(;li!==null;){switch(st=li,vt=st.alternate,tt=st.flags,st.tag){case 0:break;case 11:case 15:break;case 1:if((tt&1024)!==0&&vt!==null){tt=void 0,ht=st,wt=vt.memoizedProps,vt=vt.memoizedState,gt=ht.stateNode;try{var bn=ar(ht.type,wt,ht.elementType===ht.type);tt=gt.getSnapshotBeforeUpdate(bn,vt),gt.__reactInternalSnapshotBeforeUpdate=tt}catch(mn){Dn(ht,ht.return,mn)}}break;case 3:if((tt&1024)!==0){if(tt=st.stateNode.containerInfo,ht=tt.nodeType,ht===9)uu(tt);else if(ht===1)switch(tt.nodeName){case"HEAD":case"HTML":case"BODY":uu(tt);break;default:tt.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((tt&1024)!==0)throw Error(N(163))}if(tt=st.sibling,tt!==null){tt.return=st.return,li=tt;break}li=st.return}}function Jh(tt,st,ht){var gt=ht.flags;switch(ht.tag){case 0:case 11:case 15:Bs(tt,ht),gt&4&&Io(5,ht);break;case 1:if(Bs(tt,ht),gt&4)if(tt=ht.stateNode,st===null)try{tt.componentDidMount()}catch(Rt){Dn(ht,ht.return,Rt)}else{var wt=ar(ht.type,st.memoizedProps);st=st.memoizedState;try{tt.componentDidUpdate(wt,st,tt.__reactInternalSnapshotBeforeUpdate)}catch(Rt){Dn(ht,ht.return,Rt)}}gt&64&&Kh(ht),gt&512&&Po(ht,ht.return);break;case 3:if(Bs(tt,ht),gt&64&&(tt=ht.updateQueue,tt!==null)){if(st=null,ht.child!==null)switch(ht.child.tag){case 27:case 5:st=ht.child.stateNode;break;case 1:st=ht.child.stateNode}try{Md(tt,st)}catch(Rt){Dn(ht,ht.return,Rt)}}break;case 27:st===null&&gt&4&&Xh(ht);case 26:case 5:Bs(tt,ht),st===null&&gt&4&&Zh(ht),gt&512&&Po(ht,ht.return);break;case 12:Bs(tt,ht);break;case 13:Bs(tt,ht),gt&4&&nf(tt,ht),gt&64&&(tt=ht.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null&&(ht=zg.bind(null,ht),op(tt,ht))));break;case 22:if(gt=ht.memoizedState!==null||gs,!gt){st=st!==null&&st.memoizedState!==null||Xn,wt=gs;var vt=Xn;gs=gt,(Xn=st)&&!vt?Ms(tt,ht,(ht.subtreeFlags&8772)!==0):Bs(tt,ht),gs=wt,Xn=vt}break;case 30:break;default:Bs(tt,ht)}}function ef(tt){var st=tt.alternate;st!==null&&(tt.alternate=null,ef(st)),tt.child=null,tt.deletions=null,tt.sibling=null,tt.tag===5&&(st=tt.stateNode,st!==null&&gl(st)),tt.stateNode=null,tt.return=null,tt.dependencies=null,tt.memoizedProps=null,tt.memoizedState=null,tt.pendingProps=null,tt.stateNode=null,tt.updateQueue=null}var Wn=null,Ci=!1;function ps(tt,st,ht){for(ht=ht.child;ht!==null;)tf(tt,st,ht),ht=ht.sibling}function tf(tt,st,ht){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(ji,ht)}catch{}switch(ht.tag){case 26:Xn||Ji(ht,st),ps(tt,st,ht),ht.memoizedState?ht.memoizedState.count--:ht.stateNode&&(ht=ht.stateNode,ht.parentNode.removeChild(ht));break;case 27:Xn||Ji(ht,st);var gt=Wn,wt=Ci;$s(ht.type)&&(Wn=ht.stateNode,Ci=!1),ps(tt,st,ht),$o(ht.stateNode),Wn=gt,Ci=wt;break;case 5:Xn||Ji(ht,st);case 6:if(gt=Wn,wt=Ci,Wn=null,ps(tt,st,ht),Wn=gt,Ci=wt,Wn!==null)if(Ci)try{(Wn.nodeType===9?Wn.body:Wn.nodeName==="HTML"?Wn.ownerDocument.body:Wn).removeChild(ht.stateNode)}catch(vt){Dn(ht,st,vt)}else try{Wn.removeChild(ht.stateNode)}catch(vt){Dn(ht,st,vt)}break;case 18:Wn!==null&&(Ci?(tt=Wn,Wf(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt,ht.stateNode),Go(tt)):Wf(Wn,ht.stateNode));break;case 4:gt=Wn,wt=Ci,Wn=ht.stateNode.containerInfo,Ci=!0,ps(tt,st,ht),Wn=gt,Ci=wt;break;case 0:case 11:case 14:case 15:Xn||Os(2,ht,st),Xn||Os(4,ht,st),ps(tt,st,ht);break;case 1:Xn||(Ji(ht,st),gt=ht.stateNode,typeof gt.componentWillUnmount=="function"&&Gh(ht,st,gt)),ps(tt,st,ht);break;case 21:ps(tt,st,ht);break;case 22:Xn=(gt=Xn)||ht.memoizedState!==null,ps(tt,st,ht),Xn=gt;break;default:ps(tt,st,ht)}}function nf(tt,st){if(st.memoizedState===null&&(tt=st.alternate,tt!==null&&(tt=tt.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null))))try{Go(tt)}catch(ht){Dn(st,st.return,ht)}}function Mg(tt){switch(tt.tag){case 13:case 19:var st=tt.stateNode;return st===null&&(st=tt.stateNode=new Qh),st;case 22:return tt=tt.stateNode,st=tt._retryCache,st===null&&(st=tt._retryCache=new Qh),st;default:throw Error(N(435,tt.tag))}}function Nc(tt,st){var ht=Mg(tt);st.forEach(function(gt){var wt=Hg.bind(null,tt,gt);ht.has(gt)||(ht.add(gt),gt.then(wt,wt))})}function Ai(tt,st){var ht=st.deletions;if(ht!==null)for(var gt=0;gt<ht.length;gt++){var wt=ht[gt],vt=tt,Rt=st,Mt=Rt;e:for(;Mt!==null;){switch(Mt.tag){case 27:if($s(Mt.type)){Wn=Mt.stateNode,Ci=!1;break e}break;case 5:Wn=Mt.stateNode,Ci=!1;break e;case 3:case 4:Wn=Mt.stateNode.containerInfo,Ci=!0;break e}Mt=Mt.return}if(Wn===null)throw Error(N(160));tf(vt,Rt,wt),Wn=null,Ci=!1,vt=wt.alternate,vt!==null&&(vt.return=null),wt.return=null}if(st.subtreeFlags&13878)for(st=st.child;st!==null;)sf(st,tt),st=st.sibling}var Ki=null;function sf(tt,st){var ht=tt.alternate,gt=tt.flags;switch(tt.tag){case 0:case 11:case 14:case 15:Ai(st,tt),Ri(tt),gt&4&&(Os(3,tt,tt.return),Io(3,tt),Os(5,tt,tt.return));break;case 1:Ai(st,tt),Ri(tt),gt&512&&(Xn||ht===null||Ji(ht,ht.return)),gt&64&&gs&&(tt=tt.updateQueue,tt!==null&&(gt=tt.callbacks,gt!==null&&(ht=tt.shared.hiddenCallbacks,tt.shared.hiddenCallbacks=ht===null?gt:ht.concat(gt))));break;case 26:var wt=Ki;if(Ai(st,tt),Ri(tt),gt&512&&(Xn||ht===null||Ji(ht,ht.return)),gt&4){var vt=ht!==null?ht.memoizedState:null;if(gt=tt.memoizedState,ht===null)if(gt===null)if(tt.stateNode===null){e:{gt=tt.type,ht=tt.memoizedProps,wt=wt.ownerDocument||wt;t:switch(gt){case"title":vt=wt.getElementsByTagName("title")[0],(!vt||vt[eo]||vt[pi]||vt.namespaceURI==="http://www.w3.org/2000/svg"||vt.hasAttribute("itemprop"))&&(vt=wt.createElement(gt),wt.head.insertBefore(vt,wt.querySelector("head > title"))),fi(vt,gt,ht),vt[pi]=tt,oi(vt),gt=vt;break e;case"link":var Rt=Qf("link","href",wt).get(gt+(ht.href||""));if(Rt){for(var Mt=0;Mt<Rt.length;Mt++)if(vt=Rt[Mt],vt.getAttribute("href")===(ht.href==null||ht.href===""?null:ht.href)&&vt.getAttribute("rel")===(ht.rel==null?null:ht.rel)&&vt.getAttribute("title")===(ht.title==null?null:ht.title)&&vt.getAttribute("crossorigin")===(ht.crossOrigin==null?null:ht.crossOrigin)){Rt.splice(Mt,1);break t}}vt=wt.createElement(gt),fi(vt,gt,ht),wt.head.appendChild(vt);break;case"meta":if(Rt=Qf("meta","content",wt).get(gt+(ht.content||""))){for(Mt=0;Mt<Rt.length;Mt++)if(vt=Rt[Mt],vt.getAttribute("content")===(ht.content==null?null:""+ht.content)&&vt.getAttribute("name")===(ht.name==null?null:ht.name)&&vt.getAttribute("property")===(ht.property==null?null:ht.property)&&vt.getAttribute("http-equiv")===(ht.httpEquiv==null?null:ht.httpEquiv)&&vt.getAttribute("charset")===(ht.charSet==null?null:ht.charSet)){Rt.splice(Mt,1);break t}}vt=wt.createElement(gt),fi(vt,gt,ht),wt.head.appendChild(vt);break;default:throw Error(N(468,gt))}vt[pi]=tt,oi(vt),gt=vt}tt.stateNode=gt}else Jf(wt,tt.type,tt.stateNode);else tt.stateNode=Xf(wt,gt,tt.memoizedProps);else vt!==gt?(vt===null?ht.stateNode!==null&&(ht=ht.stateNode,ht.parentNode.removeChild(ht)):vt.count--,gt===null?Jf(wt,tt.type,tt.stateNode):Xf(wt,gt,tt.memoizedProps)):gt===null&&tt.stateNode!==null&&Bc(tt,tt.memoizedProps,ht.memoizedProps)}break;case 27:Ai(st,tt),Ri(tt),gt&512&&(Xn||ht===null||Ji(ht,ht.return)),ht!==null&&gt&4&&Bc(tt,tt.memoizedProps,ht.memoizedProps);break;case 5:if(Ai(st,tt),Ri(tt),gt&512&&(Xn||ht===null||Ji(ht,ht.return)),tt.flags&32){wt=tt.stateNode;try{xr(wt,"")}catch(Qt){Dn(tt,tt.return,Qt)}}gt&4&&tt.stateNode!=null&&(wt=tt.memoizedProps,Bc(tt,wt,ht!==null?ht.memoizedProps:wt)),gt&1024&&(Vc=!0);break;case 6:if(Ai(st,tt),Ri(tt),gt&4){if(tt.stateNode===null)throw Error(N(162));gt=tt.memoizedProps,ht=tt.stateNode;try{ht.nodeValue=gt}catch(Qt){Dn(tt,tt.return,Qt)}}break;case 3:if(Ya=null,wt=Ki,Ki=Ga(st.containerInfo),Ai(st,tt),Ki=wt,Ri(tt),gt&4&&ht!==null&&ht.memoizedState.isDehydrated)try{Go(st.containerInfo)}catch(Qt){Dn(tt,tt.return,Qt)}Vc&&(Vc=!1,rf(tt));break;case 4:gt=Ki,Ki=Ga(tt.stateNode.containerInfo),Ai(st,tt),Ri(tt),Ki=gt;break;case 12:Ai(st,tt),Ri(tt);break;case 13:Ai(st,tt),Ri(tt),tt.child.flags&8192&&tt.memoizedState!==null!=(ht!==null&&ht.memoizedState!==null)&&(Hc=Hn()),gt&4&&(gt=tt.updateQueue,gt!==null&&(tt.updateQueue=null,Nc(tt,gt)));break;case 22:wt=tt.memoizedState!==null;var Ft=ht!==null&&ht.memoizedState!==null,Yt=gs,nn=Xn;if(gs=Yt||wt,Xn=nn||Ft,Ai(st,tt),Xn=nn,gs=Yt,Ri(tt),gt&8192)e:for(st=tt.stateNode,st._visibility=wt?st._visibility&-2:st._visibility|1,wt&&(ht===null||Ft||gs||Xn||lr(tt)),ht=null,st=tt;;){if(st.tag===5||st.tag===26){if(ht===null){Ft=ht=st;try{if(vt=Ft.stateNode,wt)Rt=vt.style,typeof Rt.setProperty=="function"?Rt.setProperty("display","none","important"):Rt.display="none";else{Mt=Ft.stateNode;var rn=Ft.memoizedProps.style,Xt=rn!=null&&rn.hasOwnProperty("display")?rn.display:null;Mt.style.display=Xt==null||typeof Xt=="boolean"?"":(""+Xt).trim()}}catch(Qt){Dn(Ft,Ft.return,Qt)}}}else if(st.tag===6){if(ht===null){Ft=st;try{Ft.stateNode.nodeValue=wt?"":Ft.memoizedProps}catch(Qt){Dn(Ft,Ft.return,Qt)}}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===tt)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===tt)break e;for(;st.sibling===null;){if(st.return===null||st.return===tt)break e;ht===st&&(ht=null),st=st.return}ht===st&&(ht=null),st.sibling.return=st.return,st=st.sibling}gt&4&&(gt=tt.updateQueue,gt!==null&&(ht=gt.retryQueue,ht!==null&&(gt.retryQueue=null,Nc(tt,ht))));break;case 19:Ai(st,tt),Ri(tt),gt&4&&(gt=tt.updateQueue,gt!==null&&(tt.updateQueue=null,Nc(tt,gt)));break;case 30:break;case 21:break;default:Ai(st,tt),Ri(tt)}}function Ri(tt){var st=tt.flags;if(st&2){try{for(var ht,gt=tt.return;gt!==null;){if(Yh(gt)){ht=gt;break}gt=gt.return}if(ht==null)throw Error(N(160));switch(ht.tag){case 27:var wt=ht.stateNode,vt=Mc(tt);La(tt,vt,wt);break;case 5:var Rt=ht.stateNode;ht.flags&32&&(xr(Rt,""),ht.flags&=-33);var Mt=Mc(tt);La(tt,Mt,Rt);break;case 3:case 4:var Ft=ht.stateNode.containerInfo,Yt=Mc(tt);Lc(tt,Yt,Ft);break;default:throw Error(N(161))}}catch(nn){Dn(tt,tt.return,nn)}tt.flags&=-3}st&4096&&(tt.flags&=-4097)}function rf(tt){if(tt.subtreeFlags&1024)for(tt=tt.child;tt!==null;){var st=tt;rf(st),st.tag===5&&st.flags&1024&&st.stateNode.reset(),tt=tt.sibling}}function Bs(tt,st){if(st.subtreeFlags&8772)for(st=st.child;st!==null;)Jh(tt,st.alternate,st),st=st.sibling}function lr(tt){for(tt=tt.child;tt!==null;){var st=tt;switch(st.tag){case 0:case 11:case 14:case 15:Os(4,st,st.return),lr(st);break;case 1:Ji(st,st.return);var ht=st.stateNode;typeof ht.componentWillUnmount=="function"&&Gh(st,st.return,ht),lr(st);break;case 27:$o(st.stateNode);case 26:case 5:Ji(st,st.return),lr(st);break;case 22:st.memoizedState===null&&lr(st);break;case 30:lr(st);break;default:lr(st)}tt=tt.sibling}}function Ms(tt,st,ht){for(ht=ht&&(st.subtreeFlags&8772)!==0,st=st.child;st!==null;){var gt=st.alternate,wt=tt,vt=st,Rt=vt.flags;switch(vt.tag){case 0:case 11:case 15:Ms(wt,vt,ht),Io(4,vt);break;case 1:if(Ms(wt,vt,ht),gt=vt,wt=gt.stateNode,typeof wt.componentDidMount=="function")try{wt.componentDidMount()}catch(Yt){Dn(gt,gt.return,Yt)}if(gt=vt,wt=gt.updateQueue,wt!==null){var Mt=gt.stateNode;try{var Ft=wt.shared.hiddenCallbacks;if(Ft!==null)for(wt.shared.hiddenCallbacks=null,wt=0;wt<Ft.length;wt++)Bd(Ft[wt],Mt)}catch(Yt){Dn(gt,gt.return,Yt)}}ht&&Rt&64&&Kh(vt),Po(vt,vt.return);break;case 27:Xh(vt);case 26:case 5:Ms(wt,vt,ht),ht&&gt===null&&Rt&4&&Zh(vt),Po(vt,vt.return);break;case 12:Ms(wt,vt,ht);break;case 13:Ms(wt,vt,ht),ht&&Rt&4&&nf(wt,vt);break;case 22:vt.memoizedState===null&&Ms(wt,vt,ht),Po(vt,vt.return);break;case 30:break;default:Ms(wt,vt,ht)}st=st.sibling}}function Dc(tt,st){var ht=null;tt!==null&&tt.memoizedState!==null&&tt.memoizedState.cachePool!==null&&(ht=tt.memoizedState.cachePool.pool),tt=null,st.memoizedState!==null&&st.memoizedState.cachePool!==null&&(tt=st.memoizedState.cachePool.pool),tt!==ht&&(tt!=null&&tt.refCount++,ht!=null&&po(ht))}function Fc(tt,st){tt=null,st.alternate!==null&&(tt=st.alternate.memoizedState.cache),st=st.memoizedState.cache,st!==tt&&(st.refCount++,tt!=null&&po(tt))}function es(tt,st,ht,gt){if(st.subtreeFlags&10256)for(st=st.child;st!==null;)of(tt,st,ht,gt),st=st.sibling}function of(tt,st,ht,gt){var wt=st.flags;switch(st.tag){case 0:case 11:case 15:es(tt,st,ht,gt),wt&2048&&Io(9,st);break;case 1:es(tt,st,ht,gt);break;case 3:es(tt,st,ht,gt),wt&2048&&(tt=null,st.alternate!==null&&(tt=st.alternate.memoizedState.cache),st=st.memoizedState.cache,st!==tt&&(st.refCount++,tt!=null&&po(tt)));break;case 12:if(wt&2048){es(tt,st,ht,gt),tt=st.stateNode;try{var vt=st.memoizedProps,Rt=vt.id,Mt=vt.onPostCommit;typeof Mt=="function"&&Mt(Rt,st.alternate===null?"mount":"update",tt.passiveEffectDuration,-0)}catch(Ft){Dn(st,st.return,Ft)}}else es(tt,st,ht,gt);break;case 13:es(tt,st,ht,gt);break;case 23:break;case 22:vt=st.stateNode,Rt=st.alternate,st.memoizedState!==null?vt._visibility&2?es(tt,st,ht,gt):Oo(tt,st):vt._visibility&2?es(tt,st,ht,gt):(vt._visibility|=2,Nr(tt,st,ht,gt,(st.subtreeFlags&10256)!==0)),wt&2048&&Dc(Rt,st);break;case 24:es(tt,st,ht,gt),wt&2048&&Fc(st.alternate,st);break;default:es(tt,st,ht,gt)}}function Nr(tt,st,ht,gt,wt){for(wt=wt&&(st.subtreeFlags&10256)!==0,st=st.child;st!==null;){var vt=tt,Rt=st,Mt=ht,Ft=gt,Yt=Rt.flags;switch(Rt.tag){case 0:case 11:case 15:Nr(vt,Rt,Mt,Ft,wt),Io(8,Rt);break;case 23:break;case 22:var nn=Rt.stateNode;Rt.memoizedState!==null?nn._visibility&2?Nr(vt,Rt,Mt,Ft,wt):Oo(vt,Rt):(nn._visibility|=2,Nr(vt,Rt,Mt,Ft,wt)),wt&&Yt&2048&&Dc(Rt.alternate,Rt);break;case 24:Nr(vt,Rt,Mt,Ft,wt),wt&&Yt&2048&&Fc(Rt.alternate,Rt);break;default:Nr(vt,Rt,Mt,Ft,wt)}st=st.sibling}}function Oo(tt,st){if(st.subtreeFlags&10256)for(st=st.child;st!==null;){var ht=tt,gt=st,wt=gt.flags;switch(gt.tag){case 22:Oo(ht,gt),wt&2048&&Dc(gt.alternate,gt);break;case 24:Oo(ht,gt),wt&2048&&Fc(gt.alternate,gt);break;default:Oo(ht,gt)}st=st.sibling}}var Bo=8192;function Dr(tt){if(tt.subtreeFlags&Bo)for(tt=tt.child;tt!==null;)af(tt),tt=tt.sibling}function af(tt){switch(tt.tag){case 26:Dr(tt),tt.flags&Bo&&tt.memoizedState!==null&&wp(Ki,tt.memoizedState,tt.memoizedProps);break;case 5:Dr(tt);break;case 3:case 4:var st=Ki;Ki=Ga(tt.stateNode.containerInfo),Dr(tt),Ki=st;break;case 22:tt.memoizedState===null&&(st=tt.alternate,st!==null&&st.memoizedState!==null?(st=Bo,Bo=16777216,Dr(tt),Bo=st):Dr(tt));break;default:Dr(tt)}}function lf(tt){var st=tt.alternate;if(st!==null&&(tt=st.child,tt!==null)){st.child=null;do st=tt.sibling,tt.sibling=null,tt=st;while(tt!==null)}}function Mo(tt){var st=tt.deletions;if((tt.flags&16)!==0){if(st!==null)for(var ht=0;ht<st.length;ht++){var gt=st[ht];li=gt,uf(gt,tt)}lf(tt)}if(tt.subtreeFlags&10256)for(tt=tt.child;tt!==null;)cf(tt),tt=tt.sibling}function cf(tt){switch(tt.tag){case 0:case 11:case 15:Mo(tt),tt.flags&2048&&Os(9,tt,tt.return);break;case 3:Mo(tt);break;case 12:Mo(tt);break;case 22:var st=tt.stateNode;tt.memoizedState!==null&&st._visibility&2&&(tt.return===null||tt.return.tag!==13)?(st._visibility&=-3,Va(tt)):Mo(tt);break;default:Mo(tt)}}function Va(tt){var st=tt.deletions;if((tt.flags&16)!==0){if(st!==null)for(var ht=0;ht<st.length;ht++){var gt=st[ht];li=gt,uf(gt,tt)}lf(tt)}for(tt=tt.child;tt!==null;){switch(st=tt,st.tag){case 0:case 11:case 15:Os(8,st,st.return),Va(st);break;case 22:ht=st.stateNode,ht._visibility&2&&(ht._visibility&=-3,Va(st));break;default:Va(st)}tt=tt.sibling}}function uf(tt,st){for(;li!==null;){var ht=li;switch(ht.tag){case 0:case 11:case 15:Os(8,ht,st);break;case 23:case 22:if(ht.memoizedState!==null&&ht.memoizedState.cachePool!==null){var gt=ht.memoizedState.cachePool.pool;gt!=null&&gt.refCount++}break;case 24:po(ht.memoizedState.cache)}if(gt=ht.child,gt!==null)gt.return=ht,li=gt;else e:for(ht=tt;li!==null;){gt=li;var wt=gt.sibling,vt=gt.return;if(ef(gt),gt===ht){li=null;break e}if(wt!==null){wt.return=vt,li=wt;break e}li=vt}}}var Lg={getCacheForType:function(tt){var st=bi(ii),ht=st.data.get(tt);return ht===void 0&&(ht=tt(),st.data.set(tt,ht)),ht}},Vg=typeof WeakMap=="function"?WeakMap:Map,Bn=0,Un=null,En=null,Sn=0,Mn=0,Ii=null,Ls=!1,Fr=!1,$c=!1,bs=0,Zn=0,Vs=0,cr=0,Uc=0,Ui=0,$r=0,Lo=null,Ei=null,zc=!1,Hc=0,Na=1/0,Da=null,Ns=null,hi=0,Ds=null,Ur=null,zr=0,Wc=0,jc=null,df=null,Vo=0,qc=null;function Pi(){if((Bn&2)!==0&&Sn!==0)return Sn&-Sn;if(Dt.T!==null){var tt=Rr;return tt!==0?tt:Jc()}return ku()}function hf(){Ui===0&&(Ui=(Sn&536870912)===0||Pn?Qr():536870912);var tt=$i.current;return tt!==null&&(tt.flags|=32),Ui}function Oi(tt,st,ht){(tt===Un&&(Mn===2||Mn===9)||tt.cancelPendingCommit!==null)&&(Hr(tt,0),Fs(tt,Sn,Ui,!1)),Jr(tt,ht),((Bn&2)===0||tt!==Un)&&(tt===Un&&((Bn&2)===0&&(cr|=ht),Zn===4&&Fs(tt,Sn,Ui,!1)),ts(tt))}function ff(tt,st,ht){if((Bn&6)!==0)throw Error(N(327));var gt=!ht&&(st&124)===0&&(st&tt.expiredLanes)===0||jn(tt,st),wt=gt?Fg(tt,st):Zc(tt,st,!0),vt=gt;do{if(wt===0){Fr&&!gt&&Fs(tt,st,0,!1);break}else{if(ht=tt.current.alternate,vt&&!Ng(ht)){wt=Zc(tt,st,!1),vt=!1;continue}if(wt===2){if(vt=st,tt.errorRecoveryDisabledLanes&vt)var Rt=0;else Rt=tt.pendingLanes&-536870913,Rt=Rt!==0?Rt:Rt&536870912?536870912:0;if(Rt!==0){st=Rt;e:{var Mt=tt;wt=Lo;var Ft=Mt.current.memoizedState.isDehydrated;if(Ft&&(Hr(Mt,Rt).flags|=256),Rt=Zc(Mt,Rt,!1),Rt!==2){if($c&&!Ft){Mt.errorRecoveryDisabledLanes|=vt,cr|=vt,wt=4;break e}vt=Ei,Ei=wt,vt!==null&&(Ei===null?Ei=vt:Ei.push.apply(Ei,vt))}wt=Rt}if(vt=!1,wt!==2)continue}}if(wt===1){Hr(tt,0),Fs(tt,st,0,!0);break}e:{switch(gt=tt,vt=wt,vt){case 0:case 1:throw Error(N(345));case 4:if((st&4194048)!==st)break;case 6:Fs(gt,st,Ui,!Ls);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(N(329))}if((st&62914560)===st&&(wt=Hc+300-Hn(),10<wt)){if(Fs(gt,st,Ui,!Ls),On(gt,0,!0)!==0)break e;gt.timeoutHandle=zf(mf.bind(null,gt,ht,Ei,Da,zc,st,Ui,cr,$r,Ls,vt,2,-0,0),wt);break e}mf(gt,ht,Ei,Da,zc,st,Ui,cr,$r,Ls,vt,0,-0,0)}}break}while(!0);ts(tt)}function mf(tt,st,ht,gt,wt,vt,Rt,Mt,Ft,Yt,nn,rn,Xt,Qt){if(tt.timeoutHandle=-1,rn=st.subtreeFlags,(rn&8192||(rn&16785408)===16785408)&&(Ho={stylesheets:null,count:0,unsuspend:xp},af(st),rn=yp(),rn!==null)){tt.cancelPendingCommit=rn(_f.bind(null,tt,st,vt,ht,gt,wt,Rt,Mt,Ft,nn,1,Xt,Qt)),Fs(tt,vt,Rt,!Yt);return}_f(tt,st,vt,ht,gt,wt,Rt,Mt,Ft)}function Ng(tt){for(var st=tt;;){var ht=st.tag;if((ht===0||ht===11||ht===15)&&st.flags&16384&&(ht=st.updateQueue,ht!==null&&(ht=ht.stores,ht!==null)))for(var gt=0;gt<ht.length;gt++){var wt=ht[gt],vt=wt.getSnapshot;wt=wt.value;try{if(!ki(vt(),wt))return!1}catch{return!1}}if(ht=st.child,st.subtreeFlags&16384&&ht!==null)ht.return=st,st=ht;else{if(st===tt)break;for(;st.sibling===null;){if(st.return===null||st.return===tt)return!0;st=st.return}st.sibling.return=st.return,st=st.sibling}}return!0}function Fs(tt,st,ht,gt){st&=~Uc,st&=~cr,tt.suspendedLanes|=st,tt.pingedLanes&=~st,gt&&(tt.warmLanes|=st),gt=tt.expirationTimes;for(var wt=st;0<wt;){var vt=31-Jn(wt),Rt=1<<vt;gt[vt]=-1,wt&=~Rt}ht!==0&&Eu(tt,ht,st)}function Fa(){return(Bn&6)===0?(No(0),!1):!0}function Kc(){if(En!==null){if(Mn===0)var tt=En.return;else tt=En,cs=ir=null,uc(tt),Lr=null,So=0,tt=En;for(;tt!==null;)qh(tt.alternate,tt),tt=tt.return;En=null}}function Hr(tt,st){var ht=tt.timeoutHandle;ht!==-1&&(tt.timeoutHandle=-1,tp(ht)),ht=tt.cancelPendingCommit,ht!==null&&(tt.cancelPendingCommit=null,ht()),Kc(),Un=tt,En=ht=os(tt.current,null),Sn=st,Mn=0,Ii=null,Ls=!1,Fr=jn(tt,st),$c=!1,$r=Ui=Uc=cr=Vs=Zn=0,Ei=Lo=null,zc=!1,(st&8)!==0&&(st|=st&32);var gt=tt.entangledLanes;if(gt!==0)for(tt=tt.entanglements,gt&=st;0<gt;){var wt=31-Jn(gt),vt=1<<wt;st|=tt[wt],gt&=~vt}return bs=st,aa(),ht}function gf(tt,st){vn=null,Dt.H=ka,st===xo||st===pa?(st=Pd(),Mn=3):st===Ad?(st=Pd(),Mn=4):Mn=st===Oh?8:st!==null&&typeof st=="object"&&typeof st.then=="function"?6:1,Ii=st,En===null&&(Zn=1,Pa(tt,Vi(st,tt.current)))}function pf(){var tt=Dt.H;return Dt.H=ka,tt===null?ka:tt}function bf(){var tt=Dt.A;return Dt.A=Lg,tt}function Gc(){Zn=4,Ls||(Sn&4194048)!==Sn&&$i.current!==null||(Fr=!0),(Vs&134217727)===0&&(cr&134217727)===0||Un===null||Fs(Un,Sn,Ui,!1)}function Zc(tt,st,ht){var gt=Bn;Bn|=2;var wt=pf(),vt=bf();(Un!==tt||Sn!==st)&&(Da=null,Hr(tt,st)),st=!1;var Rt=Zn;e:do try{if(Mn!==0&&En!==null){var Mt=En,Ft=Ii;switch(Mn){case 8:Kc(),Rt=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(st=!0);var Yt=Mn;if(Mn=0,Ii=null,Wr(tt,Mt,Ft,Yt),ht&&Fr){Rt=0;break e}break;default:Yt=Mn,Mn=0,Ii=null,Wr(tt,Mt,Ft,Yt)}}Dg(),Rt=Zn;break}catch(nn){gf(tt,nn)}while(!0);return st&&tt.shellSuspendCounter++,cs=ir=null,Bn=gt,Dt.H=wt,Dt.A=vt,En===null&&(Un=null,Sn=0,aa()),Rt}function Dg(){for(;En!==null;)xf(En)}function Fg(tt,st){var ht=Bn;Bn|=2;var gt=pf(),wt=bf();Un!==tt||Sn!==st?(Da=null,Na=Hn()+500,Hr(tt,st)):Fr=jn(tt,st);e:do try{if(Mn!==0&&En!==null){st=En;var vt=Ii;t:switch(Mn){case 1:Mn=0,Ii=null,Wr(tt,st,vt,1);break;case 2:case 9:if(Rd(vt)){Mn=0,Ii=null,wf(st);break}st=function(){Mn!==2&&Mn!==9||Un!==tt||(Mn=7),ts(tt)},vt.then(st,st);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Rd(vt)?(Mn=0,Ii=null,wf(st)):(Mn=0,Ii=null,Wr(tt,st,vt,7));break;case 5:var Rt=null;switch(En.tag){case 26:Rt=En.memoizedState;case 5:case 27:var Mt=En;if(!Rt||em(Rt)){Mn=0,Ii=null;var Ft=Mt.sibling;if(Ft!==null)En=Ft;else{var Yt=Mt.return;Yt!==null?(En=Yt,$a(Yt)):En=null}break t}}Mn=0,Ii=null,Wr(tt,st,vt,5);break;case 6:Mn=0,Ii=null,Wr(tt,st,vt,6);break;case 8:Kc(),Zn=6;break e;default:throw Error(N(462))}}$g();break}catch(nn){gf(tt,nn)}while(!0);return cs=ir=null,Dt.H=gt,Dt.A=wt,Bn=ht,En!==null?0:(Un=null,Sn=0,aa(),Zn)}function $g(){for(;En!==null&&!zn();)xf(En)}function xf(tt){var st=Wh(tt.alternate,tt,bs);tt.memoizedProps=tt.pendingProps,st===null?$a(tt):En=st}function wf(tt){var st=tt,ht=st.alternate;switch(st.tag){case 15:case 0:st=Dh(ht,st,st.pendingProps,st.type,void 0,Sn);break;case 11:st=Dh(ht,st,st.pendingProps,st.type.render,st.ref,Sn);break;case 5:uc(st);default:qh(ht,st),st=En=wd(st,bs),st=Wh(ht,st,bs)}tt.memoizedProps=tt.pendingProps,st===null?$a(tt):En=st}function Wr(tt,st,ht,gt){cs=ir=null,uc(st),Lr=null,So=0;var wt=st.return;try{if(Rg(tt,wt,st,ht,Sn)){Zn=1,Pa(tt,Vi(ht,tt.current)),En=null;return}}catch(vt){if(wt!==null)throw En=wt,vt;Zn=1,Pa(tt,Vi(ht,tt.current)),En=null;return}st.flags&32768?(Pn||gt===1?tt=!0:Fr||(Sn&536870912)!==0?tt=!1:(Ls=tt=!0,(gt===2||gt===9||gt===3||gt===6)&&(gt=$i.current,gt!==null&&gt.tag===13&&(gt.flags|=16384))),yf(st,tt)):$a(st)}function $a(tt){var st=tt;do{if((st.flags&32768)!==0){yf(st,Ls);return}tt=st.return;var ht=Pg(st.alternate,st,bs);if(ht!==null){En=ht;return}if(st=st.sibling,st!==null){En=st;return}En=st=tt}while(st!==null);Zn===0&&(Zn=5)}function yf(tt,st){do{var ht=Og(tt.alternate,tt);if(ht!==null){ht.flags&=32767,En=ht;return}if(ht=tt.return,ht!==null&&(ht.flags|=32768,ht.subtreeFlags=0,ht.deletions=null),!st&&(tt=tt.sibling,tt!==null)){En=tt;return}En=tt=ht}while(tt!==null);Zn=6,En=null}function _f(tt,st,ht,gt,wt,vt,Rt,Mt,Ft){tt.cancelPendingCommit=null;do Ua();while(hi!==0);if((Bn&6)!==0)throw Error(N(327));if(st!==null){if(st===tt.current)throw Error(N(177));if(vt=st.lanes|st.childLanes,vt|=Fl,xm(tt,ht,vt,Rt,Mt,Ft),tt===Un&&(En=Un=null,Sn=0),Ur=st,Ds=tt,zr=ht,Wc=vt,jc=wt,df=gt,(st.subtreeFlags&10256)!==0||(st.flags&10256)!==0?(tt.callbackNode=null,tt.callbackPriority=0,Wg(Kn,function(){return kf(),null})):(tt.callbackNode=null,tt.callbackPriority=0),gt=(st.flags&13878)!==0,(st.subtreeFlags&13878)!==0||gt){gt=Dt.T,Dt.T=null,wt=jt.p,jt.p=2,Rt=Bn,Bn|=4;try{Bg(tt,st,ht)}finally{Bn=Rt,jt.p=wt,Dt.T=gt}}hi=1,vf(),Cf(),Ef()}}function vf(){if(hi===1){hi=0;var tt=Ds,st=Ur,ht=(st.flags&13878)!==0;if((st.subtreeFlags&13878)!==0||ht){ht=Dt.T,Dt.T=null;var gt=jt.p;jt.p=2;var wt=Bn;Bn|=4;try{sf(st,tt);var vt=au,Rt=cd(tt.containerInfo),Mt=vt.focusedElem,Ft=vt.selectionRange;if(Rt!==Mt&&Mt&&Mt.ownerDocument&&ld(Mt.ownerDocument.documentElement,Mt)){if(Ft!==null&&Ml(Mt)){var Yt=Ft.start,nn=Ft.end;if(nn===void 0&&(nn=Yt),"selectionStart"in Mt)Mt.selectionStart=Yt,Mt.selectionEnd=Math.min(nn,Mt.value.length);else{var rn=Mt.ownerDocument||document,Xt=rn&&rn.defaultView||window;if(Xt.getSelection){var Qt=Xt.getSelection(),bn=Mt.textContent.length,mn=Math.min(Ft.start,bn),Nn=Ft.end===void 0?mn:Math.min(Ft.end,bn);!Qt.extend&&mn>Nn&&(Rt=Nn,Nn=mn,mn=Rt);var Wt=ad(Mt,mn),Ht=ad(Mt,Nn);if(Wt&&Ht&&(Qt.rangeCount!==1||Qt.anchorNode!==Wt.node||Qt.anchorOffset!==Wt.offset||Qt.focusNode!==Ht.node||Qt.focusOffset!==Ht.offset)){var Gt=rn.createRange();Gt.setStart(Wt.node,Wt.offset),Qt.removeAllRanges(),mn>Nn?(Qt.addRange(Gt),Qt.extend(Ht.node,Ht.offset)):(Gt.setEnd(Ht.node,Ht.offset),Qt.addRange(Gt))}}}}for(rn=[],Qt=Mt;Qt=Qt.parentNode;)Qt.nodeType===1&&rn.push({element:Qt,left:Qt.scrollLeft,top:Qt.scrollTop});for(typeof Mt.focus=="function"&&Mt.focus(),Mt=0;Mt<rn.length;Mt++){var sn=rn[Mt];sn.element.scrollLeft=sn.left,sn.element.scrollTop=sn.top}}Ja=!!ou,au=ou=null}finally{Bn=wt,jt.p=gt,Dt.T=ht}}tt.current=st,hi=2}}function Cf(){if(hi===2){hi=0;var tt=Ds,st=Ur,ht=(st.flags&8772)!==0;if((st.subtreeFlags&8772)!==0||ht){ht=Dt.T,Dt.T=null;var gt=jt.p;jt.p=2;var wt=Bn;Bn|=4;try{Jh(tt,st.alternate,st)}finally{Bn=wt,jt.p=gt,Dt.T=ht}}hi=3}}function Ef(){if(hi===4||hi===3){hi=0,Ti();var tt=Ds,st=Ur,ht=zr,gt=df;(st.subtreeFlags&10256)!==0||(st.flags&10256)!==0?hi=5:(hi=0,Ur=Ds=null,Tf(tt,tt.pendingLanes));var wt=tt.pendingLanes;if(wt===0&&(Ns=null),fl(ht),st=st.stateNode,ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(ji,st,void 0,(st.current.flags&128)===128)}catch{}if(gt!==null){st=Dt.T,wt=jt.p,jt.p=2,Dt.T=null;try{for(var vt=tt.onRecoverableError,Rt=0;Rt<gt.length;Rt++){var Mt=gt[Rt];vt(Mt.value,{componentStack:Mt.stack})}}finally{Dt.T=st,jt.p=wt}}(zr&3)!==0&&Ua(),ts(tt),wt=tt.pendingLanes,(ht&4194090)!==0&&(wt&42)!==0?tt===qc?Vo++:(Vo=0,qc=tt):Vo=0,No(0)}}function Tf(tt,st){(tt.pooledCacheLanes&=st)===0&&(st=tt.pooledCache,st!=null&&(tt.pooledCache=null,po(st)))}function Ua(tt){return vf(),Cf(),Ef(),kf()}function kf(){if(hi!==5)return!1;var tt=Ds,st=Wc;Wc=0;var ht=fl(zr),gt=Dt.T,wt=jt.p;try{jt.p=32>ht?32:ht,Dt.T=null,ht=jc,jc=null;var vt=Ds,Rt=zr;if(hi=0,Ur=Ds=null,zr=0,(Bn&6)!==0)throw Error(N(331));var Mt=Bn;if(Bn|=4,cf(vt.current),of(vt,vt.current,Rt,ht),Bn=Mt,No(0,!1),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(ji,vt)}catch{}return!0}finally{jt.p=wt,Dt.T=gt,Tf(tt,st)}}function Sf(tt,st,ht){st=Vi(ht,st),st=Ec(tt.stateNode,st,2),tt=As(tt,st,2),tt!==null&&(Jr(tt,2),ts(tt))}function Dn(tt,st,ht){if(tt.tag===3)Sf(tt,tt,ht);else for(;st!==null;){if(st.tag===3){Sf(st,tt,ht);break}else if(st.tag===1){var gt=st.stateNode;if(typeof st.type.getDerivedStateFromError=="function"||typeof gt.componentDidCatch=="function"&&(Ns===null||!Ns.has(gt))){tt=Vi(ht,tt),ht=Ih(2),gt=As(st,ht,2),gt!==null&&(Ph(ht,gt,st,tt),Jr(gt,2),ts(gt));break}}st=st.return}}function Yc(tt,st,ht){var gt=tt.pingCache;if(gt===null){gt=tt.pingCache=new Vg;var wt=new Set;gt.set(st,wt)}else wt=gt.get(st),wt===void 0&&(wt=new Set,gt.set(st,wt));wt.has(ht)||($c=!0,wt.add(ht),tt=Ug.bind(null,tt,st,ht),st.then(tt,tt))}function Ug(tt,st,ht){var gt=tt.pingCache;gt!==null&&gt.delete(st),tt.pingedLanes|=tt.suspendedLanes&ht,tt.warmLanes&=~ht,Un===tt&&(Sn&ht)===ht&&(Zn===4||Zn===3&&(Sn&62914560)===Sn&&300>Hn()-Hc?(Bn&2)===0&&Hr(tt,0):Uc|=ht,$r===Sn&&($r=0)),ts(tt)}function Af(tt,st){st===0&&(st=Cu()),tt=Tr(tt,st),tt!==null&&(Jr(tt,st),ts(tt))}function zg(tt){var st=tt.memoizedState,ht=0;st!==null&&(ht=st.retryLane),Af(tt,ht)}function Hg(tt,st){var ht=0;switch(tt.tag){case 13:var gt=tt.stateNode,wt=tt.memoizedState;wt!==null&&(ht=wt.retryLane);break;case 19:gt=tt.stateNode;break;case 22:gt=tt.stateNode._retryCache;break;default:throw Error(N(314))}gt!==null&&gt.delete(st),Af(tt,ht)}function Wg(tt,st){return Qn(tt,st)}var za=null,jr=null,Xc=!1,Ha=!1,Qc=!1,ur=0;function ts(tt){tt!==jr&&tt.next===null&&(jr===null?za=jr=tt:jr=jr.next=tt),Ha=!0,Xc||(Xc=!0,qg())}function No(tt,st){if(!Qc&&Ha){Qc=!0;do for(var ht=!1,gt=za;gt!==null;){if(tt!==0){var wt=gt.pendingLanes;if(wt===0)var vt=0;else{var Rt=gt.suspendedLanes,Mt=gt.pingedLanes;vt=(1<<31-Jn(42|tt)+1)-1,vt&=wt&~(Rt&~Mt),vt=vt&201326741?vt&201326741|1:vt?vt|2:0}vt!==0&&(ht=!0,Of(gt,vt))}else vt=Sn,vt=On(gt,gt===Un?vt:0,gt.cancelPendingCommit!==null||gt.timeoutHandle!==-1),(vt&3)===0||jn(gt,vt)||(ht=!0,Of(gt,vt));gt=gt.next}while(ht);Qc=!1}}function jg(){Rf()}function Rf(){Ha=Xc=!1;var tt=0;ur!==0&&(ep()&&(tt=ur),ur=0);for(var st=Hn(),ht=null,gt=za;gt!==null;){var wt=gt.next,vt=If(gt,st);vt===0?(gt.next=null,ht===null?za=wt:ht.next=wt,wt===null&&(jr=ht)):(ht=gt,(tt!==0||(vt&3)!==0)&&(Ha=!0)),gt=wt}No(tt)}function If(tt,st){for(var ht=tt.suspendedLanes,gt=tt.pingedLanes,wt=tt.expirationTimes,vt=tt.pendingLanes&-62914561;0<vt;){var Rt=31-Jn(vt),Mt=1<<Rt,Ft=wt[Rt];Ft===-1?((Mt&ht)===0||(Mt&gt)!==0)&&(wt[Rt]=vs(Mt,st)):Ft<=st&&(tt.expiredLanes|=Mt),vt&=~Mt}if(st=Un,ht=Sn,ht=On(tt,tt===st?ht:0,tt.cancelPendingCommit!==null||tt.timeoutHandle!==-1),gt=tt.callbackNode,ht===0||tt===st&&(Mn===2||Mn===9)||tt.cancelPendingCommit!==null)return gt!==null&&gt!==null&&kn(gt),tt.callbackNode=null,tt.callbackPriority=0;if((ht&3)===0||jn(tt,ht)){if(st=ht&-ht,st===tt.callbackPriority)return st;switch(gt!==null&&kn(gt),fl(ht)){case 2:case 8:ht=mi;break;case 32:ht=Kn;break;case 268435456:ht=ns;break;default:ht=Kn}return gt=Pf.bind(null,tt),ht=Qn(ht,gt),tt.callbackPriority=st,tt.callbackNode=ht,st}return gt!==null&&gt!==null&&kn(gt),tt.callbackPriority=2,tt.callbackNode=null,2}function Pf(tt,st){if(hi!==0&&hi!==5)return tt.callbackNode=null,tt.callbackPriority=0,null;var ht=tt.callbackNode;if(Ua()&&tt.callbackNode!==ht)return null;var gt=Sn;return gt=On(tt,tt===Un?gt:0,tt.cancelPendingCommit!==null||tt.timeoutHandle!==-1),gt===0?null:(ff(tt,gt,st),If(tt,Hn()),tt.callbackNode!=null&&tt.callbackNode===ht?Pf.bind(null,tt):null)}function Of(tt,st){if(Ua())return null;ff(tt,st,!0)}function qg(){np(function(){(Bn&6)!==0?Qn(Wi,jg):Rf()})}function Jc(){return ur===0&&(ur=Qr()),ur}function Bf(tt){return tt==null||typeof tt=="symbol"||typeof tt=="boolean"?null:typeof tt=="function"?tt:ea(""+tt)}function Mf(tt,st){var ht=st.ownerDocument.createElement("input");return ht.name=st.name,ht.value=st.value,tt.id&&ht.setAttribute("form",tt.id),st.parentNode.insertBefore(ht,st),tt=new FormData(tt),ht.parentNode.removeChild(ht),tt}function Kg(tt,st,ht,gt,wt){if(st==="submit"&&ht&&ht.stateNode===wt){var vt=Bf((wt[yi]||null).action),Rt=gt.submitter;Rt&&(st=(st=Rt[yi]||null)?Bf(st.formAction):Rt.getAttribute("formAction"),st!==null&&(vt=st,Rt=null));var Mt=new sa("action","action",null,gt,wt);tt.push({event:Mt,listeners:[{instance:null,listener:function(){if(gt.defaultPrevented){if(ur!==0){var Ft=Rt?Mf(wt,Rt):new FormData(wt);wc(ht,{pending:!0,data:Ft,method:wt.method,action:vt},null,Ft)}}else typeof vt=="function"&&(Mt.preventDefault(),Ft=Rt?Mf(wt,Rt):new FormData(wt),wc(ht,{pending:!0,data:Ft,method:wt.method,action:vt},vt,Ft))},currentTarget:wt}]})}}for(var eu=0;eu<Dl.length;eu++){var tu=Dl[eu],Gg=tu.toLowerCase(),Zg=tu[0].toUpperCase()+tu.slice(1);qi(Gg,"on"+Zg)}qi(hd,"onAnimationEnd"),qi(fd,"onAnimationIteration"),qi(md,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(hg,"onTransitionRun"),qi(fg,"onTransitionStart"),qi(mg,"onTransitionCancel"),qi(gd,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Do));function Lf(tt,st){st=(st&4)!==0;for(var ht=0;ht<tt.length;ht++){var gt=tt[ht],wt=gt.event;gt=gt.listeners;e:{var vt=void 0;if(st)for(var Rt=gt.length-1;0<=Rt;Rt--){var Mt=gt[Rt],Ft=Mt.instance,Yt=Mt.currentTarget;if(Mt=Mt.listener,Ft!==vt&&wt.isPropagationStopped())break e;vt=Mt,wt.currentTarget=Yt;try{vt(wt)}catch(nn){Ia(nn)}wt.currentTarget=null,vt=Ft}else for(Rt=0;Rt<gt.length;Rt++){if(Mt=gt[Rt],Ft=Mt.instance,Yt=Mt.currentTarget,Mt=Mt.listener,Ft!==vt&&wt.isPropagationStopped())break e;vt=Mt,wt.currentTarget=Yt;try{vt(wt)}catch(nn){Ia(nn)}wt.currentTarget=null,vt=Ft}}}}function Tn(tt,st){var ht=st[ml];ht===void 0&&(ht=st[ml]=new Set);var gt=tt+"__bubble";ht.has(gt)||(Vf(st,tt,2,!1),ht.add(gt))}function nu(tt,st,ht){var gt=0;st&&(gt|=4),Vf(ht,tt,gt,st)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function iu(tt){if(!tt[Wa]){tt[Wa]=!0,Au.forEach(function(ht){ht!=="selectionchange"&&(Yg.has(ht)||nu(ht,!1,tt),nu(ht,!0,tt))});var st=tt.nodeType===9?tt:tt.ownerDocument;st===null||st[Wa]||(st[Wa]=!0,nu("selectionchange",!1,st))}}function Vf(tt,st,ht,gt){switch(om(st)){case 2:var wt=Cp;break;case 8:wt=Ep;break;default:wt=bu}ht=wt.bind(null,st,ht,tt),wt=void 0,!Tl||st!=="touchstart"&&st!=="touchmove"&&st!=="wheel"||(wt=!0),gt?wt!==void 0?tt.addEventListener(st,ht,{capture:!0,passive:wt}):tt.addEventListener(st,ht,!0):wt!==void 0?tt.addEventListener(st,ht,{passive:wt}):tt.addEventListener(st,ht,!1)}function su(tt,st,ht,gt,wt){var vt=gt;if((st&1)===0&&(st&2)===0&&gt!==null)e:for(;;){if(gt===null)return;var Rt=gt.tag;if(Rt===3||Rt===4){var Mt=gt.stateNode.containerInfo;if(Mt===wt)break;if(Rt===4)for(Rt=gt.return;Rt!==null;){var Ft=Rt.tag;if((Ft===3||Ft===4)&&Rt.stateNode.containerInfo===wt)return;Rt=Rt.return}for(;Mt!==null;){if(Rt=hr(Mt),Rt===null)return;if(Ft=Rt.tag,Ft===5||Ft===6||Ft===26||Ft===27){gt=vt=Rt;continue e}Mt=Mt.parentNode}}gt=gt.return}zu(function(){var Yt=vt,nn=Cl(ht),rn=[];e:{var Xt=pd.get(tt);if(Xt!==void 0){var Qt=sa,bn=tt;switch(tt){case"keypress":if(na(ht)===0)break e;case"keydown":case"keyup":Qt=Wm;break;case"focusin":bn="focus",Qt=Rl;break;case"focusout":bn="blur",Qt=Rl;break;case"beforeblur":case"afterblur":Qt=Rl;break;case"click":if(ht.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=Om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=Km;break;case hd:case fd:case md:Qt=Lm;break;case gd:Qt=Zm;break;case"scroll":case"scrollend":Qt=Im;break;case"wheel":Qt=Xm;break;case"copy":case"cut":case"paste":Qt=Nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=Ku;break;case"toggle":case"beforetoggle":Qt=Jm}var mn=(st&4)!==0,Nn=!mn&&(tt==="scroll"||tt==="scrollend"),Wt=mn?Xt!==null?Xt+"Capture":null:Xt;mn=[];for(var Ht=Yt,Gt;Ht!==null;){var sn=Ht;if(Gt=sn.stateNode,sn=sn.tag,sn!==5&&sn!==26&&sn!==27||Gt===null||Wt===null||(sn=no(Ht,Wt),sn!=null&&mn.push(Fo(Ht,sn,Gt))),Nn)break;Ht=Ht.return}0<mn.length&&(Xt=new Qt(Xt,bn,null,ht,nn),rn.push({event:Xt,listeners:mn}))}}if((st&7)===0){e:{if(Xt=tt==="mouseover"||tt==="pointerover",Qt=tt==="mouseout"||tt==="pointerout",Xt&&ht!==vl&&(bn=ht.relatedTarget||ht.fromElement)&&(hr(bn)||bn[dr]))break e;if((Qt||Xt)&&(Xt=nn.window===nn?nn:(Xt=nn.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,Qt?(bn=ht.relatedTarget||ht.toElement,Qt=Yt,bn=bn?hr(bn):null,bn!==null&&(Nn=pe(bn),mn=bn.tag,bn!==Nn||mn!==5&&mn!==27&&mn!==6)&&(bn=null)):(Qt=null,bn=Yt),Qt!==bn)){if(mn=ju,sn="onMouseLeave",Wt="onMouseEnter",Ht="mouse",(tt==="pointerout"||tt==="pointerover")&&(mn=Ku,sn="onPointerLeave",Wt="onPointerEnter",Ht="pointer"),Nn=Qt==null?Xt:to(Qt),Gt=bn==null?Xt:to(bn),Xt=new mn(sn,Ht+"leave",Qt,ht,nn),Xt.target=Nn,Xt.relatedTarget=Gt,sn=null,hr(nn)===Yt&&(mn=new mn(Wt,Ht+"enter",bn,ht,nn),mn.target=Gt,mn.relatedTarget=Nn,sn=mn),Nn=sn,Qt&&bn)t:{for(mn=Qt,Wt=bn,Ht=0,Gt=mn;Gt;Gt=qr(Gt))Ht++;for(Gt=0,sn=Wt;sn;sn=qr(sn))Gt++;for(;0<Ht-Gt;)mn=qr(mn),Ht--;for(;0<Gt-Ht;)Wt=qr(Wt),Gt--;for(;Ht--;){if(mn===Wt||Wt!==null&&mn===Wt.alternate)break t;mn=qr(mn),Wt=qr(Wt)}mn=null}else mn=null;Qt!==null&&Nf(rn,Xt,Qt,mn,!1),bn!==null&&Nn!==null&&Nf(rn,Nn,bn,mn,!0)}}e:{if(Xt=Yt?to(Yt):window,Qt=Xt.nodeName&&Xt.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&Xt.type==="file")var dn=td;else if(Ju(Xt))if(nd)dn=cg;else{dn=ag;var Cn=og}else Qt=Xt.nodeName,!Qt||Qt.toLowerCase()!=="input"||Xt.type!=="checkbox"&&Xt.type!=="radio"?Yt&&_l(Yt.elementType)&&(dn=td):dn=lg;if(dn&&(dn=dn(tt,Yt))){ed(rn,dn,ht,nn);break e}Cn&&Cn(tt,Xt,Yt),tt==="focusout"&&Yt&&Xt.type==="number"&&Yt.memoizedProps.value!=null&&yl(Xt,"number",Xt.value)}switch(Cn=Yt?to(Yt):window,tt){case"focusin":(Ju(Cn)||Cn.contentEditable==="true")&&(vr=Cn,Ll=Yt,uo=null);break;case"focusout":uo=Ll=vr=null;break;case"mousedown":Vl=!0;break;case"contextmenu":case"mouseup":case"dragend":Vl=!1,ud(rn,ht,nn);break;case"selectionchange":if(dg)break;case"keydown":case"keyup":ud(rn,ht,nn)}var hn;if(Pl)e:{switch(tt){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else _r?Xu(tt,ht)&&(pn="onCompositionEnd"):tt==="keydown"&&ht.keyCode===229&&(pn="onCompositionStart");pn&&(Gu&&ht.locale!=="ko"&&(_r||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&_r&&(hn=Hu()):(Es=nn,kl="value"in Es?Es.value:Es.textContent,_r=!0)),Cn=ja(Yt,pn),0<Cn.length&&(pn=new qu(pn,tt,null,ht,nn),rn.push({event:pn,listeners:Cn}),hn?pn.data=hn:(hn=Qu(ht),hn!==null&&(pn.data=hn)))),(hn=tg?ng(tt,ht):ig(tt,ht))&&(pn=ja(Yt,"onBeforeInput"),0<pn.length&&(Cn=new qu("onBeforeInput","beforeinput",null,ht,nn),rn.push({event:Cn,listeners:pn}),Cn.data=hn)),Kg(rn,tt,Yt,ht,nn)}Lf(rn,st)})}function Fo(tt,st,ht){return{instance:tt,listener:st,currentTarget:ht}}function ja(tt,st){for(var ht=st+"Capture",gt=[];tt!==null;){var wt=tt,vt=wt.stateNode;if(wt=wt.tag,wt!==5&&wt!==26&&wt!==27||vt===null||(wt=no(tt,ht),wt!=null&&gt.unshift(Fo(tt,wt,vt)),wt=no(tt,st),wt!=null&&gt.push(Fo(tt,wt,vt))),tt.tag===3)return gt;tt=tt.return}return[]}function qr(tt){if(tt===null)return null;do tt=tt.return;while(tt&&tt.tag!==5&&tt.tag!==27);return tt||null}function Nf(tt,st,ht,gt,wt){for(var vt=st._reactName,Rt=[];ht!==null&&ht!==gt;){var Mt=ht,Ft=Mt.alternate,Yt=Mt.stateNode;if(Mt=Mt.tag,Ft!==null&&Ft===gt)break;Mt!==5&&Mt!==26&&Mt!==27||Yt===null||(Ft=Yt,wt?(Yt=no(ht,vt),Yt!=null&&Rt.unshift(Fo(ht,Yt,Ft))):wt||(Yt=no(ht,vt),Yt!=null&&Rt.push(Fo(ht,Yt,Ft)))),ht=ht.return}Rt.length!==0&&tt.push({event:st,listeners:Rt})}var Xg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function Df(tt){return(typeof tt=="string"?tt:""+tt).replace(Xg,`
`).replace(Qg,"")}function Ff(tt,st){return st=Df(st),Df(tt)===st}function qa(){}function Vn(tt,st,ht,gt,wt,vt){switch(ht){case"children":typeof gt=="string"?st==="body"||st==="textarea"&&gt===""||xr(tt,gt):(typeof gt=="number"||typeof gt=="bigint")&&st!=="body"&&xr(tt,""+gt);break;case"className":Xo(tt,"class",gt);break;case"tabIndex":Xo(tt,"tabindex",gt);break;case"dir":case"role":case"viewBox":case"width":case"height":Xo(tt,ht,gt);break;case"style":$u(tt,gt,vt);break;case"data":if(st!=="object"){Xo(tt,"data",gt);break}case"src":case"href":if(gt===""&&(st!=="a"||ht!=="href")){tt.removeAttribute(ht);break}if(gt==null||typeof gt=="function"||typeof gt=="symbol"||typeof gt=="boolean"){tt.removeAttribute(ht);break}gt=ea(""+gt),tt.setAttribute(ht,gt);break;case"action":case"formAction":if(typeof gt=="function"){tt.setAttribute(ht,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof vt=="function"&&(ht==="formAction"?(st!=="input"&&Vn(tt,st,"name",wt.name,wt,null),Vn(tt,st,"formEncType",wt.formEncType,wt,null),Vn(tt,st,"formMethod",wt.formMethod,wt,null),Vn(tt,st,"formTarget",wt.formTarget,wt,null)):(Vn(tt,st,"encType",wt.encType,wt,null),Vn(tt,st,"method",wt.method,wt,null),Vn(tt,st,"target",wt.target,wt,null)));if(gt==null||typeof gt=="symbol"||typeof gt=="boolean"){tt.removeAttribute(ht);break}gt=ea(""+gt),tt.setAttribute(ht,gt);break;case"onClick":gt!=null&&(tt.onclick=qa);break;case"onScroll":gt!=null&&Tn("scroll",tt);break;case"onScrollEnd":gt!=null&&Tn("scrollend",tt);break;case"dangerouslySetInnerHTML":if(gt!=null){if(typeof gt!="object"||!("__html"in gt))throw Error(N(61));if(ht=gt.__html,ht!=null){if(wt.children!=null)throw Error(N(60));tt.innerHTML=ht}}break;case"multiple":tt.multiple=gt&&typeof gt!="function"&&typeof gt!="symbol";break;case"muted":tt.muted=gt&&typeof gt!="function"&&typeof gt!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(gt==null||typeof gt=="function"||typeof gt=="boolean"||typeof gt=="symbol"){tt.removeAttribute("xlink:href");break}ht=ea(""+gt),tt.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ht);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":gt!=null&&typeof gt!="function"&&typeof gt!="symbol"?tt.setAttribute(ht,""+gt):tt.removeAttribute(ht);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":gt&&typeof gt!="function"&&typeof gt!="symbol"?tt.setAttribute(ht,""):tt.removeAttribute(ht);break;case"capture":case"download":gt===!0?tt.setAttribute(ht,""):gt!==!1&&gt!=null&&typeof gt!="function"&&typeof gt!="symbol"?tt.setAttribute(ht,gt):tt.removeAttribute(ht);break;case"cols":case"rows":case"size":case"span":gt!=null&&typeof gt!="function"&&typeof gt!="symbol"&&!isNaN(gt)&&1<=gt?tt.setAttribute(ht,gt):tt.removeAttribute(ht);break;case"rowSpan":case"start":gt==null||typeof gt=="function"||typeof gt=="symbol"||isNaN(gt)?tt.removeAttribute(ht):tt.setAttribute(ht,gt);break;case"popover":Tn("beforetoggle",tt),Tn("toggle",tt),Yo(tt,"popover",gt);break;case"xlinkActuate":ss(tt,"http://www.w3.org/1999/xlink","xlink:actuate",gt);break;case"xlinkArcrole":ss(tt,"http://www.w3.org/1999/xlink","xlink:arcrole",gt);break;case"xlinkRole":ss(tt,"http://www.w3.org/1999/xlink","xlink:role",gt);break;case"xlinkShow":ss(tt,"http://www.w3.org/1999/xlink","xlink:show",gt);break;case"xlinkTitle":ss(tt,"http://www.w3.org/1999/xlink","xlink:title",gt);break;case"xlinkType":ss(tt,"http://www.w3.org/1999/xlink","xlink:type",gt);break;case"xmlBase":ss(tt,"http://www.w3.org/XML/1998/namespace","xml:base",gt);break;case"xmlLang":ss(tt,"http://www.w3.org/XML/1998/namespace","xml:lang",gt);break;case"xmlSpace":ss(tt,"http://www.w3.org/XML/1998/namespace","xml:space",gt);break;case"is":Yo(tt,"is",gt);break;case"innerText":case"textContent":break;default:(!(2<ht.length)||ht[0]!=="o"&&ht[0]!=="O"||ht[1]!=="n"&&ht[1]!=="N")&&(ht=Am.get(ht)||ht,Yo(tt,ht,gt))}}function ru(tt,st,ht,gt,wt,vt){switch(ht){case"style":$u(tt,gt,vt);break;case"dangerouslySetInnerHTML":if(gt!=null){if(typeof gt!="object"||!("__html"in gt))throw Error(N(61));if(ht=gt.__html,ht!=null){if(wt.children!=null)throw Error(N(60));tt.innerHTML=ht}}break;case"children":typeof gt=="string"?xr(tt,gt):(typeof gt=="number"||typeof gt=="bigint")&&xr(tt,""+gt);break;case"onScroll":gt!=null&&Tn("scroll",tt);break;case"onScrollEnd":gt!=null&&Tn("scrollend",tt);break;case"onClick":gt!=null&&(tt.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ru.hasOwnProperty(ht))e:{if(ht[0]==="o"&&ht[1]==="n"&&(wt=ht.endsWith("Capture"),st=ht.slice(2,wt?ht.length-7:void 0),vt=tt[yi]||null,vt=vt!=null?vt[ht]:null,typeof vt=="function"&&tt.removeEventListener(st,vt,wt),typeof gt=="function")){typeof vt!="function"&&vt!==null&&(ht in tt?tt[ht]=null:tt.hasAttribute(ht)&&tt.removeAttribute(ht)),tt.addEventListener(st,gt,wt);break e}ht in tt?tt[ht]=gt:gt===!0?tt.setAttribute(ht,""):Yo(tt,ht,gt)}}}function fi(tt,st,ht){switch(st){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tn("error",tt),Tn("load",tt);var gt=!1,wt=!1,vt;for(vt in ht)if(ht.hasOwnProperty(vt)){var Rt=ht[vt];if(Rt!=null)switch(vt){case"src":gt=!0;break;case"srcSet":wt=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,st));default:Vn(tt,st,vt,Rt,ht,null)}}wt&&Vn(tt,st,"srcSet",ht.srcSet,ht,null),gt&&Vn(tt,st,"src",ht.src,ht,null);return;case"input":Tn("invalid",tt);var Mt=vt=Rt=wt=null,Ft=null,Yt=null;for(gt in ht)if(ht.hasOwnProperty(gt)){var nn=ht[gt];if(nn!=null)switch(gt){case"name":wt=nn;break;case"type":Rt=nn;break;case"checked":Ft=nn;break;case"defaultChecked":Yt=nn;break;case"value":vt=nn;break;case"defaultValue":Mt=nn;break;case"children":case"dangerouslySetInnerHTML":if(nn!=null)throw Error(N(137,st));break;default:Vn(tt,st,gt,nn,ht,null)}}Vu(tt,vt,Mt,Ft,Yt,Rt,wt,!1),Qo(tt);return;case"select":Tn("invalid",tt),gt=Rt=vt=null;for(wt in ht)if(ht.hasOwnProperty(wt)&&(Mt=ht[wt],Mt!=null))switch(wt){case"value":vt=Mt;break;case"defaultValue":Rt=Mt;break;case"multiple":gt=Mt;default:Vn(tt,st,wt,Mt,ht,null)}st=vt,ht=Rt,tt.multiple=!!gt,st!=null?br(tt,!!gt,st,!1):ht!=null&&br(tt,!!gt,ht,!0);return;case"textarea":Tn("invalid",tt),vt=wt=gt=null;for(Rt in ht)if(ht.hasOwnProperty(Rt)&&(Mt=ht[Rt],Mt!=null))switch(Rt){case"value":gt=Mt;break;case"defaultValue":wt=Mt;break;case"children":vt=Mt;break;case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(N(91));break;default:Vn(tt,st,Rt,Mt,ht,null)}Du(tt,gt,wt,vt),Qo(tt);return;case"option":for(Ft in ht)if(ht.hasOwnProperty(Ft)&&(gt=ht[Ft],gt!=null))switch(Ft){case"selected":tt.selected=gt&&typeof gt!="function"&&typeof gt!="symbol";break;default:Vn(tt,st,Ft,gt,ht,null)}return;case"dialog":Tn("beforetoggle",tt),Tn("toggle",tt),Tn("cancel",tt),Tn("close",tt);break;case"iframe":case"object":Tn("load",tt);break;case"video":case"audio":for(gt=0;gt<Do.length;gt++)Tn(Do[gt],tt);break;case"image":Tn("error",tt),Tn("load",tt);break;case"details":Tn("toggle",tt);break;case"embed":case"source":case"link":Tn("error",tt),Tn("load",tt);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Yt in ht)if(ht.hasOwnProperty(Yt)&&(gt=ht[Yt],gt!=null))switch(Yt){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,st));default:Vn(tt,st,Yt,gt,ht,null)}return;default:if(_l(st)){for(nn in ht)ht.hasOwnProperty(nn)&&(gt=ht[nn],gt!==void 0&&ru(tt,st,nn,gt,ht,void 0));return}}for(Mt in ht)ht.hasOwnProperty(Mt)&&(gt=ht[Mt],gt!=null&&Vn(tt,st,Mt,gt,ht,null))}function Jg(tt,st,ht,gt){switch(st){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var wt=null,vt=null,Rt=null,Mt=null,Ft=null,Yt=null,nn=null;for(Qt in ht){var rn=ht[Qt];if(ht.hasOwnProperty(Qt)&&rn!=null)switch(Qt){case"checked":break;case"value":break;case"defaultValue":Ft=rn;default:gt.hasOwnProperty(Qt)||Vn(tt,st,Qt,null,gt,rn)}}for(var Xt in gt){var Qt=gt[Xt];if(rn=ht[Xt],gt.hasOwnProperty(Xt)&&(Qt!=null||rn!=null))switch(Xt){case"type":vt=Qt;break;case"name":wt=Qt;break;case"checked":Yt=Qt;break;case"defaultChecked":nn=Qt;break;case"value":Rt=Qt;break;case"defaultValue":Mt=Qt;break;case"children":case"dangerouslySetInnerHTML":if(Qt!=null)throw Error(N(137,st));break;default:Qt!==rn&&Vn(tt,st,Xt,Qt,gt,rn)}}wl(tt,Rt,Mt,Ft,Yt,nn,vt,wt);return;case"select":Qt=Rt=Mt=Xt=null;for(vt in ht)if(Ft=ht[vt],ht.hasOwnProperty(vt)&&Ft!=null)switch(vt){case"value":break;case"multiple":Qt=Ft;default:gt.hasOwnProperty(vt)||Vn(tt,st,vt,null,gt,Ft)}for(wt in gt)if(vt=gt[wt],Ft=ht[wt],gt.hasOwnProperty(wt)&&(vt!=null||Ft!=null))switch(wt){case"value":Xt=vt;break;case"defaultValue":Mt=vt;break;case"multiple":Rt=vt;default:vt!==Ft&&Vn(tt,st,wt,vt,gt,Ft)}st=Mt,ht=Rt,gt=Qt,Xt!=null?br(tt,!!ht,Xt,!1):!!gt!=!!ht&&(st!=null?br(tt,!!ht,st,!0):br(tt,!!ht,ht?[]:"",!1));return;case"textarea":Qt=Xt=null;for(Mt in ht)if(wt=ht[Mt],ht.hasOwnProperty(Mt)&&wt!=null&&!gt.hasOwnProperty(Mt))switch(Mt){case"value":break;case"children":break;default:Vn(tt,st,Mt,null,gt,wt)}for(Rt in gt)if(wt=gt[Rt],vt=ht[Rt],gt.hasOwnProperty(Rt)&&(wt!=null||vt!=null))switch(Rt){case"value":Xt=wt;break;case"defaultValue":Qt=wt;break;case"children":break;case"dangerouslySetInnerHTML":if(wt!=null)throw Error(N(91));break;default:wt!==vt&&Vn(tt,st,Rt,wt,gt,vt)}Nu(tt,Xt,Qt);return;case"option":for(var bn in ht)if(Xt=ht[bn],ht.hasOwnProperty(bn)&&Xt!=null&&!gt.hasOwnProperty(bn))switch(bn){case"selected":tt.selected=!1;break;default:Vn(tt,st,bn,null,gt,Xt)}for(Ft in gt)if(Xt=gt[Ft],Qt=ht[Ft],gt.hasOwnProperty(Ft)&&Xt!==Qt&&(Xt!=null||Qt!=null))switch(Ft){case"selected":tt.selected=Xt&&typeof Xt!="function"&&typeof Xt!="symbol";break;default:Vn(tt,st,Ft,Xt,gt,Qt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mn in ht)Xt=ht[mn],ht.hasOwnProperty(mn)&&Xt!=null&&!gt.hasOwnProperty(mn)&&Vn(tt,st,mn,null,gt,Xt);for(Yt in gt)if(Xt=gt[Yt],Qt=ht[Yt],gt.hasOwnProperty(Yt)&&Xt!==Qt&&(Xt!=null||Qt!=null))switch(Yt){case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(N(137,st));break;default:Vn(tt,st,Yt,Xt,gt,Qt)}return;default:if(_l(st)){for(var Nn in ht)Xt=ht[Nn],ht.hasOwnProperty(Nn)&&Xt!==void 0&&!gt.hasOwnProperty(Nn)&&ru(tt,st,Nn,void 0,gt,Xt);for(nn in gt)Xt=gt[nn],Qt=ht[nn],!gt.hasOwnProperty(nn)||Xt===Qt||Xt===void 0&&Qt===void 0||ru(tt,st,nn,Xt,gt,Qt);return}}for(var Wt in ht)Xt=ht[Wt],ht.hasOwnProperty(Wt)&&Xt!=null&&!gt.hasOwnProperty(Wt)&&Vn(tt,st,Wt,null,gt,Xt);for(rn in gt)Xt=gt[rn],Qt=ht[rn],!gt.hasOwnProperty(rn)||Xt===Qt||Xt==null&&Qt==null||Vn(tt,st,rn,Xt,gt,Qt)}var ou=null,au=null;function Ka(tt){return tt.nodeType===9?tt:tt.ownerDocument}function $f(tt){switch(tt){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uf(tt,st){if(tt===0)switch(st){case"svg":return 1;case"math":return 2;default:return 0}return tt===1&&st==="foreignObject"?0:tt}function lu(tt,st){return tt==="textarea"||tt==="noscript"||typeof st.children=="string"||typeof st.children=="number"||typeof st.children=="bigint"||typeof st.dangerouslySetInnerHTML=="object"&&st.dangerouslySetInnerHTML!==null&&st.dangerouslySetInnerHTML.__html!=null}var cu=null;function ep(){var tt=window.event;return tt&&tt.type==="popstate"?tt===cu?!1:(cu=tt,!0):(cu=null,!1)}var zf=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(tt){return Hf.resolve(null).then(tt).catch(ip)}:zf;function ip(tt){setTimeout(function(){throw tt})}function $s(tt){return tt==="head"}function Wf(tt,st){var ht=st,gt=0,wt=0;do{var vt=ht.nextSibling;if(tt.removeChild(ht),vt&&vt.nodeType===8)if(ht=vt.data,ht==="/$"){if(0<gt&&8>gt){ht=gt;var Rt=tt.ownerDocument;if(ht&1&&$o(Rt.documentElement),ht&2&&$o(Rt.body),ht&4)for(ht=Rt.head,$o(ht),Rt=ht.firstChild;Rt;){var Mt=Rt.nextSibling,Ft=Rt.nodeName;Rt[eo]||Ft==="SCRIPT"||Ft==="STYLE"||Ft==="LINK"&&Rt.rel.toLowerCase()==="stylesheet"||ht.removeChild(Rt),Rt=Mt}}if(wt===0){tt.removeChild(vt),Go(st);return}wt--}else ht==="$"||ht==="$?"||ht==="$!"?wt++:gt=ht.charCodeAt(0)-48;else gt=0;ht=vt}while(ht);Go(st)}function uu(tt){var st=tt.firstChild;for(st&&st.nodeType===10&&(st=st.nextSibling);st;){var ht=st;switch(st=st.nextSibling,ht.nodeName){case"HTML":case"HEAD":case"BODY":uu(ht),gl(ht);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ht.rel.toLowerCase()==="stylesheet")continue}tt.removeChild(ht)}}function sp(tt,st,ht,gt){for(;tt.nodeType===1;){var wt=ht;if(tt.nodeName.toLowerCase()!==st.toLowerCase()){if(!gt&&(tt.nodeName!=="INPUT"||tt.type!=="hidden"))break}else if(gt){if(!tt[eo])switch(st){case"meta":if(!tt.hasAttribute("itemprop"))break;return tt;case"link":if(vt=tt.getAttribute("rel"),vt==="stylesheet"&&tt.hasAttribute("data-precedence"))break;if(vt!==wt.rel||tt.getAttribute("href")!==(wt.href==null||wt.href===""?null:wt.href)||tt.getAttribute("crossorigin")!==(wt.crossOrigin==null?null:wt.crossOrigin)||tt.getAttribute("title")!==(wt.title==null?null:wt.title))break;return tt;case"style":if(tt.hasAttribute("data-precedence"))break;return tt;case"script":if(vt=tt.getAttribute("src"),(vt!==(wt.src==null?null:wt.src)||tt.getAttribute("type")!==(wt.type==null?null:wt.type)||tt.getAttribute("crossorigin")!==(wt.crossOrigin==null?null:wt.crossOrigin))&&vt&&tt.hasAttribute("async")&&!tt.hasAttribute("itemprop"))break;return tt;default:return tt}}else if(st==="input"&&tt.type==="hidden"){var vt=wt.name==null?null:""+wt.name;if(wt.type==="hidden"&&tt.getAttribute("name")===vt)return tt}else return tt;if(tt=Gi(tt.nextSibling),tt===null)break}return null}function rp(tt,st,ht){if(st==="")return null;for(;tt.nodeType!==3;)if((tt.nodeType!==1||tt.nodeName!=="INPUT"||tt.type!=="hidden")&&!ht||(tt=Gi(tt.nextSibling),tt===null))return null;return tt}function du(tt){return tt.data==="$!"||tt.data==="$?"&&tt.ownerDocument.readyState==="complete"}function op(tt,st){var ht=tt.ownerDocument;if(tt.data!=="$?"||ht.readyState==="complete")st();else{var gt=function(){st(),ht.removeEventListener("DOMContentLoaded",gt)};ht.addEventListener("DOMContentLoaded",gt),tt._reactRetry=gt}}function Gi(tt){for(;tt!=null;tt=tt.nextSibling){var st=tt.nodeType;if(st===1||st===3)break;if(st===8){if(st=tt.data,st==="$"||st==="$!"||st==="$?"||st==="F!"||st==="F")break;if(st==="/$")return null}}return tt}var hu=null;function jf(tt){tt=tt.previousSibling;for(var st=0;tt;){if(tt.nodeType===8){var ht=tt.data;if(ht==="$"||ht==="$!"||ht==="$?"){if(st===0)return tt;st--}else ht==="/$"&&st++}tt=tt.previousSibling}return null}function qf(tt,st,ht){switch(st=Ka(ht),tt){case"html":if(tt=st.documentElement,!tt)throw Error(N(452));return tt;case"head":if(tt=st.head,!tt)throw Error(N(453));return tt;case"body":if(tt=st.body,!tt)throw Error(N(454));return tt;default:throw Error(N(451))}}function $o(tt){for(var st=tt.attributes;st.length;)tt.removeAttributeNode(st[0]);gl(tt)}var zi=new Map,Kf=new Set;function Ga(tt){return typeof tt.getRootNode=="function"?tt.getRootNode():tt.nodeType===9?tt:tt.ownerDocument}var xs=jt.d;jt.d={f:ap,r:lp,D:cp,C:up,L:dp,m:hp,X:mp,S:fp,M:gp};function ap(){var tt=xs.f(),st=Fa();return tt||st}function lp(tt){var st=fr(tt);st!==null&&st.tag===5&&st.type==="form"?hh(st):xs.r(tt)}var Kr=typeof document>"u"?null:document;function Gf(tt,st,ht){var gt=Kr;if(gt&&typeof st=="string"&&st){var wt=Li(st);wt='link[rel="'+tt+'"][href="'+wt+'"]',typeof ht=="string"&&(wt+='[crossorigin="'+ht+'"]'),Kf.has(wt)||(Kf.add(wt),tt={rel:tt,crossOrigin:ht,href:st},gt.querySelector(wt)===null&&(st=gt.createElement("link"),fi(st,"link",tt),oi(st),gt.head.appendChild(st)))}}function cp(tt){xs.D(tt),Gf("dns-prefetch",tt,null)}function up(tt,st){xs.C(tt,st),Gf("preconnect",tt,st)}function dp(tt,st,ht){xs.L(tt,st,ht);var gt=Kr;if(gt&&tt&&st){var wt='link[rel="preload"][as="'+Li(st)+'"]';st==="image"&&ht&&ht.imageSrcSet?(wt+='[imagesrcset="'+Li(ht.imageSrcSet)+'"]',typeof ht.imageSizes=="string"&&(wt+='[imagesizes="'+Li(ht.imageSizes)+'"]')):wt+='[href="'+Li(tt)+'"]';var vt=wt;switch(st){case"style":vt=Gr(tt);break;case"script":vt=Zr(tt)}zi.has(vt)||(tt=ft({rel:"preload",href:st==="image"&&ht&&ht.imageSrcSet?void 0:tt,as:st},ht),zi.set(vt,tt),gt.querySelector(wt)!==null||st==="style"&&gt.querySelector(Uo(vt))||st==="script"&&gt.querySelector(zo(vt))||(st=gt.createElement("link"),fi(st,"link",tt),oi(st),gt.head.appendChild(st)))}}function hp(tt,st){xs.m(tt,st);var ht=Kr;if(ht&&tt){var gt=st&&typeof st.as=="string"?st.as:"script",wt='link[rel="modulepreload"][as="'+Li(gt)+'"][href="'+Li(tt)+'"]',vt=wt;switch(gt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":vt=Zr(tt)}if(!zi.has(vt)&&(tt=ft({rel:"modulepreload",href:tt},st),zi.set(vt,tt),ht.querySelector(wt)===null)){switch(gt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ht.querySelector(zo(vt)))return}gt=ht.createElement("link"),fi(gt,"link",tt),oi(gt),ht.head.appendChild(gt)}}}function fp(tt,st,ht){xs.S(tt,st,ht);var gt=Kr;if(gt&&tt){var wt=mr(gt).hoistableStyles,vt=Gr(tt);st=st||"default";var Rt=wt.get(vt);if(!Rt){var Mt={loading:0,preload:null};if(Rt=gt.querySelector(Uo(vt)))Mt.loading=5;else{tt=ft({rel:"stylesheet",href:tt,"data-precedence":st},ht),(ht=zi.get(vt))&&fu(tt,ht);var Ft=Rt=gt.createElement("link");oi(Ft),fi(Ft,"link",tt),Ft._p=new Promise(function(Yt,nn){Ft.onload=Yt,Ft.onerror=nn}),Ft.addEventListener("load",function(){Mt.loading|=1}),Ft.addEventListener("error",function(){Mt.loading|=2}),Mt.loading|=4,Za(Rt,st,gt)}Rt={type:"stylesheet",instance:Rt,count:1,state:Mt},wt.set(vt,Rt)}}}function mp(tt,st){xs.X(tt,st);var ht=Kr;if(ht&&tt){var gt=mr(ht).hoistableScripts,wt=Zr(tt),vt=gt.get(wt);vt||(vt=ht.querySelector(zo(wt)),vt||(tt=ft({src:tt,async:!0},st),(st=zi.get(wt))&&mu(tt,st),vt=ht.createElement("script"),oi(vt),fi(vt,"link",tt),ht.head.appendChild(vt)),vt={type:"script",instance:vt,count:1,state:null},gt.set(wt,vt))}}function gp(tt,st){xs.M(tt,st);var ht=Kr;if(ht&&tt){var gt=mr(ht).hoistableScripts,wt=Zr(tt),vt=gt.get(wt);vt||(vt=ht.querySelector(zo(wt)),vt||(tt=ft({src:tt,async:!0,type:"module"},st),(st=zi.get(wt))&&mu(tt,st),vt=ht.createElement("script"),oi(vt),fi(vt,"link",tt),ht.head.appendChild(vt)),vt={type:"script",instance:vt,count:1,state:null},gt.set(wt,vt))}}function Zf(tt,st,ht,gt){var wt=(wt=un.current)?Ga(wt):null;if(!wt)throw Error(N(446));switch(tt){case"meta":case"title":return null;case"style":return typeof ht.precedence=="string"&&typeof ht.href=="string"?(st=Gr(ht.href),ht=mr(wt).hoistableStyles,gt=ht.get(st),gt||(gt={type:"style",instance:null,count:0,state:null},ht.set(st,gt)),gt):{type:"void",instance:null,count:0,state:null};case"link":if(ht.rel==="stylesheet"&&typeof ht.href=="string"&&typeof ht.precedence=="string"){tt=Gr(ht.href);var vt=mr(wt).hoistableStyles,Rt=vt.get(tt);if(Rt||(wt=wt.ownerDocument||wt,Rt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},vt.set(tt,Rt),(vt=wt.querySelector(Uo(tt)))&&!vt._p&&(Rt.instance=vt,Rt.state.loading=5),zi.has(tt)||(ht={rel:"preload",as:"style",href:ht.href,crossOrigin:ht.crossOrigin,integrity:ht.integrity,media:ht.media,hrefLang:ht.hrefLang,referrerPolicy:ht.referrerPolicy},zi.set(tt,ht),vt||pp(wt,tt,ht,Rt.state))),st&&gt===null)throw Error(N(528,""));return Rt}if(st&&gt!==null)throw Error(N(529,""));return null;case"script":return st=ht.async,ht=ht.src,typeof ht=="string"&&st&&typeof st!="function"&&typeof st!="symbol"?(st=Zr(ht),ht=mr(wt).hoistableScripts,gt=ht.get(st),gt||(gt={type:"script",instance:null,count:0,state:null},ht.set(st,gt)),gt):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,tt))}}function Gr(tt){return'href="'+Li(tt)+'"'}function Uo(tt){return'link[rel="stylesheet"]['+tt+"]"}function Yf(tt){return ft({},tt,{"data-precedence":tt.precedence,precedence:null})}function pp(tt,st,ht,gt){tt.querySelector('link[rel="preload"][as="style"]['+st+"]")?gt.loading=1:(st=tt.createElement("link"),gt.preload=st,st.addEventListener("load",function(){return gt.loading|=1}),st.addEventListener("error",function(){return gt.loading|=2}),fi(st,"link",ht),oi(st),tt.head.appendChild(st))}function Zr(tt){return'[src="'+Li(tt)+'"]'}function zo(tt){return"script[async]"+tt}function Xf(tt,st,ht){if(st.count++,st.instance===null)switch(st.type){case"style":var gt=tt.querySelector('style[data-href~="'+Li(ht.href)+'"]');if(gt)return st.instance=gt,oi(gt),gt;var wt=ft({},ht,{"data-href":ht.href,"data-precedence":ht.precedence,href:null,precedence:null});return gt=(tt.ownerDocument||tt).createElement("style"),oi(gt),fi(gt,"style",wt),Za(gt,ht.precedence,tt),st.instance=gt;case"stylesheet":wt=Gr(ht.href);var vt=tt.querySelector(Uo(wt));if(vt)return st.state.loading|=4,st.instance=vt,oi(vt),vt;gt=Yf(ht),(wt=zi.get(wt))&&fu(gt,wt),vt=(tt.ownerDocument||tt).createElement("link"),oi(vt);var Rt=vt;return Rt._p=new Promise(function(Mt,Ft){Rt.onload=Mt,Rt.onerror=Ft}),fi(vt,"link",gt),st.state.loading|=4,Za(vt,ht.precedence,tt),st.instance=vt;case"script":return vt=Zr(ht.src),(wt=tt.querySelector(zo(vt)))?(st.instance=wt,oi(wt),wt):(gt=ht,(wt=zi.get(vt))&&(gt=ft({},ht),mu(gt,wt)),tt=tt.ownerDocument||tt,wt=tt.createElement("script"),oi(wt),fi(wt,"link",gt),tt.head.appendChild(wt),st.instance=wt);case"void":return null;default:throw Error(N(443,st.type))}else st.type==="stylesheet"&&(st.state.loading&4)===0&&(gt=st.instance,st.state.loading|=4,Za(gt,ht.precedence,tt));return st.instance}function Za(tt,st,ht){for(var gt=ht.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),wt=gt.length?gt[gt.length-1]:null,vt=wt,Rt=0;Rt<gt.length;Rt++){var Mt=gt[Rt];if(Mt.dataset.precedence===st)vt=Mt;else if(vt!==wt)break}vt?vt.parentNode.insertBefore(tt,vt.nextSibling):(st=ht.nodeType===9?ht.head:ht,st.insertBefore(tt,st.firstChild))}function fu(tt,st){tt.crossOrigin==null&&(tt.crossOrigin=st.crossOrigin),tt.referrerPolicy==null&&(tt.referrerPolicy=st.referrerPolicy),tt.title==null&&(tt.title=st.title)}function mu(tt,st){tt.crossOrigin==null&&(tt.crossOrigin=st.crossOrigin),tt.referrerPolicy==null&&(tt.referrerPolicy=st.referrerPolicy),tt.integrity==null&&(tt.integrity=st.integrity)}var Ya=null;function Qf(tt,st,ht){if(Ya===null){var gt=new Map,wt=Ya=new Map;wt.set(ht,gt)}else wt=Ya,gt=wt.get(ht),gt||(gt=new Map,wt.set(ht,gt));if(gt.has(tt))return gt;for(gt.set(tt,null),ht=ht.getElementsByTagName(tt),wt=0;wt<ht.length;wt++){var vt=ht[wt];if(!(vt[eo]||vt[pi]||tt==="link"&&vt.getAttribute("rel")==="stylesheet")&&vt.namespaceURI!=="http://www.w3.org/2000/svg"){var Rt=vt.getAttribute(st)||"";Rt=tt+Rt;var Mt=gt.get(Rt);Mt?Mt.push(vt):gt.set(Rt,[vt])}}return gt}function Jf(tt,st,ht){tt=tt.ownerDocument||tt,tt.head.insertBefore(ht,st==="title"?tt.querySelector("head > title"):null)}function bp(tt,st,ht){if(ht===1||st.itemProp!=null)return!1;switch(tt){case"meta":case"title":return!0;case"style":if(typeof st.precedence!="string"||typeof st.href!="string"||st.href==="")break;return!0;case"link":if(typeof st.rel!="string"||typeof st.href!="string"||st.href===""||st.onLoad||st.onError)break;switch(st.rel){case"stylesheet":return tt=st.disabled,typeof st.precedence=="string"&&tt==null;default:return!0}case"script":if(st.async&&typeof st.async!="function"&&typeof st.async!="symbol"&&!st.onLoad&&!st.onError&&st.src&&typeof st.src=="string")return!0}return!1}function em(tt){return!(tt.type==="stylesheet"&&(tt.state.loading&3)===0)}var Ho=null;function xp(){}function wp(tt,st,ht){if(Ho===null)throw Error(N(475));var gt=Ho;if(st.type==="stylesheet"&&(typeof ht.media!="string"||matchMedia(ht.media).matches!==!1)&&(st.state.loading&4)===0){if(st.instance===null){var wt=Gr(ht.href),vt=tt.querySelector(Uo(wt));if(vt){tt=vt._p,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"&&(gt.count++,gt=Xa.bind(gt),tt.then(gt,gt)),st.state.loading|=4,st.instance=vt,oi(vt);return}vt=tt.ownerDocument||tt,ht=Yf(ht),(wt=zi.get(wt))&&fu(ht,wt),vt=vt.createElement("link"),oi(vt);var Rt=vt;Rt._p=new Promise(function(Mt,Ft){Rt.onload=Mt,Rt.onerror=Ft}),fi(vt,"link",ht),st.instance=vt}gt.stylesheets===null&&(gt.stylesheets=new Map),gt.stylesheets.set(st,tt),(tt=st.state.preload)&&(st.state.loading&3)===0&&(gt.count++,st=Xa.bind(gt),tt.addEventListener("load",st),tt.addEventListener("error",st))}}function yp(){if(Ho===null)throw Error(N(475));var tt=Ho;return tt.stylesheets&&tt.count===0&&gu(tt,tt.stylesheets),0<tt.count?function(st){var ht=setTimeout(function(){if(tt.stylesheets&&gu(tt,tt.stylesheets),tt.unsuspend){var gt=tt.unsuspend;tt.unsuspend=null,gt()}},6e4);return tt.unsuspend=st,function(){tt.unsuspend=null,clearTimeout(ht)}}:null}function Xa(){if(this.count--,this.count===0){if(this.stylesheets)gu(this,this.stylesheets);else if(this.unsuspend){var tt=this.unsuspend;this.unsuspend=null,tt()}}}var Qa=null;function gu(tt,st){tt.stylesheets=null,tt.unsuspend!==null&&(tt.count++,Qa=new Map,st.forEach(_p,tt),Qa=null,Xa.call(tt))}function _p(tt,st){if(!(st.state.loading&4)){var ht=Qa.get(tt);if(ht)var gt=ht.get(null);else{ht=new Map,Qa.set(tt,ht);for(var wt=tt.querySelectorAll("link[data-precedence],style[data-precedence]"),vt=0;vt<wt.length;vt++){var Rt=wt[vt];(Rt.nodeName==="LINK"||Rt.getAttribute("media")!=="not all")&&(ht.set(Rt.dataset.precedence,Rt),gt=Rt)}gt&&ht.set(null,gt)}wt=st.instance,Rt=wt.getAttribute("data-precedence"),vt=ht.get(Rt)||gt,vt===gt&&ht.set(null,wt),ht.set(Rt,wt),this.count++,gt=Xa.bind(this),wt.addEventListener("load",gt),wt.addEventListener("error",gt),vt?vt.parentNode.insertBefore(wt,vt.nextSibling):(tt=tt.nodeType===9?tt.head:tt,tt.insertBefore(wt,tt.firstChild)),st.state.loading|=4}}var Wo={$$typeof:Pt,Provider:null,Consumer:null,_currentValue:en,_currentValue2:en,_threadCount:0};function vp(tt,st,ht,gt,wt,vt,Rt,Mt){this.tag=1,this.containerInfo=tt,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.hiddenUpdates=dl(null),this.identifierPrefix=gt,this.onUncaughtError=wt,this.onCaughtError=vt,this.onRecoverableError=Rt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Mt,this.incompleteTransitions=new Map}function tm(tt,st,ht,gt,wt,vt,Rt,Mt,Ft,Yt,nn,rn){return tt=new vp(tt,st,ht,Rt,Mt,Ft,Yt,rn),st=1,vt===!0&&(st|=24),vt=Si(3,null,null,st),tt.current=vt,vt.stateNode=tt,st=Yl(),st.refCount++,tt.pooledCache=st,st.refCount++,vt.memoizedState={element:gt,isDehydrated:ht,cache:st},ec(vt),tt}function nm(tt){return tt?(tt=kr,tt):kr}function im(tt,st,ht,gt,wt,vt){wt=nm(wt),gt.context===null?gt.context=wt:gt.pendingContext=wt,gt=Ss(st),gt.payload={element:ht},vt=vt===void 0?null:vt,vt!==null&&(gt.callback=vt),ht=As(tt,gt,st),ht!==null&&(Oi(ht,tt,st),yo(ht,tt,st))}function sm(tt,st){if(tt=tt.memoizedState,tt!==null&&tt.dehydrated!==null){var ht=tt.retryLane;tt.retryLane=ht!==0&&ht<st?ht:st}}function pu(tt,st){sm(tt,st),(tt=tt.alternate)&&sm(tt,st)}function rm(tt){if(tt.tag===13){var st=Tr(tt,67108864);st!==null&&Oi(st,tt,67108864),pu(tt,67108864)}}var Ja=!0;function Cp(tt,st,ht,gt){var wt=Dt.T;Dt.T=null;var vt=jt.p;try{jt.p=2,bu(tt,st,ht,gt)}finally{jt.p=vt,Dt.T=wt}}function Ep(tt,st,ht,gt){var wt=Dt.T;Dt.T=null;var vt=jt.p;try{jt.p=8,bu(tt,st,ht,gt)}finally{jt.p=vt,Dt.T=wt}}function bu(tt,st,ht,gt){if(Ja){var wt=xu(gt);if(wt===null)su(tt,st,gt,el,ht),am(tt,gt);else if(kp(wt,tt,st,ht,gt))gt.stopPropagation();else if(am(tt,gt),st&4&&-1<Tp.indexOf(tt)){for(;wt!==null;){var vt=fr(wt);if(vt!==null)switch(vt.tag){case 3:if(vt=vt.stateNode,vt.current.memoizedState.isDehydrated){var Rt=fn(vt.pendingLanes);if(Rt!==0){var Mt=vt;for(Mt.pendingLanes|=2,Mt.entangledLanes|=2;Rt;){var Ft=1<<31-Jn(Rt);Mt.entanglements[1]|=Ft,Rt&=~Ft}ts(vt),(Bn&6)===0&&(Na=Hn()+500,No(0))}}break;case 13:Mt=Tr(vt,2),Mt!==null&&Oi(Mt,vt,2),Fa(),pu(vt,2)}if(vt=xu(gt),vt===null&&su(tt,st,gt,el,ht),vt===wt)break;wt=vt}wt!==null&&gt.stopPropagation()}else su(tt,st,gt,null,ht)}}function xu(tt){return tt=Cl(tt),wu(tt)}var el=null;function wu(tt){if(el=null,tt=hr(tt),tt!==null){var st=pe(tt);if(st===null)tt=null;else{var ht=st.tag;if(ht===13){if(tt=Le(st),tt!==null)return tt;tt=null}else if(ht===3){if(st.stateNode.current.memoizedState.isDehydrated)return st.tag===3?st.stateNode.containerInfo:null;tt=null}else st!==tt&&(tt=null)}}return el=tt,null}function om(tt){switch(tt){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ri()){case Wi:return 2;case mi:return 8;case Kn:case gn:return 32;case ns:return 268435456;default:return 32}default:return 32}}var yu=!1,Us=null,zs=null,Hs=null,jo=new Map,qo=new Map,Ws=[],Tp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function am(tt,st){switch(tt){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":jo.delete(st.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(st.pointerId)}}function Ko(tt,st,ht,gt,wt,vt){return tt===null||tt.nativeEvent!==vt?(tt={blockedOn:st,domEventName:ht,eventSystemFlags:gt,nativeEvent:vt,targetContainers:[wt]},st!==null&&(st=fr(st),st!==null&&rm(st)),tt):(tt.eventSystemFlags|=gt,st=tt.targetContainers,wt!==null&&st.indexOf(wt)===-1&&st.push(wt),tt)}function kp(tt,st,ht,gt,wt){switch(st){case"focusin":return Us=Ko(Us,tt,st,ht,gt,wt),!0;case"dragenter":return zs=Ko(zs,tt,st,ht,gt,wt),!0;case"mouseover":return Hs=Ko(Hs,tt,st,ht,gt,wt),!0;case"pointerover":var vt=wt.pointerId;return jo.set(vt,Ko(jo.get(vt)||null,tt,st,ht,gt,wt)),!0;case"gotpointercapture":return vt=wt.pointerId,qo.set(vt,Ko(qo.get(vt)||null,tt,st,ht,gt,wt)),!0}return!1}function lm(tt){var st=hr(tt.target);if(st!==null){var ht=pe(st);if(ht!==null){if(st=ht.tag,st===13){if(st=Le(ht),st!==null){tt.blockedOn=st,wm(tt.priority,function(){if(ht.tag===13){var gt=Pi();gt=hl(gt);var wt=Tr(ht,gt);wt!==null&&Oi(wt,ht,gt),pu(ht,gt)}});return}}else if(st===3&&ht.stateNode.current.memoizedState.isDehydrated){tt.blockedOn=ht.tag===3?ht.stateNode.containerInfo:null;return}}}tt.blockedOn=null}function tl(tt){if(tt.blockedOn!==null)return!1;for(var st=tt.targetContainers;0<st.length;){var ht=xu(tt.nativeEvent);if(ht===null){ht=tt.nativeEvent;var gt=new ht.constructor(ht.type,ht);vl=gt,ht.target.dispatchEvent(gt),vl=null}else return st=fr(ht),st!==null&&rm(st),tt.blockedOn=ht,!1;st.shift()}return!0}function cm(tt,st,ht){tl(tt)&&ht.delete(st)}function Sp(){yu=!1,Us!==null&&tl(Us)&&(Us=null),zs!==null&&tl(zs)&&(zs=null),Hs!==null&&tl(Hs)&&(Hs=null),jo.forEach(cm),qo.forEach(cm)}function nl(tt,st){tt.blockedOn===st&&(tt.blockedOn=null,yu||(yu=!0,de.unstable_scheduleCallback(de.unstable_NormalPriority,Sp)))}var il=null;function um(tt){il!==tt&&(il=tt,de.unstable_scheduleCallback(de.unstable_NormalPriority,function(){il===tt&&(il=null);for(var st=0;st<tt.length;st+=3){var ht=tt[st],gt=tt[st+1],wt=tt[st+2];if(typeof gt!="function"){if(wu(gt||ht)===null)continue;break}var vt=fr(ht);vt!==null&&(tt.splice(st,3),st-=3,wc(vt,{pending:!0,data:wt,method:ht.method,action:gt},gt,wt))}}))}function Go(tt){function st(Ft){return nl(Ft,tt)}Us!==null&&nl(Us,tt),zs!==null&&nl(zs,tt),Hs!==null&&nl(Hs,tt),jo.forEach(st),qo.forEach(st);for(var ht=0;ht<Ws.length;ht++){var gt=Ws[ht];gt.blockedOn===tt&&(gt.blockedOn=null)}for(;0<Ws.length&&(ht=Ws[0],ht.blockedOn===null);)lm(ht),ht.blockedOn===null&&Ws.shift();if(ht=(tt.ownerDocument||tt).$$reactFormReplay,ht!=null)for(gt=0;gt<ht.length;gt+=3){var wt=ht[gt],vt=ht[gt+1],Rt=wt[yi]||null;if(typeof vt=="function")Rt||um(ht);else if(Rt){var Mt=null;if(vt&&vt.hasAttribute("formAction")){if(wt=vt,Rt=vt[yi]||null)Mt=Rt.formAction;else if(wu(wt)!==null)continue}else Mt=Rt.action;typeof Mt=="function"?ht[gt+1]=Mt:(ht.splice(gt,3),gt-=3),um(ht)}}}function _u(tt){this._internalRoot=tt}sl.prototype.render=_u.prototype.render=function(tt){var st=this._internalRoot;if(st===null)throw Error(N(409));var ht=st.current,gt=Pi();im(ht,gt,tt,st,null,null)},sl.prototype.unmount=_u.prototype.unmount=function(){var tt=this._internalRoot;if(tt!==null){this._internalRoot=null;var st=tt.containerInfo;im(tt.current,2,null,tt,null,null),Fa(),st[dr]=null}};function sl(tt){this._internalRoot=tt}sl.prototype.unstable_scheduleHydration=function(tt){if(tt){var st=ku();tt={blockedOn:null,target:tt,priority:st};for(var ht=0;ht<Ws.length&&st!==0&&st<Ws[ht].priority;ht++);Ws.splice(ht,0,tt),ht===0&&lm(tt)}};var dm=u.version;if(dm!=="19.1.0")throw Error(N(527,dm,"19.1.0"));jt.findDOMNode=function(tt){var st=tt._reactInternals;if(st===void 0)throw typeof tt.render=="function"?Error(N(188)):(tt=Object.keys(tt).join(","),Error(N(268,tt)));return tt=nt(st),tt=tt!==null?ot(tt):null,tt=tt===null?null:tt.stateNode,tt};var Ap={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Dt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{ji=rl.inject(Ap),ni=rl}catch{}}return reactDomClient_production.createRoot=function(tt,st){if(!me(tt))throw Error(N(299));var ht=!1,gt="",wt=kh,vt=Sh,Rt=Ah,Mt=null;return st!=null&&(st.unstable_strictMode===!0&&(ht=!0),st.identifierPrefix!==void 0&&(gt=st.identifierPrefix),st.onUncaughtError!==void 0&&(wt=st.onUncaughtError),st.onCaughtError!==void 0&&(vt=st.onCaughtError),st.onRecoverableError!==void 0&&(Rt=st.onRecoverableError),st.unstable_transitionCallbacks!==void 0&&(Mt=st.unstable_transitionCallbacks)),st=tm(tt,1,!1,null,null,ht,gt,wt,vt,Rt,Mt,null),tt[dr]=st.current,iu(tt),new _u(st)},reactDomClient_production.hydrateRoot=function(tt,st,ht){if(!me(tt))throw Error(N(299));var gt=!1,wt="",vt=kh,Rt=Sh,Mt=Ah,Ft=null,Yt=null;return ht!=null&&(ht.unstable_strictMode===!0&&(gt=!0),ht.identifierPrefix!==void 0&&(wt=ht.identifierPrefix),ht.onUncaughtError!==void 0&&(vt=ht.onUncaughtError),ht.onCaughtError!==void 0&&(Rt=ht.onCaughtError),ht.onRecoverableError!==void 0&&(Mt=ht.onRecoverableError),ht.unstable_transitionCallbacks!==void 0&&(Ft=ht.unstable_transitionCallbacks),ht.formState!==void 0&&(Yt=ht.formState)),st=tm(tt,1,!0,st,ht??null,gt,wt,vt,Rt,Mt,Ft,Yt),st.context=nm(null),ht=st.current,gt=Pi(),gt=hl(gt),wt=Ss(gt),wt.callback=null,As(ht,wt,gt),ht=gt,st.current.lanes=ht,Jr(st,ht),ts(st),tt[dr]=st.current,iu(tt),new sl(st)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function de(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(de)}catch(u){console.error(u)}}return de(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const common={black:"#000",white:"#fff"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function formatMuiErrorMessage(de,...u){const t=new URL(`https://mui.com/production-error/?code=${de}`);return u.forEach(N=>t.searchParams.append("args[]",N)),`Minified MUI error #${de}; visit ${t} for the full message.`}const THEME_ID="$$material";function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(de){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var N in t)({}).hasOwnProperty.call(t,N)&&(de[N]=t[N])}return de},_extends$1.apply(null,arguments)}function sheetForTag(de){if(de.sheet)return de.sheet;for(var u=0;u<document.styleSheets.length;u++)if(document.styleSheets[u].ownerNode===de)return document.styleSheets[u]}function createStyleElement(de){var u=document.createElement("style");return u.setAttribute("data-emotion",de.key),de.nonce!==void 0&&u.setAttribute("nonce",de.nonce),u.appendChild(document.createTextNode("")),u.setAttribute("data-s",""),u}var StyleSheet=function(){function de(t){var N=this;this._insertTag=function(me){var pe;N.tags.length===0?N.insertionPoint?pe=N.insertionPoint.nextSibling:N.prepend?pe=N.container.firstChild:pe=N.before:pe=N.tags[N.tags.length-1].nextSibling,N.container.insertBefore(me,pe),N.tags.push(me)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var u=de.prototype;return u.hydrate=function(N){N.forEach(this._insertTag)},u.insert=function(N){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var me=this.tags[this.tags.length-1];if(this.isSpeedy){var pe=sheetForTag(me);try{pe.insertRule(N,pe.cssRules.length)}catch{}}else me.appendChild(document.createTextNode(N));this.ctr++},u.flush=function(){this.tags.forEach(function(N){var me;return(me=N.parentNode)==null?void 0:me.removeChild(N)}),this.tags=[],this.ctr=0},de}(),MS$1="-ms-",MOZ$1="-moz-",WEBKIT$1="-webkit-",COMMENT$1="comm",RULESET$1="rule",DECLARATION$1="decl",IMPORT$1="@import",KEYFRAMES$1="@keyframes",LAYER$1="@layer",abs$1=Math.abs,from$1=String.fromCharCode,assign$1=Object.assign;function hash$1(de,u){return charat$1(de,0)^45?(((u<<2^charat$1(de,0))<<2^charat$1(de,1))<<2^charat$1(de,2))<<2^charat$1(de,3):0}function trim$2(de){return de.trim()}function match$1(de,u){return(de=u.exec(de))?de[0]:de}function replace$1(de,u,t){return de.replace(u,t)}function indexof$1(de,u){return de.indexOf(u)}function charat$1(de,u){return de.charCodeAt(u)|0}function substr$1(de,u,t){return de.slice(u,t)}function strlen$1(de){return de.length}function sizeof$1(de){return de.length}function append$1(de,u){return u.push(de),de}function combine$1(de,u){return de.map(u).join("")}var line$1=1,column$1=1,length$2=0,position$1=0,character$1=0,characters$1="";function node$1(de,u,t,N,me,pe,Le){return{value:de,root:u,parent:t,type:N,props:me,children:pe,line:line$1,column:column$1,length:Le,return:""}}function copy$1(de,u){return assign$1(node$1("",null,null,"",null,null,0),de,{length:-de.length},u)}function char$1(){return character$1}function prev$2(){return character$1=position$1>0?charat$1(characters$1,--position$1):0,column$1--,character$1===10&&(column$1=1,line$1--),character$1}function next$1(){return character$1=position$1<length$2?charat$1(characters$1,position$1++):0,column$1++,character$1===10&&(column$1=1,line$1++),character$1}function peek$1(){return charat$1(characters$1,position$1)}function caret$1(){return position$1}function slice$1(de,u){return substr$1(characters$1,de,u)}function token$1(de){switch(de){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc$1(de){return line$1=column$1=1,length$2=strlen$1(characters$1=de),position$1=0,[]}function dealloc$1(de){return characters$1="",de}function delimit$1(de){return trim$2(slice$1(position$1-1,delimiter$1(de===91?de+2:de===40?de+1:de)))}function whitespace$1(de){for(;(character$1=peek$1())&&character$1<33;)next$1();return token$1(de)>2||token$1(character$1)>3?"":" "}function escaping$1(de,u){for(;--u&&next$1()&&!(character$1<48||character$1>102||character$1>57&&character$1<65||character$1>70&&character$1<97););return slice$1(de,caret$1()+(u<6&&peek$1()==32&&next$1()==32))}function delimiter$1(de){for(;next$1();)switch(character$1){case de:return position$1;case 34:case 39:de!==34&&de!==39&&delimiter$1(character$1);break;case 40:de===41&&delimiter$1(de);break;case 92:next$1();break}return position$1}function commenter$1(de,u){for(;next$1()&&de+character$1!==57;)if(de+character$1===84&&peek$1()===47)break;return"/*"+slice$1(u,position$1-1)+"*"+from$1(de===47?de:next$1())}function identifier$1(de){for(;!token$1(peek$1());)next$1();return slice$1(de,position$1)}function compile$1(de){return dealloc$1(parse$3("",null,null,null,[""],de=alloc$1(de),0,[0],de))}function parse$3(de,u,t,N,me,pe,Le,Ye,nt){for(var ot=0,ft=0,mt=Le,bt=0,yt=0,_t=0,Ct=1,Tt=1,At=1,It=0,Pt="",Bt=me,Ot=pe,Nt=N,Lt=Pt;Tt;)switch(_t=It,It=next$1()){case 40:if(_t!=108&&charat$1(Lt,mt-1)==58){indexof$1(Lt+=replace$1(delimit$1(It),"&","&\f"),"&\f")!=-1&&(At=-1);break}case 34:case 39:case 91:Lt+=delimit$1(It);break;case 9:case 10:case 13:case 32:Lt+=whitespace$1(_t);break;case 92:Lt+=escaping$1(caret$1()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append$1(comment$1(commenter$1(next$1(),caret$1()),u,t),nt);break;default:Lt+="/"}break;case 123*Ct:Ye[ot++]=strlen$1(Lt)*At;case 125*Ct:case 59:case 0:switch(It){case 0:case 125:Tt=0;case 59+ft:At==-1&&(Lt=replace$1(Lt,/\f/g,"")),yt>0&&strlen$1(Lt)-mt&&append$1(yt>32?declaration$1(Lt+";",N,t,mt-1):declaration$1(replace$1(Lt," ","")+";",N,t,mt-2),nt);break;case 59:Lt+=";";default:if(append$1(Nt=ruleset$1(Lt,u,t,ot,ft,me,Ye,Pt,Bt=[],Ot=[],mt),pe),It===123)if(ft===0)parse$3(Lt,u,Nt,Nt,Bt,pe,mt,Ye,Ot);else switch(bt===99&&charat$1(Lt,3)===110?100:bt){case 100:case 108:case 109:case 115:parse$3(de,Nt,Nt,N&&append$1(ruleset$1(de,Nt,Nt,0,0,me,Ye,Pt,me,Bt=[],mt),Ot),me,Ot,mt,Ye,N?Bt:Ot);break;default:parse$3(Lt,Nt,Nt,Nt,[""],Ot,0,Ye,Ot)}}ot=ft=yt=0,Ct=At=1,Pt=Lt="",mt=Le;break;case 58:mt=1+strlen$1(Lt),yt=_t;default:if(Ct<1){if(It==123)--Ct;else if(It==125&&Ct++==0&&prev$2()==125)continue}switch(Lt+=from$1(It),It*Ct){case 38:At=ft>0?1:(Lt+="\f",-1);break;case 44:Ye[ot++]=(strlen$1(Lt)-1)*At,At=1;break;case 64:peek$1()===45&&(Lt+=delimit$1(next$1())),bt=peek$1(),ft=mt=strlen$1(Pt=Lt+=identifier$1(caret$1())),It++;break;case 45:_t===45&&strlen$1(Lt)==2&&(Ct=0)}}return pe}function ruleset$1(de,u,t,N,me,pe,Le,Ye,nt,ot,ft){for(var mt=me-1,bt=me===0?pe:[""],yt=sizeof$1(bt),_t=0,Ct=0,Tt=0;_t<N;++_t)for(var At=0,It=substr$1(de,mt+1,mt=abs$1(Ct=Le[_t])),Pt=de;At<yt;++At)(Pt=trim$2(Ct>0?bt[At]+" "+It:replace$1(It,/&\f/g,bt[At])))&&(nt[Tt++]=Pt);return node$1(de,u,t,me===0?RULESET$1:Ye,nt,ot,ft)}function comment$1(de,u,t){return node$1(de,u,t,COMMENT$1,from$1(char$1()),substr$1(de,2,-2),0)}function declaration$1(de,u,t,N){return node$1(de,u,t,DECLARATION$1,substr$1(de,0,N),substr$1(de,N+1,-1),N)}function serialize$1(de,u){for(var t="",N=sizeof$1(de),me=0;me<N;me++)t+=u(de[me],me,de,u)||"";return t}function stringify$1(de,u,t,N){switch(de.type){case LAYER$1:if(de.children.length)break;case IMPORT$1:case DECLARATION$1:return de.return=de.return||de.value;case COMMENT$1:return"";case KEYFRAMES$1:return de.return=de.value+"{"+serialize$1(de.children,N)+"}";case RULESET$1:de.value=de.props.join(",")}return strlen$1(t=serialize$1(de.children,N))?de.return=de.value+"{"+t+"}":""}function middleware$1(de){var u=sizeof$1(de);return function(t,N,me,pe){for(var Le="",Ye=0;Ye<u;Ye++)Le+=de[Ye](t,N,me,pe)||"";return Le}}function rulesheet$1(de){return function(u){u.root||(u=u.return)&&de(u)}}function memoize$2(de){var u=Object.create(null);return function(t){return u[t]===void 0&&(u[t]=de(t)),u[t]}}var identifierWithPointTracking=function(u,t,N){for(var me=0,pe=0;me=pe,pe=peek$1(),me===38&&pe===12&&(t[N]=1),!token$1(pe);)next$1();return slice$1(u,position$1)},toRules=function(u,t){var N=-1,me=44;do switch(token$1(me)){case 0:me===38&&peek$1()===12&&(t[N]=1),u[N]+=identifierWithPointTracking(position$1-1,t,N);break;case 2:u[N]+=delimit$1(me);break;case 4:if(me===44){u[++N]=peek$1()===58?"&\f":"",t[N]=u[N].length;break}default:u[N]+=from$1(me)}while(me=next$1());return u},getRules=function(u,t){return dealloc$1(toRules(alloc$1(u),t))},fixedElements=new WeakMap,compat=function(u){if(!(u.type!=="rule"||!u.parent||u.length<1)){for(var t=u.value,N=u.parent,me=u.column===N.column&&u.line===N.line;N.type!=="rule";)if(N=N.parent,!N)return;if(!(u.props.length===1&&t.charCodeAt(0)!==58&&!fixedElements.get(N))&&!me){fixedElements.set(u,!0);for(var pe=[],Le=getRules(t,pe),Ye=N.props,nt=0,ot=0;nt<Le.length;nt++)for(var ft=0;ft<Ye.length;ft++,ot++)u.props[ot]=pe[nt]?Le[nt].replace(/&\f/g,Ye[ft]):Ye[ft]+" "+Le[nt]}}},removeLabel=function(u){if(u.type==="decl"){var t=u.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(u.return="",u.value="")}};function prefix$1(de,u){switch(hash$1(de,u)){case 5103:return WEBKIT$1+"print-"+de+de;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT$1+de+de;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT$1+de+MOZ$1+de+MS$1+de+de;case 6828:case 4268:return WEBKIT$1+de+MS$1+de+de;case 6165:return WEBKIT$1+de+MS$1+"flex-"+de+de;case 5187:return WEBKIT$1+de+replace$1(de,/(\w+).+(:[^]+)/,WEBKIT$1+"box-$1$2"+MS$1+"flex-$1$2")+de;case 5443:return WEBKIT$1+de+MS$1+"flex-item-"+replace$1(de,/flex-|-self/,"")+de;case 4675:return WEBKIT$1+de+MS$1+"flex-line-pack"+replace$1(de,/align-content|flex-|-self/,"")+de;case 5548:return WEBKIT$1+de+MS$1+replace$1(de,"shrink","negative")+de;case 5292:return WEBKIT$1+de+MS$1+replace$1(de,"basis","preferred-size")+de;case 6060:return WEBKIT$1+"box-"+replace$1(de,"-grow","")+WEBKIT$1+de+MS$1+replace$1(de,"grow","positive")+de;case 4554:return WEBKIT$1+replace$1(de,/([^-])(transform)/g,"$1"+WEBKIT$1+"$2")+de;case 6187:return replace$1(replace$1(replace$1(de,/(zoom-|grab)/,WEBKIT$1+"$1"),/(image-set)/,WEBKIT$1+"$1"),de,"")+de;case 5495:case 3959:return replace$1(de,/(image-set\([^]*)/,WEBKIT$1+"$1$`$1");case 4968:return replace$1(replace$1(de,/(.+:)(flex-)?(.*)/,WEBKIT$1+"box-pack:$3"+MS$1+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT$1+de+de;case 4095:case 3583:case 4068:case 2532:return replace$1(de,/(.+)-inline(.+)/,WEBKIT$1+"$1$2")+de;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen$1(de)-1-u>6)switch(charat$1(de,u+1)){case 109:if(charat$1(de,u+4)!==45)break;case 102:return replace$1(de,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT$1+"$2-$3$1"+MOZ$1+(charat$1(de,u+3)==108?"$3":"$2-$3"))+de;case 115:return~indexof$1(de,"stretch")?prefix$1(replace$1(de,"stretch","fill-available"),u)+de:de}break;case 4949:if(charat$1(de,u+1)!==115)break;case 6444:switch(charat$1(de,strlen$1(de)-3-(~indexof$1(de,"!important")&&10))){case 107:return replace$1(de,":",":"+WEBKIT$1)+de;case 101:return replace$1(de,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT$1+(charat$1(de,14)===45?"inline-":"")+"box$3$1"+WEBKIT$1+"$2$3$1"+MS$1+"$2box$3")+de}break;case 5936:switch(charat$1(de,u+11)){case 114:return WEBKIT$1+de+MS$1+replace$1(de,/[svh]\w+-[tblr]{2}/,"tb")+de;case 108:return WEBKIT$1+de+MS$1+replace$1(de,/[svh]\w+-[tblr]{2}/,"tb-rl")+de;case 45:return WEBKIT$1+de+MS$1+replace$1(de,/[svh]\w+-[tblr]{2}/,"lr")+de}return WEBKIT$1+de+MS$1+de+de}return de}var prefixer$1=function(u,t,N,me){if(u.length>-1&&!u.return)switch(u.type){case DECLARATION$1:u.return=prefix$1(u.value,u.length);break;case KEYFRAMES$1:return serialize$1([copy$1(u,{value:replace$1(u.value,"@","@"+WEBKIT$1)})],me);case RULESET$1:if(u.length)return combine$1(u.props,function(pe){switch(match$1(pe,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy$1(u,{props:[replace$1(pe,/:(read-\w+)/,":"+MOZ$1+"$1")]})],me);case"::placeholder":return serialize$1([copy$1(u,{props:[replace$1(pe,/:(plac\w+)/,":"+WEBKIT$1+"input-$1")]}),copy$1(u,{props:[replace$1(pe,/:(plac\w+)/,":"+MOZ$1+"$1")]}),copy$1(u,{props:[replace$1(pe,/:(plac\w+)/,MS$1+"input-$1")]})],me)}return""})}},defaultStylisPlugins=[prefixer$1],createCache=function(u){var t=u.key;if(t==="css"){var N=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(N,function(Ct){var Tt=Ct.getAttribute("data-emotion");Tt.indexOf(" ")!==-1&&(document.head.appendChild(Ct),Ct.setAttribute("data-s",""))})}var me=u.stylisPlugins||defaultStylisPlugins,pe={},Le,Ye=[];Le=u.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(Ct){for(var Tt=Ct.getAttribute("data-emotion").split(" "),At=1;At<Tt.length;At++)pe[Tt[At]]=!0;Ye.push(Ct)});var nt,ot=[compat,removeLabel];{var ft,mt=[stringify$1,rulesheet$1(function(Ct){ft.insert(Ct)})],bt=middleware$1(ot.concat(me,mt)),yt=function(Tt){return serialize$1(compile$1(Tt),bt)};nt=function(Tt,At,It,Pt){ft=It,yt(Tt?Tt+"{"+At.styles+"}":At.styles),Pt&&(_t.inserted[At.name]=!0)}}var _t={key:t,sheet:new StyleSheet({key:t,container:Le,nonce:u.nonce,speedy:u.speedy,prepend:u.prepend,insertionPoint:u.insertionPoint}),nonce:u.nonce,inserted:pe,registered:{},insert:nt};return _t.sheet.hydrate(Ye),_t},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var de=typeof Symbol=="function"&&Symbol.for,u=de?Symbol.for("react.element"):60103,t=de?Symbol.for("react.portal"):60106,N=de?Symbol.for("react.fragment"):60107,me=de?Symbol.for("react.strict_mode"):60108,pe=de?Symbol.for("react.profiler"):60114,Le=de?Symbol.for("react.provider"):60109,Ye=de?Symbol.for("react.context"):60110,nt=de?Symbol.for("react.async_mode"):60111,ot=de?Symbol.for("react.concurrent_mode"):60111,ft=de?Symbol.for("react.forward_ref"):60112,mt=de?Symbol.for("react.suspense"):60113,bt=de?Symbol.for("react.suspense_list"):60120,yt=de?Symbol.for("react.memo"):60115,_t=de?Symbol.for("react.lazy"):60116,Ct=de?Symbol.for("react.block"):60121,Tt=de?Symbol.for("react.fundamental"):60117,At=de?Symbol.for("react.responder"):60118,It=de?Symbol.for("react.scope"):60119;function Pt(Ot){if(typeof Ot=="object"&&Ot!==null){var Nt=Ot.$$typeof;switch(Nt){case u:switch(Ot=Ot.type,Ot){case nt:case ot:case N:case pe:case me:case mt:return Ot;default:switch(Ot=Ot&&Ot.$$typeof,Ot){case Ye:case ft:case _t:case yt:case Le:return Ot;default:return Nt}}case t:return Nt}}}function Bt(Ot){return Pt(Ot)===ot}return reactIs_production_min.AsyncMode=nt,reactIs_production_min.ConcurrentMode=ot,reactIs_production_min.ContextConsumer=Ye,reactIs_production_min.ContextProvider=Le,reactIs_production_min.Element=u,reactIs_production_min.ForwardRef=ft,reactIs_production_min.Fragment=N,reactIs_production_min.Lazy=_t,reactIs_production_min.Memo=yt,reactIs_production_min.Portal=t,reactIs_production_min.Profiler=pe,reactIs_production_min.StrictMode=me,reactIs_production_min.Suspense=mt,reactIs_production_min.isAsyncMode=function(Ot){return Bt(Ot)||Pt(Ot)===nt},reactIs_production_min.isConcurrentMode=Bt,reactIs_production_min.isContextConsumer=function(Ot){return Pt(Ot)===Ye},reactIs_production_min.isContextProvider=function(Ot){return Pt(Ot)===Le},reactIs_production_min.isElement=function(Ot){return typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===u},reactIs_production_min.isForwardRef=function(Ot){return Pt(Ot)===ft},reactIs_production_min.isFragment=function(Ot){return Pt(Ot)===N},reactIs_production_min.isLazy=function(Ot){return Pt(Ot)===_t},reactIs_production_min.isMemo=function(Ot){return Pt(Ot)===yt},reactIs_production_min.isPortal=function(Ot){return Pt(Ot)===t},reactIs_production_min.isProfiler=function(Ot){return Pt(Ot)===pe},reactIs_production_min.isStrictMode=function(Ot){return Pt(Ot)===me},reactIs_production_min.isSuspense=function(Ot){return Pt(Ot)===mt},reactIs_production_min.isValidElementType=function(Ot){return typeof Ot=="string"||typeof Ot=="function"||Ot===N||Ot===ot||Ot===pe||Ot===me||Ot===mt||Ot===bt||typeof Ot=="object"&&Ot!==null&&(Ot.$$typeof===_t||Ot.$$typeof===yt||Ot.$$typeof===Le||Ot.$$typeof===Ye||Ot.$$typeof===ft||Ot.$$typeof===Tt||Ot.$$typeof===At||Ot.$$typeof===It||Ot.$$typeof===Ct)},reactIs_production_min.typeOf=Pt,reactIs_production_min}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production_min()),reactIs$1.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var de=requireReactIs$1(),u={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},N={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},me={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pe={};pe[de.ForwardRef]=N,pe[de.Memo]=me;function Le(_t){return de.isMemo(_t)?me:pe[_t.$$typeof]||u}var Ye=Object.defineProperty,nt=Object.getOwnPropertyNames,ot=Object.getOwnPropertySymbols,ft=Object.getOwnPropertyDescriptor,mt=Object.getPrototypeOf,bt=Object.prototype;function yt(_t,Ct,Tt){if(typeof Ct!="string"){if(bt){var At=mt(Ct);At&&At!==bt&&yt(_t,At,Tt)}var It=nt(Ct);ot&&(It=It.concat(ot(Ct)));for(var Pt=Le(_t),Bt=Le(Ct),Ot=0;Ot<It.length;++Ot){var Nt=It[Ot];if(!t[Nt]&&!(Tt&&Tt[Nt])&&!(Bt&&Bt[Nt])&&!(Pt&&Pt[Nt])){var Lt=ft(Ct,Nt);try{Ye(_t,Nt,Lt)}catch{}}}}return _t}return hoistNonReactStatics_cjs=yt,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(de,u,t){var N="";return t.split(" ").forEach(function(me){de[me]!==void 0?u.push(de[me]+";"):me&&(N+=me+" ")}),N}var registerStyles=function(u,t,N){var me=u.key+"-"+t.name;(N===!1||isBrowser===!1)&&u.registered[me]===void 0&&(u.registered[me]=t.styles)},insertStyles=function(u,t,N){registerStyles(u,t,N);var me=u.key+"-"+t.name;if(u.inserted[t.name]===void 0){var pe=t;do u.insert(t===pe?"."+me:"",pe,u.sheet,!0),pe=pe.next;while(pe!==void 0)}};function murmur2(de){for(var u=0,t,N=0,me=de.length;me>=4;++N,me-=4)t=de.charCodeAt(N)&255|(de.charCodeAt(++N)&255)<<8|(de.charCodeAt(++N)&255)<<16|(de.charCodeAt(++N)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,u=(t&65535)*1540483477+((t>>>16)*59797<<16)^(u&65535)*1540483477+((u>>>16)*59797<<16);switch(me){case 3:u^=(de.charCodeAt(N+2)&255)<<16;case 2:u^=(de.charCodeAt(N+1)&255)<<8;case 1:u^=de.charCodeAt(N)&255,u=(u&65535)*1540483477+((u>>>16)*59797<<16)}return u^=u>>>13,u=(u&65535)*1540483477+((u>>>16)*59797<<16),((u^u>>>15)>>>0).toString(36)}var unitlessKeys$1={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(u){return u.charCodeAt(1)===45},isProcessableValue=function(u){return u!=null&&typeof u!="boolean"},processStyleName=memoize$2(function(de){return isCustomProperty(de)?de:de.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(u,t){switch(u){case"animation":case"animationName":if(typeof t=="string")return t.replace(animationRegex,function(N,me,pe){return cursor={name:me,styles:pe,next:cursor},me})}return unitlessKeys$1[u]!==1&&!isCustomProperty(u)&&typeof t=="number"&&t!==0?t+"px":t};function handleInterpolation(de,u,t){if(t==null)return"";var N=t;if(N.__emotion_styles!==void 0)return N;switch(typeof t){case"boolean":return"";case"object":{var me=t;if(me.anim===1)return cursor={name:me.name,styles:me.styles,next:cursor},me.name;var pe=t;if(pe.styles!==void 0){var Le=pe.next;if(Le!==void 0)for(;Le!==void 0;)cursor={name:Le.name,styles:Le.styles,next:cursor},Le=Le.next;var Ye=pe.styles+";";return Ye}return createStringFromObject(de,u,t)}case"function":{if(de!==void 0){var nt=cursor,ot=t(de);return cursor=nt,handleInterpolation(de,u,ot)}break}}var ft=t;if(u==null)return ft;var mt=u[ft];return mt!==void 0?mt:ft}function createStringFromObject(de,u,t){var N="";if(Array.isArray(t))for(var me=0;me<t.length;me++)N+=handleInterpolation(de,u,t[me])+";";else for(var pe in t){var Le=t[pe];if(typeof Le!="object"){var Ye=Le;u!=null&&u[Ye]!==void 0?N+=pe+"{"+u[Ye]+"}":isProcessableValue(Ye)&&(N+=processStyleName(pe)+":"+processStyleValue(pe,Ye)+";")}else if(Array.isArray(Le)&&typeof Le[0]=="string"&&(u==null||u[Le[0]]===void 0))for(var nt=0;nt<Le.length;nt++)isProcessableValue(Le[nt])&&(N+=processStyleName(pe)+":"+processStyleValue(pe,Le[nt])+";");else{var ot=handleInterpolation(de,u,Le);switch(pe){case"animation":case"animationName":{N+=processStyleName(pe)+":"+ot+";";break}default:N+=pe+"{"+ot+"}"}}}return N}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(de,u,t){if(de.length===1&&typeof de[0]=="object"&&de[0]!==null&&de[0].styles!==void 0)return de[0];var N=!0,me="";cursor=void 0;var pe=de[0];if(pe==null||pe.raw===void 0)N=!1,me+=handleInterpolation(t,u,pe);else{var Le=pe;me+=Le[0]}for(var Ye=1;Ye<de.length;Ye++)if(me+=handleInterpolation(t,u,de[Ye]),N){var nt=pe;me+=nt[Ye]}labelPattern.lastIndex=0;for(var ot="",ft;(ft=labelPattern.exec(me))!==null;)ot+="-"+ft[1];var mt=murmur2(me)+ot;return{name:mt,styles:me,next:cursor}}var syncFallback=function(u){return u()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(u){return reactExports.forwardRef(function(t,N){var me=reactExports.useContext(EmotionCacheContext);return u(t,me,N)})},ThemeContext=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(u,t){var N={};for(var me in t)hasOwn.call(t,me)&&(N[me]=t[me]);return N[typePropName]=u,N},Insertion$2=function(u){var t=u.cache,N=u.serialized,me=u.isStringTag;return registerStyles(t,N,me),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(t,N,me)}),null},Emotion=withEmotionCache(function(de,u,t){var N=de.css;typeof N=="string"&&u.registered[N]!==void 0&&(N=u.registered[N]);var me=de[typePropName],pe=[N],Le="";typeof de.className=="string"?Le=getRegisteredStyles(u.registered,pe,de.className):de.className!=null&&(Le=de.className+" ");var Ye=serializeStyles(pe,void 0,reactExports.useContext(ThemeContext));Le+=u.key+"-"+Ye.name;var nt={};for(var ot in de)hasOwn.call(de,ot)&&ot!=="css"&&ot!==typePropName&&(nt[ot]=de[ot]);return nt.className=Le,t&&(nt.ref=t),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$2,{cache:u,serialized:Ye,isStringTag:typeof me=="string"}),reactExports.createElement(me,nt))}),Emotion$1=Emotion,jsx=function(u,t){var N=arguments;if(t==null||!hasOwn.call(t,"css"))return reactExports.createElement.apply(void 0,N);var me=N.length,pe=new Array(me);pe[0]=Emotion$1,pe[1]=createEmotionProps(u,t);for(var Le=2;Le<me;Le++)pe[Le]=N[Le];return reactExports.createElement.apply(null,pe)};(function(de){var u;u||(u=de.JSX||(de.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(de,u){var t=de.styles,N=serializeStyles([t],void 0,reactExports.useContext(ThemeContext)),me=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var pe=u.key+"-global",Le=new u.sheet.constructor({key:pe,nonce:u.sheet.nonce,container:u.sheet.container,speedy:u.sheet.isSpeedy}),Ye=!1,nt=document.querySelector('style[data-emotion="'+pe+" "+N.name+'"]');return u.sheet.tags.length&&(Le.before=u.sheet.tags[0]),nt!==null&&(Ye=!0,nt.setAttribute("data-emotion",pe),Le.hydrate([nt])),me.current=[Le,Ye],function(){Le.flush()}},[u]),useInsertionEffectWithLayoutFallback(function(){var pe=me.current,Le=pe[0],Ye=pe[1];if(Ye){pe[1]=!1;return}if(N.next!==void 0&&insertStyles(u,N.next,!0),Le.tags.length){var nt=Le.tags[Le.tags.length-1].nextElementSibling;Le.before=nt,Le.flush()}u.insert("",N,Le,!1)},[u,N.name]),null});function css$1(){for(var de=arguments.length,u=new Array(de),t=0;t<de;t++)u[t]=arguments[t];return serializeStyles(u)}function keyframes(){var de=css$1.apply(void 0,arguments),u="animation-"+de.name;return{name:u,styles:"@keyframes "+u+"{"+de.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$2(function(de){return reactPropsRegex.test(de)||de.charCodeAt(0)===111&&de.charCodeAt(1)===110&&de.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(u){return u!=="theme"},getDefaultShouldForwardProp=function(u){return typeof u=="string"&&u.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(u,t,N){var me;if(t){var pe=t.shouldForwardProp;me=u.__emotion_forwardProp&&pe?function(Le){return u.__emotion_forwardProp(Le)&&pe(Le)}:pe}return typeof me!="function"&&N&&(me=u.__emotion_forwardProp),me},Insertion$1=function(u){var t=u.cache,N=u.serialized,me=u.isStringTag;return registerStyles(t,N,me),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(t,N,me)}),null},createStyled$1=function de(u,t){var N=u.__emotion_real===u,me=N&&u.__emotion_base||u,pe,Le;t!==void 0&&(pe=t.label,Le=t.target);var Ye=composeShouldForwardProps(u,t,N),nt=Ye||getDefaultShouldForwardProp(me),ot=!nt("as");return function(){var ft=arguments,mt=N&&u.__emotion_styles!==void 0?u.__emotion_styles.slice(0):[];if(pe!==void 0&&mt.push("label:"+pe+";"),ft[0]==null||ft[0].raw===void 0)mt.push.apply(mt,ft);else{var bt=ft[0];mt.push(bt[0]);for(var yt=ft.length,_t=1;_t<yt;_t++)mt.push(ft[_t],bt[_t])}var Ct=withEmotionCache(function(Tt,At,It){var Pt=ot&&Tt.as||me,Bt="",Ot=[],Nt=Tt;if(Tt.theme==null){Nt={};for(var Lt in Tt)Nt[Lt]=Tt[Lt];Nt.theme=reactExports.useContext(ThemeContext)}typeof Tt.className=="string"?Bt=getRegisteredStyles(At.registered,Ot,Tt.className):Tt.className!=null&&(Bt=Tt.className+" ");var Et=serializeStyles(mt.concat(Ot),At.registered,Nt);Bt+=At.key+"-"+Et.name,Le!==void 0&&(Bt+=" "+Le);var kt=ot&&Ye===void 0?getDefaultShouldForwardProp(Pt):nt,St={};for(var $t in Tt)ot&&$t==="as"||kt($t)&&(St[$t]=Tt[$t]);return St.className=Bt,It&&(St.ref=It),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:At,serialized:Et,isStringTag:typeof Pt=="string"}),reactExports.createElement(Pt,St))});return Ct.displayName=pe!==void 0?pe:"Styled("+(typeof me=="string"?me:me.displayName||me.name||"Component")+")",Ct.defaultProps=u.defaultProps,Ct.__emotion_real=Ct,Ct.__emotion_base=me,Ct.__emotion_styles=mt,Ct.__emotion_forwardProp=Ye,Object.defineProperty(Ct,"toString",{value:function(){return"."+Le}}),Ct.withComponent=function(Tt,At){var It=de(Tt,_extends$1({},t,At,{shouldForwardProp:composeShouldForwardProps(Ct,At,!0)}));return It.apply(void 0,mt)},Ct}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind(null);tags.forEach(function(de){newStyled[de]=newStyled(de)});function isEmpty$5(de){return de==null||Object.keys(de).length===0}function GlobalStyles$2(de){const{styles:u,defaultTheme:t={}}=de,N=typeof u=="function"?me=>u(isEmpty$5(me)?t:me):u;return jsxRuntimeExports.jsx(Global,{styles:N})}/**
 * @mui/styled-engine v6.4.9
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$1(de,u){return newStyled(de,u)}function internal_mutateStyles(de,u){Array.isArray(de.__emotion_styles)&&(de.__emotion_styles=u(de.__emotion_styles))}const wrapper=[];function internal_serializeStyles(de){return wrapper[0]=de,serializeStyles(wrapper)}var reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var de=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),Le=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),bt=Symbol.for("react.view_transition"),yt=Symbol.for("react.client.reference");function _t(Ct){if(typeof Ct=="object"&&Ct!==null){var Tt=Ct.$$typeof;switch(Tt){case de:switch(Ct=Ct.type,Ct){case t:case me:case N:case nt:case ot:case bt:return Ct;default:switch(Ct=Ct&&Ct.$$typeof,Ct){case Le:case Ye:case mt:case ft:return Ct;case pe:return Ct;default:return Tt}}case u:return Tt}}}return reactIs_production.ContextConsumer=pe,reactIs_production.ContextProvider=Le,reactIs_production.Element=de,reactIs_production.ForwardRef=Ye,reactIs_production.Fragment=t,reactIs_production.Lazy=mt,reactIs_production.Memo=ft,reactIs_production.Portal=u,reactIs_production.Profiler=me,reactIs_production.StrictMode=N,reactIs_production.Suspense=nt,reactIs_production.SuspenseList=ot,reactIs_production.isContextConsumer=function(Ct){return _t(Ct)===pe},reactIs_production.isContextProvider=function(Ct){return _t(Ct)===Le},reactIs_production.isElement=function(Ct){return typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===de},reactIs_production.isForwardRef=function(Ct){return _t(Ct)===Ye},reactIs_production.isFragment=function(Ct){return _t(Ct)===t},reactIs_production.isLazy=function(Ct){return _t(Ct)===mt},reactIs_production.isMemo=function(Ct){return _t(Ct)===ft},reactIs_production.isPortal=function(Ct){return _t(Ct)===u},reactIs_production.isProfiler=function(Ct){return _t(Ct)===me},reactIs_production.isStrictMode=function(Ct){return _t(Ct)===N},reactIs_production.isSuspense=function(Ct){return _t(Ct)===nt},reactIs_production.isSuspenseList=function(Ct){return _t(Ct)===ot},reactIs_production.isValidElementType=function(Ct){return typeof Ct=="string"||typeof Ct=="function"||Ct===t||Ct===me||Ct===N||Ct===nt||Ct===ot||typeof Ct=="object"&&Ct!==null&&(Ct.$$typeof===mt||Ct.$$typeof===ft||Ct.$$typeof===Le||Ct.$$typeof===pe||Ct.$$typeof===Ye||Ct.$$typeof===yt||Ct.getModuleId!==void 0)},reactIs_production.typeOf=_t,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs();function isPlainObject$2(de){if(typeof de!="object"||de===null)return!1;const u=Object.getPrototypeOf(de);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in de)&&!(Symbol.iterator in de)}function deepClone(de){if(reactExports.isValidElement(de)||reactIsExports.isValidElementType(de)||!isPlainObject$2(de))return de;const u={};return Object.keys(de).forEach(t=>{u[t]=deepClone(de[t])}),u}function deepmerge(de,u,t={clone:!0}){const N=t.clone?{...de}:de;return isPlainObject$2(de)&&isPlainObject$2(u)&&Object.keys(u).forEach(me=>{reactExports.isValidElement(u[me])||reactIsExports.isValidElementType(u[me])?N[me]=u[me]:isPlainObject$2(u[me])&&Object.prototype.hasOwnProperty.call(de,me)&&isPlainObject$2(de[me])?N[me]=deepmerge(de[me],u[me],t):t.clone?N[me]=isPlainObject$2(u[me])?deepClone(u[me]):u[me]:N[me]=u[me]}),N}const sortBreakpointsValues=de=>{const u=Object.keys(de).map(t=>({key:t,val:de[t]}))||[];return u.sort((t,N)=>t.val-N.val),u.reduce((t,N)=>({...t,[N.key]:N.val}),{})};function createBreakpoints(de){const{values:u={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:N=5,...me}=de,pe=sortBreakpointsValues(u),Le=Object.keys(pe);function Ye(bt){return`@media (min-width:${typeof u[bt]=="number"?u[bt]:bt}${t})`}function nt(bt){return`@media (max-width:${(typeof u[bt]=="number"?u[bt]:bt)-N/100}${t})`}function ot(bt,yt){const _t=Le.indexOf(yt);return`@media (min-width:${typeof u[bt]=="number"?u[bt]:bt}${t}) and (max-width:${(_t!==-1&&typeof u[Le[_t]]=="number"?u[Le[_t]]:yt)-N/100}${t})`}function ft(bt){return Le.indexOf(bt)+1<Le.length?ot(bt,Le[Le.indexOf(bt)+1]):Ye(bt)}function mt(bt){const yt=Le.indexOf(bt);return yt===0?Ye(Le[1]):yt===Le.length-1?nt(Le[yt]):ot(bt,Le[Le.indexOf(bt)+1]).replace("@media","@media not all and")}return{keys:Le,values:pe,up:Ye,down:nt,between:ot,only:ft,not:mt,unit:t,...me}}function sortContainerQueries(de,u){if(!de.containerQueries)return u;const t=Object.keys(u).filter(N=>N.startsWith("@container")).sort((N,me)=>{var Le,Ye;const pe=/min-width:\s*([0-9.]+)/;return+(((Le=N.match(pe))==null?void 0:Le[1])||0)-+(((Ye=me.match(pe))==null?void 0:Ye[1])||0)});return t.length?t.reduce((N,me)=>{const pe=u[me];return delete N[me],N[me]=pe,N},{...u}):u}function isCqShorthand(de,u){return u==="@"||u.startsWith("@")&&(de.some(t=>u.startsWith(`@${t}`))||!!u.match(/^@\d/))}function getContainerQuery(de,u){const t=u.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,N,me]=t,pe=Number.isNaN(+N)?N||0:+N;return de.containerQueries(me).up(pe)}function cssContainerQueries(de){const u=(pe,Le)=>pe.replace("@media",Le?`@container ${Le}`:"@container");function t(pe,Le){pe.up=(...Ye)=>u(de.breakpoints.up(...Ye),Le),pe.down=(...Ye)=>u(de.breakpoints.down(...Ye),Le),pe.between=(...Ye)=>u(de.breakpoints.between(...Ye),Le),pe.only=(...Ye)=>u(de.breakpoints.only(...Ye),Le),pe.not=(...Ye)=>{const nt=u(de.breakpoints.not(...Ye),Le);return nt.includes("not all and")?nt.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):nt}}const N={},me=pe=>(t(N,pe),N);return t(me),{...de,containerQueries:me}}const shape={borderRadius:4};function merge$2(de,u){return u?deepmerge(de,u,{clone:!1}):de}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:de=>`@media (min-width:${values$1[de]}px)`},defaultContainerQueries={containerQueries:de=>({up:u=>{let t=typeof u=="number"?u:values$1[u]||u;return typeof t=="number"&&(t=`${t}px`),de?`@container ${de} (min-width:${t})`:`@container (min-width:${t})`}})};function handleBreakpoints(de,u,t){const N=de.theme||{};if(Array.isArray(u)){const pe=N.breakpoints||defaultBreakpoints;return u.reduce((Le,Ye,nt)=>(Le[pe.up(pe.keys[nt])]=t(u[nt]),Le),{})}if(typeof u=="object"){const pe=N.breakpoints||defaultBreakpoints;return Object.keys(u).reduce((Le,Ye)=>{if(isCqShorthand(pe.keys,Ye)){const nt=getContainerQuery(N.containerQueries?N:defaultContainerQueries,Ye);nt&&(Le[nt]=t(u[Ye],Ye))}else if(Object.keys(pe.values||values$1).includes(Ye)){const nt=pe.up(Ye);Le[nt]=t(u[Ye],Ye)}else{const nt=Ye;Le[nt]=u[nt]}return Le},{})}return t(u)}function createEmptyBreakpointObject(de={}){var t;return((t=de.keys)==null?void 0:t.reduce((N,me)=>{const pe=de.up(me);return N[pe]={},N},{}))||{}}function removeUnusedBreakpoints(de,u){return de.reduce((t,N)=>{const me=t[N];return(!me||Object.keys(me).length===0)&&delete t[N],t},u)}function capitalize(de){if(typeof de!="string")throw new Error(formatMuiErrorMessage(7));return de.charAt(0).toUpperCase()+de.slice(1)}function getPath(de,u,t=!0){if(!u||typeof u!="string")return null;if(de&&de.vars&&t){const N=`vars.${u}`.split(".").reduce((me,pe)=>me&&me[pe]?me[pe]:null,de);if(N!=null)return N}return u.split(".").reduce((N,me)=>N&&N[me]!=null?N[me]:null,de)}function getStyleValue$1(de,u,t,N=t){let me;return typeof de=="function"?me=de(t):Array.isArray(de)?me=de[t]||N:me=getPath(de,t)||N,u&&(me=u(me,N,de)),me}function style$1(de){const{prop:u,cssProperty:t=de.prop,themeKey:N,transform:me}=de,pe=Le=>{if(Le[u]==null)return null;const Ye=Le[u],nt=Le.theme,ot=getPath(nt,N)||{};return handleBreakpoints(Le,Ye,mt=>{let bt=getStyleValue$1(ot,me,mt);return mt===bt&&typeof mt=="string"&&(bt=getStyleValue$1(ot,me,`${u}${mt==="default"?"":capitalize(mt)}`,mt)),t===!1?bt:{[t]:bt}})};return pe.propTypes={},pe.filterProps=[u],pe}function memoize$1(de){const u={};return t=>(u[t]===void 0&&(u[t]=de(t)),u[t])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(de=>{if(de.length>2)if(aliases[de])de=aliases[de];else return[de];const[u,t]=de.split(""),N=properties[u],me=directions[t]||"";return Array.isArray(me)?me.map(pe=>N+pe):[N+me]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(de,u,t,N){const me=getPath(de,u,!0)??t;return typeof me=="number"||typeof me=="string"?pe=>typeof pe=="string"?pe:typeof me=="string"?`calc(${pe} * ${me})`:me*pe:Array.isArray(me)?pe=>{if(typeof pe=="string")return pe;const Le=Math.abs(pe),Ye=me[Le];return pe>=0?Ye:typeof Ye=="number"?-Ye:`-${Ye}`}:typeof me=="function"?me:()=>{}}function createUnarySpacing(de){return createUnaryUnit(de,"spacing",8)}function getValue$1(de,u){return typeof u=="string"||u==null?u:de(u)}function getStyleFromPropValue(de,u){return t=>de.reduce((N,me)=>(N[me]=getValue$1(u,t),N),{})}function resolveCssProperty(de,u,t,N){if(!u.includes(t))return null;const me=getCssProperties(t),pe=getStyleFromPropValue(me,N),Le=de[t];return handleBreakpoints(de,Le,pe)}function style(de,u){const t=createUnarySpacing(de.theme);return Object.keys(de).map(N=>resolveCssProperty(de,u,N,t)).reduce(merge$2,{})}function margin(de){return style(de,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(de){return style(de,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(de=8,u=createUnarySpacing({spacing:de})){if(de.mui)return de;const t=(...N)=>(N.length===0?[1]:N).map(pe=>{const Le=u(pe);return typeof Le=="number"?`${Le}px`:Le}).join(" ");return t.mui=!0,t}function compose(...de){const u=de.reduce((N,me)=>(me.filterProps.forEach(pe=>{N[pe]=me}),N),{}),t=N=>Object.keys(N).reduce((me,pe)=>u[pe]?merge$2(me,u[pe](N)):me,{});return t.propTypes={},t.filterProps=de.reduce((N,me)=>N.concat(me.filterProps),[]),t}function borderTransform(de){return typeof de!="number"?de:`${de}px solid`}function createBorderStyle(de,u){return style$1({prop:de,themeKey:"borders",transform:u})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=de=>{if(de.borderRadius!==void 0&&de.borderRadius!==null){const u=createUnaryUnit(de.theme,"shape.borderRadius",4),t=N=>({borderRadius:getValue$1(u,N)});return handleBreakpoints(de,de.borderRadius,t)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=de=>{if(de.gap!==void 0&&de.gap!==null){const u=createUnaryUnit(de.theme,"spacing",8),t=N=>({gap:getValue$1(u,N)});return handleBreakpoints(de,de.gap,t)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=de=>{if(de.columnGap!==void 0&&de.columnGap!==null){const u=createUnaryUnit(de.theme,"spacing",8),t=N=>({columnGap:getValue$1(u,N)});return handleBreakpoints(de,de.columnGap,t)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=de=>{if(de.rowGap!==void 0&&de.rowGap!==null){const u=createUnaryUnit(de.theme,"spacing",8),t=N=>({rowGap:getValue$1(u,N)});return handleBreakpoints(de,de.rowGap,t)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(de,u){return u==="grey"?u:de}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(de){return de<=1&&de!==0?`${de*100}%`:de}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=de=>{if(de.maxWidth!==void 0&&de.maxWidth!==null){const u=t=>{var me,pe,Le,Ye,nt;const N=((Le=(pe=(me=de.theme)==null?void 0:me.breakpoints)==null?void 0:pe.values)==null?void 0:Le[t])||values$1[t];return N?((nt=(Ye=de.theme)==null?void 0:Ye.breakpoints)==null?void 0:nt.unit)!=="px"?{maxWidth:`${N}${de.theme.breakpoints.unit}`}:{maxWidth:N}:{maxWidth:sizingTransform(t)}};return handleBreakpoints(de,de.maxWidth,u)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:de=>({"@media print":{display:de}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...de){const u=de.reduce((N,me)=>N.concat(Object.keys(me)),[]),t=new Set(u);return de.every(N=>t.size===Object.keys(N).length)}function callIfFn(de,u){return typeof de=="function"?de(u):de}function unstable_createStyleFunctionSx(){function de(t,N,me,pe){const Le={[t]:N,theme:me},Ye=pe[t];if(!Ye)return{[t]:N};const{cssProperty:nt=t,themeKey:ot,transform:ft,style:mt}=Ye;if(N==null)return null;if(ot==="typography"&&N==="inherit")return{[t]:N};const bt=getPath(me,ot)||{};return mt?mt(Le):handleBreakpoints(Le,N,_t=>{let Ct=getStyleValue$1(bt,ft,_t);return _t===Ct&&typeof _t=="string"&&(Ct=getStyleValue$1(bt,ft,`${t}${_t==="default"?"":capitalize(_t)}`,_t)),nt===!1?Ct:{[nt]:Ct}})}function u(t){const{sx:N,theme:me={}}=t||{};if(!N)return null;const pe=me.unstable_sxConfig??defaultSxConfig;function Le(Ye){let nt=Ye;if(typeof Ye=="function")nt=Ye(me);else if(typeof Ye!="object")return Ye;if(!nt)return null;const ot=createEmptyBreakpointObject(me.breakpoints),ft=Object.keys(ot);let mt=ot;return Object.keys(nt).forEach(bt=>{const yt=callIfFn(nt[bt],me);if(yt!=null)if(typeof yt=="object")if(pe[bt])mt=merge$2(mt,de(bt,yt,me,pe));else{const _t=handleBreakpoints({theme:me},yt,Ct=>({[bt]:Ct}));objectsHaveSameKeys(_t,yt)?mt[bt]=u({sx:yt,theme:me}):mt=merge$2(mt,_t)}else mt=merge$2(mt,de(bt,yt,me,pe))}),sortContainerQueries(me,removeUnusedBreakpoints(ft,mt))}return Array.isArray(N)?N.map(Le):Le(N)}return u}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];function applyStyles(de,u){var N;const t=this;if(t.vars){if(!((N=t.colorSchemes)!=null&&N[de])||typeof t.getColorSchemeSelector!="function")return{};let me=t.getColorSchemeSelector(de);return me==="&"?u:((me.includes("data-")||me.includes("."))&&(me=`*:where(${me.replace(/\s*&$/,"")}) &`),{[me]:u})}return t.palette.mode===de?u:{}}function createTheme$1(de={},...u){const{breakpoints:t={},palette:N={},spacing:me,shape:pe={},...Le}=de,Ye=createBreakpoints(t),nt=createSpacing(me);let ot=deepmerge({breakpoints:Ye,direction:"ltr",components:{},palette:{mode:"light",...N},spacing:nt,shape:{...shape,...pe}},Le);return ot=cssContainerQueries(ot),ot.applyStyles=applyStyles,ot=u.reduce((ft,mt)=>deepmerge(ft,mt),ot),ot.unstable_sxConfig={...defaultSxConfig,...Le==null?void 0:Le.unstable_sxConfig},ot.unstable_sx=function(mt){return styleFunctionSx({sx:mt,theme:this})},ot}function isObjectEmpty$2(de){return Object.keys(de).length===0}function useTheme$2(de=null){const u=reactExports.useContext(ThemeContext);return!u||isObjectEmpty$2(u)?de:u}const systemDefaultTheme$1=createTheme$1();function useTheme$1(de=systemDefaultTheme$1){return useTheme$2(de)}function GlobalStyles$1({styles:de,themeId:u,defaultTheme:t={}}){const N=useTheme$1(t),me=typeof de=="function"?de(u&&N[u]||N):de;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:me})}const splitProps=de=>{var N;const u={systemProps:{},otherProps:{}},t=((N=de==null?void 0:de.theme)==null?void 0:N.unstable_sxConfig)??defaultSxConfig;return Object.keys(de).forEach(me=>{t[me]?u.systemProps[me]=de[me]:u.otherProps[me]=de[me]}),u};function extendSxProp$1(de){const{sx:u,...t}=de,{systemProps:N,otherProps:me}=splitProps(t);let pe;return Array.isArray(u)?pe=[N,...u]:typeof u=="function"?pe=(...Le)=>{const Ye=u(...Le);return isPlainObject$2(Ye)?{...N,...Ye}:N}:pe={...N,...u},{...me,sx:pe}}const defaultGenerator=de=>de,createClassNameGenerator=()=>{let de=defaultGenerator;return{configure(u){de=u},generate(u){return de(u)},reset(){de=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function r$1(de){var u,t,N="";if(typeof de=="string"||typeof de=="number")N+=de;else if(typeof de=="object")if(Array.isArray(de)){var me=de.length;for(u=0;u<me;u++)de[u]&&(t=r$1(de[u]))&&(N&&(N+=" "),N+=t)}else for(t in de)de[t]&&(N&&(N+=" "),N+=t);return N}function clsx(){for(var de,u,t=0,N="",me=arguments.length;t<me;t++)(de=arguments[t])&&(u=r$1(de))&&(N&&(N+=" "),N+=u);return N}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(de,u,t="Mui"){const N=globalStateClasses[u];return N?`${t}-${N}`:`${ClassNameGenerator.generate(de)}-${u}`}function generateUtilityClasses(de,u,t="Mui"){const N={};return u.forEach(me=>{N[me]=generateUtilityClass(de,me,t)}),N}function preprocessStyles(de){const{variants:u,...t}=de,N={variants:u,style:internal_serializeStyles(t),isProcessed:!0};return N.style===t||u&&u.forEach(me=>{typeof me.style!="function"&&(me.style=internal_serializeStyles(me.style))}),N}const systemDefaultTheme=createTheme$1();function shouldForwardProp(de){return de!=="ownerState"&&de!=="theme"&&de!=="sx"&&de!=="as"}function defaultOverridesResolver(de){return de?(u,t)=>t[de]:null}function attachTheme(de,u,t){de.theme=isObjectEmpty$1(de.theme)?t:de.theme[u]||de.theme}function processStyle(de,u){const t=typeof u=="function"?u(de):u;if(Array.isArray(t))return t.flatMap(N=>processStyle(de,N));if(Array.isArray(t==null?void 0:t.variants)){let N;if(t.isProcessed)N=t.style;else{const{variants:me,...pe}=t;N=pe}return processStyleVariants(de,t.variants,[N])}return t!=null&&t.isProcessed?t.style:t}function processStyleVariants(de,u,t=[]){var me;let N;e:for(let pe=0;pe<u.length;pe+=1){const Le=u[pe];if(typeof Le.props=="function"){if(N??(N={...de,...de.ownerState,ownerState:de.ownerState}),!Le.props(N))continue}else for(const Ye in Le.props)if(de[Ye]!==Le.props[Ye]&&((me=de.ownerState)==null?void 0:me[Ye])!==Le.props[Ye])continue e;typeof Le.style=="function"?(N??(N={...de,...de.ownerState,ownerState:de.ownerState}),t.push(Le.style(N))):t.push(Le.style)}return t}function createStyled(de={}){const{themeId:u,defaultTheme:t=systemDefaultTheme,rootShouldForwardProp:N=shouldForwardProp,slotShouldForwardProp:me=shouldForwardProp}=de;function pe(Ye){attachTheme(Ye,u,t)}return(Ye,nt={})=>{internal_mutateStyles(Ye,Ot=>Ot.filter(Nt=>Nt!==styleFunctionSx));const{name:ot,slot:ft,skipVariantsResolver:mt,skipSx:bt,overridesResolver:yt=defaultOverridesResolver(lowercaseFirstLetter(ft)),..._t}=nt,Ct=mt!==void 0?mt:ft&&ft!=="Root"&&ft!=="root"||!1,Tt=bt||!1;let At=shouldForwardProp;ft==="Root"||ft==="root"?At=N:ft?At=me:isStringTag(Ye)&&(At=void 0);const It=styled$1(Ye,{shouldForwardProp:At,label:generateStyledLabel(),..._t}),Pt=Ot=>{if(typeof Ot=="function"&&Ot.__emotion_real!==Ot)return function(Lt){return processStyle(Lt,Ot)};if(isPlainObject$2(Ot)){const Nt=preprocessStyles(Ot);return Nt.variants?function(Et){return processStyle(Et,Nt)}:Nt.style}return Ot},Bt=(...Ot)=>{const Nt=[],Lt=Ot.map(Pt),Et=[];if(Nt.push(pe),ot&&yt&&Et.push(function(zt){var Dt,jt;const qt=(jt=(Dt=zt.theme.components)==null?void 0:Dt[ot])==null?void 0:jt.styleOverrides;if(!qt)return null;const Zt={};for(const en in qt)Zt[en]=processStyle(zt,qt[en]);return yt(zt,Zt)}),ot&&!Ct&&Et.push(function(zt){var Zt,Dt;const Ut=zt.theme,qt=(Dt=(Zt=Ut==null?void 0:Ut.components)==null?void 0:Zt[ot])==null?void 0:Dt.variants;return qt?processStyleVariants(zt,qt):null}),Tt||Et.push(styleFunctionSx),Array.isArray(Lt[0])){const $t=Lt.shift(),zt=new Array(Nt.length).fill(""),Ut=new Array(Et.length).fill("");let qt;qt=[...zt,...$t,...Ut],qt.raw=[...zt,...$t.raw,...Ut],Nt.unshift(qt)}const kt=[...Nt,...Lt,...Et],St=It(...kt);return Ye.muiName&&(St.muiName=Ye.muiName),St};return It.withConfig&&(Bt.withConfig=It.withConfig),Bt}}function generateStyledLabel(de,u){return void 0}function isObjectEmpty$1(de){for(const u in de)return!1;return!0}function isStringTag(de){return typeof de=="string"&&de.charCodeAt(0)>96}function lowercaseFirstLetter(de){return de&&de.charAt(0).toLowerCase()+de.slice(1)}function resolveProps(de,u){const t={...u};for(const N in de)if(Object.prototype.hasOwnProperty.call(de,N)){const me=N;if(me==="components"||me==="slots")t[me]={...de[me],...t[me]};else if(me==="componentsProps"||me==="slotProps"){const pe=de[me],Le=u[me];if(!Le)t[me]=pe||{};else if(!pe)t[me]=Le;else{t[me]={...Le};for(const Ye in pe)if(Object.prototype.hasOwnProperty.call(pe,Ye)){const nt=Ye;t[me][nt]=resolveProps(pe[nt],Le[nt])}}}else t[me]===void 0&&(t[me]=de[me])}return t}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function clamp$2(de,u=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(u,Math.min(de,t))}function clampWrapper(de,u=0,t=1){return clamp$2(de,u,t)}function hexToRgb(de){de=de.slice(1);const u=new RegExp(`.{1,${de.length>=6?2:1}}`,"g");let t=de.match(u);return t&&t[0].length===1&&(t=t.map(N=>N+N)),t?`rgb${t.length===4?"a":""}(${t.map((N,me)=>me<3?parseInt(N,16):Math.round(parseInt(N,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(de){if(de.type)return de;if(de.charAt(0)==="#")return decomposeColor(hexToRgb(de));const u=de.indexOf("("),t=de.substring(0,u);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(formatMuiErrorMessage(9,de));let N=de.substring(u+1,de.length-1),me;if(t==="color"){if(N=N.split(" "),me=N.shift(),N.length===4&&N[3].charAt(0)==="/"&&(N[3]=N[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(me))throw new Error(formatMuiErrorMessage(10,me))}else N=N.split(",");return N=N.map(pe=>parseFloat(pe)),{type:t,values:N,colorSpace:me}}const colorChannel=de=>{const u=decomposeColor(de);return u.values.slice(0,3).map((t,N)=>u.type.includes("hsl")&&N!==0?`${t}%`:t).join(" ")},private_safeColorChannel=(de,u)=>{try{return colorChannel(de)}catch{return de}};function recomposeColor(de){const{type:u,colorSpace:t}=de;let{values:N}=de;return u.includes("rgb")?N=N.map((me,pe)=>pe<3?parseInt(me,10):me):u.includes("hsl")&&(N[1]=`${N[1]}%`,N[2]=`${N[2]}%`),u.includes("color")?N=`${t} ${N.join(" ")}`:N=`${N.join(", ")}`,`${u}(${N})`}function hslToRgb(de){de=decomposeColor(de);const{values:u}=de,t=u[0],N=u[1]/100,me=u[2]/100,pe=N*Math.min(me,1-me),Le=(ot,ft=(ot+t/30)%12)=>me-pe*Math.max(Math.min(ft-3,9-ft,1),-1);let Ye="rgb";const nt=[Math.round(Le(0)*255),Math.round(Le(8)*255),Math.round(Le(4)*255)];return de.type==="hsla"&&(Ye+="a",nt.push(u[3])),recomposeColor({type:Ye,values:nt})}function getLuminance(de){de=decomposeColor(de);let u=de.type==="hsl"||de.type==="hsla"?decomposeColor(hslToRgb(de)).values:de.values;return u=u.map(t=>(de.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*u[0]+.7152*u[1]+.0722*u[2]).toFixed(3))}function getContrastRatio(de,u){const t=getLuminance(de),N=getLuminance(u);return(Math.max(t,N)+.05)/(Math.min(t,N)+.05)}function alpha(de,u){return de=decomposeColor(de),u=clampWrapper(u),(de.type==="rgb"||de.type==="hsl")&&(de.type+="a"),de.type==="color"?de.values[3]=`/${u}`:de.values[3]=u,recomposeColor(de)}function private_safeAlpha(de,u,t){try{return alpha(de,u)}catch{return de}}function darken(de,u){if(de=decomposeColor(de),u=clampWrapper(u),de.type.includes("hsl"))de.values[2]*=1-u;else if(de.type.includes("rgb")||de.type.includes("color"))for(let t=0;t<3;t+=1)de.values[t]*=1-u;return recomposeColor(de)}function private_safeDarken(de,u,t){try{return darken(de,u)}catch{return de}}function lighten(de,u){if(de=decomposeColor(de),u=clampWrapper(u),de.type.includes("hsl"))de.values[2]+=(100-de.values[2])*u;else if(de.type.includes("rgb"))for(let t=0;t<3;t+=1)de.values[t]+=(255-de.values[t])*u;else if(de.type.includes("color"))for(let t=0;t<3;t+=1)de.values[t]+=(1-de.values[t])*u;return recomposeColor(de)}function private_safeLighten(de,u,t){try{return lighten(de,u)}catch{return de}}function emphasize(de,u=.15){return getLuminance(de)>.5?darken(de,u):lighten(de,u)}function private_safeEmphasize(de,u,t){try{return emphasize(de,u)}catch{return de}}function createChainedFunction(...de){return de.reduce((u,t)=>t==null?u:function(...me){u.apply(this,me),t.apply(this,me)},()=>{})}function debounce$1(de,u=166){let t;function N(...me){const pe=()=>{de.apply(this,me)};clearTimeout(t),t=setTimeout(pe,u)}return N.clear=()=>{clearTimeout(t)},N}function isMuiElement(de,u){var t,N,me;return reactExports.isValidElement(de)&&u.indexOf(de.type.muiName??((me=(N=(t=de.type)==null?void 0:t._payload)==null?void 0:N.value)==null?void 0:me.muiName))!==-1}function ownerDocument(de){return de&&de.ownerDocument||document}function ownerWindow(de){return ownerDocument(de).defaultView||window}function setRef(de,u){typeof de=="function"?de(u):de&&(de.current=u)}let globalId=0;function useGlobalId(de){const[u,t]=reactExports.useState(de),N=u;return reactExports.useEffect(()=>{u==null&&(globalId+=1,t(`mui-${globalId}`))},[u]),N}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(de){return maybeReactUseId!==void 0?maybeReactUseId():useGlobalId(de)}function useControlled({controlled:de,default:u,name:t,state:N="value"}){const{current:me}=reactExports.useRef(de!==void 0),[pe,Le]=reactExports.useState(u),Ye=me?de:pe,nt=reactExports.useCallback(ot=>{me||Le(ot)},[]);return[Ye,nt]}function useEventCallback(de){const u=reactExports.useRef(de);return useEnhancedEffect(()=>{u.current=de}),reactExports.useRef((...t)=>(0,u.current)(...t)).current}function useForkRef(...de){const u=reactExports.useRef(void 0),t=reactExports.useCallback(N=>{const me=de.map(pe=>{if(pe==null)return null;if(typeof pe=="function"){const Le=pe,Ye=Le(N);return typeof Ye=="function"?Ye:()=>{Le(null)}}return pe.current=N,()=>{pe.current=null}});return()=>{me.forEach(pe=>pe==null?void 0:pe())}},de);return reactExports.useMemo(()=>de.every(N=>N==null)?null:N=>{u.current&&(u.current(),u.current=void 0),N!=null&&(u.current=t(N))},de)}const UNINITIALIZED={};function useLazyRef(de,u){const t=reactExports.useRef(UNINITIALIZED);return t.current===UNINITIALIZED&&(t.current=de(u)),t}const EMPTY=[];function useOnMount(de){reactExports.useEffect(de,EMPTY)}class Timeout{constructor(){xt(this,"currentId",null);xt(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});xt(this,"disposeEffect",()=>this.clear)}static create(){return new Timeout}start(u,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},u)}}function useTimeout(){const de=useLazyRef(Timeout.create).current;return useOnMount(de.disposeEffect),de}function isFocusVisible(de){try{return de.matches(":focus-visible")}catch{}return!1}function getScrollbarSize(de=window){const u=de.document.documentElement.clientWidth;return de.innerWidth-u}function composeClasses(de,u,t=void 0){const N={};for(const me in de){const pe=de[me];let Le="",Ye=!0;for(let nt=0;nt<pe.length;nt+=1){const ot=pe[nt];ot&&(Le+=(Ye===!0?"":" ")+u(ot),Ye=!1,t&&t[ot]&&(Le+=" "+t[ot]))}N[me]=Le}return N}function isHostComponent$1(de){return typeof de=="string"}function appendOwnerState(de,u,t){return de===void 0||isHostComponent$1(de)?u:{...u,ownerState:{...u.ownerState,...t}}}function extractEventHandlers(de,u=[]){if(de===void 0)return{};const t={};return Object.keys(de).filter(N=>N.match(/^on[A-Z]/)&&typeof de[N]=="function"&&!u.includes(N)).forEach(N=>{t[N]=de[N]}),t}function omitEventHandlers(de){if(de===void 0)return{};const u={};return Object.keys(de).filter(t=>!(t.match(/^on[A-Z]/)&&typeof de[t]=="function")).forEach(t=>{u[t]=de[t]}),u}function mergeSlotProps$1(de){const{getSlotProps:u,additionalProps:t,externalSlotProps:N,externalForwardedProps:me,className:pe}=de;if(!u){const yt=clsx(t==null?void 0:t.className,pe,me==null?void 0:me.className,N==null?void 0:N.className),_t={...t==null?void 0:t.style,...me==null?void 0:me.style,...N==null?void 0:N.style},Ct={...t,...me,...N};return yt.length>0&&(Ct.className=yt),Object.keys(_t).length>0&&(Ct.style=_t),{props:Ct,internalRef:void 0}}const Le=extractEventHandlers({...me,...N}),Ye=omitEventHandlers(N),nt=omitEventHandlers(me),ot=u(Le),ft=clsx(ot==null?void 0:ot.className,t==null?void 0:t.className,pe,me==null?void 0:me.className,N==null?void 0:N.className),mt={...ot==null?void 0:ot.style,...t==null?void 0:t.style,...me==null?void 0:me.style,...N==null?void 0:N.style},bt={...ot,...t,...nt,...Ye};return ft.length>0&&(bt.className=ft),Object.keys(mt).length>0&&(bt.style=mt),{props:bt,internalRef:ot.ref}}function resolveComponentProps(de,u,t){return typeof de=="function"?de(u,t):de}function useSlotProps(de){var mt;const{elementType:u,externalSlotProps:t,ownerState:N,skipResolvingSlotProps:me=!1,...pe}=de,Le=me?{}:resolveComponentProps(t,N),{props:Ye,internalRef:nt}=mergeSlotProps$1({...pe,externalSlotProps:Le}),ot=useForkRef(nt,Le==null?void 0:Le.ref,(mt=de.additionalProps)==null?void 0:mt.ref);return appendOwnerState(u,{...Ye,ref:ot},N)}function getReactElementRef(de){var u;return parseInt(reactExports.version,10)>=19?((u=de==null?void 0:de.props)==null?void 0:u.ref)||null:(de==null?void 0:de.ref)||null}const RtlContext=reactExports.createContext(),useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function getThemeProps(de){const{theme:u,name:t,props:N}=de;if(!u||!u.components||!u.components[t])return N;const me=u.components[t];return me.defaultProps?resolveProps(me.defaultProps,N):!me.styleOverrides&&!me.variants?resolveProps(me,N):N}function useDefaultProps$1({props:de,name:u}){const t=reactExports.useContext(PropsContext);return getThemeProps({props:de,name:u,theme:{components:t}})}const arg={theme:void 0};function unstable_memoTheme(de){let u,t;return function(me){let pe=u;return(pe===void 0||me.theme!==t)&&(arg.theme=me.theme,pe=preprocessStyles(de(arg)),u=pe,t=me.theme),pe}}function createGetCssVar$1(de=""){function u(...N){if(!N.length)return"";const me=N[0];return typeof me=="string"&&!me.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${de?`${de}-`:""}${me}${u(...N.slice(1))})`:`, ${me}`}return(N,...me)=>`var(--${de?`${de}-`:""}${N}${u(...me)})`}const assignNestedKeys=(de,u,t,N=[])=>{let me=de;u.forEach((pe,Le)=>{Le===u.length-1?Array.isArray(me)?me[Number(pe)]=t:me&&typeof me=="object"&&(me[pe]=t):me&&typeof me=="object"&&(me[pe]||(me[pe]=N.includes(pe)?[]:{}),me=me[pe])})},walkObjectDeep=(de,u,t)=>{function N(me,pe=[],Le=[]){Object.entries(me).forEach(([Ye,nt])=>{(!t||t&&!t([...pe,Ye]))&&nt!=null&&(typeof nt=="object"&&Object.keys(nt).length>0?N(nt,[...pe,Ye],Array.isArray(nt)?[...Le,Ye]:Le):u([...pe,Ye],nt,Le))})}N(de)},getCssValue=(de,u)=>typeof u=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(N=>de.includes(N))||de[de.length-1].toLowerCase().includes("opacity")?u:`${u}px`:u;function cssVarsParser(de,u){const{prefix:t,shouldSkipGeneratingVar:N}=u||{},me={},pe={},Le={};return walkObjectDeep(de,(Ye,nt,ot)=>{if((typeof nt=="string"||typeof nt=="number")&&(!N||!N(Ye,nt))){const ft=`--${t?`${t}-`:""}${Ye.join("-")}`,mt=getCssValue(Ye,nt);Object.assign(me,{[ft]:mt}),assignNestedKeys(pe,Ye,`var(${ft})`,ot),assignNestedKeys(Le,Ye,`var(${ft}, ${mt})`,ot)}},Ye=>Ye[0]==="vars"),{css:me,vars:pe,varsWithDefaults:Le}}function prepareCssVars(de,u={}){const{getSelector:t=Tt,disableCssColorScheme:N,colorSchemeSelector:me}=u,{colorSchemes:pe={},components:Le,defaultColorScheme:Ye="light",...nt}=de,{vars:ot,css:ft,varsWithDefaults:mt}=cssVarsParser(nt,u);let bt=mt;const yt={},{[Ye]:_t,...Ct}=pe;if(Object.entries(Ct||{}).forEach(([Pt,Bt])=>{const{vars:Ot,css:Nt,varsWithDefaults:Lt}=cssVarsParser(Bt,u);bt=deepmerge(bt,Lt),yt[Pt]={css:Nt,vars:Ot}}),_t){const{css:Pt,vars:Bt,varsWithDefaults:Ot}=cssVarsParser(_t,u);bt=deepmerge(bt,Ot),yt[Ye]={css:Pt,vars:Bt}}function Tt(Pt,Bt){var Nt,Lt;let Ot=me;if(me==="class"&&(Ot=".%s"),me==="data"&&(Ot="[data-%s]"),me!=null&&me.startsWith("data-")&&!me.includes("%s")&&(Ot=`[${me}="%s"]`),Pt){if(Ot==="media")return de.defaultColorScheme===Pt?":root":{[`@media (prefers-color-scheme: ${((Lt=(Nt=pe[Pt])==null?void 0:Nt.palette)==null?void 0:Lt.mode)||Pt})`]:{":root":Bt}};if(Ot)return de.defaultColorScheme===Pt?`:root, ${Ot.replace("%s",String(Pt))}`:Ot.replace("%s",String(Pt))}return":root"}return{vars:bt,generateThemeVars:()=>{let Pt={...ot};return Object.entries(yt).forEach(([,{vars:Bt}])=>{Pt=deepmerge(Pt,Bt)}),Pt},generateStyleSheets:()=>{var Et,kt;const Pt=[],Bt=de.defaultColorScheme||"light";function Ot(St,$t){Object.keys($t).length&&Pt.push(typeof St=="string"?{[St]:{...$t}}:St)}Ot(t(void 0,{...ft}),ft);const{[Bt]:Nt,...Lt}=yt;if(Nt){const{css:St}=Nt,$t=(kt=(Et=pe[Bt])==null?void 0:Et.palette)==null?void 0:kt.mode,zt=!N&&$t?{colorScheme:$t,...St}:{...St};Ot(t(Bt,{...zt}),zt)}return Object.entries(Lt).forEach(([St,{css:$t}])=>{var qt,Zt;const zt=(Zt=(qt=pe[St])==null?void 0:qt.palette)==null?void 0:Zt.mode,Ut=!N&&zt?{colorScheme:zt,...$t}:{...$t};Ot(t(St,{...Ut}),Ut)}),Pt}}}function createGetColorSchemeSelector(de){return function(t){return de==="media"?`@media (prefers-color-scheme: ${t})`:de?de.startsWith("data-")&&!de.includes("%s")?`[${de}="${t}"] &`:de==="class"?`.${t} &`:de==="data"?`[data-${t}] &`:`${de.replace("%s",t)} &`:"&"}}function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(de,u,t,N){const me=N.light||N,pe=N.dark||N*1.5;de[u]||(de.hasOwnProperty(t)?de[u]=de[t]:u==="light"?de.light=lighten(de.main,me):u==="dark"&&(de.dark=darken(de.main,pe)))}function getDefaultPrimary(de="light"){return de==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(de="light"){return de==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(de="light"){return de==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(de="light"){return de==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(de="light"){return de==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(de="light"){return de==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function createPalette(de){const{mode:u="light",contrastThreshold:t=3,tonalOffset:N=.2,...me}=de,pe=de.primary||getDefaultPrimary(u),Le=de.secondary||getDefaultSecondary(u),Ye=de.error||getDefaultError(u),nt=de.info||getDefaultInfo(u),ot=de.success||getDefaultSuccess(u),ft=de.warning||getDefaultWarning(u);function mt(Ct){return getContrastRatio(Ct,dark.text.primary)>=t?dark.text.primary:light.text.primary}const bt=({color:Ct,name:Tt,mainShade:At=500,lightShade:It=300,darkShade:Pt=700})=>{if(Ct={...Ct},!Ct.main&&Ct[At]&&(Ct.main=Ct[At]),!Ct.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Tt?` (${Tt})`:"",At));if(typeof Ct.main!="string")throw new Error(formatMuiErrorMessage(12,Tt?` (${Tt})`:"",JSON.stringify(Ct.main)));return addLightOrDark(Ct,"light",It,N),addLightOrDark(Ct,"dark",Pt,N),Ct.contrastText||(Ct.contrastText=mt(Ct.main)),Ct};let yt;return u==="light"?yt=getLight():u==="dark"&&(yt=getDark()),deepmerge({common:{...common},mode:u,primary:bt({color:pe,name:"primary"}),secondary:bt({color:Le,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:bt({color:Ye,name:"error"}),warning:bt({color:ft,name:"warning"}),info:bt({color:nt,name:"info"}),success:bt({color:ot,name:"success"}),grey,contrastThreshold:t,getContrastText:mt,augmentColor:bt,tonalOffset:N,...yt},me)}function prepareTypographyVars(de){const u={};return Object.entries(de).forEach(N=>{const[me,pe]=N;typeof pe=="object"&&(u[me]=`${pe.fontStyle?`${pe.fontStyle} `:""}${pe.fontVariant?`${pe.fontVariant} `:""}${pe.fontWeight?`${pe.fontWeight} `:""}${pe.fontStretch?`${pe.fontStretch} `:""}${pe.fontSize||""}${pe.lineHeight?`/${pe.lineHeight} `:""}${pe.fontFamily||""}`)}),u}function createMixins(de,u){return{toolbar:{minHeight:56,[de.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[de.up("sm")]:{minHeight:64}},...u}}function round$1(de){return Math.round(de*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(de,u){const{fontFamily:t=defaultFontFamily,fontSize:N=14,fontWeightLight:me=300,fontWeightRegular:pe=400,fontWeightMedium:Le=500,fontWeightBold:Ye=700,htmlFontSize:nt=16,allVariants:ot,pxToRem:ft,...mt}=typeof u=="function"?u(de):u,bt=N/14,yt=ft||(Tt=>`${Tt/nt*bt}rem`),_t=(Tt,At,It,Pt,Bt)=>({fontFamily:t,fontWeight:Tt,fontSize:yt(At),lineHeight:It,...t===defaultFontFamily?{letterSpacing:`${round$1(Pt/At)}em`}:{},...Bt,...ot}),Ct={h1:_t(me,96,1.167,-1.5),h2:_t(me,60,1.2,-.5),h3:_t(pe,48,1.167,0),h4:_t(pe,34,1.235,.25),h5:_t(pe,24,1.334,0),h6:_t(Le,20,1.6,.15),subtitle1:_t(pe,16,1.75,.15),subtitle2:_t(Le,14,1.57,.1),body1:_t(pe,16,1.5,.15),body2:_t(pe,14,1.43,.15),button:_t(Le,14,1.75,.4,caseAllCaps),caption:_t(pe,12,1.66,.4),overline:_t(pe,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:nt,pxToRem:yt,fontFamily:t,fontSize:N,fontWeightLight:me,fontWeightRegular:pe,fontWeightMedium:Le,fontWeightBold:Ye,...Ct},mt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...de){return[`${de[0]}px ${de[1]}px ${de[2]}px ${de[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${de[4]}px ${de[5]}px ${de[6]}px ${de[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${de[8]}px ${de[9]}px ${de[10]}px ${de[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(de){return`${Math.round(de)}ms`}function getAutoHeightDuration(de){if(!de)return 0;const u=de/36;return Math.min(Math.round((4+15*u**.25+u/5)*10),3e3)}function createTransitions(de){const u={...easing,...de.easing},t={...duration,...de.duration};return{getAutoHeightDuration,create:(me=["all"],pe={})=>{const{duration:Le=t.standard,easing:Ye=u.easeInOut,delay:nt=0,...ot}=pe;return(Array.isArray(me)?me:[me]).map(ft=>`${ft} ${typeof Le=="string"?Le:formatMs(Le)} ${Ye} ${typeof nt=="string"?nt:formatMs(nt)}`).join(",")},...de,easing:u,duration:t}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(de){return isPlainObject$2(de)||typeof de>"u"||typeof de=="string"||typeof de=="boolean"||typeof de=="number"||Array.isArray(de)}function stringifyTheme(de={}){const u={...de};function t(N){const me=Object.entries(N);for(let pe=0;pe<me.length;pe++){const[Le,Ye]=me[pe];!isSerializable(Ye)||Le.startsWith("unstable_")?delete N[Le]:isPlainObject$2(Ye)&&(N[Le]={...Ye},t(N[Le]))}}return t(u),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(u,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function createThemeNoVars(de={},...u){const{breakpoints:t,mixins:N={},spacing:me,palette:pe={},transitions:Le={},typography:Ye={},shape:nt,...ot}=de;if(de.vars&&de.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const ft=createPalette(pe),mt=createTheme$1(de);let bt=deepmerge(mt,{mixins:createMixins(mt.breakpoints,N),palette:ft,shadows:shadows.slice(),typography:createTypography(ft,Ye),transitions:createTransitions(Le),zIndex:{...zIndex}});return bt=deepmerge(bt,ot),bt=u.reduce((yt,_t)=>deepmerge(yt,_t),bt),bt.unstable_sxConfig={...defaultSxConfig,...ot==null?void 0:ot.unstable_sxConfig},bt.unstable_sx=function(_t){return styleFunctionSx({sx:_t,theme:this})},bt.toRuntimeSource=stringifyTheme,bt}function getOverlayAlpha(de){let u;return de<1?u=5.11916*de**2:u=4.5*Math.log(de+1)+2,Math.round(u*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((de,u)=>{if(u===0)return"none";const t=getOverlayAlpha(u);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function getOpacity(de){return{inputPlaceholder:de==="dark"?.5:.42,inputUnderline:de==="dark"?.7:.42,switchTrackDisabled:de==="dark"?.2:.12,switchTrack:de==="dark"?.3:.38}}function getOverlays(de){return de==="dark"?defaultDarkOverlays:[]}function createColorScheme(de){const{palette:u={mode:"light"},opacity:t,overlays:N,...me}=de,pe=createPalette(u);return{palette:pe,opacity:{...getOpacity(pe.mode),...t},overlays:N||getOverlays(pe.mode),...me}}function shouldSkipGeneratingVar(de){var u;return!!de[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!de[0].match(/sxConfig$/)||de[0]==="palette"&&!!((u=de[1])!=null&&u.match(/(mode|contrastThreshold|tonalOffset)/))}const excludeVariablesFromRoot=de=>[...[...Array(25)].map((u,t)=>`--${de?`${de}-`:""}overlays-${t}`),`--${de?`${de}-`:""}palette-AppBar-darkBg`,`--${de?`${de}-`:""}palette-AppBar-darkColor`],defaultGetSelector=de=>(u,t)=>{const N=de.rootSelector||":root",me=de.colorSchemeSelector;let pe=me;if(me==="class"&&(pe=".%s"),me==="data"&&(pe="[data-%s]"),me!=null&&me.startsWith("data-")&&!me.includes("%s")&&(pe=`[${me}="%s"]`),de.defaultColorScheme===u){if(u==="dark"){const Le={};return excludeVariablesFromRoot(de.cssVarPrefix).forEach(Ye=>{Le[Ye]=t[Ye],delete t[Ye]}),pe==="media"?{[N]:t,"@media (prefers-color-scheme: dark)":{[N]:Le}}:pe?{[pe.replace("%s",u)]:Le,[`${N}, ${pe.replace("%s",u)}`]:t}:{[N]:{...t,...Le}}}if(pe&&pe!=="media")return`${N}, ${pe.replace("%s",String(u))}`}else if(u){if(pe==="media")return{[`@media (prefers-color-scheme: ${String(u)})`]:{[N]:t}};if(pe)return pe.replace("%s",String(u))}return N};function assignNode(de,u){u.forEach(t=>{de[t]||(de[t]={})})}function setColor(de,u,t){!de[u]&&t&&(de[u]=t)}function toRgb(de){return typeof de!="string"||!de.startsWith("hsl")?de:hslToRgb(de)}function setColorChannel(de,u){`${u}Channel`in de||(de[`${u}Channel`]=private_safeColorChannel(toRgb(de[u])))}function getSpacingVal(de){return typeof de=="number"?`${de}px`:typeof de=="string"||typeof de=="function"||Array.isArray(de)?de:"8px"}const silent=de=>{try{return de()}catch{}},createGetCssVar=(de="mui")=>createGetCssVar$1(de);function attachColorScheme$1(de,u,t,N){if(!u)return;u=u===!0?{}:u;const me=N==="dark"?"dark":"light";if(!t){de[N]=createColorScheme({...u,palette:{mode:me,...u==null?void 0:u.palette}});return}const{palette:pe,...Le}=createThemeNoVars({...t,palette:{mode:me,...u==null?void 0:u.palette}});return de[N]={...u,palette:pe,opacity:{...getOpacity(me),...u==null?void 0:u.opacity},overlays:(u==null?void 0:u.overlays)||getOverlays(me)},Le}function createThemeWithVars(de={},...u){const{colorSchemes:t={light:!0},defaultColorScheme:N,disableCssColorScheme:me=!1,cssVarPrefix:pe="mui",shouldSkipGeneratingVar:Le=shouldSkipGeneratingVar,colorSchemeSelector:Ye=t.light&&t.dark?"media":void 0,rootSelector:nt=":root",...ot}=de,ft=Object.keys(t)[0],mt=N||(t.light&&ft!=="light"?"light":ft),bt=createGetCssVar(pe),{[mt]:yt,light:_t,dark:Ct,...Tt}=t,At={...Tt};let It=yt;if((mt==="dark"&&!("dark"in t)||mt==="light"&&!("light"in t))&&(It=!0),!It)throw new Error(formatMuiErrorMessage(21,mt));const Pt=attachColorScheme$1(At,It,ot,mt);_t&&!At.light&&attachColorScheme$1(At,_t,void 0,"light"),Ct&&!At.dark&&attachColorScheme$1(At,Ct,void 0,"dark");let Bt={defaultColorScheme:mt,...Pt,cssVarPrefix:pe,colorSchemeSelector:Ye,rootSelector:nt,getCssVar:bt,colorSchemes:At,font:{...prepareTypographyVars(Pt.typography),...Pt.font},spacing:getSpacingVal(ot.spacing)};Object.keys(Bt.colorSchemes).forEach(kt=>{const St=Bt.colorSchemes[kt].palette,$t=zt=>{const Ut=zt.split("-"),qt=Ut[1],Zt=Ut[2];return bt(zt,St[qt][Zt])};if(St.mode==="light"&&(setColor(St.common,"background","#fff"),setColor(St.common,"onBackground","#000")),St.mode==="dark"&&(setColor(St.common,"background","#000"),setColor(St.common,"onBackground","#fff")),assignNode(St,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),St.mode==="light"){setColor(St.Alert,"errorColor",private_safeDarken(St.error.light,.6)),setColor(St.Alert,"infoColor",private_safeDarken(St.info.light,.6)),setColor(St.Alert,"successColor",private_safeDarken(St.success.light,.6)),setColor(St.Alert,"warningColor",private_safeDarken(St.warning.light,.6)),setColor(St.Alert,"errorFilledBg",$t("palette-error-main")),setColor(St.Alert,"infoFilledBg",$t("palette-info-main")),setColor(St.Alert,"successFilledBg",$t("palette-success-main")),setColor(St.Alert,"warningFilledBg",$t("palette-warning-main")),setColor(St.Alert,"errorFilledColor",silent(()=>St.getContrastText(St.error.main))),setColor(St.Alert,"infoFilledColor",silent(()=>St.getContrastText(St.info.main))),setColor(St.Alert,"successFilledColor",silent(()=>St.getContrastText(St.success.main))),setColor(St.Alert,"warningFilledColor",silent(()=>St.getContrastText(St.warning.main))),setColor(St.Alert,"errorStandardBg",private_safeLighten(St.error.light,.9)),setColor(St.Alert,"infoStandardBg",private_safeLighten(St.info.light,.9)),setColor(St.Alert,"successStandardBg",private_safeLighten(St.success.light,.9)),setColor(St.Alert,"warningStandardBg",private_safeLighten(St.warning.light,.9)),setColor(St.Alert,"errorIconColor",$t("palette-error-main")),setColor(St.Alert,"infoIconColor",$t("palette-info-main")),setColor(St.Alert,"successIconColor",$t("palette-success-main")),setColor(St.Alert,"warningIconColor",$t("palette-warning-main")),setColor(St.AppBar,"defaultBg",$t("palette-grey-100")),setColor(St.Avatar,"defaultBg",$t("palette-grey-400")),setColor(St.Button,"inheritContainedBg",$t("palette-grey-300")),setColor(St.Button,"inheritContainedHoverBg",$t("palette-grey-A100")),setColor(St.Chip,"defaultBorder",$t("palette-grey-400")),setColor(St.Chip,"defaultAvatarColor",$t("palette-grey-700")),setColor(St.Chip,"defaultIconColor",$t("palette-grey-700")),setColor(St.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(St.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(St.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(St.LinearProgress,"primaryBg",private_safeLighten(St.primary.main,.62)),setColor(St.LinearProgress,"secondaryBg",private_safeLighten(St.secondary.main,.62)),setColor(St.LinearProgress,"errorBg",private_safeLighten(St.error.main,.62)),setColor(St.LinearProgress,"infoBg",private_safeLighten(St.info.main,.62)),setColor(St.LinearProgress,"successBg",private_safeLighten(St.success.main,.62)),setColor(St.LinearProgress,"warningBg",private_safeLighten(St.warning.main,.62)),setColor(St.Skeleton,"bg",`rgba(${$t("palette-text-primaryChannel")} / 0.11)`),setColor(St.Slider,"primaryTrack",private_safeLighten(St.primary.main,.62)),setColor(St.Slider,"secondaryTrack",private_safeLighten(St.secondary.main,.62)),setColor(St.Slider,"errorTrack",private_safeLighten(St.error.main,.62)),setColor(St.Slider,"infoTrack",private_safeLighten(St.info.main,.62)),setColor(St.Slider,"successTrack",private_safeLighten(St.success.main,.62)),setColor(St.Slider,"warningTrack",private_safeLighten(St.warning.main,.62));const zt=private_safeEmphasize(St.background.default,.8);setColor(St.SnackbarContent,"bg",zt),setColor(St.SnackbarContent,"color",silent(()=>St.getContrastText(zt))),setColor(St.SpeedDialAction,"fabHoverBg",private_safeEmphasize(St.background.paper,.15)),setColor(St.StepConnector,"border",$t("palette-grey-400")),setColor(St.StepContent,"border",$t("palette-grey-400")),setColor(St.Switch,"defaultColor",$t("palette-common-white")),setColor(St.Switch,"defaultDisabledColor",$t("palette-grey-100")),setColor(St.Switch,"primaryDisabledColor",private_safeLighten(St.primary.main,.62)),setColor(St.Switch,"secondaryDisabledColor",private_safeLighten(St.secondary.main,.62)),setColor(St.Switch,"errorDisabledColor",private_safeLighten(St.error.main,.62)),setColor(St.Switch,"infoDisabledColor",private_safeLighten(St.info.main,.62)),setColor(St.Switch,"successDisabledColor",private_safeLighten(St.success.main,.62)),setColor(St.Switch,"warningDisabledColor",private_safeLighten(St.warning.main,.62)),setColor(St.TableCell,"border",private_safeLighten(private_safeAlpha(St.divider,1),.88)),setColor(St.Tooltip,"bg",private_safeAlpha(St.grey[700],.92))}if(St.mode==="dark"){setColor(St.Alert,"errorColor",private_safeLighten(St.error.light,.6)),setColor(St.Alert,"infoColor",private_safeLighten(St.info.light,.6)),setColor(St.Alert,"successColor",private_safeLighten(St.success.light,.6)),setColor(St.Alert,"warningColor",private_safeLighten(St.warning.light,.6)),setColor(St.Alert,"errorFilledBg",$t("palette-error-dark")),setColor(St.Alert,"infoFilledBg",$t("palette-info-dark")),setColor(St.Alert,"successFilledBg",$t("palette-success-dark")),setColor(St.Alert,"warningFilledBg",$t("palette-warning-dark")),setColor(St.Alert,"errorFilledColor",silent(()=>St.getContrastText(St.error.dark))),setColor(St.Alert,"infoFilledColor",silent(()=>St.getContrastText(St.info.dark))),setColor(St.Alert,"successFilledColor",silent(()=>St.getContrastText(St.success.dark))),setColor(St.Alert,"warningFilledColor",silent(()=>St.getContrastText(St.warning.dark))),setColor(St.Alert,"errorStandardBg",private_safeDarken(St.error.light,.9)),setColor(St.Alert,"infoStandardBg",private_safeDarken(St.info.light,.9)),setColor(St.Alert,"successStandardBg",private_safeDarken(St.success.light,.9)),setColor(St.Alert,"warningStandardBg",private_safeDarken(St.warning.light,.9)),setColor(St.Alert,"errorIconColor",$t("palette-error-main")),setColor(St.Alert,"infoIconColor",$t("palette-info-main")),setColor(St.Alert,"successIconColor",$t("palette-success-main")),setColor(St.Alert,"warningIconColor",$t("palette-warning-main")),setColor(St.AppBar,"defaultBg",$t("palette-grey-900")),setColor(St.AppBar,"darkBg",$t("palette-background-paper")),setColor(St.AppBar,"darkColor",$t("palette-text-primary")),setColor(St.Avatar,"defaultBg",$t("palette-grey-600")),setColor(St.Button,"inheritContainedBg",$t("palette-grey-800")),setColor(St.Button,"inheritContainedHoverBg",$t("palette-grey-700")),setColor(St.Chip,"defaultBorder",$t("palette-grey-700")),setColor(St.Chip,"defaultAvatarColor",$t("palette-grey-300")),setColor(St.Chip,"defaultIconColor",$t("palette-grey-300")),setColor(St.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(St.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(St.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(St.LinearProgress,"primaryBg",private_safeDarken(St.primary.main,.5)),setColor(St.LinearProgress,"secondaryBg",private_safeDarken(St.secondary.main,.5)),setColor(St.LinearProgress,"errorBg",private_safeDarken(St.error.main,.5)),setColor(St.LinearProgress,"infoBg",private_safeDarken(St.info.main,.5)),setColor(St.LinearProgress,"successBg",private_safeDarken(St.success.main,.5)),setColor(St.LinearProgress,"warningBg",private_safeDarken(St.warning.main,.5)),setColor(St.Skeleton,"bg",`rgba(${$t("palette-text-primaryChannel")} / 0.13)`),setColor(St.Slider,"primaryTrack",private_safeDarken(St.primary.main,.5)),setColor(St.Slider,"secondaryTrack",private_safeDarken(St.secondary.main,.5)),setColor(St.Slider,"errorTrack",private_safeDarken(St.error.main,.5)),setColor(St.Slider,"infoTrack",private_safeDarken(St.info.main,.5)),setColor(St.Slider,"successTrack",private_safeDarken(St.success.main,.5)),setColor(St.Slider,"warningTrack",private_safeDarken(St.warning.main,.5));const zt=private_safeEmphasize(St.background.default,.98);setColor(St.SnackbarContent,"bg",zt),setColor(St.SnackbarContent,"color",silent(()=>St.getContrastText(zt))),setColor(St.SpeedDialAction,"fabHoverBg",private_safeEmphasize(St.background.paper,.15)),setColor(St.StepConnector,"border",$t("palette-grey-600")),setColor(St.StepContent,"border",$t("palette-grey-600")),setColor(St.Switch,"defaultColor",$t("palette-grey-300")),setColor(St.Switch,"defaultDisabledColor",$t("palette-grey-600")),setColor(St.Switch,"primaryDisabledColor",private_safeDarken(St.primary.main,.55)),setColor(St.Switch,"secondaryDisabledColor",private_safeDarken(St.secondary.main,.55)),setColor(St.Switch,"errorDisabledColor",private_safeDarken(St.error.main,.55)),setColor(St.Switch,"infoDisabledColor",private_safeDarken(St.info.main,.55)),setColor(St.Switch,"successDisabledColor",private_safeDarken(St.success.main,.55)),setColor(St.Switch,"warningDisabledColor",private_safeDarken(St.warning.main,.55)),setColor(St.TableCell,"border",private_safeDarken(private_safeAlpha(St.divider,1),.68)),setColor(St.Tooltip,"bg",private_safeAlpha(St.grey[700],.92))}setColorChannel(St.background,"default"),setColorChannel(St.background,"paper"),setColorChannel(St.common,"background"),setColorChannel(St.common,"onBackground"),setColorChannel(St,"divider"),Object.keys(St).forEach(zt=>{const Ut=St[zt];zt!=="tonalOffset"&&Ut&&typeof Ut=="object"&&(Ut.main&&setColor(St[zt],"mainChannel",private_safeColorChannel(toRgb(Ut.main))),Ut.light&&setColor(St[zt],"lightChannel",private_safeColorChannel(toRgb(Ut.light))),Ut.dark&&setColor(St[zt],"darkChannel",private_safeColorChannel(toRgb(Ut.dark))),Ut.contrastText&&setColor(St[zt],"contrastTextChannel",private_safeColorChannel(toRgb(Ut.contrastText))),zt==="text"&&(setColorChannel(St[zt],"primary"),setColorChannel(St[zt],"secondary")),zt==="action"&&(Ut.active&&setColorChannel(St[zt],"active"),Ut.selected&&setColorChannel(St[zt],"selected")))})}),Bt=u.reduce((kt,St)=>deepmerge(kt,St),Bt);const Ot={prefix:pe,disableCssColorScheme:me,shouldSkipGeneratingVar:Le,getSelector:defaultGetSelector(Bt)},{vars:Nt,generateThemeVars:Lt,generateStyleSheets:Et}=prepareCssVars(Bt,Ot);return Bt.vars=Nt,Object.entries(Bt.colorSchemes[Bt.defaultColorScheme]).forEach(([kt,St])=>{Bt[kt]=St}),Bt.generateThemeVars=Lt,Bt.generateStyleSheets=Et,Bt.generateSpacing=function(){return createSpacing(ot.spacing,createUnarySpacing(this))},Bt.getColorSchemeSelector=createGetColorSchemeSelector(Ye),Bt.spacing=Bt.generateSpacing(),Bt.shouldSkipGeneratingVar=Le,Bt.unstable_sxConfig={...defaultSxConfig,...ot==null?void 0:ot.unstable_sxConfig},Bt.unstable_sx=function(St){return styleFunctionSx({sx:St,theme:this})},Bt.toRuntimeSource=stringifyTheme,Bt}function attachColorScheme(de,u,t){de.colorSchemes&&t&&(de.colorSchemes[u]={...t!==!0&&t,palette:createPalette({...t===!0?{}:t.palette,mode:u})})}function createTheme(de={},...u){const{palette:t,cssVariables:N=!1,colorSchemes:me=t?void 0:{light:!0},defaultColorScheme:pe=t==null?void 0:t.mode,...Le}=de,Ye=pe||"light",nt=me==null?void 0:me[Ye],ot={...me,...t?{[Ye]:{...typeof nt!="boolean"&&nt,palette:t}}:void 0};if(N===!1){if(!("colorSchemes"in de))return createThemeNoVars(de,...u);let ft=t;"palette"in de||ot[Ye]&&(ot[Ye]!==!0?ft=ot[Ye].palette:Ye==="dark"&&(ft={mode:"dark"}));const mt=createThemeNoVars({...de,palette:ft},...u);return mt.defaultColorScheme=Ye,mt.colorSchemes=ot,mt.palette.mode==="light"&&(mt.colorSchemes.light={...ot.light!==!0&&ot.light,palette:mt.palette},attachColorScheme(mt,"dark",ot.dark)),mt.palette.mode==="dark"&&(mt.colorSchemes.dark={...ot.dark!==!0&&ot.dark,palette:mt.palette},attachColorScheme(mt,"light",ot.light)),mt}return!t&&!("light"in ot)&&Ye==="light"&&(ot.light=!0),createThemeWithVars({...Le,colorSchemes:ot,defaultColorScheme:Ye,...typeof N!="boolean"&&N},...u)}const defaultTheme=createTheme();function useTheme(){const de=useTheme$1(defaultTheme);return de[THEME_ID]||de}function slotShouldForwardProp(de){return de!=="ownerState"&&de!=="theme"&&de!=="sx"&&de!=="as"}const rootShouldForwardProp=de=>slotShouldForwardProp(de)&&de!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme,rootShouldForwardProp});function GlobalStyles(de){return jsxRuntimeExports.jsx(GlobalStyles$1,{...de,defaultTheme,themeId:THEME_ID})}function globalCss(de){return function(t){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof de=="function"?N=>de({theme:N,...t}):de})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(de){return useDefaultProps$1(de)}function getSvgIconUtilityClass(de){return generateUtilityClass("MuiSvgIcon",de)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$j=de=>{const{color:u,fontSize:t,classes:N}=de,me={root:["root",u!=="inherit"&&`color${capitalize(u)}`,`fontSize${capitalize(t)}`]};return composeClasses(me,getSvgIconUtilityClass,N)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,t.color!=="inherit"&&u[`color${capitalize(t.color)}`],u[`fontSize${capitalize(t.fontSize)}`]]}})(memoTheme(({theme:de})=>{var u,t,N,me,pe,Le,Ye,nt,ot,ft,mt,bt,yt,_t;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(me=(u=de.transitions)==null?void 0:u.create)==null?void 0:me.call(u,"fill",{duration:(N=(t=(de.vars??de).transitions)==null?void 0:t.duration)==null?void 0:N.shorter}),variants:[{props:Ct=>!Ct.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((Le=(pe=de.typography)==null?void 0:pe.pxToRem)==null?void 0:Le.call(pe,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((nt=(Ye=de.typography)==null?void 0:Ye.pxToRem)==null?void 0:nt.call(Ye,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((ft=(ot=de.typography)==null?void 0:ot.pxToRem)==null?void 0:ft.call(ot,35))||"2.1875rem"}},...Object.entries((de.vars??de).palette).filter(([,Ct])=>Ct&&Ct.main).map(([Ct])=>{var Tt,At;return{props:{color:Ct},style:{color:(At=(Tt=(de.vars??de).palette)==null?void 0:Tt[Ct])==null?void 0:At.main}}}),{props:{color:"action"},style:{color:(bt=(mt=(de.vars??de).palette)==null?void 0:mt.action)==null?void 0:bt.active}},{props:{color:"disabled"},style:{color:(_t=(yt=(de.vars??de).palette)==null?void 0:yt.action)==null?void 0:_t.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SvgIcon=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiSvgIcon"}),{children:me,className:pe,color:Le="inherit",component:Ye="svg",fontSize:nt="medium",htmlColor:ot,inheritViewBox:ft=!1,titleAccess:mt,viewBox:bt="0 0 24 24",...yt}=N,_t=reactExports.isValidElement(me)&&me.type==="svg",Ct={...N,color:Le,component:Ye,fontSize:nt,instanceFontSize:u.fontSize,inheritViewBox:ft,viewBox:bt,hasSvgAsChild:_t},Tt={};ft||(Tt.viewBox=bt);const At=useUtilityClasses$j(Ct);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:Ye,className:clsx(At.root,pe),focusable:"false",color:ot,"aria-hidden":mt?void 0:!0,role:mt?"img":void 0,ref:t,...Tt,...yt,..._t&&me.props,ownerState:Ct,children:[_t?me.props.children:me,mt?jsxRuntimeExports.jsx("title",{children:mt}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(de,u){function t(N,me){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":`${u}Icon`,ref:me,...N,children:de})}return t.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(t))}function mergeSlotProps(de,u){if(!de)return u;if(typeof de=="function"||typeof u=="function")return me=>{const pe=typeof u=="function"?u(me):u,Le=typeof de=="function"?de({...me,...pe}):de,Ye=clsx(me==null?void 0:me.className,pe==null?void 0:pe.className,Le==null?void 0:Le.className);return{...pe,...Le,...!!Ye&&{className:Ye},...(pe==null?void 0:pe.style)&&(Le==null?void 0:Le.style)&&{style:{...pe.style,...Le.style}},...(pe==null?void 0:pe.sx)&&(Le==null?void 0:Le.sx)&&{sx:[...Array.isArray(pe.sx)?pe.sx:[pe.sx],...Array.isArray(Le.sx)?Le.sx:[Le.sx]]}}};const t=u,N=clsx(t==null?void 0:t.className,de==null?void 0:de.className);return{...u,...de,...!!N&&{className:N},...(t==null?void 0:t.style)&&(de==null?void 0:de.style)&&{style:{...t.style,...de.style}},...(t==null?void 0:t.sx)&&(de==null?void 0:de.sx)&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(de.sx)?de.sx:[de.sx]]}}}function _objectWithoutPropertiesLoose$1(de,u){if(de==null)return{};var t={};for(var N in de)if({}.hasOwnProperty.call(de,N)){if(u.indexOf(N)!==-1)continue;t[N]=de[N]}return t}function _setPrototypeOf(de,u){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,N){return t.__proto__=N,t},_setPrototypeOf(de,u)}function _inheritsLoose(de,u){de.prototype=Object.create(u.prototype),de.prototype.constructor=de,_setPrototypeOf(de,u)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(u){return u.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(de){_inheritsLoose(u,de);function u(N,me){var pe;pe=de.call(this,N,me)||this;var Le=me,Ye=Le&&!Le.isMounting?N.enter:N.appear,nt;return pe.appearStatus=null,N.in?Ye?(nt=EXITED,pe.appearStatus=ENTERING):nt=ENTERED:N.unmountOnExit||N.mountOnEnter?nt=UNMOUNTED:nt=EXITED,pe.state={status:nt},pe.nextCallback=null,pe}u.getDerivedStateFromProps=function(me,pe){var Le=me.in;return Le&&pe.status===UNMOUNTED?{status:EXITED}:null};var t=u.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(me){var pe=null;if(me!==this.props){var Le=this.state.status;this.props.in?Le!==ENTERING&&Le!==ENTERED&&(pe=ENTERING):(Le===ENTERING||Le===ENTERED)&&(pe=EXITING)}this.updateStatus(!1,pe)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var me=this.props.timeout,pe,Le,Ye;return pe=Le=Ye=me,me!=null&&typeof me!="number"&&(pe=me.exit,Le=me.enter,Ye=me.appear!==void 0?me.appear:Le),{exit:pe,enter:Le,appear:Ye}},t.updateStatus=function(me,pe){if(me===void 0&&(me=!1),pe!==null)if(this.cancelNextCallback(),pe===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var Le=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);Le&&forceReflow(Le)}this.performEnter(me)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},t.performEnter=function(me){var pe=this,Le=this.props.enter,Ye=this.context?this.context.isMounting:me,nt=this.props.nodeRef?[Ye]:[ReactDOM.findDOMNode(this),Ye],ot=nt[0],ft=nt[1],mt=this.getTimeouts(),bt=Ye?mt.appear:mt.enter;if(!me&&!Le||config.disabled){this.safeSetState({status:ENTERED},function(){pe.props.onEntered(ot)});return}this.props.onEnter(ot,ft),this.safeSetState({status:ENTERING},function(){pe.props.onEntering(ot,ft),pe.onTransitionEnd(bt,function(){pe.safeSetState({status:ENTERED},function(){pe.props.onEntered(ot,ft)})})})},t.performExit=function(){var me=this,pe=this.props.exit,Le=this.getTimeouts(),Ye=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!pe||config.disabled){this.safeSetState({status:EXITED},function(){me.props.onExited(Ye)});return}this.props.onExit(Ye),this.safeSetState({status:EXITING},function(){me.props.onExiting(Ye),me.onTransitionEnd(Le.exit,function(){me.safeSetState({status:EXITED},function(){me.props.onExited(Ye)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(me,pe){pe=this.setNextCallback(pe),this.setState(me,pe)},t.setNextCallback=function(me){var pe=this,Le=!0;return this.nextCallback=function(Ye){Le&&(Le=!1,pe.nextCallback=null,me(Ye))},this.nextCallback.cancel=function(){Le=!1},this.nextCallback},t.onTransitionEnd=function(me,pe){this.setNextCallback(pe);var Le=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),Ye=me==null&&!this.props.addEndListener;if(!Le||Ye){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var nt=this.props.nodeRef?[this.nextCallback]:[Le,this.nextCallback],ot=nt[0],ft=nt[1];this.props.addEndListener(ot,ft)}me!=null&&setTimeout(this.nextCallback,me)},t.render=function(){var me=this.state.status;if(me===UNMOUNTED)return null;var pe=this.props,Le=pe.children;pe.in,pe.mountOnEnter,pe.unmountOnExit,pe.appear,pe.enter,pe.exit,pe.timeout,pe.addEndListener,pe.onEnter,pe.onEntering,pe.onEntered,pe.onExit,pe.onExiting,pe.onExited,pe.nodeRef;var Ye=_objectWithoutPropertiesLoose$1(pe,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof Le=="function"?Le(me,Ye):React.cloneElement(React.Children.only(Le),Ye))},u}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(de){if(de===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de}function getChildMapping(de,u){var t=function(pe){return u&&reactExports.isValidElement(pe)?u(pe):pe},N=Object.create(null);return de&&reactExports.Children.map(de,function(me){return me}).forEach(function(me){N[me.key]=t(me)}),N}function mergeChildMappings(de,u){de=de||{},u=u||{};function t(ft){return ft in u?u[ft]:de[ft]}var N=Object.create(null),me=[];for(var pe in de)pe in u?me.length&&(N[pe]=me,me=[]):me.push(pe);var Le,Ye={};for(var nt in u){if(N[nt])for(Le=0;Le<N[nt].length;Le++){var ot=N[nt][Le];Ye[N[nt][Le]]=t(ot)}Ye[nt]=t(nt)}for(Le=0;Le<me.length;Le++)Ye[me[Le]]=t(me[Le]);return Ye}function getProp(de,u,t){return t[u]!=null?t[u]:de.props[u]}function getInitialChildMapping(de,u){return getChildMapping(de.children,function(t){return reactExports.cloneElement(t,{onExited:u.bind(null,t),in:!0,appear:getProp(t,"appear",de),enter:getProp(t,"enter",de),exit:getProp(t,"exit",de)})})}function getNextChildMapping(de,u,t){var N=getChildMapping(de.children),me=mergeChildMappings(u,N);return Object.keys(me).forEach(function(pe){var Le=me[pe];if(reactExports.isValidElement(Le)){var Ye=pe in u,nt=pe in N,ot=u[pe],ft=reactExports.isValidElement(ot)&&!ot.props.in;nt&&(!Ye||ft)?me[pe]=reactExports.cloneElement(Le,{onExited:t.bind(null,Le),in:!0,exit:getProp(Le,"exit",de),enter:getProp(Le,"enter",de)}):!nt&&Ye&&!ft?me[pe]=reactExports.cloneElement(Le,{in:!1}):nt&&Ye&&reactExports.isValidElement(ot)&&(me[pe]=reactExports.cloneElement(Le,{onExited:t.bind(null,Le),in:ot.props.in,exit:getProp(Le,"exit",de),enter:getProp(Le,"enter",de)}))}}),me}var values=Object.values||function(de){return Object.keys(de).map(function(u){return de[u]})},defaultProps={component:"div",childFactory:function(u){return u}},TransitionGroup=function(de){_inheritsLoose(u,de);function u(N,me){var pe;pe=de.call(this,N,me)||this;var Le=pe.handleExited.bind(_assertThisInitialized(pe));return pe.state={contextValue:{isMounting:!0},handleExited:Le,firstRender:!0},pe}var t=u.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},u.getDerivedStateFromProps=function(me,pe){var Le=pe.children,Ye=pe.handleExited,nt=pe.firstRender;return{children:nt?getInitialChildMapping(me,Ye):getNextChildMapping(me,Le,Ye),firstRender:!1}},t.handleExited=function(me,pe){var Le=getChildMapping(this.props.children);me.key in Le||(me.props.onExited&&me.props.onExited(pe),this.mounted&&this.setState(function(Ye){var nt=_extends$1({},Ye.children);return delete nt[me.key],{children:nt}}))},t.render=function(){var me=this.props,pe=me.component,Le=me.childFactory,Ye=_objectWithoutPropertiesLoose$1(me,["component","childFactory"]),nt=this.state.contextValue,ot=values(this.state.children).map(Le);return delete Ye.appear,delete Ye.enter,delete Ye.exit,pe===null?React.createElement(TransitionGroupContext.Provider,{value:nt},ot):React.createElement(TransitionGroupContext.Provider,{value:nt},React.createElement(pe,Ye,ot))},u}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const reflow=de=>de.scrollTop;function getTransitionProps(de,u){const{timeout:t,easing:N,style:me={}}=de;return{duration:me.transitionDuration??(typeof t=="number"?t:t[u.mode]||0),easing:me.transitionTimingFunction??(typeof N=="object"?N[u.mode]:N),delay:me.transitionDelay}}function getPaperUtilityClass(de){return generateUtilityClass("MuiPaper",de)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$i=de=>{const{square:u,elevation:t,variant:N,classes:me}=de,pe={root:["root",N,!u&&"rounded",N==="elevation"&&`elevation${t}`]};return composeClasses(pe,getPaperUtilityClass,me)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,u[t.variant],!t.square&&u.rounded,t.variant==="elevation"&&u[`elevation${t.elevation}`]]}})(memoTheme(({theme:de})=>({backgroundColor:(de.vars||de).palette.background.paper,color:(de.vars||de).palette.text.primary,transition:de.transitions.create("box-shadow"),variants:[{props:({ownerState:u})=>!u.square,style:{borderRadius:de.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(de.vars||de).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(u,t){var yt;const N=useDefaultProps({props:u,name:"MuiPaper"}),me=useTheme(),{className:pe,component:Le="div",elevation:Ye=1,square:nt=!1,variant:ot="elevation",...ft}=N,mt={...N,component:Le,elevation:Ye,square:nt,variant:ot},bt=useUtilityClasses$i(mt);return jsxRuntimeExports.jsx(PaperRoot,{as:Le,ownerState:mt,className:clsx(bt.root,pe),ref:t,...ft,style:{...ot==="elevation"&&{"--Paper-shadow":(me.vars||me).shadows[Ye],...me.vars&&{"--Paper-overlay":(yt=me.vars.overlays)==null?void 0:yt[Ye]},...!me.vars&&me.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha("#fff",getOverlayAlpha(Ye))}, ${alpha("#fff",getOverlayAlpha(Ye))})`}},...ft.style}})});function useSlot(de,u){const{className:t,elementType:N,ownerState:me,externalForwardedProps:pe,internalForwardedProps:Le,shouldForwardComponentProp:Ye=!1,...nt}=u,{component:ot,slots:ft={[de]:void 0},slotProps:mt={[de]:void 0},...bt}=pe,yt=ft[de]||N,_t=resolveComponentProps(mt[de],me),{props:{component:Ct,...Tt},internalRef:At}=mergeSlotProps$1({className:t,...nt,externalForwardedProps:de==="root"?bt:void 0,externalSlotProps:_t}),It=useForkRef(At,_t==null?void 0:_t.ref,u.ref),Pt=de==="root"?Ct||ot:Ct,Bt=appendOwnerState(yt,{...de==="root"&&!ot&&!ft[de]&&Le,...de!=="root"&&!ft[de]&&Le,...Tt,...Pt&&!Ye&&{as:Pt},...Pt&&Ye&&{component:Pt},ref:It},me);return[yt,Bt]}class LazyRipple{constructor(){xt(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LazyRipple}static use(){const u=useLazyRef(LazyRipple.create).current,[t,N]=reactExports.useState(!1);return u.shouldMount=t,u.setShouldMount=N,reactExports.useEffect(u.mountEffect,[t]),u}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...u)})}stop(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...u)})}pulsate(...u){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...u)})}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let de,u;const t=new Promise((N,me)=>{de=N,u=me});return t.resolve=de,t.reject=u,t}function Ripple(de){const{className:u,classes:t,pulsate:N=!1,rippleX:me,rippleY:pe,rippleSize:Le,in:Ye,onExited:nt,timeout:ot}=de,[ft,mt]=reactExports.useState(!1),bt=clsx(u,t.ripple,t.rippleVisible,N&&t.ripplePulsate),yt={width:Le,height:Le,top:-(Le/2)+pe,left:-(Le/2)+me},_t=clsx(t.child,ft&&t.childLeaving,N&&t.childPulsate);return!Ye&&!ft&&mt(!0),reactExports.useEffect(()=>{if(!Ye&&nt!=null){const Ct=setTimeout(nt,ot);return()=>{clearTimeout(Ct)}}},[nt,Ye,ot]),jsxRuntimeExports.jsx("span",{className:bt,style:yt,children:jsxRuntimeExports.jsx("span",{className:_t})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:de})=>de.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:de})=>de.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:de})=>de.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:de})=>de.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiTouchRipple"}),{center:me=!1,classes:pe={},className:Le,...Ye}=N,[nt,ot]=reactExports.useState([]),ft=reactExports.useRef(0),mt=reactExports.useRef(null);reactExports.useEffect(()=>{mt.current&&(mt.current(),mt.current=null)},[nt]);const bt=reactExports.useRef(!1),yt=useTimeout(),_t=reactExports.useRef(null),Ct=reactExports.useRef(null),Tt=reactExports.useCallback(Bt=>{const{pulsate:Ot,rippleX:Nt,rippleY:Lt,rippleSize:Et,cb:kt}=Bt;ot(St=>[...St,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(pe.ripple,touchRippleClasses.ripple),rippleVisible:clsx(pe.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(pe.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(pe.child,touchRippleClasses.child),childLeaving:clsx(pe.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(pe.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:Ot,rippleX:Nt,rippleY:Lt,rippleSize:Et},ft.current)]),ft.current+=1,mt.current=kt},[pe]),At=reactExports.useCallback((Bt={},Ot={},Nt=()=>{})=>{const{pulsate:Lt=!1,center:Et=me||Ot.pulsate,fakeElement:kt=!1}=Ot;if((Bt==null?void 0:Bt.type)==="mousedown"&&bt.current){bt.current=!1;return}(Bt==null?void 0:Bt.type)==="touchstart"&&(bt.current=!0);const St=kt?null:Ct.current,$t=St?St.getBoundingClientRect():{width:0,height:0,left:0,top:0};let zt,Ut,qt;if(Et||Bt===void 0||Bt.clientX===0&&Bt.clientY===0||!Bt.clientX&&!Bt.touches)zt=Math.round($t.width/2),Ut=Math.round($t.height/2);else{const{clientX:Zt,clientY:Dt}=Bt.touches&&Bt.touches.length>0?Bt.touches[0]:Bt;zt=Math.round(Zt-$t.left),Ut=Math.round(Dt-$t.top)}if(Et)qt=Math.sqrt((2*$t.width**2+$t.height**2)/3),qt%2===0&&(qt+=1);else{const Zt=Math.max(Math.abs((St?St.clientWidth:0)-zt),zt)*2+2,Dt=Math.max(Math.abs((St?St.clientHeight:0)-Ut),Ut)*2+2;qt=Math.sqrt(Zt**2+Dt**2)}Bt!=null&&Bt.touches?_t.current===null&&(_t.current=()=>{Tt({pulsate:Lt,rippleX:zt,rippleY:Ut,rippleSize:qt,cb:Nt})},yt.start(DELAY_RIPPLE,()=>{_t.current&&(_t.current(),_t.current=null)})):Tt({pulsate:Lt,rippleX:zt,rippleY:Ut,rippleSize:qt,cb:Nt})},[me,Tt,yt]),It=reactExports.useCallback(()=>{At({},{pulsate:!0})},[At]),Pt=reactExports.useCallback((Bt,Ot)=>{if(yt.clear(),(Bt==null?void 0:Bt.type)==="touchend"&&_t.current){_t.current(),_t.current=null,yt.start(0,()=>{Pt(Bt,Ot)});return}_t.current=null,ot(Nt=>Nt.length>0?Nt.slice(1):Nt),mt.current=Ot},[yt]);return reactExports.useImperativeHandle(t,()=>({pulsate:It,start:At,stop:Pt}),[It,At,Pt]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,pe.root,Le),ref:Ct,...Ye,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:nt})})});function getButtonBaseUtilityClass(de){return generateUtilityClass("MuiButtonBase",de)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$h=de=>{const{disabled:u,focusVisible:t,focusVisibleClassName:N,classes:me}=de,Le=composeClasses({root:["root",u&&"disabled",t&&"focusVisible"]},getButtonBaseUtilityClass,me);return t&&N&&(Le.root+=` ${N}`),Le},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(de,u)=>u.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiButtonBase"}),{action:me,centerRipple:pe=!1,children:Le,className:Ye,component:nt="button",disabled:ot=!1,disableRipple:ft=!1,disableTouchRipple:mt=!1,focusRipple:bt=!1,focusVisibleClassName:yt,LinkComponent:_t="a",onBlur:Ct,onClick:Tt,onContextMenu:At,onDragLeave:It,onFocus:Pt,onFocusVisible:Bt,onKeyDown:Ot,onKeyUp:Nt,onMouseDown:Lt,onMouseLeave:Et,onMouseUp:kt,onTouchEnd:St,onTouchMove:$t,onTouchStart:zt,tabIndex:Ut=0,TouchRippleProps:qt,touchRippleRef:Zt,type:Dt,...jt}=N,en=reactExports.useRef(null),Kt=useLazyRipple(),Vt=useForkRef(Kt.ref,Zt),[Jt,ln]=reactExports.useState(!1);ot&&Jt&&ln(!1),reactExports.useImperativeHandle(me,()=>({focusVisible:()=>{ln(!0),en.current.focus()}}),[]);const tn=Kt.shouldMount&&!ft&&!ot;reactExports.useEffect(()=>{Jt&&bt&&!ft&&Kt.pulsate()},[ft,bt,Jt,Kt]);const an=useRippleHandler(Kt,"start",Lt,mt),cn=useRippleHandler(Kt,"stop",At,mt),un=useRippleHandler(Kt,"stop",It,mt),An=useRippleHandler(Kt,"stop",kt,mt),yn=useRippleHandler(Kt,"stop",gn=>{Jt&&gn.preventDefault(),Et&&Et(gn)},mt),Rn=useRippleHandler(Kt,"start",zt,mt),wn=useRippleHandler(Kt,"stop",St,mt),_n=useRippleHandler(Kt,"stop",$t,mt),xn=useRippleHandler(Kt,"stop",gn=>{isFocusVisible(gn.target)||ln(!1),Ct&&Ct(gn)},!1),Qn=useEventCallback(gn=>{en.current||(en.current=gn.currentTarget),isFocusVisible(gn.target)&&(ln(!0),Bt&&Bt(gn)),Pt&&Pt(gn)}),kn=()=>{const gn=en.current;return nt&&nt!=="button"&&!(gn.tagName==="A"&&gn.href)},zn=useEventCallback(gn=>{bt&&!gn.repeat&&Jt&&gn.key===" "&&Kt.stop(gn,()=>{Kt.start(gn)}),gn.target===gn.currentTarget&&kn()&&gn.key===" "&&gn.preventDefault(),Ot&&Ot(gn),gn.target===gn.currentTarget&&kn()&&gn.key==="Enter"&&!ot&&(gn.preventDefault(),Tt&&Tt(gn))}),Ti=useEventCallback(gn=>{bt&&gn.key===" "&&Jt&&!gn.defaultPrevented&&Kt.stop(gn,()=>{Kt.pulsate(gn)}),Nt&&Nt(gn),Tt&&gn.target===gn.currentTarget&&kn()&&gn.key===" "&&!gn.defaultPrevented&&Tt(gn)});let Hn=nt;Hn==="button"&&(jt.href||jt.to)&&(Hn=_t);const ri={};Hn==="button"?(ri.type=Dt===void 0?"button":Dt,ri.disabled=ot):(!jt.href&&!jt.to&&(ri.role="button"),ot&&(ri["aria-disabled"]=ot));const Wi=useForkRef(t,en),mi={...N,centerRipple:pe,component:nt,disabled:ot,disableRipple:ft,disableTouchRipple:mt,focusRipple:bt,tabIndex:Ut,focusVisible:Jt},Kn=useUtilityClasses$h(mi);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:Hn,className:clsx(Kn.root,Ye),ownerState:mi,onBlur:xn,onClick:Tt,onContextMenu:cn,onFocus:Qn,onKeyDown:zn,onKeyUp:Ti,onMouseDown:an,onMouseLeave:yn,onMouseUp:An,onDragLeave:un,onTouchEnd:wn,onTouchMove:_n,onTouchStart:Rn,ref:Wi,tabIndex:ot?-1:Ut,type:Dt,...ri,...jt,children:[Le,tn?jsxRuntimeExports.jsx(TouchRipple,{ref:Vt,center:pe,...qt}):null]})});function useRippleHandler(de,u,t,N=!1){return useEventCallback(me=>(t&&t(me),N||de[u](me),!0))}function hasCorrectMainProperty(de){return typeof de.main=="string"}function checkSimplePaletteColorValues(de,u=[]){if(!hasCorrectMainProperty(de))return!1;for(const t of u)if(!de.hasOwnProperty(t)||typeof de[t]!="string")return!1;return!0}function createSimplePaletteValueFilter(de=[]){return([,u])=>u&&checkSimplePaletteColorValues(u,de)}function getTypographyUtilityClass(de){return generateUtilityClass("MuiTypography",de)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$g=de=>{const{align:u,gutterBottom:t,noWrap:N,paragraph:me,variant:pe,classes:Le}=de,Ye={root:["root",pe,de.align!=="inherit"&&`align${capitalize(u)}`,t&&"gutterBottom",N&&"noWrap",me&&"paragraph"]};return composeClasses(Ye,getTypographyUtilityClass,Le)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,t.variant&&u[t.variant],t.align!=="inherit"&&u[`align${capitalize(t.align)}`],t.noWrap&&u.noWrap,t.gutterBottom&&u.gutterBottom,t.paragraph&&u.paragraph]}})(memoTheme(({theme:de})=>{var u;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(de.typography).filter(([t,N])=>t!=="inherit"&&N&&typeof N=="object").map(([t,N])=>({props:{variant:t},style:N})),...Object.entries(de.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{color:(de.vars||de).palette[t].main}})),...Object.entries(((u=de.palette)==null?void 0:u.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${capitalize(t)}`},style:{color:(de.vars||de).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(u,t){const{color:N,...me}=useDefaultProps({props:u,name:"MuiTypography"}),pe=!v6Colors[N],Le=extendSxProp({...me,...pe&&{color:N}}),{align:Ye="inherit",className:nt,component:ot,gutterBottom:ft=!1,noWrap:mt=!1,paragraph:bt=!1,variant:yt="body1",variantMapping:_t=defaultVariantMapping,...Ct}=Le,Tt={...Le,align:Ye,color:N,className:nt,component:ot,gutterBottom:ft,noWrap:mt,paragraph:bt,variant:yt,variantMapping:_t},At=ot||(bt?"p":_t[yt]||defaultVariantMapping[yt])||"span",It=useUtilityClasses$g(Tt);return jsxRuntimeExports.jsx(TypographyRoot,{as:At,ref:t,className:clsx(It.root,nt),...Ct,ownerState:Tt,style:{...Ye!=="inherit"&&{"--Typography-textAlign":Ye},...Ct.style}})});function getAppBarUtilityClass(de){return generateUtilityClass("MuiAppBar",de)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$f=de=>{const{color:u,position:t,classes:N}=de,me={root:["root",`color${capitalize(u)}`,`position${capitalize(t)}`]};return composeClasses(me,getAppBarUtilityClass,N)},joinVars=(de,u)=>de?`${de==null?void 0:de.replace(")","")}, ${u})`:u,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,u[`position${capitalize(t.position)}`],u[`color${capitalize(t.color)}`]]}})(memoTheme(({theme:de})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(de.vars||de).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(de.vars||de).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(de.vars||de).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":de.vars?de.vars.palette.AppBar.defaultBg:de.palette.grey[100],"--AppBar-color":de.vars?de.vars.palette.text.primary:de.palette.getContrastText(de.palette.grey[100]),...de.applyStyles("dark",{"--AppBar-background":de.vars?de.vars.palette.AppBar.defaultBg:de.palette.grey[900],"--AppBar-color":de.vars?de.vars.palette.text.primary:de.palette.getContrastText(de.palette.grey[900])})}},...Object.entries(de.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([u])=>({props:{color:u},style:{"--AppBar-background":(de.vars??de).palette[u].main,"--AppBar-color":(de.vars??de).palette[u].contrastText}})),{props:u=>u.enableColorOnDark===!0&&!["inherit","transparent"].includes(u.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:u=>u.enableColorOnDark===!1&&!["inherit","transparent"].includes(u.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...de.applyStyles("dark",{backgroundColor:de.vars?joinVars(de.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:de.vars?joinVars(de.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...de.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiAppBar"}),{className:me,color:pe="primary",enableColorOnDark:Le=!1,position:Ye="fixed",...nt}=N,ot={...N,color:pe,position:Ye,enableColorOnDark:Le},ft=useUtilityClasses$f(ot);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:ot,elevation:4,className:clsx(ft.root,me,Ye==="fixed"&&"mui-fixed"),ref:t,...nt})});function getContainer$1(de){return typeof de=="function"?de():de}const Portal=reactExports.forwardRef(function(u,t){const{children:N,container:me,disablePortal:pe=!1}=u,[Le,Ye]=reactExports.useState(null),nt=useForkRef(reactExports.isValidElement(N)?getReactElementRef(N):null,t);if(useEnhancedEffect(()=>{pe||Ye(getContainer$1(me)||document.body)},[me,pe]),useEnhancedEffect(()=>{if(Le&&!pe)return setRef(t,Le),()=>{setRef(t,null)}},[t,Le,pe]),pe){if(reactExports.isValidElement(N)){const ot={ref:nt};return reactExports.cloneElement(N,ot)}return N}return Le&&reactDomExports.createPortal(N,Le)});function getStyleValue(de){return parseInt(de,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(de){for(const u in de)return!1;return!0}function isEmpty$4(de){return isObjectEmpty(de)||de.outerHeightStyle===0&&!de.overflowing}const TextareaAutosize=reactExports.forwardRef(function(u,t){const{onChange:N,maxRows:me,minRows:pe=1,style:Le,value:Ye,...nt}=u,{current:ot}=reactExports.useRef(Ye!=null),ft=reactExports.useRef(null),mt=useForkRef(t,ft),bt=reactExports.useRef(null),yt=reactExports.useRef(null),_t=reactExports.useCallback(()=>{const Pt=ft.current,Bt=yt.current;if(!Pt||!Bt)return;const Nt=ownerWindow(Pt).getComputedStyle(Pt);if(Nt.width==="0px")return{outerHeightStyle:0,overflowing:!1};Bt.style.width=Nt.width,Bt.value=Pt.value||u.placeholder||"x",Bt.value.slice(-1)===`
`&&(Bt.value+=" ");const Lt=Nt.boxSizing,Et=getStyleValue(Nt.paddingBottom)+getStyleValue(Nt.paddingTop),kt=getStyleValue(Nt.borderBottomWidth)+getStyleValue(Nt.borderTopWidth),St=Bt.scrollHeight;Bt.value="x";const $t=Bt.scrollHeight;let zt=St;pe&&(zt=Math.max(Number(pe)*$t,zt)),me&&(zt=Math.min(Number(me)*$t,zt)),zt=Math.max(zt,$t);const Ut=zt+(Lt==="border-box"?Et+kt:0),qt=Math.abs(zt-St)<=1;return{outerHeightStyle:Ut,overflowing:qt}},[me,pe,u.placeholder]),Ct=useEventCallback(()=>{const Pt=ft.current,Bt=_t();if(!Pt||!Bt||isEmpty$4(Bt))return!1;const Ot=Bt.outerHeightStyle;return bt.current!=null&&bt.current!==Ot}),Tt=reactExports.useCallback(()=>{const Pt=ft.current,Bt=_t();if(!Pt||!Bt||isEmpty$4(Bt))return;const Ot=Bt.outerHeightStyle;bt.current!==Ot&&(bt.current=Ot,Pt.style.height=`${Ot}px`),Pt.style.overflow=Bt.overflowing?"hidden":""},[_t]),At=reactExports.useRef(-1);useEnhancedEffect(()=>{const Pt=debounce$1(Tt),Bt=ft==null?void 0:ft.current;if(!Bt)return;const Ot=ownerWindow(Bt);Ot.addEventListener("resize",Pt);let Nt;return typeof ResizeObserver<"u"&&(Nt=new ResizeObserver(()=>{Ct()&&(Nt.unobserve(Bt),cancelAnimationFrame(At.current),Tt(),At.current=requestAnimationFrame(()=>{Nt.observe(Bt)}))}),Nt.observe(Bt)),()=>{Pt.clear(),cancelAnimationFrame(At.current),Ot.removeEventListener("resize",Pt),Nt&&Nt.disconnect()}},[_t,Tt,Ct]),useEnhancedEffect(()=>{Tt()});const It=Pt=>{ot||Tt(),N&&N(Pt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:Ye,onChange:It,ref:mt,rows:pe,style:Le,...nt}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:u.className,readOnly:!0,ref:yt,tabIndex:-1,style:{...styles$2.shadow,...Le,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(de){return typeof de=="string"}function formControlState({props:de,states:u,muiFormControl:t}){return u.reduce((N,me)=>(N[me]=de[me],t&&typeof de[me]>"u"&&(N[me]=t[me]),N),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(de){return de!=null&&!(Array.isArray(de)&&de.length===0)}function isFilled(de,u=!1){return de&&(hasValue(de.value)&&de.value!==""||u&&hasValue(de.defaultValue)&&de.defaultValue!=="")}function isAdornedStart(de){return de.startAdornment}function getInputBaseUtilityClass(de){return generateUtilityClass("MuiInputBase",de)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(de,u)=>{const{ownerState:t}=de;return[u.root,t.formControl&&u.formControl,t.startAdornment&&u.adornedStart,t.endAdornment&&u.adornedEnd,t.error&&u.error,t.size==="small"&&u.sizeSmall,t.multiline&&u.multiline,t.color&&u[`color${capitalize(t.color)}`],t.fullWidth&&u.fullWidth,t.hiddenLabel&&u.hiddenLabel]},inputOverridesResolver=(de,u)=>{const{ownerState:t}=de;return[u.input,t.size==="small"&&u.inputSizeSmall,t.multiline&&u.inputMultiline,t.type==="search"&&u.inputTypeSearch,t.startAdornment&&u.inputAdornedStart,t.endAdornment&&u.inputAdornedEnd,t.hiddenLabel&&u.inputHiddenLabel]},useUtilityClasses$e=de=>{const{classes:u,color:t,disabled:N,error:me,endAdornment:pe,focused:Le,formControl:Ye,fullWidth:nt,hiddenLabel:ot,multiline:ft,readOnly:mt,size:bt,startAdornment:yt,type:_t}=de,Ct={root:["root",`color${capitalize(t)}`,N&&"disabled",me&&"error",nt&&"fullWidth",Le&&"focused",Ye&&"formControl",bt&&bt!=="medium"&&`size${capitalize(bt)}`,ft&&"multiline",yt&&"adornedStart",pe&&"adornedEnd",ot&&"hiddenLabel",mt&&"readOnly"],input:["input",N&&"disabled",_t==="search"&&"inputTypeSearch",ft&&"inputMultiline",bt==="small"&&"inputSizeSmall",ot&&"inputHiddenLabel",yt&&"inputAdornedStart",pe&&"inputAdornedEnd",mt&&"readOnly"]};return composeClasses(Ct,getInputBaseUtilityClass,u)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:de})=>({...de.typography.body1,color:(de.vars||de).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(de.vars||de).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:u})=>u.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:u,size:t})=>u.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:u})=>u.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:de})=>{const u=de.palette.mode==="light",t={color:"currentColor",...de.vars?{opacity:de.vars.opacity.inputPlaceholder}:{opacity:u?.42:.5},transition:de.transitions.create("opacity",{duration:de.transitions.duration.shorter})},N={opacity:"0 !important"},me=de.vars?{opacity:de.vars.opacity.inputPlaceholder}:{opacity:u?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":N,"&::-moz-placeholder":N,"&::-ms-input-placeholder":N,"&:focus::-webkit-input-placeholder":me,"&:focus::-moz-placeholder":me,"&:focus::-ms-input-placeholder":me},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(de.vars||de).palette.text.disabled},variants:[{props:({ownerState:pe})=>!pe.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:pe})=>pe.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase$1=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiInputBase"}),{"aria-describedby":me,autoComplete:pe,autoFocus:Le,className:Ye,color:nt,components:ot={},componentsProps:ft={},defaultValue:mt,disabled:bt,disableInjectingGlobalStyles:yt,endAdornment:_t,error:Ct,fullWidth:Tt=!1,id:At,inputComponent:It="input",inputProps:Pt={},inputRef:Bt,margin:Ot,maxRows:Nt,minRows:Lt,multiline:Et=!1,name:kt,onBlur:St,onChange:$t,onClick:zt,onFocus:Ut,onKeyDown:qt,onKeyUp:Zt,placeholder:Dt,readOnly:jt,renderSuffix:en,rows:Kt,size:Vt,slotProps:Jt={},slots:ln={},startAdornment:tn,type:an="text",value:cn,...un}=N,An=Pt.value!=null?Pt.value:cn,{current:yn}=reactExports.useRef(An!=null),Rn=reactExports.useRef(),wn=reactExports.useCallback($n=>{},[]),_n=useForkRef(Rn,Bt,Pt.ref,wn),[xn,Qn]=reactExports.useState(!1),kn=useFormControl(),zn=formControlState({props:N,muiFormControl:kn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});zn.focused=kn?kn.focused:xn,reactExports.useEffect(()=>{!kn&&bt&&xn&&(Qn(!1),St&&St())},[kn,bt,xn,St]);const Ti=kn&&kn.onFilled,Hn=kn&&kn.onEmpty,ri=reactExports.useCallback($n=>{isFilled($n)?Ti&&Ti():Hn&&Hn()},[Ti,Hn]);useEnhancedEffect(()=>{yn&&ri({value:An})},[An,ri,yn]);const Wi=$n=>{Ut&&Ut($n),Pt.onFocus&&Pt.onFocus($n),kn&&kn.onFocus?kn.onFocus($n):Qn(!0)},mi=$n=>{St&&St($n),Pt.onBlur&&Pt.onBlur($n),kn&&kn.onBlur?kn.onBlur($n):Qn(!1)},Kn=($n,..._s)=>{if(!yn){const Yi=$n.target||Rn.current;if(Yi==null)throw new Error(formatMuiErrorMessage(1));ri({value:Yi.value})}Pt.onChange&&Pt.onChange($n,..._s),$t&&$t($n,..._s)};reactExports.useEffect(()=>{ri(Rn.current)},[]);const gn=$n=>{Rn.current&&$n.currentTarget===$n.target&&Rn.current.focus(),zt&&zt($n)};let ns=It,gi=Pt;Et&&ns==="input"&&(Kt?gi={type:void 0,minRows:Kt,maxRows:Kt,...gi}:gi={type:void 0,maxRows:Nt,minRows:Lt,...gi},ns=TextareaAutosize);const ys=$n=>{ri($n.animationName==="mui-auto-fill-cancel"?Rn.current:{value:"x"})};reactExports.useEffect(()=>{kn&&kn.setAdornedStart(!!tn)},[kn,tn]);const ji={...N,color:zn.color||"primary",disabled:zn.disabled,endAdornment:_t,error:zn.error,focused:zn.focused,formControl:kn,fullWidth:Tt,hiddenLabel:zn.hiddenLabel,multiline:Et,size:zn.size,startAdornment:tn,type:an},ni=useUtilityClasses$e(ji),xi=ln.root||ot.Root||InputBaseRoot,Jn=Jt.root||ft.root||{},is=ln.input||ot.Input||InputBaseInput;return gi={...gi,...Jt.input??ft.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!yt&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(xi,{...Jn,ref:t,onClick:gn,...un,...!isHostComponent(xi)&&{ownerState:{...ji,...Jn.ownerState}},className:clsx(ni.root,Jn.className,Ye,jt&&"MuiInputBase-readOnly"),children:[tn,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(is,{"aria-invalid":zn.error,"aria-describedby":me,autoComplete:pe,autoFocus:Le,defaultValue:mt,disabled:zn.disabled,id:At,onAnimationStart:ys,name:kt,placeholder:Dt,readOnly:jt,required:zn.required,rows:Kt,value:An,onKeyDown:qt,onKeyUp:Zt,type:an,...gi,...!isHostComponent(is)&&{as:ns,ownerState:{...ji,...gi.ownerState}},ref:_n,className:clsx(ni.input,gi.className,jt&&"MuiInputBase-readOnly"),onBlur:mi,onChange:Kn,onFocus:Wi})}),_t,en?en({...zn,startAdornment:tn}):null]})]})});function getInputUtilityClass(de){return generateUtilityClass("MuiInput",de)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])};function getOutlinedInputUtilityClass(de){return generateUtilityClass("MuiOutlinedInput",de)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])};function getFilledInputUtilityClass(de){return generateUtilityClass("MuiFilledInput",de)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),styles$1={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(u,t){const N=useTheme(),me={enter:N.transitions.duration.enteringScreen,exit:N.transitions.duration.leavingScreen},{addEndListener:pe,appear:Le=!0,children:Ye,easing:nt,in:ot,onEnter:ft,onEntered:mt,onEntering:bt,onExit:yt,onExited:_t,onExiting:Ct,style:Tt,timeout:At=me,TransitionComponent:It=Transition,...Pt}=u,Bt=reactExports.useRef(null),Ot=useForkRef(Bt,getReactElementRef(Ye),t),Nt=qt=>Zt=>{if(qt){const Dt=Bt.current;Zt===void 0?qt(Dt):qt(Dt,Zt)}},Lt=Nt(bt),Et=Nt((qt,Zt)=>{reflow(qt);const Dt=getTransitionProps({style:Tt,timeout:At,easing:nt},{mode:"enter"});qt.style.webkitTransition=N.transitions.create("opacity",Dt),qt.style.transition=N.transitions.create("opacity",Dt),ft&&ft(qt,Zt)}),kt=Nt(mt),St=Nt(Ct),$t=Nt(qt=>{const Zt=getTransitionProps({style:Tt,timeout:At,easing:nt},{mode:"exit"});qt.style.webkitTransition=N.transitions.create("opacity",Zt),qt.style.transition=N.transitions.create("opacity",Zt),yt&&yt(qt)}),zt=Nt(_t),Ut=qt=>{pe&&pe(Bt.current,qt)};return jsxRuntimeExports.jsx(It,{appear:Le,in:ot,nodeRef:Bt,onEnter:Et,onEntered:kt,onEntering:Lt,onExit:$t,onExited:zt,onExiting:St,addEndListener:Ut,timeout:At,...Pt,children:(qt,{ownerState:Zt,...Dt})=>reactExports.cloneElement(Ye,{style:{opacity:0,visibility:qt==="exited"&&!ot?"hidden":void 0,...styles$1[qt],...Tt,...Ye.props.style},ref:Ot,...Dt})})});function getBackdropUtilityClass(de){return generateUtilityClass("MuiBackdrop",de)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$d=de=>{const{classes:u,invisible:t}=de;return composeClasses({root:["root",t&&"invisible"]},getBackdropUtilityClass,u)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,t.invisible&&u.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiBackdrop"}),{children:me,className:pe,component:Le="div",invisible:Ye=!1,open:nt,components:ot={},componentsProps:ft={},slotProps:mt={},slots:bt={},TransitionComponent:yt,transitionDuration:_t,...Ct}=N,Tt={...N,component:Le,invisible:Ye},At=useUtilityClasses$d(Tt),It={transition:yt,root:ot.Root,...bt},Pt={...ft,...mt},Bt={slots:It,slotProps:Pt},[Ot,Nt]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:Bt,className:clsx(At.root,pe),ownerState:Tt}),[Lt,Et]=useSlot("transition",{elementType:Fade,externalForwardedProps:Bt,ownerState:Tt});return jsxRuntimeExports.jsx(Lt,{in:nt,timeout:_t,...Ct,...Et,children:jsxRuntimeExports.jsx(Ot,{"aria-hidden":!0,...Nt,classes:At,ref:t,children:me})})});function isOverflowing(de){const u=ownerDocument(de);return u.body===de?ownerWindow(de).innerWidth>u.documentElement.clientWidth:de.scrollHeight>de.clientHeight}function ariaHidden(de,u){u?de.setAttribute("aria-hidden","true"):de.removeAttribute("aria-hidden")}function getPaddingRight(de){return parseInt(ownerWindow(de).getComputedStyle(de).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(de){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(de.tagName),N=de.tagName==="INPUT"&&de.getAttribute("type")==="hidden";return t||N}function ariaHiddenSiblings(de,u,t,N,me){const pe=[u,t,...N];[].forEach.call(de.children,Le=>{const Ye=!pe.includes(Le),nt=!isAriaHiddenForbiddenOnElement(Le);Ye&&nt&&ariaHidden(Le,me)})}function findIndexOf(de,u){let t=-1;return de.some((N,me)=>u(N)?(t=me,!0):!1),t}function handleContainer(de,u){const t=[],N=de.container;if(!u.disableScrollLock){if(isOverflowing(N)){const Le=getScrollbarSize(ownerWindow(N));t.push({value:N.style.paddingRight,property:"padding-right",el:N}),N.style.paddingRight=`${getPaddingRight(N)+Le}px`;const Ye=ownerDocument(N).querySelectorAll(".mui-fixed");[].forEach.call(Ye,nt=>{t.push({value:nt.style.paddingRight,property:"padding-right",el:nt}),nt.style.paddingRight=`${getPaddingRight(nt)+Le}px`})}let pe;if(N.parentNode instanceof DocumentFragment)pe=ownerDocument(N).body;else{const Le=N.parentElement,Ye=ownerWindow(N);pe=(Le==null?void 0:Le.nodeName)==="HTML"&&Ye.getComputedStyle(Le).overflowY==="scroll"?Le:N}t.push({value:pe.style.overflow,property:"overflow",el:pe},{value:pe.style.overflowX,property:"overflow-x",el:pe},{value:pe.style.overflowY,property:"overflow-y",el:pe}),pe.style.overflow="hidden"}return()=>{t.forEach(({value:pe,el:Le,property:Ye})=>{pe?Le.style.setProperty(Ye,pe):Le.style.removeProperty(Ye)})}}function getHiddenSiblings(de){const u=[];return[].forEach.call(de.children,t=>{t.getAttribute("aria-hidden")==="true"&&u.push(t)}),u}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(u,t){let N=this.modals.indexOf(u);if(N!==-1)return N;N=this.modals.length,this.modals.push(u),u.modalRef&&ariaHidden(u.modalRef,!1);const me=getHiddenSiblings(t);ariaHiddenSiblings(t,u.mount,u.modalRef,me,!0);const pe=findIndexOf(this.containers,Le=>Le.container===t);return pe!==-1?(this.containers[pe].modals.push(u),N):(this.containers.push({modals:[u],container:t,restore:null,hiddenSiblings:me}),N)}mount(u,t){const N=findIndexOf(this.containers,pe=>pe.modals.includes(u)),me=this.containers[N];me.restore||(me.restore=handleContainer(me,t))}remove(u,t=!0){const N=this.modals.indexOf(u);if(N===-1)return N;const me=findIndexOf(this.containers,Le=>Le.modals.includes(u)),pe=this.containers[me];if(pe.modals.splice(pe.modals.indexOf(u),1),this.modals.splice(N,1),pe.modals.length===0)pe.restore&&pe.restore(),u.modalRef&&ariaHidden(u.modalRef,t),ariaHiddenSiblings(pe.container,u.mount,u.modalRef,pe.hiddenSiblings,!1),this.containers.splice(me,1);else{const Le=pe.modals[pe.modals.length-1];Le.modalRef&&ariaHidden(Le.modalRef,!1)}return N}isTopModal(u){return this.modals.length>0&&this.modals[this.modals.length-1]===u}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(de){const u=parseInt(de.getAttribute("tabindex")||"",10);return Number.isNaN(u)?de.contentEditable==="true"||(de.nodeName==="AUDIO"||de.nodeName==="VIDEO"||de.nodeName==="DETAILS")&&de.getAttribute("tabindex")===null?0:de.tabIndex:u}function isNonTabbableRadio(de){if(de.tagName!=="INPUT"||de.type!=="radio"||!de.name)return!1;const u=N=>de.ownerDocument.querySelector(`input[type="radio"]${N}`);let t=u(`[name="${de.name}"]:checked`);return t||(t=u(`[name="${de.name}"]`)),t!==de}function isNodeMatchingSelectorFocusable(de){return!(de.disabled||de.tagName==="INPUT"&&de.type==="hidden"||isNonTabbableRadio(de))}function defaultGetTabbable(de){const u=[],t=[];return Array.from(de.querySelectorAll(candidatesSelector)).forEach((N,me)=>{const pe=getTabIndex(N);pe===-1||!isNodeMatchingSelectorFocusable(N)||(pe===0?u.push(N):t.push({documentOrder:me,tabIndex:pe,node:N}))}),t.sort((N,me)=>N.tabIndex===me.tabIndex?N.documentOrder-me.documentOrder:N.tabIndex-me.tabIndex).map(N=>N.node).concat(u)}function defaultIsEnabled(){return!0}function FocusTrap(de){const{children:u,disableAutoFocus:t=!1,disableEnforceFocus:N=!1,disableRestoreFocus:me=!1,getTabbable:pe=defaultGetTabbable,isEnabled:Le=defaultIsEnabled,open:Ye}=de,nt=reactExports.useRef(!1),ot=reactExports.useRef(null),ft=reactExports.useRef(null),mt=reactExports.useRef(null),bt=reactExports.useRef(null),yt=reactExports.useRef(!1),_t=reactExports.useRef(null),Ct=useForkRef(getReactElementRef(u),_t),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{!Ye||!_t.current||(yt.current=!t)},[t,Ye]),reactExports.useEffect(()=>{if(!Ye||!_t.current)return;const Pt=ownerDocument(_t.current);return _t.current.contains(Pt.activeElement)||(_t.current.hasAttribute("tabIndex")||_t.current.setAttribute("tabIndex","-1"),yt.current&&_t.current.focus()),()=>{me||(mt.current&&mt.current.focus&&(nt.current=!0,mt.current.focus()),mt.current=null)}},[Ye]),reactExports.useEffect(()=>{if(!Ye||!_t.current)return;const Pt=ownerDocument(_t.current),Bt=Lt=>{Tt.current=Lt,!(N||!Le()||Lt.key!=="Tab")&&Pt.activeElement===_t.current&&Lt.shiftKey&&(nt.current=!0,ft.current&&ft.current.focus())},Ot=()=>{var kt,St;const Lt=_t.current;if(Lt===null)return;if(!Pt.hasFocus()||!Le()||nt.current){nt.current=!1;return}if(Lt.contains(Pt.activeElement)||N&&Pt.activeElement!==ot.current&&Pt.activeElement!==ft.current)return;if(Pt.activeElement!==bt.current)bt.current=null;else if(bt.current!==null)return;if(!yt.current)return;let Et=[];if((Pt.activeElement===ot.current||Pt.activeElement===ft.current)&&(Et=pe(_t.current)),Et.length>0){const $t=!!((kt=Tt.current)!=null&&kt.shiftKey&&((St=Tt.current)==null?void 0:St.key)==="Tab"),zt=Et[0],Ut=Et[Et.length-1];typeof zt!="string"&&typeof Ut!="string"&&($t?Ut.focus():zt.focus())}else Lt.focus()};Pt.addEventListener("focusin",Ot),Pt.addEventListener("keydown",Bt,!0);const Nt=setInterval(()=>{Pt.activeElement&&Pt.activeElement.tagName==="BODY"&&Ot()},50);return()=>{clearInterval(Nt),Pt.removeEventListener("focusin",Ot),Pt.removeEventListener("keydown",Bt,!0)}},[t,N,me,Le,Ye,pe]);const At=Pt=>{mt.current===null&&(mt.current=Pt.relatedTarget),yt.current=!0,bt.current=Pt.target;const Bt=u.props.onFocus;Bt&&Bt(Pt)},It=Pt=>{mt.current===null&&(mt.current=Pt.relatedTarget),yt.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:Ye?0:-1,onFocus:It,ref:ot,"data-testid":"sentinelStart"}),reactExports.cloneElement(u,{ref:Ct,onFocus:At}),jsxRuntimeExports.jsx("div",{tabIndex:Ye?0:-1,onFocus:It,ref:ft,"data-testid":"sentinelEnd"})]})}function getContainer(de){return typeof de=="function"?de():de}function getHasTransition(de){return de?de.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(de){const{container:u,disableEscapeKeyDown:t=!1,disableScrollLock:N=!1,closeAfterTransition:me=!1,onTransitionEnter:pe,onTransitionExited:Le,children:Ye,onClose:nt,open:ot,rootRef:ft}=de,mt=reactExports.useRef({}),bt=reactExports.useRef(null),yt=reactExports.useRef(null),_t=useForkRef(yt,ft),[Ct,Tt]=reactExports.useState(!ot),At=getHasTransition(Ye);let It=!0;(de["aria-hidden"]==="false"||de["aria-hidden"]===!1)&&(It=!1);const Pt=()=>ownerDocument(bt.current),Bt=()=>(mt.current.modalRef=yt.current,mt.current.mount=bt.current,mt.current),Ot=()=>{manager.mount(Bt(),{disableScrollLock:N}),yt.current&&(yt.current.scrollTop=0)},Nt=useEventCallback(()=>{const Zt=getContainer(u)||Pt().body;manager.add(Bt(),Zt),yt.current&&Ot()}),Lt=()=>manager.isTopModal(Bt()),Et=useEventCallback(Zt=>{bt.current=Zt,Zt&&(ot&&Lt()?Ot():yt.current&&ariaHidden(yt.current,It))}),kt=reactExports.useCallback(()=>{manager.remove(Bt(),It)},[It]);reactExports.useEffect(()=>()=>{kt()},[kt]),reactExports.useEffect(()=>{ot?Nt():(!At||!me)&&kt()},[ot,kt,At,me,Nt]);const St=Zt=>Dt=>{var jt;(jt=Zt.onKeyDown)==null||jt.call(Zt,Dt),!(Dt.key!=="Escape"||Dt.which===229||!Lt())&&(t||(Dt.stopPropagation(),nt&&nt(Dt,"escapeKeyDown")))},$t=Zt=>Dt=>{var jt;(jt=Zt.onClick)==null||jt.call(Zt,Dt),Dt.target===Dt.currentTarget&&nt&&nt(Dt,"backdropClick")};return{getRootProps:(Zt={})=>{const Dt=extractEventHandlers(de);delete Dt.onTransitionEnter,delete Dt.onTransitionExited;const jt={...Dt,...Zt};return{role:"presentation",...jt,onKeyDown:St(jt),ref:_t}},getBackdropProps:(Zt={})=>{const Dt=Zt;return{"aria-hidden":!0,...Dt,onClick:$t(Dt),open:ot}},getTransitionProps:()=>{const Zt=()=>{Tt(!1),pe&&pe()},Dt=()=>{Tt(!0),Le&&Le(),me&&kt()};return{onEnter:createChainedFunction(Zt,(Ye==null?void 0:Ye.props.onEnter)??noop$1),onExited:createChainedFunction(Dt,(Ye==null?void 0:Ye.props.onExited)??noop$1)}},rootRef:_t,portalRef:Et,isTopModal:Lt,exited:Ct,hasTransition:At}}function getModalUtilityClass(de){return generateUtilityClass("MuiModal",de)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$c=de=>{const{open:u,exited:t,classes:N}=de;return composeClasses({root:["root",!u&&t&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,N)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,!t.open&&t.exited&&u.hidden]}})(memoTheme(({theme:de})=>({position:"fixed",zIndex:(de.vars||de).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:u})=>!u.open&&u.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop",overridesResolver:(de,u)=>u.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(u,t){const N=useDefaultProps({name:"MuiModal",props:u}),{BackdropComponent:me=ModalBackdrop,BackdropProps:pe,classes:Le,className:Ye,closeAfterTransition:nt=!1,children:ot,container:ft,component:mt,components:bt={},componentsProps:yt={},disableAutoFocus:_t=!1,disableEnforceFocus:Ct=!1,disableEscapeKeyDown:Tt=!1,disablePortal:At=!1,disableRestoreFocus:It=!1,disableScrollLock:Pt=!1,hideBackdrop:Bt=!1,keepMounted:Ot=!1,onBackdropClick:Nt,onClose:Lt,onTransitionEnter:Et,onTransitionExited:kt,open:St,slotProps:$t={},slots:zt={},theme:Ut,...qt}=N,Zt={...N,closeAfterTransition:nt,disableAutoFocus:_t,disableEnforceFocus:Ct,disableEscapeKeyDown:Tt,disablePortal:At,disableRestoreFocus:It,disableScrollLock:Pt,hideBackdrop:Bt,keepMounted:Ot},{getRootProps:Dt,getBackdropProps:jt,getTransitionProps:en,portalRef:Kt,isTopModal:Vt,exited:Jt,hasTransition:ln}=useModal({...Zt,rootRef:t}),tn={...Zt,exited:Jt},an=useUtilityClasses$c(tn),cn={};if(ot.props.tabIndex===void 0&&(cn.tabIndex="-1"),ln){const{onEnter:_n,onExited:xn}=en();cn.onEnter=_n,cn.onExited=xn}const un={slots:{root:bt.Root,backdrop:bt.Backdrop,...zt},slotProps:{...yt,...$t}},[An,yn]=useSlot("root",{ref:t,elementType:ModalRoot,externalForwardedProps:{...un,...qt,component:mt},getSlotProps:Dt,ownerState:tn,className:clsx(Ye,an==null?void 0:an.root,!tn.open&&tn.exited&&(an==null?void 0:an.hidden))}),[Rn,wn]=useSlot("backdrop",{ref:pe==null?void 0:pe.ref,elementType:me,externalForwardedProps:un,shouldForwardComponentProp:!0,additionalProps:pe,getSlotProps:_n=>jt({..._n,onClick:xn=>{Nt&&Nt(xn),_n!=null&&_n.onClick&&_n.onClick(xn)}}),className:clsx(pe==null?void 0:pe.className,an==null?void 0:an.backdrop),ownerState:tn});return!Ot&&!St&&(!ln||Jt)?null:jsxRuntimeExports.jsx(Portal,{ref:Kt,container:ft,disablePortal:At,children:jsxRuntimeExports.jsxs(An,{...yn,children:[!Bt&&me?jsxRuntimeExports.jsx(Rn,{...wn}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:Ct,disableAutoFocus:_t,disableRestoreFocus:It,isEnabled:Vt,open:St,children:reactExports.cloneElement(ot,cn)})]})})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),useUtilityClasses$b=de=>{const{classes:u,disableUnderline:t,startAdornment:N,endAdornment:me,size:pe,hiddenLabel:Le,multiline:Ye}=de,nt={root:["root",!t&&"underline",N&&"adornedStart",me&&"adornedEnd",pe==="small"&&`size${capitalize(pe)}`,Le&&"hiddenLabel",Ye&&"multiline"],input:["input"]},ot=composeClasses(nt,getFilledInputUtilityClass,u);return{...u,...ot}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:de=>rootShouldForwardProp(de)||de==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[...rootOverridesResolver(de,u),!t.disableUnderline&&u.underline]}})(memoTheme(({theme:de})=>{const u=de.palette.mode==="light",t=u?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",N=u?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",me=u?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",pe=u?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:de.vars?de.vars.palette.FilledInput.bg:N,borderTopLeftRadius:(de.vars||de).shape.borderRadius,borderTopRightRadius:(de.vars||de).shape.borderRadius,transition:de.transitions.create("background-color",{duration:de.transitions.duration.shorter,easing:de.transitions.easing.easeOut}),"&:hover":{backgroundColor:de.vars?de.vars.palette.FilledInput.hoverBg:me,"@media (hover: none)":{backgroundColor:de.vars?de.vars.palette.FilledInput.bg:N}},[`&.${filledInputClasses.focused}`]:{backgroundColor:de.vars?de.vars.palette.FilledInput.bg:N},[`&.${filledInputClasses.disabled}`]:{backgroundColor:de.vars?de.vars.palette.FilledInput.disabledBg:pe},variants:[{props:({ownerState:Le})=>!Le.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:de.transitions.create("transform",{duration:de.transitions.duration.shorter,easing:de.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(de.vars||de).palette.error.main}},"&::before":{borderBottom:`1px solid ${de.vars?`rgba(${de.vars.palette.common.onBackgroundChannel} / ${de.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:de.transitions.create("border-bottom-color",{duration:de.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(de.vars||de).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(de.palette).filter(createSimplePaletteValueFilter()).map(([Le])=>{var Ye;return{props:{disableUnderline:!1,color:Le},style:{"&::after":{borderBottom:`2px solid ${(Ye=(de.vars||de).palette[Le])==null?void 0:Ye.main}`}}}}),{props:({ownerState:Le})=>Le.startAdornment,style:{paddingLeft:12}},{props:({ownerState:Le})=>Le.endAdornment,style:{paddingRight:12}},{props:({ownerState:Le})=>Le.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:Le,size:Ye})=>Le.multiline&&Ye==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:Le})=>Le.multiline&&Le.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:Le})=>Le.multiline&&Le.hiddenLabel&&Le.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:de})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!de.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:de.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:de.palette.mode==="light"?null:"#fff",caretColor:de.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...de.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[de.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:0}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:0}},{props:({ownerState:u})=>u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:u})=>u.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiFilledInput"}),{disableUnderline:me=!1,components:pe={},componentsProps:Le,fullWidth:Ye=!1,hiddenLabel:nt,inputComponent:ot="input",multiline:ft=!1,slotProps:mt,slots:bt={},type:yt="text",..._t}=N,Ct={...N,disableUnderline:me,fullWidth:Ye,inputComponent:ot,multiline:ft,type:yt},Tt=useUtilityClasses$b(N),At={root:{ownerState:Ct},input:{ownerState:Ct}},It=mt??Le?deepmerge(At,mt??Le):At,Pt=bt.root??pe.Root??FilledInputRoot,Bt=bt.input??pe.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:Pt,input:Bt},slotProps:It,fullWidth:Ye,inputComponent:ot,multiline:ft,ref:t,type:yt,..._t,classes:Tt})});FilledInput.muiName="Input";function getFormControlUtilityClasses(de){return generateUtilityClass("MuiFormControl",de)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$a=de=>{const{classes:u,margin:t,fullWidth:N}=de,me={root:["root",t!=="none"&&`margin${capitalize(t)}`,N&&"fullWidth"]};return composeClasses(me,getFormControlUtilityClasses,u)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,u[`margin${capitalize(t.margin)}`],t.fullWidth&&u.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiFormControl"}),{children:me,className:pe,color:Le="primary",component:Ye="div",disabled:nt=!1,error:ot=!1,focused:ft,fullWidth:mt=!1,hiddenLabel:bt=!1,margin:yt="none",required:_t=!1,size:Ct="medium",variant:Tt="outlined",...At}=N,It={...N,color:Le,component:Ye,disabled:nt,error:ot,fullWidth:mt,hiddenLabel:bt,margin:yt,required:_t,size:Ct,variant:Tt},Pt=useUtilityClasses$a(It),[Bt,Ot]=reactExports.useState(()=>{let Zt=!1;return me&&reactExports.Children.forEach(me,Dt=>{if(!isMuiElement(Dt,["Input","Select"]))return;const jt=isMuiElement(Dt,["Select"])?Dt.props.input:Dt;jt&&isAdornedStart(jt.props)&&(Zt=!0)}),Zt}),[Nt,Lt]=reactExports.useState(()=>{let Zt=!1;return me&&reactExports.Children.forEach(me,Dt=>{isMuiElement(Dt,["Input","Select"])&&(isFilled(Dt.props,!0)||isFilled(Dt.props.inputProps,!0))&&(Zt=!0)}),Zt}),[Et,kt]=reactExports.useState(!1);nt&&Et&&kt(!1);const St=ft!==void 0&&!nt?ft:Et;let $t;reactExports.useRef(!1);const zt=reactExports.useCallback(()=>{Lt(!0)},[]),Ut=reactExports.useCallback(()=>{Lt(!1)},[]),qt=reactExports.useMemo(()=>({adornedStart:Bt,setAdornedStart:Ot,color:Le,disabled:nt,error:ot,filled:Nt,focused:St,fullWidth:mt,hiddenLabel:bt,size:Ct,onBlur:()=>{kt(!1)},onFocus:()=>{kt(!0)},onEmpty:Ut,onFilled:zt,registerEffect:$t,required:_t,variant:Tt}),[Bt,Le,nt,ot,Nt,St,mt,bt,$t,Ut,zt,_t,Ct,Tt]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:qt,children:jsxRuntimeExports.jsx(FormControlRoot,{as:Ye,ownerState:It,className:clsx(Pt.root,pe),ref:t,...At,children:me})})});function getScale(de){return`scale(${de}, ${de**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(u,t){const{addEndListener:N,appear:me=!0,children:pe,easing:Le,in:Ye,onEnter:nt,onEntered:ot,onEntering:ft,onExit:mt,onExited:bt,onExiting:yt,style:_t,timeout:Ct="auto",TransitionComponent:Tt=Transition,...At}=u,It=useTimeout(),Pt=reactExports.useRef(),Bt=useTheme(),Ot=reactExports.useRef(null),Nt=useForkRef(Ot,getReactElementRef(pe),t),Lt=Zt=>Dt=>{if(Zt){const jt=Ot.current;Dt===void 0?Zt(jt):Zt(jt,Dt)}},Et=Lt(ft),kt=Lt((Zt,Dt)=>{reflow(Zt);const{duration:jt,delay:en,easing:Kt}=getTransitionProps({style:_t,timeout:Ct,easing:Le},{mode:"enter"});let Vt;Ct==="auto"?(Vt=Bt.transitions.getAutoHeightDuration(Zt.clientHeight),Pt.current=Vt):Vt=jt,Zt.style.transition=[Bt.transitions.create("opacity",{duration:Vt,delay:en}),Bt.transitions.create("transform",{duration:isWebKit154?Vt:Vt*.666,delay:en,easing:Kt})].join(","),nt&&nt(Zt,Dt)}),St=Lt(ot),$t=Lt(yt),zt=Lt(Zt=>{const{duration:Dt,delay:jt,easing:en}=getTransitionProps({style:_t,timeout:Ct,easing:Le},{mode:"exit"});let Kt;Ct==="auto"?(Kt=Bt.transitions.getAutoHeightDuration(Zt.clientHeight),Pt.current=Kt):Kt=Dt,Zt.style.transition=[Bt.transitions.create("opacity",{duration:Kt,delay:jt}),Bt.transitions.create("transform",{duration:isWebKit154?Kt:Kt*.666,delay:isWebKit154?jt:jt||Kt*.333,easing:en})].join(","),Zt.style.opacity=0,Zt.style.transform=getScale(.75),mt&&mt(Zt)}),Ut=Lt(bt),qt=Zt=>{Ct==="auto"&&It.start(Pt.current||0,Zt),N&&N(Ot.current,Zt)};return jsxRuntimeExports.jsx(Tt,{appear:me,in:Ye,nodeRef:Ot,onEnter:kt,onEntered:St,onEntering:Et,onExit:zt,onExited:Ut,onExiting:$t,addEndListener:qt,timeout:Ct==="auto"?null:Ct,...At,children:(Zt,{ownerState:Dt,...jt})=>reactExports.cloneElement(pe,{style:{opacity:0,transform:getScale(.75),visibility:Zt==="exited"&&!Ye?"hidden":void 0,...styles[Zt],..._t,...pe.props.style},ref:Nt,...jt})})});Grow&&(Grow.muiSupportAuto=!0);const useUtilityClasses$9=de=>{const{classes:u,disableUnderline:t}=de,me=composeClasses({root:["root",!t&&"underline"],input:["input"]},getInputUtilityClass,u);return{...u,...me}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:de=>rootShouldForwardProp(de)||de==="classes",name:"MuiInput",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[...rootOverridesResolver(de,u),!t.disableUnderline&&u.underline]}})(memoTheme(({theme:de})=>{let t=de.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return de.vars&&(t=`rgba(${de.vars.palette.common.onBackgroundChannel} / ${de.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:N})=>N.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:N})=>!N.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:de.transitions.create("transform",{duration:de.transitions.duration.shorter,easing:de.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(de.vars||de).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:de.transitions.create("border-bottom-color",{duration:de.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(de.vars||de).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(de.palette).filter(createSimplePaletteValueFilter()).map(([N])=>({props:{color:N,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(de.vars||de).palette[N].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input$1=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiInput"}),{disableUnderline:me=!1,components:pe={},componentsProps:Le,fullWidth:Ye=!1,inputComponent:nt="input",multiline:ot=!1,slotProps:ft,slots:mt={},type:bt="text",...yt}=N,_t=useUtilityClasses$9(N),Tt={root:{ownerState:{disableUnderline:me}}},At=ft??Le?deepmerge(ft??Le,Tt):Tt,It=mt.root??pe.Root??InputRoot,Pt=mt.input??pe.Input??InputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:It,input:Pt},slotProps:At,fullWidth:Ye,inputComponent:nt,multiline:ot,ref:t,type:bt,...yt,classes:_t})});Input$1.muiName="Input";const ListContext=reactExports.createContext({});function getListUtilityClass(de){return generateUtilityClass("MuiList",de)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$8=de=>{const{classes:u,disablePadding:t,dense:N,subheader:me}=de;return composeClasses({root:["root",!t&&"padding",N&&"dense",me&&"subheader"]},getListUtilityClass,u)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,!t.disablePadding&&u.padding,t.dense&&u.dense,t.subheader&&u.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:de})=>!de.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:de})=>de.subheader,style:{paddingTop:0}}]}),List$1=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiList"}),{children:me,className:pe,component:Le="ul",dense:Ye=!1,disablePadding:nt=!1,subheader:ot,...ft}=N,mt=reactExports.useMemo(()=>({dense:Ye}),[Ye]),bt={...N,component:Le,dense:Ye,disablePadding:nt},yt=useUtilityClasses$8(bt);return jsxRuntimeExports.jsx(ListContext.Provider,{value:mt,children:jsxRuntimeExports.jsxs(ListRoot,{as:Le,className:clsx(yt.root,pe),ref:t,ownerState:bt,...ft,children:[ot,me]})})}),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function nextItem(de,u,t){return de===u?de.firstChild:u&&u.nextElementSibling?u.nextElementSibling:t?null:de.firstChild}function previousItem(de,u,t){return de===u?t?de.firstChild:de.lastChild:u&&u.previousElementSibling?u.previousElementSibling:t?null:de.lastChild}function textCriteriaMatches(de,u){if(u===void 0)return!0;let t=de.innerText;return t===void 0&&(t=de.textContent),t=t.trim().toLowerCase(),t.length===0?!1:u.repeating?t[0]===u.keys[0]:t.startsWith(u.keys.join(""))}function moveFocus(de,u,t,N,me,pe){let Le=!1,Ye=me(de,u,u?t:!1);for(;Ye;){if(Ye===de.firstChild){if(Le)return!1;Le=!0}const nt=N?!1:Ye.disabled||Ye.getAttribute("aria-disabled")==="true";if(!Ye.hasAttribute("tabindex")||!textCriteriaMatches(Ye,pe)||nt)Ye=me(de,Ye,t);else return Ye.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(u,t){const{actions:N,autoFocus:me=!1,autoFocusItem:pe=!1,children:Le,className:Ye,disabledItemsFocusable:nt=!1,disableListWrap:ot=!1,onKeyDown:ft,variant:mt="selectedMenu",...bt}=u,yt=reactExports.useRef(null),_t=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{me&&yt.current.focus()},[me]),reactExports.useImperativeHandle(N,()=>({adjustStyleForScrollbar:(Pt,{direction:Bt})=>{const Ot=!yt.current.style.width;if(Pt.clientHeight<yt.current.clientHeight&&Ot){const Nt=`${getScrollbarSize(ownerWindow(Pt))}px`;yt.current.style[Bt==="rtl"?"paddingLeft":"paddingRight"]=Nt,yt.current.style.width=`calc(100% + ${Nt})`}return yt.current}}),[]);const Ct=Pt=>{const Bt=yt.current,Ot=Pt.key;if(Pt.ctrlKey||Pt.metaKey||Pt.altKey){ft&&ft(Pt);return}const Lt=ownerDocument(Bt).activeElement;if(Ot==="ArrowDown")Pt.preventDefault(),moveFocus(Bt,Lt,ot,nt,nextItem);else if(Ot==="ArrowUp")Pt.preventDefault(),moveFocus(Bt,Lt,ot,nt,previousItem);else if(Ot==="Home")Pt.preventDefault(),moveFocus(Bt,null,ot,nt,nextItem);else if(Ot==="End")Pt.preventDefault(),moveFocus(Bt,null,ot,nt,previousItem);else if(Ot.length===1){const Et=_t.current,kt=Ot.toLowerCase(),St=performance.now();Et.keys.length>0&&(St-Et.lastTime>500?(Et.keys=[],Et.repeating=!0,Et.previousKeyMatched=!0):Et.repeating&&kt!==Et.keys[0]&&(Et.repeating=!1)),Et.lastTime=St,Et.keys.push(kt);const $t=Lt&&!Et.repeating&&textCriteriaMatches(Lt,Et);Et.previousKeyMatched&&($t||moveFocus(Bt,Lt,!1,nt,nextItem,Et))?Pt.preventDefault():Et.previousKeyMatched=!1}ft&&ft(Pt)},Tt=useForkRef(yt,t);let At=-1;reactExports.Children.forEach(Le,(Pt,Bt)=>{if(!reactExports.isValidElement(Pt)){At===Bt&&(At+=1,At>=Le.length&&(At=-1));return}Pt.props.disabled||(mt==="selectedMenu"&&Pt.props.selected||At===-1)&&(At=Bt),At===Bt&&(Pt.props.disabled||Pt.props.muiSkipListHighlight||Pt.type.muiSkipListHighlight)&&(At+=1,At>=Le.length&&(At=-1))});const It=reactExports.Children.map(Le,(Pt,Bt)=>{if(Bt===At){const Ot={};return pe&&(Ot.autoFocus=!0),Pt.props.tabIndex===void 0&&mt==="selectedMenu"&&(Ot.tabIndex=0),reactExports.cloneElement(Pt,Ot)}return Pt});return jsxRuntimeExports.jsx(List$1,{role:"menu",ref:Tt,className:Ye,onKeyDown:Ct,tabIndex:me?0:-1,...bt,children:It})});function getPopoverUtilityClass(de){return generateUtilityClass("MuiPopover",de)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(de,u){let t=0;return typeof u=="number"?t=u:u==="center"?t=de.height/2:u==="bottom"&&(t=de.height),t}function getOffsetLeft(de,u){let t=0;return typeof u=="number"?t=u:u==="center"?t=de.width/2:u==="right"&&(t=de.width),t}function getTransformOriginValue(de){return[de.horizontal,de.vertical].map(u=>typeof u=="number"?`${u}px`:u).join(" ")}function resolveAnchorEl(de){return typeof de=="function"?de():de}const useUtilityClasses$7=de=>{const{classes:u}=de;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,u)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root",overridesResolver:(de,u)=>u.root})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper",overridesResolver:(de,u)=>u.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiPopover"}),{action:me,anchorEl:pe,anchorOrigin:Le={vertical:"top",horizontal:"left"},anchorPosition:Ye,anchorReference:nt="anchorEl",children:ot,className:ft,container:mt,elevation:bt=8,marginThreshold:yt=16,open:_t,PaperProps:Ct={},slots:Tt={},slotProps:At={},transformOrigin:It={vertical:"top",horizontal:"left"},TransitionComponent:Pt,transitionDuration:Bt="auto",TransitionProps:Ot={},disableScrollLock:Nt=!1,...Lt}=N,Et=reactExports.useRef(),kt={...N,anchorOrigin:Le,anchorReference:nt,elevation:bt,marginThreshold:yt,transformOrigin:It,TransitionComponent:Pt,transitionDuration:Bt,TransitionProps:Ot},St=useUtilityClasses$7(kt),$t=reactExports.useCallback(()=>{if(nt==="anchorPosition")return Ye;const wn=resolveAnchorEl(pe),xn=(wn&&wn.nodeType===1?wn:ownerDocument(Et.current).body).getBoundingClientRect();return{top:xn.top+getOffsetTop(xn,Le.vertical),left:xn.left+getOffsetLeft(xn,Le.horizontal)}},[pe,Le.horizontal,Le.vertical,Ye,nt]),zt=reactExports.useCallback(wn=>({vertical:getOffsetTop(wn,It.vertical),horizontal:getOffsetLeft(wn,It.horizontal)}),[It.horizontal,It.vertical]),Ut=reactExports.useCallback(wn=>{const _n={width:wn.offsetWidth,height:wn.offsetHeight},xn=zt(_n);if(nt==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(xn)};const Qn=$t();let kn=Qn.top-xn.vertical,zn=Qn.left-xn.horizontal;const Ti=kn+_n.height,Hn=zn+_n.width,ri=ownerWindow(resolveAnchorEl(pe)),Wi=ri.innerHeight-yt,mi=ri.innerWidth-yt;if(yt!==null&&kn<yt){const Kn=kn-yt;kn-=Kn,xn.vertical+=Kn}else if(yt!==null&&Ti>Wi){const Kn=Ti-Wi;kn-=Kn,xn.vertical+=Kn}if(yt!==null&&zn<yt){const Kn=zn-yt;zn-=Kn,xn.horizontal+=Kn}else if(Hn>mi){const Kn=Hn-mi;zn-=Kn,xn.horizontal+=Kn}return{top:`${Math.round(kn)}px`,left:`${Math.round(zn)}px`,transformOrigin:getTransformOriginValue(xn)}},[pe,nt,$t,zt,yt]),[qt,Zt]=reactExports.useState(_t),Dt=reactExports.useCallback(()=>{const wn=Et.current;if(!wn)return;const _n=Ut(wn);_n.top!==null&&wn.style.setProperty("top",_n.top),_n.left!==null&&(wn.style.left=_n.left),wn.style.transformOrigin=_n.transformOrigin,Zt(!0)},[Ut]);reactExports.useEffect(()=>(Nt&&window.addEventListener("scroll",Dt),()=>window.removeEventListener("scroll",Dt)),[pe,Nt,Dt]);const jt=()=>{Dt()},en=()=>{Zt(!1)};reactExports.useEffect(()=>{_t&&Dt()}),reactExports.useImperativeHandle(me,()=>_t?{updatePosition:()=>{Dt()}}:null,[_t,Dt]),reactExports.useEffect(()=>{if(!_t)return;const wn=debounce$1(()=>{Dt()}),_n=ownerWindow(resolveAnchorEl(pe));return _n.addEventListener("resize",wn),()=>{wn.clear(),_n.removeEventListener("resize",wn)}},[pe,_t,Dt]);let Kt=Bt;const Vt={slots:{transition:Pt,...Tt},slotProps:{transition:Ot,paper:Ct,...At}},[Jt,ln]=useSlot("transition",{elementType:Grow,externalForwardedProps:Vt,ownerState:kt,getSlotProps:wn=>({...wn,onEntering:(_n,xn)=>{var Qn;(Qn=wn.onEntering)==null||Qn.call(wn,_n,xn),jt()},onExited:_n=>{var xn;(xn=wn.onExited)==null||xn.call(wn,_n),en()}}),additionalProps:{appear:!0,in:_t}});Bt==="auto"&&!Jt.muiSupportAuto&&(Kt=void 0);const tn=mt||(pe?ownerDocument(resolveAnchorEl(pe)).body:void 0),[an,{slots:cn,slotProps:un,...An}]=useSlot("root",{ref:t,elementType:PopoverRoot,externalForwardedProps:{...Vt,...Lt},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:Tt.backdrop},slotProps:{backdrop:mergeSlotProps(typeof At.backdrop=="function"?At.backdrop(kt):At.backdrop,{invisible:!0})},container:tn,open:_t},ownerState:kt,className:clsx(St.root,ft)}),[yn,Rn]=useSlot("paper",{ref:Et,className:St.paper,elementType:PopoverPaper,externalForwardedProps:Vt,shouldForwardComponentProp:!0,additionalProps:{elevation:bt,style:qt?void 0:{opacity:0}},ownerState:kt});return jsxRuntimeExports.jsx(an,{...An,...!isHostComponent(an)&&{slots:cn,slotProps:un,disableScrollLock:Nt},children:jsxRuntimeExports.jsx(Jt,{...ln,timeout:Kt,children:jsxRuntimeExports.jsx(yn,{...Rn,children:ot})})})});function getMenuUtilityClass(de){return generateUtilityClass("MuiMenu",de)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$6=de=>{const{classes:u}=de;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,u)},MenuRoot=styled(Popover,{shouldForwardProp:de=>rootShouldForwardProp(de)||de==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(de,u)=>u.root})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(de,u)=>u.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List",overridesResolver:(de,u)=>u.list})({outline:0}),Menu=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiMenu"}),{autoFocus:me=!0,children:pe,className:Le,disableAutoFocusItem:Ye=!1,MenuListProps:nt={},onClose:ot,open:ft,PaperProps:mt={},PopoverClasses:bt,transitionDuration:yt="auto",TransitionProps:{onEntering:_t,...Ct}={},variant:Tt="selectedMenu",slots:At={},slotProps:It={},...Pt}=N,Bt=useRtl(),Ot={...N,autoFocus:me,disableAutoFocusItem:Ye,MenuListProps:nt,onEntering:_t,PaperProps:mt,transitionDuration:yt,TransitionProps:Ct,variant:Tt},Nt=useUtilityClasses$6(Ot),Lt=me&&!Ye&&ft,Et=reactExports.useRef(null),kt=(Kt,Vt)=>{Et.current&&Et.current.adjustStyleForScrollbar(Kt,{direction:Bt?"rtl":"ltr"}),_t&&_t(Kt,Vt)},St=Kt=>{Kt.key==="Tab"&&(Kt.preventDefault(),ot&&ot(Kt,"tabKeyDown"))};let $t=-1;reactExports.Children.map(pe,(Kt,Vt)=>{reactExports.isValidElement(Kt)&&(Kt.props.disabled||(Tt==="selectedMenu"&&Kt.props.selected||$t===-1)&&($t=Vt))});const zt={slots:At,slotProps:{list:nt,transition:Ct,paper:mt,...It}},Ut=useSlotProps({elementType:At.root,externalSlotProps:It.root,ownerState:Ot,className:[Nt.root,Le]}),[qt,Zt]=useSlot("paper",{className:Nt.paper,elementType:MenuPaper,externalForwardedProps:zt,shouldForwardComponentProp:!0,ownerState:Ot}),[Dt,jt]=useSlot("list",{className:clsx(Nt.list,nt.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:zt,getSlotProps:Kt=>({...Kt,onKeyDown:Vt=>{var Jt;St(Vt),(Jt=Kt.onKeyDown)==null||Jt.call(Kt,Vt)}}),ownerState:Ot}),en=typeof zt.slotProps.transition=="function"?zt.slotProps.transition(Ot):zt.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:ot,anchorOrigin:{vertical:"bottom",horizontal:Bt?"right":"left"},transformOrigin:Bt?RTL_ORIGIN:LTR_ORIGIN,slots:{root:At.root,paper:qt,backdrop:At.backdrop,...At.transition&&{transition:At.transition}},slotProps:{root:Ut,paper:Zt,backdrop:typeof It.backdrop=="function"?It.backdrop(Ot):It.backdrop,transition:{...en,onEntering:(...Kt)=>{var Vt;kt(...Kt),(Vt=en==null?void 0:en.onEntering)==null||Vt.call(en,...Kt)}}},open:ft,ref:t,transitionDuration:yt,ownerState:Ot,...Pt,classes:bt,children:jsxRuntimeExports.jsx(Dt,{actions:Et,autoFocus:me&&($t===-1||Ye),autoFocusItem:Lt,variant:Tt,...jt,children:pe})})});function getMenuItemUtilityClass(de){return generateUtilityClass("MuiMenuItem",de)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(de,u)=>{const{ownerState:t}=de;return[u.root,t.dense&&u.dense,t.divider&&u.divider,!t.disableGutters&&u.gutters]},useUtilityClasses$5=de=>{const{disabled:u,dense:t,divider:N,disableGutters:me,selected:pe,classes:Le}=de,nt=composeClasses({root:["root",t&&"dense",u&&"disabled",!me&&"gutters",N&&"divider",pe&&"selected"]},getMenuItemUtilityClass,Le);return{...Le,...nt}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:de=>rootShouldForwardProp(de)||de==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:de})=>({...de.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(de.vars||de).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:de.vars?`rgba(${de.vars.palette.primary.mainChannel} / ${de.vars.palette.action.selectedOpacity})`:alpha(de.palette.primary.main,de.palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:de.vars?`rgba(${de.vars.palette.primary.mainChannel} / calc(${de.vars.palette.action.selectedOpacity} + ${de.vars.palette.action.focusOpacity}))`:alpha(de.palette.primary.main,de.palette.action.selectedOpacity+de.palette.action.focusOpacity)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:de.vars?`rgba(${de.vars.palette.primary.mainChannel} / calc(${de.vars.palette.action.selectedOpacity} + ${de.vars.palette.action.hoverOpacity}))`:alpha(de.palette.primary.main,de.palette.action.selectedOpacity+de.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:de.vars?`rgba(${de.vars.palette.primary.mainChannel} / ${de.vars.palette.action.selectedOpacity})`:alpha(de.palette.primary.main,de.palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(de.vars||de).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(de.vars||de).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:de.spacing(1),marginBottom:de.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:u})=>!u.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:u})=>u.divider,style:{borderBottom:`1px solid ${(de.vars||de).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:u})=>!u.dense,style:{[de.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:u})=>u.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...de.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiMenuItem"}),{autoFocus:me=!1,component:pe="li",dense:Le=!1,divider:Ye=!1,disableGutters:nt=!1,focusVisibleClassName:ot,role:ft="menuitem",tabIndex:mt,className:bt,...yt}=N,_t=reactExports.useContext(ListContext),Ct=reactExports.useMemo(()=>({dense:Le||_t.dense||!1,disableGutters:nt}),[_t.dense,Le,nt]),Tt=reactExports.useRef(null);useEnhancedEffect(()=>{me&&Tt.current&&Tt.current.focus()},[me]);const At={...N,dense:Ct.dense,divider:Ye,disableGutters:nt},It=useUtilityClasses$5(N),Pt=useForkRef(Tt,t);let Bt;return N.disabled||(Bt=mt!==void 0?mt:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:Ct,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:Pt,role:ft,tabIndex:Bt,component:pe,focusVisibleClassName:clsx(It.focusVisible,ot),className:clsx(It.root,bt),...yt,ownerState:At,classes:It})})});function getNativeSelectUtilityClasses(de){return generateUtilityClass("MuiNativeSelect",de)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$4=de=>{const{classes:u,variant:t,disabled:N,multiple:me,open:pe,error:Le}=de,Ye={select:["select",t,N&&"disabled",me&&"multiple",Le&&"error"],icon:["icon",`icon${capitalize(t)}`,pe&&"iconOpen",N&&"disabled"]};return composeClasses(Ye,getNativeSelectUtilityClasses,u)},StyledSelectSelect=styled("select")(({theme:de})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(de.vars||de).palette.background.paper},variants:[{props:({ownerState:u})=>u.variant!=="filled"&&u.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(de.vars||de).shape.borderRadius,"&:focus":{borderRadius:(de.vars||de).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.select,u[t.variant],t.error&&u.error,{[`&.${nativeSelectClasses.multiple}`]:u.multiple}]}})({}),StyledSelectIcon=styled("svg")(({theme:de})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(de.vars||de).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(de.vars||de).palette.action.disabled},variants:[{props:({ownerState:u})=>u.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.icon,t.variant&&u[`icon${capitalize(t.variant)}`],t.open&&u.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(u,t){const{className:N,disabled:me,error:pe,IconComponent:Le,inputRef:Ye,variant:nt="standard",...ot}=u,ft={...u,disabled:me,variant:nt,error:pe},mt=useUtilityClasses$4(ft);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:ft,className:clsx(mt.select,N),disabled:me,ref:Ye||t,...ot}),u.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:Le,ownerState:ft,className:mt.icon})]})});var _span$1;const NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:de})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:u})=>!u.withLabel,style:{padding:0,lineHeight:"11px",transition:de.transitions.create("width",{duration:150,easing:de.transitions.easing.easeOut})}},{props:({ownerState:u})=>u.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:de.transitions.create("max-width",{duration:50,easing:de.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:u})=>u.withLabel&&u.notched,style:{maxWidth:"100%",transition:de.transitions.create("max-width",{duration:100,easing:de.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(de){const{children:u,classes:t,className:N,label:me,notched:pe,...Le}=de,Ye=me!=null&&me!=="",nt={...de,notched:pe,withLabel:Ye};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:N,ownerState:nt,...Le,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:nt,children:Ye?jsxRuntimeExports.jsx("span",{children:me}):_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const useUtilityClasses$3=de=>{const{classes:u}=de,N=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,u);return{...u,...N}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:de=>rootShouldForwardProp(de)||de==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:de})=>{const u=de.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(de.vars||de).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(de.vars||de).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:de.vars?`rgba(${de.vars.palette.common.onBackgroundChannel} / 0.23)`:u}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(de.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(de.vars||de).palette[t].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(de.vars||de).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(de.vars||de).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:N})=>t.multiline&&N==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(de,u)=>u.notchedOutline})(memoTheme(({theme:de})=>{const u=de.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:de.vars?`rgba(${de.vars.palette.common.onBackgroundChannel} / 0.23)`:u}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:de})=>({padding:"16.5px 14px",...!de.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:de.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:de.palette.mode==="light"?null:"#fff",caretColor:de.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...de.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[de.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:u})=>u.multiline,style:{padding:0}},{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:0}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(u,t){var N;const me=useDefaultProps({props:u,name:"MuiOutlinedInput"}),{components:pe={},fullWidth:Le=!1,inputComponent:Ye="input",label:nt,multiline:ot=!1,notched:ft,slots:mt={},type:bt="text",...yt}=me,_t=useUtilityClasses$3(me),Ct=useFormControl(),Tt=formControlState({props:me,muiFormControl:Ct,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),At={...me,color:Tt.color||"primary",disabled:Tt.disabled,error:Tt.error,focused:Tt.focused,formControl:Ct,fullWidth:Le,hiddenLabel:Tt.hiddenLabel,multiline:ot,size:Tt.size,type:bt},It=mt.root??pe.Root??OutlinedInputRoot,Pt=mt.input??pe.Input??OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,{slots:{root:It,input:Pt},renderSuffix:Bt=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:At,className:_t.notchedOutline,label:nt!=null&&nt!==""&&Tt.required?N||(N=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[nt,"","*"]})):nt,notched:typeof ft<"u"?ft:!!(Bt.startAdornment||Bt.filled||Bt.focused)}),fullWidth:Le,inputComponent:Ye,multiline:ot,ref:t,type:bt,...yt,classes:{..._t,notchedOutline:null}})});OutlinedInput.muiName="Input";function getSelectUtilityClasses(de){return generateUtilityClass("MuiSelect",de)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[{[`&.${selectClasses.select}`]:u.select},{[`&.${selectClasses.select}`]:u[t.variant]},{[`&.${selectClasses.error}`]:u.error},{[`&.${selectClasses.multiple}`]:u.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.icon,t.variant&&u[`icon${capitalize(t.variant)}`],t.open&&u.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:de=>slotShouldForwardProp(de)&&de!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(de,u)=>u.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(de,u){return typeof u=="object"&&u!==null?de===u:String(de)===String(u)}function isEmpty$3(de){return de==null||typeof de=="string"&&!de.trim()}const useUtilityClasses$2=de=>{const{classes:u,variant:t,disabled:N,multiple:me,open:pe,error:Le}=de,Ye={select:["select",t,N&&"disabled",me&&"multiple",Le&&"error"],icon:["icon",`icon${capitalize(t)}`,pe&&"iconOpen",N&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(Ye,getSelectUtilityClasses,u)},SelectInput=reactExports.forwardRef(function(u,t){var Ks;const{"aria-describedby":N,"aria-label":me,autoFocus:pe,autoWidth:Le,children:Ye,className:nt,defaultOpen:ot,defaultValue:ft,disabled:mt,displayEmpty:bt,error:yt=!1,IconComponent:_t,inputRef:Ct,labelId:Tt,MenuProps:At={},multiple:It,name:Pt,onBlur:Bt,onChange:Ot,onClose:Nt,onFocus:Lt,onOpen:Et,open:kt,readOnly:St,renderValue:$t,required:zt,SelectDisplayProps:Ut={},tabIndex:qt,type:Zt,value:Dt,variant:jt="standard",...en}=u,[Kt,Vt]=useControlled({controlled:Dt,default:ft,name:"Select"}),[Jt,ln]=useControlled({controlled:kt,default:ot,name:"Select"}),tn=reactExports.useRef(null),an=reactExports.useRef(null),[cn,un]=reactExports.useState(null),{current:An}=reactExports.useRef(kt!=null),[yn,Rn]=reactExports.useState(),wn=useForkRef(t,Ct),_n=reactExports.useCallback(fn=>{an.current=fn,fn&&un(fn)},[]),xn=cn==null?void 0:cn.parentNode;reactExports.useImperativeHandle(wn,()=>({focus:()=>{an.current.focus()},node:tn.current,value:Kt}),[Kt]),reactExports.useEffect(()=>{ot&&Jt&&cn&&!An&&(Rn(Le?null:xn.clientWidth),an.current.focus())},[cn,Le]),reactExports.useEffect(()=>{pe&&an.current.focus()},[pe]),reactExports.useEffect(()=>{if(!Tt)return;const fn=ownerDocument(an.current).getElementById(Tt);if(fn){const On=()=>{getSelection().isCollapsed&&an.current.focus()};return fn.addEventListener("click",On),()=>{fn.removeEventListener("click",On)}}},[Tt]);const Qn=(fn,On)=>{fn?Et&&Et(On):Nt&&Nt(On),An||(Rn(Le?null:xn.clientWidth),ln(fn))},kn=fn=>{fn.button===0&&(fn.preventDefault(),an.current.focus(),Qn(!0,fn))},zn=fn=>{Qn(!1,fn)},Ti=reactExports.Children.toArray(Ye),Hn=fn=>{const On=Ti.find(jn=>jn.props.value===fn.target.value);On!==void 0&&(Vt(On.props.value),Ot&&Ot(fn,On))},ri=fn=>On=>{let jn;if(On.currentTarget.hasAttribute("tabindex")){if(It){jn=Array.isArray(Kt)?Kt.slice():[];const vs=Kt.indexOf(fn.props.value);vs===-1?jn.push(fn.props.value):jn.splice(vs,1)}else jn=fn.props.value;if(fn.props.onClick&&fn.props.onClick(On),Kt!==jn&&(Vt(jn),Ot)){const vs=On.nativeEvent||On,Qr=new vs.constructor(vs.type,vs);Object.defineProperty(Qr,"target",{writable:!0,value:{value:jn,name:Pt}}),Ot(Qr,fn)}It||Qn(!1,On)}},Wi=fn=>{St||[" ","ArrowUp","ArrowDown","Enter"].includes(fn.key)&&(fn.preventDefault(),Qn(!0,fn))},mi=cn!==null&&Jt,Kn=fn=>{!mi&&Bt&&(Object.defineProperty(fn,"target",{writable:!0,value:{value:Kt,name:Pt}}),Bt(fn))};delete en["aria-invalid"];let gn,ns;const gi=[];let ys=!1;(isFilled({value:Kt})||bt)&&($t?gn=$t(Kt):ys=!0);const ji=Ti.map(fn=>{if(!reactExports.isValidElement(fn))return null;let On;if(It){if(!Array.isArray(Kt))throw new Error(formatMuiErrorMessage(2));On=Kt.some(jn=>areEqualValues(jn,fn.props.value)),On&&ys&&gi.push(fn.props.children)}else On=areEqualValues(Kt,fn.props.value),On&&ys&&(ns=fn.props.children);return reactExports.cloneElement(fn,{"aria-selected":On?"true":"false",onClick:ri(fn),onKeyUp:jn=>{jn.key===" "&&jn.preventDefault(),fn.props.onKeyUp&&fn.props.onKeyUp(jn)},role:"option",selected:On,value:void 0,"data-value":fn.props.value})});ys&&(It?gi.length===0?gn=null:gn=gi.reduce((fn,On,jn)=>(fn.push(On),jn<gi.length-1&&fn.push(", "),fn),[]):gn=ns);let ni=yn;!Le&&An&&cn&&(ni=xn.clientWidth);let xi;typeof qt<"u"?xi=qt:xi=mt?null:0;const Jn=Ut.id||(Pt?`mui-component-select-${Pt}`:void 0),is={...u,variant:jt,value:Kt,open:mi,error:yt},$n=useUtilityClasses$2(is),_s={...At.PaperProps,...(Ks=At.slotProps)==null?void 0:Ks.paper},Yi=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:_n,tabIndex:xi,role:"combobox","aria-controls":mi?Yi:void 0,"aria-disabled":mt?"true":void 0,"aria-expanded":mi?"true":"false","aria-haspopup":"listbox","aria-label":me,"aria-labelledby":[Tt,Jn].filter(Boolean).join(" ")||void 0,"aria-describedby":N,"aria-required":zt?"true":void 0,"aria-invalid":yt?"true":void 0,onKeyDown:Wi,onMouseDown:mt||St?null:kn,onBlur:Kn,onFocus:Lt,...Ut,ownerState:is,className:clsx(Ut.className,$n.select,nt),id:Jn,children:isEmpty$3(gn)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):gn}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":yt,value:Array.isArray(Kt)?Kt.join(","):Kt,name:Pt,ref:tn,"aria-hidden":!0,onChange:Hn,tabIndex:-1,disabled:mt,className:$n.nativeInput,autoFocus:pe,required:zt,...en,ownerState:is}),jsxRuntimeExports.jsx(SelectIcon,{as:_t,className:$n.icon,ownerState:is}),jsxRuntimeExports.jsx(Menu,{id:`menu-${Pt||""}`,anchorEl:xn,open:mi,onClose:zn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...At,slotProps:{...At.slotProps,list:{"aria-labelledby":Tt,role:"listbox","aria-multiselectable":It?"true":void 0,disableListWrap:!0,id:Yi,...At.MenuListProps},paper:{..._s,style:{minWidth:ni,..._s!=null?_s.style:null}}},children:ji})]})}),useUtilityClasses$1=de=>{const{classes:u}=de,N=composeClasses({root:["root"]},getSelectUtilityClasses,u);return{...u,...N}},styledRootConfig={name:"MuiSelect",overridesResolver:(de,u)=>u.root,shouldForwardProp:de=>rootShouldForwardProp(de)&&de!=="variant",slot:"Root"},StyledInput=styled(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(u,t){const N=useDefaultProps({name:"MuiSelect",props:u}),{autoWidth:me=!1,children:pe,classes:Le={},className:Ye,defaultOpen:nt=!1,displayEmpty:ot=!1,IconComponent:ft=ArrowDropDownIcon,id:mt,input:bt,inputProps:yt,label:_t,labelId:Ct,MenuProps:Tt,multiple:At=!1,native:It=!1,onClose:Pt,onOpen:Bt,open:Ot,renderValue:Nt,SelectDisplayProps:Lt,variant:Et="outlined",...kt}=N,St=It?NativeSelectInput:SelectInput,$t=useFormControl(),zt=formControlState({props:N,muiFormControl:$t,states:["variant","error"]}),Ut=zt.variant||Et,qt={...N,variant:Ut,classes:Le},Zt=useUtilityClasses$1(qt),{root:Dt,...jt}=Zt,en=bt||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:qt}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:_t,ownerState:qt}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:qt})}[Ut],Kt=useForkRef(t,getReactElementRef(en));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(en,{inputComponent:St,inputProps:{children:pe,error:zt.error,IconComponent:ft,variant:Ut,type:void 0,multiple:At,...It?{id:mt}:{autoWidth:me,defaultOpen:nt,displayEmpty:ot,labelId:Ct,MenuProps:Tt,onClose:Pt,onOpen:Bt,open:Ot,renderValue:Nt,SelectDisplayProps:{id:mt,...Lt}},...yt,classes:yt?deepmerge(jt,yt.classes):jt,...bt?bt.props.inputProps:{}},...(At&&It||ot)&&Ut==="outlined"?{notched:!0}:{},ref:Kt,className:clsx(en.props.className,Ye,Zt.root),...!bt&&{variant:Ut},...kt})})});Select.muiName="Select";function getToolbarUtilityClass(de){return generateUtilityClass("MuiToolbar",de)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses=de=>{const{classes:u,disableGutters:t,variant:N}=de;return composeClasses({root:["root",!t&&"gutters",N]},getToolbarUtilityClass,u)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(de,u)=>{const{ownerState:t}=de;return[u.root,!t.disableGutters&&u.gutters,u[t.variant]]}})(memoTheme(({theme:de})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:u})=>!u.disableGutters,style:{paddingLeft:de.spacing(2),paddingRight:de.spacing(2),[de.breakpoints.up("sm")]:{paddingLeft:de.spacing(3),paddingRight:de.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:de.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function(u,t){const N=useDefaultProps({props:u,name:"MuiToolbar"}),{className:me,component:pe="div",disableGutters:Le=!1,variant:Ye="regular",...nt}=N,ot={...N,component:pe,disableGutters:Le,variant:Ye},ft=useUtilityClasses(ot);return jsxRuntimeExports.jsx(ToolbarRoot,{as:pe,className:clsx(ft.root,me),ref:t,ownerState:ot,...nt})}),NovartisIcon="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20295.44%2048.31'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:url(%23linear-gradient);}.cls-2{fill:%230460a9;}%3c/style%3e%3clinearGradient%20id='linear-gradient'%20x1='56.72'%20y1='64.98'%20x2='99.51'%20y2='64.98'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.3'%20stop-color='%23e74a21'/%3e%3cstop%20offset='0.7'%20stop-color='%23ec9a1e'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle%3enovartis_logo_pos_rgb%3c/title%3e%3cg%20id='_Group_'%20data-name='&lt;Group&gt;'%3e%3cpath%20id='_Path_'%20data-name='&lt;Path&gt;'%20class='cls-1'%20d='M86.27,60.09l-.12.31c2,.88,6.49,4.37,6.49,11.4,0,6.62-5.58,13.29-14.35,13.29-10.91,0-14.67-6.38-14.67-12.24,0-7.51,5.25-12.51,5.25-19.35a10.69,10.69,0,0,0-8.42-10.32l-.18.31a8.86,8.86,0,0,1,2.69,6.41c0,7.39-6.23,12.64-6.23,21.12,0,7.81,5.46,15.77,21.27,15.77,14.09,0,21.52-6.9,21.52-14.24C99.51,66.25,95,60.92,86.27,60.09Z'%20transform='translate(-56.72%20-38.48)'/%3e%3cpath%20id='_Compound_Path_'%20data-name='&lt;Compound%20Path&gt;'%20class='cls-2'%20d='M148.17,85.53,129.44,61.38V83.15l3.82.91v1h-8.71v-1l3.12-.91V59.43A6.66,6.66,0,0,0,125,57.91c-.38-.08-.89-.17-.89-.17v-1h7.39l16,20.8V58.67l-3.82-.92v-1h8.71v1l-3.12.92V80.26c0,2,.14,4.91.17,5.28Zm39.16-15.38c0,10-7,15.8-14.65,15.8S158,80.07,158,70.93s7-15.08,14.61-15.08A14.25,14.25,0,0,1,187.33,70.16Zm-4.87,1.5c0-7.35-4.4-14.48-10.38-14.48-6.36,0-9.23,6.15-9.23,12.73s3.63,14.74,10.46,14.74C179.73,84.64,182.46,78.14,182.46,71.65Zm10.92-13-3-.92v-1h11.49v1l-3.6.92,7.93,21.62h0l7.93-21.62-3.6-.92v-1h8.5v1l-3,.92L206.1,85.6h-2.54ZM261.28,70.6h-1.82V58.22c6,0,9.57,1.38,9.57,6.28C269,68.14,265.88,70.6,261.28,70.6Zm51.41,13.46,4-.91V58.66l-4-.92v-1h12.47v1l-4,.92V83.15l4,.91v1H312.69Zm20.11-6.78h.79l2.65,6.1a11.87,11.87,0,0,0,5.07,1.26c3.44,0,6.58-2,6.58-5.58,0-2.72-1.76-4.34-4.61-5.83l-2.82-1.46c-3.37-1.75-6.74-4.23-6.74-8.22,0-4.34,3-7.69,9.42-7.69a22.14,22.14,0,0,1,6.64,1.09l.67,6.56h-.85l-2.45-5.26A8.51,8.51,0,0,0,343,57.17c-3.25,0-5.46,2-5.46,4.77,0,2.51,1.67,4.09,4.53,5.57l3.34,1.74c4.56,2.36,6.72,4.55,6.72,8.6,0,5-4.69,8.11-10.52,8.11a25.1,25.1,0,0,1-8.09-1.21Zm-115.6,6.78,3.21-.91,9.91-26.43,3.31-.85,10.23,27.27,3.21.92v1H234.93v-1l4.11-.92-2.9-7.84h-10.9l-2.88,7.84,4.11.91v1h-9.27ZM226,73.21h9.43l-4.68-12.64h0Zm41-2c1-.25,6.61-1.68,6.61-7,0-4.27-3.27-7.58-11.33-7.58-5,0-10,.11-10.63.13v1l3.29.92V83.14l-3.29.92v1h11.64v-1l-3.82-.92V72.08h3.29l8.41,13h7.45v-1l-3.77-1Zm24.58-13V83.15l-4,.91v1h12.47v-1l-4-.91V58.22h6.73L305,63h.86l-.64-6.23H282.41L281.77,63h.86l2.2-4.73Zm-213.39,18,4-37.79h-8.3l4,37.79Z'%20transform='translate(-56.72%20-38.48)'/%3e%3c/g%3e%3c/svg%3e";var __assign=function(){return __assign=Object.assign||function(u){for(var t,N=1,me=arguments.length;N<me;N++){t=arguments[N];for(var pe in t)Object.prototype.hasOwnProperty.call(t,pe)&&(u[pe]=t[pe])}return u},__assign.apply(this,arguments)};function __spreadArray(de,u,t){if(t||arguments.length===2)for(var N=0,me=u.length,pe;N<me;N++)(pe||!(N in u))&&(pe||(pe=Array.prototype.slice.call(u,0,N)),pe[N]=u[N]);return de.concat(pe||Array.prototype.slice.call(u))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(de,u){return charat(de,0)^45?(((u<<2^charat(de,0))<<2^charat(de,1))<<2^charat(de,2))<<2^charat(de,3):0}function trim$1(de){return de.trim()}function match(de,u){return(de=u.exec(de))?de[0]:de}function replace(de,u,t){return de.replace(u,t)}function indexof(de,u,t){return de.indexOf(u,t)}function charat(de,u){return de.charCodeAt(u)|0}function substr(de,u,t){return de.slice(u,t)}function strlen(de){return de.length}function sizeof(de){return de.length}function append(de,u){return u.push(de),de}function combine(de,u){return de.map(u).join("")}function filter(de,u){return de.filter(function(t){return!match(t,u)})}var line=1,column=1,length$1=0,position=0,character=0,characters="";function node(de,u,t,N,me,pe,Le,Ye){return{value:de,root:u,parent:t,type:N,props:me,children:pe,line,column,length:Le,return:"",siblings:Ye}}function copy(de,u){return assign(node("",null,null,"",null,null,0,de.siblings),de,{length:-de.length},u)}function lift(de){for(;de.root;)de=copy(de.root,{children:[de]});append(de,de.siblings)}function char(){return character}function prev$1(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length$1?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(de,u){return substr(characters,de,u)}function token(de){switch(de){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(de){return line=column=1,length$1=strlen(characters=de),position=0,[]}function dealloc(de){return characters="",de}function delimit(de){return trim$1(slice(position-1,delimiter(de===91?de+2:de===40?de+1:de)))}function whitespace(de){for(;(character=peek())&&character<33;)next();return token(de)>2||token(character)>3?"":" "}function escaping(de,u){for(;--u&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(de,caret()+(u<6&&peek()==32&&next()==32))}function delimiter(de){for(;next();)switch(character){case de:return position;case 34:case 39:de!==34&&de!==39&&delimiter(character);break;case 40:de===41&&delimiter(de);break;case 92:next();break}return position}function commenter(de,u){for(;next()&&de+character!==57;)if(de+character===84&&peek()===47)break;return"/*"+slice(u,position-1)+"*"+from(de===47?de:next())}function identifier(de){for(;!token(peek());)next();return slice(de,position)}function compile(de){return dealloc(parse$2("",null,null,null,[""],de=alloc(de),0,[0],de))}function parse$2(de,u,t,N,me,pe,Le,Ye,nt){for(var ot=0,ft=0,mt=Le,bt=0,yt=0,_t=0,Ct=1,Tt=1,At=1,It=0,Pt="",Bt=me,Ot=pe,Nt=N,Lt=Pt;Tt;)switch(_t=It,It=next()){case 40:if(_t!=108&&charat(Lt,mt-1)==58){indexof(Lt+=replace(delimit(It),"&","&\f"),"&\f",abs(ot?Ye[ot-1]:0))!=-1&&(At=-1);break}case 34:case 39:case 91:Lt+=delimit(It);break;case 9:case 10:case 13:case 32:Lt+=whitespace(_t);break;case 92:Lt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),u,t,nt),nt);break;default:Lt+="/"}break;case 123*Ct:Ye[ot++]=strlen(Lt)*At;case 125*Ct:case 59:case 0:switch(It){case 0:case 125:Tt=0;case 59+ft:At==-1&&(Lt=replace(Lt,/\f/g,"")),yt>0&&strlen(Lt)-mt&&append(yt>32?declaration(Lt+";",N,t,mt-1,nt):declaration(replace(Lt," ","")+";",N,t,mt-2,nt),nt);break;case 59:Lt+=";";default:if(append(Nt=ruleset(Lt,u,t,ot,ft,me,Ye,Pt,Bt=[],Ot=[],mt,pe),pe),It===123)if(ft===0)parse$2(Lt,u,Nt,Nt,Bt,pe,mt,Ye,Ot);else switch(bt===99&&charat(Lt,3)===110?100:bt){case 100:case 108:case 109:case 115:parse$2(de,Nt,Nt,N&&append(ruleset(de,Nt,Nt,0,0,me,Ye,Pt,me,Bt=[],mt,Ot),Ot),me,Ot,mt,Ye,N?Bt:Ot);break;default:parse$2(Lt,Nt,Nt,Nt,[""],Ot,0,Ye,Ot)}}ot=ft=yt=0,Ct=At=1,Pt=Lt="",mt=Le;break;case 58:mt=1+strlen(Lt),yt=_t;default:if(Ct<1){if(It==123)--Ct;else if(It==125&&Ct++==0&&prev$1()==125)continue}switch(Lt+=from(It),It*Ct){case 38:At=ft>0?1:(Lt+="\f",-1);break;case 44:Ye[ot++]=(strlen(Lt)-1)*At,At=1;break;case 64:peek()===45&&(Lt+=delimit(next())),bt=peek(),ft=mt=strlen(Pt=Lt+=identifier(caret())),It++;break;case 45:_t===45&&strlen(Lt)==2&&(Ct=0)}}return pe}function ruleset(de,u,t,N,me,pe,Le,Ye,nt,ot,ft,mt){for(var bt=me-1,yt=me===0?pe:[""],_t=sizeof(yt),Ct=0,Tt=0,At=0;Ct<N;++Ct)for(var It=0,Pt=substr(de,bt+1,bt=abs(Tt=Le[Ct])),Bt=de;It<_t;++It)(Bt=trim$1(Tt>0?yt[It]+" "+Pt:replace(Pt,/&\f/g,yt[It])))&&(nt[At++]=Bt);return node(de,u,t,me===0?RULESET:Ye,nt,ot,ft,mt)}function comment(de,u,t,N){return node(de,u,t,COMMENT,from(char()),substr(de,2,-2),0,N)}function declaration(de,u,t,N,me){return node(de,u,t,DECLARATION,substr(de,0,N),substr(de,N+1,-1),N,me)}function prefix(de,u,t){switch(hash(de,u)){case 5103:return WEBKIT+"print-"+de+de;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+de+de;case 4789:return MOZ+de+de;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+de+MOZ+de+MS+de+de;case 5936:switch(charat(de,u+11)){case 114:return WEBKIT+de+MS+replace(de,/[svh]\w+-[tblr]{2}/,"tb")+de;case 108:return WEBKIT+de+MS+replace(de,/[svh]\w+-[tblr]{2}/,"tb-rl")+de;case 45:return WEBKIT+de+MS+replace(de,/[svh]\w+-[tblr]{2}/,"lr")+de}case 6828:case 4268:case 2903:return WEBKIT+de+MS+de+de;case 6165:return WEBKIT+de+MS+"flex-"+de+de;case 5187:return WEBKIT+de+replace(de,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+de;case 5443:return WEBKIT+de+MS+"flex-item-"+replace(de,/flex-|-self/g,"")+(match(de,/flex-|baseline/)?"":MS+"grid-row-"+replace(de,/flex-|-self/g,""))+de;case 4675:return WEBKIT+de+MS+"flex-line-pack"+replace(de,/align-content|flex-|-self/g,"")+de;case 5548:return WEBKIT+de+MS+replace(de,"shrink","negative")+de;case 5292:return WEBKIT+de+MS+replace(de,"basis","preferred-size")+de;case 6060:return WEBKIT+"box-"+replace(de,"-grow","")+WEBKIT+de+MS+replace(de,"grow","positive")+de;case 4554:return WEBKIT+replace(de,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+de;case 6187:return replace(replace(replace(de,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),de,"")+de;case 5495:case 3959:return replace(de,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(de,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+de+de;case 4200:if(!match(de,/flex-|baseline/))return MS+"grid-column-align"+substr(de,u)+de;break;case 2592:case 3360:return MS+replace(de,"template-","")+de;case 4384:case 3616:return t&&t.some(function(N,me){return u=me,match(N.props,/grid-\w+-end/)})?~indexof(de+(t=t[u].value),"span",0)?de:MS+replace(de,"-start","")+de+MS+"grid-row-span:"+(~indexof(t,"span",0)?match(t,/\d+/):+match(t,/\d+/)-+match(de,/\d+/))+";":MS+replace(de,"-start","")+de;case 4896:case 4128:return t&&t.some(function(N){return match(N.props,/grid-\w+-start/)})?de:MS+replace(replace(de,"-end","-span"),"span ","")+de;case 4095:case 3583:case 4068:case 2532:return replace(de,/(.+)-inline(.+)/,WEBKIT+"$1$2")+de;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(de)-1-u>6)switch(charat(de,u+1)){case 109:if(charat(de,u+4)!==45)break;case 102:return replace(de,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(de,u+3)==108?"$3":"$2-$3"))+de;case 115:return~indexof(de,"stretch",0)?prefix(replace(de,"stretch","fill-available"),u,t)+de:de}break;case 5152:case 5920:return replace(de,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(N,me,pe,Le,Ye,nt,ot){return MS+me+":"+pe+ot+(Le?MS+me+"-span:"+(Ye?nt:+nt-+pe)+ot:"")+de});case 4949:if(charat(de,u+6)===121)return replace(de,":",":"+WEBKIT)+de;break;case 6444:switch(charat(de,charat(de,14)===45?18:11)){case 120:return replace(de,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(de,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+de;case 100:return replace(de,":",":"+MS)+de}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(de,"scroll-","scroll-snap-")+de}return de}function serialize(de,u){for(var t="",N=0;N<de.length;N++)t+=u(de[N],N,de,u)||"";return t}function stringify(de,u,t,N){switch(de.type){case LAYER:if(de.children.length)break;case IMPORT:case DECLARATION:return de.return=de.return||de.value;case COMMENT:return"";case KEYFRAMES:return de.return=de.value+"{"+serialize(de.children,N)+"}";case RULESET:if(!strlen(de.value=de.props.join(",")))return""}return strlen(t=serialize(de.children,N))?de.return=de.value+"{"+t+"}":""}function middleware(de){var u=sizeof(de);return function(t,N,me,pe){for(var Le="",Ye=0;Ye<u;Ye++)Le+=de[Ye](t,N,me,pe)||"";return Le}}function rulesheet(de){return function(u){u.root||(u=u.return)&&de(u)}}function prefixer(de,u,t,N){if(de.length>-1&&!de.return)switch(de.type){case DECLARATION:de.return=prefix(de.value,de.length,t);return;case KEYFRAMES:return serialize([copy(de,{value:replace(de.value,"@","@"+WEBKIT)})],N);case RULESET:if(de.length)return combine(t=de.props,function(me){switch(match(me,N=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(de,{props:[replace(me,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(de,{props:[me]})),assign(de,{props:filter(t,N)});break;case"::placeholder":lift(copy(de,{props:[replace(me,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(de,{props:[replace(me,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(de,{props:[replace(me,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(de,{props:[me]})),assign(de,{props:filter(t,N)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f$2=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m$4="active",y$1="data-styled-version",v$1="6.1.17",g=`/*!sc*/
`,S$1=typeof window<"u"&&"HTMLElement"in window,w$1=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_$1=Object.freeze([]),C$2=Object.freeze({});function I(de,u,t){return t===void 0&&(t=C$2),de.theme!==t.theme&&de.theme||u||t.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O$1=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(de){return de.replace(O$1,"-").replace(D,"")}var T=/(a)(d)/gi,k=52,j=function(de){return String.fromCharCode(de+(de>25?39:97))};function x$1(de){var u,t="";for(u=Math.abs(de);u>k;u=u/k|0)t=j(u%k)+t;return(j(u%k)+t).replace(T,"$1-$2")}var V,F$1=5381,M=function(de,u){for(var t=u.length;t;)de=33*de^u.charCodeAt(--t);return de},z=function(de){return M(F$1,de)};function $(de){return x$1(z(de)>>>0)}function B(de){return de.displayName||de.name||"Component"}function L$1(de){return typeof de=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(de){return("type"in(u=de)&&u.type.$$typeof)===Y?U:"$$typeof"in de?J[de.$$typeof]:q;var u}var Z=Object.defineProperty,K$1=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(de,u,t){if(typeof u!="string"){if(ne){var N=te(u);N&&N!==ne&&oe(de,N,t)}var me=K$1(u);Q&&(me=me.concat(Q(u)));for(var pe=X(de),Le=X(u),Ye=0;Ye<me.length;++Ye){var nt=me[Ye];if(!(nt in H||t&&t[nt]||Le&&nt in Le||pe&&nt in pe)){var ot=ee(u,nt);try{Z(de,nt,ot)}catch{}}}}return de}function re$1(de){return typeof de=="function"}function se(de){return typeof de=="object"&&"styledComponentId"in de}function ie(de,u){return de&&u?"".concat(de," ").concat(u):de||u||""}function ae(de,u){if(de.length===0)return"";for(var t=de[0],N=1;N<de.length;N++)t+=de[N];return t}function ce(de){return de!==null&&typeof de=="object"&&de.constructor.name===Object.name&&!("props"in de&&de.$$typeof)}function le(de,u,t){if(t===void 0&&(t=!1),!t&&!ce(de)&&!Array.isArray(de))return u;if(Array.isArray(u))for(var N=0;N<u.length;N++)de[N]=le(de[N],u[N]);else if(ce(u))for(var N in u)de[N]=le(de[N],u[N]);return de}function ue(de,u){Object.defineProperty(de,"toString",{value:u})}function he(de){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(de," for more information.").concat(u.length>0?" Args: ".concat(u.join(", ")):""))}var fe=function(){function de(u){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=u}return de.prototype.indexOfGroup=function(u){for(var t=0,N=0;N<u;N++)t+=this.groupSizes[N];return t},de.prototype.insertRules=function(u,t){if(u>=this.groupSizes.length){for(var N=this.groupSizes,me=N.length,pe=me;u>=pe;)if((pe<<=1)<0)throw he(16,"".concat(u));this.groupSizes=new Uint32Array(pe),this.groupSizes.set(N),this.length=pe;for(var Le=me;Le<pe;Le++)this.groupSizes[Le]=0}for(var Ye=this.indexOfGroup(u+1),nt=(Le=0,t.length);Le<nt;Le++)this.tag.insertRule(Ye,t[Le])&&(this.groupSizes[u]++,Ye++)},de.prototype.clearGroup=function(u){if(u<this.length){var t=this.groupSizes[u],N=this.indexOfGroup(u),me=N+t;this.groupSizes[u]=0;for(var pe=N;pe<me;pe++)this.tag.deleteRule(N)}},de.prototype.getGroup=function(u){var t="";if(u>=this.length||this.groupSizes[u]===0)return t;for(var N=this.groupSizes[u],me=this.indexOfGroup(u),pe=me+N,Le=me;Le<pe;Le++)t+="".concat(this.tag.getRule(Le)).concat(g);return t},de}(),ye=new Map,ve=new Map,ge=1,Se=function(de){if(ye.has(de))return ye.get(de);for(;ve.has(ge);)ge++;var u=ge++;return ye.set(de,u),ve.set(u,de),u},we=function(de,u){ge=u+1,ye.set(de,u),ve.set(u,de)},be="style[".concat(f$2,"][").concat(y$1,'="').concat(v$1,'"]'),Ee=new RegExp("^".concat(f$2,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(de,u,t){for(var N,me=t.split(","),pe=0,Le=me.length;pe<Le;pe++)(N=me[pe])&&de.registerName(u,N)},Pe=function(de,u){for(var t,N=((t=u.textContent)!==null&&t!==void 0?t:"").split(g),me=[],pe=0,Le=N.length;pe<Le;pe++){var Ye=N[pe].trim();if(Ye){var nt=Ye.match(Ee);if(nt){var ot=0|parseInt(nt[1],10),ft=nt[2];ot!==0&&(we(ft,ot),Ne(de,ft,nt[3]),de.getTag().insertRules(ot,me)),me.length=0}else me.push(Ye)}}},_e=function(de){for(var u=document.querySelectorAll(be),t=0,N=u.length;t<N;t++){var me=u[t];me&&me.getAttribute(f$2)!==m$4&&(Pe(de,me),me.parentNode&&me.parentNode.removeChild(me))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(de){var u=document.head,t=de||u,N=document.createElement("style"),me=function(Ye){var nt=Array.from(Ye.querySelectorAll("style[".concat(f$2,"]")));return nt[nt.length-1]}(t),pe=me!==void 0?me.nextSibling:null;N.setAttribute(f$2,m$4),N.setAttribute(y$1,v$1);var Le=Ce();return Le&&N.setAttribute("nonce",Le),t.insertBefore(N,pe),N},Ae=function(){function de(u){this.element=Ie(u),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var N=document.styleSheets,me=0,pe=N.length;me<pe;me++){var Le=N[me];if(Le.ownerNode===t)return Le}throw he(17)}(this.element),this.length=0}return de.prototype.insertRule=function(u,t){try{return this.sheet.insertRule(t,u),this.length++,!0}catch{return!1}},de.prototype.deleteRule=function(u){this.sheet.deleteRule(u),this.length--},de.prototype.getRule=function(u){var t=this.sheet.cssRules[u];return t&&t.cssText?t.cssText:""},de}(),Oe=function(){function de(u){this.element=Ie(u),this.nodes=this.element.childNodes,this.length=0}return de.prototype.insertRule=function(u,t){if(u<=this.length&&u>=0){var N=document.createTextNode(t);return this.element.insertBefore(N,this.nodes[u]||null),this.length++,!0}return!1},de.prototype.deleteRule=function(u){this.element.removeChild(this.nodes[u]),this.length--},de.prototype.getRule=function(u){return u<this.length?this.nodes[u].textContent:""},de}(),De=function(){function de(u){this.rules=[],this.length=0}return de.prototype.insertRule=function(u,t){return u<=this.length&&(this.rules.splice(u,0,t),this.length++,!0)},de.prototype.deleteRule=function(u){this.rules.splice(u,1),this.length--},de.prototype.getRule=function(u){return u<this.length?this.rules[u]:""},de}(),Re=S$1,Te={isServer:!S$1,useCSSOMInjection:!w$1},ke=function(){function de(u,t,N){u===void 0&&(u=C$2),t===void 0&&(t={});var me=this;this.options=__assign(__assign({},Te),u),this.gs=t,this.names=new Map(N),this.server=!!u.isServer,!this.server&&S$1&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(pe){for(var Le=pe.getTag(),Ye=Le.length,nt="",ot=function(mt){var bt=function(At){return ve.get(At)}(mt);if(bt===void 0)return"continue";var yt=pe.names.get(bt),_t=Le.getGroup(mt);if(yt===void 0||!yt.size||_t.length===0)return"continue";var Ct="".concat(f$2,".g").concat(mt,'[id="').concat(bt,'"]'),Tt="";yt!==void 0&&yt.forEach(function(At){At.length>0&&(Tt+="".concat(At,","))}),nt+="".concat(_t).concat(Ct,'{content:"').concat(Tt,'"}').concat(g)},ft=0;ft<Ye;ft++)ot(ft);return nt}(me)})}return de.registerId=function(u){return Se(u)},de.prototype.rehydrate=function(){!this.server&&S$1&&_e(this)},de.prototype.reconstructWithOptions=function(u,t){return t===void 0&&(t=!0),new de(__assign(__assign({},this.options),u),this.gs,t&&this.names||void 0)},de.prototype.allocateGSInstance=function(u){return this.gs[u]=(this.gs[u]||0)+1},de.prototype.getTag=function(){return this.tag||(this.tag=(u=function(t){var N=t.useCSSOMInjection,me=t.target;return t.isServer?new De(me):N?new Ae(me):new Oe(me)}(this.options),new fe(u)));var u},de.prototype.hasNameForId=function(u,t){return this.names.has(u)&&this.names.get(u).has(t)},de.prototype.registerName=function(u,t){if(Se(u),this.names.has(u))this.names.get(u).add(t);else{var N=new Set;N.add(t),this.names.set(u,N)}},de.prototype.insertRules=function(u,t,N){this.registerName(u,t),this.getTag().insertRules(Se(u),N)},de.prototype.clearNames=function(u){this.names.has(u)&&this.names.get(u).clear()},de.prototype.clearRules=function(u){this.getTag().clearGroup(Se(u)),this.clearNames(u)},de.prototype.clearTag=function(){this.tag=void 0},de}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(de,u){return de.map(function(t){return t.type==="rule"&&(t.value="".concat(u," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(u," ")),t.props=t.props.map(function(N){return"".concat(u," ").concat(N)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Ve(t.children,u)),t})}function Fe(de){var u,t,N,me=C$2,pe=me.options,Le=pe===void 0?C$2:pe,Ye=me.plugins,nt=Ye===void 0?_$1:Ye,ot=function(bt,yt,_t){return _t.startsWith(t)&&_t.endsWith(t)&&_t.replaceAll(t,"").length>0?".".concat(u):bt},ft=nt.slice();ft.push(function(bt){bt.type===RULESET&&bt.value.includes("&")&&(bt.props[0]=bt.props[0].replace(je,t).replace(N,ot))}),Le.prefix&&ft.push(prefixer),ft.push(stringify);var mt=function(bt,yt,_t,Ct){yt===void 0&&(yt=""),_t===void 0&&(_t=""),Ct===void 0&&(Ct="&"),u=Ct,t=yt,N=new RegExp("\\".concat(t,"\\b"),"g");var Tt=bt.replace(xe,""),At=compile(_t||yt?"".concat(_t," ").concat(yt," { ").concat(Tt," }"):Tt);Le.namespace&&(At=Ve(At,Le.namespace));var It=[];return serialize(At,middleware(ft.concat(rulesheet(function(Pt){return It.push(Pt)})))),It};return mt.hash=nt.length?nt.reduce(function(bt,yt){return yt.name||he(15),M(bt,yt.name)},F$1).toString():"",mt}var Me=new ke,ze=Fe(),$e=React.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;React.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function de(u,t){var N=this;this.inject=function(me,pe){pe===void 0&&(pe=ze);var Le=N.name+pe.hash;me.hasNameForId(N.id,Le)||me.insertRules(N.id,Le,pe(N.rules,Le,"@keyframes"))},this.name=u,this.id="sc-keyframes-".concat(u),this.rules=t,ue(this,function(){throw he(12,String(N.name))})}return de.prototype.getName=function(u){return u===void 0&&(u=ze),this.name+u.hash},de}(),qe=function(de){return de>="A"&&de<="Z"};function He(de){for(var u="",t=0;t<de.length;t++){var N=de[t];if(t===1&&N==="-"&&de[0]==="-")return de;qe(N)?u+="-"+N.toLowerCase():u+=N}return u.startsWith("ms-")?"-"+u:u}var Ue=function(de){return de==null||de===!1||de===""},Je=function(de){var u,t,N=[];for(var me in de){var pe=de[me];de.hasOwnProperty(me)&&!Ue(pe)&&(Array.isArray(pe)&&pe.isCss||re$1(pe)?N.push("".concat(He(me),":"),pe,";"):ce(pe)?N.push.apply(N,__spreadArray(__spreadArray(["".concat(me," {")],Je(pe),!1),["}"],!1)):N.push("".concat(He(me),": ").concat((u=me,(t=pe)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||u in unitlessKeys||u.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return N};function Xe(de,u,t,N){if(Ue(de))return[];if(se(de))return[".".concat(de.styledComponentId)];if(re$1(de)){if(!re$1(pe=de)||pe.prototype&&pe.prototype.isReactComponent||!u)return[de];var me=de(u);return Xe(me,u,t,N)}var pe;return de instanceof We?t?(de.inject(t,N),[de.getName(N)]):[de]:ce(de)?Je(de):Array.isArray(de)?Array.prototype.concat.apply(_$1,de.map(function(Le){return Xe(Le,u,t,N)})):[de.toString()]}function Ze(de){for(var u=0;u<de.length;u+=1){var t=de[u];if(re$1(t)&&!se(t))return!1}return!0}var Ke=z(v$1),Qe=function(){function de(u,t,N){this.rules=u,this.staticRulesId="",this.isStatic=(N===void 0||N.isStatic)&&Ze(u),this.componentId=t,this.baseHash=M(Ke,t),this.baseStyle=N,ke.registerId(t)}return de.prototype.generateAndInjectStyles=function(u,t,N){var me=this.baseStyle?this.baseStyle.generateAndInjectStyles(u,t,N):"";if(this.isStatic&&!N.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))me=ie(me,this.staticRulesId);else{var pe=ae(Xe(this.rules,u,t,N)),Le=x$1(M(this.baseHash,pe)>>>0);if(!t.hasNameForId(this.componentId,Le)){var Ye=N(pe,".".concat(Le),void 0,this.componentId);t.insertRules(this.componentId,Le,Ye)}me=ie(me,Le),this.staticRulesId=Le}else{for(var nt=M(this.baseHash,N.hash),ot="",ft=0;ft<this.rules.length;ft++){var mt=this.rules[ft];if(typeof mt=="string")ot+=mt;else if(mt){var bt=ae(Xe(mt,u,t,N));nt=M(nt,bt+ft),ot+=bt}}if(ot){var yt=x$1(nt>>>0);t.hasNameForId(this.componentId,yt)||t.insertRules(this.componentId,yt,N(ot,".".concat(yt),void 0,this.componentId)),me=ie(me,yt)}}return me},de}(),et=React.createContext(void 0);et.Consumer;var rt={};function it(de,u,t){var N=se(de),me=de,pe=!L$1(de),Le=u.attrs,Ye=Le===void 0?_$1:Le,nt=u.componentId,ot=nt===void 0?function(Bt,Ot){var Nt=typeof Bt!="string"?"sc":R(Bt);rt[Nt]=(rt[Nt]||0)+1;var Lt="".concat(Nt,"-").concat($(v$1+Nt+rt[Nt]));return Ot?"".concat(Ot,"-").concat(Lt):Lt}(u.displayName,u.parentComponentId):nt,ft=u.displayName,mt=ft===void 0?function(Bt){return L$1(Bt)?"styled.".concat(Bt):"Styled(".concat(B(Bt),")")}(de):ft,bt=u.displayName&&u.componentId?"".concat(R(u.displayName),"-").concat(u.componentId):u.componentId||ot,yt=N&&me.attrs?me.attrs.concat(Ye).filter(Boolean):Ye,_t=u.shouldForwardProp;if(N&&me.shouldForwardProp){var Ct=me.shouldForwardProp;if(u.shouldForwardProp){var Tt=u.shouldForwardProp;_t=function(Bt,Ot){return Ct(Bt,Ot)&&Tt(Bt,Ot)}}else _t=Ct}var At=new Qe(t,bt,N?me.componentStyle:void 0);function It(Bt,Ot){return function(Nt,Lt,Et){var kt=Nt.attrs,St=Nt.componentStyle,$t=Nt.defaultProps,zt=Nt.foldedComponentIds,Ut=Nt.styledComponentId,qt=Nt.target,Zt=React.useContext(et),Dt=Ge(),jt=Nt.shouldForwardProp||Dt.shouldForwardProp,en=I(Lt,Zt,$t)||C$2,Kt=function(cn,un,An){for(var yn,Rn=__assign(__assign({},un),{className:void 0,theme:An}),wn=0;wn<cn.length;wn+=1){var _n=re$1(yn=cn[wn])?yn(Rn):yn;for(var xn in _n)Rn[xn]=xn==="className"?ie(Rn[xn],_n[xn]):xn==="style"?__assign(__assign({},Rn[xn]),_n[xn]):_n[xn]}return un.className&&(Rn.className=ie(Rn.className,un.className)),Rn}(kt,Lt,en),Vt=Kt.as||qt,Jt={};for(var ln in Kt)Kt[ln]===void 0||ln[0]==="$"||ln==="as"||ln==="theme"&&Kt.theme===en||(ln==="forwardedAs"?Jt.as=Kt.forwardedAs:jt&&!jt(ln,Vt)||(Jt[ln]=Kt[ln]));var tn=function(cn,un){var An=Ge(),yn=cn.generateAndInjectStyles(un,An.styleSheet,An.stylis);return yn}(St,Kt),an=ie(zt,Ut);return tn&&(an+=" "+tn),Kt.className&&(an+=" "+Kt.className),Jt[L$1(Vt)&&!A.has(Vt)?"class":"className"]=an,Et&&(Jt.ref=Et),reactExports.createElement(Vt,Jt)}(Pt,Bt,Ot)}It.displayName=mt;var Pt=React.forwardRef(It);return Pt.attrs=yt,Pt.componentStyle=At,Pt.displayName=mt,Pt.shouldForwardProp=_t,Pt.foldedComponentIds=N?ie(me.foldedComponentIds,me.styledComponentId):"",Pt.styledComponentId=bt,Pt.target=N?me.target:de,Object.defineProperty(Pt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Bt){this._foldedDefaultProps=N?function(Ot){for(var Nt=[],Lt=1;Lt<arguments.length;Lt++)Nt[Lt-1]=arguments[Lt];for(var Et=0,kt=Nt;Et<kt.length;Et++)le(Ot,kt[Et],!0);return Ot}({},me.defaultProps,Bt):Bt}}),ue(Pt,function(){return".".concat(Pt.styledComponentId)}),pe&&oe(Pt,de,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Pt}function at(de,u){for(var t=[de[0]],N=0,me=u.length;N<me;N+=1)t.push(u[N],de[N+1]);return t}var ct=function(de){return Object.assign(de,{isCss:!0})};function lt(de){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];if(re$1(de)||ce(de))return ct(Xe(at(_$1,__spreadArray([de],u,!0))));var N=de;return u.length===0&&N.length===1&&typeof N[0]=="string"?Xe(N):ct(Xe(at(N,u)))}function ut(de,u,t){if(t===void 0&&(t=C$2),!u)throw he(1,u);var N=function(me){for(var pe=[],Le=1;Le<arguments.length;Le++)pe[Le-1]=arguments[Le];return de(u,t,lt.apply(void 0,__spreadArray([me],pe,!1)))};return N.attrs=function(me){return ut(de,u,__assign(__assign({},t),{attrs:Array.prototype.concat(t.attrs,me).filter(Boolean)}))},N.withConfig=function(me){return ut(de,u,__assign(__assign({},t),me))},N}var pt=function(de){return ut(it,de)},dt=pt;A.forEach(function(de){dt[de]=pt(de)});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(de,u){if(de==null)return{};var t=_objectWithoutPropertiesLoose(de,u),N,me;if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(de);for(me=0;me<pe.length;me++)N=pe[me],!(u.indexOf(N)>=0)&&Object.prototype.propertyIsEnumerable.call(de,N)&&(t[N]=de[N])}return t}function _objectWithoutPropertiesLoose(de,u){if(de==null)return{};var t={};for(var N in de)if(Object.prototype.hasOwnProperty.call(de,N)){if(u.indexOf(N)>=0)continue;t[N]=de[N]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(de){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var N in t)Object.prototype.hasOwnProperty.call(t,N)&&(de[N]=t[N])}return de},_extends.apply(this,arguments)}function ownKeys(de,u){var t=Object.keys(de);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(de);u&&(N=N.filter(function(me){return Object.getOwnPropertyDescriptor(de,me).enumerable})),t.push.apply(t,N)}return t}function _objectSpread(de){for(var u=1;u<arguments.length;u++){var t=arguments[u]!=null?arguments[u]:{};u%2?ownKeys(Object(t),!0).forEach(function(N){_defineProperty(de,N,t[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(N){Object.defineProperty(de,N,Object.getOwnPropertyDescriptor(t,N))})}return de}function _defineProperty(de,u,t){return u=_toPropertyKey(u),u in de?Object.defineProperty(de,u,{value:t,enumerable:!0,configurable:!0,writable:!0}):de[u]=t,de}function _toPropertyKey(de){var u=_toPrimitive(de,"string");return typeof u=="symbol"?u:u+""}function _toPrimitive(de,u){if(typeof de!="object"||!de)return de;var t=de[Symbol.toPrimitive];if(t!==void 0){var N=t.call(de,u);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(de)}function Tree2Element(de){return de&&de.map((u,t)=>React.createElement(u.tag,_objectSpread({key:t},u.attr),Tree2Element(u.child)))}function GenIcon(de){return u=>React.createElement(IconBase,_extends({attr:_objectSpread({},de.attr)},u),Tree2Element(de.child))}function IconBase(de){var u=t=>{var{attr:N,size:me,title:pe}=de,Le=_objectWithoutProperties(de,_excluded),Ye=me||t.size||"1em",nt;return t.className&&(nt=t.className),de.className&&(nt=(nt?nt+" ":"")+de.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,N,Le,{className:nt,style:_objectSpread(_objectSpread({color:de.color||t.color},t.style),de.style),height:Ye,width:Ye,xmlns:"http://www.w3.org/2000/svg"}),pe&&React.createElement("title",null,pe),de.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>u(t)):u(DefaultContext)}function RiTextBlock(de){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 2V5H3V4H5V9H3.5V11H8.5V9H7V4H9V5H11V2H1ZM21 3H14V5H20V19H4V14H2V20C2 20.5523 2.44772 21 3 21H21C21.5523 21 22 20.5523 22 20V4C22 3.44772 21.5523 3 21 3Z"},child:[]}]})(de)}const StyledAppBar=dt(AppBar)`
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
  overflow: hidden;
  height: 63px;
  background-color: white !important;
`,StyledLogo=dt.img`
  vertical-align: middle;
  border-style: none;
  height: 27.57px;
  width: 151px;
  margin-top: -4px;
  margin-left: 20px;
  margin-right: 1rem;
`,StyledTypography=dt(Typography)`
  font-size: 18px !important;
  letter-spacing: 0 !important;
  line-height: 31px !important;
  color: #1565c0;
  font-weight: bold !important;
`,Navbar=()=>jsxRuntimeExports.jsx(StyledAppBar,{position:"static",children:jsxRuntimeExports.jsx("div",{style:{marginRight:"2rem"},children:jsxRuntimeExports.jsxs(Toolbar,{style:{margin:"0",padding:"0",display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx(StyledLogo,{src:NovartisIcon,alt:"novartis",style:{cursor:"pointer"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[jsxRuntimeExports.jsx(RiTextBlock,{size:25,color:"#1565c0"}),jsxRuntimeExports.jsx(StyledTypography,{variant:"h6",children:"Editor"})]})]})})});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createDefer(){const de={resolve:null,promise:null};return de.promise=new Promise(u=>{de.resolve=u}),de}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function once(de){let u=null;return(...t)=>(u||(u={current:de(...t)}),u.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS$1=new Array(256).fill("").map((de,u)=>("0"+u.toString(16)).slice(-2));function uid$1(){const[de,u,t,N]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS$1[de>>0&255]+HEX_NUMBERS$1[de>>8&255]+HEX_NUMBERS$1[de>>16&255]+HEX_NUMBERS$1[de>>24&255]+HEX_NUMBERS$1[u>>0&255]+HEX_NUMBERS$1[u>>8&255]+HEX_NUMBERS$1[u>>16&255]+HEX_NUMBERS$1[u>>24&255]+HEX_NUMBERS$1[t>>0&255]+HEX_NUMBERS$1[t>>8&255]+HEX_NUMBERS$1[t>>16&255]+HEX_NUMBERS$1[t>>24&255]+HEX_NUMBERS$1[N>>0&255]+HEX_NUMBERS$1[N>>8&255]+HEX_NUMBERS$1[N>>16&255]+HEX_NUMBERS$1[N>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendExtraPluginsToEditorConfig(de,u){const t=de.extraPlugins||[];return{...de,extraPlugins:[...t,...u.filter(N=>!t.includes(N))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isSemanticVersion(de){return!!de&&/^\d+\.\d+\.\d+/.test(de)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKCdnTestingVersion(de){return de?["nightly","alpha","internal","nightly-","staging"].some(u=>de.includes(u)):!1}function isCKCdnVersion(de){return isSemanticVersion(de)||isCKCdnTestingVersion(de)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function destructureSemanticVersion(de){if(!isSemanticVersion(de))throw new Error(`Invalid semantic version: ${de||"<blank>"}.`);const[u,t,N]=de.split(".");return{major:Number.parseInt(u,10),minor:Number.parseInt(t,10),patch:Number.parseInt(N,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLicenseVersionFromEditorVersion(de){if(isCKCdnTestingVersion(de))return 3;const{major:u}=destructureSemanticVersion(de);switch(!0){case u>=44:return 3;case u>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getCKBaseBundleInstallationInfo(){const{CKEDITOR_VERSION:de,CKEDITOR:u}=window;return isCKCdnVersion(de)?{source:u?"cdn":"npm",version:de}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSupportedLicenseVersionInstallationInfo(){const de=getCKBaseBundleInstallationInfo();return de?getLicenseVersionFromEditorVersion(de.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKEditorFreeLicense(de,u){switch(u||(u=getSupportedLicenseVersionInstallationInfo()||void 0),u){case 1:case 2:return de===void 0;case 3:return de==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createIntegrationUsageDataPlugin(de,u){return function(N){isCKEditorFreeLicense(N.config.get("licenseKey"))||N.on("collectUsageData",(me,{setUsageData:pe})=>{pe(`integration.${de}`,u)})}}var __defProp=Object.defineProperty,__defNormalProp=(de,u,t)=>u in de?__defProp(de,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):de[u]=t,__publicField=(de,u,t)=>__defNormalProp(de,typeof u!="symbol"?u+"":u,t);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const _LifeCycleElementSemaphore=class hm{constructor(u,t){__publicField(this,"_lifecycle"),__publicField(this,"_element"),__publicField(this,"_releaseLock",null),__publicField(this,"_value",null),__publicField(this,"_afterMountCallbacks",[]),__publicField(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),__publicField(this,"release",once(()=>{const{_releaseLock:N,_state:me,_element:pe,_lifecycle:Le}=this;me.mountingInProgress?me.mountingInProgress.then(()=>Le.unmount({element:pe,mountResult:this.value})).catch(Ye=>{console.error("Semaphore unmounting error:",Ye)}).then(N.resolve).then(()=>{this._value=null}):(me.destroyedBeforeInitialization=!0,N.resolve())})),this._element=u,this._lifecycle=t,this._lock()}get value(){return this._value}unsafeSetValue(u){this._value=u,this._afterMountCallbacks.forEach(t=>t(u)),this._afterMountCallbacks=[]}runAfterMount(u){const{_value:t,_afterMountCallbacks:N}=this;t?u(t):N.push(u)}_lock(){const{_semaphores:u}=hm,{_state:t,_element:N,_lifecycle:me}=this,pe=u.get(N)||Promise.resolve(null),Le=createDefer();this._releaseLock=Le;const Ye=pe.then(()=>t.destroyedBeforeInitialization?Promise.resolve(void 0):(t.mountingInProgress=me.mount().then(nt=>(nt&&this.unsafeSetValue(nt),nt)),t.mountingInProgress)).then(async nt=>{nt&&me.afterMount&&await me.afterMount({element:N,mountResult:nt})}).then(()=>Le.promise).catch(nt=>{console.error("Semaphore mounting error:",nt)}).then(()=>{u.get(N)===Ye&&u.delete(N)});u.set(N,Ye)}};__publicField(_LifeCycleElementSemaphore,"_semaphores",new Map);let LifeCycleElementSemaphore=_LifeCycleElementSemaphore;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactContextMetadataKey="$__CKEditorReactContextMetadata";function withCKEditorReactContextMetadata(de,u){return{...u,[ReactContextMetadataKey]:de}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ContextWatchdogContext=React.createContext(null),isContextWatchdogValue=de=>!!de&&typeof de=="object"&&"status"in de&&["initializing","initialized","error"].includes(de.status),isContextWatchdogValueWithStatus=de=>u=>isContextWatchdogValue(u)&&u.status===de,isContextWatchdogInitializing=isContextWatchdogValueWithStatus("initializing"),isContextWatchdogReadyToUse=de=>isContextWatchdogValueWithStatus("initialized")(de)&&de.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactIntegrationUsageDataPlugin=createIntegrationUsageDataPlugin("react",{version:"9.5.0",frameworkVersion:React.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendAllIntegrationPluginsToConfig(de){return isCKEditorFreeLicense(de.licenseKey)?de:appendExtraPluginsToEditorConfig(de,[ReactIntegrationUsageDataPlugin])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const REACT_INTEGRATION_READ_ONLY_LOCK_ID$1="Lock from React integration (@ckeditor/ckeditor5-react)";class CKEditor extends React.Component{constructor(u){super(u),__publicField(this,"domContainer",React.createRef()),__publicField(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:u}=window;if(!u)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[t]=u.split(".").map(Number);t>=42||u.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:u}=this;return u?u.value:null}get watchdog(){const{_semaphoreValue:u}=this;return u?u.watchdog:null}get editor(){const{_semaphoreValue:u}=this;return u?u.instance:null}shouldComponentUpdate(u){const{props:t,editorSemaphore:N}=this;return u.id!==t.id||u.disableWatchdog!==t.disableWatchdog?!0:(N&&(N.runAfterMount(({instance:me})=>{this._shouldUpdateEditorData(t,u,me)&&me.data.set(u.data)}),"disabled"in u&&N.runAfterMount(({instance:me})=>{u.disabled?me.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1):me.disableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)})),!1)}componentDidMount(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new LifeCycleElementSemaphore(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:u})=>{const{onReady:t}=this.props;t&&this.domContainer.current!==null&&t(u.instance)},unmount:async({element:u,mountResult:t})=>{const{onAfterDestroy:N}=this.props;try{await this._destroyEditor(t),u.innerHTML=""}finally{N&&N(t.instance)}}})}render(){return React.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const u=isContextWatchdogReadyToUse(this.context)?new EditorWatchdogAdapter(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),t={current:0};return u.setCreator(async(N,me)=>{var pe;const{editorSemaphore:Le}=this,{onAfterDestroy:Ye}=this.props;t.current>0&&Ye&&((pe=Le==null?void 0:Le.value)!=null&&pe.instance)&&Ye(Le.value.instance);const nt=await this._createEditor(N,me);return Le&&t.current>0&&(Le.unsafeSetValue({instance:nt,watchdog:u}),setTimeout(()=>{this.props.onReady&&this.props.onReady(u.editor)})),t.current++,nt}),u.on("error",(N,{error:me,causesRestart:pe})=>{(this.props.onError||console.error)(me,{phase:"runtime",willEditorRestart:pe})}),await u.create(this.domContainer.current,this._getConfig()).catch(N=>{(this.props.onError||console.error)(N,{phase:"initialization",willEditorRestart:!1})}),{watchdog:u,instance:u.editor}}_createEditor(u,t){const{contextItemMetadata:N}=this.props;return N&&(t=withCKEditorReactContextMetadata(N,t)),this.props.editor.create(u,appendAllIntegrationPluginsToConfig(t)).then(me=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&me.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)}const pe=me.model.document,Le=me.editing.view.document;return pe.on("change:data",Ye=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(Ye,me)}),Le.on("focus",Ye=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(Ye,me)}),Le.on("blur",Ye=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(Ye,me)}),me})}async _destroyEditor(u){const{watchdog:t,instance:N}=u;return new Promise((me,pe)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(t)return await t.destroy(),me();if(N)return await N.destroy(),me();me()}catch(Le){console.error(Le),pe(Le)}})})}_shouldUpdateEditorData(u,t,N){return!(u.data===t.data||N.data.get()===t.data)}_getConfig(){const u=this.props.config||{};return this.props.data&&u.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...u,initialData:u.initialData||this.props.data||""}}}__publicField(CKEditor,"contextType",ContextWatchdogContext);class EditorWatchdogAdapter{constructor(u){__publicField(this,"_contextWatchdog"),__publicField(this,"_id"),__publicField(this,"_creator"),this._contextWatchdog=u,this._id=uid$1()}setCreator(u){this._creator=u}create(u,t){return this._contextWatchdog.add({sourceElementOrData:u,config:t,creator:this._creator,id:this._id,type:"editor"})}on(u,t){this._contextWatchdog.on("itemError",(N,{itemId:me,error:pe})=>{me===this._id&&t(null,{error:pe,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mergeRefs(...de){return u=>{de.forEach(t=>{typeof t=="function"?t(u):t!=null&&(t.current=u)})}}const EditorEditable=reactExports.memo(reactExports.forwardRef(({id:de,semaphore:u,rootName:t},N)=>{const me=reactExports.useRef(null);return reactExports.useEffect(()=>{let pe,Le;return u.runAfterMount(({instance:Ye})=>{if(!me.current)return;Le=Ye;const{ui:nt,model:ot}=Le,ft=ot.document.getRoot(t);ft&&Le.ui.getEditableElement(t)&&Le.detachEditable(ft),pe=nt.view.createEditable(t,me.current),nt.addEditable(pe),Ye.editing.view.forceRender()}),()=>{if(Le&&Le.state!=="destroyed"&&me.current){const Ye=Le.model.document.getRoot(t);/* istanbul ignore else -- @preserve */Ye&&Le.detachEditable(Ye)}}},[u.revision]),React.createElement("div",{key:u.revision,id:de,ref:mergeRefs(N,me)})}));EditorEditable.displayName="EditorEditable";const EditorToolbarWrapper=reactExports.forwardRef(({editor:de},u)=>{const t=reactExports.useRef(null);return reactExports.useEffect(()=>{const N=t.current;if(!de||!N)return;const me=de.ui.view.toolbar.element;return N.appendChild(me),()=>{N.contains(me)&&N.removeChild(me)}},[de&&de.id]),React.createElement("div",{ref:mergeRefs(t,u)})});EditorToolbarWrapper.displayName="EditorToolbarWrapper";function bind(de,u){return function(){return de.apply(u,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(de=>u=>{const t=toString$2.call(u);return de[t]||(de[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=de=>(de=de.toLowerCase(),u=>kindOf(u)===de),typeOfTest=de=>u=>typeof u===de,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(de){return de!==null&&!isUndefined(de)&&de.constructor!==null&&!isUndefined(de.constructor)&&isFunction$1(de.constructor.isBuffer)&&de.constructor.isBuffer(de)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(de){let u;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?u=ArrayBuffer.isView(de):u=de&&de.buffer&&isArrayBuffer(de.buffer),u}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$3=de=>de!==null&&typeof de=="object",isBoolean=de=>de===!0||de===!1,isPlainObject$1=de=>{if(kindOf(de)!=="object")return!1;const u=getPrototypeOf(de);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in de)&&!(Symbol.iterator in de)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=de=>isObject$3(de)&&isFunction$1(de.pipe),isFormData=de=>{let u;return de&&(typeof FormData=="function"&&de instanceof FormData||isFunction$1(de.append)&&((u=kindOf(de))==="formdata"||u==="object"&&isFunction$1(de.toString)&&de.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=de=>de.trim?de.trim():de.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(de,u,{allOwnKeys:t=!1}={}){if(de===null||typeof de>"u")return;let N,me;if(typeof de!="object"&&(de=[de]),isArray$1(de))for(N=0,me=de.length;N<me;N++)u.call(null,de[N],N,de);else{const pe=t?Object.getOwnPropertyNames(de):Object.keys(de),Le=pe.length;let Ye;for(N=0;N<Le;N++)Ye=pe[N],u.call(null,de[Ye],Ye,de)}}function findKey(de,u){u=u.toLowerCase();const t=Object.keys(de);let N=t.length,me;for(;N-- >0;)if(me=t[N],u===me.toLowerCase())return me;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=de=>!isUndefined(de)&&de!==_global;function merge$1(){const{caseless:de}=isContextDefined(this)&&this||{},u={},t=(N,me)=>{const pe=de&&findKey(u,me)||me;isPlainObject$1(u[pe])&&isPlainObject$1(N)?u[pe]=merge$1(u[pe],N):isPlainObject$1(N)?u[pe]=merge$1({},N):isArray$1(N)?u[pe]=N.slice():u[pe]=N};for(let N=0,me=arguments.length;N<me;N++)arguments[N]&&forEach(arguments[N],t);return u}const extend=(de,u,t,{allOwnKeys:N}={})=>(forEach(u,(me,pe)=>{t&&isFunction$1(me)?de[pe]=bind(me,t):de[pe]=me},{allOwnKeys:N}),de),stripBOM=de=>(de.charCodeAt(0)===65279&&(de=de.slice(1)),de),inherits=(de,u,t,N)=>{de.prototype=Object.create(u.prototype,N),de.prototype.constructor=de,Object.defineProperty(de,"super",{value:u.prototype}),t&&Object.assign(de.prototype,t)},toFlatObject=(de,u,t,N)=>{let me,pe,Le;const Ye={};if(u=u||{},de==null)return u;do{for(me=Object.getOwnPropertyNames(de),pe=me.length;pe-- >0;)Le=me[pe],(!N||N(Le,de,u))&&!Ye[Le]&&(u[Le]=de[Le],Ye[Le]=!0);de=t!==!1&&getPrototypeOf(de)}while(de&&(!t||t(de,u))&&de!==Object.prototype);return u},endsWith=(de,u,t)=>{de=String(de),(t===void 0||t>de.length)&&(t=de.length),t-=u.length;const N=de.indexOf(u,t);return N!==-1&&N===t},toArray$3=de=>{if(!de)return null;if(isArray$1(de))return de;let u=de.length;if(!isNumber(u))return null;const t=new Array(u);for(;u-- >0;)t[u]=de[u];return t},isTypedArray$1=(de=>u=>de&&u instanceof de)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(de,u)=>{const N=(de&&de[Symbol.iterator]).call(de);let me;for(;(me=N.next())&&!me.done;){const pe=me.value;u.call(de,pe[0],pe[1])}},matchAll=(de,u)=>{let t;const N=[];for(;(t=de.exec(u))!==null;)N.push(t);return N},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=de=>de.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,N,me){return N.toUpperCase()+me}),hasOwnProperty$d=(({hasOwnProperty:de})=>(u,t)=>de.call(u,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(de,u)=>{const t=Object.getOwnPropertyDescriptors(de),N={};forEach(t,(me,pe)=>{let Le;(Le=u(me,pe,de))!==!1&&(N[pe]=Le||me)}),Object.defineProperties(de,N)},freezeMethods=de=>{reduceDescriptors(de,(u,t)=>{if(isFunction$1(de)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const N=de[t];if(isFunction$1(N)){if(u.enumerable=!1,"writable"in u){u.writable=!1;return}u.set||(u.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(de,u)=>{const t={},N=me=>{me.forEach(pe=>{t[pe]=!0})};return isArray$1(de)?N(de):N(String(de).split(u)),t},noop=()=>{},toFiniteNumber=(de,u)=>de!=null&&Number.isFinite(de=+de)?de:u;function isSpecCompliantForm(de){return!!(de&&isFunction$1(de.append)&&de[Symbol.toStringTag]==="FormData"&&de[Symbol.iterator])}const toJSONObject=de=>{const u=new Array(10),t=(N,me)=>{if(isObject$3(N)){if(u.indexOf(N)>=0)return;if(!("toJSON"in N)){u[me]=N;const pe=isArray$1(N)?[]:{};return forEach(N,(Le,Ye)=>{const nt=t(Le,me+1);!isUndefined(nt)&&(pe[Ye]=nt)}),u[me]=void 0,pe}}return N};return t(de,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=de=>de&&(isObject$3(de)||isFunction$1(de))&&isFunction$1(de.then)&&isFunction$1(de.catch),_setImmediate=((de,u)=>de?setImmediate:u?((t,N)=>(_global.addEventListener("message",({source:me,data:pe})=>{me===_global&&pe===t&&N.length&&N.shift()()},!1),me=>{N.push(me),_global.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$2={isArray:isArray$1,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$3,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$d,hasOwnProp:hasOwnProperty$d,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(de,u,t,N,me){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=de,this.name="AxiosError",u&&(this.code=u),t&&(this.config=t),N&&(this.request=N),me&&(this.response=me,this.status=me.status?me.status:null)}utils$2.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(de=>{descriptors[de]={value:de}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(de,u,t,N,me,pe)=>{const Le=Object.create(prototype$1);return utils$2.toFlatObject(de,Le,function(nt){return nt!==Error.prototype},Ye=>Ye!=="isAxiosError"),AxiosError$1.call(Le,de.message,u,t,N,me),Le.cause=de,Le.name=de.name,pe&&Object.assign(Le,pe),Le};const httpAdapter=null;function isVisitable(de){return utils$2.isPlainObject(de)||utils$2.isArray(de)}function removeBrackets(de){return utils$2.endsWith(de,"[]")?de.slice(0,-2):de}function renderKey(de,u,t){return de?de.concat(u).map(function(me,pe){return me=removeBrackets(me),!t&&pe?"["+me+"]":me}).join(t?".":""):u}function isFlatArray(de){return utils$2.isArray(de)&&!de.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(u){return/^is[A-Z]/.test(u)});function toFormData$1(de,u,t){if(!utils$2.isObject(de))throw new TypeError("target must be an object");u=u||new FormData,t=utils$2.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ct,Tt){return!utils$2.isUndefined(Tt[Ct])});const N=t.metaTokens,me=t.visitor||ft,pe=t.dots,Le=t.indexes,nt=(t.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(u);if(!utils$2.isFunction(me))throw new TypeError("visitor must be a function");function ot(_t){if(_t===null)return"";if(utils$2.isDate(_t))return _t.toISOString();if(!nt&&utils$2.isBlob(_t))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(_t)||utils$2.isTypedArray(_t)?nt&&typeof Blob=="function"?new Blob([_t]):Buffer.from(_t):_t}function ft(_t,Ct,Tt){let At=_t;if(_t&&!Tt&&typeof _t=="object"){if(utils$2.endsWith(Ct,"{}"))Ct=N?Ct:Ct.slice(0,-2),_t=JSON.stringify(_t);else if(utils$2.isArray(_t)&&isFlatArray(_t)||(utils$2.isFileList(_t)||utils$2.endsWith(Ct,"[]"))&&(At=utils$2.toArray(_t)))return Ct=removeBrackets(Ct),At.forEach(function(Pt,Bt){!(utils$2.isUndefined(Pt)||Pt===null)&&u.append(Le===!0?renderKey([Ct],Bt,pe):Le===null?Ct:Ct+"[]",ot(Pt))}),!1}return isVisitable(_t)?!0:(u.append(renderKey(Tt,Ct,pe),ot(_t)),!1)}const mt=[],bt=Object.assign(predicates,{defaultVisitor:ft,convertValue:ot,isVisitable});function yt(_t,Ct){if(!utils$2.isUndefined(_t)){if(mt.indexOf(_t)!==-1)throw Error("Circular reference detected in "+Ct.join("."));mt.push(_t),utils$2.forEach(_t,function(At,It){(!(utils$2.isUndefined(At)||At===null)&&me.call(u,At,utils$2.isString(It)?It.trim():It,Ct,bt))===!0&&yt(At,Ct?Ct.concat(It):[It])}),mt.pop()}}if(!utils$2.isObject(de))throw new TypeError("data must be an object");return yt(de),u}function encode$3(de){const u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(de).replace(/[!'()~]|%20|%00/g,function(N){return u[N]})}function AxiosURLSearchParams(de,u){this._pairs=[],de&&toFormData$1(de,this,u)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(u,t){this._pairs.push([u,t])};prototype.toString=function(u){const t=u?function(N){return u.call(this,N,encode$3)}:encode$3;return this._pairs.map(function(me){return t(me[0])+"="+t(me[1])},"").join("&")};function encode$2(de){return encodeURIComponent(de).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(de,u,t){if(!u)return de;const N=t&&t.encode||encode$2;utils$2.isFunction(t)&&(t={serialize:t});const me=t&&t.serialize;let pe;if(me?pe=me(u,t):pe=utils$2.isURLSearchParams(u)?u.toString():new AxiosURLSearchParams(u,t).toString(N),pe){const Le=de.indexOf("#");Le!==-1&&(de=de.slice(0,Le)),de+=(de.indexOf("?")===-1?"?":"&")+pe}return de}class InterceptorManager{constructor(){this.handlers=[]}use(u,t,N){return this.handlers.push({fulfilled:u,rejected:t,synchronous:N?N.synchronous:!1,runWhen:N?N.runWhen:null}),this.handlers.length-1}eject(u){this.handlers[u]&&(this.handlers[u]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(u){utils$2.forEach(this.handlers,function(N){N!==null&&u(N)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(de,u){return toFormData$1(de,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,N,me,pe){return platform.isNode&&utils$2.isBuffer(t)?(this.append(N,t.toString("base64")),!1):pe.defaultVisitor.apply(this,arguments)}},u))}function parsePropPath(de){return utils$2.matchAll(/\w+|\[(\w*)]/g,de).map(u=>u[0]==="[]"?"":u[1]||u[0])}function arrayToObject(de){const u={},t=Object.keys(de);let N;const me=t.length;let pe;for(N=0;N<me;N++)pe=t[N],u[pe]=de[pe];return u}function formDataToJSON(de){function u(t,N,me,pe){let Le=t[pe++];if(Le==="__proto__")return!0;const Ye=Number.isFinite(+Le),nt=pe>=t.length;return Le=!Le&&utils$2.isArray(me)?me.length:Le,nt?(utils$2.hasOwnProp(me,Le)?me[Le]=[me[Le],N]:me[Le]=N,!Ye):((!me[Le]||!utils$2.isObject(me[Le]))&&(me[Le]=[]),u(t,N,me[Le],pe)&&utils$2.isArray(me[Le])&&(me[Le]=arrayToObject(me[Le])),!Ye)}if(utils$2.isFormData(de)&&utils$2.isFunction(de.entries)){const t={};return utils$2.forEachEntry(de,(N,me)=>{u(parsePropPath(N),me,t,0)}),t}return null}function stringifySafely(de,u,t){if(utils$2.isString(de))try{return(u||JSON.parse)(de),utils$2.trim(de)}catch(N){if(N.name!=="SyntaxError")throw N}return(t||JSON.stringify)(de)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(u,t){const N=t.getContentType()||"",me=N.indexOf("application/json")>-1,pe=utils$2.isObject(u);if(pe&&utils$2.isHTMLForm(u)&&(u=new FormData(u)),utils$2.isFormData(u))return me?JSON.stringify(formDataToJSON(u)):u;if(utils$2.isArrayBuffer(u)||utils$2.isBuffer(u)||utils$2.isStream(u)||utils$2.isFile(u)||utils$2.isBlob(u)||utils$2.isReadableStream(u))return u;if(utils$2.isArrayBufferView(u))return u.buffer;if(utils$2.isURLSearchParams(u))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),u.toString();let Ye;if(pe){if(N.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(u,this.formSerializer).toString();if((Ye=utils$2.isFileList(u))||N.indexOf("multipart/form-data")>-1){const nt=this.env&&this.env.FormData;return toFormData$1(Ye?{"files[]":u}:u,nt&&new nt,this.formSerializer)}}return pe||me?(t.setContentType("application/json",!1),stringifySafely(u)):u}],transformResponse:[function(u){const t=this.transitional||defaults.transitional,N=t&&t.forcedJSONParsing,me=this.responseType==="json";if(utils$2.isResponse(u)||utils$2.isReadableStream(u))return u;if(u&&utils$2.isString(u)&&(N&&!this.responseType||me)){const Le=!(t&&t.silentJSONParsing)&&me;try{return JSON.parse(u)}catch(Ye){if(Le)throw Ye.name==="SyntaxError"?AxiosError$1.from(Ye,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):Ye}}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],de=>{defaults.headers[de]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=de=>{const u={};let t,N,me;return de&&de.split(`
`).forEach(function(Le){me=Le.indexOf(":"),t=Le.substring(0,me).trim().toLowerCase(),N=Le.substring(me+1).trim(),!(!t||u[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?u[t]?u[t].push(N):u[t]=[N]:u[t]=u[t]?u[t]+", "+N:N)}),u},$internals=Symbol("internals");function normalizeHeader(de){return de&&String(de).trim().toLowerCase()}function normalizeValue(de){return de===!1||de==null?de:utils$2.isArray(de)?de.map(normalizeValue):String(de)}function parseTokens(de){const u=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let N;for(;N=t.exec(de);)u[N[1]]=N[2];return u}const isValidHeaderName=de=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(de.trim());function matchHeaderValue(de,u,t,N,me){if(utils$2.isFunction(N))return N.call(this,u,t);if(me&&(u=t),!!utils$2.isString(u)){if(utils$2.isString(N))return u.indexOf(N)!==-1;if(utils$2.isRegExp(N))return N.test(u)}}function formatHeader(de){return de.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(u,t,N)=>t.toUpperCase()+N)}function buildAccessors(de,u){const t=utils$2.toCamelCase(" "+u);["get","set","has"].forEach(N=>{Object.defineProperty(de,N+t,{value:function(me,pe,Le){return this[N].call(this,u,me,pe,Le)},configurable:!0})})}let AxiosHeaders$1=class{constructor(u){u&&this.set(u)}set(u,t,N){const me=this;function pe(Ye,nt,ot){const ft=normalizeHeader(nt);if(!ft)throw new Error("header name must be a non-empty string");const mt=utils$2.findKey(me,ft);(!mt||me[mt]===void 0||ot===!0||ot===void 0&&me[mt]!==!1)&&(me[mt||nt]=normalizeValue(Ye))}const Le=(Ye,nt)=>utils$2.forEach(Ye,(ot,ft)=>pe(ot,ft,nt));if(utils$2.isPlainObject(u)||u instanceof this.constructor)Le(u,t);else if(utils$2.isString(u)&&(u=u.trim())&&!isValidHeaderName(u))Le(parseHeaders(u),t);else if(utils$2.isHeaders(u))for(const[Ye,nt]of u.entries())pe(nt,Ye,N);else u!=null&&pe(t,u,N);return this}get(u,t){if(u=normalizeHeader(u),u){const N=utils$2.findKey(this,u);if(N){const me=this[N];if(!t)return me;if(t===!0)return parseTokens(me);if(utils$2.isFunction(t))return t.call(this,me,N);if(utils$2.isRegExp(t))return t.exec(me);throw new TypeError("parser must be boolean|regexp|function")}}}has(u,t){if(u=normalizeHeader(u),u){const N=utils$2.findKey(this,u);return!!(N&&this[N]!==void 0&&(!t||matchHeaderValue(this,this[N],N,t)))}return!1}delete(u,t){const N=this;let me=!1;function pe(Le){if(Le=normalizeHeader(Le),Le){const Ye=utils$2.findKey(N,Le);Ye&&(!t||matchHeaderValue(N,N[Ye],Ye,t))&&(delete N[Ye],me=!0)}}return utils$2.isArray(u)?u.forEach(pe):pe(u),me}clear(u){const t=Object.keys(this);let N=t.length,me=!1;for(;N--;){const pe=t[N];(!u||matchHeaderValue(this,this[pe],pe,u,!0))&&(delete this[pe],me=!0)}return me}normalize(u){const t=this,N={};return utils$2.forEach(this,(me,pe)=>{const Le=utils$2.findKey(N,pe);if(Le){t[Le]=normalizeValue(me),delete t[pe];return}const Ye=u?formatHeader(pe):String(pe).trim();Ye!==pe&&delete t[pe],t[Ye]=normalizeValue(me),N[Ye]=!0}),this}concat(...u){return this.constructor.concat(this,...u)}toJSON(u){const t=Object.create(null);return utils$2.forEach(this,(N,me)=>{N!=null&&N!==!1&&(t[me]=u&&utils$2.isArray(N)?N.join(", "):N)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([u,t])=>u+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(u){return u instanceof this?u:new this(u)}static concat(u,...t){const N=new this(u);return t.forEach(me=>N.set(me)),N}static accessor(u){const N=(this[$internals]=this[$internals]={accessors:{}}).accessors,me=this.prototype;function pe(Le){const Ye=normalizeHeader(Le);N[Ye]||(buildAccessors(me,Le),N[Ye]=!0)}return utils$2.isArray(u)?u.forEach(pe):pe(u),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders$1.prototype,({value:de},u)=>{let t=u[0].toUpperCase()+u.slice(1);return{get:()=>de,set(N){this[t]=N}}});utils$2.freezeMethods(AxiosHeaders$1);function transformData(de,u){const t=this||defaults,N=u||t,me=AxiosHeaders$1.from(N.headers);let pe=N.data;return utils$2.forEach(de,function(Ye){pe=Ye.call(t,pe,me.normalize(),u?u.status:void 0)}),me.normalize(),pe}function isCancel$1(de){return!!(de&&de.__CANCEL__)}function CanceledError$1(de,u,t){AxiosError$1.call(this,de??"canceled",AxiosError$1.ERR_CANCELED,u,t),this.name="CanceledError"}utils$2.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(de,u,t){const N=t.config.validateStatus;!t.status||!N||N(t.status)?de(t):u(new AxiosError$1("Request failed with status code "+t.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function parseProtocol(de){const u=/^([-+\w]{1,25})(:?\/\/|:)/.exec(de);return u&&u[1]||""}function speedometer(de,u){de=de||10;const t=new Array(de),N=new Array(de);let me=0,pe=0,Le;return u=u!==void 0?u:1e3,function(nt){const ot=Date.now(),ft=N[pe];Le||(Le=ot),t[me]=nt,N[me]=ot;let mt=pe,bt=0;for(;mt!==me;)bt+=t[mt++],mt=mt%de;if(me=(me+1)%de,me===pe&&(pe=(pe+1)%de),ot-Le<u)return;const yt=ft&&ot-ft;return yt?Math.round(bt*1e3/yt):void 0}}function throttle$1(de,u){let t=0,N=1e3/u,me,pe;const Le=(ot,ft=Date.now())=>{t=ft,me=null,pe&&(clearTimeout(pe),pe=null),de.apply(null,ot)};return[(...ot)=>{const ft=Date.now(),mt=ft-t;mt>=N?Le(ot,ft):(me=ot,pe||(pe=setTimeout(()=>{pe=null,Le(me)},N-mt)))},()=>me&&Le(me)]}const progressEventReducer=(de,u,t=3)=>{let N=0;const me=speedometer(50,250);return throttle$1(pe=>{const Le=pe.loaded,Ye=pe.lengthComputable?pe.total:void 0,nt=Le-N,ot=me(nt),ft=Le<=Ye;N=Le;const mt={loaded:Le,total:Ye,progress:Ye?Le/Ye:void 0,bytes:nt,rate:ot||void 0,estimated:ot&&Ye&&ft?(Ye-Le)/ot:void 0,event:pe,lengthComputable:Ye!=null,[u?"download":"upload"]:!0};de(mt)},t)},progressEventDecorator=(de,u)=>{const t=de!=null;return[N=>u[0]({lengthComputable:t,total:de,loaded:N}),u[1]]},asyncDecorator=de=>(...u)=>utils$2.asap(()=>de(...u)),isURLSameOrigin=platform.hasStandardBrowserEnv?((de,u)=>t=>(t=new URL(t,platform.origin),de.protocol===t.protocol&&de.host===t.host&&(u||de.port===t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(de,u,t,N,me,pe){const Le=[de+"="+encodeURIComponent(u)];utils$2.isNumber(t)&&Le.push("expires="+new Date(t).toGMTString()),utils$2.isString(N)&&Le.push("path="+N),utils$2.isString(me)&&Le.push("domain="+me),pe===!0&&Le.push("secure"),document.cookie=Le.join("; ")},read(de){const u=document.cookie.match(new RegExp("(^|;\\s*)("+de+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove(de){this.write(de,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(de){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(de)}function combineURLs(de,u){return u?de.replace(/\/?\/$/,"")+"/"+u.replace(/^\/+/,""):de}function buildFullPath(de,u,t){let N=!isAbsoluteURL(u);return de&&(N||t==!1)?combineURLs(de,u):u}const headersToObject=de=>de instanceof AxiosHeaders$1?{...de}:de;function mergeConfig$1(de,u){u=u||{};const t={};function N(ot,ft,mt,bt){return utils$2.isPlainObject(ot)&&utils$2.isPlainObject(ft)?utils$2.merge.call({caseless:bt},ot,ft):utils$2.isPlainObject(ft)?utils$2.merge({},ft):utils$2.isArray(ft)?ft.slice():ft}function me(ot,ft,mt,bt){if(utils$2.isUndefined(ft)){if(!utils$2.isUndefined(ot))return N(void 0,ot,mt,bt)}else return N(ot,ft,mt,bt)}function pe(ot,ft){if(!utils$2.isUndefined(ft))return N(void 0,ft)}function Le(ot,ft){if(utils$2.isUndefined(ft)){if(!utils$2.isUndefined(ot))return N(void 0,ot)}else return N(void 0,ft)}function Ye(ot,ft,mt){if(mt in u)return N(ot,ft);if(mt in de)return N(void 0,ot)}const nt={url:pe,method:pe,data:pe,baseURL:Le,transformRequest:Le,transformResponse:Le,paramsSerializer:Le,timeout:Le,timeoutMessage:Le,withCredentials:Le,withXSRFToken:Le,adapter:Le,responseType:Le,xsrfCookieName:Le,xsrfHeaderName:Le,onUploadProgress:Le,onDownloadProgress:Le,decompress:Le,maxContentLength:Le,maxBodyLength:Le,beforeRedirect:Le,transport:Le,httpAgent:Le,httpsAgent:Le,cancelToken:Le,socketPath:Le,responseEncoding:Le,validateStatus:Ye,headers:(ot,ft,mt)=>me(headersToObject(ot),headersToObject(ft),mt,!0)};return utils$2.forEach(Object.keys(Object.assign({},de,u)),function(ft){const mt=nt[ft]||me,bt=mt(de[ft],u[ft],ft);utils$2.isUndefined(bt)&&mt!==Ye||(t[ft]=bt)}),t}const resolveConfig=de=>{const u=mergeConfig$1({},de);let{data:t,withXSRFToken:N,xsrfHeaderName:me,xsrfCookieName:pe,headers:Le,auth:Ye}=u;u.headers=Le=AxiosHeaders$1.from(Le),u.url=buildURL(buildFullPath(u.baseURL,u.url,u.allowAbsoluteUrls),de.params,de.paramsSerializer),Ye&&Le.set("Authorization","Basic "+btoa((Ye.username||"")+":"+(Ye.password?unescape(encodeURIComponent(Ye.password)):"")));let nt;if(utils$2.isFormData(t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Le.setContentType(void 0);else if((nt=Le.getContentType())!==!1){const[ot,...ft]=nt?nt.split(";").map(mt=>mt.trim()).filter(Boolean):[];Le.setContentType([ot||"multipart/form-data",...ft].join("; "))}}if(platform.hasStandardBrowserEnv&&(N&&utils$2.isFunction(N)&&(N=N(u)),N||N!==!1&&isURLSameOrigin(u.url))){const ot=me&&pe&&cookies.read(pe);ot&&Le.set(me,ot)}return u},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(de){return new Promise(function(t,N){const me=resolveConfig(de);let pe=me.data;const Le=AxiosHeaders$1.from(me.headers).normalize();let{responseType:Ye,onUploadProgress:nt,onDownloadProgress:ot}=me,ft,mt,bt,yt,_t;function Ct(){yt&&yt(),_t&&_t(),me.cancelToken&&me.cancelToken.unsubscribe(ft),me.signal&&me.signal.removeEventListener("abort",ft)}let Tt=new XMLHttpRequest;Tt.open(me.method.toUpperCase(),me.url,!0),Tt.timeout=me.timeout;function At(){if(!Tt)return;const Pt=AxiosHeaders$1.from("getAllResponseHeaders"in Tt&&Tt.getAllResponseHeaders()),Ot={data:!Ye||Ye==="text"||Ye==="json"?Tt.responseText:Tt.response,status:Tt.status,statusText:Tt.statusText,headers:Pt,config:de,request:Tt};settle(function(Lt){t(Lt),Ct()},function(Lt){N(Lt),Ct()},Ot),Tt=null}"onloadend"in Tt?Tt.onloadend=At:Tt.onreadystatechange=function(){!Tt||Tt.readyState!==4||Tt.status===0&&!(Tt.responseURL&&Tt.responseURL.indexOf("file:")===0)||setTimeout(At)},Tt.onabort=function(){Tt&&(N(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,de,Tt)),Tt=null)},Tt.onerror=function(){N(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,de,Tt)),Tt=null},Tt.ontimeout=function(){let Bt=me.timeout?"timeout of "+me.timeout+"ms exceeded":"timeout exceeded";const Ot=me.transitional||transitionalDefaults;me.timeoutErrorMessage&&(Bt=me.timeoutErrorMessage),N(new AxiosError$1(Bt,Ot.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,de,Tt)),Tt=null},pe===void 0&&Le.setContentType(null),"setRequestHeader"in Tt&&utils$2.forEach(Le.toJSON(),function(Bt,Ot){Tt.setRequestHeader(Ot,Bt)}),utils$2.isUndefined(me.withCredentials)||(Tt.withCredentials=!!me.withCredentials),Ye&&Ye!=="json"&&(Tt.responseType=me.responseType),ot&&([bt,_t]=progressEventReducer(ot,!0),Tt.addEventListener("progress",bt)),nt&&Tt.upload&&([mt,yt]=progressEventReducer(nt),Tt.upload.addEventListener("progress",mt),Tt.upload.addEventListener("loadend",yt)),(me.cancelToken||me.signal)&&(ft=Pt=>{Tt&&(N(!Pt||Pt.type?new CanceledError$1(null,de,Tt):Pt),Tt.abort(),Tt=null)},me.cancelToken&&me.cancelToken.subscribe(ft),me.signal&&(me.signal.aborted?ft():me.signal.addEventListener("abort",ft)));const It=parseProtocol(me.url);if(It&&platform.protocols.indexOf(It)===-1){N(new AxiosError$1("Unsupported protocol "+It+":",AxiosError$1.ERR_BAD_REQUEST,de));return}Tt.send(pe||null)})},composeSignals=(de,u)=>{const{length:t}=de=de?de.filter(Boolean):[];if(u||t){let N=new AbortController,me;const pe=function(ot){if(!me){me=!0,Ye();const ft=ot instanceof Error?ot:this.reason;N.abort(ft instanceof AxiosError$1?ft:new CanceledError$1(ft instanceof Error?ft.message:ft))}};let Le=u&&setTimeout(()=>{Le=null,pe(new AxiosError$1(`timeout ${u} of ms exceeded`,AxiosError$1.ETIMEDOUT))},u);const Ye=()=>{de&&(Le&&clearTimeout(Le),Le=null,de.forEach(ot=>{ot.unsubscribe?ot.unsubscribe(pe):ot.removeEventListener("abort",pe)}),de=null)};de.forEach(ot=>ot.addEventListener("abort",pe));const{signal:nt}=N;return nt.unsubscribe=()=>utils$2.asap(Ye),nt}},streamChunk=function*(de,u){let t=de.byteLength;if(t<u){yield de;return}let N=0,me;for(;N<t;)me=N+u,yield de.slice(N,me),N=me},readBytes=async function*(de,u){for await(const t of readStream(de))yield*streamChunk(t,u)},readStream=async function*(de){if(de[Symbol.asyncIterator]){yield*de;return}const u=de.getReader();try{for(;;){const{done:t,value:N}=await u.read();if(t)break;yield N}}finally{await u.cancel()}},trackStream=(de,u,t,N)=>{const me=readBytes(de,u);let pe=0,Le,Ye=nt=>{Le||(Le=!0,N&&N(nt))};return new ReadableStream({async pull(nt){try{const{done:ot,value:ft}=await me.next();if(ot){Ye(),nt.close();return}let mt=ft.byteLength;if(t){let bt=pe+=mt;t(bt)}nt.enqueue(new Uint8Array(ft))}catch(ot){throw Ye(ot),ot}},cancel(nt){return Ye(nt),me.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(de=>u=>de.encode(u))(new TextEncoder):async de=>new Uint8Array(await new Response(de).arrayBuffer())),test=(de,...u)=>{try{return!!de(...u)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let de=!1;const u=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return de=!0,"half"}}).headers.has("Content-Type");return de&&!u}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(de=>de.body)};isFetchSupported&&(de=>{["text","arrayBuffer","blob","formData","stream"].forEach(u=>{!resolvers[u]&&(resolvers[u]=utils$2.isFunction(de[u])?t=>t[u]():(t,N)=>{throw new AxiosError$1(`Response type '${u}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,N)})})})(new Response);const getBodyLength=async de=>{if(de==null)return 0;if(utils$2.isBlob(de))return de.size;if(utils$2.isSpecCompliantForm(de))return(await new Request(platform.origin,{method:"POST",body:de}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(de)||utils$2.isArrayBuffer(de))return de.byteLength;if(utils$2.isURLSearchParams(de)&&(de=de+""),utils$2.isString(de))return(await encodeText(de)).byteLength},resolveBodyLength=async(de,u)=>{const t=utils$2.toFiniteNumber(de.getContentLength());return t??getBodyLength(u)},fetchAdapter=isFetchSupported&&(async de=>{let{url:u,method:t,data:N,signal:me,cancelToken:pe,timeout:Le,onDownloadProgress:Ye,onUploadProgress:nt,responseType:ot,headers:ft,withCredentials:mt="same-origin",fetchOptions:bt}=resolveConfig(de);ot=ot?(ot+"").toLowerCase():"text";let yt=composeSignals([me,pe&&pe.toAbortSignal()],Le),_t;const Ct=yt&&yt.unsubscribe&&(()=>{yt.unsubscribe()});let Tt;try{if(nt&&supportsRequestStream&&t!=="get"&&t!=="head"&&(Tt=await resolveBodyLength(ft,N))!==0){let Ot=new Request(u,{method:"POST",body:N,duplex:"half"}),Nt;if(utils$2.isFormData(N)&&(Nt=Ot.headers.get("content-type"))&&ft.setContentType(Nt),Ot.body){const[Lt,Et]=progressEventDecorator(Tt,progressEventReducer(asyncDecorator(nt)));N=trackStream(Ot.body,DEFAULT_CHUNK_SIZE,Lt,Et)}}utils$2.isString(mt)||(mt=mt?"include":"omit");const At="credentials"in Request.prototype;_t=new Request(u,{...bt,signal:yt,method:t.toUpperCase(),headers:ft.normalize().toJSON(),body:N,duplex:"half",credentials:At?mt:void 0});let It=await fetch(_t);const Pt=supportsResponseStream&&(ot==="stream"||ot==="response");if(supportsResponseStream&&(Ye||Pt&&Ct)){const Ot={};["status","statusText","headers"].forEach(kt=>{Ot[kt]=It[kt]});const Nt=utils$2.toFiniteNumber(It.headers.get("content-length")),[Lt,Et]=Ye&&progressEventDecorator(Nt,progressEventReducer(asyncDecorator(Ye),!0))||[];It=new Response(trackStream(It.body,DEFAULT_CHUNK_SIZE,Lt,()=>{Et&&Et(),Ct&&Ct()}),Ot)}ot=ot||"text";let Bt=await resolvers[utils$2.findKey(resolvers,ot)||"text"](It,de);return!Pt&&Ct&&Ct(),await new Promise((Ot,Nt)=>{settle(Ot,Nt,{data:Bt,headers:AxiosHeaders$1.from(It.headers),status:It.status,statusText:It.statusText,config:de,request:_t})})}catch(At){throw Ct&&Ct(),At&&At.name==="TypeError"&&/fetch/i.test(At.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,de,_t),{cause:At.cause||At}):AxiosError$1.from(At,At&&At.code,de,_t)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(de,u)=>{if(de){try{Object.defineProperty(de,"name",{value:u})}catch{}Object.defineProperty(de,"adapterName",{value:u})}});const renderReason=de=>`- ${de}`,isResolvedHandle=de=>utils$2.isFunction(de)||de===null||de===!1,adapters={getAdapter:de=>{de=utils$2.isArray(de)?de:[de];const{length:u}=de;let t,N;const me={};for(let pe=0;pe<u;pe++){t=de[pe];let Le;if(N=t,!isResolvedHandle(t)&&(N=knownAdapters[(Le=String(t)).toLowerCase()],N===void 0))throw new AxiosError$1(`Unknown adapter '${Le}'`);if(N)break;me[Le||"#"+pe]=N}if(!N){const pe=Object.entries(me).map(([Ye,nt])=>`adapter ${Ye} `+(nt===!1?"is not supported by the environment":"is not available in the build"));let Le=u?pe.length>1?`since :
`+pe.map(renderReason).join(`
`):" "+renderReason(pe[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+Le,"ERR_NOT_SUPPORT")}return N},adapters:knownAdapters};function throwIfCancellationRequested(de){if(de.cancelToken&&de.cancelToken.throwIfRequested(),de.signal&&de.signal.aborted)throw new CanceledError$1(null,de)}function dispatchRequest(de){return throwIfCancellationRequested(de),de.headers=AxiosHeaders$1.from(de.headers),de.data=transformData.call(de,de.transformRequest),["post","put","patch"].indexOf(de.method)!==-1&&de.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(de.adapter||defaults.adapter)(de).then(function(N){return throwIfCancellationRequested(de),N.data=transformData.call(de,de.transformResponse,N),N.headers=AxiosHeaders$1.from(N.headers),N},function(N){return isCancel$1(N)||(throwIfCancellationRequested(de),N&&N.response&&(N.response.data=transformData.call(de,de.transformResponse,N.response),N.response.headers=AxiosHeaders$1.from(N.response.headers))),Promise.reject(N)})}const VERSION$1="1.8.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((de,u)=>{validators$1[de]=function(N){return typeof N===de||"a"+(u<1?"n ":" ")+de}});const deprecatedWarnings={};validators$1.transitional=function(u,t,N){function me(pe,Le){return"[Axios v"+VERSION$1+"] Transitional option '"+pe+"'"+Le+(N?". "+N:"")}return(pe,Le,Ye)=>{if(u===!1)throw new AxiosError$1(me(Le," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[Le]&&(deprecatedWarnings[Le]=!0,console.warn(me(Le," has been deprecated since v"+t+" and will be removed in the near future"))),u?u(pe,Le,Ye):!0}};validators$1.spelling=function(u){return(t,N)=>(console.warn(`${N} is likely a misspelling of ${u}`),!0)};function assertOptions(de,u,t){if(typeof de!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const N=Object.keys(de);let me=N.length;for(;me-- >0;){const pe=N[me],Le=u[pe];if(Le){const Ye=de[pe],nt=Ye===void 0||Le(Ye,pe,de);if(nt!==!0)throw new AxiosError$1("option "+pe+" must be "+nt,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError$1("Unknown option "+pe,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(u){this.defaults=u,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(u,t){try{return await this._request(u,t)}catch(N){if(N instanceof Error){let me={};Error.captureStackTrace?Error.captureStackTrace(me):me=new Error;const pe=me.stack?me.stack.replace(/^.+\n/,""):"";try{N.stack?pe&&!String(N.stack).endsWith(pe.replace(/^.+\n.+\n/,""))&&(N.stack+=`
`+pe):N.stack=pe}catch{}}throw N}}_request(u,t){typeof u=="string"?(t=t||{},t.url=u):t=u||{},t=mergeConfig$1(this.defaults,t);const{transitional:N,paramsSerializer:me,headers:pe}=t;N!==void 0&&validator.assertOptions(N,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),me!=null&&(utils$2.isFunction(me)?t.paramsSerializer={serialize:me}:validator.assertOptions(me,{encode:validators.function,serialize:validators.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let Le=pe&&utils$2.merge(pe.common,pe[t.method]);pe&&utils$2.forEach(["delete","get","head","post","put","patch","common"],_t=>{delete pe[_t]}),t.headers=AxiosHeaders$1.concat(Le,pe);const Ye=[];let nt=!0;this.interceptors.request.forEach(function(Ct){typeof Ct.runWhen=="function"&&Ct.runWhen(t)===!1||(nt=nt&&Ct.synchronous,Ye.unshift(Ct.fulfilled,Ct.rejected))});const ot=[];this.interceptors.response.forEach(function(Ct){ot.push(Ct.fulfilled,Ct.rejected)});let ft,mt=0,bt;if(!nt){const _t=[dispatchRequest.bind(this),void 0];for(_t.unshift.apply(_t,Ye),_t.push.apply(_t,ot),bt=_t.length,ft=Promise.resolve(t);mt<bt;)ft=ft.then(_t[mt++],_t[mt++]);return ft}bt=Ye.length;let yt=t;for(mt=0;mt<bt;){const _t=Ye[mt++],Ct=Ye[mt++];try{yt=_t(yt)}catch(Tt){Ct.call(this,Tt);break}}try{ft=dispatchRequest.call(this,yt)}catch(_t){return Promise.reject(_t)}for(mt=0,bt=ot.length;mt<bt;)ft=ft.then(ot[mt++],ot[mt++]);return ft}getUri(u){u=mergeConfig$1(this.defaults,u);const t=buildFullPath(u.baseURL,u.url,u.allowAbsoluteUrls);return buildURL(t,u.params,u.paramsSerializer)}};utils$2.forEach(["delete","get","head","options"],function(u){Axios$1.prototype[u]=function(t,N){return this.request(mergeConfig$1(N||{},{method:u,url:t,data:(N||{}).data}))}});utils$2.forEach(["post","put","patch"],function(u){function t(N){return function(pe,Le,Ye){return this.request(mergeConfig$1(Ye||{},{method:u,headers:N?{"Content-Type":"multipart/form-data"}:{},url:pe,data:Le}))}}Axios$1.prototype[u]=t(),Axios$1.prototype[u+"Form"]=t(!0)});let CancelToken$1=class fm{constructor(u){if(typeof u!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(pe){t=pe});const N=this;this.promise.then(me=>{if(!N._listeners)return;let pe=N._listeners.length;for(;pe-- >0;)N._listeners[pe](me);N._listeners=null}),this.promise.then=me=>{let pe;const Le=new Promise(Ye=>{N.subscribe(Ye),pe=Ye}).then(me);return Le.cancel=function(){N.unsubscribe(pe)},Le},u(function(pe,Le,Ye){N.reason||(N.reason=new CanceledError$1(pe,Le,Ye),t(N.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(u){if(this.reason){u(this.reason);return}this._listeners?this._listeners.push(u):this._listeners=[u]}unsubscribe(u){if(!this._listeners)return;const t=this._listeners.indexOf(u);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const u=new AbortController,t=N=>{u.abort(N)};return this.subscribe(t),u.signal.unsubscribe=()=>this.unsubscribe(t),u.signal}static source(){let u;return{token:new fm(function(me){u=me}),cancel:u}}};function spread$1(de){return function(t){return de.apply(null,t)}}function isAxiosError$1(de){return utils$2.isObject(de)&&de.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([de,u])=>{HttpStatusCode$1[u]=de});function createInstance(de){const u=new Axios$1(de),t=bind(Axios$1.prototype.request,u);return utils$2.extend(t,Axios$1.prototype,u,{allOwnKeys:!0}),utils$2.extend(t,u,null,{allOwnKeys:!0}),t.create=function(me){return createInstance(mergeConfig$1(de,me))},t}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(u){return Promise.all(u)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=de=>formDataToJSON(utils$2.isHTMLForm(de)?new FormData(de):de);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,CircularProgress=({size:de})=>jsxRuntimeExports.jsxs("svg",{width:de,height:de,viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"60",strokeDashoffset:"20",style:{animation:"spin 1s linear infinite",transformOrigin:"center"}}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]});var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(de){var u=hasOwnProperty$c.call(de,symToStringTag$1),t=de[symToStringTag$1];try{de[symToStringTag$1]=void 0;var N=!0}catch{}var me=nativeObjectToString$1.call(de);return N&&(u?de[symToStringTag$1]=t:delete de[symToStringTag$1]),me}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(de){return nativeObjectToString.call(de)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(de){return de==null?de===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(de)?getRawTag(de):objectToString(de)}function isObjectLike(de){return de!=null&&typeof de=="object"}var symbolTag$3="[object Symbol]";function isSymbol(de){return typeof de=="symbol"||isObjectLike(de)&&baseGetTag(de)==symbolTag$3}function arrayMap(de,u){for(var t=-1,N=de==null?0:de.length,me=Array(N);++t<N;)me[t]=u(de[t],t,de);return me}var isArray=Array.isArray,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(de){if(typeof de=="string")return de;if(isArray(de))return arrayMap(de,baseToString)+"";if(isSymbol(de))return symbolToString?symbolToString.call(de):"";var u=de+"";return u=="0"&&1/de==-1/0?"-0":u}var reWhitespace=/\s/;function trimmedEndIndex(de){for(var u=de.length;u--&&reWhitespace.test(de.charAt(u)););return u}var reTrimStart=/^\s+/;function baseTrim(de){return de&&de.slice(0,trimmedEndIndex(de)+1).replace(reTrimStart,"")}function isObject$2(de){var u=typeof de;return de!=null&&(u=="object"||u=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(de){if(typeof de=="number")return de;if(isSymbol(de))return NAN;if(isObject$2(de)){var u=typeof de.valueOf=="function"?de.valueOf():de;de=isObject$2(u)?u+"":u}if(typeof de!="string")return de===0?de:+de;de=baseTrim(de);var t=reIsBinary.test(de);return t||reIsOctal.test(de)?freeParseInt(de.slice(2),t?2:8):reIsBadHex.test(de)?NAN:+de}function identity(de){return de}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(de){if(!isObject$2(de))return!1;var u=baseGetTag(de);return u==funcTag$2||u==genTag$1||u==asyncTag||u==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var de=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return de?"Symbol(src)_1."+de:""}();function isMasked(de){return!!maskSrcKey&&maskSrcKey in de}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(de){if(de!=null){try{return funcToString$2.call(de)}catch{}try{return de+""}catch{}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(de){if(!isObject$2(de)||isMasked(de))return!1;var u=isFunction(de)?reIsNative:reIsHostCtor;return u.test(toSource(de))}function getValue(de,u){return de==null?void 0:de[u]}function getNative(de,u){var t=getValue(de,u);return baseIsNative(t)?t:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function de(){}return function(u){if(!isObject$2(u))return{};if(objectCreate)return objectCreate(u);de.prototype=u;var t=new de;return de.prototype=void 0,t}}();function apply(de,u,t){switch(t.length){case 0:return de.call(u);case 1:return de.call(u,t[0]);case 2:return de.call(u,t[0],t[1]);case 3:return de.call(u,t[0],t[1],t[2])}return de.apply(u,t)}function copyArray(de,u){var t=-1,N=de.length;for(u||(u=Array(N));++t<N;)u[t]=de[t];return u}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(de){var u=0,t=0;return function(){var N=nativeNow(),me=HOT_SPAN-(N-t);if(t=N,me>0){if(++u>=HOT_COUNT)return arguments[0]}else u=0;return de.apply(void 0,arguments)}}function constant(de){return function(){return de}}var defineProperty=function(){try{var de=getNative(Object,"defineProperty");return de({},"",{}),de}catch{}}(),baseSetToString=defineProperty?function(de,u){return defineProperty(de,"toString",{configurable:!0,enumerable:!1,value:constant(u),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(de,u){for(var t=-1,N=de==null?0:de.length;++t<N&&u(de[t],t,de)!==!1;);return de}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(de,u){var t=typeof de;return u=u??MAX_SAFE_INTEGER$1,!!u&&(t=="number"||t!="symbol"&&reIsUint.test(de))&&de>-1&&de%1==0&&de<u}function baseAssignValue(de,u,t){u=="__proto__"&&defineProperty?defineProperty(de,u,{configurable:!0,enumerable:!0,value:t,writable:!0}):de[u]=t}function eq(de,u){return de===u||de!==de&&u!==u}var objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function assignValue(de,u,t){var N=de[u];(!(hasOwnProperty$a.call(de,u)&&eq(N,t))||t===void 0&&!(u in de))&&baseAssignValue(de,u,t)}function copyObject(de,u,t,N){var me=!t;t||(t={});for(var pe=-1,Le=u.length;++pe<Le;){var Ye=u[pe],nt=void 0;nt===void 0&&(nt=de[Ye]),me?baseAssignValue(t,Ye,nt):assignValue(t,Ye,nt)}return t}var nativeMax$1=Math.max;function overRest(de,u,t){return u=nativeMax$1(u===void 0?de.length-1:u,0),function(){for(var N=arguments,me=-1,pe=nativeMax$1(N.length-u,0),Le=Array(pe);++me<pe;)Le[me]=N[u+me];me=-1;for(var Ye=Array(u+1);++me<u;)Ye[me]=N[me];return Ye[u]=t(Le),apply(de,this,Ye)}}function baseRest(de,u){return setToString(overRest(de,u,identity),de+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength$1(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=MAX_SAFE_INTEGER}function isArrayLike(de){return de!=null&&isLength$1(de.length)&&!isFunction(de)}function isIterateeCall(de,u,t){if(!isObject$2(t))return!1;var N=typeof u;return(N=="number"?isArrayLike(t)&&isIndex(u,t.length):N=="string"&&u in t)?eq(t[u],de):!1}function createAssigner(de){return baseRest(function(u,t){var N=-1,me=t.length,pe=me>1?t[me-1]:void 0,Le=me>2?t[2]:void 0;for(pe=de.length>3&&typeof pe=="function"?(me--,pe):void 0,Le&&isIterateeCall(t[0],t[1],Le)&&(pe=me<3?void 0:pe,me=1),u=Object(u);++N<me;){var Ye=t[N];Ye&&de(u,Ye,N,pe)}return u})}var objectProto$b=Object.prototype;function isPrototype(de){var u=de&&de.constructor,t=typeof u=="function"&&u.prototype||objectProto$b;return de===t}function baseTimes(de,u){for(var t=-1,N=Array(de);++t<de;)N[t]=u(t);return N}var argsTag$3="[object Arguments]";function baseIsArguments(de){return isObjectLike(de)&&baseGetTag(de)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(de){return isObjectLike(de)&&hasOwnProperty$9.call(de,"callee")&&!propertyIsEnumerable$1.call(de,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(de){return isObjectLike(de)&&isLength$1(de.length)&&!!typedArrayTags[baseGetTag(de)]}function baseUnary(de){return function(u){return de(u)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var de=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return de||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function arrayLikeKeys(de,u){var t=isArray(de),N=!t&&isArguments(de),me=!t&&!N&&isBuffer(de),pe=!t&&!N&&!me&&isTypedArray(de),Le=t||N||me||pe,Ye=Le?baseTimes(de.length,String):[],nt=Ye.length;for(var ot in de)(u||hasOwnProperty$8.call(de,ot))&&!(Le&&(ot=="length"||me&&(ot=="offset"||ot=="parent")||pe&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||isIndex(ot,nt)))&&Ye.push(ot);return Ye}function overArg(de,u){return function(t){return de(u(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeys(de){if(!isPrototype(de))return nativeKeys(de);var u=[];for(var t in Object(de))hasOwnProperty$7.call(de,t)&&t!="constructor"&&u.push(t);return u}function keys(de){return isArrayLike(de)?arrayLikeKeys(de):baseKeys(de)}function nativeKeysIn(de){var u=[];if(de!=null)for(var t in Object(de))u.push(t);return u}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function baseKeysIn(de){if(!isObject$2(de))return nativeKeysIn(de);var u=isPrototype(de),t=[];for(var N in de)N=="constructor"&&(u||!hasOwnProperty$6.call(de,N))||t.push(N);return t}function keysIn(de){return isArrayLike(de)?arrayLikeKeys(de,!0):baseKeysIn(de)}var assignIn=createAssigner(function(de,u){copyObject(u,keysIn(u),de)}),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(de,u){if(isArray(de))return!1;var t=typeof de;return t=="number"||t=="symbol"||t=="boolean"||de==null||isSymbol(de)?!0:reIsPlainProp.test(de)||!reIsDeepProp.test(de)||u!=null&&de in Object(u)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(de){var u=this.has(de)&&delete this.__data__[de];return this.size-=u?1:0,u}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashGet(de){var u=this.__data__;if(nativeCreate){var t=u[de];return t===HASH_UNDEFINED$2?void 0:t}return hasOwnProperty$5.call(u,de)?u[de]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(de){var u=this.__data__;return nativeCreate?u[de]!==void 0:hasOwnProperty$4.call(u,de)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(de,u){var t=this.__data__;return this.size+=this.has(de)?0:1,t[de]=nativeCreate&&u===void 0?HASH_UNDEFINED$1:u,this}function Hash(de){var u=-1,t=de==null?0:de.length;for(this.clear();++u<t;){var N=de[u];this.set(N[0],N[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(de,u){for(var t=de.length;t--;)if(eq(de[t][0],u))return t;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(de){var u=this.__data__,t=assocIndexOf(u,de);if(t<0)return!1;var N=u.length-1;return t==N?u.pop():splice.call(u,t,1),--this.size,!0}function listCacheGet(de){var u=this.__data__,t=assocIndexOf(u,de);return t<0?void 0:u[t][1]}function listCacheHas(de){return assocIndexOf(this.__data__,de)>-1}function listCacheSet(de,u){var t=this.__data__,N=assocIndexOf(t,de);return N<0?(++this.size,t.push([de,u])):t[N][1]=u,this}function ListCache(de){var u=-1,t=de==null?0:de.length;for(this.clear();++u<t;){var N=de[u];this.set(N[0],N[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(de){var u=typeof de;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?de!=="__proto__":de===null}function getMapData(de,u){var t=de.__data__;return isKeyable(u)?t[typeof u=="string"?"string":"hash"]:t.map}function mapCacheDelete(de){var u=getMapData(this,de).delete(de);return this.size-=u?1:0,u}function mapCacheGet(de){return getMapData(this,de).get(de)}function mapCacheHas(de){return getMapData(this,de).has(de)}function mapCacheSet(de,u){var t=getMapData(this,de),N=t.size;return t.set(de,u),this.size+=t.size==N?0:1,this}function MapCache(de){var u=-1,t=de==null?0:de.length;for(this.clear();++u<t;){var N=de[u];this.set(N[0],N[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(de,u){if(typeof de!="function"||u!=null&&typeof u!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var t=function(){var N=arguments,me=u?u.apply(this,N):N[0],pe=t.cache;if(pe.has(me))return pe.get(me);var Le=de.apply(this,N);return t.cache=pe.set(me,Le)||pe,Le};return t.cache=new(memoize.Cache||MapCache),t}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(de){var u=memoize(de,function(N){return t.size===MAX_MEMOIZE_SIZE&&t.clear(),N}),t=u.cache;return u}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(de){var u=[];return de.charCodeAt(0)===46&&u.push(""),de.replace(rePropName,function(t,N,me,pe){u.push(me?pe.replace(reEscapeChar,"$1"):N||t)}),u});function toString$1(de){return de==null?"":baseToString(de)}function castPath(de,u){return isArray(de)?de:isKey(de,u)?[de]:stringToPath(toString$1(de))}function toKey(de){if(typeof de=="string"||isSymbol(de))return de;var u=de+"";return u=="0"&&1/de==-1/0?"-0":u}function baseGet(de,u){u=castPath(u,de);for(var t=0,N=u.length;de!=null&&t<N;)de=de[toKey(u[t++])];return t&&t==N?de:void 0}function get(de,u,t){var N=de==null?void 0:baseGet(de,u);return N===void 0?t:N}function arrayPush(de,u){for(var t=-1,N=u.length,me=de.length;++t<N;)de[me+t]=u[t];return de}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(de){if(!isObjectLike(de)||baseGetTag(de)!=objectTag$3)return!1;var u=getPrototype(de);if(u===null)return!0;var t=hasOwnProperty$3.call(u,"constructor")&&u.constructor;return typeof t=="function"&&t instanceof t&&funcToString.call(t)==objectCtorString}function baseSlice(de,u,t){var N=-1,me=de.length;u<0&&(u=-u>me?0:me+u),t=t>me?me:t,t<0&&(t+=me),me=u>t?0:t-u>>>0,u>>>=0;for(var pe=Array(me);++N<me;)pe[N]=de[N+u];return pe}function castSlice(de,u,t){var N=de.length;return t=t===void 0?N:t,baseSlice(de,u,t)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode(de){return reHasUnicode.test(de)}function asciiToArray(de){return de.split("")}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(de){return de.match(reUnicode)||[]}function stringToArray(de){return hasUnicode(de)?unicodeToArray(de):asciiToArray(de)}function createCaseFirst(de){return function(u){u=toString$1(u);var t=hasUnicode(u)?stringToArray(u):void 0,N=t?t[0]:u.charAt(0),me=t?castSlice(t,1).join(""):u.slice(1);return N[de]()+me}}var upperFirst=createCaseFirst("toUpperCase");function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(de){var u=this.__data__,t=u.delete(de);return this.size=u.size,t}function stackGet(de){return this.__data__.get(de)}function stackHas(de){return this.__data__.has(de)}var LARGE_ARRAY_SIZE=200;function stackSet(de,u){var t=this.__data__;if(t instanceof ListCache){var N=t.__data__;if(!Map$1||N.length<LARGE_ARRAY_SIZE-1)return N.push([de,u]),this.size=++t.size,this;t=this.__data__=new MapCache(N)}return t.set(de,u),this.size=t.size,this}function Stack(de){var u=this.__data__=new ListCache(de);this.size=u.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(de,u){return de&&copyObject(u,keys(u),de)}function baseAssignIn(de,u){return de&&copyObject(u,keysIn(u),de)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(de,u){if(u)return de.slice();var t=de.length,N=allocUnsafe?allocUnsafe(t):new de.constructor(t);return de.copy(N),N}function arrayFilter(de,u){for(var t=-1,N=de==null?0:de.length,me=0,pe=[];++t<N;){var Le=de[t];u(Le,t,de)&&(pe[me++]=Le)}return pe}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(de){return de==null?[]:(de=Object(de),arrayFilter(nativeGetSymbols$1(de),function(u){return propertyIsEnumerable.call(de,u)}))}:stubArray;function copySymbols(de,u){return copyObject(de,getSymbols(de),u)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(de){for(var u=[];de;)arrayPush(u,getSymbols(de)),de=getPrototype(de);return u}:stubArray;function copySymbolsIn(de,u){return copyObject(de,getSymbolsIn(de),u)}function baseGetAllKeys(de,u,t){var N=u(de);return isArray(de)?N:arrayPush(N,t(de))}function getAllKeys(de){return baseGetAllKeys(de,keys,getSymbols)}function getAllKeysIn(de){return baseGetAllKeys(de,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(de){var u=baseGetTag(de),t=u==objectTag$2?de.constructor:void 0,N=t?toSource(t):"";if(N)switch(N){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return u});var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function initCloneArray(de){var u=de.length,t=new de.constructor(u);return u&&typeof de[0]=="string"&&hasOwnProperty$2.call(de,"index")&&(t.index=de.index,t.input=de.input),t}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(de){var u=new de.constructor(de.byteLength);return new Uint8Array$1(u).set(new Uint8Array$1(de)),u}function cloneDataView(de,u){var t=u?cloneArrayBuffer(de.buffer):de.buffer;return new de.constructor(t,de.byteOffset,de.byteLength)}var reFlags=/\w*$/;function cloneRegExp(de){var u=new de.constructor(de.source,reFlags.exec(de));return u.lastIndex=de.lastIndex,u}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(de){return symbolValueOf$1?Object(symbolValueOf$1.call(de)):{}}function cloneTypedArray(de,u){var t=u?cloneArrayBuffer(de.buffer):de.buffer;return new de.constructor(t,de.byteOffset,de.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(de,u,t){var N=de.constructor;switch(u){case arrayBufferTag$2:return cloneArrayBuffer(de);case boolTag$2:case dateTag$2:return new N(+de);case dataViewTag$2:return cloneDataView(de,t);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(de,t);case mapTag$3:return new N;case numberTag$2:case stringTag$3:return new N(de);case regexpTag$2:return cloneRegExp(de);case setTag$3:return new N;case symbolTag$2:return cloneSymbol(de)}}function initCloneObject(de){return typeof de.constructor=="function"&&!isPrototype(de)?baseCreate(getPrototype(de)):{}}var mapTag$2="[object Map]";function baseIsMap(de){return isObjectLike(de)&&getTag(de)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(de){return isObjectLike(de)&&getTag(de)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(de,u,t,N,me,pe){var Le,Ye=u&CLONE_DEEP_FLAG$2,nt=u&CLONE_FLAT_FLAG,ot=u&CLONE_SYMBOLS_FLAG$3;if(t&&(Le=me?t(de,N,me,pe):t(de)),Le!==void 0)return Le;if(!isObject$2(de))return de;var ft=isArray(de);if(ft){if(Le=initCloneArray(de),!Ye)return copyArray(de,Le)}else{var mt=getTag(de),bt=mt==funcTag||mt==genTag;if(isBuffer(de))return cloneBuffer(de,Ye);if(mt==objectTag$1||mt==argsTag$1||bt&&!me){if(Le=nt||bt?{}:initCloneObject(de),!Ye)return nt?copySymbolsIn(de,baseAssignIn(Le,de)):copySymbols(de,baseAssign(Le,de))}else{if(!cloneableTags[mt])return me?de:{};Le=initCloneByTag(de,mt,Ye)}}pe||(pe=new Stack);var yt=pe.get(de);if(yt)return yt;pe.set(de,Le),isSet(de)?de.forEach(function(Tt){Le.add(baseClone(Tt,u,t,Tt,de,pe))}):isMap(de)&&de.forEach(function(Tt,At){Le.set(At,baseClone(Tt,u,t,At,de,pe))});var _t=ot?nt?getAllKeysIn:getAllKeys:nt?keysIn:keys,Ct=ft?void 0:_t(de);return arrayEach(Ct||de,function(Tt,At){Ct&&(At=Tt,Tt=de[At]),assignValue(Le,At,baseClone(Tt,u,t,At,de,pe))}),Le}var CLONE_SYMBOLS_FLAG$2=4;function clone$1(de){return baseClone(de,CLONE_SYMBOLS_FLAG$2)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(de){return baseClone(de,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeepWith(de,u){return u=typeof u=="function"?u:void 0,baseClone(de,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,u)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(de){return this.__data__.set(de,HASH_UNDEFINED),this}function setCacheHas(de){return this.__data__.has(de)}function SetCache(de){var u=-1,t=de==null?0:de.length;for(this.__data__=new MapCache;++u<t;)this.add(de[u])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(de,u){for(var t=-1,N=de==null?0:de.length;++t<N;)if(u(de[t],t,de))return!0;return!1}function cacheHas(de,u){return de.has(u)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(de,u,t,N,me,pe){var Le=t&COMPARE_PARTIAL_FLAG$5,Ye=de.length,nt=u.length;if(Ye!=nt&&!(Le&&nt>Ye))return!1;var ot=pe.get(de),ft=pe.get(u);if(ot&&ft)return ot==u&&ft==de;var mt=-1,bt=!0,yt=t&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(pe.set(de,u),pe.set(u,de);++mt<Ye;){var _t=de[mt],Ct=u[mt];if(N)var Tt=Le?N(Ct,_t,mt,u,de,pe):N(_t,Ct,mt,de,u,pe);if(Tt!==void 0){if(Tt)continue;bt=!1;break}if(yt){if(!arraySome(u,function(At,It){if(!cacheHas(yt,It)&&(_t===At||me(_t,At,t,N,pe)))return yt.push(It)})){bt=!1;break}}else if(!(_t===Ct||me(_t,Ct,t,N,pe))){bt=!1;break}}return pe.delete(de),pe.delete(u),bt}function mapToArray(de){var u=-1,t=Array(de.size);return de.forEach(function(N,me){t[++u]=[me,N]}),t}function setToArray(de){var u=-1,t=Array(de.size);return de.forEach(function(N){t[++u]=N}),t}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(de,u,t,N,me,pe,Le){switch(t){case dataViewTag:if(de.byteLength!=u.byteLength||de.byteOffset!=u.byteOffset)return!1;de=de.buffer,u=u.buffer;case arrayBufferTag:return!(de.byteLength!=u.byteLength||!pe(new Uint8Array$1(de),new Uint8Array$1(u)));case boolTag:case dateTag:case numberTag:return eq(+de,+u);case errorTag:return de.name==u.name&&de.message==u.message;case regexpTag:case stringTag$1:return de==u+"";case mapTag:var Ye=mapToArray;case setTag:var nt=N&COMPARE_PARTIAL_FLAG$4;if(Ye||(Ye=setToArray),de.size!=u.size&&!nt)return!1;var ot=Le.get(de);if(ot)return ot==u;N|=COMPARE_UNORDERED_FLAG$2,Le.set(de,u);var ft=equalArrays(Ye(de),Ye(u),N,me,pe,Le);return Le.delete(de),ft;case symbolTag:if(symbolValueOf)return symbolValueOf.call(de)==symbolValueOf.call(u)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(de,u,t,N,me,pe){var Le=t&COMPARE_PARTIAL_FLAG$3,Ye=getAllKeys(de),nt=Ye.length,ot=getAllKeys(u),ft=ot.length;if(nt!=ft&&!Le)return!1;for(var mt=nt;mt--;){var bt=Ye[mt];if(!(Le?bt in u:hasOwnProperty$1.call(u,bt)))return!1}var yt=pe.get(de),_t=pe.get(u);if(yt&&_t)return yt==u&&_t==de;var Ct=!0;pe.set(de,u),pe.set(u,de);for(var Tt=Le;++mt<nt;){bt=Ye[mt];var At=de[bt],It=u[bt];if(N)var Pt=Le?N(It,At,bt,u,de,pe):N(At,It,bt,de,u,pe);if(!(Pt===void 0?At===It||me(At,It,t,N,pe):Pt)){Ct=!1;break}Tt||(Tt=bt=="constructor")}if(Ct&&!Tt){var Bt=de.constructor,Ot=u.constructor;Bt!=Ot&&"constructor"in de&&"constructor"in u&&!(typeof Bt=="function"&&Bt instanceof Bt&&typeof Ot=="function"&&Ot instanceof Ot)&&(Ct=!1)}return pe.delete(de),pe.delete(u),Ct}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(de,u,t,N,me,pe){var Le=isArray(de),Ye=isArray(u),nt=Le?arrayTag:getTag(de),ot=Ye?arrayTag:getTag(u);nt=nt==argsTag?objectTag:nt,ot=ot==argsTag?objectTag:ot;var ft=nt==objectTag,mt=ot==objectTag,bt=nt==ot;if(bt&&isBuffer(de)){if(!isBuffer(u))return!1;Le=!0,ft=!1}if(bt&&!ft)return pe||(pe=new Stack),Le||isTypedArray(de)?equalArrays(de,u,t,N,me,pe):equalByTag(de,u,nt,t,N,me,pe);if(!(t&COMPARE_PARTIAL_FLAG$2)){var yt=ft&&hasOwnProperty.call(de,"__wrapped__"),_t=mt&&hasOwnProperty.call(u,"__wrapped__");if(yt||_t){var Ct=yt?de.value():de,Tt=_t?u.value():u;return pe||(pe=new Stack),me(Ct,Tt,t,N,pe)}}return bt?(pe||(pe=new Stack),equalObjects(de,u,t,N,me,pe)):!1}function baseIsEqual(de,u,t,N,me){return de===u?!0:de==null||u==null||!isObjectLike(de)&&!isObjectLike(u)?de!==de&&u!==u:baseIsEqualDeep(de,u,t,N,baseIsEqual,me)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(de,u,t,N){var me=t.length,pe=me;if(de==null)return!pe;for(de=Object(de);me--;){var Le=t[me];if(Le[2]?Le[1]!==de[Le[0]]:!(Le[0]in de))return!1}for(;++me<pe;){Le=t[me];var Ye=Le[0],nt=de[Ye],ot=Le[1];if(Le[2]){if(nt===void 0&&!(Ye in de))return!1}else{var ft=new Stack,mt;if(!(mt===void 0?baseIsEqual(ot,nt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,N,ft):mt))return!1}}return!0}function isStrictComparable(de){return de===de&&!isObject$2(de)}function getMatchData(de){for(var u=keys(de),t=u.length;t--;){var N=u[t],me=de[N];u[t]=[N,me,isStrictComparable(me)]}return u}function matchesStrictComparable(de,u){return function(t){return t==null?!1:t[de]===u&&(u!==void 0||de in Object(t))}}function baseMatches(de){var u=getMatchData(de);return u.length==1&&u[0][2]?matchesStrictComparable(u[0][0],u[0][1]):function(t){return t===de||baseIsMatch(t,de,u)}}function baseHasIn(de,u){return de!=null&&u in Object(de)}function hasPath(de,u,t){u=castPath(u,de);for(var N=-1,me=u.length,pe=!1;++N<me;){var Le=toKey(u[N]);if(!(pe=de!=null&&t(de,Le)))break;de=de[Le]}return pe||++N!=me?pe:(me=de==null?0:de.length,!!me&&isLength$1(me)&&isIndex(Le,me)&&(isArray(de)||isArguments(de)))}function hasIn(de,u){return de!=null&&hasPath(de,u,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(de,u){return isKey(de)&&isStrictComparable(u)?matchesStrictComparable(toKey(de),u):function(t){var N=get(t,de);return N===void 0&&N===u?hasIn(t,de):baseIsEqual(u,N,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(de){return function(u){return u==null?void 0:u[de]}}function basePropertyDeep(de){return function(u){return baseGet(u,de)}}function property(de){return isKey(de)?baseProperty(toKey(de)):basePropertyDeep(de)}function baseIteratee(de){return typeof de=="function"?de:de==null?identity:typeof de=="object"?isArray(de)?baseMatchesProperty(de[0],de[1]):baseMatches(de):property(de)}function createBaseFor(de){return function(u,t,N){for(var me=-1,pe=Object(u),Le=N(u),Ye=Le.length;Ye--;){var nt=Le[++me];if(t(pe[nt],nt,pe)===!1)break}return u}}var baseFor=createBaseFor();function baseForOwn(de,u){return de&&baseFor(de,u,keys)}function createBaseEach(de,u){return function(t,N){if(t==null)return t;if(!isArrayLike(t))return de(t,N);for(var me=t.length,pe=-1,Le=Object(t);++pe<me&&N(Le[pe],pe,Le)!==!1;);return t}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(de,u,t){var N,me,pe,Le,Ye,nt,ot=0,ft=!1,mt=!1,bt=!0;if(typeof de!="function")throw new TypeError(FUNC_ERROR_TEXT$1);u=toNumber(u)||0,isObject$2(t)&&(ft=!!t.leading,mt="maxWait"in t,pe=mt?nativeMax(toNumber(t.maxWait)||0,u):pe,bt="trailing"in t?!!t.trailing:bt);function yt(Nt){var Lt=N,Et=me;return N=me=void 0,ot=Nt,Le=de.apply(Et,Lt),Le}function _t(Nt){return ot=Nt,Ye=setTimeout(At,u),ft?yt(Nt):Le}function Ct(Nt){var Lt=Nt-nt,Et=Nt-ot,kt=u-Lt;return mt?nativeMin(kt,pe-Et):kt}function Tt(Nt){var Lt=Nt-nt,Et=Nt-ot;return nt===void 0||Lt>=u||Lt<0||mt&&Et>=pe}function At(){var Nt=now();if(Tt(Nt))return It(Nt);Ye=setTimeout(At,Ct(Nt))}function It(Nt){return Ye=void 0,bt&&N?yt(Nt):(N=me=void 0,Le)}function Pt(){Ye!==void 0&&clearTimeout(Ye),ot=0,N=nt=me=Ye=void 0}function Bt(){return Ye===void 0?Le:It(now())}function Ot(){var Nt=now(),Lt=Tt(Nt);if(N=arguments,me=this,nt=Nt,Lt){if(Ye===void 0)return _t(nt);if(mt)return clearTimeout(Ye),Ye=setTimeout(At,u),yt(nt)}return Ye===void 0&&(Ye=setTimeout(At,u)),Le}return Ot.cancel=Pt,Ot.flush=Bt,Ot}function assignMergeValue(de,u,t){(t!==void 0&&!eq(de[u],t)||t===void 0&&!(u in de))&&baseAssignValue(de,u,t)}function isArrayLikeObject(de){return isObjectLike(de)&&isArrayLike(de)}function safeGet(de,u){if(!(u==="constructor"&&typeof de[u]=="function")&&u!="__proto__")return de[u]}function toPlainObject(de){return copyObject(de,keysIn(de))}function baseMergeDeep(de,u,t,N,me,pe,Le){var Ye=safeGet(de,t),nt=safeGet(u,t),ot=Le.get(nt);if(ot){assignMergeValue(de,t,ot);return}var ft=pe?pe(Ye,nt,t+"",de,u,Le):void 0,mt=ft===void 0;if(mt){var bt=isArray(nt),yt=!bt&&isBuffer(nt),_t=!bt&&!yt&&isTypedArray(nt);ft=nt,bt||yt||_t?isArray(Ye)?ft=Ye:isArrayLikeObject(Ye)?ft=copyArray(Ye):yt?(mt=!1,ft=cloneBuffer(nt,!0)):_t?(mt=!1,ft=cloneTypedArray(nt,!0)):ft=[]:isPlainObject(nt)||isArguments(nt)?(ft=Ye,isArguments(Ye)?ft=toPlainObject(Ye):(!isObject$2(Ye)||isFunction(Ye))&&(ft=initCloneObject(nt))):mt=!1}mt&&(Le.set(nt,ft),me(ft,nt,N,pe,Le),Le.delete(nt)),assignMergeValue(de,t,ft)}function baseMerge(de,u,t,N,me){de!==u&&baseFor(u,function(pe,Le){if(me||(me=new Stack),isObject$2(pe))baseMergeDeep(de,u,Le,t,baseMerge,N,me);else{var Ye=N?N(safeGet(de,Le),pe,Le+"",de,u,me):void 0;Ye===void 0&&(Ye=pe),assignMergeValue(de,Le,Ye)}},keysIn)}function last(de){var u=de==null?0:de.length;return u?de[u-1]:void 0}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(de){return de=toString$1(de),de&&reHasRegExpChar.test(de)?de.replace(reRegExpChar,"\\$&"):de}function baseMap(de,u){var t=-1,N=isArrayLike(de)?Array(de.length):[];return baseEach(de,function(me,pe,Le){N[++t]=u(me,pe,Le)}),N}function map$1(de,u){var t=isArray(de)?arrayMap:baseMap;return t(de,baseIteratee(u))}var stringTag="[object String]";function isString(de){return typeof de=="string"||!isArray(de)&&isObjectLike(de)&&baseGetTag(de)==stringTag}function parent(de,u){return u.length<2?de:baseGet(de,baseSlice(u,0,-1))}function isElement$2(de){return isObjectLike(de)&&de.nodeType===1&&!isPlainObject(de)}function isEqual(de,u){return baseIsEqual(de,u)}function isEqualWith(de,u,t){t=typeof t=="function"?t:void 0;var N=t?t(de,u):void 0;return N===void 0?baseIsEqual(de,u,void 0,t):!!N}function mapValues(de,u){var t={};return u=baseIteratee(u),baseForOwn(de,function(N,me,pe){baseAssignValue(t,me,u(N,me,pe))}),t}var merge=createAssigner(function(de,u,t){baseMerge(de,u,t)});function baseUnset(de,u){return u=castPath(u,de),de=parent(de,u),de==null||delete de[toKey(last(u))]}function baseSet(de,u,t,N){if(!isObject$2(de))return de;u=castPath(u,de);for(var me=-1,pe=u.length,Le=pe-1,Ye=de;Ye!=null&&++me<pe;){var nt=toKey(u[me]),ot=t;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return de;if(me!=Le){var ft=Ye[nt];ot=void 0,ot===void 0&&(ot=isObject$2(ft)?ft:isIndex(u[me+1])?[]:{})}assignValue(Ye,nt,ot),Ye=Ye[nt]}return de}function set(de,u,t){return de==null?de:baseSet(de,u,t)}var FUNC_ERROR_TEXT="Expected a function";function throttle(de,u,t){var N=!0,me=!0;if(typeof de!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(t)&&(N="leading"in t?!!t.leading:N,me="trailing"in t?!!t.trailing:me),debounce(de,u,{leading:N,maxWait:u,trailing:me})}function unset(de,u){return de==null?!0:baseUnset(de,u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let globalVar;try{globalVar={window,document}}catch{/* istanbul ignore next -- @preserve */globalVar={window:{},document:{}}}var global$1=globalVar;function getUserAgent(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const userAgent=getUserAgent(),env={isMac:isMac(userAgent),isWindows:isWindows(userAgent),isGecko:isGecko(userAgent),isSafari:isSafari(userAgent),isiOS:isiOS(userAgent),isAndroid:isAndroid(userAgent),isBlink:isBlink(userAgent),get isMediaForcedColors(){return isMediaForcedColors()},features:{isRegExpUnicodePropertySupported:isRegExpUnicodePropertySupported()}};function isMac(de){return de.indexOf("macintosh")>-1}function isWindows(de){return de.indexOf("windows")>-1}function isGecko(de){return!!de.match(/gecko\/\d+/)}function isSafari(de){return de.indexOf(" applewebkit/")>-1&&de.indexOf("chrome")===-1}function isiOS(de){return!!de.match(/iphone|ipad/i)||isMac(de)&&navigator.maxTouchPoints>0}function isAndroid(de){return de.indexOf("android")>-1}function isBlink(de){return de.indexOf("chrome/")>-1&&de.indexOf("edge/")<0}function isRegExpUnicodePropertySupported(){let de=!1;try{de="".search(new RegExp("[\\p{L}]","u"))===0}catch{}return de}function isMediaForcedColors(){return global$1.window.matchMedia?global$1.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fastDiff(de,u,t,N){t=t||function(nt,ot){return nt===ot};const me=Array.isArray(de)?de:Array.prototype.slice.call(de),pe=Array.isArray(u)?u:Array.prototype.slice.call(u),Le=findChangeBoundaryIndexes(me,pe,t);return N?changeIndexesToAtomicChanges(Le,pe.length):changeIndexesToChanges(pe,Le)}function findChangeBoundaryIndexes(de,u,t){const N=findFirstDifferenceIndex(de,u,t);if(N===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const me=cutAndReverse(de,N),pe=cutAndReverse(u,N),Le=findFirstDifferenceIndex(me,pe,t),Ye=de.length-Le,nt=u.length-Le;return{firstIndex:N,lastIndexOld:Ye,lastIndexNew:nt}}function findFirstDifferenceIndex(de,u,t){for(let N=0;N<Math.max(de.length,u.length);N++)if(de[N]===void 0||u[N]===void 0||!t(de[N],u[N]))return N;return-1}function cutAndReverse(de,u){return de.slice(u).reverse()}function changeIndexesToChanges(de,u){const t=[],{firstIndex:N,lastIndexOld:me,lastIndexNew:pe}=u;return pe-N>0&&t.push({index:N,type:"insert",values:de.slice(N,pe)}),me-N>0&&t.push({index:N+(pe-N),type:"delete",howMany:me-N}),t}function changeIndexesToAtomicChanges(de,u){const{firstIndex:t,lastIndexOld:N,lastIndexNew:me}=de;if(t===-1)return Array(u).fill("equal");let pe=[];return t>0&&(pe=pe.concat(Array(t).fill("equal"))),me-t>0&&(pe=pe.concat(Array(me-t).fill("insert"))),N-t>0&&(pe=pe.concat(Array(N-t).fill("delete"))),me<u&&(pe=pe.concat(Array(u-me).fill("equal"))),pe}function diff(de,u,t){t=t||function(Ct,Tt){return Ct===Tt};const N=de.length,me=u.length;if(N>200||me>200||N+me>300)return diff.fastDiff(de,u,t,!0);let pe,Le;if(me<N){const Ct=de;de=u,u=Ct,pe="delete",Le="insert"}else pe="insert",Le="delete";const Ye=de.length,nt=u.length,ot=nt-Ye,ft={},mt={};function bt(Ct){const Tt=(mt[Ct-1]!==void 0?mt[Ct-1]:-1)+1,At=mt[Ct+1]!==void 0?mt[Ct+1]:-1,It=Tt>At?-1:1;ft[Ct+It]&&(ft[Ct]=ft[Ct+It].slice(0)),ft[Ct]||(ft[Ct]=[]),ft[Ct].push(Tt>At?pe:Le);let Pt=Math.max(Tt,At),Bt=Pt-Ct;for(;Bt<Ye&&Pt<nt&&t(de[Bt],u[Pt]);)Bt++,Pt++,ft[Ct].push("equal");return Pt}let yt=0,_t;do{for(_t=-yt;_t<ot;_t++)mt[_t]=bt(_t);for(_t=ot+yt;_t>ot;_t--)mt[_t]=bt(_t);mt[ot]=bt(ot),yt++}while(mt[ot]!==nt);return ft[ot].slice(1)}diff.fastDiff=fastDiff;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spy(){return function de(){de.called=!0}}class EventInfo{constructor(u,t){xt(this,"source");xt(this,"name");xt(this,"path");xt(this,"stop");xt(this,"off");xt(this,"return");this.source=u,this.name=t,this.path=[],this.stop=spy(),this.off=spy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS=new Array(256).fill("").map((de,u)=>("0"+u.toString(16)).slice(-2));function uid(){const[de,u,t,N]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS[de>>0&255]+HEX_NUMBERS[de>>8&255]+HEX_NUMBERS[de>>16&255]+HEX_NUMBERS[de>>24&255]+HEX_NUMBERS[u>>0&255]+HEX_NUMBERS[u>>8&255]+HEX_NUMBERS[u>>16&255]+HEX_NUMBERS[u>>24&255]+HEX_NUMBERS[t>>0&255]+HEX_NUMBERS[t>>8&255]+HEX_NUMBERS[t>>16&255]+HEX_NUMBERS[t>>24&255]+HEX_NUMBERS[N>>0&255]+HEX_NUMBERS[N>>8&255]+HEX_NUMBERS[N>>16&255]+HEX_NUMBERS[N>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const priorities={get(de="normal"){return typeof de!="number"?this[de]||this.normal:de},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function insertToPriorityArray(de,u){const t=priorities.get(u.priority);let N=0,me=de.length;for(;N<me;){const pe=N+me>>1;priorities.get(de[pe].priority)<t?me=pe:N=pe+1}de.splice(N,0,u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DOCUMENTATION_URL="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class CKEditorError extends Error{constructor(t,N,me){super(getErrorMessage(t,me));xt(this,"context");xt(this,"data");this.name="CKEditorError",this.context=N,this.data=me}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,N){if(t.is&&t.is("CKEditorError"))throw t;const me=new CKEditorError(t.message,N);throw me.stack=t.stack,me}}function logWarning(de,u){console.warn(...formatConsoleArguments(de,u))}function logError(de,u){console.error(...formatConsoleArguments(de,u))}function getLinkToDocumentationMessage(de){return`
Read more: ${DOCUMENTATION_URL}#error-${de}`}function getErrorMessage(de,u){const t=new WeakSet,me=u?` ${JSON.stringify(u,(Le,Ye)=>{if(typeof Ye=="object"&&Ye!==null){if(t.has(Ye))return`[object ${Ye.constructor.name}]`;t.add(Ye)}return Ye})}`:"",pe=getLinkToDocumentationMessage(de);return de+me+pe}function formatConsoleArguments(de,u){const t=getLinkToDocumentationMessage(de);return u?[de,u,t]:[de,t]}const version="44.3.0",releaseDate=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new CKEditorError("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=version;const _listeningTo=Symbol("listeningTo"),_emitterId=Symbol("emitterId"),_delegations=Symbol("delegations"),defaultEmitterClass$1=EmitterMixin(Object);function EmitterMixin(de){if(!de)return defaultEmitterClass$1;class u extends de{on(N,me,pe){this.listenTo(this,N,me,pe)}once(N,me,pe){let Le=!1;const Ye=(nt,...ot)=>{Le||(Le=!0,nt.off(),me.call(this,nt,...ot))};this.listenTo(this,N,Ye,pe)}off(N,me){this.stopListening(this,N,me)}listenTo(N,me,pe,Le={}){let Ye,nt;this[_listeningTo]||(this[_listeningTo]={});const ot=this[_listeningTo];_getEmitterId(N)||_setEmitterId(N);const ft=_getEmitterId(N);(Ye=ot[ft])||(Ye=ot[ft]={emitter:N,callbacks:{}}),(nt=Ye.callbacks[me])||(nt=Ye.callbacks[me]=[]),nt.push(pe),addEventListener$1(this,N,me,pe,Le)}stopListening(N,me,pe){const Le=this[_listeningTo];let Ye=N&&_getEmitterId(N);const nt=Le&&Ye?Le[Ye]:void 0,ot=nt&&me?nt.callbacks[me]:void 0;if(!(!Le||N&&!nt||me&&!ot))if(pe)removeEventListener$1(this,N,me,pe),ot.indexOf(pe)!==-1&&(ot.length===1?delete nt.callbacks[me]:removeEventListener$1(this,N,me,pe));else if(ot){for(;pe=ot.pop();)removeEventListener$1(this,N,me,pe);delete nt.callbacks[me]}else if(nt){for(me in nt.callbacks)this.stopListening(N,me);delete Le[Ye]}else{for(Ye in Le)this.stopListening(Le[Ye].emitter);delete this[_listeningTo]}}fire(N,...me){try{const pe=N instanceof EventInfo?N:new EventInfo(this,N),Le=pe.name;let Ye=getCallbacksForEvent(this,Le);if(pe.path.push(this),Ye){Ye=Ye.slice();for(let ot=0;ot<Ye.length;ot++){const ft=Ye[ot].callback;if(ft.call(this,pe,...me),pe.off.called&&(delete pe.off.called,this._removeEventListener(Le,ft)),pe.stop.called)break}}const nt=this[_delegations];if(nt){const ot=nt.get(Le),ft=nt.get("*");ot&&fireDelegatedEvents(ot,pe,me),ft&&fireDelegatedEvents(ft,pe,me)}return pe.return}catch(pe){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(pe,this)}}delegate(...N){return{to:(me,pe)=>{this[_delegations]||(this[_delegations]=new Map),N.forEach(Le=>{const Ye=this[_delegations].get(Le);Ye?Ye.set(me,pe):this[_delegations].set(Le,new Map([[me,pe]]))})}}}stopDelegating(N,me){if(this[_delegations])if(!N)this[_delegations].clear();else if(!me)this[_delegations].delete(N);else{const pe=this[_delegations].get(N);pe&&pe.delete(me)}}_addEventListener(N,me,pe){createEventNamespace(this,N);const Le=getCallbacksListsForNamespace(this,N),Ye=priorities.get(pe.priority),nt={callback:me,priority:Ye};for(const ot of Le)insertToPriorityArray(ot,nt)}_removeEventListener(N,me){const pe=getCallbacksListsForNamespace(this,N);for(const Le of pe)for(let Ye=0;Ye<Le.length;Ye++)Le[Ye].callback==me&&(Le.splice(Ye,1),Ye--)}}return u}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(de=>{EmitterMixin[de]=defaultEmitterClass$1.prototype[de]});function _getEmitterListenedTo(de,u){const t=de[_listeningTo];return t&&t[u]?t[u].emitter:null}function _setEmitterId(de,u){de[_emitterId]||(de[_emitterId]=u||uid())}function _getEmitterId(de){return de[_emitterId]}function getEvents(de){return de._events||Object.defineProperty(de,"_events",{value:{}}),de._events}function makeEventNode(){return{callbacks:[],childEvents:[]}}function createEventNamespace(de,u){const t=getEvents(de);if(t[u])return;let N=u,me=null;const pe=[];for(;N!==""&&!t[N];)t[N]=makeEventNode(),pe.push(t[N]),me&&t[N].childEvents.push(me),me=N,N=N.substr(0,N.lastIndexOf(":"));if(N!==""){for(const Le of pe)Le.callbacks=t[N].callbacks.slice();t[N].childEvents.push(me)}}function getCallbacksListsForNamespace(de,u){const t=getEvents(de)[u];if(!t)return[];let N=[t.callbacks];for(let me=0;me<t.childEvents.length;me++){const pe=getCallbacksListsForNamespace(de,t.childEvents[me]);N=N.concat(pe)}return N}function getCallbacksForEvent(de,u){if(!de._events)return null;let t=u;do{const N=de._events[t];if(N&&N.callbacks&&N.callbacks.length)return N.callbacks;const me=t.lastIndexOf(":");t=me>-1?t.substring(0,me):""}while(t);return null}function fireDelegatedEvents(de,u,t){for(let[N,me]of de){me?typeof me=="function"&&(me=me(u.name)):me=u.name;const pe=new EventInfo(u.source,me);pe.path=[...u.path],N.fire(pe,...t)}}function addEventListener$1(de,u,t,N,me){u._addEventListener?u._addEventListener(t,N,me):de._addEventListener.call(u,t,N,me)}function removeEventListener$1(de,u,t,N){u._removeEventListener?u._removeEventListener(t,N):de._removeEventListener.call(u,t,N)}const observablePropertiesSymbol=Symbol("observableProperties"),boundObservablesSymbol=Symbol("boundObservables"),boundPropertiesSymbol=Symbol("boundProperties"),decoratedMethods=Symbol("decoratedMethods"),decoratedOriginal=Symbol("decoratedOriginal"),defaultObservableClass=ObservableMixin(EmitterMixin());function ObservableMixin(de){var t,N,me,pe,Le;if(!de)return defaultObservableClass;class u extends(Le=de,pe=observablePropertiesSymbol,me=decoratedMethods,N=boundPropertiesSymbol,t=boundObservablesSymbol,Le){constructor(){super(...arguments);xt(this,pe);xt(this,me);xt(this,N);xt(this,t)}set(ot,ft){if(isObject$2(ot)){Object.keys(ot).forEach(bt=>{this.set(bt,ot[bt])},this);return}initObservable(this);const mt=this[observablePropertiesSymbol];if(ot in this&&!mt.has(ot))throw new CKEditorError("observable-set-cannot-override",this);Object.defineProperty(this,ot,{enumerable:!0,configurable:!0,get(){return mt.get(ot)},set(bt){const yt=mt.get(ot);let _t=this.fire(`set:${ot}`,ot,bt,yt);_t===void 0&&(_t=bt),(yt!==_t||!mt.has(ot))&&(mt.set(ot,_t),this.fire(`change:${ot}`,ot,_t,yt))}}),this[ot]=ft}bind(...ot){if(!ot.length||!isStringArray$1(ot))throw new CKEditorError("observable-bind-wrong-properties",this);if(new Set(ot).size!==ot.length)throw new CKEditorError("observable-bind-duplicate-properties",this);initObservable(this);const ft=this[boundPropertiesSymbol];ot.forEach(bt=>{if(ft.has(bt))throw new CKEditorError("observable-bind-rebind",this)});const mt=new Map;return ot.forEach(bt=>{const yt={property:bt,to:[]};ft.set(bt,yt),mt.set(bt,yt)}),{to:bindTo,toMany:bindToMany,_observable:this,_bindProperties:ot,_to:[],_bindings:mt}}unbind(...ot){if(!this[observablePropertiesSymbol])return;const ft=this[boundPropertiesSymbol],mt=this[boundObservablesSymbol];if(ot.length){if(!isStringArray$1(ot))throw new CKEditorError("observable-unbind-wrong-properties",this);ot.forEach(bt=>{const yt=ft.get(bt);yt&&(yt.to.forEach(([_t,Ct])=>{const Tt=mt.get(_t),At=Tt[Ct];At.delete(yt),At.size||delete Tt[Ct],Object.keys(Tt).length||(mt.delete(_t),this.stopListening(_t,"change"))}),ft.delete(bt))})}else mt.forEach((bt,yt)=>{this.stopListening(yt,"change")}),mt.clear(),ft.clear()}decorate(ot){initObservable(this);const ft=this[ot];if(!ft)throw new CKEditorError("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:ot});this.on(ot,(mt,bt)=>{mt.return=ft.apply(this,bt)}),this[ot]=function(...mt){return this.fire(ot,mt)},this[ot][decoratedOriginal]=ft,this[decoratedMethods]||(this[decoratedMethods]=[]),this[decoratedMethods].push(ot)}stopListening(ot,ft,mt){if(!ot&&this[decoratedMethods]){for(const bt of this[decoratedMethods])this[bt]=this[bt][decoratedOriginal];delete this[decoratedMethods]}super.stopListening(ot,ft,mt)}}return u}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(de=>{ObservableMixin[de]=defaultObservableClass.prototype[de]});function initObservable(de){de[observablePropertiesSymbol]||(Object.defineProperty(de,observablePropertiesSymbol,{value:new Map}),Object.defineProperty(de,boundObservablesSymbol,{value:new Map}),Object.defineProperty(de,boundPropertiesSymbol,{value:new Map}))}function bindTo(...de){const u=parseBindToArgs(...de),t=Array.from(this._bindings.keys()),N=t.length;if(!u.callback&&u.to.length>1)throw new CKEditorError("observable-bind-to-no-callback",this);if(N>1&&u.callback)throw new CKEditorError("observable-bind-to-extra-callback",this);u.to.forEach(me=>{if(me.properties.length&&me.properties.length!==N)throw new CKEditorError("observable-bind-to-properties-length",this);me.properties.length||(me.properties=this._bindProperties)}),this._to=u.to,u.callback&&(this._bindings.get(t[0]).callback=u.callback),attachBindToListeners(this._observable,this._to),updateBindToBound(this),this._bindProperties.forEach(me=>{updateBoundObservableProperty(this._observable,me)})}function bindToMany(de,u,t){if(this._bindings.size>1)throw new CKEditorError("observable-bind-to-many-not-one-binding",this);this.to(...getBindingTargets(de,u),t)}function getBindingTargets(de,u){const t=de.map(N=>[N,u]);return Array.prototype.concat.apply([],t)}function isStringArray$1(de){return de.every(u=>typeof u=="string")}function parseBindToArgs(...de){if(!de.length)throw new CKEditorError("observable-bind-to-parse-error",null);const u={to:[]};let t;return typeof de[de.length-1]=="function"&&(u.callback=de.pop()),de.forEach(N=>{if(typeof N=="string")t.properties.push(N);else if(typeof N=="object")t={observable:N,properties:[]},u.to.push(t);else throw new CKEditorError("observable-bind-to-parse-error",null)}),u}function updateBoundObservables(de,u,t,N){const me=de[boundObservablesSymbol],pe=me.get(t),Le=pe||{};Le[N]||(Le[N]=new Set),Le[N].add(u),pe||me.set(t,Le)}function updateBindToBound(de){let u;de._bindings.forEach((t,N)=>{de._to.forEach(me=>{u=me.properties[t.callback?0:de._bindProperties.indexOf(N)],t.to.push([me.observable,u]),updateBoundObservables(de._observable,t,me.observable,u)})})}function updateBoundObservableProperty(de,u){const N=de[boundPropertiesSymbol].get(u);let me;N.callback?me=N.callback.apply(de,N.to.map(pe=>pe[0][pe[1]])):(me=N.to[0],me=me[0][me[1]]),Object.prototype.hasOwnProperty.call(de,u)?de[u]=me:de.set(u,me)}function attachBindToListeners(de,u){u.forEach(t=>{const N=de[boundObservablesSymbol];let me;N.get(t.observable)||de.listenTo(t.observable,"change",(pe,Le)=>{me=N.get(t.observable)[Le],me&&me.forEach(Ye=>{updateBoundObservableProperty(de,Ye.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ElementReplacer{constructor(){xt(this,"_replacedElements");this._replacedElements=[]}replace(u,t){this._replacedElements.push({element:u,newElement:t}),u.style.display="none",t&&u.parentNode.insertBefore(t,u.nextSibling)}restore(){this._replacedElements.forEach(({element:u,newElement:t})=>{u.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function count(de){let u=0;for(const t of de)u++;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function compareArrays(de,u){const t=Math.min(de.length,u.length);for(let N=0;N<t;N++)if(de[N]!=u[N])return N;return de.length==u.length?"same":de.length<u.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isIterable(de){return!!(de&&de[Symbol.iterator])}function createElement(de,u,t={},N=[]){const me=t&&t.xmlns,pe=me?de.createElementNS(me,u):de.createElement(u);for(const Le in t)pe.setAttribute(Le,t[Le]);(isString(N)||!isIterable(N))&&(N=[N]);for(let Le of N)isString(Le)&&(Le=de.createTextNode(Le)),pe.appendChild(Le);return pe}class Config{constructor(u,t){xt(this,"_config");this._config=Object.create(null),t&&this.define(cloneConfig(t)),u&&this._setObjectToTarget(this._config,u)}set(u,t){this._setToTarget(this._config,u,t)}define(u,t){this._setToTarget(this._config,u,t,!0)}get(u){return this._getFromSource(this._config,u)}*names(){for(const u of Object.keys(this._config))yield u}_setToTarget(u,t,N,me=!1){if(isPlainObject(t)){this._setObjectToTarget(u,t,me);return}const pe=t.split(".");t=pe.pop();for(const Le of pe)isPlainObject(u[Le])||(u[Le]=Object.create(null)),u=u[Le];if(isPlainObject(N)){isPlainObject(u[t])||(u[t]=Object.create(null)),u=u[t],this._setObjectToTarget(u,N,me);return}me&&typeof u[t]<"u"||(u[t]=N)}_getFromSource(u,t){const N=t.split(".");t=N.pop();for(const me of N){if(!isPlainObject(u[me])){u=null;break}u=u[me]}return u?cloneConfig(u[t]):void 0}_setObjectToTarget(u,t,N){Object.keys(t).forEach(me=>{this._setToTarget(u,me,t[me],N)})}}function cloneConfig(de){return cloneDeepWith(de,leaveItemReferences)}function leaveItemReferences(de){return isElement$2(de)||typeof de=="function"?de:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isNode(de){if(de){if(de.defaultView)return de instanceof de.defaultView.Document;if(de.ownerDocument&&de.ownerDocument.defaultView)return de instanceof de.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isWindow(de){const u=Object.prototype.toString.apply(de);return u=="[object Window]"||u=="[object global]"}const defaultEmitterClass=DomEmitterMixin(EmitterMixin());function DomEmitterMixin(de){if(!de)return defaultEmitterClass;class u extends de{listenTo(N,me,pe,Le={}){if(isNode(N)||isWindow(N)){const Ye={capture:!!Le.useCapture,passive:!!Le.usePassive},nt=this._getProxyEmitter(N,Ye)||new ProxyEmitter(N,Ye);this.listenTo(nt,me,pe,Le)}else super.listenTo(N,me,pe,Le)}stopListening(N,me,pe){if(isNode(N)||isWindow(N)){const Le=this._getAllProxyEmitters(N);for(const Ye of Le)this.stopListening(Ye,me,pe)}else super.stopListening(N,me,pe)}_getProxyEmitter(N,me){return _getEmitterListenedTo(this,getProxyEmitterId(N,me))}_getAllProxyEmitters(N){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(me=>this._getProxyEmitter(N,me)).filter(me=>!!me)}}return u}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(de=>{DomEmitterMixin[de]=defaultEmitterClass.prototype[de]});class ProxyEmitter extends EmitterMixin(){constructor(t,N){super();xt(this,"_domNode");xt(this,"_options");xt(this,"_domListeners");_setEmitterId(this,getProxyEmitterId(t,N)),this._domNode=t,this._options=N}attach(t){if(this._domListeners&&this._domListeners[t])return;const N=this._createDomListener(t);this._domNode.addEventListener(t,N,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=N}detach(t){let N;this._domListeners[t]&&(!(N=this._events[t])||!N.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,N,me){this.attach(t),EmitterMixin().prototype._addEventListener.call(this,t,N,me)}_removeEventListener(t,N){EmitterMixin().prototype._removeEventListener.call(this,t,N),this.detach(t)}_createDomListener(t){const N=me=>{this.fire(t,me)};return N.removeListener=()=>{this._domNode.removeEventListener(t,N,this._options),delete this._domListeners[t]},N}}function getNodeUID(de){return de["data-ck-expando"]||(de["data-ck-expando"]=uid())}function getProxyEmitterId(de,u){let t=getNodeUID(de);for(const N of Object.keys(u).sort())u[N]&&(t+="-"+N);return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getAncestors(de){const u=[];let t=de;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)u.unshift(t),t=t.parentNode;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDataFromElement(de){return de instanceof HTMLTextAreaElement?de.value:de.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getBorderWidths(de){const u=de.ownerDocument.defaultView.getComputedStyle(de);return{top:parseInt(u.borderTopWidth,10),right:parseInt(u.borderRightWidth,10),bottom:parseInt(u.borderBottomWidth,10),left:parseInt(u.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getRangeFromMouseEvent(de){if(!de.target)return null;const u=de.target.ownerDocument,t=de.clientX,N=de.clientY;let me=null;return u.caretRangeFromPoint&&u.caretRangeFromPoint(t,N)?me=u.caretRangeFromPoint(t,N):de.rangeParent&&(me=u.createRange(),me.setStart(de.rangeParent,de.rangeOffset),me.collapse(!0)),me}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isText(de){return Object.prototype.toString.call(de)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isRange(de){return Object.prototype.toString.apply(de)=="[object Range]"}function getPositionedAncestor(de){return!de||!de.parentNode||de.offsetParent===global$1.document.body?null:de.offsetParent}const rectProperties=["top","right","bottom","left","width","height"];class Rect{constructor(u){xt(this,"top");xt(this,"right");xt(this,"bottom");xt(this,"left");xt(this,"width");xt(this,"height");xt(this,"_source");const t=isRange(u);if(Object.defineProperty(this,"_source",{value:u._source||u,writable:!0,enumerable:!1}),isDomElement(u)||t)if(t){const N=Rect.getDomRangeRects(u);copyRectProperties(this,Rect.getBoundingRect(N))}else copyRectProperties(this,u.getBoundingClientRect());else if(isWindow(u)){const{innerWidth:N,innerHeight:me}=u;copyRectProperties(this,{top:0,right:N,bottom:me,left:0,width:N,height:me})}else copyRectProperties(this,u)}clone(){return new Rect(this)}moveTo(u,t){return this.top=t,this.right=u+this.width,this.bottom=t+this.height,this.left=u,this}moveBy(u,t){return this.top+=t,this.right+=u,this.left+=u,this.bottom+=t,this}getIntersection(u){const t={top:Math.max(this.top,u.top),right:Math.min(this.right,u.right),bottom:Math.min(this.bottom,u.bottom),left:Math.max(this.left,u.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const N=new Rect(t);return N._source=this._source,N}}getIntersectionArea(u){const t=this.getIntersection(u);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const u=this._source;let t=this.clone();if(isBody(u))return t;let N=u,me=u.parentNode||u.commonAncestorContainer,pe;for(;me&&!isBody(me);){const Le=getElementOverflow(me)==="visible";N instanceof HTMLElement&&getElementPosition(N)==="absolute"&&(pe=N);const Ye=getElementPosition(me);if(Le||pe&&(Ye==="relative"&&Le||Ye!=="relative")){N=me,me=me.parentNode;continue}const nt=new Rect(me),ot=t.getIntersection(nt);if(ot)ot.getArea()<t.getArea()&&(t=ot);else return null;N=me,me=me.parentNode}return t}isEqual(u){for(const t of rectProperties)if(this[t]!==u[t])return!1;return!0}contains(u){const t=this.getIntersection(u);return!!(t&&t.isEqual(u))}toAbsoluteRect(){const{scrollX:u,scrollY:t}=global$1.window,N=this.clone().moveBy(u,t);if(isDomElement(N._source)){const me=getPositionedAncestor(N._source);me&&shiftRectToCompensatePositionedAncestor(N,me)}return N}excludeScrollbarsAndBorders(){const u=this._source;let t,N,me;if(isWindow(u))t=u.innerWidth-u.document.documentElement.clientWidth,N=u.innerHeight-u.document.documentElement.clientHeight,me=u.getComputedStyle(u.document.documentElement).direction;else{const pe=getBorderWidths(u);t=u.offsetWidth-u.clientWidth-pe.left-pe.right,N=u.offsetHeight-u.clientHeight-pe.top-pe.bottom,me=u.ownerDocument.defaultView.getComputedStyle(u).direction,this.left+=pe.left,this.top+=pe.top,this.right-=pe.right,this.bottom-=pe.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,me==="ltr"?this.right-=t:this.left+=t,this.height-=N,this.bottom-=N,this}static getDomRangeRects(u){const t=[],N=Array.from(u.getClientRects());if(N.length)for(const me of N)t.push(new Rect(me));else{let me=u.startContainer;isText(me)&&(me=me.parentNode);const pe=new Rect(me.getBoundingClientRect());pe.right=pe.left,pe.width=0,t.push(pe)}return t}static getBoundingRect(u){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let N=0;for(const me of u)N++,t.left=Math.min(t.left,me.left),t.top=Math.min(t.top,me.top),t.right=Math.max(t.right,me.right),t.bottom=Math.max(t.bottom,me.bottom);return N==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Rect(t))}}function copyRectProperties(de,u){for(const t of rectProperties)de[t]=u[t]}function isBody(de){return isDomElement(de)?de===de.ownerDocument.body:!1}function isDomElement(de){return de!==null&&typeof de=="object"&&de.nodeType===1&&typeof de.getBoundingClientRect=="function"}function getElementPosition(de){return de instanceof HTMLElement?de.ownerDocument.defaultView.getComputedStyle(de).position:"static"}function getElementOverflow(de){return de instanceof HTMLElement?de.ownerDocument.defaultView.getComputedStyle(de).overflow:"visible"}function shiftRectToCompensatePositionedAncestor(de,u){const t=new Rect(u),N=getBorderWidths(u);let me=0,pe=0;me-=t.left,pe-=t.top,me+=u.scrollLeft,pe+=u.scrollTop,me-=N.left,pe-=N.top,de.moveBy(me,pe)}var Fn;let ResizeObserver$1=(Fn=class{constructor(u,t){xt(this,"_element");xt(this,"_callback");Fn._observerInstance||Fn._createObserver(),this._element=u,this._callback=t,Fn._addElementCallback(u,t),Fn._observerInstance.observe(u)}get element(){return this._element}destroy(){Fn._deleteElementCallback(this._element,this._callback)}static _addElementCallback(u,t){Fn._elementCallbacks||(Fn._elementCallbacks=new Map);let N=Fn._elementCallbacks.get(u);N||(N=new Set,Fn._elementCallbacks.set(u,N)),N.add(t)}static _deleteElementCallback(u,t){const N=Fn._getElementCallbacks(u);N&&(N.delete(t),N.size||(Fn._elementCallbacks.delete(u),Fn._observerInstance.unobserve(u))),Fn._elementCallbacks&&!Fn._elementCallbacks.size&&(Fn._observerInstance=null,Fn._elementCallbacks=null)}static _getElementCallbacks(u){return Fn._elementCallbacks?Fn._elementCallbacks.get(u):null}static _createObserver(){Fn._observerInstance=new global$1.window.ResizeObserver(u=>{for(const t of u){const N=Fn._getElementCallbacks(t.target);if(N)for(const me of N)me(t)}})}},xt(Fn,"_observerInstance",null),xt(Fn,"_elementCallbacks",null),Fn);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function setDataInElement(de,u){de instanceof HTMLTextAreaElement&&(de.value=u),de.innerHTML=u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toUnit(de){return u=>u+de}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function indexOf(de){let u=0;for(;de.previousSibling;)de=de.previousSibling,u++;return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function insertAt(de,u,t){de.insertBefore(t,de.childNodes[u]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isComment(de){return de&&de.nodeType===Node.COMMENT_NODE}function isValidAttributeName(de){try{global$1.document.createAttribute(de)}catch{return!1}return!0}function isVisible(de){return de?isText(de)?isVisible(de.parentElement):de.getClientRects?!!de.getClientRects().length:!1:!1}function getOptimalPosition({element:de,target:u,positions:t,limiter:N,fitInViewport:me,viewportOffsetConfig:pe}){isFunction(u)&&(u=u()),isFunction(N)&&(N=N());const Le=getPositionedAncestor(de),Ye=getConstrainedViewportRect(pe),nt=new Rect(de),ot=getVisibleViewportIntersectionRect(u,Ye);let ft;if(!ot||!Ye.getIntersection(ot))return null;const mt={targetRect:ot,elementRect:nt,positionedElementAncestor:Le,viewportRect:Ye};if(!N&&!me)ft=new PositionObject(t[0],mt);else{if(N){const bt=getVisibleViewportIntersectionRect(N,Ye);bt&&(mt.limiterRect=bt)}ft=getBestPosition(t,mt)}return ft}function getVisibleViewportIntersectionRect(de,u){const t=new Rect(de).getVisible();return t?t.getIntersection(u):null}function getConstrainedViewportRect(de){de=Object.assign({top:0,bottom:0,left:0,right:0},de);const u=new Rect(global$1.window);return u.top+=de.top,u.height-=de.top,u.bottom-=de.bottom,u.height-=de.bottom,u}function getBestPosition(de,u){const{elementRect:t}=u,N=t.getArea(),me=de.map(Ye=>new PositionObject(Ye,u)).filter(Ye=>!!Ye.name);let pe=0,Le=null;for(const Ye of me){const{limiterIntersectionArea:nt,viewportIntersectionArea:ot}=Ye;if(nt===N)return Ye;const ft=ot**2+nt**2;ft>pe&&(pe=ft,Le=Ye)}return Le}class PositionObject{constructor(u,t){xt(this,"name");xt(this,"config");xt(this,"_positioningFunctionCoordinates");xt(this,"_options");xt(this,"_cachedRect");xt(this,"_cachedAbsoluteRect");const N=u(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!N)return;const{left:me,top:pe,name:Le,config:Ye}=N;this.name=Le,this.config=Ye,this._positioningFunctionCoordinates={left:me,top:pe},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const u=this._options.limiterRect;return u?u.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function remove$2(de){const u=de.parentNode;u&&u.removeChild(de)}function scrollViewportToShowTarget({target:de,viewportOffset:u=0,ancestorOffset:t=0,alignToTop:N,forceScroll:me}){const pe=getWindow(de);let Le=pe,Ye=null;for(u=normalizeViewportOffset(u);Le;){let nt;Le==pe?nt=getParentElement(de):nt=getParentElement(Ye),scrollAncestorsToShowRect({parent:nt,getRect:()=>getRectRelativeToWindow(de,Le),alignToTop:N,ancestorOffset:t,forceScroll:me});let ot=getRectRelativeToWindow(de,Le);const ft=getRectRelativeToWindow(nt,Le);if(ot.height>ft.height){const mt=ot.getIntersection(ft);mt&&(ot=mt)}if(scrollWindowToShowRect({window:Le,rect:ot,viewportOffset:u,alignToTop:N,forceScroll:me}),Le.parent!=Le){if(Ye=Le.frameElement,Le=Le.parent,!Ye)return}else Le=null}}function scrollWindowToShowRect({window:de,rect:u,alignToTop:t,forceScroll:N,viewportOffset:me}){const pe=u.clone().moveBy(0,me.bottom),Le=u.clone().moveBy(0,-me.top),Ye=new Rect(de).excludeScrollbarsAndBorders(),nt=[Le,pe],ot=t&&N,ft=nt.every(Ct=>Ye.contains(Ct));let{scrollX:mt,scrollY:bt}=de;const yt=mt,_t=bt;ot?bt-=Ye.top-u.top+me.top:ft||(isAbove(Le,Ye)?bt-=Ye.top-u.top+me.top:isBelow(pe,Ye)&&(t?bt+=u.top-Ye.top-me.top:bt+=u.bottom-Ye.bottom+me.bottom)),ft||(isLeftOf(u,Ye)?mt-=Ye.left-u.left+me.left:isRightOf(u,Ye)&&(mt+=u.right-Ye.right+me.right)),(mt!=yt||bt!==_t)&&de.scrollTo(mt,bt)}function scrollAncestorsToShowRect({parent:de,getRect:u,alignToTop:t,forceScroll:N,ancestorOffset:me=0,limiterElement:pe}){const Le=getWindow(de),Ye=t&&N;let nt,ot,ft;const mt=pe||Le.document.body;for(;de!=mt;)ot=u(),nt=new Rect(de).excludeScrollbarsAndBorders(),ft=nt.contains(ot),Ye?de.scrollTop-=nt.top-ot.top+me:ft||(isAbove(ot,nt)?de.scrollTop-=nt.top-ot.top+me:isBelow(ot,nt)&&(t?de.scrollTop+=ot.top-nt.top-me:de.scrollTop+=ot.bottom-nt.bottom+me)),ft||(isLeftOf(ot,nt)?de.scrollLeft-=nt.left-ot.left+me:isRightOf(ot,nt)&&(de.scrollLeft+=ot.right-nt.right+me)),de=de.parentNode}function isBelow(de,u){return de.bottom>u.bottom}function isAbove(de,u){return de.top<u.top}function isLeftOf(de,u){return de.left<u.left}function isRightOf(de,u){return de.right>u.right}function getWindow(de){return isRange(de)?de.startContainer.ownerDocument.defaultView:de.ownerDocument.defaultView}function getParentElement(de){if(isRange(de)){let u=de.commonAncestorContainer;return isText(u)&&(u=u.parentNode),u}else return de.parentNode}function getRectRelativeToWindow(de,u){const t=getWindow(de),N=new Rect(de);if(t===u)return N;{let me=t;for(;me!=u;){const pe=me.frameElement,Le=new Rect(pe).excludeScrollbarsAndBorders();N.moveBy(Le.left,Le.top),me=me.parent}}return N}function normalizeViewportOffset(de){return typeof de=="number"?{top:de,bottom:de,left:de,right:de}:de}const modifiersToGlyphsMac={ctrl:"",cmd:"",alt:"",shift:""},modifiersToGlyphsNonMac={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},keyCodesToGlyphs={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},keyCodes=generateKnownKeyCodes(),keyCodeNames=Object.fromEntries(Object.entries(keyCodes).map(([de,u])=>{let t;return u in keyCodesToGlyphs?t=keyCodesToGlyphs[u]:t=de.charAt(0).toUpperCase()+de.slice(1),[u,t]}));function getCode(de){let u;if(typeof de=="string"){if(u=keyCodes[de.toLowerCase()],!u)throw new CKEditorError("keyboard-unknown-key",null,{key:de})}else u=de.keyCode+(de.altKey?keyCodes.alt:0)+(de.ctrlKey?keyCodes.ctrl:0)+(de.shiftKey?keyCodes.shift:0)+(de.metaKey?keyCodes.cmd:0);return u}function parseKeystroke(de){return typeof de=="string"&&(de=splitKeystrokeText(de)),de.map(u=>typeof u=="string"?getEnvKeyCode(u):u).reduce((u,t)=>t+u,0)}function getEnvKeystrokeText(de,u){let t=parseKeystroke(de);const N=env.isMac||env.isiOS;return Object.entries(N?modifiersToGlyphsMac:modifiersToGlyphsNonMac).reduce((Le,[Ye,nt])=>((t&keyCodes[Ye])!=0&&(t&=~keyCodes[Ye],Le+=nt),Le),"")+(t?keyCodeNames[t]:"")}function isArrowKeyCode(de){return de==keyCodes.arrowright||de==keyCodes.arrowleft||de==keyCodes.arrowup||de==keyCodes.arrowdown}function getLocalizedArrowKeyCodeDirection(de,u){const t=u==="ltr";switch(de){case keyCodes.arrowleft:return t?"left":"right";case keyCodes.arrowright:return t?"right":"left";case keyCodes.arrowup:return"up";case keyCodes.arrowdown:return"down"}}function getEnvKeyCode(de){if(de.endsWith("!"))return getCode(de.slice(0,-1));const u=getCode(de);return(env.isMac||env.isiOS)&&u==keyCodes.ctrl?keyCodes.cmd:u}function isForwardArrowKeyCode(de,u){const t=getLocalizedArrowKeyCodeDirection(de,u);return t==="down"||t==="right"}function generateKnownKeyCodes(){const de={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let u=65;u<=90;u++){const t=String.fromCharCode(u);de[t.toLowerCase()]=u}for(let u=48;u<=57;u++)de[u-48]=u;for(let u=112;u<=123;u++)de["f"+(u-111)]=u;return Object.assign(de,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),de}function splitKeystrokeText(de){return de.split("+").map(u=>u.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const RTL_LANGUAGE_CODES=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function getLanguageDirection(de){return RTL_LANGUAGE_CODES.includes(de)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toArray$2(de){return Array.isArray(de)?de:[de]}/* istanbul ignore else -- @preserve */global$1.window.CKEDITOR_TRANSLATIONS||(global$1.window.CKEDITOR_TRANSLATIONS={});function _translate(de,u,t=1,N){if(typeof t!="number")throw new CKEditorError("translation-service-quantity-not-a-number",null,{quantity:t});const me=N||global$1.window.CKEDITOR_TRANSLATIONS,pe=getNumberOfLanguages(me);pe===1&&(de=Object.keys(me)[0]);const Le=u.id||u.string;if(pe===0||!hasTranslation(de,Le,me))return t!==1?u.plural:u.string;const Ye=me[de].dictionary,nt=me[de].getPluralForm||(mt=>mt===1?0:1),ot=Ye[Le];if(typeof ot=="string")return ot;const ft=Number(nt(t));return ot[ft]}function _unifyTranslations(de){return Array.isArray(de)?de.reduce((u,t)=>merge(u,t)):de}function hasTranslation(de,u,t){return!!t[de]&&!!t[de].dictionary[u]}function getNumberOfLanguages(de){return Object.keys(de).length}class Locale{constructor({uiLanguage:u="en",contentLanguage:t,translations:N}={}){xt(this,"uiLanguage");xt(this,"uiLanguageDirection");xt(this,"contentLanguage");xt(this,"contentLanguageDirection");xt(this,"t");xt(this,"translations");this.uiLanguage=u,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=getLanguageDirection(this.uiLanguage),this.contentLanguageDirection=getLanguageDirection(this.contentLanguage),this.translations=_unifyTranslations(N),this.t=(me,pe)=>this._t(me,pe)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(u,t=[]){t=toArray$2(t),typeof u=="string"&&(u={string:u});const me=!!u.plural?t[0]:1,pe=_translate(this.uiLanguage,u,me,this.translations);return interpolateString(pe,t)}}function interpolateString(de,u){return de.replace(/%(\d+)/g,(t,N)=>N<u.length?u[N]:t)}class Collection extends EmitterMixin(){constructor(t={},N={}){super();xt(this,"_items");xt(this,"_itemMap");xt(this,"_idProperty");xt(this,"_bindToCollection");xt(this,"_bindToExternalToInternalMap");xt(this,"_bindToInternalToExternalMap");xt(this,"_skippedIndexesFromExternal");const me=isIterable(t);if(me||(N=t),this._items=[],this._itemMap=new Map,this._idProperty=N.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],me)for(const pe of t)this._items.push(pe),this._itemMap.set(this._getItemIdBeforeAdding(pe),pe)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,N){return this.addMany([t],N)}addMany(t,N){if(N===void 0)N=this._items.length;else if(N>this._items.length||N<0)throw new CKEditorError("collection-add-item-invalid-index",this);let me=0;for(const pe of t){const Le=this._getItemIdBeforeAdding(pe),Ye=N+me;this._items.splice(Ye,0,pe),this._itemMap.set(Le,pe),this.fire("add",pe,Ye),me++}return this.fire("change",{added:t,removed:[],index:N}),this}get(t){let N;if(typeof t=="string")N=this._itemMap.get(t);else if(typeof t=="number")N=this._items[t];else throw new CKEditorError("collection-get-invalid-arg",this);return N||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const N=this._idProperty,me=t[N];return me&&this._itemMap.has(me)}}getIndex(t){let N;return typeof t=="string"?N=this._itemMap.get(t):N=t,N?this._items.indexOf(N):-1}remove(t){const[N,me]=this._remove(t);return this.fire("change",{added:[],removed:[N],index:me}),N}map(t,N){return this._items.map(t,N)}forEach(t,N){this._items.forEach(t,N)}find(t,N){return this._items.find(t,N)}filter(t,N){return this._items.filter(t,N)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new CKEditorError("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:N=>{this._setUpBindToBinding(me=>new N(me))},using:N=>{typeof N=="function"?this._setUpBindToBinding(N):this._setUpBindToBinding(me=>me[N])}}}_setUpBindToBinding(t){const N=this._bindToCollection,me=(pe,Le,Ye)=>{const nt=N._bindToCollection==this,ot=N._bindToInternalToExternalMap.get(Le);if(nt&&ot)this._bindToExternalToInternalMap.set(Le,ot),this._bindToInternalToExternalMap.set(ot,Le);else{const ft=t(Le);if(!ft){this._skippedIndexesFromExternal.push(Ye);return}let mt=Ye;for(const bt of this._skippedIndexesFromExternal)Ye>bt&&mt--;for(const bt of N._skippedIndexesFromExternal)mt>=bt&&mt++;this._bindToExternalToInternalMap.set(Le,ft),this._bindToInternalToExternalMap.set(ft,Le),this.add(ft,mt);for(let bt=0;bt<N._skippedIndexesFromExternal.length;bt++)mt<=N._skippedIndexesFromExternal[bt]&&N._skippedIndexesFromExternal[bt]++}};for(const pe of N)me(null,pe,N.getIndex(pe));this.listenTo(N,"add",me),this.listenTo(N,"remove",(pe,Le,Ye)=>{const nt=this._bindToExternalToInternalMap.get(Le);nt&&this.remove(nt),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((ot,ft)=>(Ye<ft&&ot.push(ft-1),Ye>ft&&ot.push(ft),ot),[])})}_getItemIdBeforeAdding(t){const N=this._idProperty;let me;if(N in t){if(me=t[N],typeof me!="string")throw new CKEditorError("collection-add-invalid-id",this);if(this.get(me))throw new CKEditorError("collection-add-item-already-exists",this)}else t[N]=me=uid();return me}_remove(t){let N,me,pe,Le=!1;const Ye=this._idProperty;if(typeof t=="string"?(me=t,pe=this._itemMap.get(me),Le=!pe,pe&&(N=this._items.indexOf(pe))):typeof t=="number"?(N=t,pe=this._items[N],Le=!pe,pe&&(me=pe[Ye])):(pe=t,me=pe[Ye],N=this._items.indexOf(pe),Le=N==-1||!this._itemMap.get(me)),Le)throw new CKEditorError("collection-remove-404",this);this._items.splice(N,1),this._itemMap.delete(me);const nt=this._bindToInternalToExternalMap.get(pe);return this._bindToInternalToExternalMap.delete(pe),this._bindToExternalToInternalMap.delete(nt),this.fire("remove",pe,N),[pe,N]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function first(de){const u=de.next();return u.done?null:u.value}class FocusTracker extends DomEmitterMixin(ObservableMixin()){constructor(){super();xt(this,"_elements",new Set);xt(this,"_externalViews",new Set);xt(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(isElement$1(t))this._addElement(t);else if(isViewWithFocusTracker(t))this._addView(t);else{if(!t.element)throw new CKEditorError("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){isElement$1(t)?this._removeElement(t):isViewWithFocusTracker(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new CKEditorError("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const N=this.externalViews.find(me=>isExternalViewSubtreeFocused(t,me));N?this._focus(N.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(me=>me.contains(document.activeElement))||this.externalViews.find(me=>me.focusTracker.isFocused&&!me.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function isViewWithFocusTracker(de){return"focusTracker"in de&&de.focusTracker instanceof FocusTracker}function isElement$1(de){return isElement$2(de)}function isExternalViewSubtreeFocused(de,u){return isFocusedView(de,u)?!0:!!u.focusTracker.externalViews.find(t=>isFocusedView(de,t))}function isFocusedView(de,u){return!!u.element&&u.element.contains(document.activeElement)&&de.contains(u.element)}class KeystrokeHandler{constructor(){xt(this,"_listener");this._listener=new(DomEmitterMixin())}listenTo(u){this._listener.listenTo(u,"keydown",(t,N)=>{this._listener.fire("_keydown:"+getCode(N),N)})}set(u,t,N={}){const me=parseKeystroke(u),pe=N.priority;this._listener.listenTo(this._listener,"_keydown:"+me,(Le,Ye)=>{N.filter&&!N.filter(Ye)||(t(Ye,()=>{Ye.preventDefault(),Ye.stopPropagation(),Le.stop()}),Le.return=!0)},{priority:pe})}press(u){return!!this._listener.fire("_keydown:"+getCode(u),u)}stopListening(u){this._listener.stopListening(u)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function objectToMap(de){const u=new Map;for(const t in de)u.set(t,de[t]);return u}function toMap(de){return isIterable(de)?new Map(de):objectToMap(de)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spliceArray(de,u,t){const N=de.length,me=u.length;for(let pe=N-1;pe>=t;pe--)de[pe+me]=de[pe];for(let pe=0;pe<me;pe++)de[t+pe]=u[pe]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function delay(de,u){let t;function N(...me){N.cancel(),t=setTimeout(()=>de(...me),u)}return N.cancel=()=>{clearTimeout(t)},N}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function parseBase64EncodedObject(de){try{if(!de.startsWith("ey"))return null;const u=atob(de.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(u)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function makeCrcTable(){const de=[];for(let u=0;u<256;u++){let t=u;for(let N=0;N<8;N++)t&1?t=3988292384^t>>>1:t=t>>>1;de[u]=t}return de}function crc32(de){const u=Array.isArray(de)?de:[de],t=makeCrcTable();let N=-1;const me=u.map(pe=>Array.isArray(pe)?pe.join(""):String(pe)).join("");for(let pe=0;pe<me.length;pe++){const Le=me.charCodeAt(pe);N=N>>>8^t[(N^Le)&255]}return N=(N^-1)>>>0,N.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */async function collectStylesheets(de){return de?(await Promise.all(de.map(async t=>t==="EDITOR_STYLES"?getEditorStyles():(await window.fetch(t)).text()))).join(" ").trim():""}function getEditorStyles(){const de=[],u=[];for(const t of Array.from(document.styleSheets))if(t.ownerNode.hasAttribute("data-cke"))for(const me of Array.from(t.cssRules))me.cssText.indexOf(".ck-content")!==-1?de.push(me.cssText):me.cssText.indexOf(":root")!==-1&&u.push(me.cssText);return de.length||console.warn("The editor stylesheet could not be found in the document. Check your webpack config - style-loader should use data-cke=true attribute for the editor stylesheet."),[...u,...de].join(" ").trim()}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCombiningMark(de){return!!de&&de.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(de)}function isHighSurrogateHalf(de){return!!de&&de.length==1&&/[\ud800-\udbff]/.test(de)}function isLowSurrogateHalf(de){return!!de&&de.length==1&&/[\udc00-\udfff]/.test(de)}function isInsideSurrogatePair(de,u){return isHighSurrogateHalf(de.charAt(u-1))&&isLowSurrogateHalf(de.charAt(u))}function isInsideCombinedSymbol(de,u){return isCombiningMark(de.charAt(u))}const EMOJI_PATTERN=buildEmojiRegexp();function isInsideEmojiSequence(de,u){const t=String(de).matchAll(EMOJI_PATTERN);return Array.from(t).some(N=>N.index<u&&u<N.index+N[0].length)}function buildEmojiRegexp(){const de=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],u=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+de.map(me=>me.source).join("|")+")",N=`${u}|${t}(?:${t})*`;return new RegExp(N,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const documentPlaceholders=new WeakMap;let hasDisplayedPlaceholderDeprecationWarning=!1;function enablePlaceholder({view:de,element:u,text:t,isDirectHost:N=!0,keepOnFocus:me=!1}){const pe=de.document;documentPlaceholders.has(pe)||(documentPlaceholders.set(pe,new Map),pe.registerPostFixer(Ye=>updateDocumentPlaceholders(documentPlaceholders.get(pe),Ye)),pe.on("change:isComposing",()=>{de.change(Ye=>updateDocumentPlaceholders(documentPlaceholders.get(pe),Ye))},{priority:"high"})),u.is("editableElement")&&u.on("change:placeholder",(Ye,nt,ot)=>Le(ot)),u.placeholder?Le(u.placeholder):t&&Le(t),t&&showPlaceholderTextDeprecationWarning();function Le(Ye){const nt={text:Ye,isDirectHost:N,keepOnFocus:me,hostElement:N?u:null};documentPlaceholders.get(pe).set(u,nt),de.change(ot=>updateDocumentPlaceholders([[u,nt]],ot))}}function showPlaceholder(de,u){return u.hasClass("ck-placeholder")?!1:(de.addClass("ck-placeholder",u),!0)}function hidePlaceholder(de,u){return u.hasClass("ck-placeholder")?(de.removeClass("ck-placeholder",u),!0):!1}function needsPlaceholder(de,u){if(!de.isAttached()||hasContent(de))return!1;const t=de.document,me=t.selection.anchor;return t.isComposing&&me&&me.parent===de?!1:u||!t.isFocused?!0:!!me&&me.parent!==de}function hasContent(de){for(const u of de.getChildren())if(!u.is("uiElement"))return!0;return!1}function updateDocumentPlaceholders(de,u){const t=[];let N=!1;for(const[me,pe]of de)pe.isDirectHost&&(t.push(me),updatePlaceholder(u,me,pe)&&(N=!0));for(const[me,pe]of de){if(pe.isDirectHost)continue;const Le=getChildPlaceholderHostSubstitute(me);Le&&(t.includes(Le)||(pe.hostElement=Le,updatePlaceholder(u,me,pe)&&(N=!0)))}return N}function updatePlaceholder(de,u,t){const{text:N,isDirectHost:me,hostElement:pe}=t;let Le=!1;return pe.getAttribute("data-placeholder")!==N&&(de.setAttribute("data-placeholder",N,pe),Le=!0),(me||u.childCount==1)&&needsPlaceholder(pe,t.keepOnFocus)?showPlaceholder(de,pe)&&(Le=!0):hidePlaceholder(de,pe)&&(Le=!0),Le}function getChildPlaceholderHostSubstitute(de){if(de.childCount){const u=de.getChild(0);if(u.is("element")&&!u.is("uiElement")&&!u.is("attributeElement"))return u}return null}function showPlaceholderTextDeprecationWarning(){hasDisplayedPlaceholderDeprecationWarning||logWarning("enableplaceholder-deprecated-text-option"),hasDisplayedPlaceholderDeprecationWarning=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let TypeCheckable$1=class{is(){throw new Error("is() method is abstract")}},Node$2=class extends EmitterMixin(TypeCheckable$1){constructor(t){super();xt(this,"document");xt(this,"parent");this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new CKEditorError("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let N=this;for(;N.parent;)t.unshift(N.index),N=N.parent;return t}getAncestors(t={}){const N=[];let me=t.includeSelf?this:this.parent;for(;me;)N[t.parentFirst?"push":"unshift"](me),me=me.parent;return N}getCommonAncestor(t,N={}){const me=this.getAncestors(N),pe=t.getAncestors(N);let Le=0;for(;me[Le]==pe[Le]&&me[Le];)Le++;return Le===0?null:me[Le-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const N=this.getPath(),me=t.getPath(),pe=compareArrays(N,me);switch(pe){case"prefix":return!0;case"extension":return!1;default:return N[pe]<me[pe]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,N,me){this.fire(`change:${t}`,N,me),this.parent&&this.parent._fireChange(t,N,me)}toJSON(){const t=clone$1(this);return delete t.parent,t}};Node$2.prototype.is=function(de){return de==="node"||de==="view:node"};let Text$1=class vu extends Node$2{constructor(t,N){super(t);xt(this,"_textData");this._textData=N}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof vu?this===t||this.data===t.data:!1}_clone(){return new vu(this.document,this.data)}};Text$1.prototype.is=function(de){return de==="$text"||de==="view:$text"||de==="text"||de==="view:text"||de==="node"||de==="view:node"};let TextProxy$1=class extends TypeCheckable$1{constructor(t,N,me){super();xt(this,"textNode");xt(this,"data");xt(this,"offsetInText");if(this.textNode=t,N<0||N>t.data.length)throw new CKEditorError("view-textproxy-wrong-offsetintext",this);if(me<0||N+me>t.data.length)throw new CKEditorError("view-textproxy-wrong-length",this);this.data=t.data.substring(N,N+me),this.offsetInText=N}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const N=[];let me=t.includeSelf?this.textNode:this.parent;for(;me!==null;)N[t.parentFirst?"push":"unshift"](me),me=me.parent;return N}};TextProxy$1.prototype.is=function(de){return de==="$textProxy"||de==="view:$textProxy"||de==="textProxy"||de==="view:textProxy"};class ViewConsumable{constructor(){xt(this,"_consumables",new Map)}add(u,t){let N;if(u.is("$text")||u.is("documentFragment")){this._consumables.set(u,!0);return}this._consumables.has(u)?N=this._consumables.get(u):(N=new ViewElementConsumables(u),this._consumables.set(u,N)),N.add(t?normalizeConsumables(t):u._getConsumables())}test(u,t){const N=this._consumables.get(u);return N===void 0?null:u.is("$text")||u.is("documentFragment")?N:N.test(normalizeConsumables(t))}consume(u,t){if(u.is("$text")||u.is("documentFragment"))return this.test(u,t)?(this._consumables.set(u,!1),!0):!1;const N=this._consumables.get(u);return N===void 0?!1:N.consume(normalizeConsumables(t))}revert(u,t){const N=this._consumables.get(u);N!==void 0&&(u.is("$text")||u.is("documentFragment")?this._consumables.set(u,!0):N.revert(normalizeConsumables(t)))}static createFrom(u,t){if(t||(t=new ViewConsumable),u.is("$text"))t.add(u);else if(u.is("element")||u.is("documentFragment")){t.add(u);for(const N of u.getChildren())ViewConsumable.createFrom(N,t)}return t}}class ViewElementConsumables{constructor(u){xt(this,"element");xt(this,"_canConsumeName",null);xt(this,"_attributes",new Map);this.element=u}add(u){u.name&&(this._canConsumeName=!0);for(const[t,N]of u.attributes)if(N){let me=this._attributes.get(t);(!me||typeof me=="boolean")&&(me=new Map,this._attributes.set(t,me)),me.set(N,!0)}else{if(t=="style"||t=="class")throw new CKEditorError("viewconsumable-invalid-attribute",this);this._attributes.set(t,!0)}}test(u){if(u.name&&!this._canConsumeName)return this._canConsumeName;for(const[t,N]of u.attributes){const me=this._attributes.get(t);if(me===void 0)return null;if(me===!1)return!1;if(me!==!0){if(N){const pe=me.get(N);if(pe===void 0)return null;if(!pe)return!1}else for(const pe of me.values())if(!pe)return!1}}return!0}consume(u){if(!this.test(u))return!1;u.name&&(this._canConsumeName=!1);for(const[t,N]of u.attributes){const me=this._attributes.get(t);if(typeof me=="boolean")for(const[pe]of this.element._getConsumables(t,N).attributes)this._attributes.set(pe,!1);else if(N)for(const[,pe]of this.element._getConsumables(t,N).attributes)me.set(pe,!1);else for(const pe of me.keys())me.set(pe,!1)}return!0}revert(u){u.name&&(this._canConsumeName=!0);for(const[t,N]of u.attributes){const me=this._attributes.get(t);if(me===!1){this._attributes.set(t,!0);continue}if(!(me===void 0||me===!0))if(N)me.get(N)===!1&&me.set(N,!0);else for(const pe of me.keys())me.set(pe,!0)}}}function normalizeConsumables(de){const u=[];return"attributes"in de&&de.attributes&&normalizeConsumablePart(u,de.attributes),"classes"in de&&de.classes&&normalizeConsumablePart(u,de.classes,"class"),"styles"in de&&de.styles&&normalizeConsumablePart(u,de.styles,"style"),{name:de.name||!1,attributes:u}}function normalizeConsumablePart(de,u,t){if(typeof u=="string"){de.push(t?[t,u]:[u]);return}for(const N of u)Array.isArray(N)?de.push(N):de.push(t?[t,N]:[N])}class Matcher{constructor(...u){xt(this,"_patterns",[]);this.add(...u)}add(...u){for(let t of u)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...u){for(const t of u)for(const N of this._patterns){const me=this._isElementMatching(t,N);if(me)return{element:t,pattern:N,match:me}}return null}matchAll(...u){const t=[];for(const N of u)for(const me of this._patterns){const pe=this._isElementMatching(N,me);pe&&t.push({element:N,pattern:me,match:pe})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const u=this._patterns[0],t=u.name;return typeof u!="function"&&t&&!(t instanceof RegExp)?t:null}_isElementMatching(u,t){if(typeof t=="function"){const pe=t(u);return!pe||typeof pe!="object"?pe:normalizeConsumables(pe)}const N={};if(t.name&&(N.name=matchName(t.name,u.name),!N.name))return null;const me=[];return t.attributes&&!matchAttributes(t.attributes,u,me)||t.classes&&!matchClasses(t.classes,u,me)||t.styles&&!matchStyles(t.styles,u,me)?null:(me.length&&(N.attributes=me),N)}}function isPatternMatched(de,u){return de===!0||de===u||de instanceof RegExp&&!!String(u).match(de)}function matchName(de,u){return de instanceof RegExp?!!u.match(de):de===u}function normalizePatterns(de,u){if(Array.isArray(de))return de.map(N=>typeof N!="object"||N instanceof RegExp?u?[u,N,!0]:[N,!0]:((N.key===void 0||N.value===void 0)&&logWarning("matcher-pattern-missing-key-or-value",N),u?[u,N.key,N.value]:[N.key,N.value]));if(typeof de!="object"||de instanceof RegExp)return[u?[u,de,!0]:[de,!0]];const t=[];for(const N in de)Object.prototype.hasOwnProperty.call(de,N)&&t.push(u?[u,N,de[N]]:[N,de[N]]);return t}function matchAttributes(de,u,t){let N;return typeof de=="object"&&!(de instanceof RegExp)&&!Array.isArray(de)?(de.style!==void 0&&logWarning("matcher-pattern-deprecated-attributes-style-key",de),de.class!==void 0&&logWarning("matcher-pattern-deprecated-attributes-class-key",de)):N=["class","style"],u._collectAttributesMatch(normalizePatterns(de),t,N)}function matchClasses(de,u,t){return u._collectAttributesMatch(normalizePatterns(de,"class"),t)}function matchStyles(de,u,t){return u._collectAttributesMatch(normalizePatterns(de,"style"),t)}class StylesMap{constructor(u){xt(this,"_styles");xt(this,"_cachedStyleNames",null);xt(this,"_cachedExpandedStyleNames",null);xt(this,"_styleProcessor");this._styles={},this._styleProcessor=u}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(u){this.clear();const t=parseInlineStyles(u);for(const[N,me]of t)this._styleProcessor.toNormalizedForm(N,me,this._styles);return this}has(u){if(this.isEmpty)return!1;const N=this._styleProcessor.getReducedForm(u,this._styles).find(([me])=>me===u);return Array.isArray(N)}set(u,t){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,isObject$2(u))for(const[N,me]of Object.entries(u))this._styleProcessor.toNormalizedForm(N,me,this._styles);else this._styleProcessor.toNormalizedForm(u,t,this._styles)}remove(u){for(const t of toArray$2(u)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const N=toPath(t);unset(this._styles,N),delete this._styles[t],this._cleanEmptyObjectsOnPath(N)}}getNormalized(u){return this._styleProcessor.getNormalized(u,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(u=>u.join(":")).sort().join(";")+";"}getAsString(u){if(this.isEmpty)return;if(this._styles[u]&&!isObject$2(this._styles[u]))return this._styles[u];const N=this._styleProcessor.getReducedForm(u,this._styles).find(([me])=>me===u);if(Array.isArray(N))return N[1]}getStyleNames(u=!1){return this.isEmpty?[]:u?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(u){if(this.size!==u.size)return!1;for(const t of this.getStyleNames())if(!u.has(t)||u.getAsString(t)!==this.getAsString(t))return!1;return!0}getStylesEntries(){const u=[],t=Object.keys(this._styles);for(const N of t)u.push(...this._styleProcessor.getReducedForm(N,this._styles));return u}_clone(){const u=new this.constructor(this._styleProcessor);return u.set(this.getNormalized()),u}_getTokensMatch(u,t){const N=[];for(const me of this.getStyleNames(!0))if(isPatternMatched(u,me)){if(t===!0){N.push(me);continue}const pe=this.getAsString(me);isPatternMatched(t,pe)&&N.push(me)}return N.length?N:void 0}_getConsumables(u){const t=[];if(u){t.push(u);for(const N of this._styleProcessor.getRelatedStyles(u))t.push(N)}else for(const N of this.getStyleNames()){for(const me of this._styleProcessor.getRelatedStyles(N))t.push(me);t.push(N)}return t}_canMergeFrom(u){for(const t of u.getStyleNames())if(this.has(t)&&this.getAsString(t)!==u.getAsString(t))return!1;return!0}_mergeFrom(u){for(const t of u.getStyleNames())this.has(t)||this.set(t,u.getAsString(t))}_isMatching(u){for(const t of u.getStyleNames())if(!this.has(t)||this.getAsString(t)!==u.getAsString(t))return!1;return!0}_cleanEmptyObjectsOnPath(u){const t=u.split(".");if(!(t.length>1))return;const me=t.splice(0,t.length-1).join("."),pe=get(this._styles,me);if(!pe)return;!Object.keys(pe).length&&this.remove(me)}}class StylesProcessor{constructor(){xt(this,"_normalizers");xt(this,"_extractors");xt(this,"_reducers");xt(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(u,t,N){if(isObject$2(t)){appendStyleValue(N,toPath(u),t);return}if(this._normalizers.has(u)){const me=this._normalizers.get(u),{path:pe,value:Le}=me(t);appendStyleValue(N,pe,Le)}else appendStyleValue(N,u,t)}getNormalized(u,t){if(!u)return merge({},t);if(t[u]!==void 0)return t[u];if(this._extractors.has(u)){const N=this._extractors.get(u);if(typeof N=="string")return get(t,N);const me=N(u,t);if(me)return me}return get(t,toPath(u))}getReducedForm(u,t){const N=this.getNormalized(u,t);return N===void 0?[]:this._reducers.has(u)?this._reducers.get(u)(N):[[u,N]]}getStyleNames(u){const t=new Set;for(const N of this._consumables.keys()){const me=this.getNormalized(N,u);me&&(typeof me!="object"||Object.keys(me).length)&&t.add(N)}for(const N of Object.keys(u))t.add(N);return Array.from(t)}getRelatedStyles(u){return this._consumables.get(u)||[]}setNormalizer(u,t){this._normalizers.set(u,t)}setExtractor(u,t){this._extractors.set(u,t)}setReducer(u,t){this._reducers.set(u,t)}setStyleRelation(u,t){this._mapStyleNames(u,t);for(const N of t)this._mapStyleNames(N,[u])}_mapStyleNames(u,t){this._consumables.has(u)||this._consumables.set(u,[]),this._consumables.get(u).push(...t)}}function parseInlineStyles(de){let u=null,t=0,N=0,me=null;const pe=new Map;if(de==="")return pe;de.charAt(de.length-1)!=";"&&(de=de+";");for(let Le=0;Le<de.length;Le++){const Ye=de.charAt(Le);if(u===null)switch(Ye){case":":me||(me=de.substr(t,Le-t),N=Le+1);break;case'"':case"'":u=Ye;break;case";":{const nt=de.substr(N,Le-N);me&&pe.set(me.trim(),nt.trim()),me=null,t=Le+1;break}}else Ye===u&&(u=null)}return pe}function toPath(de){return de.replace("-",".")}function appendStyleValue(de,u,t){let N=t;isObject$2(t)&&(N=merge({},get(de,u),t)),set(de,u,N)}class TokenList{constructor(){xt(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(u){return this._set.has(u)}keys(){return Array.from(this._set.keys())}setTo(u){this.clear();for(const t of u.split(/\s+/))t&&this._set.add(t);return this}set(u){for(const t of toArray$2(u))t&&this._set.add(t)}remove(u){for(const t of toArray$2(u))this._set.delete(t)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(u){if(this.size!==u.size)return!1;for(const t of this.keys())if(!u.has(t))return!1;return!0}_clone(){const u=new this.constructor;return u._set=new Set(this._set),u}_getTokensMatch(u){const t=[];if(u===!0){for(const N of this._set.keys())t.push(N);return t}if(typeof u=="string"){for(const N of u.split(/\s+/))if(this._set.has(N))t.push(N);else return;return t}for(const N of this._set.keys())N.match(u)&&t.push(N);return t.length?t:void 0}_getConsumables(u){return u?[u]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(u){for(const t of u._set.keys())this._set.has(t)||this._set.add(t)}_isMatching(u){for(const t of u._set.keys())if(!this._set.has(t))return!1;return!0}}let Element$1=class mm extends Node$2{constructor(t,N,me,pe){super(t);xt(this,"name");xt(this,"_unsafeAttributesToRender",[]);xt(this,"_attrs");xt(this,"_children");xt(this,"_customProperties",new Map);this.name=N,this._attrs=this._parseAttributes(me),this._children=[],pe&&this._insertChild(0,pe)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())t!="class"&&t!="style"&&(yield t)}*getAttributes(){for(const[t,N]of this._attrs.entries())yield[t,String(N)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,N){return this._attrs.has(t)?N!==void 0?usesStylesMap(this.name,t)||usesTokenList(this.name,t)?this._attrs.get(t).has(N):this._attrs.get(t)===N:!0:!1}isSimilar(t){if(!(t instanceof mm))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size)return!1;for(const[N,me]of this._attrs){const pe=t._attrs.get(N);if(pe===void 0)return!1;if(typeof me=="string"||typeof pe=="string"){if(pe!==me)return!1}else if(!me.isSimilar(pe))return!1}return!0}hasClass(...t){for(const N of t)if(!this._classes||!this._classes.has(N))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],N=t[Symbol.iterator]();return Object.assign(t,{next:N.next.bind(N)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const N of t)if(!this._styles||!this._styles.has(N))return!1;return!0}findAncestor(...t){const N=new Matcher(...t);let me=this.parent;for(;me&&!me.is("documentFragment");){if(N.match(me))return me;me=me.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",N=this._styles&&String(this._styles),me=Array.from(this._attrs).filter(([pe])=>pe!="style"&&pe!="class").map(pe=>`${pe[0]}="${pe[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(N?` style="${N}"`:"")+(me==""?"":` ${me}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const N=[];if(t)for(const pe of this.getChildren())N.push(pe._clone(t));const me=new this.constructor(this.document,this.name,this._attrs,N);return me._customProperties=new Map(this._customProperties),me.getFillerOffset=this.getFillerOffset,me._unsafeAttributesToRender=this._unsafeAttributesToRender,me}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,N){this._fireChange("children",this,{index:t});let me=0;const pe=normalize$3(this.document,N);for(const Le of pe)Le.parent!==null&&Le._remove(),Le.parent=this,Le.document=this.document,this._children.splice(t,0,Le),t++,me++;return me}_removeChildren(t,N=1){this._fireChange("children",this,{index:t});for(let me=t;me<t+N;me++)this._children[me].parent=null;return this._children.splice(t,N)}_setAttribute(t,N,me=!0){if(this._fireChange("attributes",this),usesStylesMap(this.name,t)||usesTokenList(this.name,t)){let pe=this._attrs.get(t);pe||(pe=usesStylesMap(this.name,t)?new StylesMap(this.document.stylesProcessor):new TokenList,this._attrs.set(t,pe)),me?pe.setTo(String(N)):usesStylesMap(this.name,t)?Array.isArray(N)?pe.set(N[0],N[1]):pe.set(N):pe.set(typeof N=="string"?N.split(/\s+/):N)}else this._attrs.set(t,String(N))}_removeAttribute(t,N){if(this._fireChange("attributes",this),N!==void 0&&(usesStylesMap(this.name,t)||usesTokenList(this.name,t))){const me=this._attrs.get(t);return me?(usesTokenList(this.name,t)&&typeof N=="string"&&(N=N.split(/\s+/)),me.remove(N),me.isEmpty?this._attrs.delete(t):!1):!1}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,N){typeof t!="string"?this._setAttribute("style",t,!1):this._setAttribute("style",[t,N],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,N,me){for(const[pe,Le,Ye]of t){let nt=!1,ot=!1;for(const[ft,mt]of this._attrs)if(!(me&&me.includes(ft)||!isPatternMatched(pe,ft)))if(nt=!0,typeof mt=="string"){if(isPatternMatched(Le,mt))N.push([ft]),ot=!0;else if(!(pe instanceof RegExp))return!1}else{const bt=mt._getTokensMatch(Le,Ye||!0);if(bt){ot=!0;for(const yt of bt)N.push([ft,yt])}else if(!(pe instanceof RegExp))return!1}if(!nt||!ot)return!1}return!0}_getConsumables(t,N){const me=[];if(t){const pe=this._attrs.get(t);if(pe!==void 0)if(typeof pe=="string")me.push([t]);else for(const Le of pe._getConsumables(N))me.push([t,Le])}else for(const[pe,Le]of this._attrs)if(typeof Le=="string")me.push([pe]);else for(const Ye of Le._getConsumables())me.push([pe,Ye]);return{name:!t,attributes:me}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[N,me]of t._attrs){const pe=this._attrs.get(N);if(pe!==void 0){if(typeof pe=="string"||typeof me=="string"){if(pe!==me)return!1}else if(!pe._canMergeFrom(me))return!1}}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[N,me]of t._attrs){const pe=this._attrs.get(N);pe===void 0||typeof pe=="string"||typeof me=="string"?this._setAttribute(N,me):pe._mergeFrom(me)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[N,me]of t._attrs){const pe=this._attrs.get(N);if(pe===void 0)return!1;if(typeof pe=="string"||typeof me=="string"){if(pe!==me)return!1}else if(!pe._isMatching(me))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[N,me]of t._attrs){const pe=this._attrs.get(N);typeof pe=="string"||typeof me=="string"?this._attrs.delete(N):(pe.remove(me.keys()),pe.isEmpty&&this._attrs.delete(N))}}_setCustomProperty(t,N){this._customProperties.set(t,N)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const N=toMap(t);for(const[me,pe]of N)if(pe===null)N.delete(me);else if(usesStylesMap(this.name,me)){const Le=pe instanceof StylesMap?pe._clone():new StylesMap(this.document.stylesProcessor).setTo(String(pe));N.set(me,Le)}else if(usesTokenList(this.name,me)){const Le=pe instanceof TokenList?pe._clone():new TokenList().setTo(String(pe));N.set(me,Le)}else typeof pe!="string"&&N.set(me,String(pe));return N}};Element$1.prototype.is=function(de,u){return u?u===this.name&&(de==="element"||de==="view:element"):de==="element"||de==="view:element"||de==="node"||de==="view:node"};function normalize$3(de,u){if(typeof u=="string")return[new Text$1(de,u)];isIterable(u)||(u=[u]);const t=[];for(const N of u)typeof N=="string"?t.push(new Text$1(de,N)):N instanceof TextProxy$1?t.push(new Text$1(de,N.data)):t.push(N);return t}function usesTokenList(de,u){return u=="class"||de=="a"&&u=="rel"}function usesStylesMap(de,u){return u=="style"}class ContainerElement extends Element$1{constructor(u,t,N,me){super(u,t,N,me),this.getFillerOffset=getFillerOffset$4}}ContainerElement.prototype.is=function(de,u){return u?u===this.name&&(de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"):de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};function getFillerOffset$4(){const de=[...this.getChildren()],u=de[this.childCount-1];if(u&&u.is("element","br"))return this.childCount;for(const t of de)if(!t.is("uiElement"))return null;return this.childCount}class EditableElement extends ObservableMixin(ContainerElement){constructor(u,t,N,me){super(u,t,N,me),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(u),this.bind("isFocused").to(u,"isFocused",pe=>pe&&u.selection.editableElement==this),this.listenTo(u.selection,"change",()=>{this.isFocused=u.isFocused&&u.selection.editableElement==this})}destroy(){this.stopListening()}}EditableElement.prototype.is=function(de,u){return u?u===this.name&&(de==="editableElement"||de==="view:editableElement"||de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"):de==="editableElement"||de==="view:editableElement"||de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};const rootNameSymbol=Symbol("rootName");class RootEditableElement extends EditableElement{constructor(u,t){super(u,t),this.rootName="main"}get rootName(){return this.getCustomProperty(rootNameSymbol)}set rootName(u){this._setCustomProperty(rootNameSymbol,u)}set _name(u){this.name=u}}RootEditableElement.prototype.is=function(de,u){return u?u===this.name&&(de==="rootElement"||de==="view:rootElement"||de==="editableElement"||de==="view:editableElement"||de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"):de==="rootElement"||de==="view:rootElement"||de==="editableElement"||de==="view:editableElement"||de==="containerElement"||de==="view:containerElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};let TreeWalker$1=class{constructor(u={}){xt(this,"direction");xt(this,"boundaries");xt(this,"singleCharacters");xt(this,"shallow");xt(this,"ignoreElementEnd");xt(this,"_position");xt(this,"_boundaryStartParent");xt(this,"_boundaryEndParent");if(!u.boundaries&&!u.startPosition)throw new CKEditorError("view-tree-walker-no-start-position",null);if(u.direction&&u.direction!="forward"&&u.direction!="backward")throw new CKEditorError("view-tree-walker-unknown-direction",u.startPosition,{direction:u.direction});this.boundaries=u.boundaries||null,u.startPosition?this._position=Position$1._createAt(u.startPosition):this._position=Position$1._createAt(u.boundaries[u.direction=="backward"?"end":"start"]),this.direction=u.direction||"forward",this.singleCharacters=!!u.singleCharacters,this.shallow=!!u.shallow,this.ignoreElementEnd=!!u.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(u){let t,N;do N=this.position,t=this.next();while(!t.done&&u(t.value));t.done||(this._position=N)}jumpTo(u){this._boundaryStartParent&&u.isBefore(this.boundaries.start)?u=this.boundaries.start:this._boundaryEndParent&&u.isAfter(this.boundaries.end)&&(u=this.boundaries.end),this._position=u.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let u=this.position.clone();const t=this.position,N=u.parent;if(N.parent===null&&u.offset===N.childCount)return{done:!0,value:void 0};if(N===this._boundaryEndParent&&u.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let me;if(N&&N.is("view:$text")){if(u.isAtEnd)return this._position=Position$1._createAfter(N),this._next();me=N.data[u.offset]}else me=N.getChild(u.offset);if(typeof me=="string"){let pe;this.singleCharacters?pe=1:pe=(N===this._boundaryEndParent?this.boundaries.end.offset:N.data.length)-u.offset;const Le=new TextProxy$1(N,u.offset,pe);return u.offset+=pe,this._position=u,this._formatReturnValue("text",Le,t,u,pe)}if(me&&me.is("view:element")){if(!this.shallow)u=new Position$1(me,0);else{if(this.boundaries&&this.boundaries.end.isBefore(u))return{done:!0,value:void 0};u.offset++}return this._position=u,this._formatReturnValue("elementStart",me,t,u,1)}if(me&&me.is("view:$text")){if(this.singleCharacters)return u=new Position$1(me,0),this._position=u,this._next();let pe=me.data.length,Le;return me==this._boundaryEndParent?(pe=this.boundaries.end.offset,Le=new TextProxy$1(me,0,pe),u=Position$1._createAfter(Le)):(Le=new TextProxy$1(me,0,me.data.length),u.offset++),this._position=u,this._formatReturnValue("text",Le,t,u,pe)}return u=Position$1._createAfter(N),this._position=u,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",N,t,u)}_previous(){let u=this.position.clone();const t=this.position,N=u.parent;if(N.parent===null&&u.offset===0)return{done:!0,value:void 0};if(N==this._boundaryStartParent&&u.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let me;if(N.is("view:$text")){if(u.isAtStart)return this._position=Position$1._createBefore(N),this._previous();me=N.data[u.offset-1]}else me=N.getChild(u.offset-1);if(typeof me=="string"){let pe;if(this.singleCharacters)pe=1;else{const Ye=N===this._boundaryStartParent?this.boundaries.start.offset:0;pe=u.offset-Ye}u.offset-=pe;const Le=new TextProxy$1(N,u.offset,pe);return this._position=u,this._formatReturnValue("text",Le,t,u,pe)}if(me&&me.is("view:element"))return this.shallow?(u.offset--,this._position=u,this._formatReturnValue("elementStart",me,t,u,1)):(u=new Position$1(me,me.childCount),this._position=u,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",me,t,u));if(me&&me.is("view:$text")){if(this.singleCharacters)return u=new Position$1(me,me.data.length),this._position=u,this._previous();let pe=me.data.length,Le;if(me==this._boundaryStartParent){const Ye=this.boundaries.start.offset;Le=new TextProxy$1(me,Ye,me.data.length-Ye),pe=Le.data.length,u=Position$1._createBefore(Le)}else Le=new TextProxy$1(me,0,me.data.length),u.offset--;return this._position=u,this._formatReturnValue("text",Le,t,u,pe)}return u=Position$1._createBefore(N),this._position=u,this._formatReturnValue("elementStart",N,t,u,1)}_formatReturnValue(u,t,N,me,pe){return t.is("view:$textProxy")&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(me=Position$1._createAfter(t.textNode),this._position=me):N=Position$1._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(me=Position$1._createBefore(t.textNode),this._position=me):N=Position$1._createBefore(t.textNode))),{done:!1,value:{type:u,item:t,previousPosition:N,nextPosition:me,length:pe}}}},Position$1=class ws extends TypeCheckable$1{constructor(t,N){super();xt(this,"parent");xt(this,"offset");this.parent=t,this.offset=N}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof EditableElement);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const N=ws._createAt(this),me=N.offset+t;return N.offset=me<0?0:me,N}getLastMatchingPosition(t,N={}){N.startPosition=this;const me=new TreeWalker$1(N);return me.skip(t),me.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const N=this.getAncestors(),me=t.getAncestors();let pe=0;for(;N[pe]==me[pe]&&N[pe];)pe++;return pe===0?null:N[pe-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const N=this.parent.is("node")?this.parent.getPath():[],me=t.parent.is("node")?t.parent.getPath():[];N.push(this.offset),me.push(t.offset);const pe=compareArrays(N,me);switch(pe){case"prefix":return"before";case"extension":return"after";default:return N[pe]<me[pe]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new TreeWalker$1(t)}clone(){return new ws(this.parent,this.offset)}static _createAt(t,N){if(t instanceof ws)return new this(t.parent,t.offset);{const me=t;if(N=="end")N=me.is("$text")?me.data.length:me.childCount;else{if(N=="before")return this._createBefore(me);if(N=="after")return this._createAfter(me);if(N!==0&&!N)throw new CKEditorError("view-createpositionat-offset-required",me)}return new ws(me,N)}}static _createAfter(t){if(t.is("$textProxy"))return new ws(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new CKEditorError("view-position-after-root",t,{root:t});return new ws(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new ws(t.textNode,t.offsetInText);if(!t.parent)throw new CKEditorError("view-position-before-root",t,{root:t});return new ws(t.parent,t.index)}};Position$1.prototype.is=function(de){return de==="position"||de==="view:position"};let Range$1=class qs extends TypeCheckable$1{constructor(t,N=null){super();xt(this,"start");xt(this,"end");this.start=t.clone(),this.end=N?N.clone():t.clone()}*[Symbol.iterator](){yield*new TreeWalker$1({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"}),N=this.end.getLastMatchingPosition(enlargeTrimSkip);return t.parent.is("$text")&&t.isAtStart&&(t=Position$1._createBefore(t.parent)),N.parent.is("$text")&&N.isAtEnd&&(N=Position$1._createAfter(N.parent)),new qs(t,N)}getTrimmed(){let t=this.start.getLastMatchingPosition(enlargeTrimSkip);if(t.isAfter(this.end)||t.isEqual(this.end))return new qs(t,t);let N=this.end.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"});const me=t.nodeAfter,pe=N.nodeBefore;return me&&me.is("$text")&&(t=new Position$1(me,0)),pe&&pe.is("$text")&&(N=new Position$1(pe,pe.data.length)),new qs(t,N)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,N=!1){t.isCollapsed&&(N=!1);const me=this.containsPosition(t.start)||N&&this.start.isEqual(t.start),pe=this.containsPosition(t.end)||N&&this.end.isEqual(t.end);return me&&pe}getDifference(t){const N=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&N.push(new qs(this.start,t.start)),this.containsPosition(t.end)&&N.push(new qs(t.end,this.end))):N.push(this.clone()),N}getIntersection(t){if(this.isIntersecting(t)){let N=this.start,me=this.end;return this.containsPosition(t.start)&&(N=t.start),this.containsPosition(t.end)&&(me=t.end),new qs(N,me)}return null}getWalker(t={}){return t.boundaries=this,new TreeWalker$1(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,N=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(N=this.end.parent.previousSibling),t&&t.is("element")&&t===N?t:null}clone(){return new qs(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const N=new TreeWalker$1(t);for(const me of N)yield me.item}*getPositions(t={}){t.boundaries=this;const N=new TreeWalker$1(t);yield N.position;for(const me of N)yield me.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,N,me,pe){return new this(new Position$1(t,N),new Position$1(me,pe))}static _createFromPositionAndShift(t,N){const me=t,pe=t.getShiftedBy(N);return N>0?new this(me,pe):new this(pe,me)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const N=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Position$1._createBefore(t),N)}};Range$1.prototype.is=function(de){return de==="range"||de==="view:range"};function enlargeTrimSkip(de){return!!(de.item.is("attributeElement")||de.item.is("uiElement"))}let Selection$1=class gm extends EmitterMixin(TypeCheckable$1){constructor(...t){super();xt(this,"_ranges");xt(this,"_lastRangeBackward");xt(this,"_isFake");xt(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const N of this._ranges)(!t||N.start.isBefore(t.start))&&(t=N);return t?t.clone():null}getLastRange(){let t=null;for(const N of this._ranges)(!t||N.end.isAfter(t.end))&&(t=N);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const N of this._ranges){let me=!1;for(const pe of t._ranges)if(N.isEqual(pe)){me=!0;break}if(!me)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const N=count(this.getRanges()),me=count(t.getRanges());if(N!=me)return!1;if(N==0)return!0;for(let pe of this.getRanges()){pe=pe.getTrimmed();let Le=!1;for(let Ye of t.getRanges())if(Ye=Ye.getTrimmed(),pe.start.isEqual(Ye.start)&&pe.end.isEqual(Ye.end)){Le=!0;break}if(!Le)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[N,me,pe]=t;if(typeof me=="object"&&(pe=me,me=void 0),N===null)this._setRanges([]),this._setFakeOptions(pe);else if(N instanceof gm||N instanceof DocumentSelection$1)this._setRanges(N.getRanges(),N.isBackward),this._setFakeOptions({fake:N.isFake,label:N.fakeSelectionLabel});else if(N instanceof Range$1)this._setRanges([N],pe&&pe.backward),this._setFakeOptions(pe);else if(N instanceof Position$1)this._setRanges([new Range$1(N)]),this._setFakeOptions(pe);else if(N instanceof Node$2){const Le=!!pe&&!!pe.backward;let Ye;if(me===void 0)throw new CKEditorError("view-selection-setto-required-second-parameter",this);me=="in"?Ye=Range$1._createIn(N):me=="on"?Ye=Range$1._createOn(N):Ye=new Range$1(Position$1._createAt(N,me)),this._setRanges([Ye],Le),this._setFakeOptions(pe)}else if(isIterable(N))this._setRanges(N,pe&&pe.backward),this._setFakeOptions(pe);else throw new CKEditorError("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,N){if(this.anchor===null)throw new CKEditorError("view-selection-setfocus-no-ranges",this);const me=Position$1._createAt(t,N);if(me.compareWith(this.focus)=="same")return;const pe=this.anchor;this._ranges.pop(),me.compareWith(pe)=="before"?this._addRange(new Range$1(me,pe),!0):this._addRange(new Range$1(pe,me)),this.fire("change")}_setRanges(t,N=!1){t=Array.from(t),this._ranges=[];for(const me of t)this._addRange(me);this._lastRangeBackward=!!N}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,N=!1){if(!(t instanceof Range$1))throw new CKEditorError("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!N}_pushRange(t){for(const N of this._ranges)if(t.isIntersecting(N))throw new CKEditorError("view-selection-range-intersects",this,{addedRange:t,intersectingRange:N});this._ranges.push(new Range$1(t.start,t.end))}};Selection$1.prototype.is=function(de){return de==="selection"||de==="view:selection"};let DocumentSelection$1=class extends EmitterMixin(TypeCheckable$1){constructor(...t){super();xt(this,"_selection");this._selection=new Selection$1,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,N){this._selection.setFocus(t,N)}};DocumentSelection$1.prototype.is=function(de){return de==="selection"||de=="documentSelection"||de=="view:selection"||de=="view:documentSelection"};class BubblingEventInfo extends EventInfo{constructor(t,N,me){super(t,N);xt(this,"startRange");xt(this,"_eventPhase");xt(this,"_currentTarget");this.startRange=me,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const contextsSymbol=Symbol("bubbling contexts");function BubblingEmitterMixin(de){class u extends de{fire(N,...me){try{const pe=N instanceof EventInfo?N:new EventInfo(this,N),Le=getBubblingContexts(this);if(!Le.size)return;if(updateEventInfo(pe,"capturing",this),fireListenerFor(Le,"$capture",pe,...me))return pe.return;const Ye=pe.startRange||this.selection.getFirstRange(),nt=Ye?Ye.getContainedElement():null,ot=nt?!!getCustomContext(Le,nt):!1;let ft=nt||getDeeperRangeParent(Ye);if(updateEventInfo(pe,"atTarget",ft),!ot){if(fireListenerFor(Le,"$text",pe,...me))return pe.return;updateEventInfo(pe,"bubbling",ft)}for(;ft;){if(ft.is("rootElement")){if(fireListenerFor(Le,"$root",pe,...me))return pe.return}else if(ft.is("element")&&fireListenerFor(Le,ft.name,pe,...me))return pe.return;if(fireListenerFor(Le,ft,pe,...me))return pe.return;ft=ft.parent,updateEventInfo(pe,"bubbling",ft)}return updateEventInfo(pe,"bubbling",this),fireListenerFor(Le,"$document",pe,...me),pe.return}catch(pe){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(pe,this)}}_addEventListener(N,me,pe){const Le=toArray$2(pe.context||"$document"),Ye=getBubblingContexts(this);for(const nt of Le){let ot=Ye.get(nt);ot||(ot=new(EmitterMixin()),Ye.set(nt,ot)),this.listenTo(ot,N,me,pe)}}_removeEventListener(N,me){const pe=getBubblingContexts(this);for(const Le of pe.values())this.stopListening(Le,N,me)}}return u}{const de=BubblingEmitterMixin(Object);["fire","_addEventListener","_removeEventListener"].forEach(u=>{BubblingEmitterMixin[u]=de.prototype[u]})}function updateEventInfo(de,u,t){de instanceof BubblingEventInfo&&(de._eventPhase=u,de._currentTarget=t)}function fireListenerFor(de,u,t,...N){const me=typeof u=="string"?de.get(u):getCustomContext(de,u);return me?(me.fire(t,...N),t.stop.called):!1}function getCustomContext(de,u){for(const[t,N]of de)if(typeof t=="function"&&t(u))return N;return null}function getBubblingContexts(de){return de[contextsSymbol]||(de[contextsSymbol]=new Map),de[contextsSymbol]}function getDeeperRangeParent(de){if(!de)return null;const u=de.start.parent,t=de.end.parent,N=u.getPath(),me=t.getPath();return N.length>me.length?u:t}let Document$1=class extends BubblingEmitterMixin(ObservableMixin()){constructor(t){super();xt(this,"selection");xt(this,"roots");xt(this,"stylesProcessor");xt(this,"_postFixers",new Set);this.selection=new DocumentSelection$1,this.roots=new Collection({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let N=!1;do for(const me of this._postFixers)if(N=me(t),N)break;while(N)}};const DEFAULT_PRIORITY=10;class AttributeElement extends Element$1{constructor(t,N,me,pe){super(t,N,me,pe);xt(this,"_priority",DEFAULT_PRIORITY);xt(this,"_id",null);xt(this,"_clonesGroup",null);this.getFillerOffset=getFillerOffset$3}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new CKEditorError("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const N=super._clone(t);return N._priority=this._priority,N._id=this._id,N}_canMergeAttributesFrom(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canSubtractAttributesOf(t)}}xt(AttributeElement,"DEFAULT_PRIORITY",DEFAULT_PRIORITY);AttributeElement.prototype.is=function(de,u){return u?u===this.name&&(de==="attributeElement"||de==="view:attributeElement"||de==="element"||de==="view:element"):de==="attributeElement"||de==="view:attributeElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};function getFillerOffset$3(){if(nonUiChildrenCount(this))return null;let de=this.parent;for(;de&&de.is("attributeElement");){if(nonUiChildrenCount(de)>1)return null;de=de.parent}return!de||nonUiChildrenCount(de)>1?null:this.childCount}function nonUiChildrenCount(de){return Array.from(de.getChildren()).filter(u=>!u.is("uiElement")).length}class EmptyElement extends Element$1{constructor(u,t,N,me){super(u,t,N,me),this.getFillerOffset=getFillerOffset$2}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-emptyelement-cannot-add",[this,t]);return 0}}EmptyElement.prototype.is=function(de,u){return u?u===this.name&&(de==="emptyElement"||de==="view:emptyElement"||de==="element"||de==="view:element"):de==="emptyElement"||de==="view:emptyElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};function getFillerOffset$2(){return null}class UIElement extends Element$1{constructor(u,t,N,me){super(u,t,N,me),this.getFillerOffset=getFillerOffset$1}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-uielement-cannot-add",[this,t]);return 0}render(u,t){return this.toDomElement(u)}toDomElement(u){const t=u.createElement(this.name);for(const N of this.getAttributeKeys())t.setAttribute(N,this.getAttribute(N));return t}}UIElement.prototype.is=function(de,u){return u?u===this.name&&(de==="uiElement"||de==="view:uiElement"||de==="element"||de==="view:element"):de==="uiElement"||de==="view:uiElement"||de==="element"||de==="view:element"||de==="node"||de==="view:node"};function injectUiElementHandling(de){de.document.on("arrowKey",(u,t)=>jumpOverUiElement(u,t,de.domConverter),{priority:"low"})}function getFillerOffset$1(){return null}function jumpOverUiElement(de,u,t){if(u.keyCode==keyCodes.arrowright){const N=u.domTarget.ownerDocument.defaultView.getSelection(),me=N.rangeCount==1&&N.getRangeAt(0).collapsed;if(me||u.shiftKey){const pe=N.focusNode,Le=N.focusOffset,Ye=t.domPositionToView(pe,Le);if(Ye===null)return;let nt=!1;const ot=Ye.getLastMatchingPosition(ft=>(ft.item.is("uiElement")&&(nt=!0),!!(ft.item.is("uiElement")||ft.item.is("attributeElement"))));if(nt){const ft=t.viewPositionToDom(ot);me?N.collapse(ft.parent,ft.offset):N.extend(ft.parent,ft.offset)}}}}class RawElement extends Element$1{constructor(u,t,N,me){super(u,t,N,me),this.getFillerOffset=getFillerOffset$5}_insertChild(u,t){if(t&&(t instanceof Node$2||Array.from(t).length>0))throw new CKEditorError("view-rawelement-cannot-add",[this,t]);return 0}render(u,t){}}RawElement.prototype.is=function(de,u){return u?u===this.name&&(de==="rawElement"||de==="view:rawElement"||de==="element"||de==="view:element"):de==="rawElement"||de==="view:rawElement"||de===this.name||de==="view:"+this.name||de==="element"||de==="view:element"||de==="node"||de==="view:node"};function getFillerOffset$5(){return null}let DocumentFragment$1=class extends EmitterMixin(TypeCheckable$1){constructor(t,N){super();xt(this,"document");xt(this,"_children",[]);xt(this,"_customProperties",new Map);this.document=t,N&&this._insertChild(0,N)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,N){this._fireChange("children",this,{index:t});let me=0;const pe=normalize$2(this.document,N);for(const Le of pe)Le.parent!==null&&Le._remove(),Le.parent=this,this._children.splice(t,0,Le),t++,me++;return me}_removeChildren(t,N=1){this._fireChange("children",this,{index:t});for(let me=t;me<t+N;me++)this._children[me].parent=null;return this._children.splice(t,N)}_fireChange(t,N,me){this.fire(`change:${t}`,N,me)}_setCustomProperty(t,N){this._customProperties.set(t,N)}_removeCustomProperty(t){return this._customProperties.delete(t)}};DocumentFragment$1.prototype.is=function(de){return de==="documentFragment"||de==="view:documentFragment"};function normalize$2(de,u){return typeof u=="string"?[new Text$1(de,u)]:(isIterable(u)||(u=[u]),Array.from(u).map(t=>typeof t=="string"?new Text$1(de,t):t instanceof TextProxy$1?new Text$1(de,t.data):t))}class DowncastWriter{constructor(u){xt(this,"document");xt(this,"_cloneGroups",new Map);xt(this,"_slotFactory",null);this.document=u}setSelection(...u){this.document.selection._setTo(...u)}setSelectionFocus(u,t){this.document.selection._setFocus(u,t)}createDocumentFragment(u){return new DocumentFragment$1(this.document,u)}createText(u){return new Text$1(this.document,u)}createAttributeElement(u,t,N={}){const me=new AttributeElement(this.document,u,t);return typeof N.priority=="number"&&(me._priority=N.priority),N.id&&(me._id=N.id),N.renderUnsafeAttributes&&me._unsafeAttributesToRender.push(...N.renderUnsafeAttributes),me}createContainerElement(u,t,N={},me={}){let pe=null;isPlainObject(N)?me=N:pe=N;const Le=new ContainerElement(this.document,u,t,pe);return me.renderUnsafeAttributes&&Le._unsafeAttributesToRender.push(...me.renderUnsafeAttributes),Le}createEditableElement(u,t,N={}){const me=new EditableElement(this.document,u,t);return N.renderUnsafeAttributes&&me._unsafeAttributesToRender.push(...N.renderUnsafeAttributes),me}createEmptyElement(u,t,N={}){const me=new EmptyElement(this.document,u,t);return N.renderUnsafeAttributes&&me._unsafeAttributesToRender.push(...N.renderUnsafeAttributes),me}createUIElement(u,t,N){const me=new UIElement(this.document,u,t);return N&&(me.render=N),me}createRawElement(u,t,N,me={}){const pe=new RawElement(this.document,u,t);return N&&(pe.render=N),me.renderUnsafeAttributes&&pe._unsafeAttributesToRender.push(...me.renderUnsafeAttributes),pe}setAttribute(u,t,N,me){me!==void 0?me._setAttribute(u,t,N):N._setAttribute(u,t)}removeAttribute(u,t,N){N!==void 0?N._removeAttribute(u,t):t._removeAttribute(u)}addClass(u,t){t._addClass(u)}removeClass(u,t){t._removeClass(u)}setStyle(u,t,N){isPlainObject(u)&&N===void 0?t._setStyle(u):N._setStyle(u,t)}removeStyle(u,t){t._removeStyle(u)}setCustomProperty(u,t,N){N._setCustomProperty(u,t)}removeCustomProperty(u,t){return t._removeCustomProperty(u)}breakAttributes(u){return u instanceof Position$1?this._breakAttributes(u):this._breakAttributesRange(u)}breakContainer(u){const t=u.parent;if(!t.is("containerElement"))throw new CKEditorError("view-writer-break-non-container-element",this.document);if(!t.parent)throw new CKEditorError("view-writer-break-root",this.document);if(u.isAtStart)return Position$1._createBefore(t);if(!u.isAtEnd){const N=t._clone(!1);this.insert(Position$1._createAfter(t),N);const me=new Range$1(u,Position$1._createAt(t,"end")),pe=new Position$1(N,0);this.move(me,pe)}return Position$1._createAfter(t)}mergeAttributes(u){const t=u.offset,N=u.parent;if(N.is("$text"))return u;if(N.is("attributeElement")&&N.childCount===0){const Le=N.parent,Ye=N.index;return N._remove(),this._removeFromClonedElementsGroup(N),this.mergeAttributes(new Position$1(Le,Ye))}const me=N.getChild(t-1),pe=N.getChild(t);if(!me||!pe)return u;if(me.is("$text")&&pe.is("$text"))return mergeTextNodes(me,pe);if(me.is("attributeElement")&&pe.is("attributeElement")&&me.isSimilar(pe)){const Le=me.childCount;return me._appendChild(pe.getChildren()),pe._remove(),this._removeFromClonedElementsGroup(pe),this.mergeAttributes(new Position$1(me,Le))}return u}mergeContainers(u){const t=u.nodeBefore,N=u.nodeAfter;if(!t||!N||!t.is("containerElement")||!N.is("containerElement"))throw new CKEditorError("view-writer-merge-containers-invalid-position",this.document);const me=t.getChild(t.childCount-1),pe=me instanceof Text$1?Position$1._createAt(me,"end"):Position$1._createAt(t,"end");return this.move(Range$1._createIn(N),Position$1._createAt(t,"end")),this.remove(Range$1._createOn(N)),pe}insert(u,t){t=isIterable(t)?[...t]:[t],validateNodesToInsert(t,this.document);const N=t.reduce((Le,Ye)=>{const nt=Le[Le.length-1],ot=!Ye.is("uiElement");return!nt||nt.breakAttributes!=ot?Le.push({breakAttributes:ot,nodes:[Ye]}):nt.nodes.push(Ye),Le},[]);let me=null,pe=u;for(const{nodes:Le,breakAttributes:Ye}of N){const nt=this._insertNodes(pe,Le,Ye);me||(me=nt.start),pe=nt.end}return me?new Range$1(me,pe):new Range$1(u)}remove(u){const t=u instanceof Range$1?u:Range$1._createOn(u);if(validateRangeContainer(t,this.document),t.isCollapsed)return new DocumentFragment$1(this.document);const{start:N,end:me}=this._breakAttributesRange(t,!0),pe=N.parent,Le=me.offset-N.offset,Ye=pe._removeChildren(N.offset,Le);for(const ot of Ye)this._removeFromClonedElementsGroup(ot);const nt=this.mergeAttributes(N);return t.start=nt,t.end=nt.clone(),new DocumentFragment$1(this.document,Ye)}clear(u,t){validateRangeContainer(u,this.document);const N=u.getWalker({direction:"backward",ignoreElementEnd:!0});for(const me of N){const pe=me.item;let Le;if(pe.is("element")&&t.isSimilar(pe))Le=Range$1._createOn(pe);else if(!me.nextPosition.isAfter(u.start)&&pe.is("$textProxy")){const Ye=pe.getAncestors().find(nt=>nt.is("element")&&t.isSimilar(nt));Ye&&(Le=Range$1._createIn(Ye))}Le&&(Le.end.isAfter(u.end)&&(Le.end=u.end),Le.start.isBefore(u.start)&&(Le.start=u.start),this.remove(Le))}}move(u,t){let N;if(t.isAfter(u.end)){t=this._breakAttributes(t,!0);const me=t.parent,pe=me.childCount;u=this._breakAttributesRange(u,!0),N=this.remove(u),t.offset+=me.childCount-pe}else N=this.remove(u);return this.insert(t,N)}wrap(u,t){if(!(t instanceof AttributeElement))throw new CKEditorError("view-writer-wrap-invalid-attribute",this.document);if(validateRangeContainer(u,this.document),u.isCollapsed){let N=u.start;N.parent.is("element")&&!_hasNonUiChildren(N.parent)&&(N=N.getLastMatchingPosition(pe=>pe.item.is("uiElement"))),N=this._wrapPosition(N,t);const me=this.document.selection;return me.isCollapsed&&me.getFirstPosition().isEqual(u.start)&&this.setSelection(N),new Range$1(N)}else return this._wrapRange(u,t)}unwrap(u,t){if(!(t instanceof AttributeElement))throw new CKEditorError("view-writer-unwrap-invalid-attribute",this.document);if(validateRangeContainer(u,this.document),u.isCollapsed)return u;const{start:N,end:me}=this._breakAttributesRange(u,!0),pe=N.parent,Le=this._unwrapChildren(pe,N.offset,me.offset,t),Ye=this.mergeAttributes(Le.start);Ye.isEqual(Le.start)||Le.end.offset--;const nt=this.mergeAttributes(Le.end);return new Range$1(Ye,nt)}rename(u,t){const N=new ContainerElement(this.document,u,t.getAttributes());return this.insert(Position$1._createAfter(t),N),this.move(Range$1._createIn(t),Position$1._createAt(N,0)),this.remove(Range$1._createOn(t)),N}clearClonedElementsGroup(u){this._cloneGroups.delete(u)}createPositionAt(u,t){return Position$1._createAt(u,t)}createPositionAfter(u){return Position$1._createAfter(u)}createPositionBefore(u){return Position$1._createBefore(u)}createRange(u,t){return new Range$1(u,t)}createRangeOn(u){return Range$1._createOn(u)}createRangeIn(u){return Range$1._createIn(u)}createSelection(...u){return new Selection$1(...u)}createSlot(u="children"){if(!this._slotFactory)throw new CKEditorError("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,u)}_registerSlotFactory(u){this._slotFactory=u}_clearSlotFactory(){this._slotFactory=null}_insertNodes(u,t,N){let me;if(N?me=getParentContainer(u):me=u.parent.is("$text")?u.parent.parent:u.parent,!me)throw new CKEditorError("view-writer-invalid-position-container",this.document);let pe;N?pe=this._breakAttributes(u,!0):pe=u.parent.is("$text")?breakTextNode(u):u;const Le=me._insertChild(pe.offset,t);for(const ft of t)this._addToClonedElementsGroup(ft);const Ye=pe.getShiftedBy(Le),nt=this.mergeAttributes(pe);nt.isEqual(pe)||Ye.offset--;const ot=this.mergeAttributes(Ye);return new Range$1(nt,ot)}_wrapChildren(u,t,N,me){let pe=t;const Le=[];for(;pe<N;){const nt=u.getChild(pe),ot=nt.is("$text"),ft=nt.is("attributeElement");if(ft&&nt._canMergeAttributesFrom(me))nt._mergeAttributesFrom(me),Le.push(new Position$1(u,pe));else if(ot||!ft||shouldABeOutsideB(me,nt)){const mt=me._clone();nt._remove(),mt._appendChild(nt),u._insertChild(pe,mt),this._addToClonedElementsGroup(mt),Le.push(new Position$1(u,pe))}else this._wrapChildren(nt,0,nt.childCount,me);pe++}let Ye=0;for(const nt of Le){if(nt.offset-=Ye,nt.offset==t)continue;this.mergeAttributes(nt).isEqual(nt)||(Ye++,N--)}return Range$1._createFromParentsAndOffsets(u,t,u,N)}_unwrapChildren(u,t,N,me){let pe=t;const Le=[];for(;pe<N;){const nt=u.getChild(pe);if(!nt.is("attributeElement")){pe++;continue}if(nt.isSimilar(me)){const ot=nt.getChildren(),ft=nt.childCount;nt._remove(),u._insertChild(pe,ot),this._removeFromClonedElementsGroup(nt),Le.push(new Position$1(u,pe),new Position$1(u,pe+ft)),pe+=ft,N+=ft-1;continue}if(nt._canSubtractAttributesOf(me)){nt._subtractAttributesOf(me),Le.push(new Position$1(u,pe),new Position$1(u,pe+1)),pe++;continue}this._unwrapChildren(nt,0,nt.childCount,me),pe++}let Ye=0;for(const nt of Le){if(nt.offset-=Ye,nt.offset==t||nt.offset==N)continue;this.mergeAttributes(nt).isEqual(nt)||(Ye++,N--)}return Range$1._createFromParentsAndOffsets(u,t,u,N)}_wrapRange(u,t){const{start:N,end:me}=this._breakAttributesRange(u,!0),pe=N.parent,Le=this._wrapChildren(pe,N.offset,me.offset,t),Ye=this.mergeAttributes(Le.start);Ye.isEqual(Le.start)||Le.end.offset--;const nt=this.mergeAttributes(Le.end);return new Range$1(Ye,nt)}_wrapPosition(u,t){if(t.isSimilar(u.parent))return movePositionToTextNode(u.clone());u.parent.is("$text")&&(u=breakTextNode(u));const N=this.createAttributeElement("_wrapPosition-fake-element");N._priority=Number.POSITIVE_INFINITY,N.isSimilar=()=>!1,u.parent._insertChild(u.offset,N);const me=new Range$1(u,u.getShiftedBy(1));this.wrap(me,t);const pe=new Position$1(N.parent,N.index);N._remove();const Le=pe.nodeBefore,Ye=pe.nodeAfter;return Le&&Le.is("view:$text")&&Ye&&Ye.is("view:$text")?mergeTextNodes(Le,Ye):movePositionToTextNode(pe)}_breakAttributesRange(u,t=!1){const N=u.start,me=u.end;if(validateRangeContainer(u,this.document),u.isCollapsed){const nt=this._breakAttributes(u.start,t);return new Range$1(nt,nt)}const pe=this._breakAttributes(me,t),Le=pe.parent.childCount,Ye=this._breakAttributes(N,t);return pe.offset+=pe.parent.childCount-Le,new Range$1(Ye,pe)}_breakAttributes(u,t=!1){const N=u.offset,me=u.parent;if(u.parent.is("emptyElement"))throw new CKEditorError("view-writer-cannot-break-empty-element",this.document);if(u.parent.is("uiElement"))throw new CKEditorError("view-writer-cannot-break-ui-element",this.document);if(u.parent.is("rawElement"))throw new CKEditorError("view-writer-cannot-break-raw-element",this.document);if(!t&&me.is("$text")&&isContainerOrFragment(me.parent)||isContainerOrFragment(me))return u.clone();if(me.is("$text"))return this._breakAttributes(breakTextNode(u),t);const pe=me.childCount;if(N==pe){const Le=new Position$1(me.parent,me.index+1);return this._breakAttributes(Le,t)}else if(N===0){const Le=new Position$1(me.parent,me.index);return this._breakAttributes(Le,t)}else{const Le=me.index+1,Ye=me._clone();me.parent._insertChild(Le,Ye),this._addToClonedElementsGroup(Ye);const nt=me.childCount-N,ot=me._removeChildren(N,nt);Ye._appendChild(ot);const ft=new Position$1(me.parent,Le);return this._breakAttributes(ft,t)}}_addToClonedElementsGroup(u){if(!u.root.is("rootElement"))return;if(u.is("element"))for(const me of u.getChildren())this._addToClonedElementsGroup(me);const t=u.id;if(!t)return;let N=this._cloneGroups.get(t);N||(N=new Set,this._cloneGroups.set(t,N)),N.add(u),u._clonesGroup=N}_removeFromClonedElementsGroup(u){if(u.is("element"))for(const me of u.getChildren())this._removeFromClonedElementsGroup(me);const t=u.id;if(!t)return;const N=this._cloneGroups.get(t);N&&N.delete(u)}}function _hasNonUiChildren(de){return Array.from(de.getChildren()).some(u=>!u.is("uiElement"))}function getParentContainer(de){let u=de.parent;for(;!isContainerOrFragment(u);){if(!u)return;u=u.parent}return u}function shouldABeOutsideB(de,u){return de.priority<u.priority?!0:de.priority>u.priority?!1:de.getIdentity()<u.getIdentity()}function movePositionToTextNode(de){const u=de.nodeBefore;if(u&&u.is("$text"))return new Position$1(u,u.data.length);const t=de.nodeAfter;return t&&t.is("$text")?new Position$1(t,0):de}function breakTextNode(de){if(de.offset==de.parent.data.length)return new Position$1(de.parent.parent,de.parent.index+1);if(de.offset===0)return new Position$1(de.parent.parent,de.parent.index);const u=de.parent.data.slice(de.offset);return de.parent._data=de.parent.data.slice(0,de.offset),de.parent.parent._insertChild(de.parent.index+1,new Text$1(de.root.document,u)),new Position$1(de.parent.parent,de.parent.index+1)}function mergeTextNodes(de,u){const t=de.data.length;return de._data+=u.data,u._remove(),new Position$1(de,t)}const validNodesToInsert=[Text$1,AttributeElement,ContainerElement,EmptyElement,RawElement,UIElement];function validateNodesToInsert(de,u){for(const t of de){if(!validNodesToInsert.some(N=>t instanceof N))throw new CKEditorError("view-writer-insert-invalid-node-type",u);t.is("$text")||validateNodesToInsert(t.getChildren(),u)}}function isContainerOrFragment(de){return de&&(de.is("containerElement")||de.is("documentFragment"))}function validateRangeContainer(de,u){const t=getParentContainer(de.start),N=getParentContainer(de.end);if(!t||!N||t!==N)throw new CKEditorError("view-writer-invalid-range-container",u)}const NBSP_FILLER=de=>de.createTextNode(""),MARKED_NBSP_FILLER=de=>{const u=de.createElement("span");return u.dataset.ckeFiller="true",u.innerText="",u},BR_FILLER=de=>{const u=de.createElement("br");return u.dataset.ckeFiller="true",u},INLINE_FILLER_LENGTH=7,INLINE_FILLER="".repeat(INLINE_FILLER_LENGTH);function startsWithFiller(de){return typeof de=="string"?de.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER:isText(de)&&de.data.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER}function isInlineFiller(de){return de.data.length==INLINE_FILLER_LENGTH&&startsWithFiller(de)}function getDataWithoutFiller(de){const u=typeof de=="string"?de:de.data;return startsWithFiller(de)?u.slice(INLINE_FILLER_LENGTH):u}function injectQuirksHandling(de){de.document.on("arrowKey",jumpOverInlineFiller,{priority:"low"})}function jumpOverInlineFiller(de,u){if(u.keyCode==keyCodes.arrowleft){const t=u.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const N=t.getRangeAt(0).startContainer,me=t.getRangeAt(0).startOffset;startsWithFiller(N)&&me<=INLINE_FILLER_LENGTH&&t.collapse(N,0)}}}class Renderer extends ObservableMixin(){constructor(t,N){super();xt(this,"domDocuments",new Set);xt(this,"domConverter");xt(this,"markedAttributes",new Set);xt(this,"markedChildren",new Set);xt(this,"markedTexts",new Set);xt(this,"selection");xt(this,"_inlineFiller",null);xt(this,"_fakeSelectionContainer",null);this.domConverter=t,this.selection=N,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),env.isBlink&&!env.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,N){if(t==="text")this.domConverter.mapViewToDom(N.parent)&&this.markedTexts.add(N);else{if(!this.domConverter.mapViewToDom(N))return;if(t==="attributes")this.markedAttributes.add(N);else if(t==="children")this.markedChildren.add(N);else throw new CKEditorError("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!env.isAndroid)return;let t=null;const N=env.isBlink&&!env.isAndroid?!this.isSelecting:!0;for(const me of this.markedChildren)this._updateChildrenMappings(me);N?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=Position$1._createBefore(t.parent)));for(const me of this.markedAttributes)this._updateAttrs(me);for(const me of this.markedChildren)this._updateChildren(me,{inlineFillerPosition:t});for(const me of this.markedTexts)!this.markedChildren.has(me.parent)&&this.domConverter.mapViewToDom(me.parent)&&this._updateText(me,{inlineFillerPosition:t});if(N)if(t){const me=this.domConverter.viewPositionToDom(t),pe=me.parent.ownerDocument;startsWithFiller(me.parent)?this._inlineFiller=me.parent:this._inlineFiller=addInlineFiller(pe,me.parent,me.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const N=this.domConverter.mapViewToDom(t);if(!N)return;const me=Array.from(N.childNodes),pe=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),Le=this._diffNodeLists(me,pe),Ye=this._findUpdateActions(Le,me,pe,areSimilarElements);if(Ye.indexOf("update")!==-1){const nt={equal:0,insert:0,delete:0};for(const ot of Ye)if(ot==="update"){const ft=nt.equal+nt.insert,mt=nt.equal+nt.delete,bt=t.getChild(ft);bt&&!bt.is("uiElement")&&!bt.is("rawElement")&&this._updateElementMappings(bt,me[mt]),remove$2(pe[ft]),nt.equal++}else nt[ot]++}}_updateElementMappings(t,N){this.domConverter.unbindDomElement(N),this.domConverter.bindElements(N,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?Position$1._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),N=this.domConverter.viewPositionToDom(t);return!!(N&&isText(N.parent)&&startsWithFiller(N.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!startsWithFiller(t))throw new CKEditorError("view-renderer-filler-was-lost",this);isInlineFiller(t)?t.remove():t.data=t.data.substr(INLINE_FILLER_LENGTH),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),N=t.parent,me=t.offset;if(!this.domConverter.mapViewToDom(N.root)||!N.is("element")||!isEditable(N))return!1;const pe=t.nodeBefore,Le=t.nodeAfter;return!(pe instanceof Text$1||Le instanceof Text$1||me===N.getFillerOffset()&&(!pe||!pe.is("element","br"))||env.isAndroid&&(pe||Le))}_updateText(t,N){const me=this.domConverter.findCorrespondingDomText(t);let Le=this.domConverter.viewToDom(t).data;const Ye=N.inlineFillerPosition;Ye&&Ye.parent==t.parent&&Ye.offset==t.index&&(Le=INLINE_FILLER+Le),this._updateTextNode(me,Le)}_updateAttrs(t){const N=this.domConverter.mapViewToDom(t);if(N){for(const me of Array.from(N.attributes)){const pe=me.name;t.hasAttribute(pe)||this.domConverter.removeDomElementAttribute(N,pe)}for(const me of t.getAttributeKeys())this.domConverter.setDomElementAttribute(N,me,t.getAttribute(me),t)}}_updateChildren(t,N){const me=this.domConverter.mapViewToDom(t);if(!me)return;if(env.isAndroid){let bt=null;for(const yt of Array.from(me.childNodes)){if(bt&&isText(bt)&&isText(yt)){me.normalize();break}bt=yt}}const pe=N.inlineFillerPosition,Le=me.childNodes,Ye=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));pe&&pe.parent===t&&addInlineFiller(me.ownerDocument,Ye,pe.offset);const nt=this._diffNodeLists(Le,Ye),ot=this._findUpdateActions(nt,Le,Ye,areTextNodes);let ft=0;const mt=new Set;for(const bt of ot)bt==="delete"?(mt.add(Le[ft]),remove$2(Le[ft])):(bt==="equal"||bt==="update")&&ft++;ft=0;for(const bt of ot)bt==="insert"?(insertAt(me,ft,Ye[ft]),ft++):bt==="update"?(this._updateTextNode(Le[ft],Ye[ft].data),ft++):bt==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(Ye[ft])),ft++);for(const bt of mt)bt.parentNode||this.domConverter.unbindDomElement(bt)}_diffNodeLists(t,N){return t=filterOutFakeSelectionContainer(t,this._fakeSelectionContainer),diff(t,N,sameNodes$1.bind(null,this.domConverter))}_findUpdateActions(t,N,me,pe){if(t.indexOf("insert")===-1||t.indexOf("delete")===-1)return t;let Le=[],Ye=[],nt=[];const ot={equal:0,insert:0,delete:0};for(const ft of t)ft==="insert"?nt.push(me[ot.equal+ot.insert]):ft==="delete"?Ye.push(N[ot.equal+ot.delete]):(Le=Le.concat(diff(Ye,nt,pe).map(mt=>mt==="equal"?"update":mt)),Le.push("equal"),Ye=[],nt=[]),ot[ft]++;return Le.concat(diff(Ye,nt,pe).map(ft=>ft==="equal"?"update":ft))}_updateTextNode(t,N){const me=t.data;me!=N&&(env.isAndroid&&this.isComposing&&me.replace(/\u00A0/g," ")==N.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,N))}_updateTextNodeInternal(t,N){const me=fastDiff(t.data,N);for(const pe of me)pe.type==="insert"?t.insertData(pe.index,pe.values.join("")):t.deleteData(pe.index,pe.howMany)}_markDescendantTextToSync(t){if(t){if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const N of t.getChildren())this._markDescendantTextToSync(N)}}_updateSelection(){if(env.isBlink&&!env.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const t=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!t||(this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&env.isAndroid||this._updateDomSelection(t))}_updateFakeSelection(t){const N=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=createFakeSelectionContainer(N));const me=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(me,this.selection),!this._fakeSelectionNeedsUpdate(t))return;(!me.parentElement||me.parentElement!=t)&&t.appendChild(me),me.textContent=this.selection.fakeSelectionLabel||"";const pe=N.getSelection(),Le=N.createRange();pe.removeAllRanges(),Le.selectNodeContents(me),pe.addRange(Le)}_updateDomSelection(t){const N=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(N))return;const me=this.domConverter.viewPositionToDom(this.selection.anchor),pe=this.domConverter.viewPositionToDom(this.selection.focus);N.setBaseAndExtent(me.parent,me.offset,pe.parent,pe.offset),env.isGecko&&fixGeckoSelectionAfterBr(pe,N)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const N=t&&this.domConverter.domSelectionToView(t);return!(N&&this.selection.isEqual(N)||!this.selection.isCollapsed&&this.selection.isSimilar(N))}_fakeSelectionNeedsUpdate(t){const N=this._fakeSelectionContainer,me=t.ownerDocument.getSelection();return!N||N.parentElement!==t||me.anchorNode!==N&&!N.contains(me.anchorNode)?!0:N.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const N=t.getSelection();if(N.rangeCount){const me=t.activeElement,pe=this.domConverter.mapDomToView(me);me&&pe&&N.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function isEditable(de){if(de.getAttribute("contenteditable")=="false")return!1;const u=de.findAncestor(t=>t.hasAttribute("contenteditable"));return!u||u.getAttribute("contenteditable")=="true"}function addInlineFiller(de,u,t){const N=u instanceof Array?u:u.childNodes,me=N[t];if(isText(me))return me.data=INLINE_FILLER+me.data,me;{const pe=de.createTextNode(INLINE_FILLER);return Array.isArray(u)?N.splice(t,0,pe):insertAt(u,t,pe),pe}}function areSimilarElements(de,u){return isNode(de)&&isNode(u)&&!isText(de)&&!isText(u)&&!isComment(de)&&!isComment(u)&&de.tagName.toLowerCase()===u.tagName.toLowerCase()}function areTextNodes(de,u){return isNode(de)&&isNode(u)&&isText(de)&&isText(u)}function sameNodes$1(de,u,t){return u===t?!0:isText(u)&&isText(t)?u.data===t.data:!!(de.isBlockFiller(u)&&de.isBlockFiller(t))}function fixGeckoSelectionAfterBr(de,u){let t=de.parent,N=de.offset;if(isText(t)&&isInlineFiller(t)&&(N=indexOf(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||N!=t.childNodes.length-1)return;const me=t.childNodes[N];me&&me.tagName=="BR"&&u.addRange(u.getRangeAt(0))}function filterOutFakeSelectionContainer(de,u){const t=Array.from(de);return t.length==0||!u||t[t.length-1]==u&&t.pop(),t}function createFakeSelectionContainer(de){const u=de.createElement("div");return u.className="ck-fake-selection-container",Object.assign(u.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),u.textContent="",u}const BR_FILLER_REF=BR_FILLER(global$1.document),NBSP_FILLER_REF=NBSP_FILLER(global$1.document),MARKED_NBSP_FILLER_REF=MARKED_NBSP_FILLER(global$1.document),UNSAFE_ATTRIBUTE_NAME_PREFIX="data-ck-unsafe-attribute-",UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE="data-ck-unsafe-element";class DomConverter{constructor(u,{blockFillerMode:t,renderingMode:N="editing"}={}){xt(this,"document");xt(this,"renderingMode");xt(this,"blockFillerMode");xt(this,"preElements");xt(this,"blockElements");xt(this,"inlineObjectElements");xt(this,"unsafeElements");xt(this,"_domDocument");xt(this,"_domToViewMapping",new WeakMap);xt(this,"_viewToDomMapping",new WeakMap);xt(this,"_fakeSelectionMapping",new WeakMap);xt(this,"_rawContentElementMatcher",new Matcher);xt(this,"_inlineObjectElementMatcher",new Matcher);xt(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=u,this.renderingMode=N,this.blockFillerMode=t||(N==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?global$1.document:global$1.document.implementation.createHTMLDocument("")}bindFakeSelection(u,t){this._fakeSelectionMapping.set(u,new Selection$1(t))}fakeSelectionToView(u){return this._fakeSelectionMapping.get(u)}bindElements(u,t){this._domToViewMapping.set(u,t),this._viewToDomMapping.set(t,u)}unbindDomElement(u){const t=this._domToViewMapping.get(u);if(t){this._domToViewMapping.delete(u),this._viewToDomMapping.delete(t);for(const N of u.children)this.unbindDomElement(N)}}bindDocumentFragments(u,t){this._domToViewMapping.set(u,t),this._viewToDomMapping.set(t,u)}shouldRenderAttribute(u,t,N){return this.renderingMode==="data"?!0:(u=u.toLowerCase(),u.startsWith("on")||u==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:N==="img"&&(u==="src"||u==="srcset")||N==="source"&&u==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(u,t){if(this.renderingMode==="data"){u.innerHTML=t;return}const N=new DOMParser().parseFromString(t,"text/html"),me=N.createDocumentFragment(),pe=N.body.childNodes;for(;pe.length>0;)me.appendChild(pe[0]);const Le=N.createTreeWalker(me,NodeFilter.SHOW_ELEMENT),Ye=[];let nt;for(;nt=Le.nextNode();)Ye.push(nt);for(const ot of Ye){for(const mt of ot.getAttributeNames())this.setDomElementAttribute(ot,mt,ot.getAttribute(mt));const ft=ot.tagName.toLowerCase();this._shouldRenameElement(ft)&&(_logUnsafeElement(ft),ot.replaceWith(this._createReplacementDomElement(ft,ot)))}for(;u.firstChild;)u.firstChild.remove();u.append(me)}viewToDom(u,t={}){if(u.is("$text")){const N=this._processDataFromViewText(u);return this._domDocument.createTextNode(N)}else{const N=u;if(this.mapViewToDom(N))if(N.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(N);else return this.mapViewToDom(N);let me;if(N.is("documentFragment"))me=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(me,N);else{if(N.is("uiElement"))return N.name==="$comment"?me=this._domDocument.createComment(N.getCustomProperty("$rawContent")):me=N.render(this._domDocument,this),t.bind&&this.bindElements(me,N),me;this._shouldRenameElement(N.name)?(_logUnsafeElement(N.name),me=this._createReplacementDomElement(N.name)):N.hasAttribute("xmlns")?me=this._domDocument.createElementNS(N.getAttribute("xmlns"),N.name):me=this._domDocument.createElement(N.name),N.is("rawElement")&&N.render(me,this),t.bind&&this.bindElements(me,N);for(const pe of N.getAttributeKeys())this.setDomElementAttribute(me,pe,N.getAttribute(pe),N)}if(t.withChildren!==!1)for(const pe of this.viewChildrenToDom(N,t))me instanceof HTMLTemplateElement?me.content.appendChild(pe):me.appendChild(pe);return me}}setDomElementAttribute(u,t,N,me){const pe=this.shouldRenderAttribute(t,N,u.tagName.toLowerCase())||me&&me.shouldRenderUnsafeAttribute(t);if(pe||logWarning("domconverter-unsafe-attribute-detected",{domElement:u,key:t,value:N}),!isValidAttributeName(t)){logWarning("domconverter-invalid-attribute-detected",{domElement:u,key:t,value:N});return}u.hasAttribute(t)&&!pe?u.removeAttribute(t):u.hasAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t)&&pe&&u.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t),u.setAttribute(pe?t:UNSAFE_ATTRIBUTE_NAME_PREFIX+t,N)}removeDomElementAttribute(u,t){t!=UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE&&(u.removeAttribute(t),u.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+t))}*viewChildrenToDom(u,t={}){const N=u.getFillerOffset&&u.getFillerOffset();let me=0;for(const pe of u.getChildren()){N===me&&(yield this._getBlockFiller());const Le=pe.is("element")&&!!pe.getCustomProperty("dataPipeline:transparentRendering")&&!first(pe.getAttributes());if(Le&&this.renderingMode=="data")if(pe.is("rawElement")){const Ye=this._domDocument.createElement(pe.name);pe.render(Ye,this),yield*[...Ye.childNodes]}else yield*this.viewChildrenToDom(pe,t);else Le&&logWarning("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:pe}),yield this.viewToDom(pe,t);me++}N===me&&(yield this._getBlockFiller())}viewRangeToDom(u){const t=this.viewPositionToDom(u.start),N=this.viewPositionToDom(u.end),me=this._domDocument.createRange();return me.setStart(t.parent,t.offset),me.setEnd(N.parent,N.offset),me}viewPositionToDom(u){const t=u.parent;if(t.is("$text")){const N=this.findCorrespondingDomText(t);if(!N)return null;let me=u.offset;return startsWithFiller(N)&&(me+=INLINE_FILLER_LENGTH),{parent:N,offset:me}}else{let N,me,pe;if(u.offset===0){if(N=this.mapViewToDom(t),!N)return null;pe=N.childNodes[0]}else{const Ye=u.nodeBefore;if(me=Ye.is("$text")?this.findCorrespondingDomText(Ye):this.mapViewToDom(Ye),!me)return null;N=me.parentNode,pe=me.nextSibling}if(isText(pe)&&startsWithFiller(pe))return{parent:pe,offset:INLINE_FILLER_LENGTH};const Le=me?indexOf(me)+1:0;return{parent:N,offset:Le}}}domToView(u,t={}){const N=[],me=this._domToView(u,t,N),pe=me.next().value;return!pe||(me.next(),this._processDomInlineNodes(null,N,t),this.blockFillerMode=="br"&&isViewBrFiller(pe))||pe.is("$text")&&pe.data.length==0?null:pe}*domChildrenToView(u,t={},N=[]){let me=[];u instanceof HTMLTemplateElement?me=[...u.content.childNodes]:me=[...u.childNodes];for(let pe=0;pe<me.length;pe++){const Le=me[pe],Ye=this._domToView(Le,t,N),nt=Ye.next().value;nt!==null&&(this._isBlockViewElement(nt)&&this._processDomInlineNodes(u,N,t),this.blockFillerMode=="br"&&isViewBrFiller(nt)||(yield nt),Ye.next())}this._processDomInlineNodes(u,N,t)}domSelectionToView(u){if(isGeckoRestrictedDomSelection(u))return new Selection$1([]);if(u.rangeCount===1){let me=u.getRangeAt(0).startContainer;isText(me)&&(me=me.parentNode);const pe=this.fakeSelectionToView(me);if(pe)return pe}const t=this.isDomSelectionBackward(u),N=[];for(let me=0;me<u.rangeCount;me++){const pe=u.getRangeAt(me),Le=this.domRangeToView(pe);Le&&N.push(Le)}return new Selection$1(N,{backward:t})}domRangeToView(u){const t=this.domPositionToView(u.startContainer,u.startOffset),N=this.domPositionToView(u.endContainer,u.endOffset);return t&&N?new Range$1(t,N):null}domPositionToView(u,t=0){if(this.isBlockFiller(u))return this.domPositionToView(u.parentNode,indexOf(u));const N=this.mapDomToView(u);if(N&&(N.is("uiElement")||N.is("rawElement")))return Position$1._createBefore(N);if(isText(u)){if(isInlineFiller(u))return this.domPositionToView(u.parentNode,indexOf(u));const me=this.findCorrespondingViewText(u);let pe=t;return me?(startsWithFiller(u)&&(pe-=INLINE_FILLER_LENGTH,pe=pe<0?0:pe),new Position$1(me,pe)):null}else{if(t===0){const me=this.mapDomToView(u);if(me)return new Position$1(me,0)}else{const me=u.childNodes[t-1];if(isText(me)&&isInlineFiller(me)||me&&this.isBlockFiller(me))return this.domPositionToView(me.parentNode,indexOf(me));const pe=isText(me)?this.findCorrespondingViewText(me):this.mapDomToView(me);if(pe&&pe.parent)return new Position$1(pe.parent,pe.index+1)}return null}}mapDomToView(u){return this.getHostViewElement(u)||this._domToViewMapping.get(u)}findCorrespondingViewText(u){if(isInlineFiller(u))return null;const t=this.getHostViewElement(u);if(t)return t;const N=u.previousSibling;if(N){if(!this.isElement(N))return null;const me=this.mapDomToView(N);if(me){const pe=me.nextSibling;return pe instanceof Text$1?pe:null}}else{const me=this.mapDomToView(u.parentNode);if(me){const pe=me.getChild(0);return pe instanceof Text$1?pe:null}}return null}mapViewToDom(u){return this._viewToDomMapping.get(u)}findCorrespondingDomText(u){const t=u.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&u.parent&&this.mapViewToDom(u.parent)?this.mapViewToDom(u.parent).childNodes[0]:null}focus(u){const t=this.mapViewToDom(u);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:N,scrollY:me}=global$1.window,pe=[];forEachDomElementAncestor(t,Le=>{const{scrollLeft:Ye,scrollTop:nt}=Le;pe.push([Ye,nt])}),t.focus(),forEachDomElementAncestor(t,Le=>{const[Ye,nt]=pe.shift();Le.scrollLeft=Ye,Le.scrollTop=nt}),global$1.window.scrollTo(N,me)}}_clearDomSelection(){const u=this.mapViewToDom(this.document.selection.editableElement);if(!u)return;const t=u.ownerDocument.defaultView.getSelection(),N=this.domSelectionToView(t);N&&N.rangeCount>0&&t.removeAllRanges()}isElement(u){return u&&u.nodeType==Node.ELEMENT_NODE}isDocumentFragment(u){return u&&u.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(u){return this.blockFillerMode=="br"?u.isEqualNode(BR_FILLER_REF):isOnlyBrInBlock(u,this.blockElements)?!0:u.isEqualNode(MARKED_NBSP_FILLER_REF)||isNbspBlockFiller(u,this.blockElements)}isDomSelectionBackward(u){if(u.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(u.anchorNode,u.anchorOffset),t.setEnd(u.focusNode,u.focusOffset)}catch{return!1}const N=t.collapsed;return t.detach(),N}getHostViewElement(u){const t=getAncestors(u);for(t.pop();t.length;){const N=t.pop(),me=this._domToViewMapping.get(N);if(me&&(me.is("uiElement")||me.is("rawElement")))return me}return null}isDomSelectionCorrect(u){return this._isDomSelectionPositionCorrect(u.anchorNode,u.anchorOffset)&&this._isDomSelectionPositionCorrect(u.focusNode,u.focusOffset)}registerRawContentMatcher(u){this._rawContentElementMatcher.add(u)}registerInlineObjectMatcher(u){this._inlineObjectElementMatcher.add(u)}_clearTemporaryCustomProperties(){for(const u of this._elementsWithTemporaryCustomProperties)u._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return NBSP_FILLER(this._domDocument);case"markedNbsp":return MARKED_NBSP_FILLER(this._domDocument);case"br":return BR_FILLER(this._domDocument)}}_isDomSelectionPositionCorrect(u,t){if(isText(u)&&startsWithFiller(u)&&t<INLINE_FILLER_LENGTH||this.isElement(u)&&startsWithFiller(u.childNodes[t]))return!1;const N=this.mapDomToView(u);return!(N&&(N.is("uiElement")||N.is("rawElement")))}*_domToView(u,t,N){if(this.blockFillerMode!="br"&&isOnlyBrInBlock(u,this.blockElements))return null;const me=this.getHostViewElement(u);if(me)return me;if(isComment(u)&&t.skipComments)return null;if(isText(u)){if(isInlineFiller(u))return null;{const pe=u.data;if(pe==="")return null;const Le=new Text$1(this.document,pe);return N.push(Le),Le}}else{let pe=this.mapDomToView(u);if(pe)return this._isInlineObjectElement(pe)&&N.push(pe),pe;if(this.isDocumentFragment(u))pe=new DocumentFragment$1(this.document),t.bind&&this.bindDocumentFragments(u,pe);else{pe=this._createViewElement(u,t),t.bind&&this.bindElements(u,pe);const Ye=u.attributes;if(Ye)for(let nt=Ye.length,ot=0;ot<nt;ot++)pe._setAttribute(Ye[ot].name,Ye[ot].value);if(this._isViewElementWithRawContent(pe,t))return pe._setCustomProperty("$rawContent",u.innerHTML),this._isBlockViewElement(pe)||N.push(pe),pe;if(isComment(u))return pe._setCustomProperty("$rawContent",u.data),pe}yield pe;const Le=[];if(t.withChildren!==!1)for(const Ye of this.domChildrenToView(u,t,Le))pe._appendChild(Ye);if(this._isInlineObjectElement(pe))N.push(pe),this._processDomInlineNodes(null,Le,t);else for(const Ye of Le)N.push(Ye)}}_processDomInlineNodes(u,t,N){if(!t.length||u&&!this.isDocumentFragment(u)&&!this._isBlockDomElement(u))return;let me=!1;for(let pe=0;pe<t.length;pe++){const Le=t[pe];if(!Le.is("$text")){me=!1;continue}let Ye,nt=!1;if(this._isPreFormatted(Le))Ye=getDataWithoutFiller(Le.data);else{Ye=Le.data.replace(/[ \n\t\r]{1,}/g," "),nt=/[^\S\u00A0]/.test(Ye.charAt(Ye.length-1));const ot=pe>0?t[pe-1]:null,ft=pe+1<t.length?t[pe+1]:null,mt=!ot||ot.is("element")&&ot.name=="br"||me,bt=ft?!1:!startsWithFiller(Le.data);N.withChildren!==!1&&(mt&&(Ye=Ye.replace(/^ /,"")),bt&&(Ye=Ye.replace(/ $/,""))),Ye=getDataWithoutFiller(Ye),this.blockFillerMode!="br"&&Le.parent&&(isViewMarkedNbspFiller(Le.parent,Ye)?(Ye="",Le.parent.parent&&(Le.parent.parent._setCustomProperty("$hasBlockFiller",!0),Le.parent._remove())):isViewNbspFiller(Le.parent,Ye,this.blockElements)&&(Ye="",Le.parent._setCustomProperty("$hasBlockFiller",!0))),Ye=Ye.replace(/ \u00A0/g,"  ");const yt=ft&&ft.is("element")&&ft.name!="br",_t=ft&&ft.is("$text")&&ft.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(Ye)||!ft||yt||_t)&&(Ye=Ye.replace(/\u00A0$/," ")),(mt||ot&&ot.is("element")&&ot.name!="br")&&(Ye=Ye.replace(/^\u00A0/," "))}Ye.length==0&&Le.parent?(Le._remove(),t.splice(pe,1),pe--):(Le._data=Ye,me=nt)}t.length=0}_processDataFromViewText(u){let t=u.data;if(this._isPreFormatted(u))return t;if(t.charAt(0)==" "){const N=this._getTouchingInlineViewNode(u,!1);(N&&N.is("$textProxy")&&this._nodeEndsWithSpace(N)||!N)&&(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const N=this._getTouchingInlineViewNode(u,!0),me=N&&N.is("$textProxy")&&N.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!N||me)&&(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(u){if(this._isPreFormatted(u))return!1;const t=this._processDataFromViewText(u);return t.charAt(t.length-1)==" "}_isPreFormatted(u){if(_hasViewParentOfType(u,this.preElements))return!0;for(const t of u.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(u,t){const N=new TreeWalker$1({startPosition:t?Position$1._createAfter(u):Position$1._createBefore(u),direction:t?"forward":"backward"});for(const{item:me}of N){if(me.is("$textProxy"))return me;if(me.is("element")&&me.getCustomProperty("dataPipeline:transparentRendering"))continue;if(me.is("element","br"))return null;if(this._isInlineObjectElement(me))return me;if(me.is("containerElement"))return null}return null}_isBlockDomElement(u){return this.isElement(u)&&this.blockElements.includes(u.tagName.toLowerCase())}_isBlockViewElement(u){return u.is("element")&&this.blockElements.includes(u.name)}_isInlineObjectElement(u){return u.is("element")?u.name=="br"||this.inlineObjectElements.includes(u.name)||!!this._inlineObjectElementMatcher.match(u):!1}_createViewElement(u,t){if(isComment(u))return new UIElement(this.document,"$comment");const N=t.keepOriginalCase?u.tagName:u.tagName.toLowerCase();return new Element$1(this.document,N)}_isViewElementWithRawContent(u,t){return t.withChildren!==!1&&u.is("element")&&!!this._rawContentElementMatcher.match(u)}_shouldRenameElement(u){const t=u.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(u,t){const N=this._domDocument.createElement("span");if(N.setAttribute(UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE,u),t){for(;t.firstChild;)N.appendChild(t.firstChild);for(const me of t.getAttributeNames())N.setAttribute(me,t.getAttribute(me))}return N}}function _hasViewParentOfType(de,u){return de.getAncestors().some(t=>t.is("element")&&u.includes(t.name))}function forEachDomElementAncestor(de,u){let t=de;for(;t;)u(t),t=t.parentElement}function isNbspBlockFiller(de,u){return de.isEqualNode(NBSP_FILLER_REF)&&hasBlockParent(de,u)&&de.parentNode.childNodes.length===1}function hasBlockParent(de,u){const t=de.parentNode;return!!t&&!!t.tagName&&u.includes(t.tagName.toLowerCase())}function isViewNbspFiller(de,u,t){return u==""&&de&&de.is("element")&&de.childCount==1&&t.includes(de.name)}function isViewMarkedNbspFiller(de,u){return u==""&&de&&de.is("element","span")&&de.childCount==1&&de.hasAttribute("data-cke-filler")}function isViewBrFiller(de){return de.is("element","br")&&de.hasAttribute("data-cke-filler")}function isOnlyBrInBlock(de,u){return de.tagName==="BR"&&hasBlockParent(de,u)&&de.parentNode.childNodes.length===1}function _logUnsafeElement(de){de==="script"&&logWarning("domconverter-unsafe-script-element-detected"),de==="style"&&logWarning("domconverter-unsafe-style-element-detected")}function isGeckoRestrictedDomSelection(de){if(!env.isGecko||!de.rangeCount)return!1;const u=de.getRangeAt(0).startContainer;try{Object.prototype.toString.call(u)}catch{return!0}return!1}class Observer extends DomEmitterMixin(){constructor(t){super();xt(this,"view");xt(this,"document");xt(this,"_isEnabled",!1);this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!t||t.nodeType!==1?!1:t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class DomEventData{constructor(u,t,N){xt(this,"view");xt(this,"document");xt(this,"domEvent");xt(this,"domTarget");this.view=u,this.document=u.document,this.domEvent=t,this.domTarget=t.target,assignIn(this,N)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class DomEventObserver extends Observer{constructor(){super(...arguments);xt(this,"useCapture",!1);xt(this,"usePassive",!1)}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(me=>{this.listenTo(t,me,(pe,Le)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(Le.target)&&this.onDomEvent(Le)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,N,me){this.isEnabled&&this.document.fire(t,new DomEventData(this.view,N,me))}}class KeyObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType",["keydown","keyup"])}onDomEvent(t){const N={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return getCode(this)}};this.fire(t.type,t,N)}}class FakeSelectionObserver extends Observer{constructor(t){super(t);xt(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=debounce(N=>{this.document.fire("selectionChangeDone",N)},200)}observe(){const t=this.document;t.on("arrowKey",(N,me)=>{t.selection.isFake&&this.isEnabled&&me.preventDefault()},{context:"$capture"}),t.on("arrowKey",(N,me)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(me.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const N=this.document.selection,me=new Selection$1(N.getRanges(),{backward:N.isBackward,fake:!1});(t==keyCodes.arrowleft||t==keyCodes.arrowup)&&me.setTo(me.getFirstPosition()),(t==keyCodes.arrowright||t==keyCodes.arrowdown)&&me.setTo(me.getLastPosition());const pe={oldSelection:N,newSelection:me,domSelection:null};this.document.fire("selectionChange",pe),this._fireSelectionChangeDoneDebounced(pe)}}let MutationObserver$1=class extends Observer{constructor(t){super(t);xt(this,"domConverter");xt(this,"_config");xt(this,"_domElements");xt(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const N of this._domElements)this._mutationObserver.observe(N,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(t.length===0)return;const N=this.domConverter,me=new Set,pe=new Set;for(const Ye of t){const nt=N.mapDomToView(Ye.target);nt&&(nt.is("uiElement")||nt.is("rawElement")||Ye.type==="childList"&&!this._isBogusBrMutation(Ye)&&pe.add(nt))}for(const Ye of t){const nt=N.mapDomToView(Ye.target);if(!(nt&&(nt.is("uiElement")||nt.is("rawElement")))&&Ye.type==="characterData"){const ot=N.findCorrespondingViewText(Ye.target);ot&&!pe.has(ot.parent)?me.add(ot):!ot&&startsWithFiller(Ye.target)&&pe.add(N.mapDomToView(Ye.target.parentNode))}}const Le=[];for(const Ye of me)Le.push({type:"text",node:Ye});for(const Ye of pe){const nt=N.mapViewToDom(Ye),ot=Array.from(Ye.getChildren()),ft=Array.from(N.domChildrenToView(nt,{withChildren:!1}));isEqualWith(ot,ft,sameNodes)||Le.push({type:"children",node:Ye})}Le.length&&this.document.fire("mutations",{mutations:Le})}_isBogusBrMutation(t){let N=null;return t.nextSibling===null&&t.removedNodes.length===0&&t.addedNodes.length==1&&(N=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),N&&N.is("element","br")}};function sameNodes(de,u){if(!Array.isArray(de))return de===u?!0:de.is("$text")&&u.is("$text")?de.data===u.data:!1}class FocusObserver extends DomEventObserver{constructor(t){super(t);xt(this,"_renderTimeoutId",null);xt(this,"_isFocusChanging",!1);xt(this,"domEventType",["focus","blur"]);this.useCapture=!0;const N=this.document;N.on("focus",()=>this._handleFocus()),N.on("blur",(me,pe)=>this._handleBlur(pe)),N.on("beforeinput",()=>{N.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const N=this.document.selection.editableElement;(N===null||N===t.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class SelectionObserver extends Observer{constructor(t){super(t);xt(this,"mutationObserver");xt(this,"focusObserver");xt(this,"selection");xt(this,"domConverter");xt(this,"_documents");xt(this,"_fireSelectionChangeDoneDebounced");xt(this,"_clearInfiniteLoopInterval");xt(this,"_documentIsSelectingInactivityTimeoutDebounced");xt(this,"_loopbackCounter");this.mutationObserver=t.getObserver(MutationObserver$1),this.focusObserver=t.getObserver(FocusObserver),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=debounce(N=>{this.document.fire("selectionChangeDone",N)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=debounce(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(t){const N=t.ownerDocument,me=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},pe=()=>{this.document.isSelecting&&(this._handleSelectionChange(N),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",me,{priority:"highest"}),this.listenTo(t,"keydown",pe,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",pe,{priority:"highest",useCapture:!0}),!this._documents.has(N)&&(this.listenTo(N,"mouseup",pe,{priority:"highest",useCapture:!0}),this.listenTo(N,"selectionchange",()=>{this.document.isComposing&&!env.isAndroid||(this._handleSelectionChange(N),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(N)},{priority:"lowest"}),this._documents.add(N))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const N=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(N.anchorNode))return;this.mutationObserver.flush();const me=this.domConverter.domSelectionToView(N);if(me.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(me)&&this.domConverter.isDomSelectionCorrect(N))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(me))this.view.forceRender();else{const pe={oldSelection:this.selection,newSelection:me,domSelection:N};this.document.fire("selectionChange",pe),this._fireSelectionChangeDoneDebounced(pe)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class CompositionObserver extends DomEventObserver{constructor(t){super(t);xt(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const N=this.document;N.on("compositionstart",()=>{N.isComposing=!0},{priority:"low"}),N.on("compositionend",()=>{N.isComposing=!1},{priority:"low"})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let DataTransfer$1=class{constructor(u,t={}){xt(this,"_files");xt(this,"_native");this._files=t.cacheFiles?getFiles(u):null,this._native=u}get files(){return this._files||(this._files=getFiles(this._native)),this._files}get types(){return this._native.types}getData(u){return this._native.getData(u)}setData(u,t){this._native.setData(u,t)}set effectAllowed(u){this._native.effectAllowed=u}get effectAllowed(){return this._native.effectAllowed}set dropEffect(u){this._native.dropEffect=u}get dropEffect(){return this._native.dropEffect}setDragImage(u,t,N){this._native.setDragImage(u,t,N)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function getFiles(de){const u=Array.from(de.files||[]),t=Array.from(de.items||[]);return u.length?u:t.filter(N=>N.kind==="file").map(N=>N.getAsFile())}class InputObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType","beforeinput")}onDomEvent(t){const N=t.getTargetRanges(),me=this.view,pe=me.document;let Le=null,Ye=null,nt=[];if(t.dataTransfer&&(Le=new DataTransfer$1(t.dataTransfer)),t.data!==null?Ye=t.data:Le&&(Ye=Le.getData("text/plain")),pe.selection.isFake)nt=Array.from(pe.selection.getRanges());else if(N.length)nt=N.map(ot=>{const ft=me.domConverter.domPositionToView(ot.startContainer,ot.startOffset),mt=me.domConverter.domPositionToView(ot.endContainer,ot.endOffset);if(ft)return me.createRange(ft,mt);if(mt)return me.createRange(mt)}).filter(ot=>!!ot);else if(env.isAndroid){const ot=t.target.ownerDocument.defaultView.getSelection();nt=Array.from(me.domConverter.domSelectionToView(ot).getRanges())}if(env.isAndroid&&t.inputType=="insertCompositionText"&&Ye&&Ye.endsWith(`
`)){this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[me.createRange(nt[0].end)]});return}if(t.inputType=="insertText"&&Ye&&Ye.includes(`
`)){const ot=Ye.split(/\n{1,2}/g);let ft=nt;for(let mt=0;mt<ot.length;mt++){const bt=ot[mt];bt!=""&&(this.fire(t.type,t,{data:bt,dataTransfer:Le,targetRanges:ft,inputType:t.inputType,isComposing:t.isComposing}),ft=[pe.selection.getFirstRange()]),mt+1<ot.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:ft}),ft=[pe.selection.getFirstRange()])}return}this.fire(t.type,t,{data:Ye,dataTransfer:Le,targetRanges:nt,inputType:t.inputType,isComposing:t.isComposing})}}class ArrowKeysObserver extends Observer{constructor(u){super(u),this.document.on("keydown",(t,N)=>{if(this.isEnabled&&isArrowKeyCode(N.keyCode)){const me=new BubblingEventInfo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(me,N),me.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class TabObserver extends Observer{constructor(u){super(u);const t=this.document;t.on("keydown",(N,me)=>{if(!this.isEnabled||me.keyCode!=keyCodes.tab||me.ctrlKey)return;const pe=new BubblingEventInfo(t,"tab",t.selection.getFirstRange());t.fire(pe,me),pe.stop.called&&N.stop()})}observe(){}stopObserving(){}}let View$1=class extends ObservableMixin(){constructor(t){super();xt(this,"document");xt(this,"domConverter");xt(this,"domRoots",new Map);xt(this,"_renderer");xt(this,"_initialDomRootAttributes",new WeakMap);xt(this,"_observers",new Map);xt(this,"_writer");xt(this,"_ongoingChange",!1);xt(this,"_postFixersInProgress",!1);xt(this,"_renderingDisabled",!1);xt(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Document$1(t),this.domConverter=new DomConverter(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Renderer(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new DowncastWriter(this.document),this.addObserver(MutationObserver$1),this.addObserver(FocusObserver),this.addObserver(SelectionObserver),this.addObserver(KeyObserver),this.addObserver(FakeSelectionObserver),this.addObserver(CompositionObserver),this.addObserver(ArrowKeysObserver),this.addObserver(InputObserver),this.addObserver(TabObserver),injectQuirksHandling(this),injectUiElementHandling(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),env.isiOS&&this.listenTo(this.document,"blur",(N,me)=>{this.domConverter.mapDomToView(me.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(N,{mutations:me})=>{me.forEach(pe=>this._renderer.markToSync(pe.type,pe.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,N="main"){const me=this.document.getRoot(N);me._name=t.tagName.toLowerCase();const pe={};for(const{name:Ye,value:nt}of Array.from(t.attributes))pe[Ye]=nt,Ye==="class"?this._writer.addClass(nt.split(" "),me):me.hasAttribute(Ye)||this._writer.setAttribute(Ye,nt,me);this._initialDomRootAttributes.set(t,pe);const Le=()=>{this._writer.setAttribute("contenteditable",(!me.isReadOnly).toString(),me),me.isReadOnly?this._writer.addClass("ck-read-only",me):this._writer.removeClass("ck-read-only",me)};Le(),this.domRoots.set(N,t),this.domConverter.bindElements(t,me),this._renderer.markToSync("children",me),this._renderer.markToSync("attributes",me),this._renderer.domDocuments.add(t.ownerDocument),me.on("change:children",(Ye,nt)=>this._renderer.markToSync("children",nt)),me.on("change:attributes",(Ye,nt)=>this._renderer.markToSync("attributes",nt)),me.on("change:text",(Ye,nt)=>this._renderer.markToSync("text",nt)),me.on("change:isReadOnly",()=>this.change(Le)),me.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const Ye of this._observers.values())Ye.observe(t,N)}detachDomRoot(t){const N=this.domRoots.get(t);Array.from(N.attributes).forEach(({name:pe})=>N.removeAttribute(pe));const me=this._initialDomRootAttributes.get(N);for(const pe in me)N.setAttribute(pe,me[pe]);this.domRoots.delete(t),this.domConverter.unbindDomElement(N);for(const pe of this._observers.values())pe.stopObserving(N)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let N=this._observers.get(t);if(N)return N;N=new t(this),this._observers.set(t,N);for(const[me,pe]of this.domRoots)N.observe(pe,me);return N.enable(),N}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:N,viewportOffset:me=20,ancestorOffset:pe=20}={}){const Le=this.document.selection.getFirstRange();if(!Le)return;const Ye=cloneDeep({alignToTop:t,forceScroll:N,viewportOffset:me,ancestorOffset:pe});typeof me=="number"&&(me={top:me,bottom:me,left:me,right:me});const nt={target:this.domConverter.viewRangeToDom(Le),viewportOffset:me,ancestorOffset:pe,alignToTop:t,forceScroll:N};this.fire("scrollToTheSelection",nt,Ye),scrollViewportToShowTarget(nt)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new CKEditorError("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const N=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),N}catch(N){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(N,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(FocusObserver).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,N){return Position$1._createAt(t,N)}createPositionAfter(t){return Position$1._createAfter(t)}createPositionBefore(t){return Position$1._createBefore(t)}createRange(t,N){return new Range$1(t,N)}createRangeOn(t){return Range$1._createOn(t)}createRangeIn(t){return Range$1._createIn(t)}createSelection(...t){return new Selection$1(...t)}_disableRendering(t){this._renderingDisabled=t,t==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TypeCheckable{is(){throw new Error("is() method is abstract")}}class TextProxy extends TypeCheckable{constructor(t,N,me){super();xt(this,"textNode");xt(this,"data");xt(this,"offsetInText");if(this.textNode=t,N<0||N>t.offsetSize)throw new CKEditorError("model-textproxy-wrong-offsetintext",this);if(me<0||N+me>t.offsetSize)throw new CKEditorError("model-textproxy-wrong-length",this);this.data=t.data.substring(N,N+me),this.offsetInText=N}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const N=[];let me=t.includeSelf?this:this.parent;for(;me;)N[t.parentFirst?"push":"unshift"](me),me=me.parent;return N}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}TextProxy.prototype.is=function(de){return de==="$textProxy"||de==="model:$textProxy"||de==="textProxy"||de==="model:textProxy"};class TreeWalker{constructor(u){xt(this,"direction");xt(this,"boundaries");xt(this,"singleCharacters");xt(this,"shallow");xt(this,"ignoreElementEnd");xt(this,"_position");xt(this,"_boundaryStartParent");xt(this,"_boundaryEndParent");xt(this,"_visitedParent");if(!u||!u.boundaries&&!u.startPosition)throw new CKEditorError("model-tree-walker-no-start-position",null);const t=u.direction||"forward";if(t!="forward"&&t!="backward")throw new CKEditorError("model-tree-walker-unknown-direction",u,{direction:t});this.direction=t,this.boundaries=u.boundaries||null,u.startPosition?this._position=u.startPosition.clone():this._position=Position._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!u.singleCharacters,this.shallow=!!u.shallow,this.ignoreElementEnd=!!u.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(u){let t,N,me,pe;do me=this.position,pe=this._visitedParent,{done:t,value:N}=this.next();while(!t&&u(N));t||(this._position=me,this._visitedParent=pe)}jumpTo(u){this._boundaryStartParent&&u.isBefore(this.boundaries.start)?u=this.boundaries.start:this._boundaryEndParent&&u.isAfter(this.boundaries.end)&&(u=this.boundaries.end),this._position=u.clone(),this._visitedParent=u.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const u=this.position,t=this.position.clone(),N=this._visitedParent;if(N.parent===null&&t.offset===N.maxOffset)return{done:!0,value:void 0};if(N===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const me=getTextNodeAtPosition(t,N),pe=me||getNodeAfterPosition(t,N,me);if(pe&&pe.is("model:element")){if(!this.shallow)t.path.push(0),this._visitedParent=pe;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,formatReturnValue("elementStart",pe,u,t,1)}if(pe&&pe.is("model:$text")){let Le;if(this.singleCharacters)Le=1;else{let ot=pe.endOffset;this._boundaryEndParent==N&&this.boundaries.end.offset<ot&&(ot=this.boundaries.end.offset),Le=ot-t.offset}const Ye=t.offset-pe.startOffset,nt=new TextProxy(pe,Ye,Le);return t.offset+=Le,this._position=t,formatReturnValue("text",nt,u,t,Le)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=N.parent,this.ignoreElementEnd?this._next():formatReturnValue("elementEnd",N,u,t)}_previous(){const u=this.position,t=this.position.clone(),N=this._visitedParent;if(N.parent===null&&t.offset===0)return{done:!0,value:void 0};if(N==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const me=t.parent,pe=getTextNodeAtPosition(t,me),Le=pe||getNodeBeforePosition(t,me,pe);if(Le&&Le.is("model:element"))return t.offset--,this.shallow?(this._position=t,formatReturnValue("elementStart",Le,u,t,1)):(t.path.push(Le.maxOffset),this._position=t,this._visitedParent=Le,this.ignoreElementEnd?this._previous():formatReturnValue("elementEnd",Le,u,t));if(Le&&Le.is("model:$text")){let Ye;if(this.singleCharacters)Ye=1;else{let ft=Le.startOffset;this._boundaryStartParent==N&&this.boundaries.start.offset>ft&&(ft=this.boundaries.start.offset),Ye=t.offset-ft}const nt=t.offset-Le.startOffset,ot=new TextProxy(Le,nt-Ye,Ye);return t.offset-=Ye,this._position=t,formatReturnValue("text",ot,u,t,Ye)}return t.path.pop(),this._position=t,this._visitedParent=N.parent,formatReturnValue("elementStart",N,u,t,1)}}function formatReturnValue(de,u,t,N,me){return{done:!1,value:{type:de,item:u,previousPosition:t,nextPosition:N,length:me}}}class Position extends TypeCheckable{constructor(t,N,me="toNone"){super();xt(this,"root");xt(this,"path");xt(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new CKEditorError("model-position-root-invalid",t);if(!Array.isArray(N)||N.length===0)throw new CKEditorError("model-position-path-incorrect-format",t,{path:N});t.is("rootElement")?N=N.slice():(N=[...t.getPath(),...N],t=t.root),this.root=t,this.path=N,this.stickiness=me}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let N=0;N<this.path.length-1;N++)if(t=t.getChildAtOffset(this.path[N]),!t)throw new CKEditorError("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new CKEditorError("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return getTextNodeAtPosition(this,this.parent)}get nodeAfter(){const t=this.parent;return getNodeAfterPosition(this,t,getTextNodeAtPosition(this,t))}get nodeBefore(){const t=this.parent;return getNodeBeforePosition(this,t,getTextNodeAtPosition(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let N=0;N<this.path.length-1;N++)if(t=t.getChildAtOffset(this.path[N]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const N=compareArrays(this.path,t.path);switch(N){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[N]<t.path[N]?"before":"after"}}getLastMatchingPosition(t,N={}){N.startPosition=this;const me=new TreeWalker(N);return me.skip(t),me.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const N=this.parent;return N.is("element")?N.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const N=compareArrays(this.path,t.path),me=typeof N=="string"?Math.min(this.path.length,t.path.length):N;return this.path.slice(0,me)}getCommonAncestor(t){const N=this.getAncestors(),me=t.getAncestors();let pe=0;for(;N[pe]==me[pe]&&N[pe];)pe++;return pe===0?null:N[pe-1]}getShiftedBy(t){const N=this.clone(),me=N.offset+t;return N.offset=me<0?0:me,N}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const N=Math.min(this.path.length,t.path.length);for(let me=0;me<N;me++){const pe=this.path[me]-t.path[me];if(pe<-1||pe>1)return!1;if(pe===1)return checkTouchingBranch(t,this,me);if(pe===-1)return checkTouchingBranch(this,t,me)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?checkOnlyZeroes(this.path,N):checkOnlyZeroes(t.path,N)}hasSameParentAs(t){if(this.root!==t.root)return!1;const N=this.getParentPath(),me=t.getParentPath();return compareArrays(N,me)=="same"}getTransformedByOperation(t){let N;switch(t.type){case"insert":N=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":N=this._getTransformedByMoveOperation(t);break;case"split":N=this._getTransformedBySplitOperation(t);break;case"merge":N=this._getTransformedByMergeOperation(t);break;default:N=Position._createAt(this);break}return N}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const N=t.movedRange;return N.containsPosition(this)||N.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const N=t.movedRange,me=N.containsPosition(this)||N.start.isEqual(this);let pe;return me?(pe=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(pe=pe._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?pe=Position._createAt(t.deletionPosition):pe=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),pe}_getTransformedByDeletion(t,N){const me=Position._createAt(this);if(this.root!=t.root)return me;if(compareArrays(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+N>this.offset)return null;me.offset-=N}}else if(compareArrays(t.getParentPath(),this.getParentPath())=="prefix"){const pe=t.path.length-1;if(t.offset<=this.path[pe]){if(t.offset+N>this.path[pe])return null;me.path[pe]-=N}}return me}_getTransformedByInsertion(t,N){const me=Position._createAt(this);if(this.root!=t.root)return me;if(compareArrays(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(me.offset+=N);else if(compareArrays(t.getParentPath(),this.getParentPath())=="prefix"){const pe=t.path.length-1;t.offset<=this.path[pe]&&(me.path[pe]+=N)}return me}_getTransformedByMove(t,N,me){if(N=N._getTransformedByDeletion(t,me),t.isEqual(N))return Position._createAt(this);const pe=this._getTransformedByDeletion(t,me);return pe===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(me).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,N):pe._getTransformedByInsertion(N,me)}_getCombined(t,N){const me=t.path.length-1,pe=Position._createAt(N);return pe.stickiness=this.stickiness,pe.offset=pe.offset+this.path[me]-t.offset,pe.path=[...pe.path,...this.path.slice(me+1)],pe}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,N,me="toNone"){if(t.is("model:position"))return new Position(t.root,t.path,t.stickiness);{const pe=t;if(N=="end")N=pe.maxOffset;else{if(N=="before")return this._createBefore(pe,me);if(N=="after")return this._createAfter(pe,me);if(N!==0&&!N)throw new CKEditorError("model-createpositionat-offset-required",[this,t])}if(!pe.is("element")&&!pe.is("documentFragment"))throw new CKEditorError("model-position-parent-incorrect",[this,t]);const Le=pe.getPath();return Le.push(N),new this(pe.root,Le,me)}}static _createAfter(t,N){if(!t.parent)throw new CKEditorError("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,N)}static _createBefore(t,N){if(!t.parent)throw new CKEditorError("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,N)}static fromJSON(t,N){if(t.root==="$graveyard"){const me=new Position(N.graveyard,t.path);return me.stickiness=t.stickiness,me}if(!N.getRoot(t.root))throw new CKEditorError("model-position-fromjson-no-root",N,{rootName:t.root});return new Position(N.getRoot(t.root),t.path,t.stickiness)}}Position.prototype.is=function(de){return de==="position"||de==="model:position"};function getTextNodeAtPosition(de,u){const t=u.getChildAtOffset(de.offset);return t&&t.is("$text")&&t.startOffset<de.offset?t:null}function getNodeAfterPosition(de,u,t){return t!==null?null:u.getChildAtOffset(de.offset)}function getNodeBeforePosition(de,u,t){return t!==null?null:u.getChild(u.offsetToIndex(de.offset)-1)}function checkTouchingBranch(de,u,t){return!(t+1===de.path.length||!checkOnlyZeroes(u.path,t+1)||!checkOnlyMaxOffset(de,t+1))}function checkOnlyZeroes(de,u){for(;u<de.length;){if(de[u]!==0)return!1;u++}return!0}function checkOnlyMaxOffset(de,u){let t=de.parent,N=de.path.length-1,me=0;for(;N>=u;){if(de.path[N]+me!==t.maxOffset)return!1;me=1,N--,t=t.parent}return!0}class Range extends TypeCheckable{constructor(t,N){super();xt(this,"start");xt(this,"end");this.start=Position._createAt(t),this.end=N?Position._createAt(N):Position._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new TreeWalker({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),N=this.end.getParentPath();return compareArrays(t,N)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,N=!1){t.isCollapsed&&(N=!1);const me=this.containsPosition(t.start)||N&&this.start.isEqual(t.start),pe=this.containsPosition(t.end)||N&&this.end.isEqual(t.end);return me&&pe}containsItem(t){const N=Position._createBefore(t);return this.containsPosition(N)||this.start.isEqual(N)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const N=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&N.push(new Range(this.start,t.start)),this.containsPosition(t.end)&&N.push(new Range(t.end,this.end))):N.push(new Range(this.start,this.end)),N}getIntersection(t){if(this.isIntersecting(t)){let N=this.start,me=this.end;return this.containsPosition(t.start)&&(N=t.start),this.containsPosition(t.end)&&(me=t.end),new Range(N,me)}return null}getJoined(t,N=!1){let me=this.isIntersecting(t);if(me||(this.start.isBefore(t.start)?me=N?this.end.isTouching(t.start):this.end.isEqual(t.start):me=N?t.end.isTouching(this.start):t.end.isEqual(this.start)),!me)return null;let pe=this.start,Le=this.end;return t.start.isBefore(pe)&&(pe=t.start),t.end.isAfter(Le)&&(Le=t.end),new Range(pe,Le)}getMinimalFlatRanges(){const t=[],N=this.start.getCommonPath(this.end).length,me=Position._createAt(this.start);let pe=me.parent;for(;me.path.length>N+1;){const Le=pe.maxOffset-me.offset;Le!==0&&t.push(new Range(me,me.getShiftedBy(Le))),me.path=me.path.slice(0,-1),me.offset++,pe=pe.parent}for(;me.path.length<=this.end.path.length;){const Le=this.end.path[me.path.length-1],Ye=Le-me.offset;Ye!==0&&t.push(new Range(me,me.getShiftedBy(Ye))),me.offset=Le,me.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new TreeWalker(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const N=new TreeWalker(t);for(const me of N)yield me.item}*getPositions(t={}){t.boundaries=this;const N=new TreeWalker(t);yield N.position;for(const me of N)yield me.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Range(this.start,this.end)]}getTransformedByOperations(t){const N=[new Range(this.start,this.end)];for(const me of t)for(let pe=0;pe<N.length;pe++){const Le=N[pe].getTransformedByOperation(me);N.splice(pe,1,...Le),pe+=Le.length-1}for(let me=0;me<N.length;me++){const pe=N[me];for(let Le=me+1;Le<N.length;Le++){const Ye=N[Le];(pe.containsRange(Ye)||Ye.containsRange(pe)||pe.isEqual(Ye))&&N.splice(Le,1)}}return N}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,N=this.end.nodeBefore;return t&&t.is("element")&&t===N?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,N=!1){return this._getTransformedByInsertion(t.position,t.howMany,N)}_getTransformedByMoveOperation(t,N=!1){const me=t.sourcePosition,pe=t.howMany,Le=t.targetPosition;return this._getTransformedByMove(me,Le,pe,N)}_getTransformedBySplitOperation(t){const N=this.start._getTransformedBySplitOperation(t);let me=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(me=this.end.getShiftedBy(1)),N.root!=me.root&&(me=this.end.getShiftedBy(-1)),new Range(N,me)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Range(this.start);let N=this.start._getTransformedByMergeOperation(t),me=this.end._getTransformedByMergeOperation(t);return N.root!=me.root&&(me=this.end.getShiftedBy(-1)),N.isAfter(me)?(t.sourcePosition.isBefore(t.targetPosition)?(N=Position._createAt(me),N.offset=0):(t.deletionPosition.isEqual(N)||(me=t.deletionPosition),N=t.targetPosition),new Range(N,me)):new Range(N,me)}_getTransformedByInsertion(t,N,me=!1){if(me&&this.containsPosition(t))return[new Range(this.start,t),new Range(t.getShiftedBy(N),this.end._getTransformedByInsertion(t,N))];{const pe=new Range(this.start,this.end);return pe.start=pe.start._getTransformedByInsertion(t,N),pe.end=pe.end._getTransformedByInsertion(t,N),[pe]}}_getTransformedByMove(t,N,me,pe=!1){if(this.isCollapsed){const bt=this.start._getTransformedByMove(t,N,me);return[new Range(bt)]}const Le=Range._createFromPositionAndShift(t,me),Ye=N._getTransformedByDeletion(t,me);if(this.containsPosition(N)&&!pe&&(Le.containsPosition(this.start)||Le.containsPosition(this.end))){const bt=this.start._getTransformedByMove(t,N,me),yt=this.end._getTransformedByMove(t,N,me);return[new Range(bt,yt)]}let nt;const ot=this.getDifference(Le);let ft=null;const mt=this.getIntersection(Le);if(ot.length==1?ft=new Range(ot[0].start._getTransformedByDeletion(t,me),ot[0].end._getTransformedByDeletion(t,me)):ot.length==2&&(ft=new Range(this.start,this.end._getTransformedByDeletion(t,me))),ft?nt=ft._getTransformedByInsertion(Ye,me,mt!==null||pe):nt=[],mt){const bt=new Range(mt.start._getCombined(Le.start,Ye),mt.end._getCombined(Le.start,Ye));nt.length==2?nt.splice(1,0,bt):nt.push(bt)}return nt}_getTransformedByDeletion(t,N){let me=this.start._getTransformedByDeletion(t,N),pe=this.end._getTransformedByDeletion(t,N);return me==null&&pe==null?null:(me==null&&(me=t),pe==null&&(pe=t),new Range(me,pe))}static _createFromPositionAndShift(t,N){const me=t,pe=t.getShiftedBy(N);return N>0?new this(me,pe):new this(pe,me)}static _createIn(t){return new this(Position._createAt(t,0),Position._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Position._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new CKEditorError("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const N=t[0];t.sort((Le,Ye)=>Le.start.isAfter(Ye.start)?1:-1);const me=t.indexOf(N),pe=new this(N.start,N.end);for(let Le=me-1;Le>=0&&t[Le].end.isEqual(pe.start);Le--)pe.start=Position._createAt(t[Le].start);for(let Le=me+1;Le<t.length&&t[Le].start.isEqual(pe.end);Le++)pe.end=Position._createAt(t[Le].end);return pe}static fromJSON(t,N){return new this(Position.fromJSON(t.start,N),Position.fromJSON(t.end,N))}}Range.prototype.is=function(de){return de==="range"||de==="model:range"};class Mapper extends EmitterMixin(){constructor(){super();xt(this,"_modelToViewMapping",new WeakMap);xt(this,"_viewToModelMapping",new WeakMap);xt(this,"_viewToModelLengthCallbacks",new Map);xt(this,"_markerNameToElements",new Map);xt(this,"_elementToMarkerNames",new Map);xt(this,"_deferredBindingRemovals",new Map);xt(this,"_unboundMarkerNames",new Set);xt(this,"_cache",new MapperCache);this.on("modelToViewPosition",(t,N)=>{if(N.viewPosition)return;const me=this._modelToViewMapping.get(N.modelPosition.parent);if(!me)throw new CKEditorError("mapping-model-position-view-parent-not-found",this,{modelPosition:N.modelPosition});N.viewPosition=this.findPositionIn(me,N.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,N)=>{if(N.modelPosition)return;const me=this.findMappedViewAncestor(N.viewPosition),pe=this._viewToModelMapping.get(me),Le=this._toModelOffset(N.viewPosition.parent,N.viewPosition.offset,me);N.modelPosition=Position._createAt(pe,Le)},{priority:"low"})}bindElements(t,N){this._modelToViewMapping.set(t,N),this._viewToModelMapping.set(N,t)}unbindViewElement(t,N={}){const me=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const pe of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(pe);N.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t),this._modelToViewMapping.get(me)==t&&this._modelToViewMapping.delete(me))}unbindModelElement(t){const N=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(N)==t&&this._viewToModelMapping.delete(N)&&this._cache.stopTracking(N)}bindElementToMarker(t,N){const me=this._markerNameToElements.get(N)||new Set;me.add(t);const pe=this._elementToMarkerNames.get(t)||new Set;pe.add(N),this._markerNameToElements.set(N,me),this._elementToMarkerNames.set(t,pe)}unbindElementFromMarkerName(t,N){const me=this._markerNameToElements.get(N);me&&(me.delete(t),me.size==0&&this._markerNameToElements.delete(N));const pe=this._elementToMarkerNames.get(t);pe&&(pe.delete(N),pe.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,N]of this._deferredBindingRemovals)t.root==N&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Range(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Range$1(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const N={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",N),N.modelPosition}toViewPosition(t,N={}){const me={modelPosition:t,mapper:this,isPhantom:N.isPhantom};return this.fire("modelToViewPosition",me),me.viewPosition}markerNameToElements(t){const N=this._markerNameToElements.get(t);if(!N)return null;const me=new Set;for(const pe of N)if(pe.is("attributeElement"))for(const Le of pe.getElementsWithSameId())me.add(Le);else me.add(pe);return me}registerViewToModelLength(t,N){this._viewToModelLengthCallbacks.set(t,N)}findMappedViewAncestor(t){let N=t.parent;for(;!this._viewToModelMapping.has(N);)N=N.parent;return N}_toModelOffset(t,N,me){if(me!=t){const Le=this._toModelOffset(t.parent,t.index,me),Ye=this._toModelOffset(t,N,t);return Le+Ye}if(t.is("$text"))return N;let pe=0;for(let Le=0;Le<N;Le++)pe+=this.getModelLength(t.getChild(Le));return pe}getModelLength(t){const N=[t];let me=0;for(;N.length>0;){const pe=N.pop(),Le=pe.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(pe.name);if(Le)me+=Le(pe);else if(this._viewToModelMapping.has(pe))me+=1;else if(pe.is("$text"))me+=pe.data.length;else{if(pe.is("uiElement"))continue;for(const Ye of pe.getChildren())N.push(Ye)}}return me}findPositionIn(t,N){if(N===0)return this._moveViewPositionToTextNode(new Position$1(t,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(t)){const pe=this._cache.getClosest(t,N);return this._findPositionStartingFrom(pe.viewPosition,pe.modelOffset,N,t,!0)}else return this._findPositionStartingFrom(new Position$1(t,0),0,N,t,!1)}_findPositionStartingFrom(t,N,me,pe,Le){let Ye=t.parent,nt=t.offset;if(Ye.is("$text"))return new Position$1(Ye,me-N);let ot,ft=N,mt=0;for(;ft<me;){if(ot=Ye.getChild(nt),!ot){if(Ye==pe)throw new CKEditorError("mapping-model-offset-not-found",this,{modelOffset:me,viewContainer:pe});nt=Ye.parent.getChildIndex(Ye)+1,Ye=Ye.parent;continue}mt=this.getModelLength(ot),ft+=mt,nt++,Le&&this._cache.save(Ye,nt,pe,ft)}return ft==me?this._moveViewPositionToTextNode(new Position$1(Ye,nt)):this._findPositionStartingFrom(new Position$1(ot,0),ft-mt,me,pe,Le)}_moveViewPositionToTextNode(t){const N=t.nodeBefore,me=t.nodeAfter;return N&&N.is("view:$text")?new Position$1(N,N.data.length):me&&me.is("view:$text")?new Position$1(me,0):t}}class MapperCache extends EmitterMixin(){constructor(){super(...arguments);xt(this,"_cachedMapping",new WeakMap);xt(this,"_nodeToCacheListIndex",new WeakMap);xt(this,"_invalidateOnChildrenChangeCallback",(t,N,me)=>{this._clearCacheInsideParent(N,me.index)});xt(this,"_invalidateOnTextChangeCallback",(t,N)=>{this._clearCacheStartingBefore(N)})}save(t,N,me,pe){const Le=this._cachedMapping.get(me),Ye=Le.cacheMap.get(pe);if(Ye){const mt=t.getChild(N-1),bt=Ye.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(Ye.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(mt,bt);return}const ot={viewPosition:new Position$1(t,N),modelOffset:pe};Le.maxModelOffset=pe>Le.maxModelOffset?pe:Le.maxModelOffset,Le.cacheMap.set(pe,ot);let ft=Le.cacheList.length-1;for(;ft>=0&&Le.cacheList[ft].modelOffset>pe;)ft--;if(Le.cacheList.splice(ft+1,0,ot),N>0){const mt=t.getChild(N-1);this._nodeToCacheListIndex.set(mt,ft+1)}}getClosest(t,N){const me=this._cachedMapping.get(t);let pe;if(me)if(N>me.maxModelOffset)pe=me.cacheList[me.cacheList.length-1];else{const Ye=me.cacheMap.get(N);Ye?pe=Ye:pe=this._findInCacheList(me.cacheList,N)}else pe=this.startTracking(t);const Le=this._hoistViewPosition(pe.viewPosition);return{modelOffset:pe.modelOffset,viewPosition:Le}}_hoistViewPosition(t){for(;t.parent.parent&&!this._cachedMapping.has(t.parent)&&t.isAtEnd;){const N=t.parent.parent,me=N.getChildIndex(t.parent)+1;t=new Position$1(N,me)}return t}startTracking(t){const me={viewPosition:new Position$1(t,0),modelOffset:0},pe={maxModelOffset:0,cacheList:[me],cacheMap:new Map([[0,me]])};return this._cachedMapping.set(t,pe),t.on("change:children",this._invalidateOnChildrenChangeCallback),t.on("change:text",this._invalidateOnTextChangeCallback),me}stopTracking(t){t.off("change:children",this._invalidateOnChildrenChangeCallback),t.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(t)}_clearCacheInsideParent(t,N){if(N==0)this._cachedMapping.has(t)?this._clearCacheAll(t):this._clearCacheStartingBefore(t);else{const me=t.getChild(N-1);this._clearCacheStartingBefore(me)}}_clearCacheAll(t){const N=this._cachedMapping.get(t);N.maxModelOffset>0&&(N.maxModelOffset=0,N.cacheList.length=1,N.cacheMap.clear(),N.cacheMap.set(0,N.cacheList[0]))}_clearCacheStartingBefore(t){const N=this._nodeToCacheListIndex.get(t);if(N===void 0){const pe=t.parent;this._cachedMapping.has(pe)||this._clearCacheStartingBefore(pe);return}let me=t.parent;for(;!this._cachedMapping.has(me);)me=me.parent;this._clearCacheFromIndex(me,N)}_clearCacheFromIndex(t,N){N===0&&(N=1);const me=this._cachedMapping.get(t),pe=me.cacheList[N-1];if(!pe)return;me.maxModelOffset=pe.modelOffset;const Le=me.cacheList.splice(N);for(const Ye of Le){me.cacheMap.delete(Ye.modelOffset);const nt=Ye.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(nt)}}_findInCacheList(t,N){let me=0,pe=t.length-1,Le=pe-me>>1,Ye=t[Le];for(;me<pe;)Ye.modelOffset<N?me=Le+1:pe=Le-1,Le=me+(pe-me>>1),Ye=t[Le];return Ye.modelOffset<=N?Ye:t[Le-1]}}class ModelConsumable{constructor(){xt(this,"_consumable",new Map);xt(this,"_textProxyRegistry",new Map)}add(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u)),this._consumable.has(u)||this._consumable.set(u,new Map),this._consumable.get(u).set(t,!0)}consume(u,t){return t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u)),this.test(u,t)?(this._consumable.get(u).set(t,!1),!0):!1}test(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u));const N=this._consumable.get(u);if(N===void 0)return null;const me=N.get(t);return me===void 0?null:me}revert(u,t){t=_normalizeConsumableType(t),u instanceof TextProxy&&(u=this._getSymbolForTextProxy(u));const N=this.test(u,t);return N===!1?(this._consumable.get(u).set(t,!0),!0):N===!0?!1:null}verifyAllConsumed(u){const t=[];for(const[N,me]of this._consumable)for(const[pe,Le]of me){const Ye=pe.split(":")[0];Le&&u==Ye&&t.push({event:pe,item:N.name||N.description})}if(t.length)throw new CKEditorError("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(u){let t=null;const N=this._textProxyRegistry.get(u.startOffset);if(N){const me=N.get(u.endOffset);me&&(t=me.get(u.parent))}return t||(t=this._addSymbolForTextProxy(u)),t}_addSymbolForTextProxy(u){const t=u.startOffset,N=u.endOffset,me=u.parent,pe=Symbol("$textProxy:"+u.data);let Le,Ye;return Le=this._textProxyRegistry.get(t),Le||(Le=new Map,this._textProxyRegistry.set(t,Le)),Ye=Le.get(N),Ye||(Ye=new Map,Le.set(N,Ye)),Ye.set(me,pe),pe}}function _normalizeConsumableType(de){const u=de.split(":");return u[0]=="insert"?u[0]:u[0]=="addMarker"||u[0]=="removeMarker"?de:u.length>1?u[0]+":"+u[1]:u[0]}class DowncastDispatcher extends EmitterMixin(){constructor(t){super();xt(this,"_conversionApi");xt(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,N,me){const pe=this._createConversionApi(me,t.getRefreshedItems());for(const Ye of t.getMarkersToRemove())this._convertMarkerRemove(Ye.name,Ye.range,pe);const Le=this._reduceChanges(t.getChanges());for(const Ye of Le)Ye.type==="insert"?this._convertInsert(Range._createFromPositionAndShift(Ye.position,Ye.length),pe):Ye.type==="reinsert"?this._convertReinsert(Range._createFromPositionAndShift(Ye.position,Ye.length),pe):Ye.type==="remove"?this._convertRemove(Ye.position,Ye.length,Ye.name,pe):this._convertAttribute(Ye.range,Ye.attributeKey,Ye.attributeOldValue,Ye.attributeNewValue,pe);pe.mapper.flushDeferredBindings();for(const Ye of pe.mapper.flushUnboundMarkerNames()){const nt=N.get(Ye).getRange();this._convertMarkerRemove(Ye,nt,pe),this._convertMarkerAdd(Ye,nt,pe)}for(const Ye of t.getMarkersToAdd())this._convertMarkerAdd(Ye.name,Ye.range,pe);pe.consumable.verifyAllConsumed("insert")}convert(t,N,me,pe={}){const Le=this._createConversionApi(me,void 0,pe);this._convertInsert(t,Le);for(const[Ye,nt]of N)this._convertMarkerAdd(Ye,nt,Le);Le.consumable.verifyAllConsumed("insert")}convertSelection(t,N,me){const pe=this._createConversionApi(me);this.fire("cleanSelection",{selection:t},pe);const Le=t.getFirstPosition().root;if(!pe.mapper.toViewElement(Le))return;const Ye=Array.from(N.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(pe.consumable,t,Ye),this.fire("selection",{selection:t},pe),!!t.isCollapsed){for(const nt of Ye)if(pe.consumable.test(t,"addMarker:"+nt.name)){const ot=nt.getRange();if(!shouldMarkerChangeBeConverted(t.getFirstPosition(),nt,pe.mapper))continue;const ft={item:t,markerName:nt.name,markerRange:ot};this.fire(`addMarker:${nt.name}`,ft,pe)}for(const nt of t.getAttributeKeys())if(pe.consumable.test(t,"attribute:"+nt)){const ot={item:t,range:t.getFirstRange(),attributeKey:nt,attributeOldValue:null,attributeNewValue:t.getAttribute(nt)};this.fire(`attribute:${nt}:$text`,ot,pe)}}}_convertInsert(t,N,me={}){me.doNotAddConsumables||this._addConsumablesForInsert(N.consumable,t);for(const pe of t.getWalker({shallow:!0}))this._testAndFire("insert",walkerValueToEventData(pe),N)}_convertRemove(t,N,me,pe){this.fire(`remove:${me}`,{position:t,length:N},pe)}_convertAttribute(t,N,me,pe,Le){this._addConsumablesForRange(Le.consumable,t,`attribute:${N}`);for(const Ye of t){const nt={item:Ye.item,range:Range._createFromPositionAndShift(Ye.previousPosition,Ye.length),attributeKey:N,attributeOldValue:me,attributeNewValue:pe};this._testAndFire(`attribute:${N}`,nt,Le)}}_convertReinsert(t,N){const me=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(N.consumable,me);for(const pe of me.map(walkerValueToEventData))this._testAndFire("insert",{...pe,reconversion:!0},N)}_convertMarkerAdd(t,N,me){if(N.root.rootName=="$graveyard")return;const pe=`addMarker:${t}`;if(me.consumable.add(N,pe),this.fire(pe,{markerName:t,markerRange:N},me),!!me.consumable.consume(N,pe)){this._addConsumablesForRange(me.consumable,N,pe);for(const Le of N.getItems()){if(!me.consumable.test(Le,pe))continue;const Ye={item:Le,range:Range._createOn(Le),markerName:t,markerRange:N};this.fire(pe,Ye,me)}}}_convertMarkerRemove(t,N,me){N.root.rootName!="$graveyard"&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:N},me)}_reduceChanges(t){const N={changes:t};return this.fire("reduceChanges",N),N.changes}_addConsumablesForInsert(t,N){for(const me of N){const pe=me.item;if(t.test(pe,"insert")===null){t.add(pe,"insert");for(const Le of pe.getAttributeKeys())t.add(pe,"attribute:"+Le)}}return t}_addConsumablesForRange(t,N,me){for(const pe of N.getItems())t.add(pe,me);return t}_addConsumablesForSelection(t,N,me){t.add(N,"selection");for(const pe of me)t.add(N,"addMarker:"+pe.name);for(const pe of N.getAttributeKeys())t.add(N,"attribute:"+pe);return t}_testAndFire(t,N,me){const pe=getEventName(t,N),Le=N.item.is("$textProxy")?me.consumable._getSymbolForTextProxy(N.item):N.item,Ye=this._firedEventsMap.get(me),nt=Ye.get(Le);if(!nt)Ye.set(Le,new Set([pe]));else if(!nt.has(pe))nt.add(pe);else return;this.fire(pe,N,me)}_testAndFireAddAttributes(t,N){const me={item:t,range:Range._createOn(t)};for(const pe of me.item.getAttributeKeys())me.attributeKey=pe,me.attributeOldValue=null,me.attributeNewValue=me.item.getAttribute(pe),this._testAndFire(`attribute:${pe}`,me,N)}_createConversionApi(t,N=new Set,me={}){const pe={...this._conversionApi,consumable:new ModelConsumable,writer:t,options:me,convertItem:Le=>this._convertInsert(Range._createOn(Le),pe),convertChildren:Le=>this._convertInsert(Range._createIn(Le),pe,{doNotAddConsumables:!0}),convertAttributes:Le=>this._testAndFireAddAttributes(Le,pe),canReuseView:Le=>!N.has(pe.mapper.toModelElement(Le))};return this._firedEventsMap.set(pe,new Map),pe}}function shouldMarkerChangeBeConverted(de,u,t){const N=u.getRange(),me=Array.from(de.getAncestors());return me.shift(),me.reverse(),!me.some(Le=>{if(N.containsItem(Le))return!!t.toViewElement(Le).getCustomProperty("addHighlight")})}function getEventName(de,u){const t=u.item.is("element")?u.item.name:"$text";return`${de}:${t}`}function walkerValueToEventData(de){return{item:de.item,range:Range._createFromPositionAndShift(de.previousPosition,de.length)}}let Node$1=class extends TypeCheckable{constructor(t){super();xt(this,"parent",null);xt(this,"_attrs");xt(this,"_index",null);xt(this,"_startOffset",null);this._attrs=toMap(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let N=this;for(;N.parent;)t.unshift(N.startOffset),N=N.parent;return t}getAncestors(t={}){const N=[];let me=t.includeSelf?this:this.parent;for(;me;)N[t.parentFirst?"push":"unshift"](me),me=me.parent;return N}getCommonAncestor(t,N={}){const me=this.getAncestors(N),pe=t.getAncestors(N);let Le=0;for(;me[Le]==pe[Le]&&me[Le];)Le++;return Le===0?null:me[Le-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const N=this.getPath(),me=t.getPath(),pe=compareArrays(N,me);switch(pe){case"prefix":return!0;case"extension":return!1;default:return N[pe]<me[pe]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((N,me)=>(N[me[0]]=me[1],N),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,N){this._attrs.set(t,N)}_setAttributesTo(t){this._attrs=toMap(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}};Node$1.prototype.is=function(de){return de==="node"||de==="model:node"};class Selection extends EmitterMixin(TypeCheckable){constructor(...t){super();xt(this,"_lastRangeBackward",!1);xt(this,"_attrs",new Map);xt(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const N of this._ranges){let me=!1;for(const pe of t._ranges)if(N.isEqual(pe)){me=!0;break}if(!me)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Range(t.start,t.end)}getFirstRange(){let t=null;for(const N of this._ranges)(!t||N.start.isBefore(t.start))&&(t=N);return t?new Range(t.start,t.end):null}getLastRange(){let t=null;for(const N of this._ranges)(!t||N.end.isAfter(t.end))&&(t=N);return t?new Range(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[N,me,pe]=t;if(typeof me=="object"&&(pe=me,me=void 0),N===null)this._setRanges([]);else if(N instanceof Selection)this._setRanges(N.getRanges(),N.isBackward);else if(N&&typeof N.getRanges=="function")this._setRanges(N.getRanges(),N.isBackward);else if(N instanceof Range)this._setRanges([N],!!pe&&!!pe.backward);else if(N instanceof Position)this._setRanges([new Range(N)]);else if(N instanceof Node$1){const Le=!!pe&&!!pe.backward;let Ye;if(me=="in")Ye=Range._createIn(N);else if(me=="on")Ye=Range._createOn(N);else if(me!==void 0)Ye=new Range(Position._createAt(N,me));else throw new CKEditorError("model-selection-setto-required-second-parameter",[this,N]);this._setRanges([Ye],Le)}else if(isIterable(N))this._setRanges(N,pe&&!!pe.backward);else throw new CKEditorError("model-selection-setto-not-selectable",[this,N])}_setRanges(t,N=!1){const me=Array.from(t),pe=me.some(Le=>{if(!(Le instanceof Range))throw new CKEditorError("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(Ye=>!Ye.isEqual(Le))});me.length===this._ranges.length&&!pe||(this._replaceAllRanges(me),this._lastRangeBackward=!!N,this.fire("change:range",{directChange:!0}))}setFocus(t,N){if(this.anchor===null)throw new CKEditorError("model-selection-setfocus-no-ranges",[this,t]);const me=Position._createAt(t,N);if(me.compareWith(this.focus)=="same")return;const pe=this.anchor;this._ranges.length&&this._popRange(),me.compareWith(pe)=="before"?(this._pushRange(new Range(me,pe)),this._lastRangeBackward=!0):(this._pushRange(new Range(pe,me)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,N){this.getAttribute(t)!==N&&(this._attrs.set(t,N),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const N of this.getRanges()){const me=getParentBlock$1(N.start,t);isStartBlockSelected(me,N)&&(yield me);const pe=N.getWalker();for(const Ye of pe){const nt=Ye.item;Ye.type=="elementEnd"&&isUnvisitedTopBlock(nt,t,N)?yield nt:Ye.type=="elementStart"&&nt.is("model:element")&&nt.root.document.model.schema.isBlock(nt)&&pe.jumpTo(Position._createAt(nt,"end"))}const Le=getParentBlock$1(N.end,t);isEndBlockSelected(Le,N)&&(yield Le)}}containsEntireContent(t=this.anchor.root){const N=Position._createAt(t,0),me=Position._createAt(t,"end");return N.isTouching(this.getFirstPosition())&&me.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new Range(t.start,t.end))}_checkRange(t){for(let N=0;N<this._ranges.length;N++)if(t.isIntersecting(this._ranges[N]))throw new CKEditorError("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[N]})}_replaceAllRanges(t){this._removeAllRanges();for(const N of t)this._pushRange(N)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Selection.prototype.is=function(de){return de==="selection"||de==="model:selection"};function isUnvisitedBlock(de,u){return u.has(de)?!1:(u.add(de),de.root.document.model.schema.isBlock(de)&&!!de.parent)}function isUnvisitedTopBlock(de,u,t){return isUnvisitedBlock(de,u)&&isTopBlockInRange(de,t)}function getParentBlock$1(de,u){const N=de.parent.root.document.model.schema,me=de.parent.getAncestors({parentFirst:!0,includeSelf:!0});let pe=!1;const Le=me.find(Ye=>pe?!1:(pe=N.isLimit(Ye),!pe&&isUnvisitedBlock(Ye,u)));return me.forEach(Ye=>u.add(Ye)),Le}function isTopBlockInRange(de,u){const t=findAncestorBlock(de);return t?!u.containsRange(Range._createOn(t),!0):!0}function isStartBlockSelected(de,u){return de?u.isCollapsed||de.isEmpty?!0:u.start.isTouching(Position._createAt(de,de.maxOffset))?!1:isTopBlockInRange(de,u):!1}function isEndBlockSelected(de,u){return de?u.isCollapsed||de.isEmpty?!0:u.end.isTouching(Position._createAt(de,0))?!1:isTopBlockInRange(de,u):!1}function findAncestorBlock(de){const u=de.root.document.model.schema;let t=de.parent;for(;t;){if(u.isBlock(t))return t;t=t.parent}}class LiveRange extends EmitterMixin(Range){constructor(u,t){super(u,t),bindWithDocument$1.call(this)}detach(){this.stopListening()}toRange(){return new Range(this.start,this.end)}static fromRange(u){return new LiveRange(u.start,u.end)}}LiveRange.prototype.is=function(de){return de==="liveRange"||de==="model:liveRange"||de=="range"||de==="model:range"};function bindWithDocument$1(){this.listenTo(this.root.document.model,"applyOperation",(de,u)=>{const t=u[0];t.isDocumentOperation&&transform$2.call(this,t)},{priority:"low"})}function transform$2(de){const u=this.getTransformedByOperation(de),t=Range._createFromRanges(u),N=!t.isEqual(this),me=doesOperationChangeRangeContent(this,de);let pe=null;if(N){t.root.rootName=="$graveyard"&&(de.type=="remove"?pe=de.sourcePosition:pe=de.deletionPosition);const Le=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",Le,{deletionPosition:pe})}else me&&this.fire("change:content",this.toRange(),{deletionPosition:pe})}function doesOperationChangeRangeContent(de,u){switch(u.type){case"insert":return de.containsPosition(u.position);case"move":case"remove":case"reinsert":case"merge":return de.containsPosition(u.sourcePosition)||de.start.isEqual(u.sourcePosition)||de.containsPosition(u.targetPosition);case"split":return de.containsPosition(u.splitPosition)||de.containsPosition(u.insertionPosition)}return!1}class Text extends Node$1{constructor(t,N){super(N);xt(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Text(this.data,this.getAttributes())}static fromJSON(t){return new Text(t.data,t.attributes)}}Text.prototype.is=function(de){return de==="$text"||de==="model:$text"||de==="text"||de==="model:text"||de==="node"||de==="model:node"};const storePrefix="selection:";class DocumentSelection extends EmitterMixin(TypeCheckable){constructor(t){super();xt(this,"_selection");this._selection=new LiveSelection(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,N){this._selection.setFocus(t,N)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,N){this._selection.setAttribute(t,N)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return storePrefix+t}static _isStoreAttributeKey(t){return t.startsWith(storePrefix)}}DocumentSelection.prototype.is=function(de){return de==="selection"||de=="model:selection"||de=="documentSelection"||de=="model:documentSelection"};class LiveSelection extends Selection{constructor(t){super();xt(this,"markers",new Collection({idProperty:"name"}));xt(this,"_model");xt(this,"_document");xt(this,"_attributePriority",new Map);xt(this,"_selectionRestorePosition",null);xt(this,"_hasChangedRange",!1);xt(this,"_overriddenGravityRegister",new Set);xt(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(N,me)=>{const pe=me[0];!pe.isDocumentOperation||pe.type=="marker"||pe.type=="rename"||pe.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(N,me,pe,Le)=>{this._updateMarker(me,Le)}),this.listenTo(this._document,"change",(N,me)=>{clearAttributesStoredInElement(this._model,me)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,N){super.setFocus(t,N),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,N){if(this._setAttribute(t,N)){const me=[t];this.fire("change:attribute",{attributeKeys:me,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const N=[t];this.fire("change:attribute",{attributeKeys:N,directChange:!0})}}overrideGravity(){const t=uid();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new CKEditorError("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const N=this._prepareRange(t);N&&this._ranges.push(N)}_validateSelectionRanges(t){for(const N of t)if(!this._document._validateSelectionRange(N))throw new CKEditorError("document-selection-wrong-position",this,{range:N})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const N=LiveRange.fromRange(t);return N.on("change:range",(me,pe,Le)=>{if(this._hasChangedRange=!0,N.root==this._document.graveyard){this._selectionRestorePosition=Le.deletionPosition;const Ye=this._ranges.indexOf(N);this._ranges.splice(Ye,1),N.detach()}}),N}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let N=!1;for(const pe of this._model.markers){const Le=pe.name.split(":",1)[0];if(!this._observedMarkers.has(Le))continue;const Ye=pe.getRange();for(const nt of this.getRanges())Ye.containsRange(nt,!nt.isCollapsed)&&t.push(pe)}const me=Array.from(this.markers);for(const pe of t)this.markers.has(pe)||(this.markers.add(pe),N=!0);for(const pe of Array.from(this.markers))t.includes(pe)||(this.markers.remove(pe),N=!0);N&&this.fire("change:marker",{oldMarkers:me,directChange:!1})}_updateMarker(t,N){const me=t.name.split(":",1)[0];if(!this._observedMarkers.has(me))return;let pe=!1;const Le=Array.from(this.markers),Ye=this.markers.has(t);if(!N)Ye&&(this.markers.remove(t),pe=!0);else{let nt=!1;for(const ot of this.getRanges())if(N.containsRange(ot,!ot.isCollapsed)){nt=!0;break}nt&&!Ye?(this.markers.add(t),pe=!0):!nt&&Ye&&(this.markers.remove(t),pe=!0)}pe&&this.fire("change:marker",{oldMarkers:Le,directChange:!1})}_updateAttributes(t){const N=toMap(this._getSurroundingAttributes()),me=toMap(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[Le,Ye]of this._attributePriority)Ye=="low"&&(this._attrs.delete(Le),this._attributePriority.delete(Le));this._setAttributesTo(N);const pe=[];for(const[Le,Ye]of this.getAttributes())(!me.has(Le)||me.get(Le)!==Ye)&&pe.push(Le);for(const[Le]of me)this.hasAttribute(Le)||pe.push(Le);pe.length>0&&this.fire("change:attribute",{attributeKeys:pe,directChange:!1})}_setAttribute(t,N,me=!0){const pe=me?"normal":"low";return pe=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===N?!1:(this._attrs.set(t,N),this._attributePriority.set(t,pe),!0)}_removeAttribute(t,N=!0){const me=N?"normal":"low";return me=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,me),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const N=new Set;for(const[me,pe]of this.getAttributes())t.get(me)!==pe&&this._removeAttribute(me,!1);for(const[me,pe]of t)this._setAttribute(me,pe,!1)&&N.add(me);return N}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const N of t.getAttributeKeys())N.startsWith(storePrefix)&&(yield[N.substr(storePrefix.length),t.getAttribute(N)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),N=this._model.schema;if(t.root.rootName=="$graveyard")return null;let me=null;if(this.isCollapsed){const pe=t.textNode?t.textNode:t.nodeBefore,Le=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(me=getTextAttributes(pe,N)),me||(me=getTextAttributes(Le,N)),!this.isGravityOverridden&&!me){let Ye=pe;for(;Ye&&!me;)Ye=Ye.previousSibling,me=getTextAttributes(Ye,N)}if(!me){let Ye=Le;for(;Ye&&!me;)Ye=Ye.nextSibling,me=getTextAttributes(Ye,N)}me||(me=this.getStoredAttributes())}else{const pe=this.getFirstRange();for(const Le of pe){if(Le.item.is("element")&&N.isObject(Le.item)){me=getTextAttributes(Le.item,N);break}if(Le.type=="text"){me=Le.item.getAttributes();break}}}return me}_fixGraveyardSelection(t){const N=this._model.schema.getNearestSelectionRange(t);N&&this._pushRange(N)}}function getTextAttributes(de,u){if(!de)return null;if(de instanceof TextProxy||de instanceof Text)return de.getAttributes();if(!u.isInline(de))return null;if(!u.isObject(de))return[];const t=[];for(const[N,me]of de.getAttributes())u.checkAttribute("$text",N)&&u.getAttributeProperties(N).copyFromObject!==!1&&t.push([N,me]);return t}function clearAttributesStoredInElement(de,u){const t=de.document.differ;for(const N of t.getChanges()){if(N.type!="insert")continue;const me=N.position.parent;N.length===me.maxOffset&&de.enqueueChange(u,Le=>{const Ye=Array.from(me.getAttributeKeys()).filter(nt=>nt.startsWith(storePrefix));for(const nt of Ye)Le.removeAttribute(nt,me)})}}class NodeList{constructor(u){xt(this,"_nodes",[]);xt(this,"_offsetToNode",[]);u&&this._insertNodes(0,u)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(u){return this._nodes[u]||null}getNodeAtOffset(u){return this._offsetToNode[u]||null}getNodeIndex(u){return u.index}getNodeStartOffset(u){return u.startOffset}indexToOffset(u){if(u==this._nodes.length)return this.maxOffset;const t=this._nodes[u];if(!t)throw new CKEditorError("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(u){if(u==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[u];if(!t)throw new CKEditorError("model-nodelist-offset-out-of-bounds",this,{offset:u,nodeList:this});return this.getNodeIndex(t)}_insertNodes(u,t){const N=[];for(const pe of t){if(!(pe instanceof Node$1))throw new CKEditorError("model-nodelist-insertnodes-not-node",this);N.push(pe)}let me=this.indexToOffset(u);spliceArray(this._nodes,N,u),spliceArray(this._offsetToNode,makeOffsetsArray(N),me);for(let pe=u;pe<this._nodes.length;pe++)this._nodes[pe]._index=pe,this._nodes[pe]._startOffset=me,me+=this._nodes[pe].offsetSize}_removeNodes(u,t=1){if(t==0)return[];let N=this.indexToOffset(u);const me=this._nodes.splice(u,t),pe=me[me.length-1],Le=pe.startOffset+pe.offsetSize-N;this._offsetToNode.splice(N,Le);for(const Ye of me)Ye._index=null,Ye._startOffset=null;for(let Ye=u;Ye<this._nodes.length;Ye++)this._nodes[Ye]._index=Ye,this._nodes[Ye]._startOffset=N,N+=this._nodes[Ye].offsetSize;return me}_removeNodesArray(u){if(u.length==0)return;for(const N of u)N._index=null,N._startOffset=null;this._nodes=this._nodes.filter(N=>N.index!==null),this._offsetToNode=this._offsetToNode.filter(N=>N.index!==null);let t=0;for(let N=0;N<this._nodes.length;N++)this._nodes[N]._index=N,this._nodes[N]._startOffset=t,t+=this._nodes[N].offsetSize}toJSON(){return this._nodes.map(u=>u.toJSON())}}function makeOffsetsArray(de){const u=[];let t=0;for(const N of de)for(let me=0;me<N.offsetSize;me++)u[t++]=N;return u}class Element extends Node$1{constructor(t,N,me){super(N);xt(this,"name");xt(this,"_children",new NodeList);this.name=t,me&&this._insertChild(0,me)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let N=this;for(const me of t)N=N.getChildAtOffset(me);return N}findAncestor(t,N={}){let me=N.includeSelf?this:this.parent;for(;me;){if(me.name===t)return me;me=me.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const N of this._children)t.children.push(N.toJSON())}return t}_clone(t=!1){const N=t?cloneNodes(this._children):void 0;return new Element(this.name,this.getAttributes(),N)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,N){const me=normalize$1(N);for(const pe of me)pe.parent!==null&&pe._remove(),pe.parent=this;this._children._insertNodes(t,me)}_removeChildren(t,N=1){const me=this._children._removeNodes(t,N);for(const pe of me)pe.parent=null;return me}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const N of t)N.parent=null}static fromJSON(t){let N;if(t.children){N=[];for(const me of t.children)me.name?N.push(Element.fromJSON(me)):N.push(Text.fromJSON(me))}return new Element(t.name,t.attributes,N)}}Element.prototype.is=function(de,u){return u?u===this.name&&(de==="element"||de==="model:element"):de==="element"||de==="model:element"||de==="node"||de==="model:node"};function normalize$1(de){if(typeof de=="string")return[new Text(de)];isIterable(de)||(de=[de]);const u=[];for(const t of de)typeof t=="string"?u.push(new Text(t)):t instanceof TextProxy?u.push(new Text(t.data,t.getAttributes())):u.push(t);return u}function cloneNodes(de){const u=[];for(const t of de)u.push(t._clone(!0));return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ConversionHelpers{constructor(u){xt(this,"_dispatchers");this._dispatchers=u}add(u){for(const t of this._dispatchers)u(t);return this}}class DowncastHelpers extends ConversionHelpers{elementToElement(u){return this.add(downcastElementToElement(u))}elementToStructure(u){return this.add(downcastElementToStructure(u))}attributeToElement(u){return this.add(downcastAttributeToElement(u))}attributeToAttribute(u){return this.add(downcastAttributeToAttribute(u))}markerToElement(u){return this.add(downcastMarkerToElement(u))}markerToHighlight(u){return this.add(downcastMarkerToHighlight(u))}markerToData(u){return this.add(downcastMarkerToData(u))}}function insertText(){return(de,u,t)=>{if(!t.consumable.consume(u.item,de.name))return;const N=t.writer,me=t.mapper.toViewPosition(u.range.start),pe=N.createText(u.item.data);N.insert(me,pe)}}function insertAttributesAndChildren(){return(de,u,t)=>{t.convertAttributes(u.item),!u.reconversion&&u.item.is("element")&&!u.item.isEmpty&&t.convertChildren(u.item)}}function remove$1(){return(de,u,t)=>{const N=t.mapper.toViewPosition(u.position),me=u.position.getShiftedBy(u.length),pe=t.mapper.toViewPosition(me,{isPhantom:!0}),Le=t.writer.createRange(N,pe),Ye=t.writer.remove(Le.getTrimmed());for(const nt of t.writer.createRangeIn(Ye).getItems())t.mapper.unbindViewElement(nt,{defer:!0})}}function createViewElementFromHighlightDescriptor(de,u){const t=de.createAttributeElement("span",u.attributes);return u.classes&&t._addClass(u.classes),typeof u.priority=="number"&&(t._priority=u.priority),t._id=u.id,t}function convertRangeSelection(){return(de,u,t)=>{const N=u.selection;if(N.isCollapsed||!t.consumable.consume(N,"selection"))return;const me=[];for(const pe of N.getRanges())me.push(t.mapper.toViewRange(pe));t.writer.setSelection(me,{backward:N.isBackward})}}function convertCollapsedSelection(){return(de,u,t)=>{const N=u.selection;if(!N.isCollapsed||!t.consumable.consume(N,"selection"))return;const me=t.writer,pe=N.getFirstPosition(),Le=t.mapper.toViewPosition(pe),Ye=me.breakAttributes(Le);me.setSelection(Ye)}}function cleanSelection(){return(de,u,t)=>{const N=t.writer,me=N.document.selection;for(const pe of me.getRanges())pe.isCollapsed&&pe.end.parent.isAttached()&&t.writer.mergeAttributes(pe.start);N.setSelection(null)}}function wrap(de){return(u,t,N)=>{if(!N.consumable.test(t.item,u.name))return;const me=de(t.attributeOldValue,N,t),pe=de(t.attributeNewValue,N,t);if(!me&&!pe)return;N.consumable.consume(t.item,u.name);const Le=N.writer,Ye=Le.document.selection;if(t.item instanceof Selection||t.item instanceof DocumentSelection)Le.wrap(Ye.getFirstRange(),pe);else{let nt=N.mapper.toViewRange(t.range);t.attributeOldValue!==null&&me&&(nt=Le.unwrap(nt,me)),t.attributeNewValue!==null&&pe&&Le.wrap(nt,pe)}}}function insertElement(de,u=defaultConsumer){return(t,N,me)=>{if(!u(N.item,me.consumable,{preflight:!0}))return;const pe=de(N.item,me,N);if(!pe)return;u(N.item,me.consumable);const Le=me.mapper.toViewPosition(N.range.start);me.mapper.bindElements(N.item,pe),me.writer.insert(Le,pe),me.convertAttributes(N.item),reinsertOrConvertNodes(pe,N.item.getChildren(),me,{reconversion:N.reconversion})}}function insertStructure(de,u){return(t,N,me)=>{if(!u(N.item,me.consumable,{preflight:!0}))return;const pe=new Map;me.writer._registerSlotFactory(createSlotFactory(N.item,pe,me));const Le=de(N.item,me,N);if(me.writer._clearSlotFactory(),!Le)return;validateSlotsChildren(N.item,pe,me),u(N.item,me.consumable);const Ye=me.mapper.toViewPosition(N.range.start);me.mapper.bindElements(N.item,Le),me.writer.insert(Ye,Le),me.convertAttributes(N.item),fillSlots(Le,pe,me,{reconversion:N.reconversion})}}function insertUIElement(de){return(u,t,N)=>{t.isOpening=!0;const me=de(t,N);t.isOpening=!1;const pe=de(t,N);if(!me||!pe)return;const Le=t.markerRange;if(Le.isCollapsed&&!N.consumable.consume(Le,u.name))return;for(const ot of Le)if(!N.consumable.consume(ot.item,u.name))return;const Ye=N.mapper,nt=N.writer;nt.insert(Ye.toViewPosition(Le.start),me),N.mapper.bindElementToMarker(me,t.markerName),Le.isCollapsed||(nt.insert(Ye.toViewPosition(Le.end),pe),N.mapper.bindElementToMarker(pe,t.markerName)),u.stop()}}function removeUIElement(){return(de,u,t)=>{const N=t.mapper.markerNameToElements(u.markerName);if(N){for(const me of N)t.mapper.unbindElementFromMarkerName(me,u.markerName),t.writer.clear(t.writer.createRangeOn(me),me);t.writer.clearClonedElementsGroup(u.markerName),de.stop()}}}function insertMarkerData(de){return(u,t,N)=>{const me=de(t.markerName,N);if(!me)return;const pe=t.markerRange;N.consumable.consume(pe,u.name)&&(handleMarkerBoundary(pe,!1,N,t,me),handleMarkerBoundary(pe,!0,N,t,me),u.stop())}}function handleMarkerBoundary(de,u,t,N,me){const pe=u?de.start:de.end,Le=pe.nodeAfter&&pe.nodeAfter.is("element")?pe.nodeAfter:null,Ye=pe.nodeBefore&&pe.nodeBefore.is("element")?pe.nodeBefore:null;if(Le||Ye){let ot,ft;u&&Le||!u&&!Ye?(ot=Le,ft=!0):(ot=Ye,ft=!1);const mt=t.mapper.toViewElement(ot);if(mt){insertMarkerAsAttribute(mt,u,ft,t,N,me);return}}const nt=t.mapper.toViewPosition(pe);insertMarkerAsElement(nt,u,t,N,me)}function insertMarkerAsAttribute(de,u,t,N,me,pe){const Le=`data-${pe.group}-${u?"start":"end"}-${t?"before":"after"}`,Ye=de.hasAttribute(Le)?de.getAttribute(Le).split(","):[];Ye.unshift(pe.name),N.writer.setAttribute(Le,Ye.join(","),de),N.mapper.bindElementToMarker(de,me.markerName)}function insertMarkerAsElement(de,u,t,N,me){const pe=`${me.group}-${u?"start":"end"}`,Le=me.name?{name:me.name}:null,Ye=t.writer.createUIElement(pe,Le);t.writer.insert(de,Ye),t.mapper.bindElementToMarker(Ye,N.markerName)}function removeMarkerData(de){return(u,t,N)=>{const me=de(t.markerName,N);if(!me)return;const pe=N.mapper.markerNameToElements(t.markerName);if(!pe)return;for(const Ye of pe)N.mapper.unbindElementFromMarkerName(Ye,t.markerName),Ye.is("containerElement")?(Le(`data-${me.group}-start-before`,Ye),Le(`data-${me.group}-start-after`,Ye),Le(`data-${me.group}-end-before`,Ye),Le(`data-${me.group}-end-after`,Ye)):N.writer.clear(N.writer.createRangeOn(Ye),Ye);N.writer.clearClonedElementsGroup(t.markerName),u.stop();function Le(Ye,nt){if(nt.hasAttribute(Ye)){const ot=new Set(nt.getAttribute(Ye).split(","));ot.delete(me.name),ot.size==0?N.writer.removeAttribute(Ye,nt):N.writer.setAttribute(Ye,Array.from(ot).join(","),nt)}}}}function changeAttribute(de){return(u,t,N)=>{if(!N.consumable.test(t.item,u.name))return;const me=de(t.attributeOldValue,N,t),pe=de(t.attributeNewValue,N,t);if(!me&&!pe)return;N.consumable.consume(t.item,u.name);const Le=N.mapper.toViewElement(t.item),Ye=N.writer;if(!Le)throw new CKEditorError("conversion-attribute-to-attribute-on-text",N.dispatcher,t);if(t.attributeOldValue!==null&&me){let nt=me.value;me.key=="style"&&(typeof me.value=="string"?nt=new StylesMap(Ye.document.stylesProcessor).setTo(me.value).getStylesEntries().map(([ot])=>ot):nt=Object.keys(me.value)),Ye.removeAttribute(me.key,nt,Le)}if(t.attributeNewValue!==null&&pe){let nt=pe.value;pe.key=="style"&&typeof pe.value=="string"&&(nt=Object.fromEntries(new StylesMap(Ye.document.stylesProcessor).setTo(pe.value).getStylesEntries())),Ye.setAttribute(pe.key,nt,!1,Le)}}}function highlightText(de){return(u,t,N)=>{if(!t.item||!(t.item instanceof Selection||t.item instanceof DocumentSelection)&&!t.item.is("$textProxy"))return;const me=prepareDescriptor(de,t,N);if(!me||!N.consumable.consume(t.item,u.name))return;const pe=N.writer,Le=createViewElementFromHighlightDescriptor(pe,me),Ye=pe.document.selection;if(t.item instanceof Selection||t.item instanceof DocumentSelection)pe.wrap(Ye.getFirstRange(),Le);else{const nt=N.mapper.toViewRange(t.range),ot=pe.wrap(nt,Le);for(const ft of ot.getItems())if(ft.is("attributeElement")&&ft.isSimilar(Le)){N.mapper.bindElementToMarker(ft,t.markerName);break}}}}function highlightElement(de){return(u,t,N)=>{if(!t.item||!(t.item instanceof Element))return;const me=prepareDescriptor(de,t,N);if(!me||!N.consumable.test(t.item,u.name))return;const pe=N.mapper.toViewElement(t.item);if(pe&&pe.getCustomProperty("addHighlight")){N.consumable.consume(t.item,u.name);for(const Ye of Range._createIn(t.item))N.consumable.consume(Ye.item,u.name);pe.getCustomProperty("addHighlight")(pe,me,N.writer),N.mapper.bindElementToMarker(pe,t.markerName)}}}function removeHighlight$1(de){return(u,t,N)=>{if(t.markerRange.isCollapsed)return;const me=prepareDescriptor(de,t,N);if(!me)return;const pe=createViewElementFromHighlightDescriptor(N.writer,me),Le=N.mapper.markerNameToElements(t.markerName);if(Le){for(const Ye of Le)N.mapper.unbindElementFromMarkerName(Ye,t.markerName),Ye.is("attributeElement")?N.writer.unwrap(N.writer.createRangeOn(Ye),pe):Ye.getCustomProperty("removeHighlight")(Ye,me.id,N.writer);N.writer.clearClonedElementsGroup(t.markerName),u.stop()}}}function downcastElementToElement(de){const u=normalizeModelElementConfig(de.model),t=normalizeToElementConfig(de.view,"container");return u.attributes.length&&(u.children=!0),N=>{N.on(`insert:${u.name}`,insertElement(t,createConsumer(u)),{priority:de.converterPriority||"normal"}),(u.children||u.attributes.length)&&N.on("reduceChanges",createChangeReducer(u),{priority:"low"})}}function downcastElementToStructure(de){const u=normalizeModelElementConfig(de.model),t=normalizeToElementConfig(de.view,"container");return u.children=!0,N=>{if(N._conversionApi.schema.checkChild(u.name,"$text"))throw new CKEditorError("conversion-element-to-structure-disallowed-text",N,{elementName:u.name});N.on(`insert:${u.name}`,insertStructure(t,createConsumer(u)),{priority:de.converterPriority||"normal"}),N.on("reduceChanges",createChangeReducer(u),{priority:"low"})}}function downcastAttributeToElement(de){de=cloneDeep(de);let u=de.model;typeof u=="string"&&(u={key:u});let t=`attribute:${u.key}`;if(u.name&&(t+=":"+u.name),u.values)for(const me of u.values)de.view[me]=normalizeToElementConfig(de.view[me],"attribute");else de.view=normalizeToElementConfig(de.view,"attribute");const N=getFromAttributeCreator(de);return me=>{me.on(t,wrap(N),{priority:de.converterPriority||"normal"})}}function downcastAttributeToAttribute(de){de=cloneDeep(de);let u=de.model;typeof u=="string"&&(u={key:u});let t=`attribute:${u.key}`;if(u.name&&(t+=":"+u.name),u.values)for(const me of u.values)de.view[me]=normalizeToAttributeConfig(de.view[me]);else de.view=normalizeToAttributeConfig(de.view);const N=getFromAttributeCreator(de);return me=>{me.on(t,changeAttribute(N),{priority:de.converterPriority||"normal"})}}function downcastMarkerToElement(de){const u=normalizeToElementConfig(de.view,"ui");return t=>{t.on(`addMarker:${de.model}`,insertUIElement(u),{priority:de.converterPriority||"normal"}),t.on(`removeMarker:${de.model}`,removeUIElement(),{priority:de.converterPriority||"normal"})}}function downcastMarkerToData(de){de=cloneDeep(de);const u=de.model;let t=de.view;return t||(t=N=>({group:u,name:N.substr(de.model.length+1)})),N=>{N.on(`addMarker:${u}`,insertMarkerData(t),{priority:de.converterPriority||"normal"}),N.on(`removeMarker:${u}`,removeMarkerData(t),{priority:de.converterPriority||"normal"})}}function downcastMarkerToHighlight(de){return u=>{u.on(`addMarker:${de.model}`,highlightText(de.view),{priority:de.converterPriority||"normal"}),u.on(`addMarker:${de.model}`,highlightElement(de.view),{priority:de.converterPriority||"normal"}),u.on(`removeMarker:${de.model}`,removeHighlight$1(de.view),{priority:de.converterPriority||"normal"})}}function normalizeModelElementConfig(de){return typeof de=="string"&&(de={name:de}),{name:de.name,attributes:de.attributes?toArray$2(de.attributes):[],children:!!de.children}}function normalizeToElementConfig(de,u){return typeof de=="function"?de:(t,N)=>createViewElementFromDefinition(de,N,u)}function createViewElementFromDefinition(de,u,t){typeof de=="string"&&(de={name:de});let N;const me=u.writer,pe=Object.assign({},de.attributes);if(t=="container")N=me.createContainerElement(de.name,pe);else if(t=="attribute"){const Le={priority:de.priority||AttributeElement.DEFAULT_PRIORITY};N=me.createAttributeElement(de.name,pe,Le)}else N=me.createUIElement(de.name,pe);if(de.styles){const Le=Object.keys(de.styles);for(const Ye of Le)me.setStyle(Ye,de.styles[Ye],N)}if(de.classes){const Le=de.classes;if(typeof Le=="string")me.addClass(Le,N);else for(const Ye of Le)me.addClass(Ye,N)}return N}function getFromAttributeCreator(de){return de.model.values?(u,t,N)=>{const me=de.view[u];return me?me(u,t,N):null}:de.view}function normalizeToAttributeConfig(de){return typeof de=="string"?u=>({key:de,value:u}):typeof de=="object"?de.value?()=>de:u=>({key:de.key,value:u}):de}function prepareDescriptor(de,u,t){const N=typeof de=="function"?de(u,t):de;return N?(N.priority||(N.priority=10),N.id||(N.id=u.markerName),N):null}function createChangeReducerCallback(de){return(u,t)=>{if(!u.is("element",de.name))return!1;if(t.type=="attribute"){if(de.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(de.children)return!0}return!1}}function createChangeReducer(de){const u=createChangeReducerCallback(de);return(t,N)=>{const me=[];N.reconvertedElements||(N.reconvertedElements=new Set);for(const pe of N.changes){const Le=pe.type=="attribute"?pe.range.start.nodeAfter:pe.position.parent;if(!Le||!u(Le,pe)){me.push(pe);continue}if(!N.reconvertedElements.has(Le)){N.reconvertedElements.add(Le);const Ye=Position._createBefore(Le);let nt=me.length;for(let ot=me.length-1;ot>=0;ot--){const ft=me[ot],bt=(ft.type=="attribute"?ft.range.start:ft.position).compareWith(Ye);if(bt=="before"||ft.type=="remove"&&bt=="same")break;nt=ot}me.splice(nt,0,{type:"remove",name:Le.name,position:Ye,length:1},{type:"reinsert",name:Le.name,position:Ye,length:1})}}N.changes=me}}function createConsumer(de){return(u,t,N={})=>{const me=["insert"];for(const pe of de.attributes)u.hasAttribute(pe)&&me.push(`attribute:${pe}`);return me.every(pe=>t.test(u,pe))?(N.preflight||me.forEach(pe=>t.consume(u,pe)),!0):!1}}function createSlotFactory(de,u,t){return(N,me)=>{const pe=N.createContainerElement("$slot");let Le=null;if(me==="children")Le=Array.from(de.getChildren());else if(typeof me=="function")Le=Array.from(de.getChildren()).filter(Ye=>me(Ye));else throw new CKEditorError("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:me});return u.set(pe,Le),pe}}function validateSlotsChildren(de,u,t){const N=Array.from(u.values()).flat(),me=new Set(N);if(me.size!=N.length)throw new CKEditorError("conversion-slot-filter-overlap",t.dispatcher,{element:de});if(me.size!=de.childCount)throw new CKEditorError("conversion-slot-filter-incomplete",t.dispatcher,{element:de})}function fillSlots(de,u,t,N){t.mapper.on("modelToViewPosition",Le,{priority:"highest"});let me=null,pe=null;for([me,pe]of u)reinsertOrConvertNodes(de,pe,t,N),t.writer.move(t.writer.createRangeIn(me),t.writer.createPositionBefore(me)),t.writer.remove(me);t.mapper.off("modelToViewPosition",Le);function Le(Ye,nt){const ot=nt.modelPosition.nodeAfter,ft=pe.indexOf(ot);ft<0||(nt.viewPosition=nt.mapper.findPositionIn(me,ft))}}function reinsertOrConvertNodes(de,u,t,N){for(const me of u)reinsertNode(de.root,me,t,N)||t.convertItem(me)}function reinsertNode(de,u,t,N){const{writer:me,mapper:pe}=t;if(!N.reconversion)return!1;const Le=pe.toViewElement(u);return!Le||Le.root==de||!t.canReuseView(Le)?!1:(me.move(me.createRangeOn(Le),pe.toViewPosition(Position._createBefore(u))),!0)}function defaultConsumer(de,u,{preflight:t}={}){return t?u.test(de,"insert"):u.consume(de,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function autoParagraphEmptyRoots(de){const{schema:u,document:t}=de.model;for(const N of t.getRoots())if(N.isEmpty&&!u.checkChild(N,"$text")&&u.checkChild(N,"paragraph"))return de.insertElement("paragraph",N),!0;return!1}function isParagraphable(de,u,t){const N=t.createContext(de);return!(!t.checkChild(N,"paragraph")||!t.checkChild(N.push("paragraph"),u))}function wrapInParagraph(de,u){const t=u.createElement("paragraph");return u.insert(t,de),u.createPositionAt(t,0)}class UpcastHelpers extends ConversionHelpers{elementToElement(u){return this.add(upcastElementToElement(u))}elementToAttribute(u){return this.add(upcastElementToAttribute(u))}attributeToAttribute(u){return this.add(upcastAttributeToAttribute(u))}elementToMarker(u){return this.add(upcastElementToMarker(u))}dataToMarker(u){return this.add(upcastDataToMarker(u))}}function convertToModelFragment$1(){return(de,u,t)=>{if(!u.modelRange&&t.consumable.consume(u.viewItem,{name:!0})){const{modelRange:N,modelCursor:me}=t.convertChildren(u.viewItem,u.modelCursor);u.modelRange=N,u.modelCursor=me}}}function convertText(){return(de,u,{schema:t,consumable:N,writer:me})=>{let pe=u.modelCursor;if(!N.test(u.viewItem))return;if(!t.checkChild(pe,"$text")){if(!isParagraphable(pe,"$text",t)||u.viewItem.data.trim().length==0)return;pe=wrapInParagraph(pe,me)}N.consume(u.viewItem);const Le=me.createText(u.viewItem.data);me.insert(Le,pe),u.modelRange=me.createRange(pe,pe.getShiftedBy(Le.offsetSize)),u.modelCursor=u.modelRange.end}}function convertSelectionChange(de,u){return(t,N)=>{const me=N.newSelection,pe=[];for(const Ye of me.getRanges())pe.push(u.toModelRange(Ye));const Le=de.createSelection(pe,{backward:me.isBackward});Le.isEqual(de.document.selection)||de.change(Ye=>{Ye.setSelection(Le)})}}function upcastElementToElement(de){de=cloneDeep(de);const u=prepareToElementConverter(de),t=getViewElementNameFromConfig(de.view),N=t?`element:${t}`:"element";return me=>{me.on(N,u,{priority:de.converterPriority||"normal"})}}function upcastElementToAttribute(de){de=cloneDeep(de),normalizeModelAttributeConfig(de);const u=prepareToAttributeConverter(de,!1),t=getViewElementNameFromConfig(de.view),N=t?`element:${t}`:"element";return me=>{me.on(N,u,{priority:de.converterPriority||"low"})}}function upcastAttributeToAttribute(de){de=cloneDeep(de);let u=null;(typeof de.view=="string"||de.view.key)&&(u=normalizeViewAttributeKeyValueConfig(de)),normalizeModelAttributeConfig(de,u);const t=prepareToAttributeConverter(de,!0);return N=>{N.on("element",t,{priority:de.converterPriority||"low"})}}function upcastElementToMarker(de){const u=normalizeElementToMarkerModelConfig(de.model);return upcastElementToElement({...de,model:u})}function upcastDataToMarker(de){de=cloneDeep(de),de.model||(de.model=me=>me?de.view+":"+me:de.view);const u={view:de.view,model:de.model},t=prepareToElementConverter(normalizeDataToMarkerConfig(u,"start")),N=prepareToElementConverter(normalizeDataToMarkerConfig(u,"end"));return me=>{me.on(`element:${de.view}-start`,t,{priority:de.converterPriority||"normal"}),me.on(`element:${de.view}-end`,N,{priority:de.converterPriority||"normal"});const pe=priorities.low,Le=priorities.highest,Ye=priorities.get(de.converterPriority)/Le;me.on("element",upcastAttributeToMarker(u),{priority:pe+Ye})}}function upcastAttributeToMarker(de){return(u,t,N)=>{const me=`data-${de.view}`;if(!N.consumable.test(t.viewItem,{attributes:me+"-end-after"})&&!N.consumable.test(t.viewItem,{attributes:me+"-start-after"})&&!N.consumable.test(t.viewItem,{attributes:me+"-end-before"})&&!N.consumable.test(t.viewItem,{attributes:me+"-start-before"}))return;t.modelRange||Object.assign(t,N.convertChildren(t.viewItem,t.modelCursor)),N.consumable.consume(t.viewItem,{attributes:me+"-end-after"})&&pe(t.modelRange.end,t.viewItem.getAttribute(me+"-end-after").split(",")),N.consumable.consume(t.viewItem,{attributes:me+"-start-after"})&&pe(t.modelRange.end,t.viewItem.getAttribute(me+"-start-after").split(",")),N.consumable.consume(t.viewItem,{attributes:me+"-end-before"})&&pe(t.modelRange.start,t.viewItem.getAttribute(me+"-end-before").split(",")),N.consumable.consume(t.viewItem,{attributes:me+"-start-before"})&&pe(t.modelRange.start,t.viewItem.getAttribute(me+"-start-before").split(","));function pe(Le,Ye){for(const nt of Ye){const ot=de.model(nt,N),ft=N.writer.createElement("$marker",{"data-name":ot});N.writer.insert(ft,Le),t.modelCursor.isEqual(Le)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(Le,1),t.modelRange=t.modelRange._getTransformedByInsertion(Le,1)[0]}}}}function getViewElementNameFromConfig(de){return typeof de=="string"?de:typeof de=="object"&&typeof de.name=="string"?de.name:null}function prepareToElementConverter(de){const u=new Matcher(de.view);return(t,N,me)=>{const pe=u.match(N.viewItem);if(!pe)return;const Le=pe.match;if(Le.name=!0,!me.consumable.test(N.viewItem,Le))return;const Ye=getModelElement(de.model,N.viewItem,me);Ye&&me.safeInsert(Ye,N.modelCursor)&&(me.consumable.consume(N.viewItem,Le),me.convertChildren(N.viewItem,Ye),me.updateConversionResult(Ye,N))}}function getModelElement(de,u,t){return de instanceof Function?de(u,t):t.writer.createElement(de)}function normalizeViewAttributeKeyValueConfig(de){typeof de.view=="string"&&(de.view={key:de.view});const u=de.view.key,t=typeof de.view.value>"u"?/[\s\S]*/:de.view.value;let N;return u=="class"||u=="style"?N={[u=="class"?"classes":"styles"]:t}:N={attributes:{[u]:t}},de.view.name&&(N.name=de.view.name),de.view=N,u}function normalizeModelAttributeConfig(de,u=null){const t=u===null?!0:pe=>pe.getAttribute(u),N=typeof de.model!="object"?de.model:de.model.key,me=typeof de.model!="object"||typeof de.model.value>"u"?t:de.model.value;de.model={key:N,value:me}}function prepareToAttributeConverter(de,u){const t=new Matcher(de.view);return(N,me,pe)=>{if(!me.modelRange&&u)return;const Le=t.match(me.viewItem);if(!Le||(onlyViewNameIsDefined(de.view,me.viewItem)?Le.match.name=!0:delete Le.match.name,!pe.consumable.test(me.viewItem,Le.match)))return;const Ye=de.model.key,nt=typeof de.model.value=="function"?de.model.value(me.viewItem,pe):de.model.value;if(nt===null)return;me.modelRange||Object.assign(me,pe.convertChildren(me.viewItem,me.modelCursor)),setAttributeOn(me.modelRange,{key:Ye,value:nt},u,pe)&&(pe.consumable.test(me.viewItem,{name:!0})&&(Le.match.name=!0),pe.consumable.consume(me.viewItem,Le.match))}}function onlyViewNameIsDefined(de,u){const t=typeof de=="function"?de(u):de;return typeof t=="object"&&!getViewElementNameFromConfig(t)?!1:!t.classes&&!t.attributes&&!t.styles}function setAttributeOn(de,u,t,N){let me=!1;for(const pe of Array.from(de.getItems({shallow:t})))N.schema.checkAttribute(pe,u.key)&&(me=!0,!pe.hasAttribute(u.key)&&N.writer.setAttribute(u.key,u.value,pe));return me}function normalizeElementToMarkerModelConfig(de){return(u,t)=>{const N=typeof de=="string"?de:de(u,t);return t.writer.createElement("$marker",{"data-name":N})}}function normalizeDataToMarkerConfig(de,u){const t=(N,me)=>{const pe=N.getAttribute("name"),Le=de.model(pe,me);return me.writer.createElement("$marker",{"data-name":Le})};return{view:`${de.view}-${u}`,model:t}}function injectSelectionPostFixer(de){de.document.registerPostFixer(u=>selectionPostFixer(u,de))}function selectionPostFixer(de,u){const t=u.document.selection,N=u.schema,me=[];let pe=!1;for(const Le of t.getRanges()){const Ye=tryFixingRange(Le,N);Ye&&!Ye.isEqual(Le)?(me.push(Ye),pe=!0):me.push(Le)}return pe&&de.setSelection(mergeIntersectingRanges(me),{backward:t.isBackward}),!1}function tryFixingRange(de,u){return de.isCollapsed?tryFixingCollapsedRange(de,u):tryFixingNonCollapsedRage(de,u)}function tryFixingCollapsedRange(de,u){const t=de.start,N=u.getNearestSelectionRange(t);if(!N){const pe=t.getAncestors().reverse().find(Le=>u.isObject(Le));return pe?Range._createOn(pe):null}if(!N.isCollapsed)return N;const me=N.start;return t.isEqual(me)?null:new Range(me)}function tryFixingNonCollapsedRage(de,u){const{start:t,end:N}=de,me=u.checkChild(t,"$text"),pe=u.checkChild(N,"$text"),Le=u.getLimitElement(t),Ye=u.getLimitElement(N);if(Le===Ye){if(me&&pe)return null;if(checkSelectionOnNonLimitElements(t,N,u)){const mt=t.nodeAfter&&u.isSelectable(t.nodeAfter)?null:u.getNearestSelectionRange(t,"forward"),yt=N.nodeBefore&&u.isSelectable(N.nodeBefore)?null:u.getNearestSelectionRange(N,"backward"),_t=mt?mt.start:t,Ct=yt?yt.end:N;return new Range(_t,Ct)}}const nt=Le&&!Le.is("rootElement"),ot=Ye&&!Ye.is("rootElement");if(nt||ot){const ft=t.nodeAfter&&N.nodeBefore&&t.nodeAfter.parent===N.nodeBefore.parent,mt=nt&&(!ft||!isSelectable(t.nodeAfter,u)),bt=ot&&(!ft||!isSelectable(N.nodeBefore,u));let yt=t,_t=N;return mt&&(yt=Position._createBefore(findOutermostLimitAncestor(Le,u))),bt&&(_t=Position._createAfter(findOutermostLimitAncestor(Ye,u))),new Range(yt,_t)}return null}function findOutermostLimitAncestor(de,u){let t=de,N=t;for(;u.isLimit(N)&&N.parent;)t=N,N=N.parent;return t}function checkSelectionOnNonLimitElements(de,u,t){const N=de.nodeAfter&&!t.isLimit(de.nodeAfter)||t.checkChild(de,"$text"),me=u.nodeBefore&&!t.isLimit(u.nodeBefore)||t.checkChild(u,"$text");return N||me}function mergeIntersectingRanges(de){const u=[...de],t=new Set;let N=1;for(;N<u.length;){const pe=u[N],Le=u.slice(0,N);for(const[Ye,nt]of Le.entries())if(!t.has(Ye)){if(pe.isEqual(nt))t.add(Ye);else if(pe.isIntersecting(nt)){t.add(Ye),t.add(N);const ot=pe.getJoined(nt);u.push(ot)}}N++}return u.filter((pe,Le)=>!t.has(Le))}function isSelectable(de,u){return de&&u.isSelectable(de)}class EditingController extends ObservableMixin(){constructor(t,N){super();xt(this,"model");xt(this,"view");xt(this,"mapper");xt(this,"downcastDispatcher");this.model=t,this.view=new View$1(N),this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:t.schema});const me=this.model.document,pe=me.selection,Le=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(me,"change",()=>{this.view.change(Ye=>{this.downcastDispatcher.convertChanges(me.differ,Le,Ye),this.downcastDispatcher.convertSelection(pe,Le,Ye)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",convertSelectionChange(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",fixTargetRanges(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.downcastDispatcher.on("remove",remove$1(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",cleanSelection()),this.downcastDispatcher.on("selection",convertRangeSelection(),{priority:"low"}),this.downcastDispatcher.on("selection",convertCollapsedSelection(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(Ye=>{if(Ye.rootName=="$graveyard")return null;const nt=new RootEditableElement(this.view.document,Ye.name);return nt.rootName=Ye.rootName,this.mapper.bindElements(Ye,nt),nt})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const N=typeof t=="string"?t:t.name,me=this.model.markers.get(N);if(!me)throw new CKEditorError("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:N});this.model.change(()=>{this.model.markers._refresh(me)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}function fixTargetRanges(de,u,t){return(N,me)=>{if(!(t.document.isComposing&&!env.isAndroid))for(let pe=0;pe<me.targetRanges.length;pe++){const Le=me.targetRanges[pe],Ye=de.toModelRange(Le),nt=tryFixingRange(Ye,u);!nt||nt.isEqual(Ye)||(me.targetRanges[pe]=de.toViewRange(nt))}}}class Schema extends ObservableMixin(){constructor(){super();xt(this,"_sourceDefinitions",{});xt(this,"_attributeProperties",Object.create(null));xt(this,"_customChildChecks",new Map);xt(this,"_customAttributeChecks",new Map);xt(this,"_genericCheckSymbol",Symbol("$generic"));xt(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,N)=>{N[0]=new SchemaContext(N[0])},{priority:"highest"}),this.on("checkChild",(t,N)=>{N[0]=new SchemaContext(N[0]),N[1]=this.getDefinition(N[1])},{priority:"highest"})}register(t,N){if(this._sourceDefinitions[t])throw new CKEditorError("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},N)],this._clearCache()}extend(t,N){if(!this._sourceDefinitions[t])throw new CKEditorError("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},N)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let N;return typeof t=="string"?N=t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?N="$text":N=t.name,this.getDefinitions()[N]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const N=this.getDefinition(t);return!!(N&&N.isBlock)}isLimit(t){const N=this.getDefinition(t);return N?!!(N.isLimit||N.isObject):!1}isObject(t){const N=this.getDefinition(t);return N?!!(N.isObject||N.isLimit&&N.isSelectable&&N.isContent):!1}isInline(t){const N=this.getDefinition(t);return!!(N&&N.isInline)}isSelectable(t){const N=this.getDefinition(t);return N?!!(N.isSelectable||N.isObject):!1}isContent(t){const N=this.getDefinition(t);return N?!!(N.isContent||N.isObject):!1}checkChild(t,N){return N?this._checkContextMatch(t,N):!1}checkAttribute(t,N){const me=this.getDefinition(t.last);if(!me)return!1;const pe=this._evaluateAttributeChecks(t,N);return pe!==void 0?pe:me.allowAttributes.includes(N)}checkMerge(t,N){if(t instanceof Position){const me=t.nodeBefore,pe=t.nodeAfter;if(!(me instanceof Element))throw new CKEditorError("schema-check-merge-no-element-before",this);if(!(pe instanceof Element))throw new CKEditorError("schema-check-merge-no-element-after",this);return this.checkMerge(me,pe)}if(this.isLimit(t)||this.isLimit(N))return!1;for(const me of N.getChildren())if(!this.checkChild(t,me))return!1;return!0}addChildCheck(t,N){const me=N!==void 0?N:this._genericCheckSymbol,pe=this._customChildChecks.get(me)||[];pe.push(t),this._customChildChecks.set(me,pe)}addAttributeCheck(t,N){const me=N!==void 0?N:this._genericCheckSymbol,pe=this._customAttributeChecks.get(me)||[];pe.push(t),this._customAttributeChecks.set(me,pe)}setAttributeProperties(t,N){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),N)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let N;for(t instanceof Position?N=t.parent:N=(t instanceof Range?[t]:Array.from(t.getRanges())).reduce((pe,Le)=>{const Ye=Le.getCommonAncestor();return pe?pe.getCommonAncestor(Ye,{includeSelf:!0}):Ye},null);!this.isLimit(N)&&N.parent;)N=N.parent;return N}checkAttributeInSelection(t,N){if(t.isCollapsed){const pe=[...t.getFirstPosition().getAncestors(),new Text("",t.getAttributes())];return this.checkAttribute(pe,N)}else{const me=t.getRanges();for(const pe of me)for(const Le of pe)if(this.checkAttribute(Le.item,N))return!0}return!1}*getValidRanges(t,N){t=convertToMinimalFlatRanges(t);for(const me of t)yield*this._getValidRangesForRange(me,N)}getNearestSelectionRange(t,N="both"){if(t.root.rootName=="$graveyard")return null;if(this.checkChild(t,"$text"))return new Range(t);let me,pe;const Le=t.getAncestors().reverse().find(Ye=>this.isLimit(Ye))||t.root;(N=="both"||N=="backward")&&(me=new TreeWalker({boundaries:Range._createIn(Le),startPosition:t,direction:"backward"})),(N=="both"||N=="forward")&&(pe=new TreeWalker({boundaries:Range._createIn(Le),startPosition:t}));for(const Ye of combineWalkers(me,pe)){const nt=Ye.walker==me?"elementEnd":"elementStart",ot=Ye.value;if(ot.type==nt&&this.isObject(ot.item))return Range._createOn(ot.item);if(this.checkChild(ot.nextPosition,"$text"))return new Range(ot.nextPosition)}return null}findAllowedParent(t,N){let me=t.parent;for(;me;){if(this.checkChild(me,N))return me;if(this.isLimit(me))return null;me=me.parent}return null}setAllowedAttributes(t,N,me){const pe=me.model;for(const[Le,Ye]of Object.entries(N))pe.schema.checkAttribute(t,Le)&&me.setAttribute(Le,Ye,t)}removeDisallowedAttributes(t,N){for(const me of t)if(me.is("$text"))removeDisallowedAttributeFromNode(this,me,N);else{const Le=Range._createIn(me).getPositions();for(const Ye of Le){const nt=Ye.nodeBefore||Ye.parent;removeDisallowedAttributeFromNode(this,nt,N)}}}getAttributesWithProperty(t,N,me){const pe={};for(const[Le,Ye]of t.getAttributes()){const nt=this.getAttributeProperties(Le);nt[N]!==void 0&&(me===void 0||me===nt[N])&&(pe[Le]=Ye)}return pe}createContext(t){return new SchemaContext(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},N=this._sourceDefinitions,me=Object.keys(N);for(const Le of me)t[Le]=compileBaseItemRule(N[Le],Le);const pe=Object.values(t);for(const Le of pe)propagateAllowIn(t,Le),propagateAllowChildren(t,Le),propagateDisallowIn(t,Le),propagateDisallowChildren(t,Le);for(const Le of pe)resolveDisallows(t,Le);for(const Le of pe)compileAllowContentOf(t,Le);for(const Le of pe)compileAllowWhere(t,Le);for(const Le of pe)compileAllowAttributesOf(t,Le);for(const Le of pe)compileInheritPropertiesFrom(t,Le);this._compiledDefinitions=compileDefinitions(t)}_checkContextMatch(t,N){const me=t.last;let pe=this._evaluateChildChecks(t,N);if(pe=pe!==void 0?pe:N.allowIn.includes(me.name),!pe)return!1;const Le=this.getDefinition(me),Ye=t.trimLast();return Le?Ye.length==0?!0:this._checkContextMatch(Ye,Le):!1}_evaluateChildChecks(t,N){const me=this._customChildChecks.get(this._genericCheckSymbol)||[],pe=this._customChildChecks.get(N.name)||[];for(const Le of[...me,...pe]){const Ye=Le(t,N);if(Ye!==void 0)return Ye}}_evaluateAttributeChecks(t,N){const me=this._customAttributeChecks.get(this._genericCheckSymbol)||[],pe=this._customAttributeChecks.get(N)||[];for(const Le of[...me,...pe]){const Ye=Le(t,N);if(Ye!==void 0)return Ye}}*_getValidRangesForRange(t,N){let me=t.start,pe=t.start;for(const Le of t.getItems({shallow:!0}))Le.is("element")&&(yield*this._getValidRangesForRange(Range._createIn(Le),N)),this.checkAttribute(Le,N)||(me.isEqual(pe)||(yield new Range(me,pe)),me=Position._createAfter(Le)),pe=Position._createAfter(Le);me.isEqual(pe)||(yield new Range(me,pe))}findOptimalInsertionRange(t,N){const me=t.getSelectedElement();if(me&&this.isObject(me)&&!this.isInline(me))return N=="before"||N=="after"?new Range(Position._createAt(me,N)):Range._createOn(me);const pe=first(t.getSelectedBlocks());if(!pe)return new Range(t.focus);if(pe.isEmpty)return new Range(Position._createAt(pe,0));const Le=Position._createAfter(pe);return t.focus.isTouching(Le)?new Range(Le):new Range(Position._createBefore(pe))}}class SchemaContext{constructor(u){xt(this,"_items");if(u instanceof SchemaContext)return u;let t;typeof u=="string"?t=[u]:Array.isArray(u)?t=u:t=u.getAncestors({includeSelf:!0}),this._items=t.map(mapContextItem)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(u){const t=new SchemaContext([u]);return t._items=[...this._items,...t._items],t}trimLast(){const u=new SchemaContext([]);return u._items=this._items.slice(0,-1),u}getItem(u){return this._items[u]}*getNames(){yield*this._items.map(u=>u.name)}endsWith(u){return Array.from(this.getNames()).join(" ").endsWith(u)}startsWith(u){return Array.from(this.getNames()).join(" ").startsWith(u)}}function compileBaseItemRule(de,u){const t={name:u,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return copyTypes(de,t),copyProperty(de,t,"allowIn"),copyProperty(de,t,"allowChildren"),copyProperty(de,t,"disallowIn"),copyProperty(de,t,"disallowChildren"),copyProperty(de,t,"allowContentOf"),copyProperty(de,t,"allowWhere"),copyProperty(de,t,"allowAttributes"),copyProperty(de,t,"disallowAttributes"),copyProperty(de,t,"allowAttributesOf"),copyProperty(de,t,"inheritTypesFrom"),resolveInheritAll(de,t),t}function propagateAllowIn(de,u){for(const t of u.allowIn){const N=de[t];N?N.allowChildren.add(u.name):u.allowIn.delete(t)}}function propagateAllowChildren(de,u){for(const t of u.allowChildren){const N=de[t];N?N.allowIn.add(u.name):u.allowChildren.delete(t)}}function propagateDisallowIn(de,u){for(const t of u.disallowIn){const N=de[t];N?N.disallowChildren.add(u.name):u.disallowIn.delete(t)}}function propagateDisallowChildren(de,u){for(const t of u.disallowChildren){const N=de[t];N?N.disallowIn.add(u.name):u.disallowChildren.delete(t)}}function resolveDisallows(de,u){for(const t of u.disallowChildren)u.allowChildren.delete(t);for(const t of u.disallowIn)u.allowIn.delete(t);for(const t of u.disallowAttributes)u.allowAttributes.delete(t)}function compileAllowContentOf(de,u){for(const t of u.allowContentOf){const N=de[t];N&&(N.disallowChildren.forEach(me=>{u.allowChildren.has(me)||(u.disallowChildren.add(me),de[me].disallowIn.add(u.name))}),N.allowChildren.forEach(me=>{u.disallowChildren.has(me)||(u.allowChildren.add(me),de[me].allowIn.add(u.name))}))}}function compileAllowWhere(de,u){for(const t of u.allowWhere){const N=de[t];N&&(N.disallowIn.forEach(me=>{u.allowIn.has(me)||(u.disallowIn.add(me),de[me].disallowChildren.add(u.name))}),N.allowIn.forEach(me=>{u.disallowIn.has(me)||(u.allowIn.add(me),de[me].allowChildren.add(u.name))}))}}function compileDefinitions(de){const u={};for(const t of Object.values(de))u[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(N=>!!de[N]),allowChildren:Array.from(t.allowChildren).filter(N=>!!de[N]),allowAttributes:Array.from(t.allowAttributes)};return u}function compileAllowAttributesOf(de,u){for(const t of u.allowAttributesOf){const N=de[t];if(!N)return;N.allowAttributes.forEach(me=>{u.disallowAttributes.has(me)||u.allowAttributes.add(me)})}}function compileInheritPropertiesFrom(de,u){for(const t of u.inheritTypesFrom){const N=de[t];if(N){const me=Object.keys(N).filter(pe=>pe.startsWith("is"));for(const pe of me)pe in u||(u[pe]=N[pe])}}}function copyTypes(de,u){for(const t of de){const N=Object.keys(t).filter(me=>me.startsWith("is"));for(const me of N)u[me]=!!t[me]}}function copyProperty(de,u,t){for(const N of de){let me=N[t];typeof me=="string"&&(me=[me]),Array.isArray(me)&&me.forEach(pe=>u[t].add(pe))}}function resolveInheritAll(de,u){for(const t of de){const N=t.inheritAllFrom;N&&(u.allowContentOf.add(N),u.allowWhere.add(N),u.allowAttributesOf.add(N),u.inheritTypesFrom.add(N))}}function mapContextItem(de){return typeof de=="string"||de.is("documentFragment")?{name:typeof de=="string"?de:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:de.is("element")?de.name:"$text",*getAttributeKeys(){yield*de.getAttributeKeys()},getAttribute(u){return de.getAttribute(u)}}}function*combineWalkers(de,u){let t=!1;for(;!t;){if(t=!0,de){const N=de.next();N.done||(t=!1,yield{walker:de,value:N.value})}if(u){const N=u.next();N.done||(t=!1,yield{walker:u,value:N.value})}}}function*convertToMinimalFlatRanges(de){for(const u of de)yield*u.getMinimalFlatRanges()}function removeDisallowedAttributeFromNode(de,u,t){for(const N of u.getAttributeKeys())de.checkAttribute(u,N)||t.removeAttribute(N,u)}class UpcastDispatcher extends EmitterMixin(){constructor(t){super();xt(this,"conversionApi");xt(this,"_splitParts",new Map);xt(this,"_cursorParents",new Map);xt(this,"_modelCursor",null);xt(this,"_emptyElementsToKeep",new Set);this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(N,me)=>this._convertItem(N,me),convertChildren:(N,me)=>this._convertChildren(N,me),safeInsert:(N,me)=>this._safeInsert(N,me),updateConversionResult:(N,me)=>this._updateConversionResult(N,me),splitToAllowedParent:(N,me)=>this._splitToAllowedParent(N,me),getSplitParts:N=>this._getSplitParts(N),keepEmptyElement:N=>this._keepEmptyElement(N)}}convert(t,N,me=["$root"]){this.fire("viewCleanup",t),this._modelCursor=createContextTree(me,N),this.conversionApi.writer=N,this.conversionApi.consumable=ViewConsumable.createFrom(t),this.conversionApi.store={};const{modelRange:pe}=this._convertItem(t,this._modelCursor),Le=N.createDocumentFragment();if(pe){this._removeEmptyElements();const Ye=this._modelCursor.parent,nt=Ye._removeChildren(0,Ye.childCount);Le._insertChild(0,nt),Le.markers=extractMarkersFromModelFragment(Le,N)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,Le}_convertItem(t,N){const me={viewItem:t,modelCursor:N,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,me,this.conversionApi):t.is("$text")?this.fire("text",me,this.conversionApi):this.fire("documentFragment",me,this.conversionApi),me.modelRange&&!(me.modelRange instanceof Range))throw new CKEditorError("view-conversion-dispatcher-incorrect-result",this);return{modelRange:me.modelRange,modelCursor:me.modelCursor}}_convertChildren(t,N){let me=N.is("position")?N:Position._createAt(N,0);const pe=new Range(me);for(const Le of Array.from(t.getChildren())){const Ye=this._convertItem(Le,me);Ye.modelRange instanceof Range&&(pe.end=Ye.modelRange.end,me=Ye.modelCursor)}return{modelRange:pe,modelCursor:me}}_safeInsert(t,N){const me=this._splitToAllowedParent(t,N);return me?(this.conversionApi.writer.insert(t,me.position),!0):!1}_updateConversionResult(t,N){const me=this._getSplitParts(t),pe=this.conversionApi.writer;N.modelRange||(N.modelRange=pe.createRange(pe.createPositionBefore(t),pe.createPositionAfter(me[me.length-1])));const Le=this._cursorParents.get(t);Le?N.modelCursor=pe.createPositionAt(Le,0):N.modelCursor=N.modelRange.end}_splitToAllowedParent(t,N){const{schema:me,writer:pe}=this.conversionApi;let Le=me.findAllowedParent(N,t);if(Le){if(Le===N.parent)return{position:N};this._modelCursor.parent.getAncestors().includes(Le)&&(Le=null)}if(!Le)return isParagraphable(N,t,me)?{position:wrapInParagraph(N,pe)}:null;const Ye=this.conversionApi.writer.split(N,Le),nt=[];for(const ft of Ye.range.getWalker())if(ft.type=="elementEnd")nt.push(ft.item);else{const mt=nt.pop(),bt=ft.item;this._registerSplitPair(mt,bt)}const ot=Ye.range.end.parent;return this._cursorParents.set(t,ot),{position:Ye.position,cursorParent:ot}}_registerSplitPair(t,N){this._splitParts.has(t)||this._splitParts.set(t,[t]);const me=this._splitParts.get(t);this._splitParts.set(N,me),me.push(N)}_getSplitParts(t){let N;return this._splitParts.has(t)?N=this._splitParts.get(t):N=[t],N}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){const t=new Map;for(const N of this._splitParts.keys())if(N.isEmpty&&!this._emptyElementsToKeep.has(N)){const me=t.get(N.parent)||[];me.push(N),this._splitParts.delete(N),t.set(N.parent,me)}for(const[N,me]of t)N._removeChildrenArray(me);t.size&&this._removeEmptyElements()}}function extractMarkersFromModelFragment(de,u){const t=new Set,N=new Map,me=Range._createIn(de).getItems();for(const pe of me)pe.is("element","$marker")&&t.add(pe);for(const pe of t){const Le=pe.getAttribute("data-name"),Ye=u.createPositionBefore(pe);N.has(Le)?N.get(Le).end=Ye.clone():N.set(Le,new Range(Ye.clone())),u.remove(pe)}return N}function createContextTree(de,u){let t;for(const N of new SchemaContext(de)){const me={};for(const Le of N.getAttributeKeys())me[Le]=N.getAttribute(Le);const pe=u.createElement(N.name,me);t&&u.insert(pe,t),t=Position._createAt(pe,0)}return t}class BasicHtmlWriter{getHtml(u){const N=global$1.document.implementation.createHTMLDocument("").createElement("div");return N.appendChild(u),N.innerHTML}}class HtmlDataProcessor{constructor(u){xt(this,"domParser");xt(this,"domConverter");xt(this,"htmlWriter");xt(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new DomConverter(u,{renderingMode:"data"}),this.htmlWriter=new BasicHtmlWriter}toData(u){const t=this.domConverter.viewToDom(u);return this.htmlWriter.getHtml(t)}toView(u){const t=this._toDom(u);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(u){this.domConverter.registerRawContentMatcher(u)}useFillerType(u){this.domConverter.blockFillerMode=u=="marked"?"markedNbsp":"nbsp"}_toDom(u){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(u.trim().slice(0,1e4))||(u=`<body>${u}</body>`);const t=this.domParser.parseFromString(u,"text/html"),N=t.createDocumentFragment(),me=t.body.childNodes;for(;me.length>0;)N.appendChild(me[0]);return N}}class DataController extends EmitterMixin(){constructor(t,N){super();xt(this,"model");xt(this,"mapper");xt(this,"downcastDispatcher");xt(this,"upcastDispatcher");xt(this,"viewDocument");xt(this,"stylesProcessor");xt(this,"htmlProcessor");xt(this,"processor");xt(this,"_viewWriter");this.model=t,this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.upcastDispatcher=new UpcastDispatcher({schema:t.schema}),this.viewDocument=new Document$1(N),this.stylesProcessor=N,this.htmlProcessor=new HtmlDataProcessor(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new DowncastWriter(this.viewDocument),this.upcastDispatcher.on("text",convertText(),{priority:"lowest"}),this.upcastDispatcher.on("element",convertToModelFragment$1(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",convertToModelFragment$1(),{priority:"lowest"}),ObservableMixin().prototype.decorate.call(this,"init"),ObservableMixin().prototype.decorate.call(this,"set"),ObservableMixin().prototype.decorate.call(this,"get"),ObservableMixin().prototype.decorate.call(this,"toView"),ObservableMixin().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},autoParagraphEmptyRoots)},{priority:"lowest"})}get(t={}){const{rootName:N="main",trim:me="empty"}=t;if(!this._checkIfRootsExists([N]))throw new CKEditorError("datacontroller-get-non-existent-root",this);const pe=this.model.document.getRoot(N);return pe.isAttached()||logWarning("datacontroller-get-detached-root",this),me==="empty"&&!this.model.hasContent(pe,{ignoreWhitespaces:!0})?"":this.stringify(pe,t)}stringify(t,N={}){const me=this.toView(t,N);return this.processor.toData(me)}toView(t,N={}){const me=this.viewDocument,pe=this._viewWriter;this.mapper.clearBindings();const Le=Range._createIn(t),Ye=new DocumentFragment$1(me);this.mapper.bindElements(t,Ye);const nt=t.is("documentFragment")?t.markers:_getMarkersRelativeToElement(t);return this.downcastDispatcher.convert(Le,nt,pe,N),Ye}init(t){if(this.model.document.version)throw new CKEditorError("datacontroller-init-document-not-empty",this);let N={};if(typeof t=="string"?N.main=t:N=t,!this._checkIfRootsExists(Object.keys(N)))throw new CKEditorError("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},me=>{for(const pe of Object.keys(N)){const Le=this.model.document.getRoot(pe);me.insert(this.parse(N[pe],Le),Le,0)}}),Promise.resolve()}set(t,N={}){let me={};if(typeof t=="string"?me.main=t:me=t,!this._checkIfRootsExists(Object.keys(me)))throw new CKEditorError("datacontroller-set-non-existent-root",this);this.model.enqueueChange(N.batchType||{},pe=>{pe.setSelection(null),pe.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const Le of Object.keys(me)){const Ye=this.model.document.getRoot(Le);pe.remove(pe.createRangeIn(Ye)),pe.insert(this.parse(me[Le],Ye),Ye,0)}})}parse(t,N="$root"){const me=this.processor.toView(t);return this.toModel(me,N)}toModel(t,N="$root"){return this.model.change(me=>this.upcastDispatcher.convert(t,me,N))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const N of t)if(!this.model.document.getRoot(N))return!1;return!0}}function _getMarkersRelativeToElement(de){const u=[],t=de.root.document;if(!t)return new Map;const N=Range._createIn(de);for(const me of t.model.markers){const pe=me.getRange(),Le=pe.isCollapsed,Ye=pe.start.isEqual(N.start)||pe.end.isEqual(N.end);if(Le&&Ye)u.push([me.name,pe]);else{const nt=N.getIntersection(pe);nt&&u.push([me.name,nt])}}return u.sort(([me,pe],[Le,Ye])=>{if(pe.end.compareWith(Ye.start)!=="after")return 1;if(pe.start.compareWith(Ye.end)!=="before")return-1;switch(pe.start.compareWith(Ye.start)){case"before":return 1;case"after":return-1;default:switch(pe.end.compareWith(Ye.end)){case"before":return 1;case"after":return-1;default:return Le.localeCompare(me)}}}),new Map(u)}class Conversion{constructor(u,t){xt(this,"_helpers",new Map);xt(this,"_downcast");xt(this,"_upcast");this._downcast=toArray$2(u),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=toArray$2(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(u,t){const N=this._downcast.includes(t);if(!this._upcast.includes(t)&&!N)throw new CKEditorError("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:u,dispatchers:[t],isDowncast:N})}for(u){if(!this._helpers.has(u))throw new CKEditorError("conversion-for-unknown-group",this);return this._helpers.get(u)}elementToElement(u){this.for("downcast").elementToElement(u);for(const{model:t,view:N}of _getAllUpcastDefinitions(u))this.for("upcast").elementToElement({model:t,view:N,converterPriority:u.converterPriority})}attributeToElement(u){this.for("downcast").attributeToElement(u);for(const{model:t,view:N}of _getAllUpcastDefinitions(u))this.for("upcast").elementToAttribute({view:N,model:t,converterPriority:u.converterPriority})}attributeToAttribute(u){this.for("downcast").attributeToAttribute(u);for(const{model:t,view:N}of _getAllUpcastDefinitions(u))this.for("upcast").attributeToAttribute({view:N,model:t})}_createConversionHelpers({name:u,dispatchers:t,isDowncast:N}){if(this._helpers.has(u))throw new CKEditorError("conversion-group-exists",this);const me=N?new DowncastHelpers(t):new UpcastHelpers(t);this._helpers.set(u,me)}}function*_getAllUpcastDefinitions(de){if(de.model.values)for(const u of de.model.values){const t={key:de.model.key,value:u},N=de.view[u],me=de.upcastAlso?de.upcastAlso[u]:void 0;yield*_getUpcastDefinition(t,N,me)}else yield*_getUpcastDefinition(de.model,de.view,de.upcastAlso)}function*_getUpcastDefinition(de,u,t){if(yield{model:de,view:u},t)for(const N of toArray$2(t))yield{model:de,view:N}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Operation{constructor(u){xt(this,"baseVersion");xt(this,"isDocumentOperation");xt(this,"batch");this.baseVersion=u,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const u=Object.assign({},this);return u.__className=this.constructor.className,delete u.batch,delete u.isDocumentOperation,u}static get className(){return"Operation"}static fromJSON(u,t){return new this(u.baseVersion)}}function _insert(de,u){const t=_normalizeNodes(u),N=t.reduce((Le,Ye)=>Le+Ye.offsetSize,0),me=de.parent;_splitNodeAtPosition(de);const pe=de.index;return me._insertChild(pe,t),_mergeNodesAtIndex(me,pe+t.length),_mergeNodesAtIndex(me,pe),new Range(de,de.getShiftedBy(N))}function _remove(de){if(!de.isFlat)throw new CKEditorError("operation-utils-remove-range-not-flat",this);const u=de.start.parent;_splitNodeAtPosition(de.start),_splitNodeAtPosition(de.end);const t=u._removeChildren(de.start.index,de.end.index-de.start.index);return _mergeNodesAtIndex(u,de.start.index),t}function _move(de,u){if(!de.isFlat)throw new CKEditorError("operation-utils-move-range-not-flat",this);const t=_remove(de);return u=u._getTransformedByDeletion(de.start,de.end.offset-de.start.offset),_insert(u,t)}function _setAttribute(de,u,t){_splitNodeAtPosition(de.start),_splitNodeAtPosition(de.end);for(const N of de.getItems({shallow:!0})){const me=N.is("$textProxy")?N.textNode:N;t!==null?me._setAttribute(u,t):me._removeAttribute(u),_mergeNodesAtIndex(me.parent,me.index)}_mergeNodesAtIndex(de.end.parent,de.end.index)}function _normalizeNodes(de){const u=[];function t(N){if(typeof N=="string")u.push(new Text(N));else if(N instanceof TextProxy)u.push(new Text(N.data,N.getAttributes()));else if(N instanceof Node$1)u.push(N);else if(isIterable(N))for(const me of N)t(me)}t(de);for(let N=1;N<u.length;N++){const me=u[N],pe=u[N-1];me instanceof Text&&pe instanceof Text&&_haveSameAttributes(me,pe)&&(u.splice(N-1,2,new Text(pe.data+me.data,pe.getAttributes())),N--)}return u}function _mergeNodesAtIndex(de,u){const t=de.getChild(u-1),N=de.getChild(u);if(t&&N&&t.is("$text")&&N.is("$text")&&_haveSameAttributes(t,N)){const me=new Text(t.data+N.data,t.getAttributes());de._removeChildren(u-1,2),de._insertChild(u-1,me)}}function _splitNodeAtPosition(de){const u=de.textNode,t=de.parent;if(u){const N=de.offset-u.startOffset,me=u.index;t._removeChildren(me,1);const pe=new Text(u.data.substr(0,N),u.getAttributes()),Le=new Text(u.data.substr(N),u.getAttributes());t._insertChild(me,[pe,Le])}}function _haveSameAttributes(de,u){const t=de.getAttributes(),N=u.getAttributes();for(const me of t){if(me[1]!==u.getAttribute(me[0]))return!1;N.next()}return N.next().done}class MoveOperation extends Operation{constructor(t,N,me,pe){super(pe);xt(this,"sourcePosition");xt(this,"howMany");xt(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=N,this.targetPosition=me.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Range._createFromPositionAndShift(this.sourcePosition,this.howMany),Range._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new MoveOperation(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new MoveOperation(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,N=this.targetPosition.parent,me=this.sourcePosition.offset,pe=this.targetPosition.offset;if(me+this.howMany>t.maxOffset)throw new CKEditorError("move-operation-nodes-do-not-exist",this);if(t===N&&me<pe&&pe<me+this.howMany)throw new CKEditorError("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&compareArrays(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const Le=this.sourcePosition.path.length-1;if(this.targetPosition.path[Le]>=me&&this.targetPosition.path[Le]<me+this.howMany)throw new CKEditorError("move-operation-node-into-itself",this)}}_execute(){_move(Range._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,N){const me=Position.fromJSON(t.sourcePosition,N),pe=Position.fromJSON(t.targetPosition,N);return new this(me,t.howMany,pe,t.baseVersion)}}class InsertOperation extends Operation{constructor(t,N,me){super(me);xt(this,"position");xt(this,"nodes");xt(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new NodeList(_normalizeNodes(N)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new NodeList([...this.nodes].map(me=>me._clone(!0))),N=new InsertOperation(this.position,t,this.baseVersion);return N.shouldReceiveAttributes=this.shouldReceiveAttributes,N}getReversed(){const t=this.position.root.document.graveyard,N=new Position(t,[0]);return new MoveOperation(this.position,this.nodes.maxOffset,N,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new CKEditorError("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new NodeList([...t].map(N=>N._clone(!0))),_insert(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,N){const me=[];for(const Le of t.nodes)Le.name?me.push(Element.fromJSON(Le)):me.push(Text.fromJSON(Le));const pe=new InsertOperation(Position.fromJSON(t.position,N),me,t.baseVersion);return pe.shouldReceiveAttributes=t.shouldReceiveAttributes,pe}}class SplitOperation extends Operation{constructor(t,N,me,pe,Le){super(Le);xt(this,"splitPosition");xt(this,"howMany");xt(this,"insertionPosition");xt(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=N,this.insertionPosition=me,this.graveyardPosition=pe?pe.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Position(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.splitPosition,t)}get affectedSelectable(){const t=[Range._createFromPositionAndShift(this.splitPosition,0),Range._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Range._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new SplitOperation(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,N=new Position(t,[0]);return new MergeOperation(this.moveTargetPosition,this.howMany,this.splitPosition,N,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,N=this.splitPosition.offset;if(!t||t.maxOffset<N)throw new CKEditorError("split-operation-position-invalid",this);if(t.parent){if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new CKEditorError("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new CKEditorError("split-operation-graveyard-position-invalid",this)}else throw new CKEditorError("split-operation-split-in-root",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)_move(Range._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const me=t._clone();_insert(this.insertionPosition,me)}const N=new Range(Position._createAt(t,this.splitPosition.offset),Position._createAt(t,t.maxOffset));_move(N,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const N=t.path.slice(0,-1);return N[N.length-1]++,new Position(t.root,N,"toPrevious")}static fromJSON(t,N){const me=Position.fromJSON(t.splitPosition,N),pe=Position.fromJSON(t.insertionPosition,N),Le=t.graveyardPosition?Position.fromJSON(t.graveyardPosition,N):null;return new this(me,t.howMany,pe,Le,t.baseVersion)}}class MergeOperation extends Operation{constructor(t,N,me,pe,Le){super(Le);xt(this,"sourcePosition");xt(this,"howMany");xt(this,"targetPosition");xt(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=N,this.targetPosition=me.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=pe.clone()}get type(){return"merge"}get deletionPosition(){return new Position(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Range._createOn(t),Range._createFromPositionAndShift(this.targetPosition,0),Range._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new MergeOperation(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),N=this.sourcePosition.path.slice(0,-1),me=new Position(this.sourcePosition.root,N)._getTransformedByMergeOperation(this);return new SplitOperation(t,this.howMany,me,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,N=this.targetPosition.parent;if(t.parent)if(N.parent){if(this.howMany!=t.maxOffset)throw new CKEditorError("merge-operation-how-many-invalid",this)}else throw new CKEditorError("merge-operation-target-position-invalid",this);else throw new CKEditorError("merge-operation-source-position-invalid",this)}_execute(){const t=this.sourcePosition.parent,N=Range._createIn(t);_move(N,this.targetPosition),_move(Range._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,N){const me=Position.fromJSON(t.sourcePosition,N),pe=Position.fromJSON(t.targetPosition,N),Le=Position.fromJSON(t.graveyardPosition,N);return new this(me,t.howMany,pe,Le,t.baseVersion)}}class MarkerOperation extends Operation{constructor(t,N,me,pe,Le,Ye){super(Ye);xt(this,"name");xt(this,"oldRange");xt(this,"newRange");xt(this,"affectsData");xt(this,"_markers");this.name=t,this.oldRange=N?N.clone():null,this.newRange=me?me.clone():null,this.affectsData=Le,this._markers=pe}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new MarkerOperation(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new MarkerOperation(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,N){return new MarkerOperation(t.name,t.oldRange?Range.fromJSON(t.oldRange,N):null,t.newRange?Range.fromJSON(t.newRange,N):null,N.model.markers,t.affectsData,t.baseVersion)}}class AttributeOperation extends Operation{constructor(t,N,me,pe,Le){super(Le);xt(this,"range");xt(this,"key");xt(this,"oldValue");xt(this,"newValue");this.range=t.clone(),this.key=N,this.oldValue=me===void 0?null:me,this.newValue=pe===void 0?null:pe}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new AttributeOperation(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new AttributeOperation(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new CKEditorError("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!isEqual(t.getAttribute(this.key),this.oldValue))throw new CKEditorError("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new CKEditorError("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){isEqual(this.oldValue,this.newValue)||_setAttribute(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,N){return new AttributeOperation(Range.fromJSON(t.range,N),t.key,t.oldValue,t.newValue,t.baseVersion)}}class NoOperation extends Operation{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new NoOperation(this.baseVersion)}getReversed(){return new NoOperation(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class RenameOperation extends Operation{constructor(t,N,me,pe){super(pe);xt(this,"position");xt(this,"oldName");xt(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=N,this.newName=me}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new RenameOperation(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new RenameOperation(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof Element){if(t.name!==this.oldName)throw new CKEditorError("rename-operation-wrong-name",this)}else throw new CKEditorError("rename-operation-wrong-position",this)}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,N){return new RenameOperation(Position.fromJSON(t.position,N),t.oldName,t.newName,t.baseVersion)}}class RootAttributeOperation extends Operation{constructor(t,N,me,pe,Le){super(Le);xt(this,"root");xt(this,"key");xt(this,"oldValue");xt(this,"newValue");this.root=t,this.key=N,this.oldValue=me===void 0?null:me,this.newValue=pe===void 0?null:pe}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new RootAttributeOperation(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new RootAttributeOperation(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new CKEditorError("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new CKEditorError("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new CKEditorError("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,N){if(!N.getRoot(t.root))throw new CKEditorError("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new RootAttributeOperation(N.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class RootOperation extends Operation{constructor(t,N,me,pe,Le){super(Le);xt(this,"rootName");xt(this,"elementName");xt(this,"isAdd");xt(this,"_document");if(this.rootName=t,this.elementName=N,this.isAdd=me,this._document=pe,!this._document.getRoot(this.rootName)){const Ye=this._document.createRoot(this.elementName,this.rootName);Ye._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new RootOperation(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new RootOperation(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,N){return new RootOperation(t.rootName,t.elementName,t.isAdd,N,t.baseVersion)}}const operations={};operations[AttributeOperation.className]=AttributeOperation;operations[InsertOperation.className]=InsertOperation;operations[MarkerOperation.className]=MarkerOperation;operations[MoveOperation.className]=MoveOperation;operations[NoOperation.className]=NoOperation;operations[Operation.className]=Operation;operations[RenameOperation.className]=RenameOperation;operations[RootAttributeOperation.className]=RootAttributeOperation;operations[RootOperation.className]=RootOperation;operations[SplitOperation.className]=SplitOperation;operations[MergeOperation.className]=MergeOperation;class OperationFactory{static fromJSON(u,t){return operations[u.__className].fromJSON(u,t)}}const transformations=new Map;function setTransformation(de,u,t){let N=transformations.get(de);N||(N=new Map,transformations.set(de,N)),N.set(u,t)}function getTransformation(de,u){const t=transformations.get(de);return t&&t.has(u)?t.get(u):noUpdateTransformation}function noUpdateTransformation(de){return[de]}function transform$1(de,u,t={}){const N=getTransformation(de.constructor,u.constructor);try{return de=de.clone(),N(de,u,t)}catch(me){throw me}}function transformSets(de,u,t){de=de.slice(),u=u.slice();const N=new ContextFactory(t.document,t.useRelations,t.forceWeakRemove);N.setOriginalOperations(de),N.setOriginalOperations(u);const me=N.originalOperations;if(de.length==0||u.length==0)return{operationsA:de,operationsB:u,originalOperations:me};const pe=new WeakMap;for(const nt of de)pe.set(nt,0);const Le={nextBaseVersionA:de[de.length-1].baseVersion+1,nextBaseVersionB:u[u.length-1].baseVersion+1,originalOperationsACount:de.length,originalOperationsBCount:u.length};let Ye=0;for(;Ye<de.length;){const nt=de[Ye],ot=pe.get(nt);if(ot==u.length){Ye++;continue}const ft=u[ot],mt=transform$1(nt,ft,N.getContext(nt,ft,!0)),bt=transform$1(ft,nt,N.getContext(ft,nt,!1));N.updateRelation(nt,ft),N.setOriginalOperations(mt,nt),N.setOriginalOperations(bt,ft);for(const yt of mt)pe.set(yt,ot+bt.length);de.splice(Ye,1,...mt),u.splice(ot,1,...bt)}return handlePartialMarkerOperations(de),handlePartialMarkerOperations(u),updateBaseVersions(de,Le.nextBaseVersionB),updateBaseVersions(u,Le.nextBaseVersionA),{operationsA:de,operationsB:u,originalOperations:me}}class ContextFactory{constructor(u,t,N=!1){xt(this,"originalOperations");xt(this,"_history");xt(this,"_useRelations");xt(this,"_forceWeakRemove");xt(this,"_relations");this.originalOperations=new Map,this._history=u.history,this._useRelations=t,this._forceWeakRemove=!!N,this._relations=new Map}setOriginalOperations(u,t=null){const N=t?this.originalOperations.get(t):null;for(const me of u)this.originalOperations.set(me,N||me)}updateRelation(u,t){if(u instanceof MoveOperation)t instanceof MergeOperation?u.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(u.targetPosition)?this._setRelation(u,t,"insertAtSource"):u.targetPosition.isEqual(t.deletionPosition)?this._setRelation(u,t,"insertBetween"):u.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(u,t,"moveTargetAfter"):t instanceof MoveOperation&&(u.targetPosition.isEqual(t.sourcePosition)||u.targetPosition.isBefore(t.sourcePosition)?this._setRelation(u,t,"insertBefore"):this._setRelation(u,t,"insertAfter"));else if(u instanceof SplitOperation){if(t instanceof MergeOperation)u.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(u,t,"splitBefore");else if(t instanceof MoveOperation)if(u.splitPosition.isEqual(t.sourcePosition)||u.splitPosition.isBefore(t.sourcePosition))this._setRelation(u,t,"splitBefore");else{const N=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);if(u.splitPosition.hasSameParentAs(t.sourcePosition)&&N.containsPosition(u.splitPosition)){const me=N.end.offset-u.splitPosition.offset,pe=u.splitPosition.offset-N.start.offset;this._setRelation(u,t,{howMany:me,offset:pe})}}}else if(u instanceof MergeOperation)t instanceof MergeOperation?(u.targetPosition.isEqual(t.sourcePosition)||this._setRelation(u,t,"mergeTargetNotMoved"),u.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(u,t,"mergeSourceNotMoved"),u.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(u,t,"mergeSameElement")):t instanceof SplitOperation?u.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(u,t,"splitAtSource"):t instanceof MoveOperation&&t.howMany>0&&(u.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(u,t,"mergeSourceAffected"),u.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(u,t,"mergeTargetWasBefore"));else if(u instanceof MarkerOperation){const N=u.newRange;if(!N)return;if(t instanceof MergeOperation){const me=N.start.isEqual(t.targetPosition),pe=N.start.isEqual(t.deletionPosition),Le=N.end.isEqual(t.deletionPosition),Ye=N.end.isEqual(t.sourcePosition);(me||pe||Le||Ye)&&this._setRelation(u,t,{wasInLeftElement:me,wasStartBeforeMergedElement:pe,wasEndBeforeMergedElement:Le,wasInRightElement:Ye})}}}getContext(u,t,N){return{aIsStrong:N,aWasUndone:this._wasUndone(u),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(u,t):null,baRelation:this._useRelations?this._getRelation(t,u):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(u){const t=this.originalOperations.get(u);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(u,t){const N=this.originalOperations.get(t),me=this._history.getUndoneOperation(N);if(!me)return null;const pe=this.originalOperations.get(u),Le=this._relations.get(pe);return Le&&Le.get(me)||null}_setRelation(u,t,N){const me=this.originalOperations.get(u),pe=this.originalOperations.get(t);let Le=this._relations.get(me);Le||(Le=new Map,this._relations.set(me,Le)),Le.set(pe,N)}}function updateBaseVersions(de,u){for(const t of de)t.baseVersion=u++}function handlePartialMarkerOperations(de){const u=new Map;for(let t=0;t<de.length;t++){const N=de[t];N instanceof MarkerOperation&&(N.baseVersion!==-1?u.set(N.name,{op:N,ranges:N.newRange?[N.newRange]:[]}):(N.newRange&&u.get(N.name).ranges.push(N.newRange),de.splice(t,1),t--))}for(const{op:t,ranges:N}of u.values())N.length?t.newRange=Range._createFromRanges(N):t.newRange=null}setTransformation(AttributeOperation,AttributeOperation,(de,u,t)=>{if(de.key===u.key&&de.range.start.hasSameParentAs(u.range.start)){const N=de.range.getDifference(u.range).map(pe=>new AttributeOperation(pe,de.key,de.oldValue,de.newValue,0)),me=de.range.getIntersection(u.range);return me&&t.aIsStrong&&N.push(new AttributeOperation(me,u.key,u.newValue,de.newValue,0)),N.length==0?[new NoOperation(0)]:N}else return[de]});setTransformation(AttributeOperation,InsertOperation,(de,u)=>{if(de.range.start.hasSameParentAs(u.position)&&de.range.containsPosition(u.position)){const N=de.range._getTransformedByInsertion(u.position,u.howMany,!u.shouldReceiveAttributes).map(me=>new AttributeOperation(me,de.key,de.oldValue,de.newValue,de.baseVersion));if(u.shouldReceiveAttributes){const me=_getComplementaryAttributeOperations(u,de.key,de.oldValue);me&&N.unshift(me)}return N}return de.range=de.range._getTransformedByInsertion(u.position,u.howMany,!1)[0],[de]});function _getComplementaryAttributeOperations(de,u,t){const me=de.nodes.getNode(0).getAttribute(u);if(me==t)return null;const pe=new Range(de.position,de.position.getShiftedBy(de.howMany));return new AttributeOperation(pe,u,me,t,0)}setTransformation(AttributeOperation,MergeOperation,(de,u)=>{const t=[];de.range.start.hasSameParentAs(u.deletionPosition)&&(de.range.containsPosition(u.deletionPosition)||de.range.start.isEqual(u.deletionPosition))&&t.push(Range._createFromPositionAndShift(u.graveyardPosition,1));const N=de.range._getTransformedByMergeOperation(u);return N.isCollapsed||t.push(N),t.map(me=>new AttributeOperation(me,de.key,de.oldValue,de.newValue,de.baseVersion))});setTransformation(AttributeOperation,MoveOperation,(de,u)=>_breakRangeByMoveOperation(de.range,u).map(N=>new AttributeOperation(N,de.key,de.oldValue,de.newValue,de.baseVersion)));function _breakRangeByMoveOperation(de,u){const t=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);let N=null,me=[];t.containsRange(de,!0)?N=de:de.start.hasSameParentAs(t.start)?(me=de.getDifference(t),N=de.getIntersection(t)):me=[de];const pe=[];for(let Le of me){Le=Le._getTransformedByDeletion(u.sourcePosition,u.howMany);const Ye=u.getMovedRangeStart(),nt=Le.start.hasSameParentAs(Ye),ot=Le._getTransformedByInsertion(Ye,u.howMany,nt);pe.push(...ot)}return N&&pe.push(N._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany,!1)[0]),pe}setTransformation(AttributeOperation,SplitOperation,(de,u)=>{if(de.range.end.isEqual(u.insertionPosition))return u.graveyardPosition||de.range.end.offset++,[de];if(de.range.start.hasSameParentAs(u.splitPosition)&&de.range.containsPosition(u.splitPosition)){const t=de.clone();return t.range=new Range(u.moveTargetPosition.clone(),de.range.end._getCombined(u.splitPosition,u.moveTargetPosition)),de.range.end=u.splitPosition.clone(),de.range.end.stickiness="toPrevious",[de,t]}return de.range=de.range._getTransformedBySplitOperation(u),[de]});setTransformation(InsertOperation,AttributeOperation,(de,u)=>{const t=[de];if(de.shouldReceiveAttributes&&de.position.hasSameParentAs(u.range.start)&&u.range.containsPosition(de.position)){const N=_getComplementaryAttributeOperations(de,u.key,u.newValue);N&&t.push(N)}return t});setTransformation(InsertOperation,InsertOperation,(de,u,t)=>de.position.isEqual(u.position)&&t.aIsStrong?[de]:(de.position=de.position._getTransformedByInsertOperation(u),[de]));setTransformation(InsertOperation,MoveOperation,(de,u)=>(de.position=de.position._getTransformedByMoveOperation(u),[de]));setTransformation(InsertOperation,SplitOperation,(de,u)=>(de.position=de.position._getTransformedBySplitOperation(u),[de]));setTransformation(InsertOperation,MergeOperation,(de,u)=>(de.position=de.position._getTransformedByMergeOperation(u),[de]));setTransformation(MarkerOperation,InsertOperation,(de,u)=>(de.oldRange&&(de.oldRange=de.oldRange._getTransformedByInsertOperation(u)[0]),de.newRange&&(de.newRange=de.newRange._getTransformedByInsertOperation(u)[0]),[de]));setTransformation(MarkerOperation,MarkerOperation,(de,u,t)=>{if(de.name==u.name)if(t.aIsStrong)de.oldRange=u.newRange?u.newRange.clone():null;else return[new NoOperation(0)];return[de]});setTransformation(MarkerOperation,MergeOperation,(de,u)=>(de.oldRange&&(de.oldRange=de.oldRange._getTransformedByMergeOperation(u)),de.newRange&&(de.newRange=de.newRange._getTransformedByMergeOperation(u)),[de]));setTransformation(MarkerOperation,MoveOperation,(de,u)=>{const t=[de];if(de.oldRange&&(de.oldRange=Range._createFromRanges(de.oldRange._getTransformedByMoveOperation(u))),de.newRange){const N=de.newRange._getTransformedByMoveOperation(u);de.newRange=N[0];for(let me=1;me<N.length;me++){const pe=de.clone();pe.oldRange=null,pe.newRange=N[me],pe.baseVersion=-1,t.push(pe)}}return t});setTransformation(MarkerOperation,SplitOperation,(de,u,t)=>{if(de.oldRange&&(de.oldRange=de.oldRange._getTransformedBySplitOperation(u)),de.newRange){if(t.abRelation){const N=de.newRange._getTransformedBySplitOperation(u);return de.newRange.start.isEqual(u.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?de.newRange.start=Position._createAt(u.insertionPosition):de.newRange.start.isEqual(u.splitPosition)&&!t.abRelation.wasInLeftElement?de.newRange.start=Position._createAt(u.moveTargetPosition):de.newRange.start=N.start,de.newRange.end.isEqual(u.splitPosition)&&t.abRelation.wasInRightElement?de.newRange.end=Position._createAt(u.moveTargetPosition):de.newRange.end.isEqual(u.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?de.newRange.end=Position._createAt(u.insertionPosition):de.newRange.end=N.end,[de]}de.newRange=de.newRange._getTransformedBySplitOperation(u)}return[de]});setTransformation(MergeOperation,InsertOperation,(de,u)=>(de.sourcePosition.hasSameParentAs(u.position)&&(de.howMany+=u.howMany),de.sourcePosition=de.sourcePosition._getTransformedByInsertOperation(u),de.targetPosition=de.targetPosition._getTransformedByInsertOperation(u),[de]));setTransformation(MergeOperation,MergeOperation,(de,u,t)=>{if(de.sourcePosition.isEqual(u.sourcePosition)&&de.targetPosition.isEqual(u.targetPosition))if(t.bWasUndone){const N=u.graveyardPosition.path.slice();return N.push(0),de.sourcePosition=new Position(u.graveyardPosition.root,N),de.howMany=0,[de]}else return[new NoOperation(0)];if(de.sourcePosition.isEqual(u.sourcePosition)&&!de.targetPosition.isEqual(u.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const N=de.targetPosition.root.rootName=="$graveyard",me=u.targetPosition.root.rootName=="$graveyard";if(me&&!N||!(N&&!me)&&t.aIsStrong){const nt=u.targetPosition._getTransformedByMergeOperation(u),ot=de.targetPosition._getTransformedByMergeOperation(u);return[new MoveOperation(nt,de.howMany,ot,0)]}else return[new NoOperation(0)]}return de.sourcePosition.hasSameParentAs(u.targetPosition)&&(de.howMany+=u.howMany),de.sourcePosition=de.sourcePosition._getTransformedByMergeOperation(u),de.targetPosition=de.targetPosition._getTransformedByMergeOperation(u),(!de.graveyardPosition.isEqual(u.graveyardPosition)||!t.aIsStrong)&&(de.graveyardPosition=de.graveyardPosition._getTransformedByMergeOperation(u)),[de]});setTransformation(MergeOperation,MoveOperation,(de,u,t)=>{const N=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);return u.type=="remove"&&!t.bWasUndone&&de.deletionPosition.hasSameParentAs(u.sourcePosition)&&N.containsPosition(de.sourcePosition)?[new NoOperation(0)]:(u.sourcePosition.getShiftedBy(u.howMany).isEqual(de.sourcePosition)?de.sourcePosition.stickiness="toNone":u.targetPosition.isEqual(de.sourcePosition)&&t.abRelation=="mergeSourceAffected"?de.sourcePosition.stickiness="toNext":u.sourcePosition.isEqual(de.targetPosition)?(de.targetPosition.stickiness="toNone",de.howMany-=u.howMany):u.targetPosition.isEqual(de.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(de.targetPosition.stickiness="toPrevious",de.howMany+=u.howMany):(de.sourcePosition.hasSameParentAs(u.targetPosition)&&(de.howMany+=u.howMany),de.sourcePosition.hasSameParentAs(u.sourcePosition)&&(de.howMany-=u.howMany)),de.sourcePosition=de.sourcePosition._getTransformedByMoveOperation(u),de.targetPosition=de.targetPosition._getTransformedByMoveOperation(u),de.sourcePosition.stickiness="toPrevious",de.targetPosition.stickiness="toNext",de.graveyardPosition.isEqual(u.targetPosition)||(de.graveyardPosition=de.graveyardPosition._getTransformedByMoveOperation(u)),[de])});setTransformation(MergeOperation,SplitOperation,(de,u,t)=>{if(u.graveyardPosition&&(de.graveyardPosition=de.graveyardPosition._getTransformedByDeletion(u.graveyardPosition,1),de.deletionPosition.isEqual(u.graveyardPosition)&&(de.howMany=u.howMany)),de.targetPosition.isEqual(u.splitPosition)&&(u.graveyardPosition&&de.deletionPosition.isEqual(u.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return de.sourcePosition=de.sourcePosition._getTransformedBySplitOperation(u),[de];if(de.sourcePosition.isEqual(u.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return de.howMany=0,de.targetPosition=de.targetPosition._getTransformedBySplitOperation(u),[de];if(t.abRelation=="mergeSameElement"||de.sourcePosition.offset>0)return de.sourcePosition=u.moveTargetPosition.clone(),de.targetPosition=de.targetPosition._getTransformedBySplitOperation(u),[de]}return de.sourcePosition.hasSameParentAs(u.splitPosition)&&(de.howMany=u.splitPosition.offset),de.sourcePosition=de.sourcePosition._getTransformedBySplitOperation(u),de.targetPosition=de.targetPosition._getTransformedBySplitOperation(u),[de]});setTransformation(MoveOperation,InsertOperation,(de,u)=>{const N=Range._createFromPositionAndShift(de.sourcePosition,de.howMany)._getTransformedByInsertOperation(u,!1)[0];return de.sourcePosition=N.start,de.howMany=N.end.offset-N.start.offset,de.targetPosition.isEqual(u.position)||(de.targetPosition=de.targetPosition._getTransformedByInsertOperation(u)),[de]});setTransformation(MoveOperation,MoveOperation,(de,u,t)=>{const N=Range._createFromPositionAndShift(de.sourcePosition,de.howMany),me=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);let pe=t.aIsStrong,Le=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?Le=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(Le=!1);let Ye;if(de.targetPosition.isEqual(u.targetPosition)&&Le?Ye=de.targetPosition._getTransformedByDeletion(u.sourcePosition,u.howMany):Ye=de.targetPosition._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_moveTargetIntoMovedRange(de,u)&&_moveTargetIntoMovedRange(u,de))return[u.getReversed()];if(N.containsPosition(u.targetPosition)&&N.containsRange(me,!0))return N.start=N.start._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),N.end=N.end._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_makeMoveOperationsFromRanges([N],Ye);if(me.containsPosition(de.targetPosition)&&me.containsRange(N,!0))return N.start=N.start._getCombined(u.sourcePosition,u.getMovedRangeStart()),N.end=N.end._getCombined(u.sourcePosition,u.getMovedRangeStart()),_makeMoveOperationsFromRanges([N],Ye);const ft=compareArrays(de.sourcePosition.getParentPath(),u.sourcePosition.getParentPath());if(ft=="prefix"||ft=="extension")return N.start=N.start._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),N.end=N.end._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany),_makeMoveOperationsFromRanges([N],Ye);de.type=="remove"&&u.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?pe=!0:de.type!="remove"&&u.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(pe=!1);const mt=[],bt=N.getDifference(me);for(const _t of bt){_t.start=_t.start._getTransformedByDeletion(u.sourcePosition,u.howMany),_t.end=_t.end._getTransformedByDeletion(u.sourcePosition,u.howMany);const Ct=compareArrays(_t.start.getParentPath(),u.getMovedRangeStart().getParentPath())=="same",Tt=_t._getTransformedByInsertion(u.getMovedRangeStart(),u.howMany,Ct);mt.push(...Tt)}const yt=N.getIntersection(me);return yt!==null&&pe&&(yt.start=yt.start._getCombined(u.sourcePosition,u.getMovedRangeStart()),yt.end=yt.end._getCombined(u.sourcePosition,u.getMovedRangeStart()),mt.length===0?mt.push(yt):mt.length==1?me.start.isBefore(N.start)||me.start.isEqual(N.start)?mt.unshift(yt):mt.push(yt):mt.splice(1,0,yt)),mt.length===0?[new NoOperation(de.baseVersion)]:_makeMoveOperationsFromRanges(mt,Ye)});setTransformation(MoveOperation,SplitOperation,(de,u,t)=>{let N=de.targetPosition.clone();(!de.targetPosition.isEqual(u.insertionPosition)||!u.graveyardPosition||t.abRelation=="moveTargetAfter")&&(N=de.targetPosition._getTransformedBySplitOperation(u));const me=Range._createFromPositionAndShift(de.sourcePosition,de.howMany);if(me.end.isEqual(u.insertionPosition))return u.graveyardPosition||de.howMany++,de.targetPosition=N,[de];if(me.start.hasSameParentAs(u.splitPosition)&&me.containsPosition(u.splitPosition)){let Ye=new Range(u.splitPosition,me.end);Ye=Ye._getTransformedBySplitOperation(u);const nt=[new Range(me.start,u.splitPosition),Ye];return _makeMoveOperationsFromRanges(nt,N)}de.targetPosition.isEqual(u.splitPosition)&&t.abRelation=="insertAtSource"&&(N=u.moveTargetPosition),de.targetPosition.isEqual(u.insertionPosition)&&t.abRelation=="insertBetween"&&(N=de.targetPosition);const Le=[me._getTransformedBySplitOperation(u)];if(u.graveyardPosition){const Ye=me.start.isEqual(u.graveyardPosition)||me.containsPosition(u.graveyardPosition);de.howMany>1&&Ye&&!t.aWasUndone&&Le.push(Range._createFromPositionAndShift(u.insertionPosition,1))}return _makeMoveOperationsFromRanges(Le,N)});setTransformation(MoveOperation,MergeOperation,(de,u,t)=>{const N=Range._createFromPositionAndShift(de.sourcePosition,de.howMany);if(u.deletionPosition.hasSameParentAs(de.sourcePosition)&&N.containsPosition(u.sourcePosition)){if(de.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const Le=[];let Ye=u.graveyardPosition.clone(),nt=u.targetPosition._getTransformedByMergeOperation(u);const ot=de.targetPosition.getTransformedByOperation(u);de.howMany>1&&(Le.push(new MoveOperation(de.sourcePosition,de.howMany-1,ot,0)),Ye=Ye._getTransformedByMove(de.sourcePosition,ot,de.howMany-1),nt=nt._getTransformedByMove(de.sourcePosition,ot,de.howMany-1));const ft=u.deletionPosition._getCombined(de.sourcePosition,ot),mt=new MoveOperation(Ye,1,ft,0),bt=mt.getMovedRangeStart().path.slice();bt.push(0);const yt=new Position(mt.targetPosition.root,bt);nt=nt._getTransformedByMove(Ye,ft,1);const _t=new MoveOperation(nt,u.howMany,yt,0);return Le.push(mt),Le.push(_t),Le}}else if(de.howMany==1)return t.bWasUndone?(de.sourcePosition=u.graveyardPosition.clone(),de.targetPosition=de.targetPosition._getTransformedByMergeOperation(u),[de]):[new NoOperation(0)]}const pe=Range._createFromPositionAndShift(de.sourcePosition,de.howMany)._getTransformedByMergeOperation(u);return de.sourcePosition=pe.start,de.howMany=pe.end.offset-pe.start.offset,de.targetPosition=de.targetPosition._getTransformedByMergeOperation(u),[de]});setTransformation(RenameOperation,InsertOperation,(de,u)=>(de.position=de.position._getTransformedByInsertOperation(u),[de]));setTransformation(RenameOperation,MergeOperation,(de,u)=>de.position.isEqual(u.deletionPosition)?(de.position=u.graveyardPosition.clone(),de.position.stickiness="toNext",[de]):(de.position=de.position._getTransformedByMergeOperation(u),[de]));setTransformation(RenameOperation,MoveOperation,(de,u)=>(de.position=de.position._getTransformedByMoveOperation(u),[de]));setTransformation(RenameOperation,RenameOperation,(de,u,t)=>{if(de.position.isEqual(u.position))if(t.aIsStrong)de.oldName=u.newName;else return[new NoOperation(0)];return[de]});setTransformation(RenameOperation,SplitOperation,(de,u)=>{const t=de.position.path,N=u.splitPosition.getParentPath();if(compareArrays(t,N)=="same"&&!u.graveyardPosition){const me=new RenameOperation(de.position.getShiftedBy(1),de.oldName,de.newName,0);return[de,me]}return de.position=de.position._getTransformedBySplitOperation(u),[de]});setTransformation(RootAttributeOperation,RootAttributeOperation,(de,u,t)=>{if(de.root===u.root&&de.key===u.key){if(!t.aIsStrong||de.newValue===u.newValue)return[new NoOperation(0)];de.oldValue=u.newValue}return[de]});setTransformation(RootOperation,RootOperation,(de,u)=>de.rootName===u.rootName&&de.isAdd===u.isAdd?[new NoOperation(0)]:[de]);setTransformation(SplitOperation,InsertOperation,(de,u)=>(de.splitPosition.hasSameParentAs(u.position)&&de.splitPosition.offset<u.position.offset&&(de.howMany+=u.howMany),de.splitPosition=de.splitPosition._getTransformedByInsertOperation(u),de.insertionPosition=de.insertionPosition._getTransformedByInsertOperation(u),[de]));setTransformation(SplitOperation,MergeOperation,(de,u,t)=>{if(!de.graveyardPosition&&!t.bWasUndone&&de.splitPosition.hasSameParentAs(u.sourcePosition)){const N=u.graveyardPosition.path.slice();N.push(0);const me=new Position(u.graveyardPosition.root,N),pe=SplitOperation.getInsertionPosition(new Position(u.graveyardPosition.root,N)),Le=new SplitOperation(me,0,pe,null,0);return de.splitPosition=de.splitPosition._getTransformedByMergeOperation(u),de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),de.graveyardPosition=Le.insertionPosition.clone(),de.graveyardPosition.stickiness="toNext",[Le,de]}return de.splitPosition.hasSameParentAs(u.deletionPosition)&&!de.splitPosition.isAfter(u.deletionPosition)&&de.howMany--,de.splitPosition.hasSameParentAs(u.targetPosition)&&(de.howMany+=u.howMany),de.splitPosition=de.splitPosition._getTransformedByMergeOperation(u),de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),de.graveyardPosition&&(de.graveyardPosition=de.graveyardPosition._getTransformedByMergeOperation(u)),[de]});setTransformation(SplitOperation,MoveOperation,(de,u,t)=>{const N=Range._createFromPositionAndShift(u.sourcePosition,u.howMany);if(de.graveyardPosition){const pe=N.start.isEqual(de.graveyardPosition)||N.containsPosition(de.graveyardPosition);if(!t.bWasUndone&&pe){const Le=de.splitPosition._getTransformedByMoveOperation(u),Ye=de.graveyardPosition._getTransformedByMoveOperation(u),nt=Ye.path.slice();nt.push(0);const ot=new Position(Ye.root,nt);return[new MoveOperation(Le,de.howMany,ot,0)]}de.graveyardPosition=de.graveyardPosition._getTransformedByMoveOperation(u)}const me=de.splitPosition.isEqual(u.targetPosition);if(me&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return de.howMany+=u.howMany,de.splitPosition=de.splitPosition._getTransformedByDeletion(u.sourcePosition,u.howMany),de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),[de];if(me&&t.abRelation&&t.abRelation.howMany){const{howMany:pe,offset:Le}=t.abRelation;return de.howMany+=pe,de.splitPosition=de.splitPosition.getShiftedBy(Le),[de]}if(de.splitPosition.hasSameParentAs(u.sourcePosition)&&N.containsPosition(de.splitPosition)){const pe=u.howMany-(de.splitPosition.offset-u.sourcePosition.offset);return de.howMany-=pe,de.splitPosition.hasSameParentAs(u.targetPosition)&&de.splitPosition.offset<u.targetPosition.offset&&(de.howMany+=u.howMany),de.splitPosition=u.sourcePosition.clone(),de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),[de]}return u.sourcePosition.isEqual(u.targetPosition)||(de.splitPosition.hasSameParentAs(u.sourcePosition)&&de.splitPosition.offset<=u.sourcePosition.offset&&(de.howMany-=u.howMany),de.splitPosition.hasSameParentAs(u.targetPosition)&&de.splitPosition.offset<u.targetPosition.offset&&(de.howMany+=u.howMany)),de.splitPosition.stickiness="toNone",de.splitPosition=de.splitPosition._getTransformedByMoveOperation(u),de.splitPosition.stickiness="toNext",de.graveyardPosition?de.insertionPosition=de.insertionPosition._getTransformedByMoveOperation(u):de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),[de]});setTransformation(SplitOperation,SplitOperation,(de,u,t)=>{if(de.splitPosition.isEqual(u.splitPosition)){if(!de.graveyardPosition&&!u.graveyardPosition)return[new NoOperation(0)];if(de.graveyardPosition&&u.graveyardPosition&&de.graveyardPosition.isEqual(u.graveyardPosition))return[new NoOperation(0)];if(t.abRelation=="splitBefore")return de.howMany=0,de.graveyardPosition=de.graveyardPosition._getTransformedBySplitOperation(u),[de]}if(de.graveyardPosition&&u.graveyardPosition&&de.graveyardPosition.isEqual(u.graveyardPosition)){const N=de.splitPosition.root.rootName=="$graveyard",me=u.splitPosition.root.rootName=="$graveyard";if(me&&!N||!(N&&!me)&&t.aIsStrong){const nt=[];return u.howMany&&nt.push(new MoveOperation(u.moveTargetPosition,u.howMany,u.splitPosition,0)),de.howMany&&nt.push(new MoveOperation(de.splitPosition,de.howMany,de.moveTargetPosition,0)),nt}else return[new NoOperation(0)]}if(de.graveyardPosition&&(de.graveyardPosition=de.graveyardPosition._getTransformedBySplitOperation(u)),de.splitPosition.isEqual(u.insertionPosition)&&t.abRelation=="splitBefore")return de.howMany++,[de];if(u.splitPosition.isEqual(de.insertionPosition)&&t.baRelation=="splitBefore"){const N=u.insertionPosition.path.slice();N.push(0);const me=new Position(u.insertionPosition.root,N),pe=new MoveOperation(de.insertionPosition,1,me,0);return[de,pe]}return de.splitPosition.hasSameParentAs(u.splitPosition)&&de.splitPosition.offset<u.splitPosition.offset&&(de.howMany-=u.howMany),de.splitPosition=de.splitPosition._getTransformedBySplitOperation(u),de.insertionPosition=SplitOperation.getInsertionPosition(de.splitPosition),[de]});function _moveTargetIntoMovedRange(de,u){return de.targetPosition._getTransformedByDeletion(u.sourcePosition,u.howMany)===null}function _makeMoveOperationsFromRanges(de,u){const t=[];for(let N=0;N<de.length;N++){const me=de[N],pe=new MoveOperation(me.start,me.end.offset-me.start.offset,u,0);t.push(pe);for(let Le=N+1;Le<de.length;Le++)de[Le]=de[Le]._getTransformedByMove(pe.sourcePosition,pe.targetPosition,pe.howMany)[0];u=u._getTransformedByMove(pe.sourcePosition,pe.targetPosition,pe.howMany)}return t}class LivePosition extends EmitterMixin(Position){constructor(u,t,N="toNone"){if(super(u,t,N),!this.root.is("rootElement"))throw new CKEditorError("model-liveposition-root-not-rootelement",u);bindWithDocument.call(this)}detach(){this.stopListening()}toPosition(){return new Position(this.root,this.path.slice(),this.stickiness)}static fromPosition(u,t){return new this(u.root,u.path.slice(),t||u.stickiness)}}LivePosition.prototype.is=function(de){return de==="livePosition"||de==="model:livePosition"||de=="position"||de==="model:position"};function bindWithDocument(){this.listenTo(this.root.document.model,"applyOperation",(de,u)=>{const t=u[0];t.isDocumentOperation&&transform.call(this,t)},{priority:"low"})}function transform(de){const u=this.getTransformedByOperation(de);if(!this.isEqual(u)){const t=this.toPosition();this.path=u.path,this.root=u.root,this.fire("change",t)}}class Batch{constructor(u={}){xt(this,"operations");xt(this,"isUndoable");xt(this,"isLocal");xt(this,"isUndo");xt(this,"isTyping");typeof u=="string"&&(u=u==="transparent"?{isUndoable:!1}:{},logWarning("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:N=!0,isUndo:me=!1,isTyping:pe=!1}=u;this.operations=[],this.isUndoable=t,this.isLocal=N,this.isUndo=me,this.isTyping=pe}get type(){return logWarning("batch-type-deprecated"),"default"}get baseVersion(){for(const u of this.operations)if(u.baseVersion!==null)return u.baseVersion;return null}addOperation(u){return u.isDocumentOperation&&(u.batch=this,this.operations.push(u)),u}}const Zo=class Zo{constructor(u){xt(this,"_markerCollection");xt(this,"_changesInElement",new Map);xt(this,"_elementsSnapshots",new Map);xt(this,"_elementChildrenSnapshots",new Map);xt(this,"_elementState",new Map);xt(this,"_changedMarkers",new Map);xt(this,"_changedRoots",new Map);xt(this,"_changeCount",0);xt(this,"_cachedChanges",null);xt(this,"_cachedChangesWithGraveyard",null);xt(this,"_refreshedItems",new Set);this._markerCollection=u}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(u){const t=u;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const N of t.range.getItems({shallow:!0}))this._isInInsertedElement(N.parent)||this._markAttribute(N);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const N=this._isInInsertedElement(t.sourcePosition.parent),me=this._isInInsertedElement(t.targetPosition.parent);N||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),me||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const pe=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const Le of pe.getItems({shallow:!0}))this._setElementState(Le,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const N=Range._createFromPositionAndShift(t.position,1);for(const me of this._markerCollection.getMarkersIntersectingRange(N)){const pe=me.getData();this.bufferMarkerChange(me.name,pe,pe)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const N=t.splitPosition.parent;if(!this._isInInsertedElement(N)){this._markRemove(N,t.splitPosition.offset,t.howMany);const me=Range._createFromPositionAndShift(t.splitPosition,t.howMany);for(const pe of me.getItems({shallow:!0}))this._setElementState(pe,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const N=t.sourcePosition.parent;this._isInInsertedElement(N.parent)||this._markRemove(N.parent,N.startOffset,1);const me=t.graveyardPosition.parent;this._markInsert(me,t.graveyardPosition.offset,1),this._setElementState(N,"move");const pe=t.targetPosition.parent;if(!this._isInInsertedElement(pe)){this._markInsert(pe,t.targetPosition.offset,N.maxOffset);const Le=Range._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const Ye of Le.getItems({shallow:!0}))this._setElementState(Ye,"move")}break}case"detachRoot":case"addRoot":{const N=t.affectedSelectable;if(!N._isLoaded||N.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const N=t.root.rootName;this._bufferRootAttributeChange(N,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(u,t,N){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),N.range&&N.range.root.is("rootElement")&&!N.range.root._isLoaded&&(N.range=null);let me=this._changedMarkers.get(u);me?me.newMarkerData=N:(me={newMarkerData:N,oldMarkerData:t},this._changedMarkers.set(u,me)),me.oldMarkerData.range==null&&N.range==null&&this._changedMarkers.delete(u)}getMarkersToRemove(){const u=[];for(const[t,N]of this._changedMarkers)N.oldMarkerData.range!=null&&u.push({name:t,range:N.oldMarkerData.range});return u}getMarkersToAdd(){const u=[];for(const[t,N]of this._changedMarkers)N.newMarkerData.range!=null&&u.push({name:t,range:N.newMarkerData.range});return u}getChangedMarkers(){return Array.from(this._changedMarkers).map(([u,t])=>({name:u,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:u,oldMarkerData:t}of this._changedMarkers.values()){if(u.affectsData!==t.affectsData)return!0;if(u.affectsData){const N=u.range&&!t.range,me=!u.range&&t.range,pe=u.range&&t.range&&!u.range.isEqual(t.range);if(N||me||pe)return!0}}return!1}getChanges(u={}){if(this._cachedChanges)return u.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const N of this._changesInElement.keys()){const me=this._changesInElement.get(N).sort((ft,mt)=>ft.offset===mt.offset?ft.type!=mt.type?ft.type=="remove"?-1:1:0:ft.offset<mt.offset?-1:1),pe=this._elementChildrenSnapshots.get(N),Le=_getChildrenSnapshots(N.getChildren()),Ye=_generateDiffInstructionsFromChanges(pe.length,me);let nt=0,ot=0;for(const ft of Ye)if(ft==="i"){const mt=this._getDiffActionForNode(Le[nt].node,"insert"),bt=this._elementsSnapshots.get(Le[nt].node),yt=this._getInsertDiff(N,nt,mt,Le[nt],bt);t.push(yt),nt++}else if(ft==="r"){const mt=this._getDiffActionForNode(pe[ot].node,"remove"),bt=this._getRemoveDiff(N,nt,mt,pe[ot]);t.push(bt),ot++}else if(ft==="a"){const mt=pe[ot].attributes,bt=Le[nt].attributes;let yt;if(Le[nt].name=="$text")yt=new Range(Position._createAt(N,nt),Position._createAt(N,nt+1));else{const Ct=N.offsetToIndex(nt);yt=new Range(Position._createAt(N,nt),Position._createAt(N.getChild(Ct),0))}const _t=this._getAttributesDiff(yt,mt,bt);t.push(..._t),nt++,ot++}else nt++,ot++}t.sort((N,me)=>N.position.root!=me.position.root?N.position.root.rootName<me.position.root.rootName?-1:1:N.position.isEqual(me.position)?N.changeCount-me.changeCount:N.position.isBefore(me.position)?-1:1);for(let N=1,me=0;N<t.length;N++){const pe=t[me],Le=t[N],Ye=pe.type=="remove"&&Le.type=="remove"&&pe.name=="$text"&&Le.name=="$text"&&pe.position.isEqual(Le.position),nt=pe.type=="insert"&&Le.type=="insert"&&pe.name=="$text"&&Le.name=="$text"&&pe.position.parent==Le.position.parent&&pe.position.offset+pe.length==Le.position.offset,ot=pe.type=="attribute"&&Le.type=="attribute"&&pe.position.parent==Le.position.parent&&pe.range.isFlat&&Le.range.isFlat&&pe.position.offset+pe.length==Le.position.offset&&pe.attributeKey==Le.attributeKey&&pe.attributeOldValue==Le.attributeOldValue&&pe.attributeNewValue==Le.attributeNewValue;Ye||nt||ot?(pe.length++,ot&&(pe.range.end=pe.range.end.getShiftedBy(1)),t[N]=null):me=N}t=t.filter(N=>N);for(const N of t)delete N.changeCount,N.type=="attribute"&&(delete N.position,delete N.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(_changesInGraveyardFilter),u.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(u=>{const t={...u};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(u){if(this._isInInsertedElement(u.parent))return;this._markRemove(u.parent,u.startOffset,u.offsetSize),this._markInsert(u.parent,u.startOffset,u.offsetSize),this._refreshedItems.add(u),this._setElementState(u,"refresh");const t=Range._createOn(u);for(const N of this._markerCollection.getMarkersIntersectingRange(t)){const me=N.getData();this.bufferMarkerChange(N.name,me,me)}this._cachedChanges=null}_bufferRootLoad(u){if(u.isAttached()){this._bufferRootStateChange(u.rootName,!0),this._markInsert(u,0,u.maxOffset);for(const t of u.getAttributeKeys())this._bufferRootAttributeChange(u.rootName,t,null,u.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==u){const N=t.getData();this.bufferMarkerChange(t.name,{...N,range:null},N)}}}_bufferRootStateChange(u,t){if(!this._changedRoots.has(u)){this._changedRoots.set(u,{name:u,state:t?"attached":"detached"});return}const N=this._changedRoots.get(u);N.state!==void 0?(delete N.state,N.attributes===void 0&&this._changedRoots.delete(u)):N.state=t?"attached":"detached"}_bufferRootAttributeChange(u,t,N,me){const pe=this._changedRoots.get(u)||{name:u},Le=pe.attributes||{};if(Le[t]){const Ye=Le[t];me===Ye.oldValue?delete Le[t]:Ye.newValue=me}else Le[t]={oldValue:N,newValue:me};Object.entries(Le).length===0?(delete pe.attributes,pe.state===void 0&&this._changedRoots.delete(u)):(pe.attributes=Le,this._changedRoots.set(u,pe))}_markInsert(u,t,N){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const me={type:"insert",offset:t,howMany:N,count:this._changeCount++};this._markChange(u,me)}_markRemove(u,t,N){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const me={type:"remove",offset:t,howMany:N,count:this._changeCount++};this._markChange(u,me),this._removeAllNestedChanges(u,t,N)}_markAttribute(u){if(u.root.is("rootElement")&&!u.root._isLoaded)return;const t={type:"attribute",offset:u.startOffset,howMany:u.offsetSize,count:this._changeCount++};this._markChange(u.parent,t)}_markChange(u,t){this._makeSnapshots(u);const N=this._getChangesForElement(u);this._handleChange(t,N),N.push(t);for(let me=0;me<N.length;me++)N[me].howMany<1&&(N.splice(me,1),me--)}_setElementState(u,t){if(!u.is("element"))return;const N=Zo._statesPriority.indexOf(this._elementState.get(u));Zo._statesPriority.indexOf(t)>N&&this._elementState.set(u,t)}_getDiffActionForNode(u,t){if(!u.is("element")||!this._elementsSnapshots.has(u))return t;const N=this._elementState.get(u);return!N||N=="move"?t:N}_getChangesForElement(u){let t;return this._changesInElement.has(u)?t=this._changesInElement.get(u):(t=[],this._changesInElement.set(u,t)),t}_makeSnapshots(u){if(this._elementChildrenSnapshots.has(u))return;const t=_getChildrenSnapshots(u.getChildren());this._elementChildrenSnapshots.set(u,t);for(const N of t)this._elementsSnapshots.set(N.node,N)}_handleChange(u,t){u.nodesToHandle=u.howMany;for(const N of t){const me=u.offset+u.howMany,pe=N.offset+N.howMany;if(u.type=="insert"&&(N.type=="insert"&&(u.offset<=N.offset?N.offset+=u.howMany:u.offset<pe&&(N.howMany+=u.nodesToHandle,u.nodesToHandle=0)),N.type=="remove"&&u.offset<N.offset&&(N.offset+=u.howMany),N.type=="attribute")){if(u.offset<=N.offset)N.offset+=u.howMany;else if(u.offset<pe){const Le=N.howMany;N.howMany=u.offset-N.offset,t.unshift({type:"attribute",offset:me,howMany:Le-N.howMany,count:this._changeCount++})}}if(u.type=="remove"){if(N.type=="insert"){if(me<=N.offset)N.offset-=u.howMany;else if(me<=pe)if(u.offset<N.offset){const Le=me-N.offset;N.offset=u.offset,N.howMany-=Le,u.nodesToHandle-=Le}else N.howMany-=u.nodesToHandle,u.nodesToHandle=0;else if(u.offset<=N.offset)u.nodesToHandle-=N.howMany,N.howMany=0;else if(u.offset<pe){const Le=pe-u.offset;N.howMany-=Le,u.nodesToHandle-=Le}}if(N.type=="remove"&&(me<=N.offset?N.offset-=u.howMany:u.offset<N.offset&&(u.nodesToHandle+=N.howMany,N.howMany=0)),N.type=="attribute"){if(me<=N.offset)N.offset-=u.howMany;else if(u.offset<N.offset){const Le=me-N.offset;N.offset=u.offset,N.howMany-=Le}else if(u.offset<pe)if(me<=pe){const Le=N.howMany;N.howMany=u.offset-N.offset;const Ye=Le-N.howMany-u.nodesToHandle;t.unshift({type:"attribute",offset:u.offset,howMany:Ye,count:this._changeCount++})}else N.howMany-=pe-u.offset}}if(u.type=="attribute"){if(N.type=="insert")if(u.offset<N.offset&&me>N.offset){if(me>pe){const Le={type:"attribute",offset:pe,howMany:me-pe,count:this._changeCount++};this._handleChange(Le,t),t.push(Le)}u.nodesToHandle=N.offset-u.offset,u.howMany=u.nodesToHandle}else u.offset>=N.offset&&u.offset<pe&&(me>pe?(u.nodesToHandle=me-pe,u.offset=pe):u.nodesToHandle=0);if(N.type=="remove"&&u.offset<N.offset&&me>N.offset){const Le={type:"attribute",offset:N.offset,howMany:me-N.offset,count:this._changeCount++};this._handleChange(Le,t),t.push(Le),u.nodesToHandle=N.offset-u.offset,u.howMany=u.nodesToHandle}N.type=="attribute"&&(u.offset>=N.offset&&me<=pe?(u.nodesToHandle=0,u.howMany=0,u.offset=0):u.offset<=N.offset&&me>=pe&&(N.howMany=0))}}u.howMany=u.nodesToHandle,delete u.nodesToHandle}_getInsertDiff(u,t,N,me,pe){const Le={type:"insert",position:Position._createAt(u,t),name:me.name,attributes:new Map(me.attributes),length:1,changeCount:this._changeCount++,action:N};return N!="insert"&&pe&&(Le.before={name:pe.name,attributes:new Map(pe.attributes)}),Le}_getRemoveDiff(u,t,N,me){return{type:"remove",action:N,position:Position._createAt(u,t),name:me.name,attributes:new Map(me.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(u,t,N){const me=[];N=new Map(N);for(const[pe,Le]of t){const Ye=N.has(pe)?N.get(pe):null;Ye!==Le&&me.push({type:"attribute",position:u.start,range:u.clone(),length:1,attributeKey:pe,attributeOldValue:Le,attributeNewValue:Ye,changeCount:this._changeCount++}),N.delete(pe)}for(const[pe,Le]of N)me.push({type:"attribute",position:u.start,range:u.clone(),length:1,attributeKey:pe,attributeOldValue:null,attributeNewValue:Le,changeCount:this._changeCount++});return me}_isInInsertedElement(u){const t=u.parent;if(!t)return!1;const N=this._changesInElement.get(t),me=u.startOffset;if(N){for(const pe of N)if(pe.type=="insert"&&me>=pe.offset&&me<pe.offset+pe.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(u,t,N){const me=new Range(Position._createAt(u,t),Position._createAt(u,t+N));for(const pe of me.getItems({shallow:!0}))pe.is("element")&&(this._changesInElement.delete(pe),this._removeAllNestedChanges(pe,0,pe.maxOffset))}};xt(Zo,"_statesPriority",[void 0,"refresh","rename","move"]);let Differ=Zo;function _getSingleNodeSnapshot(de){return{node:de,name:de.is("$text")?"$text":de.name,attributes:new Map(de.getAttributes())}}function _getChildrenSnapshots(de){const u=[];for(const t of de)if(t.is("$text"))for(let N=0;N<t.data.length;++N)u.push(_getSingleNodeSnapshot(t));else u.push(_getSingleNodeSnapshot(t));return u}function _generateDiffInstructionsFromChanges(de,u){const t=[];let N=0,me=0;for(const pe of u){if(pe.offset>N){for(let Le=0;Le<pe.offset-N;Le++)t.push("e");me+=pe.offset-N}if(pe.type=="insert"){for(let Le=0;Le<pe.howMany;Le++)t.push("i");N=pe.offset+pe.howMany}else if(pe.type=="remove"){for(let Le=0;Le<pe.howMany;Le++)t.push("r");N=pe.offset,me+=pe.howMany}else{if(pe.howMany>1500)for(let Le=0;Le<pe.howMany;Le++)t.push("a");else t.push(..."a".repeat(pe.howMany).split(""));N=pe.offset+pe.howMany,me+=pe.howMany}}if(me<de)for(let pe=0;pe<de-me-N;pe++)t.push("e");return t}function _changesInGraveyardFilter(de){const u="position"in de&&de.position.root.rootName=="$graveyard",t="range"in de&&de.range.root.rootName=="$graveyard";return!u&&!t}class History{constructor(){xt(this,"_operations",[]);xt(this,"_undoPairs",new Map);xt(this,"_undoneOperations",new Set);xt(this,"_baseVersionToOperationIndex",new Map);xt(this,"_version",0);xt(this,"_gaps",new Map)}get version(){return this._version}set version(u){this._operations.length&&u>this._version+1&&this._gaps.set(this._version,u),this._version=u}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(u){if(u.baseVersion!==this.version)throw new CKEditorError("model-document-history-addoperation-incorrect-version",this,{operation:u,historyVersion:this.version});this._operations.push(u),this._version++,this._baseVersionToOperationIndex.set(u.baseVersion,this._operations.length-1)}getOperations(u,t=this.version){if(!this._operations.length)return[];const N=this._operations[0];u===void 0&&(u=N.baseVersion);let me=t-1;for(const[Ye,nt]of this._gaps)u>Ye&&u<nt&&(u=nt),me>Ye&&me<nt&&(me=Ye-1);if(me<N.baseVersion||u>this.lastOperation.baseVersion)return[];let pe=this._baseVersionToOperationIndex.get(u);pe===void 0&&(pe=0);let Le=this._baseVersionToOperationIndex.get(me);return Le===void 0&&(Le=this._operations.length-1),this._operations.slice(pe,Le+1)}getOperation(u){const t=this._baseVersionToOperationIndex.get(u);if(t!==void 0)return this._operations[t]}setOperationAsUndone(u,t){this._undoPairs.set(t,u),this._undoneOperations.add(u)}isUndoingOperation(u){return this._undoPairs.has(u)}isUndoneOperation(u){return this._undoneOperations.has(u)}getUndoneOperation(u){return this._undoPairs.get(u)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class RootElement extends Element{constructor(t,N,me="main"){super(N);xt(this,"rootName");xt(this,"_document");xt(this,"_isAttached",!0);xt(this,"_isLoaded",!0);this._document=t,this.rootName=me}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}RootElement.prototype.is=function(de,u){return u?u===this.name&&(de==="rootElement"||de==="model:rootElement"||de==="element"||de==="model:element"):de==="rootElement"||de==="model:rootElement"||de==="element"||de==="model:element"||de==="node"||de==="model:node"};const graveyardName="$graveyard";class Document extends EmitterMixin(){constructor(t){super();xt(this,"model");xt(this,"history");xt(this,"selection");xt(this,"roots");xt(this,"differ");xt(this,"isReadOnly");xt(this,"_postFixers");xt(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=t,this.history=new History,this.selection=new DocumentSelection(this),this.roots=new Collection({idProperty:"rootName"}),this.differ=new Differ(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",graveyardName),this.listenTo(t,"applyOperation",(N,me)=>{const pe=me[0];pe.isDocumentOperation&&this.differ.bufferOperation(pe)},{priority:"high"}),this.listenTo(t,"applyOperation",(N,me)=>{const pe=me[0];pe.isDocumentOperation&&this.history.addOperation(pe)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(N,me,pe,Le,Ye)=>{const nt={...me.getData(),range:Le};this.differ.bufferMarkerChange(me.name,Ye,nt),pe===null&&me.on("change",(ot,ft)=>{const mt=me.getData();this.differ.bufferMarkerChange(me.name,{...mt,range:ft},mt)})}),this.registerPostFixer(N=>{let me=!1;for(const pe of this.roots)!pe.isAttached()&&!pe.isEmpty&&(N.remove(N.createRangeIn(pe)),me=!0);for(const pe of this.model.markers)pe.getRange().root.isAttached()||(N.removeMarker(pe),me=!0);return me})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(graveyardName)}createRoot(t="$root",N="main"){if(this.roots.get(N))throw new CKEditorError("model-document-createroot-name-exists",this,{name:N});const me=new RootElement(this,t,N);return this.roots.add(me),me}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(N=>N.rootName)}getRoots(t=!1){return this.roots.filter(N=>N!=this.graveyard&&(t||N.isAttached())&&N._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=clone$1(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),N=this.model,me=N.schema,pe=N.createPositionFromPath(t,[0]);return me.getNearestSelectionRange(pe)||N.createRange(pe)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&validateTextNodePosition(t.start)&&validateTextNodePosition(t.end)}_callPostFixers(t){let N=!1;do for(const me of this._postFixers)if(this.selection.refresh(),N=me(t),N)break;while(N)}}function validateTextNodePosition(de){const u=de.textNode;if(u){const t=u.data,N=de.offset-u.startOffset;return!isInsideSurrogatePair(t,N)&&!isInsideCombinedSymbol(t,N)}return!0}class MarkerCollection extends EmitterMixin(){constructor(){super(...arguments);xt(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(t){const N=t instanceof Marker?t.name:t;return this._markers.has(N)}get(t){return this._markers.get(t)||null}_set(t,N,me=!1,pe=!1){const Le=t instanceof Marker?t.name:t;if(Le.includes(","))throw new CKEditorError("markercollection-incorrect-marker-name",this);const Ye=this._markers.get(Le);if(Ye){const ft=Ye.getData(),mt=Ye.getRange();let bt=!1;return mt.isEqual(N)||(Ye._attachLiveRange(LiveRange.fromRange(N)),bt=!0),me!=Ye.managedUsingOperations&&(Ye._managedUsingOperations=me,bt=!0),typeof pe=="boolean"&&pe!=Ye.affectsData&&(Ye._affectsData=pe,bt=!0),bt&&this.fire(`update:${Le}`,Ye,mt,N,ft),Ye}const nt=LiveRange.fromRange(N),ot=new Marker(Le,nt,me,pe);return this._markers.set(Le,ot),this.fire(`update:${Le}`,ot,null,N,{...ot.getData(),range:null}),ot}_remove(t){const N=t instanceof Marker?t.name:t,me=this._markers.get(N);return me?(this._markers.delete(N),this.fire(`update:${N}`,me,me.getRange(),null,me.getData()),this._destroyMarker(me),!0):!1}_refresh(t){const N=t instanceof Marker?t.name:t,me=this._markers.get(N);if(!me)throw new CKEditorError("markercollection-refresh-marker-not-exists",this);const pe=me.getRange();this.fire(`update:${N}`,me,pe,pe,me.getData())}*getMarkersAtPosition(t){for(const N of this)N.getRange().containsPosition(t)&&(yield N)}*getMarkersIntersectingRange(t){for(const N of this)N.getRange().getIntersection(t)!==null&&(yield N)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const N of this._markers.values())N.name.startsWith(t+":")&&(yield N)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Marker extends EmitterMixin(TypeCheckable){constructor(t,N,me,pe){super();xt(this,"name");xt(this,"_managedUsingOperations");xt(this,"_affectsData");xt(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(N),this._managedUsingOperations=me,this._affectsData=pe}get managedUsingOperations(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Marker.prototype.is=function(de){return de==="marker"||de==="model:marker"};class DetachOperation extends Operation{constructor(t,N){super(null);xt(this,"sourcePosition");xt(this,"howMany");this.sourcePosition=t.clone(),this.howMany=N}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new CKEditorError("detach-operation-on-document-node",this)}_execute(){_remove(Range._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}let DocumentFragment$2=class pm extends TypeCheckable{constructor(t){super();xt(this,"markers",new Map);xt(this,"_children",new NodeList);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let N=this;for(const me of t)N=N.getChildAtOffset(me);return N}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const N of this._children)t.push(N.toJSON());return t}static fromJSON(t){const N=[];for(const me of t)me.name?N.push(Element.fromJSON(me)):N.push(Text.fromJSON(me));return new pm(N)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,N){const me=normalize$4(N);for(const pe of me)pe.parent!==null&&pe._remove(),pe.parent=this;this._children._insertNodes(t,me)}_removeChildren(t,N=1){const me=this._children._removeNodes(t,N);for(const pe of me)pe.parent=null;return me}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const N of t)N.parent=null}};DocumentFragment$2.prototype.is=function(de){return de==="documentFragment"||de==="model:documentFragment"};function normalize$4(de){return typeof de=="string"?[new Text(de)]:(isIterable(de)||(de=[de]),Array.from(de).map(u=>typeof u=="string"?new Text(u):u instanceof TextProxy?new Text(u.data,u.getAttributes()):u))}class Writer{constructor(u,t){xt(this,"model");xt(this,"batch");this.model=u,this.batch=t}createText(u,t){return new Text(u,t)}createElement(u,t){return new Element(u,t)}createDocumentFragment(){return new DocumentFragment$2}cloneElement(u,t=!0){return u._clone(t)}insert(u,t,N=0){if(this._assertWriterUsedCorrectly(),u instanceof Text&&u.data=="")return;const me=Position._createAt(t,N);if(u.parent)if(isSameTree(u.root,me.root)){this.move(Range._createOn(u),me);return}else{if(u.root.document)throw new CKEditorError("model-writer-insert-forbidden-move",this);this.remove(u)}const pe=me.root.document?me.root.document.version:null,Le=u instanceof DocumentFragment$2?u._removeChildren(0,u.childCount):u,Ye=new InsertOperation(me,Le,pe);if(u instanceof Text&&(Ye.shouldReceiveAttributes=!0),this.batch.addOperation(Ye),this.model.applyOperation(Ye),u instanceof DocumentFragment$2)for(const[nt,ot]of u.markers){const ft=Position._createAt(ot.root,0),bt={range:new Range(ot.start._getCombined(ft,me),ot.end._getCombined(ft,me)),usingOperation:!0,affectsData:!0};this.model.markers.has(nt)?this.updateMarker(nt,bt):this.addMarker(nt,bt)}}insertText(u,t,N,me){t instanceof DocumentFragment$2||t instanceof Element||t instanceof Position?this.insert(this.createText(u),t,N):this.insert(this.createText(u,t),N,me)}insertElement(u,t,N,me){t instanceof DocumentFragment$2||t instanceof Element||t instanceof Position?this.insert(this.createElement(u),t,N):this.insert(this.createElement(u,t),N,me)}append(u,t){this.insert(u,t,"end")}appendText(u,t,N){t instanceof DocumentFragment$2||t instanceof Element?this.insert(this.createText(u),t,"end"):this.insert(this.createText(u,t),N,"end")}appendElement(u,t,N){t instanceof DocumentFragment$2||t instanceof Element?this.insert(this.createElement(u),t,"end"):this.insert(this.createElement(u,t),N,"end")}setAttribute(u,t,N){if(this._assertWriterUsedCorrectly(),N instanceof Range){const me=N.getMinimalFlatRanges();for(const pe of me)setAttributeOnRange(this,u,t,pe)}else setAttributeOnItem(this,u,t,N)}setAttributes(u,t){for(const[N,me]of toMap(u))this.setAttribute(N,me,t)}removeAttribute(u,t){if(this._assertWriterUsedCorrectly(),t instanceof Range){const N=t.getMinimalFlatRanges();for(const me of N)setAttributeOnRange(this,u,null,me)}else setAttributeOnItem(this,u,null,t)}clearAttributes(u){this._assertWriterUsedCorrectly();const t=N=>{for(const me of N.getAttributeKeys())this.removeAttribute(me,N)};if(!(u instanceof Range))t(u);else for(const N of u.getItems())t(N)}move(u,t,N){if(this._assertWriterUsedCorrectly(),!(u instanceof Range))throw new CKEditorError("writer-move-invalid-range",this);if(!u.isFlat)throw new CKEditorError("writer-move-range-not-flat",this);const me=Position._createAt(t,N);if(me.isEqual(u.start))return;if(this._addOperationForAffectedMarkers("move",u),!isSameTree(u.root,me.root))throw new CKEditorError("writer-move-different-document",this);const pe=u.root.document?u.root.document.version:null,Le=new MoveOperation(u.start,u.end.offset-u.start.offset,me,pe);this.batch.addOperation(Le),this.model.applyOperation(Le)}remove(u){this._assertWriterUsedCorrectly();const N=(u instanceof Range?u:Range._createOn(u)).getMinimalFlatRanges().reverse();for(const me of N)this._addOperationForAffectedMarkers("move",me),applyRemoveOperation(me.start,me.end.offset-me.start.offset,this.batch,this.model)}merge(u){this._assertWriterUsedCorrectly();const t=u.nodeBefore,N=u.nodeAfter;if(this._addOperationForAffectedMarkers("merge",u),!(t instanceof Element))throw new CKEditorError("writer-merge-no-element-before",this);if(!(N instanceof Element))throw new CKEditorError("writer-merge-no-element-after",this);u.root.document?this._merge(u):this._mergeDetached(u)}createPositionFromPath(u,t,N){return this.model.createPositionFromPath(u,t,N)}createPositionAt(u,t){return this.model.createPositionAt(u,t)}createPositionAfter(u){return this.model.createPositionAfter(u)}createPositionBefore(u){return this.model.createPositionBefore(u)}createRange(u,t){return this.model.createRange(u,t)}createRangeIn(u){return this.model.createRangeIn(u)}createRangeOn(u){return this.model.createRangeOn(u)}createSelection(...u){return this.model.createSelection(...u)}_mergeDetached(u){const t=u.nodeBefore,N=u.nodeAfter;this.move(Range._createIn(N),Position._createAt(t,"end")),this.remove(N)}_merge(u){const t=Position._createAt(u.nodeBefore,"end"),N=Position._createAt(u.nodeAfter,0),me=u.root.document.graveyard,pe=new Position(me,[0]),Le=u.root.document.version,Ye=new MergeOperation(N,u.nodeAfter.maxOffset,t,pe,Le);this.batch.addOperation(Ye),this.model.applyOperation(Ye)}rename(u,t){if(this._assertWriterUsedCorrectly(),!(u instanceof Element))throw new CKEditorError("writer-rename-not-element-instance",this);const N=u.root.document?u.root.document.version:null,me=new RenameOperation(Position._createBefore(u),u.name,t,N);this.batch.addOperation(me),this.model.applyOperation(me)}split(u,t){this._assertWriterUsedCorrectly();let N=u.parent;if(!N.parent)throw new CKEditorError("writer-split-element-no-parent",this);if(t||(t=N.parent),!u.parent.getAncestors({includeSelf:!0}).includes(t))throw new CKEditorError("writer-split-invalid-limit-element",this);let me,pe;do{const Le=N.root.document?N.root.document.version:null,Ye=N.maxOffset-u.offset,nt=SplitOperation.getInsertionPosition(u),ot=new SplitOperation(u,Ye,nt,null,Le);this.batch.addOperation(ot),this.model.applyOperation(ot),!me&&!pe&&(me=N,pe=u.parent.nextSibling),u=this.createPositionAfter(u.parent),N=u.parent}while(N!==t);return{position:u,range:new Range(Position._createAt(me,"end"),Position._createAt(pe,0))}}wrap(u,t){if(this._assertWriterUsedCorrectly(),!u.isFlat)throw new CKEditorError("writer-wrap-range-not-flat",this);const N=t instanceof Element?t:new Element(t);if(N.childCount>0)throw new CKEditorError("writer-wrap-element-not-empty",this);if(N.parent!==null)throw new CKEditorError("writer-wrap-element-attached",this);this.insert(N,u.start);const me=new Range(u.start.getShiftedBy(1),u.end.getShiftedBy(1));this.move(me,Position._createAt(N,0))}unwrap(u){if(this._assertWriterUsedCorrectly(),u.parent===null)throw new CKEditorError("writer-unwrap-element-no-parent",this);this.move(Range._createIn(u),this.createPositionAfter(u)),this.remove(u)}addMarker(u,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new CKEditorError("writer-addmarker-no-usingoperation",this);const N=t.usingOperation,me=t.range,pe=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(u))throw new CKEditorError("writer-addmarker-marker-exists",this);if(!me)throw new CKEditorError("writer-addmarker-no-range",this);return N?(applyMarkerOperation(this,u,null,me,pe),this.model.markers.get(u)):this.model.markers._set(u,me,N,pe)}updateMarker(u,t){this._assertWriterUsedCorrectly();const N=typeof u=="string"?u:u.name,me=this.model.markers.get(N);if(!me)throw new CKEditorError("writer-updatemarker-marker-not-exists",this);if(!t){logWarning("writer-updatemarker-reconvert-using-editingcontroller",{markerName:N}),this.model.markers._refresh(me);return}const pe=typeof t.usingOperation=="boolean",Le=typeof t.affectsData=="boolean",Ye=Le?t.affectsData:me.affectsData;if(!pe&&!t.range&&!Le)throw new CKEditorError("writer-updatemarker-wrong-options",this);const nt=me.getRange(),ot=t.range?t.range:nt;if(pe&&t.usingOperation!==me.managedUsingOperations){t.usingOperation?applyMarkerOperation(this,N,null,ot,Ye):(applyMarkerOperation(this,N,nt,null,Ye),this.model.markers._set(N,ot,void 0,Ye));return}me.managedUsingOperations?applyMarkerOperation(this,N,nt,ot,Ye):this.model.markers._set(N,ot,void 0,Ye)}removeMarker(u){this._assertWriterUsedCorrectly();const t=typeof u=="string"?u:u.name;if(!this.model.markers.has(t))throw new CKEditorError("writer-removemarker-no-marker",this);const N=this.model.markers.get(t);if(!N.managedUsingOperations){this.model.markers._remove(t);return}const me=N.getRange();applyMarkerOperation(this,t,me,null,N.affectsData)}addRoot(u,t="$root"){this._assertWriterUsedCorrectly();const N=this.model.document.getRoot(u);if(N&&N.isAttached())throw new CKEditorError("writer-addroot-root-exists",this);const me=this.model.document,pe=new RootOperation(u,t,!0,me,me.version);return this.batch.addOperation(pe),this.model.applyOperation(pe),this.model.document.getRoot(u)}detachRoot(u){this._assertWriterUsedCorrectly();const t=typeof u=="string"?this.model.document.getRoot(u):u;if(!t||!t.isAttached())throw new CKEditorError("writer-detachroot-no-root",this);for(const pe of this.model.markers)pe.getRange().root===t&&this.removeMarker(pe);for(const pe of t.getAttributeKeys())this.removeAttribute(pe,t);this.remove(this.createRangeIn(t));const N=this.model.document,me=new RootOperation(t.rootName,t.name,!1,N,N.version);this.batch.addOperation(me),this.model.applyOperation(me)}setSelection(...u){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...u)}setSelectionFocus(u,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(u,t)}setSelectionAttribute(u,t){if(this._assertWriterUsedCorrectly(),typeof u=="string")this._setSelectionAttribute(u,t);else for(const[N,me]of toMap(u))this._setSelectionAttribute(N,me)}removeSelectionAttribute(u){if(this._assertWriterUsedCorrectly(),typeof u=="string")this._removeSelectionAttribute(u);else for(const t of u)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(u){this.model.document.selection._restoreGravity(u)}_setSelectionAttribute(u,t){const N=this.model.document.selection;if(N.isCollapsed&&N.anchor.parent.isEmpty){const me=DocumentSelection._getStoreAttributeKey(u);this.setAttribute(me,t,N.anchor.parent)}N._setAttribute(u,t)}_removeSelectionAttribute(u){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const N=DocumentSelection._getStoreAttributeKey(u);this.removeAttribute(N,t.anchor.parent)}t._removeAttribute(u)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new CKEditorError("writer-incorrect-use",this)}_addOperationForAffectedMarkers(u,t){for(const N of this.model.markers){if(!N.managedUsingOperations)continue;const me=N.getRange();let pe=!1;if(u==="move"){const Le=t;pe=Le.containsPosition(me.start)||Le.start.isEqual(me.start)||Le.containsPosition(me.end)||Le.end.isEqual(me.end)}else{const Le=t,Ye=Le.nodeBefore,nt=Le.nodeAfter,ot=me.start.parent==Ye&&me.start.isAtEnd,ft=me.end.parent==nt&&me.end.offset==0,mt=me.end.nodeAfter==nt,bt=me.start.nodeAfter==nt;pe=ot||ft||mt||bt}pe&&this.updateMarker(N.name,{range:me})}}}function setAttributeOnRange(de,u,t,N){const me=de.model,pe=me.document;let Le=N.start,Ye,nt,ot;for(const mt of N.getWalker({shallow:!0}))ot=mt.item.getAttribute(u),Ye&&nt!=ot&&(nt!=t&&ft(),Le=Ye),Ye=mt.nextPosition,nt=ot;Ye instanceof Position&&Ye!=Le&&nt!=t&&ft();function ft(){const mt=new Range(Le,Ye),bt=mt.root.document?pe.version:null,yt=new AttributeOperation(mt,u,nt,t,bt);de.batch.addOperation(yt),me.applyOperation(yt)}}function setAttributeOnItem(de,u,t,N){const me=de.model,pe=me.document,Le=N.getAttribute(u);let Ye,nt;if(Le!=t){if(N.root===N){const ft=N.document?pe.version:null;nt=new RootAttributeOperation(N,u,Le,t,ft)}else{Ye=new Range(Position._createBefore(N),de.createPositionAfter(N));const ft=Ye.root.document?pe.version:null;nt=new AttributeOperation(Ye,u,Le,t,ft)}de.batch.addOperation(nt),me.applyOperation(nt)}}function applyMarkerOperation(de,u,t,N,me){const pe=de.model,Le=pe.document,Ye=new MarkerOperation(u,t,N,pe.markers,!!me,Le.version);de.batch.addOperation(Ye),pe.applyOperation(Ye)}function applyRemoveOperation(de,u,t,N){let me;if(de.root.document){const pe=N.document,Le=new Position(pe.graveyard,[0]);me=new MoveOperation(de,u,Le,pe.version)}else me=new DetachOperation(de,u);t.addOperation(me),N.applyOperation(me)}function isSameTree(de,u){return de===u||de instanceof RootElement&&u instanceof RootElement}function deleteContent(de,u,t={}){if(u.isCollapsed)return;const N=u.getFirstRange();if(N.root.rootName=="$graveyard")return;const me=de.schema;de.change(pe=>{if(!t.doNotResetEntireContent&&shouldEntireContentBeReplacedWithParagraph(me,u)){replaceEntireContentWithParagraph(pe,u);return}const Le={};if(!t.doNotAutoparagraph){const ot=u.getSelectedElement();ot&&Object.assign(Le,me.getAttributesWithProperty(ot,"copyOnReplace",!0))}const[Ye,nt]=getLivePositionsForSelectedBlocks(N);Ye.isTouching(nt)||pe.remove(pe.createRange(Ye,nt)),t.leaveUnmerged||(mergeBranches(pe,Ye,nt),me.removeDisallowedAttributes(Ye.parent.getChildren(),pe)),collapseSelectionAt(pe,u,Ye),!t.doNotAutoparagraph&&shouldAutoparagraph(me,Ye)&&insertParagraph(pe,Ye,u,Le),Ye.detach(),nt.detach()})}function getLivePositionsForSelectedBlocks(de){const u=de.root.document.model,t=de.start;let N=de.end;if(u.hasContent(de,{ignoreMarkers:!0})){const me=getParentBlock(N);if(me&&N.isTouching(u.createPositionAt(me,0))){const pe=u.createSelection(de);u.modifySelection(pe,{direction:"backward"});const Le=pe.getLastPosition(),Ye=u.createRange(Le,N);u.hasContent(Ye,{ignoreMarkers:!0})||(N=Le)}}return[LivePosition.fromPosition(t,"toPrevious"),LivePosition.fromPosition(N,"toNext")]}function getParentBlock(de){const u=de.parent,t=u.root.document.model.schema,N=u.getAncestors({parentFirst:!0,includeSelf:!0});for(const me of N){if(t.isLimit(me))return null;if(t.isBlock(me))return me}}function mergeBranches(de,u,t){const N=de.model;if(!checkShouldMerge(de.model.schema,u,t))return;const[me,pe]=getAncestorsJustBelowCommonAncestor(u,t);!me||!pe||(!N.hasContent(me,{ignoreMarkers:!0})&&N.hasContent(pe,{ignoreMarkers:!0})?mergeBranchesRight(de,u,t,me.parent):mergeBranchesLeft(de,u,t,me.parent))}function mergeBranchesLeft(de,u,t,N){const me=u.parent,pe=t.parent;if(!(me==N||pe==N)){for(u=de.createPositionAfter(me),t=de.createPositionBefore(pe),t.isEqual(u)||de.insert(pe,u),de.merge(u);t.parent.isEmpty;){const Le=t.parent;t=de.createPositionBefore(Le),de.remove(Le)}checkShouldMerge(de.model.schema,u,t)&&mergeBranchesLeft(de,u,t,N)}}function mergeBranchesRight(de,u,t,N){const me=u.parent,pe=t.parent;if(!(me==N||pe==N)){for(u=de.createPositionAfter(me),t=de.createPositionBefore(pe),t.isEqual(u)||de.insert(me,t);u.parent.isEmpty;){const Le=u.parent;u=de.createPositionBefore(Le),de.remove(Le)}t=de.createPositionBefore(pe),mergeRight(de,t),checkShouldMerge(de.model.schema,u,t)&&mergeBranchesRight(de,u,t,N)}}function mergeRight(de,u){const t=u.nodeBefore,N=u.nodeAfter;t.name!=N.name&&de.rename(t,N.name),de.clearAttributes(t),de.setAttributes(Object.fromEntries(N.getAttributes()),t),de.merge(u)}function checkShouldMerge(de,u,t){const N=u.parent,me=t.parent;return N==me||de.isLimit(N)||de.isLimit(me)?!1:isCrossingLimitElement(u,t,de)}function getAncestorsJustBelowCommonAncestor(de,u){const t=de.getAncestors(),N=u.getAncestors();let me=0;for(;t[me]&&t[me]==N[me];)me++;return[t[me],N[me]]}function shouldAutoparagraph(de,u){const t=de.checkChild(u,"$text"),N=de.checkChild(u,"paragraph");return!t&&N}function isCrossingLimitElement(de,u,t){const N=new Range(de,u);for(const me of N.getWalker())if(t.isLimit(me.item))return!1;return!0}function insertParagraph(de,u,t,N={}){const me=de.createElement("paragraph");de.model.schema.setAllowedAttributes(me,N,de),de.insert(me,u),collapseSelectionAt(de,t,de.createPositionAt(me,0))}function replaceEntireContentWithParagraph(de,u){const t=de.model.schema.getLimitElement(u);de.remove(de.createRangeIn(t)),insertParagraph(de,de.createPositionAt(t,0),u)}function shouldEntireContentBeReplacedWithParagraph(de,u){const t=de.getLimitElement(u);if(!u.containsEntireContent(t))return!1;const N=u.getFirstRange();return N.start.parent==N.end.parent?!1:de.checkChild(t,"paragraph")}function collapseSelectionAt(de,u,t){u instanceof DocumentSelection?de.setSelection(t):u.setTo(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedContent(de,u){return de.change(t=>{const N=t.createDocumentFragment(),me=u.getFirstRange();if(!me||me.isCollapsed)return N;const pe=me.start.root,Le=me.start.getCommonPath(me.end),Ye=pe.getNodeByPath(Le);let nt;me.start.parent==me.end.parent?nt=me:nt=t.createRange(t.createPositionAt(Ye,me.start.path[Le.length]),t.createPositionAt(Ye,me.end.path[Le.length]+1));const ot=nt.end.offset-nt.start.offset;for(const ft of nt.getItems({shallow:!0}))ft.is("$textProxy")?t.appendText(ft.data,ft.getAttributes(),N):t.append(t.cloneElement(ft,!0),N);if(nt!=me){const ft=me._getTransformedByMove(nt.start,t.createPositionAt(N,0),ot)[0],mt=t.createRange(t.createPositionAt(N,0),ft.start),bt=t.createRange(ft.end,t.createPositionAt(N,"end"));removeRangeContent(bt,t),removeRangeContent(mt,t)}return N})}function removeRangeContent(de,u){const t=[];Array.from(de.getItems({direction:"backward"})).map(N=>u.createRangeOn(N)).filter(N=>(N.start.isAfter(de.start)||N.start.isEqual(de.start))&&(N.end.isBefore(de.end)||N.end.isEqual(de.end))).forEach(N=>{t.push(N.start.parent),u.remove(N)}),t.forEach(N=>{let me=N;for(;me.parent&&me.isEmpty;){const pe=u.createRangeOn(me);me=me.parent,u.remove(pe)}})}function insertContent(de,u,t){return de.change(N=>{const me=t||de.document.selection;me.isCollapsed||de.deleteContent(me,{doNotAutoparagraph:!0});const pe=new Insertion(de,N,me.anchor),Le=[];let Ye;if(u.is("documentFragment")){if(u.markers.size){const ft=[];for(const[mt,bt]of u.markers){const{start:yt,end:_t}=bt,Ct=yt.isEqual(_t);ft.push({position:yt,name:mt,isCollapsed:Ct},{position:_t,name:mt,isCollapsed:Ct})}ft.sort(({position:mt},{position:bt})=>mt.isBefore(bt)?1:-1);for(const{position:mt,name:bt,isCollapsed:yt}of ft){let _t=null,Ct=null;const Tt=mt.parent===u&&mt.isAtStart,At=mt.parent===u&&mt.isAtEnd;!Tt&&!At?(_t=N.createElement("$marker"),N.insert(_t,mt)):yt&&(Ct=Tt?"start":"end"),Le.push({name:bt,element:_t,collapsed:Ct})}}Ye=u.getChildren()}else Ye=[u];pe.handleNodes(Ye);let nt=pe.getSelectionRange();if(u.is("documentFragment")&&Le.length){const ft=nt?LiveRange.fromRange(nt):null,mt={};for(let bt=Le.length-1;bt>=0;bt--){const{name:yt,element:_t,collapsed:Ct}=Le[bt],Tt=!mt[yt];if(Tt&&(mt[yt]=[]),_t){const At=N.createPositionAt(_t,"before");mt[yt].push(At),N.remove(_t)}else{const At=pe.getAffectedRange();if(!At){Ct&&mt[yt].push(pe.position);continue}Ct?mt[yt].push(At[Ct]):mt[yt].push(Tt?At.start:At.end)}}for(const[bt,[yt,_t]]of Object.entries(mt))yt&&_t&&yt.root===_t.root&&yt.root.document&&!N.model.markers.has(bt)&&N.addMarker(bt,{usingOperation:!0,affectsData:!0,range:new Range(yt,_t)});ft&&(nt=ft.toRange(),ft.detach())}/* istanbul ignore else -- @preserve */nt&&(me instanceof DocumentSelection?N.setSelection(nt):me.setTo(nt));const ot=pe.getAffectedRange()||de.createRange(me.anchor);return pe.destroy(),ot})}class Insertion{constructor(u,t,N){xt(this,"model");xt(this,"writer");xt(this,"position");xt(this,"canMergeWith");xt(this,"schema");xt(this,"_documentFragment");xt(this,"_documentFragmentPosition");xt(this,"_firstNode",null);xt(this,"_lastNode",null);xt(this,"_lastAutoParagraph",null);xt(this,"_filterAttributesOf",[]);xt(this,"_affectedStart",null);xt(this,"_affectedEnd",null);xt(this,"_nodeToSelect",null);this.model=u,this.writer=t,this.position=N,this.canMergeWith=new Set([this.position.parent]),this.schema=u.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(u){for(const t of Array.from(u))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(u){const t=this.writer.createPositionAfter(this._lastNode),N=this.writer.createPositionAfter(u);if(N.isAfter(t)){this._lastNode=u;/* istanbul ignore if -- @preserve */if(this.position.parent!=u||!this.position.isAtEnd)throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=N,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Range._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Range(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(u){if(!this._checkAndSplitToAllowedPosition(u)){this.schema.isObject(u)||this._handleDisallowedNode(u);return}this._appendToFragment(u),this._firstNode||(this._firstNode=u),this._lastNode=u}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const u=LivePosition.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=u.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=u.toPosition(),u.detach()}_handleDisallowedNode(u){u.is("element")&&this.handleNodes(u.getChildren())}_appendToFragment(u){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,u))throw new CKEditorError("insertcontent-wrong-position",this,{node:u,position:this.position});this.writer.insert(u,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(u.offsetSize),this.schema.isObject(u)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=u:this._nodeToSelect=null,this._filterAttributesOf.push(u)}_setAffectedBoundaries(u){this._affectedStart||(this._affectedStart=LivePosition.fromPosition(u,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(u))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=LivePosition.fromPosition(u,"toNext"))}_mergeOnLeft(){const u=this._firstNode;if(!(u instanceof Element)||!this._canMergeLeft(u))return;const t=LivePosition._createBefore(u);t.stickiness="toNext";const N=LivePosition.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(t.nodeBefore,"end","toNext")),this.position=N.toPosition(),N.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const u=this._lastNode;if(!(u instanceof Element)||!this._canMergeRight(u))return;const t=LivePosition._createAfter(u);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=Position._createAt(t.nodeBefore,"end");const N=LivePosition.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(t.nodeBefore,0,"toPrevious")),this.position=N.toPosition(),N.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(u){const t=u.previousSibling;return t instanceof Element&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,u)}_canMergeRight(u){const t=u.nextSibling;return t instanceof Element&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(u,t)}_insertAutoParagraph(){this._insertPartialFragment();const u=this.writer.createElement("paragraph");this.writer.insert(u,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=u,this.position=this.writer.createPositionAt(u,0)}_checkAndSplitToAllowedPosition(u){const t=this._getAllowedIn(this.position.parent,u);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const N=this.position.parent;this.position=this.writer.createPositionBefore(N),N.isEmpty&&N.parent===t&&this.writer.remove(N)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const N=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=N,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,u)||this._insertAutoParagraph(),!0}_getAllowedIn(u,t){return this.schema.checkChild(u,t)||this.schema.checkChild(u,"paragraph")&&this.schema.checkChild("paragraph",t)?u:this.schema.isLimit(u)?null:this._getAllowedIn(u.parent,t)}}function insertObject(de,u,t,N={}){if(!de.schema.isObject(u))throw new CKEditorError("insertobject-element-not-an-object",de,{object:u});const me=t||de.document.selection;let pe=me;N.findOptimalPosition&&de.schema.isBlock(u)&&(pe=de.createSelection(de.schema.findOptimalInsertionRange(me,N.findOptimalPosition)));const Le=first(me.getSelectedBlocks()),Ye={};return Le&&Object.assign(Ye,de.schema.getAttributesWithProperty(Le,"copyOnReplace",!0)),de.change(nt=>{pe.isCollapsed||de.deleteContent(pe,{doNotAutoparagraph:!0});let ot=u;const ft=pe.anchor.parent;!de.schema.checkChild(ft,u)&&de.schema.checkChild(ft,"paragraph")&&de.schema.checkChild("paragraph",u)&&(ot=nt.createElement("paragraph"),nt.insert(u,ot)),de.schema.setAllowedAttributes(ot,Ye,nt);const mt=de.insertContent(ot,pe);return mt.isCollapsed||N.setSelection&&updateSelection(nt,u,N.setSelection,Ye),mt})}function updateSelection(de,u,t,N){const me=de.model;if(t=="on"){de.setSelection(u,"on");return}if(t!="after")throw new CKEditorError("insertobject-invalid-place-parameter-value",me);let pe=u.nextSibling;if(me.schema.isInline(u)){de.setSelection(u,"after");return}!(pe&&me.schema.checkChild(pe,"$text"))&&me.schema.checkChild(u.parent,"paragraph")&&(pe=de.createElement("paragraph"),me.schema.setAllowedAttributes(pe,N,de),me.insertContent(pe,de.createPositionAfter(u))),pe&&de.setSelection(pe,0)}const wordBoundaryCharacters=' ,.?!:;"-()';function modifySelection(de,u,t={}){const N=de.schema,me=t.direction!="backward",pe=t.unit?t.unit:"character",Le=!!t.treatEmojiAsSingleUnit,Ye=u.focus,nt=new TreeWalker({boundaries:getSearchRange(Ye,me),singleCharacters:!0,direction:me?"forward":"backward"}),ot={walker:nt,schema:N,isForward:me,unit:pe,treatEmojiAsSingleUnit:Le};let ft;for(;ft=nt.next();){if(ft.done)return;const mt=tryExtendingTo(ot,ft.value);if(mt){u instanceof DocumentSelection?de.change(bt=>{bt.setSelectionFocus(mt)}):u.setFocus(mt);return}}}function tryExtendingTo(de,u){const{isForward:t,walker:N,unit:me,schema:pe,treatEmojiAsSingleUnit:Le}=de,{type:Ye,item:nt,nextPosition:ot}=u;if(Ye=="text")return de.unit==="word"?getCorrectWordBreakPosition(N,t):getCorrectPosition(N,me,Le);if(Ye==(t?"elementStart":"elementEnd")){if(pe.isSelectable(nt))return Position._createAt(nt,t?"after":"before");if(pe.checkChild(ot,"$text"))return ot}else{if(pe.isLimit(nt)){N.skip(()=>!0);return}if(pe.checkChild(ot,"$text"))return ot}}function getCorrectPosition(de,u,t){const N=de.position.textNode;if(N){const me=N.data;let pe=de.position.offset-N.startOffset;for(;isInsideSurrogatePair(me,pe)||u=="character"&&isInsideCombinedSymbol(me,pe)||t&&isInsideEmojiSequence(me,pe);)de.next(),pe=de.position.offset-N.startOffset}return de.position}function getCorrectWordBreakPosition(de,u){let t=de.position.textNode;for(t||(t=u?de.position.nodeAfter:de.position.nodeBefore);t&&t.is("$text");){const N=de.position.offset-t.startOffset;if(isAtNodeBoundary(t,N,u))t=u?de.position.nodeAfter:de.position.nodeBefore;else{if(isAtWordBoundary(t.data,N,u))break;de.next()}}return de.position}function getSearchRange(de,u){const t=de.root,N=Position._createAt(t,u?"end":0);return u?new Range(de,N):new Range(N,de)}function isAtWordBoundary(de,u,t){const N=u+(t?0:-1);return wordBoundaryCharacters.includes(de.charAt(N))}function isAtNodeBoundary(de,u,t){return u===(t?de.offsetSize:0)}let Model$1=class extends ObservableMixin(){constructor(){super();xt(this,"markers");xt(this,"document");xt(this,"schema");xt(this,"_pendingChanges");xt(this,"_currentWriter");this.markers=new MarkerCollection,this.document=new Document(this),this.schema=new Schema,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,N)=>{N[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),injectSelectionPostFixer(this),this.document.registerPostFixer(autoParagraphEmptyRoots),this.on("insertContent",(t,[N,me])=>{t.return=insertContent(this,N,me)}),this.on("insertObject",(t,[N,me,pe])=>{t.return=insertObject(this,N,me,pe)}),this.on("canEditAt",t=>{const N=!this.document.isReadOnly;t.return=N,N||t.stop()})}change(t){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Batch,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(N){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(N,this)}}enqueueChange(t,N){try{t?typeof t=="function"?(N=t,t=new Batch):t instanceof Batch||(t=new Batch(t)):t=new Batch,this._pendingChanges.push({batch:t,callback:N}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(me){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(me,this)}}applyOperation(t){t._execute()}insertContent(t,N,me,...pe){const Le=normalizeSelectable(N,me);return this.fire("insertContent",[t,Le,me,...pe])}insertObject(t,N,me,pe,...Le){const Ye=normalizeSelectable(N,me);return this.fire("insertObject",[t,Ye,pe,pe,...Le])}deleteContent(t,N){deleteContent(this,t,N)}modifySelection(t,N){modifySelection(this,t,N)}getSelectedContent(t){return getSelectedContent(this,t)}hasContent(t,N={}){const me=t instanceof Range?t:Range._createIn(t);if(me.isCollapsed)return!1;const{ignoreWhitespaces:pe=!1,ignoreMarkers:Le=!1}=N;if(!Le){for(const Ye of this.markers.getMarkersIntersectingRange(me))if(Ye.affectsData)return!0}for(const Ye of me.getItems())if(this.schema.isContent(Ye))if(Ye.is("$textProxy"))if(pe){if(Ye.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(t){const N=normalizeSelectable(t);return this.fire("canEditAt",[N])}createPositionFromPath(t,N,me){return new Position(t,N,me)}createPositionAt(t,N){return Position._createAt(t,N)}createPositionAfter(t){return Position._createAfter(t)}createPositionBefore(t){return Position._createBefore(t)}createRange(t,N){return new Range(t,N)}createRangeIn(t){return Range._createIn(t)}createRangeOn(t){return Range._createOn(t)}createSelection(...t){return new Selection(...t)}createBatch(t){return new Batch(t)}createOperationFromJSON(t){return OperationFactory.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const N=this._pendingChanges[0].batch;this._currentWriter=new Writer(this,N);const me=this._pendingChanges[0].callback(this._currentWriter);t.push(me),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}};function normalizeSelectable(de,u){if(de)return de instanceof Selection||de instanceof DocumentSelection?de:de instanceof Node$1?u||u===0?new Selection(de,u):de.is("rootElement")?new Selection(de,"in"):new Selection(de,"on"):new Selection(de)}class ClickObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType","click")}onDomEvent(t){this.fire(t.type,t)}}class MouseObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(t){this.fire(t.type,t)}}class TouchObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(t){this.fire(t.type,t)}}class UpcastWriter{constructor(u){xt(this,"document");this.document=u}createDocumentFragment(u){return new DocumentFragment$1(this.document,u)}createElement(u,t,N){return new Element$1(this.document,u,t,N)}createText(u){return new Text$1(this.document,u)}clone(u,t=!1){return u._clone(t)}appendChild(u,t){return t._appendChild(u)}insertChild(u,t,N){return N._insertChild(u,t)}removeChildren(u,t,N){return N._removeChildren(u,t)}remove(u){const t=u.parent;return t?this.removeChildren(t.getChildIndex(u),1,t):[]}replace(u,t){const N=u.parent;if(N){const me=N.getChildIndex(u);return this.removeChildren(me,1,N),this.insertChild(me,t,N),!0}return!1}unwrapElement(u){const t=u.parent;if(t){const N=t.getChildIndex(u);this.remove(u),this.insertChild(N,u.getChildren(),t)}}rename(u,t){const N=new Element$1(this.document,u,t.getAttributes(),t.getChildren());return this.replace(t,N)?N:null}setAttribute(u,t,N){N._setAttribute(u,t)}removeAttribute(u,t){t._removeAttribute(u)}addClass(u,t){t._addClass(u)}removeClass(u,t){t._removeClass(u)}setStyle(u,t,N){isPlainObject(u)&&N===void 0?t._setStyle(u):N._setStyle(u,t)}removeStyle(u,t){t._removeStyle(u)}setCustomProperty(u,t,N){N._setCustomProperty(u,t)}removeCustomProperty(u,t){return t._removeCustomProperty(u)}createPositionAt(u,t){return Position$1._createAt(u,t)}createPositionAfter(u){return Position$1._createAfter(u)}createPositionBefore(u){return Position$1._createBefore(u)}createRange(u,t){return new Range$1(u,t)}createRangeOn(u){return Range$1._createOn(u)}createRangeIn(u){return Range$1._createIn(u)}createSelection(...u){return new Selection$1(...u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_COLOR_REGEXP=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,RGB_COLOR_REGEXP=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,RGBA_COLOR_REGEXP=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,HSL_COLOR_REGEXP=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,HSLA_COLOR_REGEXP=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,CSS_SHORTHAND_VALUE_REGEXP=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,COLOR_NAMES=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function isColor(de){return de.startsWith("#")?HEX_COLOR_REGEXP.test(de):de.startsWith("rgb")?RGB_COLOR_REGEXP.test(de)||RGBA_COLOR_REGEXP.test(de):de.startsWith("hsl")?HSL_COLOR_REGEXP.test(de)||HSLA_COLOR_REGEXP.test(de):COLOR_NAMES.has(de.toLowerCase())}const lineStyleValues=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function isLineStyle(de){return lineStyleValues.includes(de)}const lengthRegExp=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function isLength(de){return lengthRegExp.test(de)}const PERCENTAGE_VALUE_REGEXP=/^[+-]?[0-9]*([.][0-9]+)?%$/;function isPercentage(de){return PERCENTAGE_VALUE_REGEXP.test(de)}const repeatValues=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function isRepeat(de){return repeatValues.includes(de)}const positionValues=["center","top","bottom","left","right"];function isPosition(de){return positionValues.includes(de)}const attachmentValues=["fixed","scroll","local"];function isAttachment(de){return attachmentValues.includes(de)}const urlRegExp=/^url\(/;function isURL(de){return urlRegExp.test(de)}function getBoxSidesValues(de=""){if(de==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const u=getShorthandValues(de),t=u[0],N=u[2]||t,me=u[1]||t,pe=u[3]||me;return{top:t,bottom:N,right:me,left:pe}}function getBoxSidesValueReducer(de){return u=>{const{top:t,right:N,bottom:me,left:pe}=u,Le=[];return[t,N,pe,me].every(Ye=>!!Ye)?Le.push([de,getBoxSidesShorthandValue(u)]):(t&&Le.push([de+"-top",t]),N&&Le.push([de+"-right",N]),me&&Le.push([de+"-bottom",me]),pe&&Le.push([de+"-left",pe])),Le}}function getBoxSidesShorthandValue({top:de,right:u,bottom:t,left:N}){const me=[];return N!==u?me.push(de,u,t,N):t!==de?me.push(de,u,t):u!==de?me.push(de,u):me.push(de),me.join(" ")}function getPositionShorthandNormalizer(de){return u=>({path:de,value:getBoxSidesValues(u)})}function getShorthandValues(de){const u=de.trim().slice(0,1500).matchAll(CSS_SHORTHAND_VALUE_REGEXP);return Array.from(u).map(t=>t[0])}function addBackgroundRules(de){de.setNormalizer("background",getBackgroundNormalizer()),de.setNormalizer("background-color",getBackgroundColorNormalizer()),de.setReducer("background",getBackgroundReducer()),de.setStyleRelation("background",["background-color"])}function getBackgroundNormalizer(){return de=>{const u={},t=getShorthandValues(de);for(const N of t)isRepeat(N)?(u.repeat=u.repeat||[],u.repeat.push(N)):isPosition(N)?(u.position=u.position||[],u.position.push(N)):isAttachment(N)?u.attachment=N:isColor(N)?u.color=N:isURL(N)&&(u.image=N);return{path:"background",value:u}}}function getBackgroundColorNormalizer(){return de=>({path:"background.color",value:de})}function getBackgroundReducer(){return de=>{const u=[];return u.push(["background-color",de.color]),u}}function addBorderRules(de){de.setNormalizer("border",getBorderNormalizer()),de.setNormalizer("border-top",getBorderPositionNormalizer("top")),de.setNormalizer("border-right",getBorderPositionNormalizer("right")),de.setNormalizer("border-bottom",getBorderPositionNormalizer("bottom")),de.setNormalizer("border-left",getBorderPositionNormalizer("left")),de.setNormalizer("border-color",getBorderPropertyNormalizer("color")),de.setNormalizer("border-width",getBorderPropertyNormalizer("width")),de.setNormalizer("border-style",getBorderPropertyNormalizer("style")),de.setNormalizer("border-top-color",getBorderPropertyPositionNormalizer("color","top")),de.setNormalizer("border-top-style",getBorderPropertyPositionNormalizer("style","top")),de.setNormalizer("border-top-width",getBorderPropertyPositionNormalizer("width","top")),de.setNormalizer("border-right-color",getBorderPropertyPositionNormalizer("color","right")),de.setNormalizer("border-right-style",getBorderPropertyPositionNormalizer("style","right")),de.setNormalizer("border-right-width",getBorderPropertyPositionNormalizer("width","right")),de.setNormalizer("border-bottom-color",getBorderPropertyPositionNormalizer("color","bottom")),de.setNormalizer("border-bottom-style",getBorderPropertyPositionNormalizer("style","bottom")),de.setNormalizer("border-bottom-width",getBorderPropertyPositionNormalizer("width","bottom")),de.setNormalizer("border-left-color",getBorderPropertyPositionNormalizer("color","left")),de.setNormalizer("border-left-style",getBorderPropertyPositionNormalizer("style","left")),de.setNormalizer("border-left-width",getBorderPropertyPositionNormalizer("width","left")),de.setExtractor("border-top",getBorderPositionExtractor("top")),de.setExtractor("border-right",getBorderPositionExtractor("right")),de.setExtractor("border-bottom",getBorderPositionExtractor("bottom")),de.setExtractor("border-left",getBorderPositionExtractor("left")),de.setExtractor("border-top-color","border.color.top"),de.setExtractor("border-right-color","border.color.right"),de.setExtractor("border-bottom-color","border.color.bottom"),de.setExtractor("border-left-color","border.color.left"),de.setExtractor("border-top-width","border.width.top"),de.setExtractor("border-right-width","border.width.right"),de.setExtractor("border-bottom-width","border.width.bottom"),de.setExtractor("border-left-width","border.width.left"),de.setExtractor("border-top-style","border.style.top"),de.setExtractor("border-right-style","border.style.right"),de.setExtractor("border-bottom-style","border.style.bottom"),de.setExtractor("border-left-style","border.style.left"),de.setReducer("border-color",getBoxSidesValueReducer("border-color")),de.setReducer("border-style",getBoxSidesValueReducer("border-style")),de.setReducer("border-width",getBoxSidesValueReducer("border-width")),de.setReducer("border-top",getBorderPositionReducer("top")),de.setReducer("border-right",getBorderPositionReducer("right")),de.setReducer("border-bottom",getBorderPositionReducer("bottom")),de.setReducer("border-left",getBorderPositionReducer("left")),de.setReducer("border",getBorderReducer()),de.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),de.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),de.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),de.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),de.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),de.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),de.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),de.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function getBorderNormalizer(){return de=>{const{color:u,style:t,width:N}=normalizeBorderShorthand(de);return{path:"border",value:{color:getBoxSidesValues(u),style:getBoxSidesValues(t),width:getBoxSidesValues(N)}}}}function getBorderPositionNormalizer(de){return u=>{const{color:t,style:N,width:me}=normalizeBorderShorthand(u),pe={};return t!==void 0&&(pe.color={[de]:t}),N!==void 0&&(pe.style={[de]:N}),me!==void 0&&(pe.width={[de]:me}),{path:"border",value:pe}}}function getBorderPropertyNormalizer(de){return u=>({path:"border",value:toBorderPropertyShorthand(u,de)})}function toBorderPropertyShorthand(de,u){return{[u]:getBoxSidesValues(de)}}function getBorderPropertyPositionNormalizer(de,u){return t=>({path:"border",value:{[de]:{[u]:t}}})}function getBorderPositionExtractor(de){return(u,t)=>{if(t.border)return extractBorderPosition(t.border,de)}}function extractBorderPosition(de,u){const t={};return de.width&&de.width[u]&&(t.width=de.width[u]),de.style&&de.style[u]&&(t.style=de.style[u]),de.color&&de.color[u]&&(t.color=de.color[u]),t}function normalizeBorderShorthand(de){const u={},t=getShorthandValues(de);for(const N of t)isLength(N)||/thin|medium|thick/.test(N)?u.width=N:isLineStyle(N)?u.style=N:u.color=N;return u}function getBorderReducer(){return u=>{const t=extractBorderPosition(u,"top"),N=extractBorderPosition(u,"right"),me=extractBorderPosition(u,"bottom"),pe=extractBorderPosition(u,"left"),Le=[t,N,me,pe],Ye={width:de(Le,"width"),style:de(Le,"style"),color:de(Le,"color")},nt=reduceBorderPosition(Ye,"all");return nt.length?nt:[...Object.entries(Ye).reduce((ft,[mt,bt])=>(bt&&(ft.push([`border-${mt}`,bt]),Le.forEach(yt=>delete yt[mt])),ft),[]),...reduceBorderPosition(t,"top"),...reduceBorderPosition(N,"right"),...reduceBorderPosition(me,"bottom"),...reduceBorderPosition(pe,"left")]};function de(u,t){return u.map(N=>N[t]).reduce((N,me)=>N==me?N:null)}}function getBorderPositionReducer(de){return u=>reduceBorderPosition(u,de)}function reduceBorderPosition(de,u){const t=[];if(de&&de.width&&t.push("width"),de&&de.style&&t.push("style"),de&&de.color&&t.push("color"),t.length==3){const N=t.map(me=>de[me]).join(" ");return[u=="all"?["border",N]:[`border-${u}`,N]]}return u=="all"?[]:t.map(N=>[`border-${u}-${N}`,de[N]])}function addMarginRules(de){de.setNormalizer("margin",getPositionShorthandNormalizer("margin")),de.setNormalizer("margin-top",u=>({path:"margin.top",value:u})),de.setNormalizer("margin-right",u=>({path:"margin.right",value:u})),de.setNormalizer("margin-bottom",u=>({path:"margin.bottom",value:u})),de.setNormalizer("margin-left",u=>({path:"margin.left",value:u})),de.setReducer("margin",getBoxSidesValueReducer("margin")),de.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function addPaddingRules(de){de.setNormalizer("padding",getPositionShorthandNormalizer("padding")),de.setNormalizer("padding-top",u=>({path:"padding.top",value:u})),de.setNormalizer("padding-right",u=>({path:"padding.right",value:u})),de.setNormalizer("padding-bottom",u=>({path:"padding.bottom",value:u})),de.setNormalizer("padding-left",u=>({path:"padding.left",value:u})),de.setReducer("padding",getBoxSidesValueReducer("padding")),de.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Watchdog{constructor(u){xt(this,"crashes",[]);xt(this,"state","initializing");xt(this,"_crashNumberLimit");xt(this,"_now",Date.now);xt(this,"_minimumNonErrorTimePeriod");xt(this,"_boundErrorHandler");xt(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof u.crashNumberLimit=="number"?u.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof u.minimumNonErrorTimePeriod=="number"?u.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const N="error"in t?t.error:t.reason;N instanceof Error&&this._handleError(N,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(u,t){this._listeners[u]||(this._listeners[u]=[]),this._listeners[u].push(t)}off(u,t){this._listeners[u]=this._listeners[u].filter(N=>N!==t)}_fire(u,...t){const N=this._listeners[u]||[];for(const me of N)me.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(u,t){if(this._shouldReactToError(u)){this.crashes.push({message:u.message,stack:u.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const N=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:u,causesRestart:N}),N?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(u){return u.is&&u.is("CKEditorError")&&u.context!==void 0&&u.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(u)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const u=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(u-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSubNodes(de,u=new Set){const t=[de],N=new Set;let me=0;for(;t.length>me;){const pe=t[me++];if(!(N.has(pe)||!shouldNodeBeIncluded(pe)||u.has(pe)))if(N.add(pe),Symbol.iterator in pe)try{for(const Le of pe)t.push(Le)}catch{}else for(const Le in pe)Le!=="defaultValue"&&t.push(pe[Le])}return N}function shouldNodeBeIncluded(de){const u=Object.prototype.toString.call(de),t=typeof de;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||u==="[object Date]"||u==="[object RegExp]"||u==="[object Module]"||de===void 0||de===null||de._watchdogExcluded||de instanceof EventTarget||de instanceof Event)}function areConnectedThroughProperties(de,u,t=new Set){if(de===u&&isObject$1(de))return!0;const N=getSubNodes(de,t),me=getSubNodes(u,t);for(const pe of N)if(me.has(pe))return!0;return!1}function isObject$1(de){return typeof de=="object"&&de!==null}class EditorWatchdog extends Watchdog{constructor(t,N={}){super(N);xt(this,"_editor",null);xt(this,"_lifecyclePromise",null);xt(this,"_throttledSave");xt(this,"_data");xt(this,"_lastDocumentVersion");xt(this,"_elementOrData");xt(this,"_initUsingData",!0);xt(this,"_editables",{});xt(this,"_config");xt(this,"_excludedProps");this._throttledSave=throttle(this._save.bind(this),typeof N.saveInterval=="number"?N.saveInterval:5e3),t&&(this._creator=(me,pe)=>t.create(me,pe)),this._destructor=me=>me.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},N=[],me=this._config.rootsAttributes||{},pe={};for(const[Ye,nt]of Object.entries(this._data.roots))nt.isLoaded?(t[Ye]="",pe[Ye]=me[Ye]||{}):N.push(Ye);const Le={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:N,rootsAttributes:pe,_watchdogInitialData:this._data};return delete Le.initialData,Le.extraPlugins.push(EditorWatchdogInitPlugin),this._initUsingData?this.create(t,Le,Le.context):isElement$2(this._elementOrData)?this.create(this._elementOrData,Le,Le.context):this.create(this._editables,Le,Le.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,N=this._config,me){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(N)||{},this._config.context=me,this._creator(t,this._config))).then(pe=>{this._editor=pe,pe.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=pe.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(N){console.error(N,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,N=t.model.document.roots.filter(nt=>nt.isAttached()&&nt.rootName!="$graveyard"),{plugins:me}=t,pe=me.has("CommentsRepository")&&me.get("CommentsRepository"),Le=me.has("TrackChanges")&&me.get("TrackChanges"),Ye={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};N.forEach(nt=>{Ye.roots[nt.rootName]={content:JSON.stringify(Array.from(nt.getChildren())),attributes:JSON.stringify(Array.from(nt.getAttributes())),isLoaded:nt._isLoaded}});for(const nt of t.model.markers)nt._affectsData&&(Ye.markers[nt.name]={rangeJSON:nt.getRange().toJSON(),usingOperation:nt._managedUsingOperations,affectsData:nt._affectsData});return pe&&(Ye.commentThreads=JSON.stringify(pe.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),Le&&(Ye.suggestions=JSON.stringify(Le.getSuggestions({toJSON:!0,skipNotAttached:!0}))),Ye}_getEditables(){const t={};for(const N of this.editor.model.document.getRootNames()){const me=this.editor.ui.getEditableElement(N);me&&(t[N]=me)}return t}_isErrorComingFromThisItem(t){return areConnectedThroughProperties(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return cloneDeepWith(t,(N,me)=>{if(isElement$2(N)||me==="context")return N})}}class EditorWatchdogInitPlugin{constructor(u){xt(this,"editor");xt(this,"_data");this.editor=u,this._data=u.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",u=>{u.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(u,t){if("name"in t){const N=u.createElement(t.name,t.attributes);if(t.children)for(const me of t.children)N._appendChild(this._createNode(u,me));return N}else return u.createText(t.data,t.attributes)}_restoreEditorData(u){const t=this.editor;Object.entries(this._data.roots).forEach(([N,{content:me,attributes:pe}])=>{const Le=JSON.parse(me),Ye=JSON.parse(pe),nt=t.model.document.getRoot(N);for(const[ot,ft]of Ye)u.setAttribute(ot,ft,nt);for(const ot of Le){const ft=this._createNode(u,ot);u.insert(ft,nt,"end")}}),Object.entries(this._data.markers).forEach(([N,me])=>{const{document:pe}=t.model,{rangeJSON:{start:Le,end:Ye},...nt}=me,ot=pe.getRoot(Le.root),ft=u.createPositionFromPath(ot,Le.path,Le.stickiness),mt=u.createPositionFromPath(ot,Ye.path,Ye.stickiness),bt=u.createRange(ft,mt);u.addMarker(N,{range:bt,...nt})})}_restoreCollaborationData(){const u=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);u.forEach(N=>{const me=this.editor.config.get("collaboration.channelId"),pe=this.editor.plugins.get("CommentsRepository");pe.hasCommentThread(N.threadId)&&pe.getCommentThread(N.threadId).remove(),pe.addCommentThread({channelId:me,...N})}),t.forEach(N=>{const me=this.editor.plugins.get("TrackChangesEditing");if(me.hasSuggestion(N.id)){const pe=me.getSuggestion(N.id);pe.attributes=N.attributes}else me.addSuggestionData(N)})}}const mainQueueId=Symbol("MainQueueId");class ContextWatchdog extends Watchdog{constructor(t,N={}){super(N);xt(this,"_watchdogs",new Map);xt(this,"_watchdogConfig");xt(this,"_context",null);xt(this,"_contextProps",new Set);xt(this,"_actionQueues",new ActionQueues);xt(this,"_contextConfig");xt(this,"_item");this._watchdogConfig=N,this._creator=me=>t.create(me),this._destructor=me=>me.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(mainQueueId,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const N=toArray$1(t);return Promise.all(N.map(me=>this._actionQueues.enqueue(me.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let pe;if(this._watchdogs.has(me.id))throw new Error(`Item with the given id is already added: '${me.id}'.`);if(me.type==="editor")return pe=new EditorWatchdog(null,this._watchdogConfig),pe.setCreator(me.creator),pe._setExcludedProperties(this._contextProps),me.destructor&&pe.setDestructor(me.destructor),this._watchdogs.set(me.id,pe),pe.on("error",(Le,{error:Ye,causesRestart:nt})=>{this._fire("itemError",{itemId:me.id,error:Ye}),nt&&this._actionQueues.enqueue(me.id,()=>new Promise(ot=>{const ft=()=>{pe.off("restart",ft),this._fire("itemRestart",{itemId:me.id}),ot()};pe.on("restart",ft)}))}),pe.create(me.sourceElementOrData,me.config,this._context);throw new Error(`Not supported item type: '${me.type}'.`)})))}remove(t){const N=toArray$1(t);return Promise.all(N.map(me=>this._actionQueues.enqueue(me,()=>{const pe=this._getWatchdog(me);return this._watchdogs.delete(me),pe.destroy()})))}destroy(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=getSubNodes(this._context),Promise.all(Array.from(this._watchdogs.values()).map(N=>(N._setExcludedProperties(this._contextProps),N.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(N=>N.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const N=this._watchdogs.get(t);if(!N)throw new Error(`Item with the given id was not registered: ${t}.`);return N}_isErrorComingFromThisItem(t){for(const N of this._watchdogs.values())if(N._isErrorComingFromThisItem(t))return!1;return areConnectedThroughProperties(this._context,t.context)}}class ActionQueues{constructor(){xt(this,"_onEmptyCallbacks",[]);xt(this,"_queues",new Map);xt(this,"_activeActions",0)}onEmpty(u){this._onEmptyCallbacks.push(u)}enqueue(u,t){const N=u===mainQueueId;this._activeActions++,this._queues.get(u)||this._queues.set(u,Promise.resolve());const pe=(N?Promise.all(this._queues.values()):Promise.all([this._queues.get(mainQueueId),this._queues.get(u)])).then(t),Le=pe.catch(()=>{});return this._queues.set(u,Le),pe.finally(()=>{this._activeActions--,this._queues.get(u)===Le&&this._activeActions===0&&this._onEmptyCallbacks.forEach(Ye=>Ye())})}}function toArray$1(de){return Array.isArray(de)?de:[de]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Plugin extends ObservableMixin(){constructor(t){super();xt(this,"editor");xt(this,"_disableStack",new Set);this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable$1,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable$1),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function forceDisable$1(de){de.return=!1,de.stop()}class Command extends ObservableMixin(){constructor(t){super();xt(this,"editor");xt(this,"_isEnabledBasedOnSelection");xt(this,"_affectsData");xt(this,"_disableStack");this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",N=>{if(!this.affectsData)return;const me=t.model.document.selection,Le=!(me.getFirstPosition().root.rootName=="$graveyard")&&t.model.canEditAt(me);(t.isReadOnly||this._isEnabledBasedOnSelection&&!Le)&&(N.return=!1,N.stop())},{priority:"highest"}),this.on("execute",N=>{this.isEnabled||N.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function forceDisable(de){de.return=!1,de.stop()}class MultiCommand extends Command{constructor(){super(...arguments);xt(this,"_childCommandsDefinitions",[])}refresh(){}execute(...t){const N=this._getFirstEnabledCommand();return!!N&&N.execute(t)}registerChildCommand(t,N={}){insertToPriorityArray(this._childCommandsDefinitions,{command:t,priority:N.priority||"normal"}),t.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const t=this._childCommandsDefinitions.find(({command:N})=>N.isEnabled);return t&&t.command}}class PluginCollection extends EmitterMixin(){constructor(t,N=[],me=[]){super();xt(this,"_context");xt(this,"_plugins",new Map);xt(this,"_availablePlugins");xt(this,"_contextPlugins");this._context=t,this._availablePlugins=new Map;for(const pe of N)pe.pluginName&&this._availablePlugins.set(pe.pluginName,pe);this._contextPlugins=new Map;for(const[pe,Le]of me)this._contextPlugins.set(pe,Le),this._contextPlugins.set(Le,pe),pe.pluginName&&this._availablePlugins.set(pe.pluginName,pe)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const N=this._plugins.get(t);if(!N){let me=t;throw typeof t=="function"&&(me=t.pluginName||t.name),new CKEditorError("plugincollection-plugin-not-loaded",this._context,{plugin:me})}return N}has(t){return this._plugins.has(t)}init(t,N=[],me=[]){const pe=this,Le=this._context;_t(t),Tt(t);const Ye=t.filter(Lt=>!bt(Lt,N)),nt=[...Ct(Ye)];Nt(nt,me);const ot=Bt(nt);return Ot(ot,"init").then(()=>Ot(ot,"afterInit")).then(()=>ot);function ft(Lt){return typeof Lt=="function"}function mt(Lt){return ft(Lt)&&!!Lt.isContextPlugin}function bt(Lt,Et){return Et.some(kt=>kt===Lt||yt(Lt)===kt||yt(kt)===Lt)}function yt(Lt){return ft(Lt)?Lt.pluginName||Lt.name:Lt}function _t(Lt,Et=new Set){Lt.forEach(kt=>{ft(kt)&&(Et.has(kt)||(Et.add(kt),kt.pluginName&&!pe._availablePlugins.has(kt.pluginName)&&pe._availablePlugins.set(kt.pluginName,kt),kt.requires&&_t(kt.requires,Et)))})}function Ct(Lt,Et=new Set){return Lt.map(kt=>ft(kt)?kt:pe._availablePlugins.get(kt)).reduce((kt,St)=>Et.has(St)?kt:(Et.add(St),St.requires&&(Tt(St.requires,St),Ct(St.requires,Et).forEach($t=>kt.add($t))),kt.add(St)),new Set)}function Tt(Lt,Et=null){Lt.map(kt=>ft(kt)?kt:pe._availablePlugins.get(kt)||kt).forEach(kt=>{At(kt,Et),It(kt,Et),Pt(kt,Et)})}function At(Lt,Et){if(!ft(Lt))throw Et?new CKEditorError("plugincollection-soft-required",Le,{missingPlugin:Lt,requiredBy:yt(Et)}):new CKEditorError("plugincollection-plugin-not-found",Le,{plugin:Lt})}function It(Lt,Et){if(mt(Et)&&!mt(Lt))throw new CKEditorError("plugincollection-context-required",Le,{plugin:yt(Lt),requiredBy:yt(Et)})}function Pt(Lt,Et){if(Et&&bt(Lt,N))throw new CKEditorError("plugincollection-required",Le,{plugin:yt(Lt),requiredBy:yt(Et)})}function Bt(Lt){return Lt.map(Et=>{let kt=pe._contextPlugins.get(Et);return kt=kt||new Et(Le),pe._add(Et,kt),kt})}function Ot(Lt,Et){return Lt.reduce((kt,St)=>!St[Et]||pe._contextPlugins.has(St)?kt:kt.then(St[Et].bind(St)),Promise.resolve())}function Nt(Lt,Et){for(const kt of Et){if(typeof kt!="function")throw new CKEditorError("plugincollection-replace-plugin-invalid-type",null,{pluginItem:kt});const St=kt.pluginName;if(!St)throw new CKEditorError("plugincollection-replace-plugin-missing-name",null,{pluginItem:kt});if(kt.requires&&kt.requires.length)throw new CKEditorError("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:St});const $t=pe._availablePlugins.get(St);if(!$t)throw new CKEditorError("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:St});const zt=Lt.indexOf($t);if(zt===-1){if(pe._contextPlugins.has($t))return;throw new CKEditorError("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:St})}if($t.requires&&$t.requires.length)throw new CKEditorError("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:St});Lt.splice(zt,1,kt),pe._availablePlugins.set(St,kt)}}}destroy(){const t=[];for(const[,N]of this)typeof N.destroy=="function"&&!this._contextPlugins.has(N)&&t.push(N.destroy());return Promise.all(t)}_add(t,N){this._plugins.set(t,N);const me=t.pluginName;if(me){if(this._plugins.has(me))throw new CKEditorError("plugincollection-plugin-name-conflict",null,{pluginName:me,plugin1:this._plugins.get(me).constructor,plugin2:t});this._plugins.set(me,N)}}}class Context{constructor(u){xt(this,"config");xt(this,"plugins");xt(this,"locale");xt(this,"t");xt(this,"editors");xt(this,"_contextOwner",null);const{translations:t,...N}=u||{};this.config=new Config(N,this.constructor.defaultConfig);const me=this.constructor.builtinPlugins;this.config.define("plugins",me),this.plugins=new PluginCollection(this,me);const pe=this.config.get("language")||{};this.locale=new Locale({uiLanguage:typeof pe=="string"?pe:pe.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Collection}initPlugins(){const u=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const N of u.concat(t)){if(typeof N!="function")throw new CKEditorError("context-initplugins-constructor-only",null,{Plugin:N});if(N.isContextPlugin!==!0)throw new CKEditorError("context-initplugins-invalid-plugin",null,{Plugin:N})}return this.plugins.init(u,[],t)}destroy(){return Promise.all(Array.from(this.editors,u=>u.destroy())).then(()=>this.plugins.destroy())}_addEditor(u,t){if(this._contextOwner)throw new CKEditorError("context-addeditor-private-context");this.editors.add(u),t&&(this._contextOwner=u)}_removeEditor(u){return this.editors.has(u)&&this.editors.remove(u),this._contextOwner===u?this.destroy():Promise.resolve()}_getEditorConfig(){const u={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(u[t]=this.config.get(t));return u}static create(u){return new Promise(t=>{const N=new this(u);t(N.initPlugins().then(()=>N))})}}xt(Context,"defaultConfig"),xt(Context,"builtinPlugins");class ContextPlugin extends ObservableMixin(){constructor(t){super();xt(this,"context");this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class CommandCollection{constructor(){xt(this,"_commands");this._commands=new Map}add(u,t){this._commands.set(u,t)}get(u){return this._commands.get(u)}execute(u,...t){const N=this.get(u);if(!N)throw new CKEditorError("commandcollection-command-not-found",this,{commandName:u});return N.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const u of this.commands())u.destroy()}}class EditingKeystrokeHandler extends KeystrokeHandler{constructor(t){super();xt(this,"editor");this.editor=t}set(t,N,me={}){if(typeof N=="string"){const pe=N;N=(Le,Ye)=>{this.editor.execute(pe),Ye()}}super.set(t,N,me)}}const DEFAULT_CATEGORY_ID="contentEditing",DEFAULT_GROUP_ID="common";class Accessibility{constructor(u){xt(this,"keystrokeInfos",new Map);xt(this,"_editor");this._editor=u;const t=u.config.get("menuBar.isVisible"),N=u.locale.t;this.addKeystrokeInfoCategory({id:DEFAULT_CATEGORY_ID,label:N("Content editing keystrokes"),description:N("These keyboard shortcuts allow for quick access to content editing features.")});const me=[{label:N("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:N("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:N("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:N("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:N("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:N("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&me.push({label:N("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:N("User interface and content navigation keystrokes"),description:N("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:me}]})}addKeystrokeInfoCategory({id:u,label:t,description:N,groups:me}){this.keystrokeInfos.set(u,{id:u,label:t,description:N,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:u,id:DEFAULT_GROUP_ID}),me&&me.forEach(pe=>{this.addKeystrokeInfoGroup({categoryId:u,...pe})})}addKeystrokeInfoGroup({categoryId:u=DEFAULT_CATEGORY_ID,id:t,label:N,keystrokes:me}){const pe=this.keystrokeInfos.get(u);if(!pe)throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:u});pe.groups.set(t,{id:t,label:N,keystrokes:me||[]})}addKeystrokeInfos({categoryId:u=DEFAULT_CATEGORY_ID,groupId:t=DEFAULT_GROUP_ID,keystrokes:N}){if(!this.keystrokeInfos.has(u))throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:u,keystrokes:N});const me=this.keystrokeInfos.get(u);if(!me.groups.has(t))throw new CKEditorError("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:u,keystrokes:N});me.groups.get(t).keystrokes.push(...N)}}function getEditorUsageData(de){return{sessionId:getSessionId(),pageSessionId:getPageSessionID(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:getEditorType(de),plugins:getPluginsUsageData(de.plugins),distribution:getDistributionUsageData(),env:getEnvUsageData(),integration:Object.create(null),menuBar:{isVisible:!!de.config.get("menuBar.isVisible")},language:{ui:de.locale.uiLanguage,content:de.locale.contentLanguage},toolbar:{main:getToolbarUsageData(de.config.get("toolbar")),block:getToolbarUsageData(de.config.get("blockToolbar")),balloon:getToolbarUsageData(de.config.get("balloonToolbar"))}}}function getEditorType(de){return Object.getPrototypeOf(de).constructor.editorName}function getPluginsUsageData(de){return Array.from(de).filter(([u])=>!!u.pluginName).map(([u])=>{const{pluginName:t,isContextPlugin:N,isOfficialPlugin:me,isPremiumPlugin:pe}=u;return{isContext:!!N,isOfficial:!!me,isPremium:!!pe,name:t}})}function getToolbarUsageData(de){if(!de)return;const u=Array.isArray(de)?{items:de}:de,t=pe(u.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!u.shouldNotGroupWhenFull,items:me(t)};function me(Le){return Le.filter(Ye=>Ye!=="|"&&Ye!=="-")}function pe(Le){return Le.flatMap(Ye=>typeof Ye=="string"?[Ye]:pe(Ye.items))}}function getDistributionUsageData(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function getEnvUsageData(){let de="unknown",u="unknown";return env.isMac?de="mac":env.isWindows?de="windows":env.isiOS?de="ios":env.isAndroid&&(de="android"),env.isGecko?u="gecko":env.isBlink?u="blink":env.isSafari&&(u="safari"),{os:de,browser:u}}function getSessionId(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",uid()),localStorage.getItem("__ckeditor-session-id")}function getPageSessionID(){return global$1.window.CKEDITOR_PAGE_SESSION_ID=global$1.window.CKEDITOR_PAGE_SESSION_ID||uid(),global$1.window.CKEDITOR_PAGE_SESSION_ID}class Editor extends ObservableMixin(){constructor(t={}){super();xt(this,"accessibility");xt(this,"commands");xt(this,"config");xt(this,"conversion");xt(this,"data");xt(this,"editing");xt(this,"locale");xt(this,"model");xt(this,"plugins");xt(this,"keystrokes");xt(this,"t");xt(this,"_context");xt(this,"_readOnlyLocks");if("sanitizeHtml"in t)throw new CKEditorError("editor-config-sanitizehtml-not-supported");const N=this.constructor,{translations:me,...pe}=N.defaultConfig||{},{translations:Le=me,...Ye}=t,nt=t.language||pe.language;this._context=t.context||new Context({language:nt,translations:Le}),this._context._addEditor(this,!t.context);const ot=Array.from(N.builtinPlugins||[]);this.config=new Config(Ye,pe),this.config.define("plugins",ot),this.config.define(this._context._getEditorConfig()),mt(this.config),this.plugins=new PluginCollection(this,ot,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new CommandCollection,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Model$1,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const ft=new StylesProcessor;this.data=new DataController(this.model,ft),this.editing=new EditingController(this.model,ft),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Conversion([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new EditingKeystrokeHandler(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Accessibility(this),bt(this);function mt(yt){let _t=yt.get("licenseKey");if(!_t&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(_t=window.CKEDITOR_GLOBAL_LICENSE_KEY,yt.set("licenseKey",_t)),!_t)throw new CKEditorError("license-key-missing")}function bt(yt){const _t=yt.config.get("licenseKey"),Ct=window[Symbol.for("cke distribution")]||"sh";function Tt(kt){yt.enableReadOnlyMode(Symbol("invalidLicense")),yt._showLicenseError(kt)}function At(kt){const St=kt.split(".");return St.length!=3?null:St[1]}function It(kt){return["exp","jti","vc"].every($t=>$t in kt)}function Pt(kt){return Object.getOwnPropertyNames(kt).sort().filter(zt=>zt!="vc"&&kt[zt]!=null).map(zt=>kt[zt])}function Bt(kt){const{hostname:St}=new URL(window.location.href);if(kt.includes(St))return!0;const $t=St.split(".");return kt.filter(zt=>zt.includes("*")).map(zt=>zt.split(".")).filter(zt=>zt.length<=$t.length).map(zt=>Array($t.length-zt.length).fill(zt[0]==="*"?"*":"").concat(zt)).some(zt=>$t.every((Ut,qt)=>zt[qt]===Ut||zt[qt]==="*"))}if(_t=="GPL"){Ct=="cloud"&&Tt("distributionChannel");return}const Ot=At(_t);if(!Ot){Tt("invalid");return}const Nt=parseBase64EncodedObject(Ot);if(!Nt){Tt("invalid");return}if(!It(Nt)){Tt("invalid");return}if(Nt.distributionChannel&&!toArray$2(Nt.distributionChannel).includes(Ct)){Tt("distributionChannel");return}if(crc32(Pt(Nt))!=Nt.vc.toLowerCase()){Tt("invalid");return}if(new Date(Nt.exp*1e3)<releaseDate){Tt("expired");return}const Et=Nt.licensedHosts;if(Et&&Et.length>0&&!Bt(Et)){Tt("domainLimit");return}if(["evaluation","trial"].includes(Nt.licenseType)&&Nt.exp*1e3<Date.now()){Tt("expired");return}if(["development","evaluation","trial"].includes(Nt.licenseType)){const{licenseType:kt}=Nt,St=kt[0].toUpperCase()+kt.slice(1),$t=kt==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${St} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(` You are using ${$t} ${kt} license of CKEditor 5${kt==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(Nt.licenseType)){const kt=Nt.licenseType,St=setTimeout(()=>{Tt(`${kt}Limit`)},6e5);yt.on("destroy",()=>{clearTimeout(St)})}Nt.usageEndpoint&&yt.once("ready",()=>{const kt={requestId:uid(),requestTime:Math.round(Date.now()/1e3),license:_t,editor:collectUsageData(yt)};yt._sendUsageRequest(Nt.usageEndpoint,kt).then(St=>{const{status:$t,message:zt}=St;zt&&console.warn(zt),$t!="ok"&&Tt("usageLimit")},()=>{logError("license-key-validation-endpoint-not-reachable",{url:Nt.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new CKEditorError("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,N=t.get("plugins"),me=t.get("removePlugins")||[],pe=t.get("extraPlugins")||[],Le=t.get("substitutePlugins")||[];return this.plugins.init(N.concat(pe),me,Le)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(N=>this.once("ready",N))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...N){try{return this.commands.execute(t,...N)}catch(me){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(me,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}_showLicenseError(t,N){setTimeout(()=>{if(t=="invalid")throw new CKEditorError("invalid-license-key");if(t=="expired")throw new CKEditorError("license-key-expired");if(t=="domainLimit")throw new CKEditorError("license-key-domain-limit");if(t=="featureNotAllowed")throw new CKEditorError("license-key-plugin-not-allowed",null,{pluginName:N});if(t=="evaluationLimit")throw new CKEditorError("license-key-evaluation-limit");if(t=="trialLimit")throw new CKEditorError("license-key-trial-limit");if(t=="developmentLimit")throw new CKEditorError("license-key-development-limit");if(t=="usageLimit")throw new CKEditorError("license-key-usage-limit");if(t=="distributionChannel")throw new CKEditorError("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(t,N){const me=new Headers({"Content-Type":"application/json"}),pe=await fetch(new URL(t),{method:"POST",headers:me,body:JSON.stringify(N)});if(!pe.ok)throw new Error(`HTTP Response: ${pe.status}`);return pe.json()}}xt(Editor,"defaultConfig"),xt(Editor,"builtinPlugins"),xt(Editor,"Context",Context),xt(Editor,"EditorWatchdog",EditorWatchdog),xt(Editor,"ContextWatchdog",ContextWatchdog);function collectUsageData(de){const u=getEditorUsageData(de);function t(N,me){if(get(u,N)!==void 0)throw new CKEditorError("editor-usage-data-path-already-set",{path:N});set(u,N,me)}return de.fire("collectUsageData",{setUsageData:t}),u}function attachToForm(de){if(!isFunction(de.updateSourceElement))throw new CKEditorError("attachtoform-missing-elementapi-interface",de);const u=de.sourceElement;if(isTextArea(u)&&u.form){let t;const N=u.form,me=()=>de.updateSourceElement();isFunction(N.submit)&&(t=N.submit,N.submit=()=>{me(),t.apply(N)}),N.addEventListener("submit",me),de.on("destroy",()=>{N.removeEventListener("submit",me),t&&(N.submit=t)})}}function isTextArea(de){return!!de&&de.tagName.toLowerCase()==="textarea"}function ElementApiMixin(de){class u extends de{constructor(){super(...arguments);xt(this,"sourceElement")}updateSourceElement(me){if(!this.sourceElement)throw new CKEditorError("editor-missing-sourceelement",this);const pe=this.config.get("updateSourceElementOnDestroy"),Le=this.sourceElement instanceof HTMLTextAreaElement;if(!pe&&!Le){setDataInElement(this.sourceElement,"");return}const Ye=typeof me=="string"?me:this.data.get();setDataInElement(this.sourceElement,Ye)}}return u}ElementApiMixin.updateSourceElement=ElementApiMixin(Object).prototype.updateSourceElement;class PendingActions extends ContextPlugin{constructor(){super(...arguments);xt(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Collection({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if(typeof t!="string")throw new CKEditorError("pendingactions-add-invalid-message",this);const N=new(ObservableMixin());return N.set("message",t),this._actions.add(N),this.hasAny=!0,N}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var cancel='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',colorPalette='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',eraser='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',history='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',lowVision='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',textAlternative='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',loupe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',previousArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',nextArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',image='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',imageUpload='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',imageAssetManager='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',imageUrl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',alignBottom='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectBlockLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectBlockRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeCustom='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',objectSizeLarge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',objectSizeSmall='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',objectSizeMedium='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',pencil='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dragIndicator='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',bold='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',paragraph='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',importExport='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',redo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',undo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',bulletedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',numberedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',todoList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',codeBlock='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',browseFiles='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',heading1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',horizontalLine='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',html='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',indent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',outdent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',table='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',source=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,remove='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',bookmark='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',bookmarkInline='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',emoji=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const icons={bold,cancel,caption,check,cog,colorPalette,eraser,history,image,imageUpload,imageAssetManager,imageUrl,lowVision,textAlternative,loupe,previousArrow,nextArrow,importExport,paragraph,plus,text,alignBottom,alignMiddle,alignTop,alignLeft,alignCenter,alignRight,alignJustify,objectLeft,objectCenter,objectRight,objectFullWidth,objectInline,objectBlockLeft,objectBlockRight,objectSizeCustom,objectSizeFull,objectSizeLarge,objectSizeSmall,objectSizeMedium,pencil,pilcrow,quote,threeVerticalDots,dragIndicator,redo,undo,bulletedList,numberedList,todoList,codeBlock,browseFiles,heading1,heading2,heading3,heading4,heading5,heading6,horizontalLine,html,indent,outdent,table,source,remove,bookmark,bookmarkInline,emoji};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let FileReader$1=class extends ObservableMixin(){constructor(){super();xt(this,"total");xt(this,"_reader");xt(this,"_data");const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=N=>{this.loaded=N.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const N=this._reader;return this.total=t.size,new Promise((me,pe)=>{N.onload=()=>{const Le=N.result;this._data=Le,me(Le)},N.onerror=()=>{pe("error")},N.onabort=()=>{pe("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}};class FileRepository extends Plugin{constructor(){super(...arguments);xt(this,"loaders",new Collection);xt(this,"_loadersMap",new Map);xt(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,N)=>N?t/N*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return logWarning("filerepository-no-upload-adapter"),null;const N=new FileLoader(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(N),this._loadersMap.set(t,N),t instanceof Promise&&N.file.then(me=>{this._loadersMap.set(me,N)}).catch(()=>{}),N.on("change:uploaded",()=>{let me=0;for(const pe of this.loaders)me+=pe.uploaded;this.uploaded=me}),N.on("change:uploadTotal",()=>{let me=0;for(const pe of this.loaders)pe.uploadTotal&&(me+=pe.uploadTotal);this.uploadTotal=me}),N}destroyLoader(t){const N=t instanceof FileLoader?t:this.getLoader(t);N._destroy(),this.loaders.remove(N),this._loadersMap.forEach((me,pe)=>{me===N&&this._loadersMap.delete(pe)})}_updatePendingAction(){const t=this.editor.plugins.get(PendingActions);if(this.loaders.length){if(!this._pendingAction){const N=this.editor.t,me=pe=>`${N("Upload in progress")} ${parseInt(pe)}%.`;this._pendingAction=t.add(me(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",me)}}else t.remove(this._pendingAction),this._pendingAction=null}}class FileLoader extends ObservableMixin(){constructor(t,N){super();xt(this,"id");xt(this,"_filePromiseWrapper");xt(this,"_adapter");xt(this,"_reader");this.id=uid(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=N(this),this._reader=new FileReader$1,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(me,pe)=>pe?me/pe*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new CKEditorError("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if(this.status!=="reading")throw this.status;return this.status="idle",t}).catch(t=>{throw t==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:t)})}upload(){if(this.status!="idle")throw new CKEditorError("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{throw this.status==="aborted"?"aborted":(this.status="error",t)})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?t=="reading"?this._reader.abort():t=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const N={};return N.promise=new Promise((me,pe)=>{N.rejecter=pe,N.isFulfilled=!1,t.then(Le=>{N.isFulfilled=!0,me(Le)}).catch(Le=>{N.isFulfilled=!0,pe(Le)})}),N}}class Base64UploadAdapter extends Plugin{static get requires(){return[FileRepository]}static get pluginName(){return"Base64UploadAdapter"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(FileRepository).createUploadAdapter=u=>new Adapter$1(u)}}let Adapter$1=class{constructor(u){xt(this,"loader");xt(this,"reader");this.loader=u}upload(){return new Promise((u,t)=>{const N=this.reader=new window.FileReader;N.addEventListener("load",()=>{u({default:N.result})}),N.addEventListener("error",me=>{t(me)}),N.addEventListener("abort",()=>{t()}),this.loader.file.then(me=>{N.readAsDataURL(me)})})}abort(){this.reader.abort()}};var colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName||(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),colorName}var colorNameExports=requireColorName();const names=getDefaultExportFromCjs(colorNameExports);var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$1(de){var u,t=[],N=1,me;if(typeof de=="string")if(names[de])t=names[de].slice(),me="rgb";else if(de==="transparent")N=0,me="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(de)){var pe=de.slice(1),Le=pe.length,Ye=Le<=4;N=1,Ye?(t=[parseInt(pe[0]+pe[0],16),parseInt(pe[1]+pe[1],16),parseInt(pe[2]+pe[2],16)],Le===4&&(N=parseInt(pe[3]+pe[3],16)/255)):(t=[parseInt(pe[0]+pe[1],16),parseInt(pe[2]+pe[3],16),parseInt(pe[4]+pe[5],16)],Le===8&&(N=parseInt(pe[6]+pe[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),me="rgb"}else if(u=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(de)){var nt=u[1],ot=nt==="rgb",pe=nt.replace(/a$/,"");me=pe;var Le=pe==="cmyk"?4:pe==="gray"?1:3;t=u[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(bt,yt){if(/%$/.test(bt))return yt===Le?parseFloat(bt)/100:pe==="rgb"?parseFloat(bt)*255/100:parseFloat(bt);if(pe[yt]==="h"){if(/deg$/.test(bt))return parseFloat(bt);if(baseHues[bt]!==void 0)return baseHues[bt]}return parseFloat(bt)}),nt===pe&&t.push(1),N=ot||t[Le]===void 0?1:t[Le],t=t.slice(0,Le)}else de.length>10&&/[0-9](?:\s|\/)/.test(de)&&(t=de.match(/([0-9]+)/g).map(function(ft){return parseFloat(ft)}),me=de.match(/([a-z])/ig).join("").toLowerCase());else isNaN(de)?Array.isArray(de)||de.length?(t=[de[0],de[1],de[2]],me="rgb",N=de.length===4?de[3]:1):de instanceof Object&&(de.r!=null||de.red!=null||de.R!=null?(me="rgb",t=[de.r||de.red||de.R||0,de.g||de.green||de.G||0,de.b||de.blue||de.B||0]):(me="hsl",t=[de.h||de.hue||de.H||0,de.s||de.saturation||de.S||0,de.l||de.lightness||de.L||de.b||de.brightness]),N=de.a||de.alpha||de.opacity||1,de.opacity!=null&&(N/=100)):(me="rgb",t=[de>>>16,(de&65280)>>>8,de&255]);return{space:me,values:t,alpha:N}}var conversions,hasRequiredConversions;function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const de=requireColorName(),u={};for(const me of Object.keys(de))u[de[me]]=me;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=t;for(const me of Object.keys(t)){if(!("channels"in t[me]))throw new Error("missing channels property: "+me);if(!("labels"in t[me]))throw new Error("missing channel labels property: "+me);if(t[me].labels.length!==t[me].channels)throw new Error("channel and label counts mismatch: "+me);const{channels:pe,labels:Le}=t[me];delete t[me].channels,delete t[me].labels,Object.defineProperty(t[me],"channels",{value:pe}),Object.defineProperty(t[me],"labels",{value:Le})}t.rgb.hsl=function(me){const pe=me[0]/255,Le=me[1]/255,Ye=me[2]/255,nt=Math.min(pe,Le,Ye),ot=Math.max(pe,Le,Ye),ft=ot-nt;let mt,bt;ot===nt?mt=0:pe===ot?mt=(Le-Ye)/ft:Le===ot?mt=2+(Ye-pe)/ft:Ye===ot&&(mt=4+(pe-Le)/ft),mt=Math.min(mt*60,360),mt<0&&(mt+=360);const yt=(nt+ot)/2;return ot===nt?bt=0:yt<=.5?bt=ft/(ot+nt):bt=ft/(2-ot-nt),[mt,bt*100,yt*100]},t.rgb.hsv=function(me){let pe,Le,Ye,nt,ot;const ft=me[0]/255,mt=me[1]/255,bt=me[2]/255,yt=Math.max(ft,mt,bt),_t=yt-Math.min(ft,mt,bt),Ct=function(Tt){return(yt-Tt)/6/_t+1/2};return _t===0?(nt=0,ot=0):(ot=_t/yt,pe=Ct(ft),Le=Ct(mt),Ye=Ct(bt),ft===yt?nt=Ye-Le:mt===yt?nt=1/3+pe-Ye:bt===yt&&(nt=2/3+Le-pe),nt<0?nt+=1:nt>1&&(nt-=1)),[nt*360,ot*100,yt*100]},t.rgb.hwb=function(me){const pe=me[0],Le=me[1];let Ye=me[2];const nt=t.rgb.hsl(me)[0],ot=1/255*Math.min(pe,Math.min(Le,Ye));return Ye=1-1/255*Math.max(pe,Math.max(Le,Ye)),[nt,ot*100,Ye*100]},t.rgb.cmyk=function(me){const pe=me[0]/255,Le=me[1]/255,Ye=me[2]/255,nt=Math.min(1-pe,1-Le,1-Ye),ot=(1-pe-nt)/(1-nt)||0,ft=(1-Le-nt)/(1-nt)||0,mt=(1-Ye-nt)/(1-nt)||0;return[ot*100,ft*100,mt*100,nt*100]};function N(me,pe){return(me[0]-pe[0])**2+(me[1]-pe[1])**2+(me[2]-pe[2])**2}return t.rgb.keyword=function(me){const pe=u[me];if(pe)return pe;let Le=1/0,Ye;for(const nt of Object.keys(de)){const ot=de[nt],ft=N(me,ot);ft<Le&&(Le=ft,Ye=nt)}return Ye},t.keyword.rgb=function(me){return de[me]},t.rgb.xyz=function(me){let pe=me[0]/255,Le=me[1]/255,Ye=me[2]/255;pe=pe>.04045?((pe+.055)/1.055)**2.4:pe/12.92,Le=Le>.04045?((Le+.055)/1.055)**2.4:Le/12.92,Ye=Ye>.04045?((Ye+.055)/1.055)**2.4:Ye/12.92;const nt=pe*.4124+Le*.3576+Ye*.1805,ot=pe*.2126+Le*.7152+Ye*.0722,ft=pe*.0193+Le*.1192+Ye*.9505;return[nt*100,ot*100,ft*100]},t.rgb.lab=function(me){const pe=t.rgb.xyz(me);let Le=pe[0],Ye=pe[1],nt=pe[2];Le/=95.047,Ye/=100,nt/=108.883,Le=Le>.008856?Le**(1/3):7.787*Le+16/116,Ye=Ye>.008856?Ye**(1/3):7.787*Ye+16/116,nt=nt>.008856?nt**(1/3):7.787*nt+16/116;const ot=116*Ye-16,ft=500*(Le-Ye),mt=200*(Ye-nt);return[ot,ft,mt]},t.hsl.rgb=function(me){const pe=me[0]/360,Le=me[1]/100,Ye=me[2]/100;let nt,ot,ft;if(Le===0)return ft=Ye*255,[ft,ft,ft];Ye<.5?nt=Ye*(1+Le):nt=Ye+Le-Ye*Le;const mt=2*Ye-nt,bt=[0,0,0];for(let yt=0;yt<3;yt++)ot=pe+1/3*-(yt-1),ot<0&&ot++,ot>1&&ot--,6*ot<1?ft=mt+(nt-mt)*6*ot:2*ot<1?ft=nt:3*ot<2?ft=mt+(nt-mt)*(2/3-ot)*6:ft=mt,bt[yt]=ft*255;return bt},t.hsl.hsv=function(me){const pe=me[0];let Le=me[1]/100,Ye=me[2]/100,nt=Le;const ot=Math.max(Ye,.01);Ye*=2,Le*=Ye<=1?Ye:2-Ye,nt*=ot<=1?ot:2-ot;const ft=(Ye+Le)/2,mt=Ye===0?2*nt/(ot+nt):2*Le/(Ye+Le);return[pe,mt*100,ft*100]},t.hsv.rgb=function(me){const pe=me[0]/60,Le=me[1]/100;let Ye=me[2]/100;const nt=Math.floor(pe)%6,ot=pe-Math.floor(pe),ft=255*Ye*(1-Le),mt=255*Ye*(1-Le*ot),bt=255*Ye*(1-Le*(1-ot));switch(Ye*=255,nt){case 0:return[Ye,bt,ft];case 1:return[mt,Ye,ft];case 2:return[ft,Ye,bt];case 3:return[ft,mt,Ye];case 4:return[bt,ft,Ye];case 5:return[Ye,ft,mt]}},t.hsv.hsl=function(me){const pe=me[0],Le=me[1]/100,Ye=me[2]/100,nt=Math.max(Ye,.01);let ot,ft;ft=(2-Le)*Ye;const mt=(2-Le)*nt;return ot=Le*nt,ot/=mt<=1?mt:2-mt,ot=ot||0,ft/=2,[pe,ot*100,ft*100]},t.hwb.rgb=function(me){const pe=me[0]/360;let Le=me[1]/100,Ye=me[2]/100;const nt=Le+Ye;let ot;nt>1&&(Le/=nt,Ye/=nt);const ft=Math.floor(6*pe),mt=1-Ye;ot=6*pe-ft,(ft&1)!==0&&(ot=1-ot);const bt=Le+ot*(mt-Le);let yt,_t,Ct;switch(ft){default:case 6:case 0:yt=mt,_t=bt,Ct=Le;break;case 1:yt=bt,_t=mt,Ct=Le;break;case 2:yt=Le,_t=mt,Ct=bt;break;case 3:yt=Le,_t=bt,Ct=mt;break;case 4:yt=bt,_t=Le,Ct=mt;break;case 5:yt=mt,_t=Le,Ct=bt;break}return[yt*255,_t*255,Ct*255]},t.cmyk.rgb=function(me){const pe=me[0]/100,Le=me[1]/100,Ye=me[2]/100,nt=me[3]/100,ot=1-Math.min(1,pe*(1-nt)+nt),ft=1-Math.min(1,Le*(1-nt)+nt),mt=1-Math.min(1,Ye*(1-nt)+nt);return[ot*255,ft*255,mt*255]},t.xyz.rgb=function(me){const pe=me[0]/100,Le=me[1]/100,Ye=me[2]/100;let nt,ot,ft;return nt=pe*3.2406+Le*-1.5372+Ye*-.4986,ot=pe*-.9689+Le*1.8758+Ye*.0415,ft=pe*.0557+Le*-.204+Ye*1.057,nt=nt>.0031308?1.055*nt**(1/2.4)-.055:nt*12.92,ot=ot>.0031308?1.055*ot**(1/2.4)-.055:ot*12.92,ft=ft>.0031308?1.055*ft**(1/2.4)-.055:ft*12.92,nt=Math.min(Math.max(0,nt),1),ot=Math.min(Math.max(0,ot),1),ft=Math.min(Math.max(0,ft),1),[nt*255,ot*255,ft*255]},t.xyz.lab=function(me){let pe=me[0],Le=me[1],Ye=me[2];pe/=95.047,Le/=100,Ye/=108.883,pe=pe>.008856?pe**(1/3):7.787*pe+16/116,Le=Le>.008856?Le**(1/3):7.787*Le+16/116,Ye=Ye>.008856?Ye**(1/3):7.787*Ye+16/116;const nt=116*Le-16,ot=500*(pe-Le),ft=200*(Le-Ye);return[nt,ot,ft]},t.lab.xyz=function(me){const pe=me[0],Le=me[1],Ye=me[2];let nt,ot,ft;ot=(pe+16)/116,nt=Le/500+ot,ft=ot-Ye/200;const mt=ot**3,bt=nt**3,yt=ft**3;return ot=mt>.008856?mt:(ot-16/116)/7.787,nt=bt>.008856?bt:(nt-16/116)/7.787,ft=yt>.008856?yt:(ft-16/116)/7.787,nt*=95.047,ot*=100,ft*=108.883,[nt,ot,ft]},t.lab.lch=function(me){const pe=me[0],Le=me[1],Ye=me[2];let nt;nt=Math.atan2(Ye,Le)*360/2/Math.PI,nt<0&&(nt+=360);const ft=Math.sqrt(Le*Le+Ye*Ye);return[pe,ft,nt]},t.lch.lab=function(me){const pe=me[0],Le=me[1],nt=me[2]/360*2*Math.PI,ot=Le*Math.cos(nt),ft=Le*Math.sin(nt);return[pe,ot,ft]},t.rgb.ansi16=function(me,pe=null){const[Le,Ye,nt]=me;let ot=pe===null?t.rgb.hsv(me)[2]:pe;if(ot=Math.round(ot/50),ot===0)return 30;let ft=30+(Math.round(nt/255)<<2|Math.round(Ye/255)<<1|Math.round(Le/255));return ot===2&&(ft+=60),ft},t.hsv.ansi16=function(me){return t.rgb.ansi16(t.hsv.rgb(me),me[2])},t.rgb.ansi256=function(me){const pe=me[0],Le=me[1],Ye=me[2];return pe===Le&&Le===Ye?pe<8?16:pe>248?231:Math.round((pe-8)/247*24)+232:16+36*Math.round(pe/255*5)+6*Math.round(Le/255*5)+Math.round(Ye/255*5)},t.ansi16.rgb=function(me){let pe=me%10;if(pe===0||pe===7)return me>50&&(pe+=3.5),pe=pe/10.5*255,[pe,pe,pe];const Le=(~~(me>50)+1)*.5,Ye=(pe&1)*Le*255,nt=(pe>>1&1)*Le*255,ot=(pe>>2&1)*Le*255;return[Ye,nt,ot]},t.ansi256.rgb=function(me){if(me>=232){const ot=(me-232)*10+8;return[ot,ot,ot]}me-=16;let pe;const Le=Math.floor(me/36)/5*255,Ye=Math.floor((pe=me%36)/6)/5*255,nt=pe%6/5*255;return[Le,Ye,nt]},t.rgb.hex=function(me){const Le=(((Math.round(me[0])&255)<<16)+((Math.round(me[1])&255)<<8)+(Math.round(me[2])&255)).toString(16).toUpperCase();return"000000".substring(Le.length)+Le},t.hex.rgb=function(me){const pe=me.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!pe)return[0,0,0];let Le=pe[0];pe[0].length===3&&(Le=Le.split("").map(mt=>mt+mt).join(""));const Ye=parseInt(Le,16),nt=Ye>>16&255,ot=Ye>>8&255,ft=Ye&255;return[nt,ot,ft]},t.rgb.hcg=function(me){const pe=me[0]/255,Le=me[1]/255,Ye=me[2]/255,nt=Math.max(Math.max(pe,Le),Ye),ot=Math.min(Math.min(pe,Le),Ye),ft=nt-ot;let mt,bt;return ft<1?mt=ot/(1-ft):mt=0,ft<=0?bt=0:nt===pe?bt=(Le-Ye)/ft%6:nt===Le?bt=2+(Ye-pe)/ft:bt=4+(pe-Le)/ft,bt/=6,bt%=1,[bt*360,ft*100,mt*100]},t.hsl.hcg=function(me){const pe=me[1]/100,Le=me[2]/100,Ye=Le<.5?2*pe*Le:2*pe*(1-Le);let nt=0;return Ye<1&&(nt=(Le-.5*Ye)/(1-Ye)),[me[0],Ye*100,nt*100]},t.hsv.hcg=function(me){const pe=me[1]/100,Le=me[2]/100,Ye=pe*Le;let nt=0;return Ye<1&&(nt=(Le-Ye)/(1-Ye)),[me[0],Ye*100,nt*100]},t.hcg.rgb=function(me){const pe=me[0]/360,Le=me[1]/100,Ye=me[2]/100;if(Le===0)return[Ye*255,Ye*255,Ye*255];const nt=[0,0,0],ot=pe%1*6,ft=ot%1,mt=1-ft;let bt=0;switch(Math.floor(ot)){case 0:nt[0]=1,nt[1]=ft,nt[2]=0;break;case 1:nt[0]=mt,nt[1]=1,nt[2]=0;break;case 2:nt[0]=0,nt[1]=1,nt[2]=ft;break;case 3:nt[0]=0,nt[1]=mt,nt[2]=1;break;case 4:nt[0]=ft,nt[1]=0,nt[2]=1;break;default:nt[0]=1,nt[1]=0,nt[2]=mt}return bt=(1-Le)*Ye,[(Le*nt[0]+bt)*255,(Le*nt[1]+bt)*255,(Le*nt[2]+bt)*255]},t.hcg.hsv=function(me){const pe=me[1]/100,Le=me[2]/100,Ye=pe+Le*(1-pe);let nt=0;return Ye>0&&(nt=pe/Ye),[me[0],nt*100,Ye*100]},t.hcg.hsl=function(me){const pe=me[1]/100,Ye=me[2]/100*(1-pe)+.5*pe;let nt=0;return Ye>0&&Ye<.5?nt=pe/(2*Ye):Ye>=.5&&Ye<1&&(nt=pe/(2*(1-Ye))),[me[0],nt*100,Ye*100]},t.hcg.hwb=function(me){const pe=me[1]/100,Le=me[2]/100,Ye=pe+Le*(1-pe);return[me[0],(Ye-pe)*100,(1-Ye)*100]},t.hwb.hcg=function(me){const pe=me[1]/100,Ye=1-me[2]/100,nt=Ye-pe;let ot=0;return nt<1&&(ot=(Ye-nt)/(1-nt)),[me[0],nt*100,ot*100]},t.apple.rgb=function(me){return[me[0]/65535*255,me[1]/65535*255,me[2]/65535*255]},t.rgb.apple=function(me){return[me[0]/255*65535,me[1]/255*65535,me[2]/255*65535]},t.gray.rgb=function(me){return[me[0]/100*255,me[0]/100*255,me[0]/100*255]},t.gray.hsl=function(me){return[0,0,me[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(me){return[0,100,me[0]]},t.gray.cmyk=function(me){return[0,0,0,me[0]]},t.gray.lab=function(me){return[me[0],0,0]},t.gray.hex=function(me){const pe=Math.round(me[0]/100*255)&255,Ye=((pe<<16)+(pe<<8)+pe).toString(16).toUpperCase();return"000000".substring(Ye.length)+Ye},t.rgb.gray=function(me){return[(me[0]+me[1]+me[2])/3/255*100]},conversions}var route,hasRequiredRoute;function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const de=requireConversions();function u(){const pe={},Le=Object.keys(de);for(let Ye=Le.length,nt=0;nt<Ye;nt++)pe[Le[nt]]={distance:-1,parent:null};return pe}function t(pe){const Le=u(),Ye=[pe];for(Le[pe].distance=0;Ye.length;){const nt=Ye.pop(),ot=Object.keys(de[nt]);for(let ft=ot.length,mt=0;mt<ft;mt++){const bt=ot[mt],yt=Le[bt];yt.distance===-1&&(yt.distance=Le[nt].distance+1,yt.parent=nt,Ye.unshift(bt))}}return Le}function N(pe,Le){return function(Ye){return Le(pe(Ye))}}function me(pe,Le){const Ye=[Le[pe].parent,pe];let nt=de[Le[pe].parent][pe],ot=Le[pe].parent;for(;Le[ot].parent;)Ye.unshift(Le[ot].parent),nt=N(de[Le[ot].parent][ot],nt),ot=Le[ot].parent;return nt.conversion=Ye,nt}return route=function(pe){const Le=t(pe),Ye={},nt=Object.keys(Le);for(let ot=nt.length,ft=0;ft<ot;ft++){const mt=nt[ft];Le[mt].parent!==null&&(Ye[mt]=me(mt,Le))}return Ye},route}var colorConvert,hasRequiredColorConvert;function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const de=requireConversions(),u=requireRoute(),t={},N=Object.keys(de);function me(Le){const Ye=function(...nt){const ot=nt[0];return ot==null?ot:(ot.length>1&&(nt=ot),Le(nt))};return"conversion"in Le&&(Ye.conversion=Le.conversion),Ye}function pe(Le){const Ye=function(...nt){const ot=nt[0];if(ot==null)return ot;ot.length>1&&(nt=ot);const ft=Le(nt);if(typeof ft=="object")for(let mt=ft.length,bt=0;bt<mt;bt++)ft[bt]=Math.round(ft[bt]);return ft};return"conversion"in Le&&(Ye.conversion=Le.conversion),Ye}return N.forEach(Le=>{t[Le]={},Object.defineProperty(t[Le],"channels",{value:de[Le].channels}),Object.defineProperty(t[Le],"labels",{value:de[Le].labels});const Ye=u(Le);Object.keys(Ye).forEach(ot=>{const ft=Ye[ot];t[Le][ot]=pe(ft),t[Le][ot].raw=me(ft)})}),colorConvert=t,colorConvert}var colorConvertExports=requireColorConvert();const index=getDefaultExportFromCjs(colorConvertExports),convert=_mergeNamespaces({__proto__:null,default:index},[colorConvertExports]),clamp$1=(de,u=0,t=1)=>de>t?t:de<u?u:de,round=(de,u=0,t=Math.pow(10,u))=>Math.round(t*de)/t,hexToHsva=de=>rgbaToHsva(hexToRgba(de)),hexToRgba=de=>(de[0]==="#"&&(de=de.substring(1)),de.length<6?{r:parseInt(de[0]+de[0],16),g:parseInt(de[1]+de[1],16),b:parseInt(de[2]+de[2],16),a:de.length===4?round(parseInt(de[3]+de[3],16)/255,2):1}:{r:parseInt(de.substring(0,2),16),g:parseInt(de.substring(2,4),16),b:parseInt(de.substring(4,6),16),a:de.length===8?round(parseInt(de.substring(6,8),16)/255,2):1}),hsvaToHex=de=>rgbaToHex(hsvaToRgba(de)),hsvaToHsla=({h:de,s:u,v:t,a:N})=>{const me=(200-u)*t/100;return{h:round(de),s:round(me>0&&me<200?u*t/100/(me<=100?me:200-me)*100:0),l:round(me/2),a:round(N,2)}},hsvaToHslString=de=>{const{h:u,s:t,l:N}=hsvaToHsla(de);return`hsl(${u}, ${t}%, ${N}%)`},hsvaToRgba=({h:de,s:u,v:t,a:N})=>{de=de/360*6,u=u/100,t=t/100;const me=Math.floor(de),pe=t*(1-u),Le=t*(1-(de-me)*u),Ye=t*(1-(1-de+me)*u),nt=me%6;return{r:round([t,Le,pe,pe,Ye,t][nt]*255),g:round([Ye,t,t,Le,pe,pe][nt]*255),b:round([pe,pe,Ye,t,t,Le][nt]*255),a:round(N,2)}},format=de=>{const u=de.toString(16);return u.length<2?"0"+u:u},rgbaToHex=({r:de,g:u,b:t,a:N})=>{const me=N<1?format(round(N*255)):"";return"#"+format(de)+format(u)+format(t)+me},rgbaToHsva=({r:de,g:u,b:t,a:N})=>{const me=Math.max(de,u,t),pe=me-Math.min(de,u,t),Le=pe?me===de?(u-t)/pe:me===u?2+(t-de)/pe:4+(de-u)/pe:0;return{h:round(60*(Le<0?Le+6:Le)),s:round(me?pe/me*100:0),v:round(me/255*100),a:N}},equalColorObjects=(de,u)=>{if(de===u)return!0;for(const t in de)if(de[t]!==u[t])return!1;return!0},equalHex=(de,u)=>de.toLowerCase()===u.toLowerCase()?!0:equalColorObjects(hexToRgba(de),hexToRgba(u)),cache$1={},tpl=de=>{let u=cache$1[de];return u||(u=document.createElement("template"),u.innerHTML=de,cache$1[de]=u),u},fire=(de,u,t)=>{de.dispatchEvent(new CustomEvent(u,{bubbles:!0,detail:t}))};let hasTouched=!1;const isTouch=de=>"touches"in de,isValid=de=>hasTouched&&!isTouch(de)?!1:(hasTouched||(hasTouched=isTouch(de)),!0),pointerMove=(de,u)=>{const t=isTouch(u)?u.touches[0]:u,N=de.el.getBoundingClientRect();fire(de.el,"move",de.getMove({x:clamp$1((t.pageX-(N.left+window.pageXOffset))/N.width),y:clamp$1((t.pageY-(N.top+window.pageYOffset))/N.height)}))},keyMove=(de,u)=>{const t=u.keyCode;t>40||de.xy&&t<37||t<33||(u.preventDefault(),fire(de.el,"move",de.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class Slider{constructor(u,t,N,me){const pe=tpl(`<div role="slider" tabindex="0" part="${t}" ${N}><div part="${t}-pointer"></div></div>`);u.appendChild(pe.content.cloneNode(!0));const Le=u.querySelector(`[part=${t}]`);Le.addEventListener("mousedown",this),Le.addEventListener("touchstart",this),Le.addEventListener("keydown",this),this.el=Le,this.xy=me,this.nodes=[Le.firstChild,Le]}set dragging(u){const t=u?document.addEventListener:document.removeEventListener;t(hasTouched?"touchmove":"mousemove",this),t(hasTouched?"touchend":"mouseup",this)}handleEvent(u){switch(u.type){case"mousedown":case"touchstart":if(u.preventDefault(),!isValid(u)||!hasTouched&&u.button!=0)return;this.el.focus(),pointerMove(this,u),this.dragging=!0;break;case"mousemove":case"touchmove":u.preventDefault(),pointerMove(this,u);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":keyMove(this,u);break}}style(u){u.forEach((t,N)=>{for(const me in t)this.nodes[N].style.setProperty(me,t[me])})}}class Hue extends Slider{constructor(u){super(u,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:u}){this.h=u,this.style([{left:`${u/360*100}%`,color:hsvaToHslString({h:u,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${round(u)}`)}getMove(u,t){return{h:t?clamp$1(this.h+u.x*360,0,360):360*u.x}}}class Saturation extends Slider{constructor(u){super(u,"saturation",'aria-label="Color"',!0)}update(u){this.hsva=u,this.style([{top:`${100-u.v}%`,left:`${u.s}%`,color:hsvaToHslString(u)},{"background-color":hsvaToHslString({h:u.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${round(u.s)}%, Brightness ${round(u.v)}%`)}getMove(u,t){return{s:t?clamp$1(this.hsva.s+u.x*100,0,100):u.x*100,v:t?clamp$1(this.hsva.v-u.y*100,0,100):Math.round(100-u.y*100)}}}const css=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',hueCss="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",saturationCss="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",$isSame=Symbol("same"),$color=Symbol("color"),$hsva=Symbol("hsva"),$update=Symbol("update"),$parts=Symbol("parts"),$css=Symbol("css"),$sliders=Symbol("sliders");class ColorPicker extends HTMLElement{static get observedAttributes(){return["color"]}get[$css](){return[css,hueCss,saturationCss]}get[$sliders](){return[Saturation,Hue]}get color(){return this[$color]}set color(u){if(!this[$isSame](u)){const t=this.colorModel.toHsva(u);this[$update](t),this[$color]=u}}constructor(){super();const u=tpl(`<style>${this[$css].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(u.content.cloneNode(!0)),t.addEventListener("move",this),this[$parts]=this[$sliders].map(N=>new N(t))}connectedCallback(){if(this.hasOwnProperty("color")){const u=this.color;delete this.color,this.color=u}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(u,t,N){const me=this.colorModel.fromAttr(N);this[$isSame](me)||(this.color=me)}handleEvent(u){const t=this[$hsva],N={...t,...u.detail};this[$update](N);let me;!equalColorObjects(N,t)&&!this[$isSame](me=this.colorModel.fromHsva(N))&&(this[$color]=me,fire(this,"color-changed",{value:me}))}[$isSame](u){return this.color&&this.colorModel.equal(u,this.color)}[$update](u){this[$hsva]=u,this[$parts].forEach(t=>t.update(u))}}const colorModel={defaultColor:"#000",toHsva:hexToHsva,fromHsva:({h:de,s:u,v:t})=>hsvaToHex({h:de,s:u,v:t,a:1}),equal:equalHex,fromAttr:de=>de};class HexBase extends ColorPicker{get colorModel(){return colorModel}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ViewCollection extends Collection{constructor(t=[]){super(t,{idProperty:"viewUid"});xt(this,"_parentElement");this.on("add",(N,me,pe)=>{this._renderViewIntoCollectionParent(me,pe)}),this.on("remove",(N,me)=>{me.element&&this._parentElement&&me.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const N of this)this._renderViewIntoCollectionParent(N)}delegate(...t){if(!t.length||!isStringArray(t))throw new CKEditorError("ui-viewcollection-delegate-wrong-events",this);return{to:N=>{for(const me of this)for(const pe of t)me.delegate(pe).to(N);this.on("add",(me,pe)=>{for(const Le of t)pe.delegate(Le).to(N)}),this.on("remove",(me,pe)=>{for(const Le of t)pe.stopDelegating(Le,N)})}}}_renderViewIntoCollectionParent(t,N){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[N])}remove(t){return super.remove(t)}}function isStringArray(de){return de.every(u=>typeof u=="string")}const xhtmlNs="http://www.w3.org/1999/xhtml";class Template extends EmitterMixin(){constructor(t){super();xt(this,"ns");xt(this,"tag");xt(this,"text");xt(this,"attributes");xt(this,"children");xt(this,"eventListeners");xt(this,"_isRendered");xt(this,"_revertData");Object.assign(this,normalize(clone(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=getEmptyRevertData(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new CKEditorError("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(N){if(N.children)for(const me of N.children)isView$2(me)?yield me:isTemplate(me)&&(yield*t(me))}yield*t(this)}static bind(t,N){return{to(me,pe){return new TemplateToBinding({eventNameOrFunction:me,attribute:me,observable:t,emitter:N,callback:pe})},if(me,pe,Le){return new TemplateIfBinding({observable:t,emitter:N,attribute:me,valueIfTrue:pe,callback:Le})}}}static extend(t,N){if(t._isRendered)throw new CKEditorError("template-extend-render",[this,t]);extendTemplate(t,normalize(clone(N)))}_renderNode(t){let N;if(t.node?N=this.tag&&this.text:N=this.tag?this.text:!this.text,N)throw new CKEditorError("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let N=t.node;return N||(N=t.node=document.createElementNS(this.ns||xhtmlNs,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),N}_renderText(t){let N=t.node;return N?t.revertData.text=N.textContent:N=t.node=document.createTextNode(""),hasTemplateBinding(this.text)?this._bindToObservable({schema:this.text,updater:getTextUpdater(N),data:t}):N.textContent=this.text.join(""),N}_renderAttributes(t){if(!this.attributes)return;const N=t.node,me=t.revertData;for(const pe in this.attributes){const Le=N.getAttribute(pe),Ye=this.attributes[pe];me&&(me.attributes[pe]=Le);const nt=isNamespaced(Ye)?Ye[0].ns:null;if(hasTemplateBinding(Ye)){const ot=isNamespaced(Ye)?Ye[0].value:Ye;me&&shouldExtend(pe)&&ot.unshift(Le),this._bindToObservable({schema:ot,updater:getAttributeUpdater(N,pe,nt),data:t})}else if(pe=="style"&&typeof Ye[0]!="string")this._renderStyleAttribute(Ye[0],t);else{me&&Le&&shouldExtend(pe)&&Ye.unshift(Le);const ot=Ye.map(ft=>ft&&(ft.value||ft)).reduce((ft,mt)=>ft.concat(mt),[]).reduce(arrayValueReducer,"");isFalsy(ot)||N.setAttributeNS(nt,pe,ot)}}}_renderStyleAttribute(t,N){const me=N.node;for(const pe in t){const Le=t[pe];hasTemplateBinding(Le)?this._bindToObservable({schema:[Le],updater:getStyleUpdater(me,pe),data:N}):me.style[pe]=Le}}_renderElementChildren(t){const N=t.node,me=t.intoFragment?document.createDocumentFragment():N,pe=t.isApplying;let Le=0;for(const Ye of this.children)if(isViewCollection(Ye)){if(!pe){Ye.setParent(N);for(const nt of Ye)me.appendChild(nt.element)}}else if(isView$2(Ye))pe||(Ye.isRendered||Ye.render(),me.appendChild(Ye.element));else if(isNode(Ye))me.appendChild(Ye);else if(pe){const nt=t.revertData,ot=getEmptyRevertData();nt.children.push(ot),Ye._renderNode({intoFragment:!1,node:me.childNodes[Le++],isApplying:!0,revertData:ot})}else me.appendChild(Ye.render());t.intoFragment&&N.appendChild(me)}_setUpListeners(t){if(this.eventListeners)for(const N in this.eventListeners){const me=this.eventListeners[N].map(pe=>{const[Le,Ye]=N.split("@");return pe.activateDomEventListener(Le,Ye,t)});t.revertData&&t.revertData.bindings.push(me)}}_bindToObservable({schema:t,updater:N,data:me}){const pe=me.revertData;syncValueSchemaValue(t,N,me);const Le=t.filter(Ye=>!isFalsy(Ye)).filter(Ye=>Ye.observable).map(Ye=>Ye.activateAttributeListener(t,N,me));pe&&pe.bindings.push(Le)}_revertTemplateFromNode(t,N){for(const pe of N.bindings)for(const Le of pe)Le();if(N.text){t.textContent=N.text;return}const me=t;for(const pe in N.attributes){const Le=N.attributes[pe];Le===null?me.removeAttribute(pe):me.setAttribute(pe,Le)}for(let pe=0;pe<N.children.length;++pe)this._revertTemplateFromNode(me.childNodes[pe],N.children[pe])}}class TemplateBinding{constructor(u){xt(this,"attribute");xt(this,"observable");xt(this,"emitter");xt(this,"callback");this.attribute=u.attribute,this.observable=u.observable,this.emitter=u.emitter,this.callback=u.callback}getValue(u){const t=this.observable[this.attribute];return this.callback?this.callback(t,u):t}activateAttributeListener(u,t,N){const me=()=>syncValueSchemaValue(u,t,N);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,me),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,me)}}}class TemplateToBinding extends TemplateBinding{constructor(t){super(t);xt(this,"eventNameOrFunction");this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,N,me){const pe=(Le,Ye)=>{(!N||Ye.target.matches(N))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(Ye):this.observable.fire(this.eventNameOrFunction,Ye))};return this.emitter.listenTo(me.node,t,pe),()=>{this.emitter.stopListening(me.node,t,pe)}}}class TemplateIfBinding extends TemplateBinding{constructor(t){super(t);xt(this,"valueIfTrue");this.valueIfTrue=t.valueIfTrue}getValue(t){const N=super.getValue(t);return isFalsy(N)?!1:this.valueIfTrue||!0}}function hasTemplateBinding(de){return de?(de.value&&(de=de.value),Array.isArray(de)?de.some(hasTemplateBinding):de instanceof TemplateBinding):!1}function getValueSchemaValue(de,u){return de.map(t=>t instanceof TemplateBinding?t.getValue(u):t)}function syncValueSchemaValue(de,u,{node:t}){const N=getValueSchemaValue(de,t);let me;de.length==1&&de[0]instanceof TemplateIfBinding?me=N[0]:me=N.reduce(arrayValueReducer,""),isFalsy(me)?u.remove():u.set(me)}function getTextUpdater(de){return{set(u){de.textContent=u},remove(){de.textContent=""}}}function getAttributeUpdater(de,u,t){return{set(N){de.setAttributeNS(t,u,N)},remove(){de.removeAttributeNS(t,u)}}}function getStyleUpdater(de,u){return{set(t){de.style[u]=t},remove(){de.style[u]=null}}}function clone(de){return cloneDeepWith(de,t=>{if(t&&(t instanceof TemplateBinding||isTemplate(t)||isView$2(t)||isViewCollection(t)))return t})}function normalize(de){if(typeof de=="string"?de=normalizePlainTextDefinition(de):de.text&&normalizeTextDefinition(de),de.on&&(de.eventListeners=normalizeListeners(de.on),delete de.on),!de.text){de.attributes&&normalizeAttributes(de.attributes);const u=[];if(de.children)if(isViewCollection(de.children))u.push(de.children);else for(const t of de.children)isTemplate(t)||isView$2(t)||isNode(t)?u.push(t):u.push(new Template(t));de.children=u}return de}function normalizeAttributes(de){for(const u in de)de[u].value&&(de[u].value=toArray$2(de[u].value)),arrayify(de,u)}function normalizeListeners(de){for(const u in de)arrayify(de,u);return de}function normalizePlainTextDefinition(de){return{text:[de]}}function normalizeTextDefinition(de){de.text=toArray$2(de.text)}function arrayify(de,u){de[u]=toArray$2(de[u])}function arrayValueReducer(de,u){return isFalsy(u)?de:isFalsy(de)?u:`${de} ${u}`}function extendObjectValueArray(de,u){for(const t in u)de[t]?de[t].push(...u[t]):de[t]=u[t]}function extendTemplate(de,u){if(u.attributes&&(de.attributes||(de.attributes={}),extendObjectValueArray(de.attributes,u.attributes)),u.eventListeners&&(de.eventListeners||(de.eventListeners={}),extendObjectValueArray(de.eventListeners,u.eventListeners)),u.text&&de.text.push(...u.text),u.children&&u.children.length){if(de.children.length!=u.children.length)throw new CKEditorError("ui-template-extend-children-mismatch",de);let t=0;for(const N of u.children)extendTemplate(de.children[t++],N)}}function isFalsy(de){return!de&&de!==0}function isView$2(de){return de instanceof View}function isTemplate(de){return de instanceof Template}function isViewCollection(de){return de instanceof ViewCollection}function isNamespaced(de){return isObject$2(de[0])&&de[0].ns}function getEmptyRevertData(){return{children:[],bindings:[],attributes:{}}}function shouldExtend(de){return de=="class"||de=="style"}class View extends DomEmitterMixin(ObservableMixin()){constructor(t){super();xt(this,"element");xt(this,"isRendered");xt(this,"locale");xt(this,"t");xt(this,"template");xt(this,"_viewCollections");xt(this,"_unboundChildren");xt(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Collection,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(N,me)=>{me.locale=t,me.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Template.bind(this,this)}createCollection(t){const N=new ViewCollection(t);return this._viewCollections.add(N),N}registerChild(t){isIterable(t)||(t=[t]);for(const N of t)this._unboundChildren.add(N)}deregisterChild(t){isIterable(t)||(t=[t]);for(const N of t)this._unboundChildren.remove(N)}setTemplate(t){this.template=new Template(t)}extendTemplate(t){Template.extend(this.template,t)}render(){if(this.isRendered)throw new CKEditorError("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function clickOutsideHandler({emitter:de,activator:u,callback:t,contextElements:N,listenerOptions:me}){de.listenTo(document,"mousedown",(pe,Le)=>{if(!u())return;const Ye=typeof Le.composedPath=="function"?Le.composedPath():[],nt=typeof N=="function"?N():N;for(const ot of nt)if(ot.contains(Le.target)||Ye.includes(ot))return;t()},me)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CssTransitionDisablerMixin(de){class u extends de{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...N){super(...N),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function submitHandler({view:de}){de.listenTo(de.element,"submit",(u,t)=>{t.preventDefault(),de.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function addKeyboardHandlingForGrid({keystrokeHandler:de,focusTracker:u,gridItems:t,numberOfColumns:N,uiLanguageDirection:me}){const pe=typeof N=="number"?()=>N:N;de.set("arrowright",Le((ot,ft)=>me==="rtl"?nt(ot,ft.length):Ye(ot,ft.length))),de.set("arrowleft",Le((ot,ft)=>me==="rtl"?Ye(ot,ft.length):nt(ot,ft.length))),de.set("arrowup",Le((ot,ft)=>{let mt=ot-pe();return mt<0&&(mt=ot+pe()*Math.floor(ft.length/pe()),mt>ft.length-1&&(mt-=pe())),mt})),de.set("arrowdown",Le((ot,ft)=>{let mt=ot+pe();return mt>ft.length-1&&(mt=ot%pe()),mt}));function Le(ot){return ft=>{const mt=t.find(_t=>_t.element===u.focusedElement),bt=t.getIndex(mt),yt=ot(bt,t);t.get(yt).focus(),ft.stopPropagation(),ft.preventDefault()}}function Ye(ot,ft){return ot===ft-1?0:ot+1}function nt(ot,ft){return ot===0?ft-1:ot-1}}const al=class al extends View{constructor(){super();const u=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",u.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",u.if("isColorInherited","ck-icon_inherit-color")],viewBox:u.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),N=t.getAttribute("viewBox");N&&(this.viewBox=N);for(const{name:me,value:pe}of Array.from(t.attributes))al.presentationalAttributeNames.includes(me)&&this.element.setAttribute(me,pe);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(u=>{u.style.fill=this.fillColor})}};xt(al,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let IconView=al;class ButtonLabelView extends View{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const u=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:u.to("style"),id:u.to("id")},children:[{text:u.to("text")}]})}}class ButtonView extends View{constructor(t,N=new ButtonLabelView){super(t);xt(this,"children");xt(this,"labelView");xt(this,"iconView");xt(this,"keystrokeView");xt(this,"_focusDelayed",null);const me=this.bindTemplate,pe=uid();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${pe}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(N),this.iconView=new IconView,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const Le={tag:"button",attributes:{class:["ck","ck-button",me.to("class"),me.if("isEnabled","ck-disabled",Ye=>!Ye),me.if("isVisible","ck-hidden",Ye=>!Ye),me.to("isOn",Ye=>Ye?"ck-on":"ck-off"),me.if("withText","ck-button_with-text"),me.if("withKeystroke","ck-button_with-keystroke")],role:me.to("role"),type:me.to("type",Ye=>Ye||"button"),tabindex:me.to("tabindex"),"aria-checked":me.to("_ariaChecked"),"aria-pressed":me.to("_ariaPressed"),"aria-label":me.to("ariaLabel"),"aria-labelledby":me.to("ariaLabelledBy"),"aria-disabled":me.if("isEnabled",!0,Ye=>!Ye),"data-cke-tooltip-text":me.to("_tooltipString"),"data-cke-tooltip-position":me.to("tooltipPosition")},children:this.children,on:{click:me.to(Ye=>{this.isEnabled?this.fire("execute"):Ye.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(Ye,nt,ot)=>!nt||isCheckableRole(ot)?!1:String(!!Ye)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(Ye,nt,ot)=>!nt||!isCheckableRole(ot)?!1:String(!!Ye)),env.isSafari&&(this._focusDelayed||(this._focusDelayed=delay(()=>this.focus(),0)),Le.on.mousedown=me.to(()=>{this._focusDelayed()}),Le.on.mouseup=me.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(Le)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new View;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",N=>getEnvKeystrokeText(N))}]}),t}_getTooltipString(t,N,me){return t?typeof t=="string"?t:(me&&(me=getEnvKeystrokeText(me)),t instanceof Function?t(N,me):`${N}${me?` (${me})`:""}`):""}}function isCheckableRole(de){switch(de){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class FormHeaderView extends View{constructor(t,N={}){super(t);xt(this,"children");xt(this,"iconView");const me=this.bindTemplate;this.set("label",N.label||""),this.set("class",N.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",me.to("class")]},children:this.children}),N.icon&&(this.iconView=new IconView,this.iconView.content=N.icon,this.children.add(this.iconView));const pe=new View(t);pe.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:me.to("label")}]}),this.children.add(pe)}}class FocusCycler extends EmitterMixin(){constructor(t){super();xt(this,"focusables");xt(this,"focusTracker");xt(this,"keystrokeHandler");xt(this,"actions");if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const N in t.actions){let me=t.actions[N];typeof me=="string"&&(me=[me]);for(const pe of me)t.keystrokeHandler.set(pe,(Le,Ye)=>{this[N](),Ye()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(isDomFocusable)||null}get last(){return this.focusables.filter(isDomFocusable).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((N,me)=>{const pe=N.element===this.focusTracker.focusedElement;return pe&&(t=me),pe}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;if(t&&this.focusables.getIndex(t)===this.current){this.fire("forwardCycle");return}t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;if(t&&this.focusables.getIndex(t)===this.current){this.fire("backwardCycle");return}t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const N=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",me=>{const pe=N();this.focusNext(),pe!==N()&&me.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",me=>{const pe=N();this.focusPrevious(),pe!==N()&&me.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,N){t&&this.focusTracker.focusedElement!==t.element&&t.focus(N)}_getDomFocusableItem(t){const N=this.focusables.length;if(!N)return null;const me=this.current;if(me===null)return this[t===1?"first":"last"];let pe=this.focusables.get(me),Le=(me+N+t)%N;do{const Ye=this.focusables.get(Le);if(isDomFocusable(Ye)){pe=Ye;break}Le=(Le+N+t)%N}while(Le!==me);return pe}}function isDomFocusable(de){return isFocusable(de)&&isVisible(de.element)}function isFocusable(de){return"focus"in de&&typeof de.focus=="function"}function isViewWithFocusCycler(de){return isFocusable(de)&&"focusCycler"in de&&de.focusCycler instanceof FocusCycler}function DraggableViewMixin(de){class u extends de{constructor(...me){super(...me);xt(this,"_onDragBound",this._onDrag.bind(this));xt(this,"_onDragEndBound",this._onDragEnd.bind(this));xt(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(global$1.document,"mouseup",this._onDragEndBound),this.listenTo(global$1.document,"touchend",this._onDragEndBound),this.listenTo(global$1.document,"mousemove",this._onDragBound),this.listenTo(global$1.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(global$1.document,"mouseup",this._onDragEndBound),this.stopListening(global$1.document,"touchend",this._onDragEndBound),this.stopListening(global$1.document,"mousemove",this._onDragBound),this.stopListening(global$1.document,"touchmove",this._onDragBound)}_onDragStart(me,pe){if(!this._isHandleElementPressed(pe))return;this._attachDragListeners();let Le=0,Ye=0;pe instanceof MouseEvent?(Le=pe.clientX,Ye=pe.clientY):(Le=pe.touches[0].clientX,Ye=pe.touches[0].clientY),this._lastDraggingCoordinates={x:Le,y:Ye},this.isDragging=!0}_onDrag(me,pe){if(!this.isDragging){this._detachDragListeners();return}let Le=0,Ye=0;pe instanceof MouseEvent?(Le=pe.clientX,Ye=pe.clientY):(Le=pe.touches[0].clientX,Ye=pe.touches[0].clientY),pe.preventDefault(),this.fire("drag",{deltaX:Math.round(Le-this._lastDraggingCoordinates.x),deltaY:Math.round(Ye-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:Le,y:Ye}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(me){return this.dragHandleElement?this.dragHandleElement===me.target||me.target instanceof HTMLElement&&this.dragHandleElement.contains(me.target):!1}}return u}class DialogActionsView extends View{constructor(t){super(t);xt(this,"children");xt(this,"keystrokes");xt(this,"focusCycler");xt(this,"_focusTracker");xt(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new KeystrokeHandler,this._focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const N of t){const me=new ButtonView(this.locale);let pe;me.on("execute",()=>N.onExecute()),N.onCreate&&N.onCreate(me);for(pe in N)pe!="onExecute"&&pe!="onCreate"&&me.set(pe,N[pe]);this.children.add(me)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class DialogContentView extends View{constructor(t){super(t);xt(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const DialogViewPosition={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},toPx$6=toUnit("px"),ll=class ll extends DraggableViewMixin(View){constructor(t,{getCurrentDomRoot:N,getViewportOffset:me,keystrokeHandlerOptions:pe}){super(t);xt(this,"parts");xt(this,"headerView");xt(this,"closeButtonView");xt(this,"actionsView");xt(this,"contentView");xt(this,"keystrokes");xt(this,"focusTracker");xt(this,"wasMoved",!1);xt(this,"_getCurrentDomRoot");xt(this,"_getViewportOffset");xt(this,"_focusables");xt(this,"_focusCycler");const Le=this.bindTemplate,Ye=t.t;this.set("className",""),this.set("ariaLabel",Ye("Editor dialog")),this.set("isModal",!1),this.set("position",DialogViewPosition.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=N,this._getViewportOffset=me,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:pe}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",Le.if("isModal","ck-dialog-overlay__transparent",nt=>!nt),Le.if("_isVisible","ck-hidden",nt=>!nt)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",Le.if("isModal","ck-dialog_modal"),Le.to("className")],role:"dialog","aria-label":Le.to("ariaLabel"),style:{top:Le.to("_top",nt=>toPx$6(nt)),left:Le.to("_left",nt=>toPx$6(nt)),visibility:Le.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,N)=>{t.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),N())}),this.on("drag",(t,{deltaX:N,deltaY:me})=>{this.wasMoved=!0,this.moveBy(N,me)}),this.listenTo(global$1.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(global$1.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,N,me)=>{me&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:N,hasCloseButton:me=!0,content:pe,actionButtons:Le}){N&&(this.headerView=new FormHeaderView(this.locale,{icon:t}),me&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=N,this.ariaLabel=N,this.parts.add(this.headerView,0)),pe&&(pe instanceof View&&(pe=[pe]),this.contentView=new DialogContentView(this.locale),this.contentView.children.addMany(pe),this.parts.add(this.contentView)),Le&&(this.actionsView=new DialogActionsView(this.locale),this.actionsView.setButtons(Le),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,N){const me=this._getViewportRect(),pe=this._getDialogRect();t+pe.width>me.right&&(t=me.right-pe.width),t<me.left&&(t=me.left),N<me.top&&(N=me.top),this._moveTo(t,N)}_moveTo(t,N){this._left=t,this._top=N}moveBy(t,N){this.moveTo(this._left+t,this._top+N)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let N=this.position,me;this._getCurrentDomRoot()?me=this._getVisibleDomRootRect(t):N=DialogViewPosition.SCREEN_CENTER;const pe=ll.defaultOffset,Le=this._getDialogRect();switch(N){case DialogViewPosition.EDITOR_TOP_SIDE:{if(me){const Ye=this.locale.contentLanguageDirection==="ltr"?me.right-Le.width-pe:me.left+pe;this.moveTo(Ye,me.top+pe)}else this._moveOffScreen();break}case DialogViewPosition.EDITOR_CENTER:{me?this.moveTo(Math.round(me.left+me.width/2-Le.width/2),Math.round(me.top+me.height/2-Le.height/2)):this._moveOffScreen();break}case DialogViewPosition.SCREEN_CENTER:{this.moveTo(Math.round((t.width-Le.width)/2),Math.round((t.height-Le.height)/2));break}case DialogViewPosition.EDITOR_TOP_CENTER:{me?this.moveTo(Math.round(me.left+me.width/2-Le.width/2),me.top+pe):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BOTTOM_CENTER:{me?this.moveTo(Math.round(me.left+me.width/2-Le.width/2),me.bottom-Le.height-pe):this._moveOffScreen();break}case DialogViewPosition.EDITOR_ABOVE_CENTER:{me?this.moveTo(Math.round(me.left+me.width/2-Le.width/2),me.top-Le.height-pe):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BELOW_CENTER:{me?this.moveTo(Math.round(me.left+me.width/2-Le.width/2),me.bottom+pe):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let N=new Rect(this._getCurrentDomRoot()).getVisible();if(N){if(N=t.getIntersection(N),!N)return null}else return null;return N}_getDialogRect(){return new Rect(this.element.firstElementChild)}_getViewportRect(){const t=new Rect(global$1.window);if(this.isModal)return t;const N={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return t.top+=N.top,t.height-=N.top,t.bottom-=N.bottom,t.height-=N.bottom,t.left+=N.left,t.right-=N.right,t.width-=N.left+N.right,t}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const N of this.contentView.children)isFocusable(N)&&t.push(N);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(N=>{this._focusables.add(N),this.focusTracker.add(N.element),isViewWithFocusCycler(N)&&this._focusCycler.chain(N.focusCycler)})}_createCloseButton(){const t=new ButtonView(this.locale),N=this.locale.t;return t.set({label:N("Close"),tooltip:!0,icon:icons.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}};xt(ll,"defaultOffset",15);let DialogView=ll;const Zi=class Zi extends Plugin{constructor(t){super(t);xt(this,"view");xt(this,"_onHide");const N=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:N("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),Zi._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,N)=>{this._show(N)}),this.on("show",(t,N)=>{N.onShow&&N.onShow(this)},{priority:"low"}),this.on("hide",()=>{Zi._visibleDialogPlugin&&Zi._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(N,me)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),me())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const N=t.document.differ.getChangedRoots();for(const me of N)me.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:N,title:me,hasCloseButton:pe=!0,content:Le,actionButtons:Ye,className:nt,isModal:ot,position:ft,onHide:mt,keystrokeHandlerOptions:bt}){const yt=this.editor;this.view=new DialogView(yt.locale,{getCurrentDomRoot:()=>yt.editing.view.getDomRoot(yt.model.document.selection.anchor.root.rootName),getViewportOffset:()=>yt.ui.viewportOffset,keystrokeHandlerOptions:bt});const _t=this.view;_t.on("close",()=>{this.hide()}),yt.ui.view.body.add(_t),yt.keystrokes.listenTo(_t.element),ft||(ft=ot?DialogViewPosition.SCREEN_CENTER:DialogViewPosition.EDITOR_CENTER),ot&&this._lockBodyScroll(),_t.set({position:ft,_isVisible:!0,className:nt,isModal:ot}),_t.setupParts({icon:N,title:me,hasCloseButton:pe,content:Le,actionButtons:Ye}),this.id=t,mt&&(this._onHide=mt),this.isOpen=!0,Zi._visibleDialogPlugin=this}hide(){Zi._visibleDialogPlugin&&Zi._visibleDialogPlugin.fire(`hide:${Zi._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const t=this.editor,N=this.view;N.isModal&&this._unlockBodyScroll(),N.contentView&&N.contentView.reset(),t.ui.view.body.remove(N),t.ui.focusTracker.remove(N.element),t.keystrokes.stopListening(N.element),N.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,Zi._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};xt(Zi,"_visibleDialogPlugin");let Dialog=Zi;class ListItemButtonView extends ButtonView{constructor(t,N=new ButtonLabelView){super(t,N);xt(this,"_checkIconHolderView",new CheckIconHolderView);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const me=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",me.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(pe,Le)=>pe||Le)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,N,me)=>{const{children:pe,_checkIconHolderView:Le}=this;me?pe.add(Le,0):pe.remove(Le)})}}class CheckIconHolderView extends View{constructor(){super();xt(this,"children");xt(this,"_checkIconView",this._createCheckIconView());const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",N=>N?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,N,me)=>{const{children:pe,_checkIconView:Le}=this;me&&!pe.has(Le)?pe.add(Le):!me&&pe.has(Le)&&pe.remove(Le)})}_createCheckIconView(){const t=new IconView;return t.content=icons.check,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class MenuBarMenuListItemButtonView extends ListItemButtonView{constructor(u){super(u),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class LabelView extends View{constructor(t){super(t);xt(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${uid()}`;const N=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:N.to("for")},children:[{text:N.to("text")}]})}}class AccessibilityHelpContentView extends View{constructor(u,t){super(u);const N=u.t,me=new LabelView;me.text=N("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":me.id,role:"document",tabindex:-1},children:[createElement(document,"p",{},N("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),me]})}focus(){this.element.focus()}_createCategories(u){return u.map(t=>{const N=[createElement(document,"h3",{},t.label),...Array.from(t.groups.values()).map(me=>this._createGroup(me)).flat()];return t.description&&N.splice(1,0,createElement(document,"p",{},t.description)),createElement(document,"section",{},N)})}_createGroup(u){const t=u.keystrokes.sort((me,pe)=>me.label.localeCompare(pe.label)).map(me=>this._createGroupRow(me)).flat(),N=[createElement(document,"dl",{},t)];return u.label&&N.unshift(createElement(document,"h4",{},u.label)),N}_createGroupRow(u){const t=this.locale.t,N=createElement(document,"dt"),me=createElement(document,"dd"),pe=normalizeKeystrokeDefinition(u.keystroke),Le=[];for(const Ye of pe)Le.push(Ye.map(keystrokeToEnvKbd).join(""));return N.innerHTML=u.label,me.innerHTML=Le.join(", ")+(u.mayRequireFn&&env.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[N,me]}}function keystrokeToEnvKbd(de){return getEnvKeystrokeText(de).split("+").map(u=>`<kbd>${u}</kbd>`).join("+")}function normalizeKeystrokeDefinition(de){return typeof de=="string"?[[de]]:typeof de[0]=="string"?[de]:de}var accessibilityIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class AccessibilityHelp extends Plugin{constructor(){super(...arguments);xt(this,"contentView",null)}static get requires(){return[Dialog]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const me=this._createButton(ButtonView);return me.set({tooltip:!0,withText:!1,label:N("Accessibility help")}),me}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const me=this._createButton(MenuBarMenuListItemButtonView);return me.label=N("Accessibility"),me}),t.keystrokes.set("Alt+0",(me,pe)=>{this._toggleDialog(),pe()}),this._setupRootLabels()}_createButton(t){const N=this.editor,me=N.plugins.get("Dialog"),pe=N.locale,Le=new t(pe);return Le.set({keystroke:"Alt+0",icon:accessibilityIcon,isToggleable:!0}),Le.on("execute",()=>this._toggleDialog()),Le.bind("isOn").to(me,"id",Ye=>Ye==="accessibilityHelp"),Le}_setupRootLabels(){const t=this.editor,N=t.editing.view,me=t.t;t.ui.on("ready",()=>{N.change(Le=>{for(const Ye of N.document.roots)pe(Le,Ye)}),t.on("addRoot",(Le,Ye)=>{const nt=t.editing.view.document.getRoot(Ye.rootName);N.change(ot=>pe(ot,nt))},{priority:"low"})});function pe(Le,Ye){const ot=[Ye.getAttribute("aria-label"),me("Press %0 for help.",[getEnvKeystrokeText("Alt+0")])].filter(ft=>ft).join(". ");Le.setAttribute("aria-label",ot,Ye)}}_toggleDialog(){const t=this.editor,N=t.plugins.get("Dialog"),me=t.locale.t;this.contentView||(this.contentView=new AccessibilityHelpContentView(t.locale,t.accessibility.keystrokeInfos)),N.id==="accessibilityHelp"?N.hide():N.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:me("Accessibility help"),icon:accessibilityIcon,hasCloseButton:!0,content:this.contentView})}}const Hi=class Hi extends ViewCollection{constructor(t,N=[]){super(N);xt(this,"locale");xt(this,"_bodyCollectionContainer");this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Template({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Hi._bodyWrapper||!Hi._bodyWrapper.isConnected)&&(Hi._bodyWrapper=createElement(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Hi._bodyWrapper)),Hi._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Hi._bodyWrapper&&!Hi._bodyWrapper.childElementCount&&(Hi._bodyWrapper.remove(),delete Hi._bodyWrapper)}};xt(Hi,"_bodyWrapper");let BodyCollection=Hi;class SwitchButtonView extends ButtonView{constructor(t){super(t);xt(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new View;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class FileDialogButtonView extends FileDialogViewMixin(ButtonView){}class FileDialogListItemButtonView extends FileDialogViewMixin(ListItemButtonView){}function FileDialogViewMixin(de){class u extends de{constructor(...me){super(...me);xt(this,"buttonView");xt(this,"_fileInputView");this.buttonView=this,this._fileInputView=new FileInputView(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return u}class FileInputView extends View{constructor(u){super(u),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var dropdownArrowIcon='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class CollapsibleView extends View{constructor(t,N){super(t);xt(this,"buttonView");xt(this,"children");const me=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),N&&this.children.addMany(N),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",me.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:me.if("isCollapsed","hidden"),"aria-labelledby":me.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new ButtonView(this.locale),N=t.bindTemplate;return t.set({withText:!0,icon:dropdownArrowIcon}),t.extendTemplate({attributes:{"aria-expanded":N.to("isOn",me=>String(me))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",me=>!me),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedColorOptions(de,u){const t=de.t,N={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return u.map(me=>{const pe=N[me.label];return pe&&pe!=me.label&&(me.label=pe),me})}function normalizeColorOptions(de){return de.map(normalizeSingleColorDefinition).filter(u=>!!u)}function normalizeSingleColorDefinition(de){return typeof de=="string"?{model:de,label:de,hasBorder:!1,view:{name:"span",styles:{color:de}}}:{model:de.color,label:de.label||de.color,hasBorder:de.hasBorder===void 0?!1:de.hasBorder,view:{name:"span",styles:{color:`${de.color}`}}}}var checkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class ColorTileView extends ButtonView{constructor(u){super(u);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=checkIcon,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",N=>env.isMediaForcedColors?null:N)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ColorGridView extends View{constructor(t,N){super(t);xt(this,"columns");xt(this,"items");xt(this,"focusTracker");xt(this,"keystrokes");const me=N&&N.colorDefinitions?N.colorDefinitions:[];this.columns=N&&N.columns?N.columns:5;const pe={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.items.on("add",(Le,Ye)=>{Ye.isOn=Ye.color===this.selectedColor}),me.forEach(Le=>{const Ye=new ColorTileView;Ye.set({color:Le.color,label:Le.label,tooltip:!0,hasBorder:Le.options.hasBorder}),Ye.on("execute",()=>{this.fire("execute",{value:Le.color,hasBorder:Le.options.hasBorder,label:Le.label})}),this.items.add(Ye)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:pe}}),this.on("change:selectedColor",(Le,Ye,nt)=>{for(const ot of this.items)ot.isOn=ot.color===nt})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,N)=>{this.focusTracker.add(N.element)}),this.items.on("remove",(t,N)=>{this.focusTracker.remove(N.element)}),this.keystrokes.listenTo(this.element),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertColor(de,u){if(!de)return"";const t=parseColorString(de);if(!t)return"";if(t.space===u)return de;if(!canConvertParsedColor(t))return"";const me=convert[t.space][u];if(!me)return"";const pe=me(t.space==="hex"?t.hexValue:t.values);return formatColorOutput(pe,u)}function convertToHex(de){if(!de)return"";const u=parseColorString(de);return u?u.space==="hex"?u.hexValue:convertColor(de,"hex"):"#000"}function registerCustomElement(de,u){customElements.get(de)===void 0&&customElements.define(de,u)}function formatColorOutput(de,u){switch(u){case"hex":return`#${de}`;case"rgb":return`rgb(${de[0]}, ${de[1]}, ${de[2]})`;case"hsl":return`hsl(${de[0]}, ${de[1]}%, ${de[2]}%)`;case"hwb":return`hwb(${de[0]}, ${de[1]}, ${de[2]})`;case"lab":return`lab(${de[0]}% ${de[1]} ${de[2]})`;case"lch":return`lch(${de[0]}% ${de[1]} ${de[2]})`;default:return""}}function parseColorString(de){if(de.startsWith("#")){const t=parse$1(de);return{space:"hex",values:t.values,hexValue:de,alpha:t.alpha}}const u=parse$1(de);return u.space?u:null}function canConvertParsedColor(de){return Object.keys(convert).includes(de.space)}class LabeledFieldView extends View{constructor(t,N){super(t);xt(this,"fieldView");xt(this,"labelView");xt(this,"statusView");xt(this,"fieldWrapperChildren");const me=`ck-labeled-field-view-${uid()}`,pe=`ck-labeled-field-view-status-${uid()}`;this.fieldView=N(this,me,pe),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(me),this.statusView=this._createStatusView(pe),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(Ye,nt)=>Ye||nt);const Le=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",Le.to("class"),Le.if("isEnabled","ck-disabled",Ye=>!Ye),Le.if("isEmpty","ck-labeled-field-view_empty"),Le.if("isFocused","ck-labeled-field-view_focused"),Le.if("placeholder","ck-labeled-field-view_placeholder"),Le.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const N=new LabelView(this.locale);return N.for=t,N.bind("text").to(this,"label"),N}_createStatusView(t){const N=new View(this.locale),me=this.bindTemplate;return N.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",me.if("errorText","ck-labeled-field-view__status_error"),me.if("_statusText","ck-hidden",pe=>!pe)],id:t,role:me.if("errorText","alert")},children:[{text:me.to("_statusText")}]}),N}focus(t){this.fieldView.focus(t)}}class InputBase extends View{constructor(t){super(t);xt(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new FocusTracker,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const N=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",N.if("isFocused","ck-input_focused"),N.if("isEmpty","ck-input-text_empty"),N.if("hasError","ck-error")],id:N.to("id"),placeholder:N.to("placeholder"),tabindex:N.to("tabIndex"),readonly:N.to("isReadOnly"),"aria-invalid":N.if("hasError",!0),"aria-describedby":N.to("ariaDescribedById"),"aria-label":N.to("ariaLabel")},on:{input:N.to((...me)=>{this.fire("input",...me),this._updateIsEmpty()}),change:N.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,N,me)=>{this._setDomElementValue(me),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=isInputElementEmpty(this.element)}_setDomElementValue(t){this.element.value=!t&&t!==0?"":t}}function isInputElementEmpty(de){return!de.value}class InputView extends InputBase{constructor(u){super(u),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class InputTextView extends InputView{constructor(u){super(u),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class InputNumberView extends InputView{constructor(u,{min:t,max:N,step:me}={}){super(u);const pe=this.bindTemplate;this.set("min",t),this.set("max",N),this.set("step",me),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:pe.to("min"),max:pe.to("max"),step:pe.to("step")}})}}class DropdownPanelView extends View{constructor(t){super(t);xt(this,"children");const N=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",N.to("position",me=>`ck-dropdown__panel_${me}`),N.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:N.to(me=>{me.target.tagName.toLocaleLowerCase()!=="input"&&me.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():logWarning("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}const Xr=class Xr extends View{constructor(t,N,me){super(t);xt(this,"buttonView");xt(this,"panelView");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"listView");xt(this,"toolbarView");xt(this,"menuView");const pe=this.bindTemplate;this.buttonView=N,this.panelView=me,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",pe.to("class"),pe.if("isEnabled","ck-disabled",Le=>!Le)],id:pe.to("id"),"aria-describedby":pe.to("ariaDescribedById")},children:[N,me]}),N.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":pe.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(N,me,pe)=>{if(pe)if(this.panelPosition==="auto"){const Le=Xr._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=Le?Le.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(N,me)=>{this.isOpen&&(this.isOpen=!1,me())};this.keystrokes.set("arrowdown",(N,me)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,me())}),this.keystrokes.set("arrowright",(N,me)=>{this.isOpen&&me()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:N,southEast:me,southWest:pe,northEast:Le,northWest:Ye,southMiddleEast:nt,southMiddleWest:ot,northMiddleEast:ft,northMiddleWest:mt}=Xr.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[me,pe,nt,ot,t,Le,Ye,ft,mt,N]:[pe,me,ot,nt,t,Ye,Le,mt,ft,N]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};xt(Xr,"defaultPanelPositions",{south:(t,N)=>({top:t.bottom,left:t.left-(N.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,N)=>({top:t.bottom,left:t.left-N.width+t.width,name:"sw"}),southMiddleEast:(t,N)=>({top:t.bottom,left:t.left-(N.width-t.width)/4,name:"sme"}),southMiddleWest:(t,N)=>({top:t.bottom,left:t.left-(N.width-t.width)*3/4,name:"smw"}),north:(t,N)=>({top:t.top-N.height,left:t.left-(N.width-t.width)/2,name:"n"}),northEast:(t,N)=>({top:t.top-N.height,left:t.left,name:"ne"}),northWest:(t,N)=>({top:t.top-N.height,left:t.left-N.width+t.width,name:"nw"}),northMiddleEast:(t,N)=>({top:t.top-N.height,left:t.left-(N.width-t.width)/4,name:"nme"}),northMiddleWest:(t,N)=>({top:t.top-N.height,left:t.left-(N.width-t.width)*3/4,name:"nmw"})}),xt(Xr,"_getOptimalPosition",getOptimalPosition);let DropdownView=Xr;class DropdownButtonView extends ButtonView{constructor(t){super(t);xt(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",N=>String(N))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new IconView;return t.content=dropdownArrowIcon,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class ListItemView extends View{constructor(t){super(t);xt(this,"children");const N=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",N.if("isVisible","ck-hidden",me=>!me)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class ListSeparatorView extends View{constructor(u){super(u),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class ListItemGroupView extends View{constructor(t,N=new LabelView){super(t);xt(this,"labelView");xt(this,"items");xt(this,"children");const me=this.bindTemplate,pe=new ListView(t);this.set({label:"",isVisible:!0}),this.labelView=N,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,pe]),pe.set({role:"group",ariaLabelledBy:N.id}),pe.focusTracker.destroy(),pe.keystrokes.destroy(),this.items=pe.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",me.if("isVisible","ck-hidden",Le=>!Le)]},children:this.children})}focus(){if(this.items){const t=this.items.find(N=>!(N instanceof ListSeparatorView));t&&t.focus()}}}class ListView extends View{constructor(t){super(t);xt(this,"focusables");xt(this,"items");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"_focusCycler");xt(this,"_listItemGroupToChangeListeners",new WeakMap);const N=this.bindTemplate;this.focusables=new ViewCollection,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:N.to("role"),"aria-label":N.to("ariaLabel"),"aria-labelledby":N.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof ListItemGroupView?this._registerFocusableItemsGroup(t):t instanceof ListItemView&&this._registerFocusableListItem(t);this.items.on("change",(t,N)=>{for(const me of N.removed)me instanceof ListItemGroupView?this._deregisterFocusableItemsGroup(me):me instanceof ListItemView&&this._deregisterFocusableListItem(me);for(const me of Array.from(N.added).reverse())me instanceof ListItemGroupView?this._registerFocusableItemsGroup(me,N.index):this._registerFocusableListItem(me,N.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,N){this.focusTracker.add(t.element),this.focusables.add(t,N)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(N,me)=>{for(const pe of me.removed)this._deregisterFocusableListItem(pe);for(const pe of Array.from(me.added).reverse())this._registerFocusableListItem(pe,this.items.getIndex(t)+me.index)}}_registerFocusableItemsGroup(t,N){Array.from(t.items).forEach((pe,Le)=>{const Ye=typeof N<"u"?N+Le:void 0;this._registerFocusableListItem(pe,Ye)});const me=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,me),t.items.on("change",me)}_deregisterFocusableItemsGroup(t){for(const N of t.items)this._deregisterFocusableListItem(N);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}const toPx$5=toUnit("px"),POSITION_OFF_SCREEN={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Bi=class Bi extends View{constructor(t){super(t);xt(this,"content");xt(this,"_pinWhenIsVisibleCallback");xt(this,"_resizeObserver");const N=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",N.to("position",me=>`ck-balloon-panel_${me}`),N.if("isVisible","ck-balloon-panel_visible"),N.if("withArrow","ck-balloon-panel_with-arrow"),N.to("class")],style:{top:N.to("top",toPx$5),left:N.to("left",toPx$5)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const N=getDomElement(t.target);if(N&&!isVisible(N))return!1;this.show();const me=Bi.defaultPositions,pe=Object.assign({},{element:this.element,positions:[me.southArrowNorth,me.southArrowNorthMiddleWest,me.southArrowNorthMiddleEast,me.southArrowNorthWest,me.southArrowNorthEast,me.northArrowSouth,me.northArrowSouthMiddleWest,me.northArrowSouthMiddleEast,me.northArrowSouthWest,me.northArrowSouthEast,me.viewportStickyNorth],limiter:global$1.document.body,fitInViewport:!0},t),Le=Bi._getOptimalPosition(pe)||POSITION_OFF_SCREEN,Ye=parseInt(Le.left),nt=parseInt(Le.top),ot=Le.name,ft=Le.config||{},{withArrow:mt=!0}=ft;return this.top=nt,this.left=Ye,this.position=ot,this.withArrow=mt,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let N=getDomElement(t.target);const me=t.limiter?getDomElement(t.limiter):global$1.document.body;if(this.listenTo(global$1.document,"scroll",(pe,Le)=>{const Ye=Le.target,nt=N&&Ye.contains(N),ot=me&&Ye.contains(me);(nt||ot||!N||!me)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(global$1.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(N&&isText(N)&&(N=N.parentElement),N)){const pe=()=>{isVisible(N)||this.unpin()};this._resizeObserver=new ResizeObserver$1(N,pe)}return!0}_stopPinning(){this.stopListening(global$1.document,"scroll"),this.stopListening(global$1.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:N=Bi.arrowSideOffset,heightOffset:me=Bi.arrowHeightOffset,stickyVerticalOffset:pe=Bi.stickyVerticalOffset,config:Le}=t;return{northWestArrowSouthWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.left-N,name:"arrow_sw",...Le&&{config:Le}}),northWestArrowSouthMiddleWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.left-ft.width*.25-N,name:"arrow_smw",...Le&&{config:Le}}),northWestArrowSouth:(ot,ft)=>({top:Ye(ot,ft),left:ot.left-ft.width/2,name:"arrow_s",...Le&&{config:Le}}),northWestArrowSouthMiddleEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.left-ft.width*.75+N,name:"arrow_sme",...Le&&{config:Le}}),northWestArrowSouthEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.left-ft.width+N,name:"arrow_se",...Le&&{config:Le}}),northArrowSouthWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.left+ot.width/2-N,name:"arrow_sw",...Le&&{config:Le}}),northArrowSouthMiddleWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.left+ot.width/2-ft.width*.25-N,name:"arrow_smw",...Le&&{config:Le}}),northArrowSouth:(ot,ft)=>({top:Ye(ot,ft),left:ot.left+ot.width/2-ft.width/2,name:"arrow_s",...Le&&{config:Le}}),northArrowSouthMiddleEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.left+ot.width/2-ft.width*.75+N,name:"arrow_sme",...Le&&{config:Le}}),northArrowSouthEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.left+ot.width/2-ft.width+N,name:"arrow_se",...Le&&{config:Le}}),northEastArrowSouthWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.right-N,name:"arrow_sw",...Le&&{config:Le}}),northEastArrowSouthMiddleWest:(ot,ft)=>({top:Ye(ot,ft),left:ot.right-ft.width*.25-N,name:"arrow_smw",...Le&&{config:Le}}),northEastArrowSouth:(ot,ft)=>({top:Ye(ot,ft),left:ot.right-ft.width/2,name:"arrow_s",...Le&&{config:Le}}),northEastArrowSouthMiddleEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.right-ft.width*.75+N,name:"arrow_sme",...Le&&{config:Le}}),northEastArrowSouthEast:(ot,ft)=>({top:Ye(ot,ft),left:ot.right-ft.width+N,name:"arrow_se",...Le&&{config:Le}}),southWestArrowNorthWest:ot=>({top:nt(ot),left:ot.left-N,name:"arrow_nw",...Le&&{config:Le}}),southWestArrowNorthMiddleWest:(ot,ft)=>({top:nt(ot),left:ot.left-ft.width*.25-N,name:"arrow_nmw",...Le&&{config:Le}}),southWestArrowNorth:(ot,ft)=>({top:nt(ot),left:ot.left-ft.width/2,name:"arrow_n",...Le&&{config:Le}}),southWestArrowNorthMiddleEast:(ot,ft)=>({top:nt(ot),left:ot.left-ft.width*.75+N,name:"arrow_nme",...Le&&{config:Le}}),southWestArrowNorthEast:(ot,ft)=>({top:nt(ot),left:ot.left-ft.width+N,name:"arrow_ne",...Le&&{config:Le}}),southArrowNorthWest:ot=>({top:nt(ot),left:ot.left+ot.width/2-N,name:"arrow_nw",...Le&&{config:Le}}),southArrowNorthMiddleWest:(ot,ft)=>({top:nt(ot),left:ot.left+ot.width/2-ft.width*.25-N,name:"arrow_nmw",...Le&&{config:Le}}),southArrowNorth:(ot,ft)=>({top:nt(ot),left:ot.left+ot.width/2-ft.width/2,name:"arrow_n",...Le&&{config:Le}}),southArrowNorthMiddleEast:(ot,ft)=>({top:nt(ot),left:ot.left+ot.width/2-ft.width*.75+N,name:"arrow_nme",...Le&&{config:Le}}),southArrowNorthEast:(ot,ft)=>({top:nt(ot),left:ot.left+ot.width/2-ft.width+N,name:"arrow_ne",...Le&&{config:Le}}),southEastArrowNorthWest:ot=>({top:nt(ot),left:ot.right-N,name:"arrow_nw",...Le&&{config:Le}}),southEastArrowNorthMiddleWest:(ot,ft)=>({top:nt(ot),left:ot.right-ft.width*.25-N,name:"arrow_nmw",...Le&&{config:Le}}),southEastArrowNorth:(ot,ft)=>({top:nt(ot),left:ot.right-ft.width/2,name:"arrow_n",...Le&&{config:Le}}),southEastArrowNorthMiddleEast:(ot,ft)=>({top:nt(ot),left:ot.right-ft.width*.75+N,name:"arrow_nme",...Le&&{config:Le}}),southEastArrowNorthEast:(ot,ft)=>({top:nt(ot),left:ot.right-ft.width+N,name:"arrow_ne",...Le&&{config:Le}}),westArrowEast:(ot,ft)=>({top:ot.top+ot.height/2-ft.height/2,left:ot.left-ft.width-me,name:"arrow_e",...Le&&{config:Le}}),eastArrowWest:(ot,ft)=>({top:ot.top+ot.height/2-ft.height/2,left:ot.right+me,name:"arrow_w",...Le&&{config:Le}}),viewportStickyNorth:(ot,ft,mt,bt)=>{const yt=bt||mt;return!ot.getIntersection(yt)||yt.height-ot.height>pe?null:{top:yt.top+pe,left:ot.left+ot.width/2-ft.width/2,name:"arrowless",config:{withArrow:!1,...Le}}}};function Ye(ot,ft){return ot.top-ft.height-me}function nt(ot){return ot.bottom+me}}};xt(Bi,"arrowSideOffset",25),xt(Bi,"arrowHeightOffset",10),xt(Bi,"stickyVerticalOffset",20),xt(Bi,"_getOptimalPosition",getOptimalPosition),xt(Bi,"defaultPositions",Bi.generatePositions());let BalloonPanelView=Bi;function getDomElement(de){return isElement$2(de)?de:isRange(de)?de.commonAncestorContainer:typeof de=="function"?getDomElement(de()):null}class ToolbarSeparatorView extends View{constructor(u){super(u),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ToolbarLineBreakView extends View{constructor(u){super(u),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function preventDefault(de){return de.bindTemplate.to(u=>{u.target===de.element&&u.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeToolbarConfig(de){if(Array.isArray(de))return{items:de,removeItems:[]};const u={items:[],removeItems:[]};return de?{...u,...de}:u}const NESTED_TOOLBAR_ICONS={alignLeft:icons.alignLeft,bold:icons.bold,importExport:icons.importExport,paragraph:icons.paragraph,plus:icons.plus,text:icons.text,threeVerticalDots:icons.threeVerticalDots,pilcrow:icons.pilcrow,dragIndicator:icons.dragIndicator};class ToolbarView extends View{constructor(t,N){super(t);xt(this,"options");xt(this,"items");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"itemsView");xt(this,"children");xt(this,"focusables");xt(this,"_focusCycler");xt(this,"_behavior");const me=this.bindTemplate,pe=this.t;this.options=N||{},this.set("ariaLabel",pe("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new ItemsView(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const Le=t.uiLanguageDirection==="rtl";this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[Le?"arrowright":"arrowleft","arrowup"],focusNext:[Le?"arrowleft":"arrowright","arrowdown"]}});const Ye=["ck","ck-toolbar",me.to("class"),me.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&Ye.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:Ye,role:me.to("role"),"aria-label":me.to("ariaLabel"),style:{maxWidth:me.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:preventDefault(this)}}),this._behavior=this.options.shouldGroupWhenFull?new DynamicGrouping(this):new StaticLayout(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,N)=>{this.focusTracker.add(N)}),this.items.on("remove",(t,N)=>{this.focusTracker.remove(N)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,N,me){this.items.addMany(this._buildItemsFromConfig(t,N,me))}_buildItemsFromConfig(t,N,me){const pe=normalizeToolbarConfig(t),Le=me||pe.removeItems;return this._cleanItemsConfiguration(pe.items,N,Le).map(nt=>isObject$2(nt)?this._createNestedToolbarDropdown(nt,N,Le):nt==="|"?new ToolbarSeparatorView:nt==="-"?new ToolbarLineBreakView:N.create(nt)).filter(nt=>!!nt)}_cleanItemsConfiguration(t,N,me){const pe=t.filter((Le,Ye,nt)=>Le==="|"?!0:me.indexOf(Le)!==-1?!1:Le==="-"?this.options.shouldGroupWhenFull?(logWarning("toolbarview-line-break-ignored-when-grouping-items",nt),!1):!0:!isObject$2(Le)&&!N.has(Le)?(logWarning("toolbarview-item-unavailable",{item:Le}),!1):!0);return this._cleanSeparatorsAndLineBreaks(pe)}_cleanSeparatorsAndLineBreaks(t){const N=Ye=>Ye!=="-"&&Ye!=="|",me=t.length,pe=t.findIndex(N);if(pe===-1)return[];const Le=me-t.slice().reverse().findIndex(N);return t.slice(pe,Le).filter((Ye,nt,ot)=>N(Ye)?!0:!(nt>0&&ot[nt-1]===Ye))}_createNestedToolbarDropdown(t,N,me){let{label:pe,icon:Le,items:Ye,tooltip:nt=!0,withText:ot=!1}=t;if(Ye=this._cleanItemsConfiguration(Ye,N,me),!Ye.length)return null;const ft=this.locale,mt=createDropdown(ft);return pe||logWarning("toolbarview-nested-toolbar-dropdown-missing-label",t),mt.class="ck-toolbar__nested-toolbar-dropdown",mt.buttonView.set({label:pe,tooltip:nt,withText:!!ot}),Le!==!1?mt.buttonView.icon=NESTED_TOOLBAR_ICONS[Le]||Le||icons.threeVerticalDots:mt.buttonView.withText=!0,addToolbarToDropdown(mt,()=>mt.toolbarView._buildItemsFromConfig(Ye,N,me)),mt}}class ItemsView extends View{constructor(t){super(t);xt(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class StaticLayout{constructor(u){const t=u.bindTemplate;u.set("isVertical",!1),u.itemsView.children.bindTo(u.items).using(N=>N),u.focusables.bindTo(u.items).using(N=>isFocusable(N)?N:null),u.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class DynamicGrouping{constructor(u){xt(this,"view");xt(this,"viewChildren");xt(this,"viewFocusables");xt(this,"viewItemsView");xt(this,"viewFocusTracker");xt(this,"viewLocale");xt(this,"ungroupedItems");xt(this,"groupedItems");xt(this,"groupedItemsDropdown");xt(this,"resizeObserver",null);xt(this,"cachedPadding",null);xt(this,"shouldUpdateGroupingOnNextResize",!1);xt(this,"viewElement");this.view=u,this.viewChildren=u.children,this.viewFocusables=u.focusables,this.viewItemsView=u.itemsView,this.viewFocusTracker=u.focusTracker,this.viewLocale=u.locale,this.ungroupedItems=u.createCollection(),this.groupedItems=u.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),u.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),u.children.on("change",this._updateFocusCyclableItems.bind(this)),u.items.on("change",(t,N)=>{const me=N.index,pe=Array.from(N.added);for(const Le of N.removed)me>=this.ungroupedItems.length?this.groupedItems.remove(Le):this.ungroupedItems.remove(Le);for(let Le=me;Le<me+pe.length;Le++){const Ye=pe[Le-me];Le>this.ungroupedItems.length?this.groupedItems.add(Ye,Le-this.ungroupedItems.length):this.ungroupedItems.add(Ye,Le)}this._updateGrouping()}),u.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(u){this.viewElement=u.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(u)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!isVisible(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const u=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==u&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const u=this.viewElement,t=this.viewLocale.uiLanguageDirection,N=new Rect(u.lastChild),me=new Rect(u);if(!this.cachedPadding){const pe=global$1.window.getComputedStyle(u),Le=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(pe[Le])}return t==="ltr"?N.right>me.right-this.cachedPadding:N.left<me.left+this.cachedPadding}_enableGroupingOnResize(){let u;this.resizeObserver=new ResizeObserver$1(this.viewElement,t=>{(!u||u!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),u=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(u){u.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new ToolbarSeparatorView),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const u=this.viewLocale,t=u.t,N=createDropdown(u);return N.class="ck-toolbar__grouped-dropdown",N.panelPosition=u.uiLanguageDirection==="ltr"?"sw":"se",addToolbarToDropdown(N,this.groupedItems),N.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:u.uiLanguageDirection==="rtl"?"se":"sw",icon:icons.threeVerticalDots}),N}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(u=>{isFocusable(u)&&this.viewFocusables.add(u)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class SplitButtonView extends View{constructor(t,N){super(t);xt(this,"children");xt(this,"actionView");xt(this,"arrowView");xt(this,"keystrokes");xt(this,"focusTracker");const me=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(N),this.arrowView=this._createArrowView(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",me.to("class"),me.if("isVisible","ck-hidden",pe=>!pe),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,N)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),N())}),this.keystrokes.set("arrowleft",(t,N)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),N())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const N=t||new ButtonView;return t||N.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),N.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),N.delegate("execute").to(this),N}_createArrowView(){const t=new ButtonView,N=t.bindTemplate;return t.icon=dropdownArrowIcon,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":N.to("isOn"),"aria-haspopup":!0,"aria-expanded":N.to("isOn",me=>String(me))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function createDropdown(de,u=DropdownButtonView){const t=typeof u=="function"?new u(de):u,N=new DropdownPanelView(de),me=new DropdownView(de,t,N);return t.bind("isEnabled").to(me),t instanceof SplitButtonView?t.arrowView.bind("isOn").to(me,"isOpen"):t.bind("isOn").to(me,"isOpen"),addDefaultBehaviors(me),me}function addToolbarToDropdown(de,u,t={}){de.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),de.isOpen?addToolbarToOpenDropdown(de,u,t):de.once("change:isOpen",()=>addToolbarToOpenDropdown(de,u,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&focusChildOnDropdownOpen(de,()=>de.toolbarView.items.find(N=>N.isOn))}function addToolbarToOpenDropdown(de,u,t){const N=de.locale,me=N.t,pe=de.toolbarView=new ToolbarView(N),Le=typeof u=="function"?u():u;pe.ariaLabel=t.ariaLabel||me("Dropdown toolbar"),t.maxWidth&&(pe.maxWidth=t.maxWidth),t.class&&(pe.class=t.class),t.isCompact&&(pe.isCompact=t.isCompact),t.isVertical&&(pe.isVertical=!0),Le instanceof ViewCollection?pe.items.bindTo(Le).using(Ye=>Ye):pe.items.addMany(Le),de.panelView.children.add(pe),de.focusTracker.add(pe),pe.items.delegate("execute").to(de)}function addListToDropdown(de,u,t={}){de.isOpen?addListToOpenDropdown(de,u,t):de.once("change:isOpen",()=>addListToOpenDropdown(de,u,t),{priority:"highest"}),focusChildOnDropdownOpen(de,()=>de.listView.items.find(N=>N instanceof ListItemView?N.children.first.isOn:!1))}function addListToOpenDropdown(de,u,t){const N=de.locale,me=de.listView=new ListView(N),pe=typeof u=="function"?u():u;me.ariaLabel=t.ariaLabel,me.role=t.role,bindViewCollectionItemsToDefinitions(de,me.items,pe,N),de.panelView.children.add(me),me.items.delegate("execute").to(de)}function focusChildOnDropdownOpen(de,u){de.on("change:isOpen",()=>{if(!de.isOpen)return;const t=u();t&&(typeof t.focus=="function"?t.focus():logWarning("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:priorities.low-10})}function addDefaultBehaviors(de){closeDropdownOnClickOutside(de),closeDropdownOnExecute(de),closeDropdownOnBlur(de),focusDropdownContentsOnArrows(de),focusDropdownButtonOnClose(de),focusDropdownPanelOnOpen(de)}function closeDropdownOnClickOutside(de){clickOutsideHandler({emitter:de,activator:()=>de.isRendered&&de.isOpen,callback:()=>{de.isOpen=!1},contextElements:()=>[de.element,...getFocusTrackerTreeElements(de.focusTracker).filter(u=>!de.element.contains(u))]})}function getFocusTrackerTreeElements(de){return[...de.elements,...de.externalViews.flatMap(u=>getFocusTrackerTreeElements(u.focusTracker))]}function closeDropdownOnExecute(de){de.on("execute",u=>{u.source instanceof SwitchButtonView||(de.isOpen=!1)})}function closeDropdownOnBlur(de){de.focusTracker.on("change:isFocused",(u,t,N)=>{N||!de.isOpen||(de.isOpen=!1)})}function focusDropdownContentsOnArrows(de){de.keystrokes.set("arrowdown",(u,t)=>{de.isOpen&&(de.panelView.focus(),t())}),de.keystrokes.set("arrowup",(u,t)=>{de.isOpen&&(de.panelView.focusLast(),t())})}function focusDropdownButtonOnClose(de){de.on("change:isOpen",(u,t,N)=>{if(N)return;de.focusTracker.elements.some(pe=>pe.contains(global$1.document.activeElement))&&de.buttonView.focus()})}function focusDropdownPanelOnOpen(de){de.on("change:isOpen",(u,t,N)=>{N&&de.panelView.focus()},{priority:"low"})}function bindViewCollectionItemsToDefinitions(de,u,t,N){u.on("change",()=>{const me=[...u].reduce((Le,Ye)=>(Ye instanceof ListItemView&&Ye.children.first instanceof ListItemButtonView&&Le.push(Ye.children.first),Le),[]),pe=me.some(Le=>Le.isToggleable);me.forEach(Le=>{Le.hasCheckSpace=pe})}),u.bindTo(t).using(me=>{if(me.type==="separator")return new ListSeparatorView(N);if(me.type==="group"){const pe=new ListItemGroupView(N);return pe.set({label:me.label}),bindViewCollectionItemsToDefinitions(de,pe.items,me.items,N),pe.items.delegate("execute").to(de),pe}else if(me.type==="button"||me.type==="switchbutton"){const pe=me.model.role==="menuitemcheckbox"||me.model.role==="menuitemradio",Le=new ListItemView(N);let Ye;return me.type==="button"?(Ye=new ListItemButtonView(N),Ye.set({isToggleable:pe})):Ye=new SwitchButtonView(N),Ye.bind(...Object.keys(me.model)).to(me.model),Ye.delegate("execute").to(Le),Le.children.add(Ye),Le}return null})}const createLabeledInputText=(de,u,t)=>{const N=new InputTextView(de.locale);return N.set({id:u,ariaDescribedById:t}),N.bind("isReadOnly").to(de,"isEnabled",me=>!me),N.bind("hasError").to(de,"errorText",me=>!!me),N.on("input",()=>{de.errorText=null}),de.bind("isEmpty","isFocused","placeholder").to(N),N},createLabeledInputNumber=(de,u,t)=>{const N=new InputNumberView(de.locale);return N.set({id:u,ariaDescribedById:t,inputMode:"numeric"}),N.bind("isReadOnly").to(de,"isEnabled",me=>!me),N.bind("hasError").to(de,"errorText",me=>!!me),N.on("input",()=>{de.errorText=null}),de.bind("isEmpty","isFocused","placeholder").to(N),N},createLabeledDropdown=(de,u,t)=>{const N=createDropdown(de.locale);return N.set({id:u,ariaDescribedById:t}),N.bind("isEnabled").to(de),N},waitingTime=150;class ColorPickerView extends View{constructor(t,N={}){super(t);xt(this,"hexInputRow");xt(this,"_debounceColorPickerEvent");xt(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const me=this.createCollection();N.hideInput||me.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:me}),this._config=N,this._debounceColorPickerEvent=debounce(pe=>{this.set("color",pe),this.fire("colorSelected",{color:this.color})},waitingTime,{leading:!0}),this.on("set:color",(pe,Le,Ye)=>{pe.return=convertColor(Ye,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=convertColorToCommonHexFormat(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),convertColorToCommonHexFormat(this.color)!=convertColorToCommonHexFormat(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),registerCustomElement("hex-color-picker",HexBase),this.picker=global$1.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const t=document.createElement("style");t.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(t)}this.picker.addEventListener("color-changed",t=>{const N=t.detail.value;this._debounceColorPickerEvent(N)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(env.isGecko||env.isiOS||env.isSafari||env.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const me=[...this.picker.shadowRoot.children].filter(pe=>pe.getAttribute("role")==="slider").map(pe=>new SliderView(pe));this.slidersView=this.createCollection(),me.forEach(pe=>{this.slidersView.add(pe)})}_createInputRow(){const t=this._createColorInput();return new ColorPickerInputRowView(this.locale,t)}_createColorInput(){const t=new LabeledFieldView(this.locale,createLabeledInputText),{t:N}=this.locale;return t.set({label:N("HEX"),class:"color-picker-hex-input"}),t.fieldView.bind("value").to(this,"_hexColor",me=>t.isFocused?t.fieldView.value:me.startsWith("#")?me.substring(1):me),t.fieldView.on("input",()=>{const me=t.fieldView.element.value;if(me){const pe=tryParseHexColor(me);pe&&this._debounceColorPickerEvent(pe)}}),t}isValid(){const{t}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=t('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function convertColorToCommonHexFormat(de){let u=convertToHex(de);return u||(u="#000"),u.length===4&&(u="#"+[u[1],u[1],u[2],u[2],u[3],u[3]].join("")),u.toLowerCase()}class SliderView extends View{constructor(u){super(),this.element=u}focus(){this.element.focus()}}class HashView extends View{constructor(u){super(u),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class ColorPickerInputRowView extends View{constructor(t,N){super(t);xt(this,"children");xt(this,"inputView");this.inputView=N,this.children=this.createCollection([new HashView,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return tryParseHexColor(this.inputView.fieldView.element.value)}}function tryParseHexColor(de){if(!de)return null;const u=de.trim().replace(/^#/,"");return![3,4,6,8].includes(u.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(u)?null:`#${u}`}class DocumentColorCollection extends ObservableMixin(Collection){constructor(u){super(u),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(u,t){return this.find(N=>N.color===u.color)?this:super.add(u,t)}hasColor(u){return!!this.find(t=>t.color===u)}}class ColorGridsFragmentView extends View{constructor(t,{colors:N,columns:me,removeButtonLabel:pe,documentColorsLabel:Le,documentColorsCount:Ye,colorPickerLabel:nt,focusTracker:ot,focusables:ft}){super(t);xt(this,"items");xt(this,"colorDefinitions");xt(this,"focusTracker");xt(this,"columns");xt(this,"documentColors");xt(this,"documentColorsCount");xt(this,"staticColorsGrid");xt(this,"documentColorsGrid");xt(this,"colorPickerButtonView");xt(this,"removeColorButtonView");xt(this,"_focusables");xt(this,"_documentColorsLabel");xt(this,"_removeButtonLabel");xt(this,"_colorPickerLabel");const mt=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=ot,this.items=this.createCollection(),this.colorDefinitions=N,this.columns=me,this.documentColors=new DocumentColorCollection,this.documentColorsCount=Ye,this._focusables=ft,this._removeButtonLabel=pe,this._colorPickerLabel=nt,this._documentColorsLabel=Le,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",mt.if("isVisible","ck-hidden",bt=>!bt)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(t,N){const me=t.document,pe=this.documentColorsCount;this.documentColors.clear();for(const Le of me.getRoots()){const Ye=t.createRangeIn(Le);for(const nt of Ye.getItems())if(nt.is("$textProxy")&&nt.hasAttribute(N)&&(this._addColorToDocumentColors(nt.getAttribute(N)),this.documentColors.length>=pe))return}}updateSelectedColors(){const t=this.documentColorsGrid,N=this.staticColorsGrid,me=this.selectedColor;N.selectedColor=me,t&&(t.selectedColor=me)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const t=Template.bind(this.documentColors,this.documentColors),N=new View(this.locale);N.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(N),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ButtonView,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:icons.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const t=new ButtonView;return t.set({withText:!0,icon:icons.eraser,label:this._removeButtonLabel}),t.class="ck-color-selector__remove-color",t.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),t.render(),t}_createStaticColorsGrid(){const t=new ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.on("execute",(N,me)=>{this.fire("execute",{value:me.value,source:"staticColorsGrid"})}),t}_createDocumentColorsGrid(){const t=Template.bind(this.documentColors,this.documentColors),N=new ColorGridView(this.locale,{columns:this.columns});return N.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),N.items.bindTo(this.documentColors).using(me=>{const pe=new ColorTileView;return pe.set({color:me.color,hasBorder:me.options&&me.options.hasBorder}),me.label&&pe.set({label:me.label,tooltip:!0}),pe.on("execute",()=>{this.fire("execute",{value:me.color,source:"documentColorsGrid"})}),pe}),this.documentColors.on("change:isEmpty",(me,pe,Le)=>{Le&&(N.selectedColor=null)}),N}_addColorToDocumentColors(t){const N=this.colorDefinitions.find(me=>me.color===t);N?this.documentColors.add(Object.assign({},N)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}class ColorPickerFragmentView extends View{constructor(t,{focusTracker:N,focusables:me,keystrokes:pe,colorPickerViewConfig:Le}){super(t);xt(this,"items");xt(this,"colorPickerView");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"actionBarView");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"_focusables");xt(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=N,this.keystrokes=pe,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=me,this._colorPickerViewConfig=Le;const Ye=this.bindTemplate,{saveButtonView:nt,cancelButtonView:ot}=this._createActionButtons();this.saveButtonView=nt,this.cancelButtonView=ot,this.actionBarView=this._createActionBarView({saveButtonView:nt,cancelButtonView:ot}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",Ye.if("isVisible","ck-hidden",ft=>!ft)]},children:this.items})}render(){super.render();const t=new ColorPickerView(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=t,this.colorPickerView.render(),this.selectedColor&&(t.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(N,me,pe)=>{t.color=pe}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",t=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),t.stopPropagation(),t.preventDefault())})}_stopPropagationOnArrowsKeys(){const t=N=>N.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}_addColorPickersElementsToFocusTracker(){for(const N of this.colorPickerView.slidersView)this.focusTracker.add(N.element),this._focusables.add(N);const t=this.colorPickerView.hexInputRow.children.get(1);t.element&&(this.focusTracker.add(t.element),this._focusables.add(t)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:t,cancelButtonView:N}){const me=new View,pe=this.createCollection();return pe.add(t),pe.add(N),me.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:pe}),me}_createActionButtons(){const t=this.locale,N=t.t,me=new ButtonView(t),pe=new ButtonView(t);return me.set({icon:icons.check,class:"ck-button-save",type:"button",withText:!1,label:N("Accept")}),pe.set({icon:icons.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:N("Cancel")}),me.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),pe.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:me,cancelButtonView:pe}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(t,N)=>{this.fire("execute",{value:N.color,source:"colorPicker"}),this.set("selectedColor",N.color)})}}class ColorSelectorView extends View{constructor(t,{colors:N,columns:me,removeButtonLabel:pe,documentColorsLabel:Le,documentColorsCount:Ye,colorPickerLabel:nt,colorPickerViewConfig:ot}){super(t);xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"items");xt(this,"colorGridsFragmentView");xt(this,"colorPickerFragmentView");xt(this,"_focusCycler");xt(this,"_focusables");xt(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this._colorPickerViewConfig=ot,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ColorGridsFragmentView(t,{colors:N,columns:me,removeButtonLabel:pe,documentColorsLabel:Le,documentColorsCount:Ye,colorPickerLabel:nt,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ColorPickerFragmentView(t,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:ot}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(ft,mt,bt)=>{this.colorGridsFragmentView.set("selectedColor",bt),this.colorPickerFragmentView.set("selectedColor",bt)}),this.colorGridsFragmentView.on("change:selectedColor",(ft,mt,bt)=>{this.set("selectedColor",bt)}),this.colorPickerFragmentView.on("change:selectedColor",(ft,mt,bt)=>{this.set("selectedColor",bt)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(t,N){this.colorGridsFragmentView.updateDocumentColors(t,N)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class ComponentFactory{constructor(u){xt(this,"editor");xt(this,"_components",new Map);this.editor=u}*names(){for(const u of this._components.values())yield u.originalName}add(u,t){this._components.set(getNormalized(u),{callback:t,originalName:u})}create(u){if(!this.has(u))throw new CKEditorError("componentfactory-item-missing",this,{name:u});return this._components.get(getNormalized(u)).callback(this.editor.locale)}has(u){return this._components.has(getNormalized(u))}}function getNormalized(de){return String(de).toLowerCase()}const BALLOON_CLASS="ck-tooltip",ui=class ui extends DomEmitterMixin(){constructor(t){super();xt(this,"tooltipTextView");xt(this,"balloonPanelView");xt(this,"_currentElementWithTooltip",null);xt(this,"_currentTooltipPosition",null);xt(this,"_mutationObserver",null);xt(this,"_pinTooltipDebounced");xt(this,"_unpinTooltipDebounced");xt(this,"_watchdogExcluded");if(ui._editors.add(t),ui._instance)return ui._instance;ui._instance=this,this.tooltipTextView=new View(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new BalloonPanelView(t.locale),this.balloonPanelView.class=BALLOON_CLASS,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=createMutationObserver(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=debounce(this._pinTooltip,600),this._unpinTooltipDebounced=debounce(this._unpinTooltip,400),this.listenTo(global$1.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const N=t.ui.view&&t.ui.view.body;ui._editors.delete(t),this.stopListening(t.ui),N&&N.has(this.balloonPanelView)&&N.remove(this.balloonPanelView),ui._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),ui._instance=null)}static getPositioningFunctions(t){const N=ui.defaultBalloonPositions;return{s:[N.southArrowNorth,N.southArrowNorthEast,N.southArrowNorthWest],n:[N.northArrowSouth],e:[N.eastArrowWest],w:[N.westArrowEast],sw:[N.southArrowNorthEast],se:[N.southArrowNorthWest]}[t]}_onKeyDown(t,N){N.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),N.stopPropagation())}_onEnterOrFocus(t,{target:N}){const me=getDescendantWithTooltip(N);if(!me){t.name==="focus"&&this._unpinTooltip();return}if(me===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),t.name==="focus"&&!me.matches(":hover")||me.matches("[data-cke-tooltip-instant]")?this._pinTooltip(me,getTooltipData(me)):this._pinTooltipDebounced(me,getTooltipData(me))}_onLeaveOrBlur(t,{target:N,relatedTarget:me}){if(t.name==="mouseleave"){if(!isElement$2(N))return;const pe=this.balloonPanelView.element,Le=pe&&(pe===me||pe.contains(me)),Ye=!Le&&N===pe;if(Le){this._unpinTooltipDebounced.cancel();return}if(!Ye&&this._currentElementWithTooltip&&N!==this._currentElementWithTooltip)return;const nt=getDescendantWithTooltip(N),ot=getDescendantWithTooltip(me);(Ye||nt&&nt!==ot)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||nt&&nt.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&N!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(t,{target:N}){this._currentElementWithTooltip&&(N.contains(this.balloonPanelView.element)&&N.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:N,position:me,cssClass:pe}){this._unpinTooltip();const Le=first(ui._editors.values()).ui.view.body;Le.has(this.balloonPanelView)||Le.add(this.balloonPanelView),this.tooltipTextView.text=N,this.balloonPanelView.class=[BALLOON_CLASS,pe].filter(Ye=>Ye).join(" "),this.balloonPanelView.pin({target:t,positions:ui.getPositioningFunctions(me)}),this._mutationObserver.attach(t);for(const Ye of ui._editors)this.listenTo(Ye.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=me}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of ui._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=getTooltipData(this._currentElementWithTooltip);if(!isVisible(this._currentElementWithTooltip)||!t.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:ui.getPositioningFunctions(t.position)})}};xt(ui,"defaultBalloonPositions",BalloonPanelView.generatePositions({heightOffset:5,sideOffset:13})),xt(ui,"_editors",new Set),xt(ui,"_instance",null);let TooltipManager=ui;function getDescendantWithTooltip(de){return isElement$2(de)?de.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function getTooltipData(de){return{text:de.dataset.ckeTooltipText,position:de.dataset.ckeTooltipPosition||"s",cssClass:de.dataset.ckeTooltipClass||""}}function createMutationObserver(de){const u=new MutationObserver(()=>{de()});return{attach(t){u.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){u.disconnect()}}}const NARROW_ROOT_HEIGHT_THRESHOLD=50,NARROW_ROOT_WIDTH_THRESHOLD=350;class Badge extends DomEmitterMixin(){constructor(t,N={}){super();xt(this,"editor");xt(this,"_balloonView",null);xt(this,"_showBalloonThrottled",throttle(()=>this._showBalloon(),50,{leading:!0}));xt(this,"_lastFocusedEditableElement",null);xt(this,"_balloonClass");this.editor=t,this._balloonClass=N.balloonClass,t.on("ready",()=>this._handleEditorReady())}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;this._isEnabled()&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(N,me,pe)=>{this._updateLastFocusedEditableElement(),pe?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(N,me,pe)=>{this._updateLastFocusedEditableElement(),pe&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const t=this._getBalloonAttachOptions();t&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const t=this.editor,N=new BalloonPanelView,me=this._createBadgeContent();return N.content.add(me),this._balloonClass&&(N.class=this._balloonClass),t.ui.view.body.add(N),N}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const t=this._getNormalizedConfig(),N=t.side==="right"?getLowerRightCornerPosition(this._lastFocusedEditableElement,t):getLowerLeftCornerPosition(this._lastFocusedEditableElement,t);return{target:this._lastFocusedEditableElement,positions:[N]}}_updateLastFocusedEditableElement(){const t=this.editor,N=t.ui.focusTracker.isFocused,me=t.ui.focusTracker.focusedElement;if(!N||!me){this._lastFocusedEditableElement=null;return}const pe=Array.from(t.ui.getEditableElementsNames()).map(Le=>t.ui.getEditableElement(Le));pe.includes(me)?this._lastFocusedEditableElement=me:this._lastFocusedEditableElement=pe[0]}}function getLowerRightCornerPosition(de,u){return getLowerCornerPosition(de,u,(t,N)=>t.left+t.width-N.width-u.horizontalOffset)}function getLowerLeftCornerPosition(de,u){return getLowerCornerPosition(de,u,t=>t.left+u.horizontalOffset)}function getLowerCornerPosition(de,u,t){return(N,me)=>{const pe=new Rect(de);if(pe.width<NARROW_ROOT_WIDTH_THRESHOLD||pe.height<NARROW_ROOT_HEIGHT_THRESHOLD)return null;let Le;u.position==="inside"?Le=pe.bottom-me.height:Le=pe.bottom-me.height/2,Le-=u.verticalOffset;const Ye=t(pe,me),ot=N.clone().moveTo(Ye,Le).getIntersection(me.clone().moveTo(Ye,Le)).getVisible();return!ot||ot.getArea()<me.getArea()?null:{top:Le,left:Ye,name:`position_${u.position}-side_${u.side}`,config:{withArrow:!1}}}}var poweredByIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const DEFAULT_LABEL="Powered by";class PoweredBy extends Badge{constructor(u){super(u,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const u=this.editor;if(u.config.get("ui.poweredBy.forceVisible"))return!0;const N=u.config.get("licenseKey");if(N=="GPL")return!0;const me=parseBase64EncodedObject(N.split(".")[1]);return me?!me.whiteLabel:!0}_createBadgeContent(){return new PoweredByView(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const u=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},N=t.position||u.position,me=N==="inside"?5:u.verticalOffset;return{position:N,side:t.side||u.side,label:t.label===void 0?DEFAULT_LABEL:t.label,verticalOffset:t.verticalOffset!==void 0?t.verticalOffset:me,horizontalOffset:t.horizontalOffset!==void 0?t.horizontalOffset:u.horizontalOffset,forceVisible:!!t.forceVisible}}}class PoweredByView extends View{constructor(u,t){super(u);const N=new IconView,me=this.bindTemplate;N.set({content:poweredByIcon,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],N],on:{dragstart:me.to(pe=>pe.preventDefault())}}]})}}class EvaluationBadge extends Badge{constructor(t){super(t,{balloonClass:"ck-evaluation-badge-balloon"});xt(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const N=this.editor.config.get("licenseKey"),me=getLicenseTypeFromLicenseKey(N);return!!(me&&this.licenseTypeMessage[me])}_createBadgeContent(){const t=this.editor.config.get("licenseKey"),N=getLicenseTypeFromLicenseKey(t);return new EvaluationBadgeView(this.editor.locale,this.licenseTypeMessage[N])}_getNormalizedConfig(){const t=super._getNormalizedConfig(),N=this.editor.config.get("ui.poweredBy")||{},me=N.position||t.position,pe=N.side||t.side;return{position:me,side:pe==="left"?"right":"left",verticalOffset:t.verticalOffset,horizontalOffset:t.horizontalOffset}}}class EvaluationBadgeView extends View{constructor(u,t){super(u),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[t]}]})}}function getLicenseTypeFromLicenseKey(de){if(de=="GPL")return"GPL";const u=parseBase64EncodedObject(de.split(".")[1]);return u?u.licenseType||"production":null}const AriaLiveAnnouncerPoliteness={POLITE:"polite",ASSERTIVE:"assertive"};class AriaLiveAnnouncer{constructor(u){xt(this,"editor");xt(this,"view");this.editor=u,u.once("ready",()=>{for(const t of Object.values(AriaLiveAnnouncerPoliteness))this.announce("",t)})}announce(u,t=AriaLiveAnnouncerPoliteness.POLITE){const N=this.editor;if(!N.ui.view)return;this.view||(this.view=new AriaLiveAnnouncerView(N.locale),N.ui.view.body.add(this.view));const{politeness:me,isUnsafeHTML:pe}=typeof t=="string"?{politeness:t}:t;let Le=this.view.regionViews.find(Ye=>Ye.politeness===me);Le||(Le=new AriaLiveAnnouncerRegionView(N,me),this.view.regionViews.add(Le)),Le.announce({announcement:u,isUnsafeHTML:pe})}}class AriaLiveAnnouncerView extends View{constructor(t){super(t);xt(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class AriaLiveAnnouncerRegionView extends View{constructor(t,N){super(t.locale);xt(this,"politeness");xt(this,"_domConverter");xt(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":N,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=N,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:N}){if(!t.trim().length)return;const me=document.createElement("li");N?this._domConverter.setContentOf(me,t):me.innerText=t,this._listElement.appendChild(me)}get _listElement(){return this.element.querySelector("ul")}}class MenuBarMenuListItemView extends ListItemView{constructor(u,t){super(u);const N=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:N.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const NESTED_PANEL_HORIZONTAL_OFFSET=5,MenuBarBehaviors={toggleMenusAndFocusItemsOnHover(de){de.on("menu:mouseenter",u=>{if(!(!de.isFocusBorderEnabled&&!de.isOpen)){if(de.isOpen)for(const t of de.menus){const N=u.path[0],me=N instanceof MenuBarMenuListItemView&&N.children.first===t;t.isOpen=(u.path.includes(t)||me)&&t.isEnabled}u.source.focus()}})},focusCycleMenusOnArrows(de){const u=de.locale.uiLanguageDirection==="rtl";de.on("menu:arrowright",N=>{t(N.source,u?-1:1)}),de.on("menu:arrowleft",N=>{t(N.source,u?1:-1)});function t(N,me){const pe=de.children.getIndex(N),Le=N.isOpen,Ye=de.children.length,nt=de.children.get((pe+Ye+me)%Ye);N.isOpen=!1,Le&&(nt.isOpen=!0),nt.buttonView.focus()}},closeMenusWhenTheBarCloses(de){de.on("change:isOpen",()=>{de.isOpen||de.menus.forEach(u=>{u.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(de){de.on("menu:change:isOpen",(u,t,N)=>{N&&de.menus.filter(me=>u.source.parentMenuView===me.parentMenuView&&u.source!==me&&me.isOpen).forEach(me=>{me.isOpen=!1})})},closeOnClickOutside(de){clickOutsideHandler({emitter:de,activator:()=>de.isOpen,callback:()=>de.close(),contextElements:()=>de.children.map(u=>u.element)})},enableFocusHighlightOnInteraction(de){let u=!1;de.on("change:isOpen",(t,N,me)=>{me||(u||(de.isFocusBorderEnabled=!1),u=!1)}),de.listenTo(de.element,"keydown",()=>{u=!0},{useCapture:!0}),de.listenTo(de.element,"keyup",()=>{u=!1},{useCapture:!0}),de.listenTo(de.element,"focus",()=>{u&&(de.isFocusBorderEnabled=!0)},{useCapture:!0})}},MenuBarMenuBehaviors={openAndFocusPanelOnArrowDownKey(de){de.keystrokes.set("arrowdown",(u,t)=>{de.focusTracker.focusedElement===de.buttonView.element&&(de.isOpen||(de.isOpen=!0),de.panelView.focus(),t())})},openOnArrowRightKey(de){const u=de.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";de.keystrokes.set(u,(t,N)=>{de.focusTracker.focusedElement!==de.buttonView.element||!de.isEnabled||(de.isOpen||(de.isOpen=!0),de.panelView.focus(),N())})},openOnButtonClick(de){de.buttonView.on("execute",()=>{de.isOpen=!0})},toggleOnButtonClick(de){de.buttonView.on("execute",()=>{de.isOpen=!de.isOpen})},openAndFocusOnEnterKeyPress(de){de.keystrokes.set("enter",(u,t)=>{de.focusTracker.focusedElement===de.buttonView.element&&(de.isOpen=!0,de.panelView.focus(),t())})},closeOnArrowLeftKey(de){const u=de.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";de.keystrokes.set(u,(t,N)=>{de.isOpen&&(de.isOpen=!1,de.focus(),N())})},closeOnEscKey(de){de.keystrokes.set("esc",(u,t)=>{de.isOpen&&(de.isOpen=!1,de.focus(),t())})},closeOnParentClose(de){de.parentMenuView.on("change:isOpen",(u,t,N)=>{!N&&u.source===de.parentMenuView&&(de.isOpen=!1)})}},MenuBarMenuViewPanelPositioningFunctions={southEast:de=>({top:de.bottom,left:de.left,name:"se"}),southWest:(de,u)=>({top:de.bottom,left:de.left-u.width+de.width,name:"sw"}),northEast:(de,u)=>({top:de.top-u.height,left:de.left,name:"ne"}),northWest:(de,u)=>({top:de.top-u.height,left:de.left-u.width+de.width,name:"nw"}),eastSouth:de=>({top:de.top,left:de.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"es"}),eastNorth:(de,u)=>({top:de.top-u.height,left:de.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"en"}),westSouth:(de,u)=>({top:de.top,left:de.left-u.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"ws"}),westNorth:(de,u)=>({top:de.top-u.height,left:de.left-u.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"wn"})},DefaultMenuBarItems=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function normalizeMenuBarConfig(de){let u;return!("items"in de)||!de.items?u={items:cloneDeep(DefaultMenuBarItems),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...de}:u={items:de.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...de},u}function processMenuBarConfig({normalizedConfig:de,locale:u,componentFactory:t,extraItems:N}){const me=cloneDeep(de);return handleAdditions(de,me,N),handleRemovals(de,me),handleAdditions(de,me,me.addItems),purgeUnavailableComponents(de,me,t),purgeEmptyMenus(de,me),localizeMenuLabels(me,u),me}function handleRemovals(de,u){const t=u.removeItems,N=[];u.items=u.items.filter(({menuId:me})=>t.includes(me)?(N.push(me),!1):!0),walkConfigMenus(u.items,me=>{me.groups=me.groups.filter(({groupId:pe})=>t.includes(pe)?(N.push(pe),!1):!0);for(const pe of me.groups)pe.items=pe.items.filter(Le=>{const Ye=getIdFromGroupItem(Le);return t.includes(Ye)?(N.push(Ye),!1):!0})});for(const me of t)N.includes(me)||logWarning("menu-bar-item-could-not-be-removed",{menuBarConfig:de,itemName:me})}function handleAdditions(de,u,t){const N=[];if(t.length!=0){for(const me of t){const pe=getRelationFromPosition(me.position),Le=getRelativeIdFromPosition(me.position);if(isMenuBarMenuAddition(me))if(!Le)pe==="start"?(u.items.unshift(me.menu),N.push(me)):pe==="end"&&(u.items.push(me.menu),N.push(me));else{const Ye=u.items.findIndex(nt=>nt.menuId===Le);Ye!=-1?pe==="before"?(u.items.splice(Ye,0,me.menu),N.push(me)):pe==="after"&&(u.items.splice(Ye+1,0,me.menu),N.push(me)):addMenuOrItemToGroup(u,me.menu,Le,pe)&&N.push(me)}else isMenuBarMenuGroupAddition(me)?walkConfigMenus(u.items,Ye=>{if(Ye.menuId===Le)pe==="start"?(Ye.groups.unshift(me.group),N.push(me)):pe==="end"&&(Ye.groups.push(me.group),N.push(me));else{const nt=Ye.groups.findIndex(ot=>ot.groupId===Le);nt!==-1&&(pe==="before"?(Ye.groups.splice(nt,0,me.group),N.push(me)):pe==="after"&&(Ye.groups.splice(nt+1,0,me.group),N.push(me)))}}):addMenuOrItemToGroup(u,me.item,Le,pe)&&N.push(me)}for(const me of t)N.includes(me)||logWarning("menu-bar-item-could-not-be-added",{menuBarConfig:de,addedItemConfig:me})}}function addMenuOrItemToGroup(de,u,t,N){let me=!1;return walkConfigMenus(de.items,pe=>{for(const{groupId:Le,items:Ye}of pe.groups){if(me)return;if(Le===t)N==="start"?(Ye.unshift(u),me=!0):N==="end"&&(Ye.push(u),me=!0);else{const nt=Ye.findIndex(ot=>getIdFromGroupItem(ot)===t);nt!==-1&&(N==="before"?(Ye.splice(nt,0,u),me=!0):N==="after"&&(Ye.splice(nt+1,0,u),me=!0))}}}),me}function purgeUnavailableComponents(de,u,t){walkConfigMenus(u.items,N=>{for(const me of N.groups)me.items=me.items.filter(pe=>{const Le=typeof pe=="string"&&!t.has(pe);return Le&&!u.isUsingDefaultConfig&&logWarning("menu-bar-item-unavailable",{menuBarConfig:de,parentMenuConfig:cloneDeep(N),componentName:pe}),!Le})})}function purgeEmptyMenus(de,u){const t=u.isUsingDefaultConfig;let N=!1;if(u.items=u.items.filter(me=>me.groups.length?!0:(warnAboutEmptyMenu(de,me,t),!1)),!u.items.length){warnAboutEmptyMenu(de,de,t);return}walkConfigMenus(u.items,me=>{me.groups=me.groups.filter(pe=>pe.items.length?!0:(N=!0,!1));for(const pe of me.groups)pe.items=pe.items.filter(Le=>isMenuDefinition(Le)&&!Le.groups.length?(warnAboutEmptyMenu(de,Le,t),N=!0,!1):!0)}),N&&purgeEmptyMenus(de,u)}function warnAboutEmptyMenu(de,u,t){t||logWarning("menu-bar-menu-empty",{menuBarConfig:de,emptyMenuConfig:u})}function localizeMenuLabels(de,u){const t=u.t,N={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};walkConfigMenus(de.items,me=>{me.label in N&&(me.label=N[me.label])})}function walkConfigMenus(de,u){if(Array.isArray(de))for(const N of de)t(N);function t(N){u(N);for(const me of N.groups)for(const pe of me.items)isMenuDefinition(pe)&&t(pe)}}function isMenuBarMenuAddition(de){return typeof de=="object"&&"menu"in de}function isMenuBarMenuGroupAddition(de){return typeof de=="object"&&"group"in de}function getRelationFromPosition(de){return de.startsWith("start")?"start":de.startsWith("end")?"end":de.startsWith("after")?"after":"before"}function getRelativeIdFromPosition(de){const u=de.match(/^[^:]+:(.+)/);return u?u[1]:null}function getIdFromGroupItem(de){return typeof de=="string"?de:de.menuId}function isMenuDefinition(de){return typeof de=="object"&&"menuId"in de}class EditorUI extends ObservableMixin(){constructor(t){super();xt(this,"editor");xt(this,"componentFactory");xt(this,"focusTracker");xt(this,"tooltipManager");xt(this,"poweredBy");xt(this,"evaluationBadge");xt(this,"ariaLiveAnnouncer");xt(this,"isReady",!1);xt(this,"_editableElementsMap",new Map);xt(this,"_focusableToolbarDefinitions",[]);xt(this,"_extraMenuBarElements",[]);xt(this,"_lastFocusedForeignElement",null);const N=t.editing.view;this.editor=t,this.componentFactory=new ComponentFactory(t),this.focusTracker=new FocusTracker,this.tooltipManager=new TooltipManager(t),this.poweredBy=new PoweredBy(t),this.evaluationBadge=new EvaluationBadge(t),this.ariaLiveAnnouncer=new AriaLiveAnnouncer(t),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(N.document,"layoutChanged",this.update.bind(this)),this.listenTo(N,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(t,N){this._editableElementsMap.set(t,N),N.ckeditorInstance||(N.ckeditorInstance=this.editor),this.focusTracker.add(N);const me=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(N)};this.isReady?me():this.once("ready",me)}removeEditableElement(t){const N=this._editableElementsMap.get(t);N&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(N),this.focusTracker.remove(N),N.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,N={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:N})}extendMenuBar(t){this._extraMenuBarElements.push(t)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(t){const N=t.element;this.focusTracker.add(N),this.editor.keystrokes.listenTo(N);const me=normalizeMenuBarConfig(this.editor.config.get("menuBar")||{});t.fillFromConfig(me,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(pe,Le)=>{N.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),Le())}),this.editor.keystrokes.set("Alt+F9",(pe,Le)=>{N.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),Le())})}_readViewportOffsetFromConfig(){const t=this.editor,N=t.config.get("ui.viewportOffset");if(N)return N;const me=t.config.get("toolbar.viewportTopOffset");return me?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:me}):{top:0}}_initFocusTracking(){const t=this.editor;let N;t.keystrokes.set("Alt+F10",(me,pe)=>{this._saveLastFocusedForeignElement();const Le=this._getCurrentFocusedToolbarDefinition();(!Le||!N)&&(N=this._getFocusableCandidateToolbarDefinitions());for(let Ye=0;Ye<N.length;Ye++){const nt=N.shift();if(N.push(nt),nt!==Le&&this._focusFocusableCandidateToolbar(nt)){Le&&Le.options.afterBlur&&Le.options.afterBlur();break}}pe()}),t.keystrokes.set("Esc",(me,pe)=>{const Le=this._getCurrentFocusedToolbarDefinition();Le&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),Le.options.afterBlur&&Le.options.afterBlur(),pe())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const N of this._focusableToolbarDefinitions){const{toolbarView:me,options:pe}=N;(isVisible(me.element)||pe.beforeFocus)&&t.push(N)}return t.sort((N,me)=>getToolbarDefinitionWeight(N)-getToolbarDefinitionWeight(me)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:N,options:{beforeFocus:me}}=t;return me&&me(),isVisible(N.element)?(N.focus(),!0):!1}_handleScrollToTheSelection(t,N){const me={top:0,bottom:0,left:0,right:0,...this.viewportOffset};N.viewportOffset.top+=me.top,N.viewportOffset.bottom+=me.bottom,N.viewportOffset.left+=me.left,N.viewportOffset.right+=me.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const N of t)this.focusTracker.add(N.element);t.on("add",(N,me)=>{this.focusTracker.add(me.element)}),t.on("remove",(N,me)=>{this.focusTracker.remove(me.element)})}}function getToolbarDefinitionWeight(de){const{toolbarView:u,options:t}=de;let N=10;return isVisible(u.element)&&N--,t.isContextual&&N--,N}class EditorUIView extends View{constructor(t){super(t);xt(this,"body");xt(this,"menuBarView");this.body=new BodyCollection(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class BoxedEditorUIView extends EditorUIView{constructor(t){super(t);xt(this,"top");xt(this,"main");xt(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,N=new LabelView;return N.text=t("Rich Text Editor"),N.extendTemplate({attributes:{class:"ck-voice-label"}}),N}}class EditableUIView extends View{constructor(t,N,me){super(t);xt(this,"name",null);xt(this,"_editingView");xt(this,"_editableElement");xt(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=me,this._hasExternalElement=!!this._editableElement,this._editingView=N}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;t.isRenderingInProgress?me(this):N(this);function N(pe){t.change(Le=>{const Ye=t.document.getRoot(pe.name);Le.addClass(pe.isFocused?"ck-focused":"ck-blurred",Ye),Le.removeClass(pe.isFocused?"ck-blurred":"ck-focused",Ye)})}function me(pe){t.once("change:isRenderingInProgress",(Le,Ye,nt)=>{nt?me(pe):N(pe)})}}}class InlineEditableUIView extends EditableUIView{constructor(t,N,me,pe={}){super(t,N,me);xt(this,"_options");this._options=pe,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(N=>{const me=t.document.getRoot(this.name);N.setAttribute("aria-label",this.getEditableAriaLabel(),me)})}getEditableAriaLabel(){const t=this.locale.t,N=this._options.label,me=this._editableElement,pe=this.name;if(typeof N=="string")return N;if(typeof N=="object")return N[pe];if(typeof N=="function")return N(this);if(me){const Le=me.getAttribute("aria-label");if(Le)return Le}return t("Rich Text Editor. Editing area: %0",pe)}}class Notification extends ContextPlugin{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(u,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(u,t={}){this._showNotification({message:u,type:"success",namespace:t.namespace,title:t.title})}showInfo(u,t={}){this._showNotification({message:u,type:"info",namespace:t.namespace,title:t.title})}showWarning(u,t={}){this._showNotification({message:u,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(u){const t=u.namespace?`show:${u.type}:${u.namespace}`:`show:${u.type}`;this.fire(t,{message:u.message,type:u.type,title:u.title||""})}}class Model extends ObservableMixin(){constructor(u,t){super(),t&&assignIn(this,t),u&&this.set(u)}}const toPx$4=toUnit("px");class ContextualBalloon extends Plugin{constructor(t){super(t);xt(this,"positionLimiter");xt(this,"visibleStack");xt(this,"_viewToStack",new Map);xt(this,"_idToStack",new Map);xt(this,"_view",null);xt(this,"_rotatorView",null);xt(this,"_fakePanelsView",null);this.positionLimiter=()=>{const N=this.editor.editing.view,pe=N.document.selection.editableElement;return pe?N.domConverter.mapViewToDom(pe.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new CKEditorError("contextualballoon-add-view-exist",[this,t]);const N=t.stackId||"main";if(!this._idToStack.has(N)){this._idToStack.set(N,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(N)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||t.singleViewMode)&&this.showStack(N);return}const me=this._idToStack.get(N);t.singleViewMode&&this.showStack(N),me.set(t.view,t),this._viewToStack.set(t.view,me),me===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new CKEditorError("contextualballoon-remove-view-not-exist",[this,t]);const N=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(N.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(N.values())[N.size-2])),N.size===1?(this._idToStack.delete(this._getStackId(N)),this._numberOfStacks=this._idToStack.size):N.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:this.editor.ui.viewportOffset})),t}showStack(t){this.visibleStack=t;const N=this._idToStack.get(t);if(!N)throw new CKEditorError("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==N&&this._showView(Array.from(N.values()).pop())}_createPanelView(){this._view=new BalloonPanelView(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(me=>me[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let N=t.indexOf(this._visibleStack)+1;t[N]||(N=0),this.showStack(this._getStackId(t[N]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let N=t.indexOf(this._visibleStack)-1;t[N]||(N=t.length-1),this.showStack(this._getStackId(t[N]))}_createRotatorView(){const t=new RotatorView(this.editor.locale),N=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(me,pe)=>!pe&&me>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(me,pe)=>{if(pe<2)return"";const Le=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return N("%0 of %1",[Le,pe])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new FakePanelsView(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(N,me)=>!me&&N>=2?Math.min(N-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:N="",withArrow:me=!0,singleViewMode:pe=!1}){this.view.class=N,this.view.withArrow=me,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),pe&&(this._singleViewMode=!0)}}class RotatorView extends View{constructor(t){super(t);xt(this,"focusTracker");xt(this,"buttonPrevView");xt(this,"buttonNextView");xt(this,"content");const N=t.t,me=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new FocusTracker,this.buttonPrevView=this._createButtonView(N("Previous"),icons.previousArrow),this.buttonNextView=this._createButtonView(N("Next"),icons.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",me.to("isNavigationVisible",pe=>pe?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:me.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,N){const me=new ButtonView(this.locale);return me.set({label:t,icon:N,tooltip:!0}),me}}class FakePanelsView extends View{constructor(t,N){super(t);xt(this,"content");xt(this,"_balloonPanelView");const me=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=N,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",me.to("numberOfPanels",pe=>pe?"":"ck-hidden")],style:{top:me.to("top",toPx$4),left:me.to("left",toPx$4),width:me.to("width",toPx$4),height:me.to("height",toPx$4)}},children:this.content}),this.on("change:numberOfPanels",(pe,Le,Ye,nt)=>{Ye>nt?this._addPanels(Ye-nt):this._removePanels(nt-Ye),this.updatePosition()})}_addPanels(t){for(;t--;){const N=new View;N.setTemplate({tag:"div"}),this.content.add(N),this.registerChild(N)}}_removePanels(t){for(;t--;){const N=this.content.last;this.content.remove(N),this.deregisterChild(N),N.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:N}=this._balloonPanelView,{width:me,height:pe}=new Rect(this._balloonPanelView.element);Object.assign(this,{top:t,left:N,width:me,height:pe})}}}const toPx$3=toUnit("px");class StickyPanelView extends View{constructor(t){super(t);xt(this,"content");xt(this,"contentPanelElement");xt(this,"_contentPanelPlaceholder");const N=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:N.to("isSticky",me=>me?"block":"none"),height:N.to("isSticky",me=>me?toPx$3(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",N.if("isSticky","ck-sticky-panel__content_sticky"),N.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:N.to("isSticky",me=>me?toPx$3(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:N.to("_stickyTopOffset",me=>me&&toPx$3(me)),bottom:N.to("_stickyBottomOffset",me=>me&&toPx$3(me)),marginLeft:N.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(global$1.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const t=new Rect(this.limiterElement);let N=t.getVisible();if(N){const me=new Rect(global$1.window);me.top+=this.viewportTopOffset,me.height-=this.viewportTopOffset,N=N.getIntersection(me)}if(N&&t.top<N.top){const me=N.top;if(me+this._contentPanelRect.height+this.limiterBottomOffset>N.bottom){const pe=Math.max(t.bottom-N.bottom,0)+this.limiterBottomOffset;t.bottom-pe>t.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(pe):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(me):this._unstick()}else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=toPx$3(-global$1.window.scrollX)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=toPx$3(-global$1.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Rect(this.contentPanelElement)}}class SpinnerView extends View{constructor(){super(),this.set("isVisible",!1);const u=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-spinner-container",u.if("isVisible","ck-hidden",t=>!t)]},children:[{tag:"span",attributes:{class:["ck","ck-spinner"]}}]})}}class MenuBarMenuButtonView extends ListItemButtonView{constructor(t){super(t);xt(this,"arrowView");const N=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",me=>String(me)),"data-cke-tooltip-disabled":N.to("isOn")},on:{mouseenter:N.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new IconView;return t.content=dropdownArrowIcon,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class MenuBarMenuPanelView extends View{constructor(t){super(t);xt(this,"children");const N=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",N.to("position",me=>`ck-menu-bar__menu__panel_position_${me}`),N.if("isVisible","ck-hidden",me=>!me)],tabindex:"-1"},children:this.children,on:{selectstart:N.to(me=>{me.target.tagName.toLocaleLowerCase()!=="input"&&me.preventDefault()})}})}focus(t=1){this.children.length&&(t===1?this.children.first.focus():this.children.last.focus())}}const cl=class cl extends View{constructor(t){super(t);xt(this,"buttonView");xt(this,"panelView");xt(this,"focusTracker");xt(this,"keystrokes");const N=this.bindTemplate;this.buttonView=new MenuBarMenuButtonView(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new MenuBarMenuPanelView(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",N.to("class"),N.if("isEnabled","ck-disabled",me=>!me),N.if("parentMenuView","ck-menu-bar__menu_top-level",me=>!me)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),MenuBarMenuBehaviors.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(MenuBarMenuBehaviors.openOnButtonClick(this),MenuBarMenuBehaviors.openOnArrowRightKey(this),MenuBarMenuBehaviors.closeOnArrowLeftKey(this),MenuBarMenuBehaviors.openAndFocusOnEnterKeyPress(this),MenuBarMenuBehaviors.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),MenuBarMenuBehaviors.openAndFocusPanelOnArrowDownKey(this),MenuBarMenuBehaviors.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,N)=>{this.fire("arrowright"),N()}),this.keystrokes.set("arrowleft",(t,N)=>{this.fire("arrowleft"),N()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,N,me)=>{if(!me)return;const pe=cl._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=pe?pe.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:N,northEast:me,northWest:pe,westSouth:Le,eastSouth:Ye,westNorth:nt,eastNorth:ot}=MenuBarMenuViewPanelPositioningFunctions;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[Ye,ot,Le,nt]:[t,N,me,pe]:this.parentMenuView?[Le,nt,Ye,ot]:[N,t,pe,me]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};xt(cl,"_getOptimalPosition",getOptimalPosition);let MenuBarMenuView=cl;class MenuBarMenuListView extends ListView{constructor(u){super(u),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const u=Array.from(this.items).some(t=>{const N=pickListButtonMenuViewIfPresent(t);return N&&N.isToggleable});this.items.forEach(t=>{const N=pickListButtonMenuViewIfPresent(t);N&&(N.hasCheckSpace=u)})}}function pickListButtonMenuViewIfPresent(de){return de instanceof ListItemView?de.children.map(u=>isNestedMenuLikeView(u)?u.buttonView:u).find(u=>u instanceof ListItemButtonView):null}function isNestedMenuLikeView(de){return typeof de=="object"&&"buttonView"in de&&de.buttonView instanceof ButtonView}class MenuBarMenuListItemFileDialogButtonView extends FileDialogListItemButtonView{constructor(u){super(u),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const EVENT_NAME_DELEGATES=["mouseenter","arrowleft","arrowright","change:isOpen"];class MenuBarView extends View{constructor(t){super(t);xt(this,"children");xt(this,"menus",[]);const N=t.t,me=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",me.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":N("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,N,me=[]){const pe=this.locale,Ye=processMenuBarConfig({normalizedConfig:t,locale:pe,componentFactory:N,extraItems:me}).items.map(nt=>this._createMenu({componentFactory:N,menuDefinition:nt}));this.children.addMany(Ye)}render(){super.render(),MenuBarBehaviors.toggleMenusAndFocusItemsOnHover(this),MenuBarBehaviors.closeMenusWhenTheBarCloses(this),MenuBarBehaviors.closeMenuWhenAnotherOnTheSameLevelOpens(this),MenuBarBehaviors.focusCycleMenusOnArrows(this),MenuBarBehaviors.closeOnClickOutside(this),MenuBarBehaviors.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}registerMenu(t,N=null){N?(t.delegate(...EVENT_NAME_DELEGATES).to(N),t.parentMenuView=N):t.delegate(...EVENT_NAME_DELEGATES).to(this,me=>"menu:"+me),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:N,parentMenuView:me}){const pe=this.locale,Le=new MenuBarMenuView(pe);return this.registerMenu(Le,me),Le.buttonView.set({label:N.label}),Le.once("change:isOpen",()=>{const Ye=new MenuBarMenuListView(pe);Ye.ariaLabel=N.label,Le.panelView.children.add(Ye),Ye.items.addMany(this._createMenuItems({menuDefinition:N,parentMenuView:Le,componentFactory:t}))}),Le}_createMenuItems({menuDefinition:t,parentMenuView:N,componentFactory:me}){const pe=this.locale,Le=[];for(const Ye of t.groups){for(const nt of Ye.items){const ot=new MenuBarMenuListItemView(pe,N);if(isObject$2(nt))ot.children.add(this._createMenu({componentFactory:me,menuDefinition:nt,parentMenuView:N}));else{const ft=this._createMenuItemContentFromFactory({componentName:nt,componentFactory:me,parentMenuView:N});if(!ft)continue;ot.children.add(ft)}Le.push(ot)}Ye!==t.groups[t.groups.length-1]&&Le.push(new ListSeparatorView(pe))}return Le}_createMenuItemContentFromFactory({componentName:t,parentMenuView:N,componentFactory:me}){const pe=me.create(t);return pe instanceof MenuBarMenuView||pe instanceof MenuBarMenuListItemButtonView||pe instanceof MenuBarMenuListItemFileDialogButtonView?(this._registerMenuTree(pe,N),pe.on("execute",()=>{this.close()}),pe):(logWarning("menu-bar-component-unsupported",{componentName:t,componentView:pe}),null)}_registerMenuTree(t,N){if(!(t instanceof MenuBarMenuView)){t.delegate("mouseenter").to(N);return}this.registerMenu(t,N);const me=t.panelView.children.filter(Le=>Le instanceof MenuBarMenuListView)[0];if(!me){t.delegate("mouseenter").to(N);return}const pe=me.items.filter(Le=>Le instanceof ListItemView);for(const Le of pe)this._registerMenuTree(Le.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(N,me,pe)=>{clearTimeout(t),pe?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(Le=>Le.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const supportedOptions=["left","right","center","justify"];function isSupported(de){return supportedOptions.includes(de)}function isDefault(de,u){return u.contentLanguageDirection=="rtl"?de==="right":de==="left"}function normalizeAlignmentOptions(de){const u=de.map(N=>{let me;return typeof N=="string"?me={name:N}:me=N,me}).filter(N=>{const me=supportedOptions.includes(N.name);return me||logWarning("alignment-config-name-not-recognized",{option:N}),me}),t=u.filter(N=>!!N.className).length;if(t&&t<u.length)throw new CKEditorError("alignment-config-classnames-are-missing",{configuredOptions:de});return u.forEach((N,me,pe)=>{const Le=pe.slice(me+1);if(Le.some(nt=>nt.name==N.name))throw new CKEditorError("alignment-config-name-already-defined",{option:N,configuredOptions:de});if(N.className&&Le.some(ot=>ot.className==N.className))throw new CKEditorError("alignment-config-classname-already-defined",{option:N,configuredOptions:de})}),u}const ALIGNMENT="alignment";class AlignmentCommand extends Command{refresh(){const t=this.editor.locale,N=first(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!N&&this._canBeAligned(N),this.isEnabled&&N.hasAttribute("alignment")?this.value=N.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(u={}){const t=this.editor,N=t.locale,me=t.model,pe=me.document,Le=u.value;me.change(Ye=>{const nt=Array.from(pe.selection.getSelectedBlocks()).filter(mt=>this._canBeAligned(mt)),ot=nt[0].getAttribute("alignment");isDefault(Le,N)||ot===Le||!Le?removeAlignmentFromSelection(nt,Ye):setAlignmentOnSelection(nt,Ye,Le)})}_canBeAligned(u){return this.editor.model.schema.checkAttribute(u,ALIGNMENT)}}function removeAlignmentFromSelection(de,u){for(const t of de)u.removeAttribute(ALIGNMENT,t)}function setAlignmentOnSelection(de,u,t){for(const N of de)u.setAttribute(ALIGNMENT,t,N)}class AlignmentEditing extends Plugin{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("alignment",{options:supportedOptions.map(t=>({name:t}))})}init(){const u=this.editor,t=u.locale,N=u.model.schema,pe=normalizeAlignmentOptions(u.config.get("alignment.options")).filter(ot=>isSupported(ot.name)&&!isDefault(ot.name,t)),Le=pe.some(ot=>!!ot.className);N.extend("$block",{allowAttributes:"alignment"}),u.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),Le?u.conversion.attributeToAttribute(buildClassDefinition(pe)):u.conversion.for("downcast").attributeToAttribute(buildDowncastInlineDefinition(pe));const Ye=buildUpcastInlineDefinitions(pe);for(const ot of Ye)u.conversion.for("upcast").attributeToAttribute(ot);const nt=buildUpcastCompatibilityDefinitions(pe);for(const ot of nt)u.conversion.for("upcast").attributeToAttribute(ot);u.commands.add("alignment",new AlignmentCommand(u))}}function buildDowncastInlineDefinition(de){const u={};for(const{name:N}of de)u[N]={key:"style",value:{"text-align":N}};return{model:{key:"alignment",values:de.map(N=>N.name)},view:u}}function buildUpcastInlineDefinitions(de){const u=[];for(const{name:t}of de)u.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return u}function buildUpcastCompatibilityDefinitions(de){const u=[];for(const{name:t}of de)u.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return u}function buildClassDefinition(de){const u={};for(const N of de)u[N.name]={key:"class",value:N.className};return{model:{key:"alignment",values:de.map(N=>N.name)},view:u}}const iconsMap=new Map([["left",icons.alignLeft],["right",icons.alignRight],["center",icons.alignCenter],["justify",icons.alignJustify]]);class AlignmentUI extends Plugin{get localizedOptionTitles(){const u=this.editor.t;return{left:u("Align left"),right:u("Align right"),center:u("Align center"),justify:u("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=normalizeAlignmentOptions(u.config.get("alignment.options"));t.map(N=>N.name).filter(isSupported).forEach(N=>this._addButton(N)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(u){this.editor.ui.componentFactory.add(`alignment:${u}`,N=>this._createButton(N,u))}_createButton(u,t,N={}){const me=this.editor,pe=me.commands.get("alignment"),Le=new ButtonView(u);return Le.set({label:this.localizedOptionTitles[t],icon:iconsMap.get(t),tooltip:!0,isToggleable:!0,...N}),Le.bind("isEnabled").to(pe),Le.bind("isOn").to(pe,"value",Ye=>Ye===t),this.listenTo(Le,"execute",()=>{me.execute("alignment",{value:t}),me.editing.view.focus()}),Le}_addToolbarDropdown(u){const t=this.editor;t.ui.componentFactory.add("alignment",me=>{const pe=createDropdown(me),Le=me.uiLanguageDirection==="rtl"?"w":"e",Ye=me.t;addToolbarToDropdown(pe,()=>u.map(ft=>this._createButton(me,ft.name,{tooltipPosition:Le})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:Ye("Text alignment toolbar")}),pe.buttonView.set({label:Ye("Text alignment"),tooltip:!0}),pe.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const nt=me.contentLanguageDirection==="rtl"?iconsMap.get("right"):iconsMap.get("left"),ot=t.commands.get("alignment");return pe.buttonView.bind("icon").to(ot,"value",ft=>iconsMap.get(ft)||nt),pe.bind("isEnabled").to(ot,"isEnabled"),this.listenTo(pe,"execute",()=>{t.editing.view.focus()}),pe})}_addMenuBarMenu(u){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",N=>{const me=t.commands.get("alignment"),pe=N.t,Le=new MenuBarMenuView(N),Ye=new MenuBarMenuListView(N);Le.bind("isEnabled").to(me),Ye.set({ariaLabel:pe("Text alignment"),role:"menu"}),Le.buttonView.set({label:pe("Text alignment")});for(const nt of u){const ot=new MenuBarMenuListItemView(N,Le),ft=new MenuBarMenuListItemButtonView(N);ft.delegate("execute").to(Le),ft.set({label:this.localizedOptionTitles[nt.name],icon:iconsMap.get(nt.name),role:"menuitemcheckbox",isToggleable:!0}),ft.on("execute",()=>{t.execute("alignment",{value:nt.name}),t.editing.view.focus()}),ft.bind("isOn").to(me,"value",mt=>mt===nt.name),ft.bind("isEnabled").to(me,"isEnabled"),ot.children.add(ft),Ye.items.add(ot)}return Le.panelView.children.add(Ye),Le})}}class Alignment extends Plugin{static get requires(){return[AlignmentEditing,AlignmentUI]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ChangeBuffer{constructor(u,t=20){xt(this,"model");xt(this,"limit");xt(this,"_isLocked");xt(this,"_size");xt(this,"_batch",null);xt(this,"_changeCallback");xt(this,"_selectionChangeCallback");this.model=u,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(N,me)=>{me.isLocal&&me.isUndoable&&me!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(u){this._size+=u,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(u=!1){(!this.isLocked||u)&&(this._batch=null,this._size=0)}}class InsertTextCommand extends Command{constructor(t,N){super(t);xt(this,"_buffer");this._buffer=new ChangeBuffer(t.model,N),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const N=this.editor.model,me=N.document,pe=t.text||"",Le=pe.length;let Ye=me.selection;if(t.selection?Ye=t.selection:t.range&&(Ye=N.createSelection(t.range)),!N.canEditAt(Ye))return;const nt=t.resultRange;N.enqueueChange(this._buffer.batch,ot=>{this._buffer.lock();const ft=Array.from(me.selection.getAttributes());N.deleteContent(Ye),pe&&N.insertContent(ot.createText(pe,ft),Ye),nt?ot.setSelection(nt):Ye.is("documentSelection")||ot.setSelection(Ye),this._buffer.unlock(),this._buffer.input(Le)})}}const TYPING_INPUT_TYPES=["insertText","insertReplacementText"],TYPING_INPUT_TYPES_ANDROID=[...TYPING_INPUT_TYPES,"insertCompositionText"];class InsertTextObserver extends Observer{constructor(t){super(t);xt(this,"focusObserver");this.focusObserver=t.getObserver(FocusObserver);const N=env.isAndroid?TYPING_INPUT_TYPES_ANDROID:TYPING_INPUT_TYPES,me=t.document;me.on("beforeinput",(pe,Le)=>{if(!this.isEnabled)return;const{data:Ye,targetRanges:nt,inputType:ot,domEvent:ft}=Le;if(!N.includes(ot))return;this.focusObserver.flush();const mt=new EventInfo(me,"insertText");me.fire(mt,new DomEventData(t,ft,{text:Ye,selection:t.createSelection(nt)})),mt.stop.called&&pe.stop()}),env.isAndroid||me.on("compositionend",(pe,{data:Le,domEvent:Ye})=>{this.isEnabled&&Le&&me.fire("insertText",new DomEventData(t,Ye,{text:Le}))},{priority:"lowest"})}observe(){}stopObserving(){}}class Input extends Plugin{constructor(){super(...arguments);xt(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model,me=t.editing.view,pe=t.editing.mapper,Le=N.document.selection;this._compositionQueue=new CompositionQueue(t),me.addObserver(InsertTextObserver);const Ye=new InsertTextCommand(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",Ye),t.commands.add("input",Ye),this.listenTo(me.document,"insertText",(nt,ot)=>{me.document.isComposing||ot.preventDefault(),env.isAndroid&&me.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:ft,selection:mt}=ot;let bt;mt?bt=Array.from(mt.getRanges()).map(Ct=>pe.toModelRange(Ct)):bt=Array.from(Le.getRanges());let yt=ft;if(env.isAndroid){const Ct=Array.from(bt[0].getItems()).reduce((Tt,At)=>Tt+(At.is("$textProxy")?At.data:""),"");if(Ct&&(Ct.length<=yt.length?yt.startsWith(Ct)&&(yt=yt.substring(Ct.length),bt[0].start=bt[0].start.getShiftedBy(Ct.length)):Ct.startsWith(yt)&&(bt[0].start=bt[0].start.getShiftedBy(yt.length),yt="")),yt.length==0&&bt[0].isCollapsed)return}const _t={text:yt,selection:N.createSelection(bt)};env.isAndroid&&me.document.isComposing?this._compositionQueue.push(_t):(t.execute("insertText",_t),me.scrollToTheSelection())}),env.isAndroid?this.listenTo(me.document,"keydown",(nt,ot)=>{Le.isCollapsed||ot.keyCode!=229||!me.document.isComposing||deleteSelectionContent(N,Ye)}):this.listenTo(me.document,"compositionstart",()=>{Le.isCollapsed||deleteSelectionContent(N,Ye)}),env.isAndroid?(this.listenTo(me.document,"mutations",(nt,{mutations:ot})=>{if(me.document.isComposing)for(const{node:ft}of ot){const mt=findMappedViewAncestor(ft,pe),bt=pe.toModelElement(mt);if(this._compositionQueue.isComposedElement(bt)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(me.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(me.document,"compositionend",()=>{const nt=[];for(const ot of this._compositionQueue.flushComposedElements()){const ft=pe.toViewElement(ot);ft&&nt.push({type:"children",node:ft})}nt.length&&me.document.fire("mutations",{mutations:nt})},{priority:"lowest"})):this.listenTo(me.document,"compositionend",()=>{me.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class CompositionQueue{constructor(u){xt(this,"editor");xt(this,"flushDebounced",debounce(()=>this.flush("timeout"),50));xt(this,"_queue",[]);xt(this,"_compositionElements",new Set);this.editor=u}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(u){const t={text:u.text};if(u.selection){t.selectionRanges=[];for(const N of u.selection.getRanges())t.selectionRanges.push(LiveRange.fromRange(N)),this._compositionElements.add(N.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const u=this._queue.shift(),t={text:u.text};if(u.selectionRanges){const N=u.selectionRanges.map(me=>detachLiveRange(me)).filter(me=>!!me);N.length&&(t.selection=this.editor.model.createSelection(N))}return t}flush(u){const t=this.editor,N=t.model,me=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const Le=t.commands.get("insertText").buffer;N.enqueueChange(Le.batch,()=>{for(Le.lock();this._queue.length;){const Ye=this.shift();t.execute("insertText",Ye)}Le.unlock()}),me.scrollToTheSelection()}isComposedElement(u){return this._compositionElements.has(u)}flushComposedElements(){const u=Array.from(this._compositionElements);return this._compositionElements.clear(),u}}function deleteSelectionContent(de,u){if(!u.isEnabled)return;const t=u.buffer;t.lock(),de.enqueueChange(t.batch,()=>{de.deleteContent(de.document.selection)}),t.unlock()}function detachLiveRange(de){const u=de.toRange();return de.detach(),u.root.rootName=="$graveyard"?null:u}function findMappedViewAncestor(de,u){let t=de.is("$text")?de.parent:de;for(;!u.toModelElement(t);)t=t.parent;return t}class DeleteCommand extends Command{constructor(t,N){super(t);xt(this,"direction");xt(this,"_buffer");this.direction=N,this._buffer=new ChangeBuffer(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const N=this.editor.model,me=N.document;N.enqueueChange(this._buffer.batch,pe=>{this._buffer.lock();const Le=pe.createSelection(t.selection||me.selection);if(!N.canEditAt(Le))return;const Ye=t.sequence||1,nt=Le.isCollapsed;if(Le.isCollapsed&&N.modifySelection(Le,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(Ye)){this._replaceEntireContentWithParagraph(pe);return}if(this._shouldReplaceFirstBlockWithParagraph(Le,Ye)){this.editor.execute("paragraph",{selection:Le});return}if(Le.isCollapsed)return;let ot=0;Le.getFirstRange().getMinimalFlatRanges().forEach(ft=>{ot+=count(ft.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),N.deleteContent(Le,{doNotResetEntireContent:nt,direction:this.direction}),this._buffer.input(ot),pe.setSelection(Le),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const N=this.editor.model,pe=N.document.selection,Le=N.schema.getLimitElement(pe);if(!(pe.isCollapsed&&pe.containsEntireContent(Le))||!N.schema.checkChild(Le,"paragraph"))return!1;const nt=Le.getChild(0);return!(nt&&nt.is("element","paragraph"))}_replaceEntireContentWithParagraph(t){const N=this.editor.model,pe=N.document.selection,Le=N.schema.getLimitElement(pe),Ye=t.createElement("paragraph");t.remove(t.createRangeIn(Le)),t.insert(Ye,Le),t.setSelection(Ye,0)}_shouldReplaceFirstBlockWithParagraph(t,N){const me=this.editor.model;if(N>1||this.direction!="backward"||!t.isCollapsed)return!1;const pe=t.getFirstPosition(),Le=me.schema.getLimitElement(pe),Ye=Le.getChild(0);return!(pe.parent!=Ye||!t.containsEntireContent(Ye)||!me.schema.checkChild(Le,"paragraph")||Ye.name=="paragraph")}}const DELETE_CHARACTER="character",DELETE_WORD="word",DELETE_CODE_POINT="codePoint",DELETE_SELECTION="selection",DELETE_BACKWARD="backward",DELETE_FORWARD="forward",DELETE_EVENT_TYPES={deleteContent:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentBackward:{unit:DELETE_CODE_POINT,direction:DELETE_BACKWARD},deleteWordBackward:{unit:DELETE_WORD,direction:DELETE_BACKWARD},deleteHardLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteSoftLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentForward:{unit:DELETE_CHARACTER,direction:DELETE_FORWARD},deleteWordForward:{unit:DELETE_WORD,direction:DELETE_FORWARD},deleteHardLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD},deleteSoftLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD}};class DeleteObserver extends Observer{constructor(u){super(u);const t=u.document;let N=0;t.on("keydown",()=>{N++}),t.on("keyup",()=>{N=0}),t.on("beforeinput",(me,pe)=>{if(!this.isEnabled)return;const{targetRanges:Le,domEvent:Ye,inputType:nt}=pe,ot=DELETE_EVENT_TYPES[nt];if(!ot)return;const ft={direction:ot.direction,unit:ot.unit,sequence:N};ft.unit==DELETE_SELECTION&&(ft.selectionToRemove=u.createSelection(Le[0])),nt==="deleteContentBackward"&&(env.isAndroid&&(ft.sequence=1),shouldUseTargetRanges(Le)&&(ft.unit=DELETE_SELECTION,ft.selectionToRemove=u.createSelection(Le)));const mt=new BubblingEventInfo(t,"delete",Le[0]);t.fire(mt,new DomEventData(u,Ye,ft)),mt.stop.called&&me.stop()}),env.isBlink&&enableChromeWorkaround(this)}observe(){}stopObserving(){}}function enableChromeWorkaround(de){const u=de.view,t=u.document;let N=null,me=!1;t.on("keydown",(Ye,{keyCode:nt})=>{N=nt,me=!1}),t.on("keyup",(Ye,{keyCode:nt,domEvent:ot})=>{const ft=t.selection,mt=de.isEnabled&&nt==N&&pe(nt)&&!ft.isCollapsed&&!me;if(N=null,mt){const bt=ft.getFirstRange(),yt=new BubblingEventInfo(t,"delete",bt),_t={unit:DELETE_SELECTION,direction:Le(nt),selectionToRemove:ft};t.fire(yt,new DomEventData(u,ot,_t))}}),t.on("beforeinput",(Ye,{inputType:nt})=>{const ot=DELETE_EVENT_TYPES[nt];pe(N)&&ot&&ot.direction==Le(N)&&(me=!0)},{priority:"high"}),t.on("beforeinput",(Ye,{inputType:nt,data:ot})=>{N==keyCodes.delete&&nt=="insertText"&&ot==""&&Ye.stop()},{priority:"high"});function pe(Ye){return Ye==keyCodes.backspace||Ye==keyCodes.delete}function Le(Ye){return Ye==keyCodes.backspace?DELETE_BACKWARD:DELETE_FORWARD}}function shouldUseTargetRanges(de){if(de.length!=1||de[0].isCollapsed)return!1;const u=de[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:N,item:me}of u){if(N.parent.is("$text")){const pe=N.parent.data,Le=N.offset;if(isInsideSurrogatePair(pe,Le)||isInsideCombinedSymbol(pe,Le)||isInsideEmojiSequence(pe,Le))continue;t++}else(me.is("containerElement")||me.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class Delete extends Plugin{constructor(){super(...arguments);xt(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.editing.view,me=N.document,pe=t.model.document;N.addObserver(DeleteObserver),this._undoOnBackspace=!1;const Le=new DeleteCommand(t,"forward");t.commands.add("deleteForward",Le),t.commands.add("forwardDelete",Le),t.commands.add("delete",new DeleteCommand(t,"backward")),this.listenTo(me,"delete",(Ye,nt)=>{me.isComposing||nt.preventDefault();const{direction:ot,sequence:ft,selectionToRemove:mt,unit:bt}=nt,yt=ot==="forward"?"deleteForward":"delete",_t={sequence:ft};if(bt=="selection"){const Ct=Array.from(mt.getRanges()).map(Tt=>t.editing.mapper.toModelRange(Tt));_t.selection=t.model.createSelection(Ct)}else _t.unit=bt;t.execute(yt,_t),N.scrollToTheSelection()},{priority:"low"}),this.listenTo(me,"keydown",(Ye,nt)=>{if(me.isComposing||nt.keyCode!=keyCodes.backspace||!pe.selection.isCollapsed)return;const ot=t.model.schema.getLimitElement(pe.selection);t.model.createPositionAt(ot,0).isTouching(pe.selection.getFirstPosition())&&nt.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(me,"delete",(Ye,nt)=>{this._undoOnBackspace&&nt.direction=="backward"&&nt.sequence==1&&nt.unit=="codePoint"&&(this._undoOnBackspace=!1,t.execute("undo"),nt.preventDefault(),Ye.stop())},{context:"$capture"}),this.listenTo(pe,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Typing extends Plugin{static get requires(){return[Input,Delete]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLastTextLine(de,u){let t=de.start;return{text:Array.from(de.getWalker({ignoreElementEnd:!1})).reduce((me,{item:pe})=>pe.is("$text")||pe.is("$textProxy")?me+pe.data:(t=u.createPositionAfter(pe),""),""),range:u.createRange(t,de.end)}}class TextWatcher extends ObservableMixin(){constructor(t,N){super();xt(this,"model");xt(this,"testCallback");xt(this,"_hasMatch");this.model=t,this.testCallback=N,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const N=this.model.document;this.listenTo(N.selection,"change:range",(me,{directChange:pe})=>{if(pe){if(!N.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(N,"change:data",(me,pe)=>{pe.isUndo||!pe.isLocal||this._evaluateTextBeforeSelection("data",{batch:pe})})}_evaluateTextBeforeSelection(t,N={}){const me=this.model,Le=me.document.selection,Ye=me.createRange(me.createPositionAt(Le.focus.parent,0),Le.focus),{text:nt,range:ot}=getLastTextLine(Ye,me),ft=this.testCallback(nt);if(!ft&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!ft,ft){const mt=Object.assign(N,{text:nt,range:ot});typeof ft=="object"&&Object.assign(mt,ft),this.fire(`matched:${t}`,mt)}}}class TwoStepCaretMovement extends Plugin{constructor(t){super(t);xt(this,"attributes");xt(this,"_overrideUid");xt(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model,me=t.editing.view,pe=t.locale,Le=N.document.selection;this.listenTo(me.document,"arrowKey",(Ye,nt)=>{if(!Le.isCollapsed||nt.shiftKey||nt.altKey||nt.ctrlKey)return;const ot=nt.keyCode==keyCodes.arrowright,ft=nt.keyCode==keyCodes.arrowleft;if(!ot&&!ft)return;const mt=pe.contentLanguageDirection;let bt=!1;mt==="ltr"&&ot||mt==="rtl"&&ft?bt=this._handleForwardMovement(nt):bt=this._handleBackwardMovement(nt),bt===!0&&Ye.stop()},{context:"$text",priority:"highest"}),this.listenTo(Le,"change:range",(Ye,nt)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!nt.directChange&&isBetweenDifferentAttributes(Le.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const N=this.attributes,me=this.editor.model,pe=me.document.selection,Le=pe.getFirstPosition();return this._isGravityOverridden||Le.isAtStart&&hasAnyAttribute$1(pe,N)?!1:isBetweenDifferentAttributes(Le,N)?(preventCaretMovement(t),hasAnyAttribute$1(pe,N)&&isBetweenDifferentAttributes(Le,N,!0)?clearSelectionAttributes(me,N):this._overrideGravity(),!0):!1}_handleBackwardMovement(t){const N=this.attributes,me=this.editor.model,pe=me.document.selection,Le=pe.getFirstPosition();return this._isGravityOverridden?(preventCaretMovement(t),this._restoreGravity(),isBetweenDifferentAttributes(Le,N,!0)?clearSelectionAttributes(me,N):setSelectionAttributesFromTheNodeBefore(me,N,Le),!0):Le.isAtStart?hasAnyAttribute$1(pe,N)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(me,N,Le),!0):!1:!hasAnyAttribute$1(pe,N)&&isBetweenDifferentAttributes(Le,N,!0)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(me,N,Le),!0):isStepAfterAnyAttributeBoundary(Le,N)?Le.isAtEnd&&!hasAnyAttribute$1(pe,N)&&isBetweenDifferentAttributes(Le,N)?(preventCaretMovement(t),setSelectionAttributesFromTheNodeBefore(me,N,Le),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const t=this.editor,N=t.model,me=N.document.selection,pe=t.editing.view.document;t.editing.view.addObserver(MouseObserver),t.editing.view.addObserver(TouchObserver);let Le=!1,Ye=!1;this.listenTo(pe,"touchstart",()=>{Ye=!1,Le=!0}),this.listenTo(pe,"mousedown",()=>{Ye=!0}),this.listenTo(pe,"selectionChange",()=>{const nt=this.attributes;if(!Ye&&!Le||(Ye=!1,Le=!1,!me.isCollapsed)||!hasAnyAttribute$1(me,nt))return;const ot=me.getFirstPosition();isBetweenDifferentAttributes(ot,nt)&&(ot.isAtStart||isBetweenDifferentAttributes(ot,nt,!0)?clearSelectionAttributes(N,nt):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const N=this.editor.model,me=N.document.selection,pe=this.attributes;this.listenTo(N,"insertContent",()=>{const Le=me.getFirstPosition();hasAnyAttribute$1(me,pe)&&isBetweenDifferentAttributes(Le,pe)&&clearSelectionAttributes(N,pe)},{priority:"low"})}_handleDeleteContentAfterNode(){const t=this.editor,N=t.model,me=N.document.selection,pe=t.editing.view;let Le=!1,Ye=!1;this.listenTo(pe.document,"delete",(nt,ot)=>{Le=ot.direction==="backward"},{priority:"high"}),this.listenTo(N,"deleteContent",()=>{if(!Le)return;const nt=me.getFirstPosition();Ye=hasAnyAttribute$1(me,this.attributes)&&!isStepAfterAnyAttributeBoundary(nt,this.attributes)},{priority:"high"}),this.listenTo(N,"deleteContent",()=>{Le&&(Le=!1,!Ye&&t.model.enqueueChange(()=>{const nt=me.getFirstPosition();hasAnyAttribute$1(me,this.attributes)&&isBetweenDifferentAttributes(nt,this.attributes)&&(nt.isAtStart||isBetweenDifferentAttributes(nt,this.attributes,!0)?clearSelectionAttributes(N,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function hasAnyAttribute$1(de,u){for(const t of u)if(de.hasAttribute(t))return!0;return!1}function setSelectionAttributesFromTheNodeBefore(de,u,t){const N=t.nodeBefore;de.change(me=>{if(N){const pe=[],Le=de.schema.isObject(N)&&de.schema.isInline(N);for(const[Ye,nt]of N.getAttributes())de.schema.checkAttribute("$text",Ye)&&(!Le||de.schema.getAttributeProperties(Ye).copyFromObject!==!1)&&pe.push([Ye,nt]);me.setSelectionAttribute(pe)}else me.removeSelectionAttribute(u)})}function clearSelectionAttributes(de,u){de.change(t=>{t.removeSelectionAttribute(u)})}function preventCaretMovement(de){de.preventDefault()}function isStepAfterAnyAttributeBoundary(de,u){const t=de.getShiftedBy(-1);return isBetweenDifferentAttributes(t,u)}function isBetweenDifferentAttributes(de,u,t=!1){const{nodeBefore:N,nodeAfter:me}=de;for(const pe of u){const Le=N?N.getAttribute(pe):void 0,Ye=me?me.getAttribute(pe):void 0;if(!(t&&(Le===void 0||Ye===void 0))&&Ye!==Le)return!0}return!1}const TRANSFORMATIONS={copyright:{from:"(c)",to:""},registeredTrademark:{from:"(r)",to:""},trademark:{from:"(tm)",to:""},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"",null]},lessThanOrEqual:{from:"<=",to:""},greaterThanOrEqual:{from:">=",to:""},notEqual:{from:"!=",to:""},arrowLeft:{from:"<-",to:""},arrowRight:{from:"->",to:""},horizontalEllipsis:{from:"...",to:""},enDash:{from:/(^| )(--)( )$/,to:[null,"",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"",null]},quotesPrimary:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesSecondary:{from:buildQuotesRegExp("'"),to:[null,"",null,""]},quotesPrimaryEnGb:{from:buildQuotesRegExp("'"),to:[null,"",null,""]},quotesSecondaryEnGb:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesPrimaryPl:{from:buildQuotesRegExp('"'),to:[null,"",null,""]},quotesSecondaryPl:{from:buildQuotesRegExp("'"),to:[null,"",null,""]}},TRANSFORMATION_GROUPS={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},DEFAULT_TRANSFORMATIONS=["symbols","mathematical","typography","quotes"];class TextTransformation extends Plugin{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("typing",{transformations:{include:DEFAULT_TRANSFORMATIONS}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const u=this.editor,t=u.model,N=u.plugins.get("Delete"),me=normalizeTransformations(u.config.get("typing.transformations")),pe=Ye=>{for(const nt of me)if(nt.from.test(Ye))return{normalizedTransformation:nt}},Le=new TextWatcher(u.model,pe);Le.on("matched:data",(Ye,nt)=>{if(!nt.batch.isTyping)return;const{from:ot,to:ft}=nt.normalizedTransformation,mt=ot.exec(nt.text),bt=ft(mt.slice(1)),yt=nt.range;let _t=mt.index;t.enqueueChange(Ct=>{for(let Tt=1;Tt<mt.length;Tt++){const At=mt[Tt],It=bt[Tt-1];if(It==null){_t+=At.length;continue}const Pt=yt.start.getShiftedBy(_t),Bt=t.createRange(Pt,Pt.getShiftedBy(At.length)),Ot=getTextAttributesAfterPosition(Pt);t.insertContent(Ct.createText(It,Ot),Bt),_t+=It.length}t.enqueueChange(()=>{N.requestUndoOnBackspace()})})}),Le.bind("isEnabled").to(this)}}function normalizeFrom(de){return typeof de=="string"?new RegExp(`(${escapeRegExp(de)})$`):de}function normalizeTo(de){return typeof de=="string"?()=>[de]:de instanceof Array?()=>de:de}function getTextAttributesAfterPosition(de){return(de.textNode?de.textNode:de.nodeAfter).getAttributes()}function buildQuotesRegExp(de){return new RegExp(`(^|\\s)(${de})([^${de}]*)(${de})$`)}function normalizeTransformations(de){const u=de.extra||[],t=de.remove||[],N=pe=>!t.includes(pe),me=de.include.concat(u).filter(N);return expandGroupsAndRemoveDuplicates(me).filter(N).map(pe=>typeof pe=="string"&&TRANSFORMATIONS[pe]?TRANSFORMATIONS[pe]:pe).filter(pe=>typeof pe=="object").map(pe=>({from:normalizeFrom(pe.from),to:normalizeTo(pe.to)}))}function expandGroupsAndRemoveDuplicates(de){const u=new Set;for(const t of de)if(typeof t=="string"&&TRANSFORMATION_GROUPS[t])for(const N of TRANSFORMATION_GROUPS[t])u.add(N);else u.add(t);return Array.from(u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function findAttributeRange(de,u,t,N){return N.createRange(findAttributeRangeBound(de,u,t,!0,N),findAttributeRangeBound(de,u,t,!1,N))}function findAttributeRangeBound(de,u,t,N,me){let pe=de.textNode||(N?de.nodeBefore:de.nodeAfter),Le=null;for(;pe&&pe.getAttribute(u)==t;)Le=pe,pe=N?pe.previousSibling:pe.nextSibling;return Le?me.createPositionAt(Le,N?"before":"after"):de}function inlineHighlight(de,u,t,N){const me=de.editing.view,pe=new Set;me.document.registerPostFixer(Le=>{const Ye=de.model.document.selection;let nt=!1;if(Ye.hasAttribute(u)){const ot=findAttributeRange(Ye.getFirstPosition(),u,Ye.getAttribute(u),de.model),ft=de.editing.mapper.toViewRange(ot);for(const mt of ft.getItems())mt.is("element",t)&&!mt.hasClass(N)&&(Le.addClass(N,mt),pe.add(mt),nt=!0)}return nt}),de.conversion.for("editingDowncast").add(Le=>{Le.on("insert",Ye,{priority:"highest"}),Le.on("remove",Ye,{priority:"highest"}),Le.on("attribute",Ye,{priority:"highest"}),Le.on("selection",Ye,{priority:"highest"});function Ye(){me.change(nt=>{for(const ot of pe.values())nt.removeClass(N,ot),pe.delete(ot)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function blockAutoformatEditing(de,u,t,N){let me,pe=null;typeof N=="function"?me=N:(pe=de.commands.get(N),me=()=>{de.execute(N)}),de.model.document.on("change:data",(Le,Ye)=>{if(pe&&!pe.isEnabled||!u.isEnabled)return;const nt=first(de.model.document.selection.getRanges());if(!nt.isCollapsed||Ye.isUndo||!Ye.isLocal)return;const ot=Array.from(de.model.document.differ.getChanges()),ft=ot[0];if(ot.length!=1||ft.type!=="insert"||ft.name!="$text"||ft.length!=1)return;const mt=ft.position.parent;if(mt.is("element","codeBlock")||mt.is("element","listItem")&&typeof N!="function"&&!["numberedList","bulletedList","todoList"].includes(N)||pe&&pe.value===!0)return;const bt=mt.getChild(0),yt=de.model.createRangeOn(bt);if(!yt.containsRange(nt)&&!nt.end.isEqual(yt.end))return;const _t=t.exec(bt.data.substr(0,nt.end.offset));_t&&de.model.enqueueChange(Ct=>{const Tt=Ct.createPositionAt(mt,0),At=Ct.createPositionAt(mt,_t[0].length),It=new LiveRange(Tt,At);if(me({match:_t})!==!1){Ct.remove(It);const Bt=de.model.document.selection.getFirstRange(),Ot=Ct.createRangeIn(mt);mt.isEmpty&&!Ot.isEqual(Bt)&&!Ot.containsRange(Bt,!0)&&Ct.remove(mt)}It.detach(),de.model.enqueueChange(()=>{de.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function inlineAutoformatEditing(de,u,t,N){let me,pe;t instanceof RegExp?me=t:pe=t,pe=pe||(Le=>{let Ye;const nt=[],ot=[];for(;(Ye=me.exec(Le))!==null&&!(Ye&&Ye.length<4);){let{index:ft,"1":mt,"2":bt,"3":yt}=Ye;const _t=mt+bt+yt;ft+=Ye[0].length-_t.length;const Ct=[ft,ft+mt.length],Tt=[ft+mt.length+bt.length,ft+mt.length+bt.length+yt.length];nt.push(Ct),nt.push(Tt),ot.push([ft+mt.length,ft+mt.length+bt.length])}return{remove:nt,format:ot}}),de.model.document.on("change:data",(Le,Ye)=>{if(Ye.isUndo||!Ye.isLocal||!u.isEnabled)return;const nt=de.model,ot=nt.document.selection;if(!ot.isCollapsed)return;const ft=Array.from(nt.document.differ.getChanges()),mt=ft[0];if(ft.length!=1||mt.type!=="insert"||mt.name!="$text"||mt.length!=1)return;const bt=ot.focus,yt=bt.parent,{text:_t,range:Ct}=getTextAfterCode(nt.createRange(nt.createPositionAt(yt,0),bt),nt),Tt=pe(_t),At=testOutputToRanges(Ct.start,Tt.format,nt),It=testOutputToRanges(Ct.start,Tt.remove,nt);At.length&&It.length&&nt.enqueueChange(Pt=>{if(N(Pt,At)!==!1){for(const Ot of It.reverse())Pt.remove(Ot);nt.enqueueChange(()=>{de.plugins.get("Delete").requestUndoOnBackspace()})}})})}function testOutputToRanges(de,u,t){return u.filter(N=>N[0]!==void 0&&N[1]!==void 0).map(N=>t.createRange(de.getShiftedBy(N[0]),de.getShiftedBy(N[1])))}function getTextAfterCode(de,u){let t=de.start;return{text:Array.from(de.getItems()).reduce((me,pe)=>!(pe.is("$text")||pe.is("$textProxy"))||pe.getAttribute("code")?(t=u.createPositionAfter(pe),""):me+pe.data,""),range:u.createRange(t,de.end)}}class Autoformat extends Plugin{static get requires(){return[Delete]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const u=this.editor.commands;u.get("bulletedList")&&blockAutoformatEditing(this.editor,this,/^[*-]\s$/,"bulletedList"),u.get("numberedList")&&blockAutoformatEditing(this.editor,this,/^1[.|)]\s$/,"numberedList"),u.get("todoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?\]\s$/,"todoList"),u.get("checkTodoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const u=this.editor.commands;if(u.get("bold")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"bold");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(u.get("italic")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"italic");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(u.get("code")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"code");inlineAutoformatEditing(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(u.get("strikethrough")){const t=getCallbackFunctionForInlineAutoformat(this.editor,"strikethrough");inlineAutoformatEditing(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const u=this.editor.commands.get("heading");u&&u.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const N=t[7],me=new RegExp(`^(#{${N}})\\s$`);blockAutoformatEditing(this.editor,this,me,()=>{if(!u.isEnabled||u.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&blockAutoformatEditing(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const u=this.editor,t=u.model.document.selection;u.commands.get("codeBlock")&&blockAutoformatEditing(u,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&blockAutoformatEditing(this.editor,this,/^---$/,"horizontalLine")}}function getCallbackFunctionForInlineAutoformat(de,u){return(t,N)=>{if(!de.commands.get(u).isEnabled)return!1;const pe=de.model.schema.getValidRanges(N,u);for(const Le of pe)t.setAttribute(u,!0,Le);t.removeSelectionAttribute(u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AttributeCommand extends Command{constructor(t,N){super(t);xt(this,"attributeKey");this.attributeKey=N}refresh(){const t=this.editor.model,N=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(N.selection,this.attributeKey)}execute(t={}){const N=this.editor.model,pe=N.document.selection,Le=t.forceValue===void 0?!this.value:t.forceValue;N.change(Ye=>{if(pe.isCollapsed)Le?Ye.setSelectionAttribute(this.attributeKey,!0):Ye.removeSelectionAttribute(this.attributeKey);else{const nt=N.schema.getValidRanges(pe.getRanges(),this.attributeKey);for(const ot of nt)Le?Ye.setAttribute(this.attributeKey,Le,ot):Ye.removeAttribute(this.attributeKey,ot)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,N=t.schema,me=t.document.selection;if(me.isCollapsed)return me.hasAttribute(this.attributeKey);for(const pe of me.getRanges())for(const Le of pe.getItems())if(N.checkAttribute(Le,this.attributeKey))return Le.hasAttribute(this.attributeKey);return!1}}const BOLD$1="bold";class BoldEditing extends Plugin{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:BOLD$1}),u.model.schema.setAttributeProperties(BOLD$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:BOLD$1,view:"strong",upcastAlso:["b",N=>{const me=N.getStyle("font-weight");return me&&(me=="bold"||Number(me)>=600)?{name:!0,styles:["font-weight"]}:null}]}),u.commands.add(BOLD$1,new AttributeCommand(u,BOLD$1)),u.keystrokes.set("CTRL+B",BOLD$1),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function getButtonCreator({editor:de,commandName:u,plugin:t,icon:N,label:me,keystroke:pe}){return Le=>{const Ye=de.commands.get(u),nt=new Le(de.locale);return nt.set({label:me,icon:N,keystroke:pe,isToggleable:!0}),nt.bind("isEnabled").to(Ye,"isEnabled"),nt.bind("isOn").to(Ye,"value"),nt instanceof MenuBarMenuListItemButtonView?nt.set({role:"menuitemcheckbox"}):nt.set({tooltip:!0}),t.listenTo(nt,"execute",()=>{de.execute(u),de.editing.view.focus()}),nt}}const BOLD="bold";class BoldUI extends Plugin{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:BOLD,plugin:this,icon:icons.bold,label:t("Bold"),keystroke:"CTRL+B"});u.ui.componentFactory.add(BOLD,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+BOLD,()=>N(MenuBarMenuListItemButtonView))}}class Bold extends Plugin{static get requires(){return[BoldEditing,BoldUI]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const CODE$1="code",HIGHLIGHT_CLASS$2="ck-code_selected";class CodeEditing extends Plugin{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement]}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:CODE$1}),u.model.schema.setAttributeProperties(CODE$1,{isFormatting:!0,copyOnEnter:!1}),u.conversion.attributeToElement({model:CODE$1,view:"code"}),u.commands.add(CODE$1,new AttributeCommand(u,CODE$1)),u.plugins.get(TwoStepCaretMovement).registerAttribute(CODE$1),inlineHighlight(u,CODE$1,"code",HIGHLIGHT_CLASS$2),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}var codeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';const CODE="code";class CodeUI extends Plugin{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:CODE,plugin:this,icon:codeIcon,label:t("Code")});u.ui.componentFactory.add(CODE,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+CODE,()=>N(MenuBarMenuListItemButtonView))}}class Code extends Plugin{static get requires(){return[CodeEditing,CodeUI]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const ITALIC$1="italic";class ItalicEditing extends Plugin{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:ITALIC$1}),u.model.schema.setAttributeProperties(ITALIC$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:ITALIC$1,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),u.commands.add(ITALIC$1,new AttributeCommand(u,ITALIC$1)),u.keystrokes.set("CTRL+I",ITALIC$1),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}var italicIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const ITALIC="italic";class ItalicUI extends Plugin{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:ITALIC,plugin:this,icon:italicIcon,keystroke:"CTRL+I",label:t("Italic")});u.ui.componentFactory.add(ITALIC,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+ITALIC,()=>N(MenuBarMenuListItemButtonView))}}class Italic extends Plugin{static get requires(){return[ItalicEditing,ItalicUI]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const STRIKETHROUGH$1="strikethrough";class StrikethroughEditing extends Plugin{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:STRIKETHROUGH$1}),u.model.schema.setAttributeProperties(STRIKETHROUGH$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:STRIKETHROUGH$1,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),u.commands.add(STRIKETHROUGH$1,new AttributeCommand(u,STRIKETHROUGH$1)),u.keystrokes.set("CTRL+SHIFT+X","strikethrough"),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}var strikethroughIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const STRIKETHROUGH="strikethrough";class StrikethroughUI extends Plugin{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:STRIKETHROUGH,plugin:this,icon:strikethroughIcon,keystroke:"CTRL+SHIFT+X",label:t("Strikethrough")});u.ui.componentFactory.add(STRIKETHROUGH,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+STRIKETHROUGH,()=>N(MenuBarMenuListItemButtonView))}}class Strikethrough extends Plugin{static get requires(){return[StrikethroughEditing,StrikethroughUI]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const SUBSCRIPT$1="subscript";class SubscriptEditing extends Plugin{static get pluginName(){return"SubscriptEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:SUBSCRIPT$1}),u.model.schema.setAttributeProperties(SUBSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:SUBSCRIPT$1,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),u.commands.add(SUBSCRIPT$1,new AttributeCommand(u,SUBSCRIPT$1))}}var subscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const SUBSCRIPT="subscript";class SubscriptUI extends Plugin{static get pluginName(){return"SubscriptUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:SUBSCRIPT,plugin:this,icon:subscriptIcon,label:t("Subscript")});u.ui.componentFactory.add(SUBSCRIPT,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+SUBSCRIPT,()=>N(MenuBarMenuListItemButtonView))}}class Subscript extends Plugin{static get requires(){return[SubscriptEditing,SubscriptUI]}static get pluginName(){return"Subscript"}static get isOfficialPlugin(){return!0}}const SUPERSCRIPT$1="superscript";class SuperscriptEditing extends Plugin{static get pluginName(){return"SuperscriptEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:SUPERSCRIPT$1}),u.model.schema.setAttributeProperties(SUPERSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:SUPERSCRIPT$1,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),u.commands.add(SUPERSCRIPT$1,new AttributeCommand(u,SUPERSCRIPT$1))}}var superscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const SUPERSCRIPT="superscript";class SuperscriptUI extends Plugin{static get pluginName(){return"SuperscriptUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:SUPERSCRIPT,plugin:this,icon:superscriptIcon,label:t("Superscript")});u.ui.componentFactory.add(SUPERSCRIPT,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+SUPERSCRIPT,()=>N(MenuBarMenuListItemButtonView))}}class Superscript extends Plugin{static get requires(){return[SuperscriptEditing,SuperscriptUI]}static get pluginName(){return"Superscript"}static get isOfficialPlugin(){return!0}}const UNDERLINE$1="underline";class UnderlineEditing extends Plugin{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t;u.model.schema.extend("$text",{allowAttributes:UNDERLINE$1}),u.model.schema.setAttributeProperties(UNDERLINE$1,{isFormatting:!0,copyOnEnter:!0}),u.conversion.attributeToElement({model:UNDERLINE$1,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),u.commands.add(UNDERLINE$1,new AttributeCommand(u,UNDERLINE$1)),u.keystrokes.set("CTRL+U","underline"),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}var underlineIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const UNDERLINE="underline";class UnderlineUI extends Plugin{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=getButtonCreator({editor:u,commandName:UNDERLINE,plugin:this,icon:underlineIcon,label:t("Underline"),keystroke:"CTRL+U"});u.ui.componentFactory.add(UNDERLINE,()=>N(ButtonView)),u.ui.componentFactory.add("menuBar:"+UNDERLINE,()=>N(MenuBarMenuListItemButtonView))}}class Underline extends Plugin{static get requires(){return[UnderlineEditing,UnderlineUI]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*getCopyOnEnterAttributes(de,u){for(const t of u)t&&de.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class EnterCommand extends Command{execute(){this.editor.model.change(u=>{this.enterBlock(u),this.fire("afterExecute",{writer:u})})}enterBlock(u){const t=this.editor.model,N=t.document.selection,me=t.schema,pe=N.isCollapsed,Le=N.getFirstRange(),Ye=Le.start.parent,nt=Le.end.parent;if(me.isLimit(Ye)||me.isLimit(nt))return!pe&&Ye==nt&&t.deleteContent(N),!1;if(pe){const ot=getCopyOnEnterAttributes(u.model.schema,N.getAttributes());return splitBlock(u,Le.start),u.setSelectionAttribute(ot),!0}else{const ot=!(Le.start.isAtStart&&Le.end.isAtEnd),ft=Ye==nt;if(t.deleteContent(N,{leaveUnmerged:ot}),ot){if(ft)return splitBlock(u,N.focus),!0;u.setSelection(nt,0)}}return!1}}function splitBlock(de,u){de.split(u),de.setSelection(u.parent.nextSibling,0)}const ENTER_EVENT_TYPES={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class EnterObserver extends Observer{constructor(u){super(u);const t=this.document;let N=!1;t.on("keydown",(me,pe)=>{N=pe.shiftKey}),t.on("beforeinput",(me,pe)=>{if(!this.isEnabled)return;let Le=pe.inputType;env.isSafari&&N&&Le=="insertParagraph"&&(Le="insertLineBreak");const Ye=pe.domEvent,nt=ENTER_EVENT_TYPES[Le];if(!nt)return;const ot=new BubblingEventInfo(t,"enter",pe.targetRanges[0]);t.fire(ot,new DomEventData(u,Ye,{isSoft:nt.isSoft})),ot.stop.called&&me.stop()})}observe(){}stopObserving(){}}class Enter extends Plugin{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.editing.view,N=t.document,me=this.editor.t;t.addObserver(EnterObserver),u.commands.add("enter",new EnterCommand(u)),this.listenTo(N,"enter",(pe,Le)=>{N.isComposing||Le.preventDefault(),!Le.isSoft&&(u.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:me("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class ShiftEnterCommand extends Command{execute(){const u=this.editor.model,t=u.document;u.change(N=>{softBreakAction(u,N,t.selection),this.fire("afterExecute",{writer:N})})}refresh(){const u=this.editor.model,t=u.document;this.isEnabled=isEnabled(u.schema,t.selection)}}function isEnabled(de,u){if(u.rangeCount>1)return!1;const t=u.anchor;if(!t||!de.checkChild(t,"softBreak"))return!1;const N=u.getFirstRange(),me=N.start.parent,pe=N.end.parent;return!((isInsideLimitElement(me,de)||isInsideLimitElement(pe,de))&&me!==pe)}function softBreakAction(de,u,t){const N=t.isCollapsed,me=t.getFirstRange(),pe=me.start.parent,Le=me.end.parent,Ye=pe==Le;if(N){const nt=getCopyOnEnterAttributes(de.schema,t.getAttributes());insertBreak(de,u,me.end),u.removeSelectionAttribute(t.getAttributeKeys()),u.setSelectionAttribute(nt)}else{const nt=!(me.start.isAtStart&&me.end.isAtEnd);de.deleteContent(t,{leaveUnmerged:nt}),Ye?insertBreak(de,u,t.focus):nt&&u.setSelection(Le,0)}}function insertBreak(de,u,t){const N=u.createElement("softBreak");de.insertContent(N,t),u.setSelection(N,"after")}function isInsideLimitElement(de,u){return de.is("rootElement")?!1:u.isLimit(de)||isInsideLimitElement(de.parent,u)}class ShiftEnter extends Plugin{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model.schema,N=u.conversion,me=u.editing.view,pe=me.document,Le=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),N.for("upcast").elementToElement({model:"softBreak",view:"br"}),N.for("downcast").elementToElement({model:"softBreak",view:(Ye,{writer:nt})=>nt.createEmptyElement("br")}),me.addObserver(EnterObserver),u.commands.add("shiftEnter",new ShiftEnterCommand(u)),this.listenTo(pe,"enter",(Ye,nt)=>{pe.isComposing||nt.preventDefault(),nt.isSoft&&(u.execute("shiftEnter"),me.scrollToTheSelection())},{priority:"low"}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:Le("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BlockQuoteCommand extends Command{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(u={}){const t=this.editor.model,N=t.schema,me=t.document.selection,pe=Array.from(me.getSelectedBlocks()),Le=u.forceValue===void 0?!this.value:u.forceValue;t.change(Ye=>{if(!Le)this._removeQuote(Ye,pe.filter(findQuote));else{const nt=pe.filter(ot=>findQuote(ot)||checkCanBeQuoted(N,ot));this._applyQuote(Ye,nt)}})}_getValue(){const u=this.editor.model.document.selection,t=first(u.getSelectedBlocks());return!!(t&&findQuote(t))}_checkEnabled(){if(this.value)return!0;const u=this.editor.model.document.selection,t=this.editor.model.schema,N=first(u.getSelectedBlocks());return N?checkCanBeQuoted(t,N):!1}_removeQuote(u,t){getRangesOfBlockGroups(u,t).reverse().forEach(N=>{if(N.start.isAtStart&&N.end.isAtEnd){u.unwrap(N.start.parent);return}if(N.start.isAtStart){const pe=u.createPositionBefore(N.start.parent);u.move(N,pe);return}N.end.isAtEnd||u.split(N.end);const me=u.createPositionAfter(N.end.parent);u.move(N,me)})}_applyQuote(u,t){const N=[];getRangesOfBlockGroups(u,t).reverse().forEach(me=>{let pe=findQuote(me.start);pe||(pe=u.createElement("blockQuote"),u.wrap(me,pe)),N.push(pe)}),N.reverse().reduce((me,pe)=>me.nextSibling==pe?(u.merge(u.createPositionAfter(me)),me):pe)}}function findQuote(de){return de.parent.name=="blockQuote"?de.parent:null}function getRangesOfBlockGroups(de,u){let t,N=0;const me=[];for(;N<u.length;){const pe=u[N],Le=u[N+1];t||(t=de.createPositionBefore(pe)),(!Le||pe.nextSibling!=Le)&&(me.push(de.createRange(t,de.createPositionAfter(pe))),t=null),N++}return me}function checkCanBeQuoted(de,u){const t=de.checkChild(u.parent,"blockQuote"),N=de.checkChild(["$root","blockQuote"],u);return t&&N}class BlockQuoteEditing extends Plugin{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const u=this.editor,t=u.model.schema;u.commands.add("blockQuote",new BlockQuoteCommand(u)),t.register("blockQuote",{inheritAllFrom:"$container"}),u.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),u.model.document.registerPostFixer(Le=>{const Ye=u.model.document.differ.getChanges();for(const nt of Ye)if(nt.type=="insert"){const ot=nt.position.nodeAfter;if(!ot)continue;if(ot.is("element","blockQuote")&&ot.isEmpty)return Le.remove(ot),!0;if(ot.is("element","blockQuote")&&!t.checkChild(nt.position,ot))return Le.unwrap(ot),!0;if(ot.is("element")){const ft=Le.createRangeIn(ot);for(const mt of ft.getItems())if(mt.is("element","blockQuote")&&!t.checkChild(Le.createPositionBefore(mt),mt))return Le.unwrap(mt),!0}}else if(nt.type=="remove"){const ot=nt.position.parent;if(ot.is("element","blockQuote")&&ot.isEmpty)return Le.remove(ot),!0}return!1});const N=this.editor.editing.view.document,me=u.model.document.selection,pe=u.commands.get("blockQuote");this.listenTo(N,"enter",(Le,Ye)=>{if(!me.isCollapsed||!pe.value)return;me.getLastPosition().parent.isEmpty&&(u.execute("blockQuote"),u.editing.view.scrollToTheSelection(),Ye.preventDefault(),Le.stop())},{context:"blockquote"}),this.listenTo(N,"delete",(Le,Ye)=>{if(Ye.direction!="backward"||!me.isCollapsed||!pe.value)return;const nt=me.getLastPosition().parent;nt.isEmpty&&!nt.previousSibling&&(u.execute("blockQuote"),u.editing.view.scrollToTheSelection(),Ye.preventDefault(),Le.stop())},{context:"blockquote"})}}class BlockQuoteUI extends Plugin{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(MenuBarMenuListItemButtonView);return t.set({role:"menuitemcheckbox"}),t})}_createButton(u){const t=this.editor,N=t.locale,me=t.commands.get("blockQuote"),pe=new u(t.locale),Le=N.t;return pe.set({label:Le("Block quote"),icon:icons.quote,isToggleable:!0}),pe.bind("isEnabled").to(me,"isEnabled"),pe.bind("isOn").to(me,"value"),this.listenTo(pe,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),pe}}class BlockQuote extends Plugin{static get requires(){return[BlockQuoteEditing,BlockQuoteUI]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightStack extends EmitterMixin(){constructor(){super(...arguments);xt(this,"_stack",[])}add(t,N){const me=this._stack,pe=me[0];this._insertDescriptor(t);const Le=me[0];pe!==Le&&!compareDescriptors(pe,Le)&&this.fire("change:top",{oldDescriptor:pe,newDescriptor:Le,writer:N})}remove(t,N){const me=this._stack,pe=me[0];this._removeDescriptor(t);const Le=me[0];pe!==Le&&!compareDescriptors(pe,Le)&&this.fire("change:top",{oldDescriptor:pe,newDescriptor:Le,writer:N})}_insertDescriptor(t){const N=this._stack,me=N.findIndex(Le=>Le.id===t.id);if(compareDescriptors(t,N[me]))return;me>-1&&N.splice(me,1);let pe=0;for(;N[pe]&&shouldABeBeforeB(N[pe],t);)pe++;N.splice(pe,0,t)}_removeDescriptor(t){const N=this._stack,me=N.findIndex(pe=>pe.id===t);me>-1&&N.splice(me,1)}}function compareDescriptors(de,u){return de&&u&&de.priority==u.priority&&classesToString(de.classes)==classesToString(u.classes)}function shouldABeBeforeB(de,u){return de.priority>u.priority?!0:de.priority<u.priority?!1:classesToString(de.classes)>classesToString(u.classes)}function classesToString(de){return Array.isArray(de)?de.sort().join(","):de}var dragHandleIcon='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const WIDGET_CLASS_NAME="ck-widget",WIDGET_SELECTED_CLASS_NAME="ck-widget_selected";function isWidget(de){return de.is("element")?!!de.getCustomProperty("widget"):!1}function toWidget(de,u,t={}){if(!de.is("containerElement"))throw new CKEditorError("widget-to-widget-wrong-element-type",null,{element:de});return u.setAttribute("contenteditable","false",de),u.addClass(WIDGET_CLASS_NAME,de),u.setCustomProperty("widget",!0,de),de.getFillerOffset=getFillerOffset,u.setCustomProperty("widgetLabel",[],de),t.label&&setLabel(de,t.label),t.hasSelectionHandle&&addSelectionHandle(de,u),setHighlightHandling(de,u),de}function addHighlight(de,u,t){if(u.classes&&t.addClass(toArray$2(u.classes),de),u.attributes)for(const N in u.attributes)t.setAttribute(N,u.attributes[N],de)}function removeHighlight(de,u,t){if(u.classes&&t.removeClass(toArray$2(u.classes),de),u.attributes)for(const N in u.attributes)t.removeAttribute(N,de)}function setHighlightHandling(de,u,t=addHighlight,N=removeHighlight){const me=new HighlightStack;me.on("change:top",(Ye,nt)=>{nt.oldDescriptor&&N(de,nt.oldDescriptor,nt.writer),nt.newDescriptor&&t(de,nt.newDescriptor,nt.writer)});const pe=(Ye,nt,ot)=>me.add(nt,ot),Le=(Ye,nt,ot)=>me.remove(nt,ot);u.setCustomProperty("addHighlight",pe,de),u.setCustomProperty("removeHighlight",Le,de)}function setLabel(de,u){de.getCustomProperty("widgetLabel").push(u)}function getLabel(de){return de.getCustomProperty("widgetLabel").reduce((t,N)=>typeof N=="function"?t?t+". "+N():N():t?t+". "+N:N,"")}function toWidgetEditable(de,u,t={}){return u.addClass(["ck-editor__editable","ck-editor__nested-editable"],de),u.setAttribute("role","textbox",de),u.setAttribute("tabindex","-1",de),t.label&&u.setAttribute("aria-label",t.label,de),u.setAttribute("contenteditable",de.isReadOnly?"false":"true",de),de.on("change:isReadOnly",(N,me,pe)=>{u.setAttribute("contenteditable",pe?"false":"true",de)}),de.on("change:isFocused",(N,me,pe)=>{pe?u.addClass("ck-editor__nested-editable_focused",de):u.removeClass("ck-editor__nested-editable_focused",de)}),setHighlightHandling(de,u),de}function findOptimalInsertionRange(de,u){const t=de.getSelectedElement();if(t){const N=getTypeAroundFakeCaretPosition(de);if(N)return u.createRange(u.createPositionAt(t,N))}return u.schema.findOptimalInsertionRange(de)}function getFillerOffset(){return null}function addSelectionHandle(de,u){const t=u.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(N){const me=this.toDomElement(N),pe=new IconView;return pe.set("content",dragHandleIcon),pe.render(),me.appendChild(pe.element),me});u.insert(u.createPositionAt(de,0),t),u.addClass(["ck-widget_with-selection-handle"],de)}function calculateResizeHostAncestorWidth(de){const u=Ye=>{const{width:nt,paddingLeft:ot,paddingRight:ft}=Ye.ownerDocument.defaultView.getComputedStyle(Ye);return parseFloat(nt)-(parseFloat(ot)||0)-(parseFloat(ft)||0)},t=de.parentElement;if(!t)return 0;let N=u(t);const me=5;let pe=0,Le=t;for(;isNaN(N);){if(Le=Le.parentElement,++pe>me)return 0;N=u(Le)}return N}function calculateResizeHostPercentageWidth(de,u=new Rect(de)){const t=calculateResizeHostAncestorWidth(de);return t?u.width/t*100:0}const TYPE_AROUND_SELECTION_ATTRIBUTE="widget-type-around";function isTypeAroundWidget(de,u,t){return!!de&&isWidget(de)&&!t.isInline(u)}function getClosestTypeAroundDomButton(de){return de.closest(".ck-widget__type-around__button")}function getTypeAroundButtonPosition(de){return de.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function getClosestWidgetViewElement(de,u){const t=de.closest(".ck-widget");return u.mapDomToView(t)}function getTypeAroundFakeCaretPosition(de){return de.getAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)}var returnIcon='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const POSSIBLE_INSERTION_POSITIONS=["before","after"],RETURN_ARROW_ICON_ELEMENT=new DOMParser().parseFromString(returnIcon,"image/svg+xml").firstChild,PLUGIN_DISABLED_EDITING_ROOT_CLASS="ck-widget__type-around_disabled";class WidgetTypeAround extends Plugin{constructor(){super(...arguments);xt(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const t=this.editor,N=t.editing.view;this.on("change:isEnabled",(me,pe,Le)=>{N.change(Ye=>{for(const nt of N.document.roots)Le?Ye.removeClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,nt):Ye.addClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,nt)}),Le||t.model.change(Ye=>{Ye.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,N){const me=this.editor,pe=me.editing.view,Le=me.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);me.execute("insertParagraph",{position:me.model.createPositionAt(t,N),attributes:Le}),pe.focus(),pe.scrollToTheSelection()}_listenToIfEnabled(t,N,me,pe){this.listenTo(t,N,(...Le)=>{this.isEnabled&&me(...Le)},pe)}_insertParagraphAccordingToFakeCaretPosition(){const me=this.editor.model.document.selection,pe=getTypeAroundFakeCaretPosition(me);if(!pe)return!1;const Le=me.getSelectedElement();return this._insertParagraph(Le,pe),!0}_enableTypeAroundUIInjection(){const t=this.editor,N=t.model.schema,me=t.locale.t,pe={before:me("Insert paragraph before block"),after:me("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(Le,Ye,nt)=>{const ot=nt.mapper.toViewElement(Ye.item);ot&&isTypeAroundWidget(ot,Ye.item,N)&&(injectUIIntoWidget(nt.writer,pe,ot),ot.getCustomProperty("widgetLabel").push(()=>this.isEnabled?me("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,N=t.model,me=N.document.selection,pe=N.schema,Le=t.editing.view;this._listenToIfEnabled(Le.document,"arrowKey",(nt,ot)=>{this._handleArrowKeyPress(nt,ot)},{context:[isWidget,"$text"],priority:"high"}),this._listenToIfEnabled(me,"change:range",(nt,ot)=>{ot.directChange&&t.model.change(ft=>{ft.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(N.document,"change:data",()=>{const nt=me.getSelectedElement();if(nt){const ot=t.editing.mapper.toViewElement(nt);if(isTypeAroundWidget(ot,nt,pe))return}t.model.change(ot=>{ot.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(nt,ot,ft)=>{const mt=ft.writer;if(this._currentFakeCaretModelElement){const Ct=ft.mapper.toViewElement(this._currentFakeCaretModelElement);Ct&&(mt.removeClass(POSSIBLE_INSERTION_POSITIONS.map(Ye),Ct),this._currentFakeCaretModelElement=null)}const bt=ot.selection.getSelectedElement();if(!bt)return;const yt=ft.mapper.toViewElement(bt);if(!isTypeAroundWidget(yt,bt,pe))return;const _t=getTypeAroundFakeCaretPosition(ot.selection);_t&&(mt.addClass(Ye(_t),yt),this._currentFakeCaretModelElement=bt)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(nt,ot,ft)=>{ft||t.model.change(mt=>{mt.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})});function Ye(nt){return`ck-widget_type-around_show-fake-caret_${nt}`}}_handleArrowKeyPress(t,N){const me=this.editor,pe=me.model,Le=pe.document.selection,Ye=pe.schema,nt=me.editing.view,ot=N.keyCode,ft=isForwardArrowKeyCode(ot,me.locale.contentLanguageDirection),mt=nt.document.selection.getSelectedElement(),bt=me.editing.mapper.toModelElement(mt);let yt;isTypeAroundWidget(mt,bt,Ye)?yt=this._handleArrowKeyPressOnSelectedWidget(ft):Le.isCollapsed?yt=this._handleArrowKeyPressWhenSelectionNextToAWidget(ft):N.shiftKey||(yt=this._handleArrowKeyPressWhenNonCollapsedSelection(ft)),yt&&(N.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const me=this.editor.model,pe=me.document.selection,Le=getTypeAroundFakeCaretPosition(pe);return me.change(Ye=>{if(Le){if(!(Le===(t?"after":"before")))return Ye.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE),!0}else return Ye.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const N=this.editor,me=N.model,pe=me.schema,Le=N.plugins.get("Widget"),Ye=Le._getObjectElementNextToSelection(t),nt=N.editing.mapper.toViewElement(Ye);return isTypeAroundWidget(nt,Ye,pe)?(me.change(ot=>{Le._setSelectionOverElement(Ye),ot.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(t){const N=this.editor,me=N.model,pe=me.schema,Le=N.editing.mapper,Ye=me.document.selection,nt=t?Ye.getLastPosition().nodeBefore:Ye.getFirstPosition().nodeAfter,ot=Le.toViewElement(nt);return isTypeAroundWidget(ot,nt,pe)?(me.change(ft=>{ft.setSelection(nt,"on"),ft.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,t?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,N=t.editing.view;this._listenToIfEnabled(N.document,"mousedown",(me,pe)=>{const Le=getClosestTypeAroundDomButton(pe.domTarget);if(!Le)return;const Ye=getTypeAroundButtonPosition(Le),nt=getClosestWidgetViewElement(Le,N.domConverter),ot=t.editing.mapper.toModelElement(nt);this._insertParagraph(ot,Ye),pe.preventDefault(),me.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,N=t.model.document.selection,me=t.editing.view;this._listenToIfEnabled(me.document,"enter",(pe,Le)=>{if(pe.eventPhase!="atTarget")return;const Ye=N.getSelectedElement(),nt=t.editing.mapper.toViewElement(Ye),ot=t.model.schema;let ft;this._insertParagraphAccordingToFakeCaretPosition()?ft=!0:isTypeAroundWidget(nt,Ye,ot)&&(this._insertParagraph(Ye,Le.isSoft?"before":"after"),ft=!0),ft&&(Le.preventDefault(),pe.stop())},{context:isWidget})}_enableInsertingParagraphsOnTypingKeystroke(){const N=this.editor.editing.view.document;this._listenToIfEnabled(N,"insertText",(me,pe)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(pe.selection=N.selection)},{priority:"high"}),env.isAndroid?this._listenToIfEnabled(N,"keydown",(me,pe)=>{pe.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(N,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const t=this.editor,N=t.editing.view,me=t.model,pe=me.schema;this._listenToIfEnabled(N.document,"delete",(Le,Ye)=>{if(Le.eventPhase!="atTarget")return;const nt=getTypeAroundFakeCaretPosition(me.document.selection);if(!nt)return;const ot=Ye.direction,ft=me.document.selection.getSelectedElement(),mt=nt==="before",bt=ot=="forward";if(mt===bt)t.execute("delete",{selection:me.createSelection(ft,"on")});else{const _t=pe.getNearestSelectionRange(me.createPositionAt(ft,nt),ot);if(_t)if(!_t.isCollapsed)me.change(Ct=>{Ct.setSelection(_t),t.execute(bt?"deleteForward":"delete")});else{const Ct=me.createSelection(_t.start);if(me.modifySelection(Ct,{direction:ot}),!Ct.focus.isEqual(_t.start))me.change(Tt=>{Tt.setSelection(_t),t.execute(bt?"deleteForward":"delete")});else{const Tt=getDeepestEmptyElementAncestor(pe,_t.start.parent);me.deleteContent(me.createSelection(Tt,"on"),{doNotAutoparagraph:!0})}}}Ye.preventDefault(),Le.stop()},{context:isWidget})}_enableInsertContentIntegration(){const t=this.editor,N=this.editor.model,me=N.document.selection;this._listenToIfEnabled(t.model,"insertContent",(pe,[Le,Ye])=>{if(Ye&&!Ye.is("documentSelection"))return;const nt=getTypeAroundFakeCaretPosition(me);if(nt)return pe.stop(),N.change(ot=>{const ft=me.getSelectedElement(),mt=N.createPositionAt(ft,nt),bt=ot.createSelection(mt),yt=N.insertContent(Le,bt);return ot.setSelection(bt),yt})},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,me=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(pe,Le)=>{const[,Ye,nt={}]=Le;if(Ye&&!Ye.is("documentSelection"))return;const ot=getTypeAroundFakeCaretPosition(me);ot&&(nt.findOptimalPosition=ot,Le[3]=nt)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,me=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(pe,[Le])=>{if(Le&&!Le.is("documentSelection"))return;getTypeAroundFakeCaretPosition(me)&&pe.stop()},{priority:"high"})}}function injectUIIntoWidget(de,u,t){const N=de.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(me){const pe=this.toDomElement(me);return injectButtons(pe,u),injectFakeCaret(pe),pe});de.insert(de.createPositionAt(t,"end"),N)}function injectButtons(de,u){for(const t of POSSIBLE_INSERTION_POSITIONS){const N=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:u[t],"aria-hidden":"true"},children:[de.ownerDocument.importNode(RETURN_ARROW_ICON_ELEMENT,!0)]});de.appendChild(N.render())}}function injectFakeCaret(de){const u=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});de.appendChild(u.render())}function getDeepestEmptyElementAncestor(de,u){let t=u;for(const N of u.getAncestors({parentFirst:!0})){if(N.childCount>1||de.isLimit(N))break;t=N}return t}function verticalNavigationHandler(de){const u=de.model;return(t,N)=>{const me=N.keyCode==keyCodes.arrowup,pe=N.keyCode==keyCodes.arrowdown,Le=N.shiftKey,Ye=u.document.selection;if(!me&&!pe)return;const nt=pe;if(Le&&selectionWillShrink(Ye,nt))return;const ot=findTextRangeFromSelection(de,Ye,nt);if(ot){if(ot.isCollapsed){if(Ye.isCollapsed)return;if(Le)return}(ot.isCollapsed||isSingleLineRange(de,ot,nt))&&(u.change(ft=>{const mt=nt?ot.end:ot.start;if(Le){const bt=u.createSelection(Ye.anchor);bt.setFocus(mt),ft.setSelection(bt)}else ft.setSelection(mt)}),t.stop(),N.preventDefault(),N.stopPropagation())}}}function findTextRangeFromSelection(de,u,t){const N=de.model;if(t){const me=u.isCollapsed?u.focus:u.getLastPosition(),pe=getNearestNonInlineLimit(N,me,"forward");if(!pe)return null;const Le=N.createRange(me,pe),Ye=getNearestTextPosition(N.schema,Le,"backward");return Ye?N.createRange(me,Ye):null}else{const me=u.isCollapsed?u.focus:u.getFirstPosition(),pe=getNearestNonInlineLimit(N,me,"backward");if(!pe)return null;const Le=N.createRange(pe,me),Ye=getNearestTextPosition(N.schema,Le,"forward");return Ye?N.createRange(Ye,me):null}}function getNearestNonInlineLimit(de,u,t){const N=de.schema,me=de.createRangeIn(u.root),pe=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:Le,item:Ye,type:nt}of me.getWalker({startPosition:u,direction:t})){if(N.isLimit(Ye)&&!N.isInline(Ye))return Le;if(nt==pe&&N.isBlock(Ye))return null}return null}function getNearestTextPosition(de,u,t){const N=t=="backward"?u.end:u.start;if(de.checkChild(N,"$text"))return N;for(const{nextPosition:me}of u.getWalker({direction:t}))if(de.checkChild(me,"$text"))return me;return null}function isSingleLineRange(de,u,t){const N=de.model,me=de.view.domConverter;if(t){const ot=N.createSelection(u.start);N.modifySelection(ot),!ot.focus.isAtEnd&&!u.start.isEqual(ot.focus)&&(u=N.createRange(ot.focus,u.end))}const pe=de.mapper.toViewRange(u),Le=me.viewRangeToDom(pe),Ye=Rect.getDomRangeRects(Le);let nt;for(const ot of Ye){if(nt===void 0){nt=Math.round(ot.bottom);continue}if(Math.round(ot.top)>=nt)return!1;nt=Math.max(nt,Math.round(ot.bottom))}return!0}function selectionWillShrink(de,u){return!de.isCollapsed&&de.isBackward==u}class Widget extends Plugin{constructor(){super(...arguments);xt(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[WidgetTypeAround,Delete]}init(){const t=this.editor,N=t.editing.view,me=N.document,pe=t.t;this.editor.editing.downcastDispatcher.on("selection",(Le,Ye,nt)=>{const ot=nt.writer,ft=Ye.selection;if(ft.isCollapsed)return;const mt=ft.getSelectedElement();if(!mt)return;const bt=t.editing.mapper.toViewElement(mt);isWidget(bt)&&nt.consumable.consume(ft,"selection")&&ot.setSelection(ot.createRangeOn(bt),{fake:!0,label:getLabel(bt)})}),this.editor.editing.downcastDispatcher.on("selection",(Le,Ye,nt)=>{this._clearPreviouslySelectedWidgets(nt.writer);const ot=nt.writer,ft=ot.document.selection;let mt=null;for(const bt of ft.getRanges())for(const yt of bt){const _t=yt.item;isWidget(_t)&&!isChild(_t,mt)&&(ot.addClass(WIDGET_SELECTED_CLASS_NAME,_t),this._previouslySelected.add(_t),mt=_t)}},{priority:"low"}),N.addObserver(MouseObserver),this.listenTo(me,"mousedown",(...Le)=>this._onMousedown(...Le)),this.listenTo(me,"arrowKey",(...Le)=>{this._handleSelectionChangeOnArrowKeyPress(...Le)},{context:[isWidget,"$text"]}),this.listenTo(me,"arrowKey",(...Le)=>{this._preventDefaultOnArrowKeyPress(...Le)},{context:"$root"}),this.listenTo(me,"arrowKey",verticalNavigationHandler(this.editor.editing),{context:"$text"}),this.listenTo(me,"delete",(Le,Ye)=>{this._handleDelete(Ye.direction=="forward")&&(Ye.preventDefault(),Le.stop())},{context:"$root"}),this.listenTo(me,"tab",(Le,Ye)=>{Le.eventPhase=="atTarget"&&(Ye.shiftKey||this._selectFirstNestedEditable()&&(Ye.preventDefault(),Le.stop()))},{context:isWidget,priority:"low"}),this.listenTo(me,"tab",(Le,Ye)=>{Ye.shiftKey&&this._selectAncestorWidget()&&(Ye.preventDefault(),Le.stop())},{priority:"low"}),this.listenTo(me,"keydown",(Le,Ye)=>{Ye.keystroke==keyCodes.esc&&this._selectAncestorWidget()&&(Ye.preventDefault(),Le.stop())},{priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:pe("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:pe("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:pe("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:pe("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:pe("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:pe("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,N){const me=this.editor,pe=me.editing.view,Le=pe.document;let Ye=N.target;if(!Ye)return;if(N.domEvent.detail>=3){this._selectBlockContent(Ye)&&N.preventDefault();return}if(!isWidget(Ye)){const ot=findClosestEditableOrWidgetAncestor(Ye);if(!ot)return;if(isWidget(ot))Ye=ot;else{const ft=getElementFromMouseEvent(pe,N);if(ft&&isWidget(ft))Ye=ft;else return}}env.isAndroid&&N.preventDefault(),Le.isFocused||pe.focus();const nt=me.editing.mapper.toModelElement(Ye);this._setSelectionOverElement(nt)}_selectBlockContent(t){const N=this.editor,me=N.model,pe=N.editing.mapper,Le=me.schema,Ye=pe.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),nt=findTextBlockAncestor(pe.toModelElement(Ye),me.schema);return nt?(me.change(ot=>{const ft=Le.isLimit(nt)?null:findNextTextBlock(ot.createPositionAfter(nt),Le),mt=ot.createPositionAt(nt,0),bt=ft?ot.createPositionAt(ft,0):ot.createPositionAt(nt,"end");ot.setSelection(ot.createRange(mt,bt))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(t,N){const me=N.keyCode,pe=this.editor.model,Le=pe.schema,Ye=pe.document.selection,nt=Ye.getSelectedElement(),ot=getLocalizedArrowKeyCodeDirection(me,this.editor.locale.contentLanguageDirection),ft=ot=="down"||ot=="right",mt=ot=="up"||ot=="down";if(nt&&Le.isObject(nt)){const yt=ft?Ye.getLastPosition():Ye.getFirstPosition(),_t=Le.getNearestSelectionRange(yt,ft?"forward":"backward");_t&&(pe.change(Ct=>{Ct.setSelection(_t)}),N.preventDefault(),t.stop());return}if(!Ye.isCollapsed&&!N.shiftKey){const yt=Ye.getFirstPosition(),_t=Ye.getLastPosition(),Ct=yt.nodeAfter,Tt=_t.nodeBefore;(Ct&&Le.isObject(Ct)||Tt&&Le.isObject(Tt))&&(pe.change(At=>{At.setSelection(ft?_t:yt)}),N.preventDefault(),t.stop());return}if(!Ye.isCollapsed)return;const bt=this._getObjectElementNextToSelection(ft);if(bt&&Le.isObject(bt)){if(Le.isInline(bt)&&mt)return;this._setSelectionOverElement(bt),N.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,N){const me=this.editor.model,pe=me.schema,Le=me.document.selection.getSelectedElement();Le&&pe.isObject(Le)&&(N.preventDefault(),t.stop())}_handleDelete(t){const me=this.editor.model.document.selection;if(!this.editor.model.canEditAt(me)||!me.isCollapsed)return;const pe=this._getObjectElementNextToSelection(t);if(pe)return this.editor.model.change(Le=>{let Ye=me.anchor.parent;for(;Ye.isEmpty;){const nt=Ye;Ye=nt.parent,Le.remove(nt)}this._setSelectionOverElement(pe)}),!0}_setSelectionOverElement(t){this.editor.model.change(N=>{N.setSelection(N.createRangeOn(t))})}_getObjectElementNextToSelection(t){const N=this.editor.model,me=N.schema,pe=N.document.selection,Le=N.createSelection(pe);if(N.modifySelection(Le,{direction:t?"forward":"backward"}),Le.isEqual(pe))return null;const Ye=t?Le.focus.nodeBefore:Le.focus.nodeAfter;return Ye&&me.isObject(Ye)?Ye:null}_clearPreviouslySelectedWidgets(t){for(const N of this._previouslySelected)t.removeClass(WIDGET_SELECTED_CLASS_NAME,N);this._previouslySelected.clear()}_selectFirstNestedEditable(){const t=this.editor,me=this.editor.editing.view.document;for(const pe of me.selection.getFirstRange().getItems())if(pe.is("editableElement")){const Le=t.editing.mapper.toModelElement(pe);/* istanbul ignore next -- @preserve */if(!Le)continue;const Ye=t.model.createPositionAt(Le,0),nt=t.model.schema.getNearestSelectionRange(Ye,"forward");return t.model.change(ot=>{ot.setSelection(nt)}),!0}return!1}_selectAncestorWidget(){const t=this.editor,N=t.editing.mapper,pe=t.editing.view.document.selection.getFirstPosition().parent,Ye=(pe.is("$text")?pe.parent:pe).findAncestor(isWidget);if(!Ye)return!1;const nt=N.toModelElement(Ye);/* istanbul ignore next -- @preserve */return nt?(t.model.change(ot=>{ot.setSelection(nt,"on")}),!0):!1}}function findClosestEditableOrWidgetAncestor(de){let u=de;for(;u;){if(u.is("editableElement")||isWidget(u))return u;u=u.parent}return null}function getElementFromMouseEvent(de,u){const t=getRangeFromMouseEvent(u.domEvent);let N=null;if(t?N=de.domConverter.domRangeToView(t):N=de.createRange(de.createPositionAt(u.target,0)),!N)return null;const me=N.start;if(!me.parent)return null;let pe=me.parent;return me.parent.is("editableElement")&&(me.isAtEnd&&me.nodeBefore?pe=me.nodeBefore:me.isAtStart&&me.nodeAfter&&(pe=me.nodeAfter)),pe.is("$text")?pe.parent:pe}function isChild(de,u){return u?Array.from(de.getAncestors()).includes(u):!1}function findTextBlockAncestor(de,u){for(const t of de.getAncestors({includeSelf:!0,parentFirst:!0})){if(u.checkChild(t,"$text"))return t;if(u.isLimit(t)&&!u.isObject(t))break}return null}function findNextTextBlock(de,u){const t=new TreeWalker({startPosition:de});for(const{item:N}of t){if(u.isLimit(N)||!N.is("element"))return null;if(u.checkChild(N,"$text"))return N}return null}class WidgetToolbarRepository extends Plugin{constructor(){super(...arguments);xt(this,"_toolbarDefinitions",new Map);xt(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const N=t.plugins.get("BalloonToolbar");this.listenTo(N,"show",me=>{isWidgetSelected(t.editing.view.document.selection)&&me.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:N,items:me,getRelatedElement:pe,balloonClassName:Le="ck-toolbar-container"}){if(!me.length){logWarning("widget-toolbar-no-items",{toolbarId:t});return}const Ye=this.editor,nt=Ye.t,ot=new ToolbarView(Ye.locale);if(ot.ariaLabel=N||nt("Widget toolbar"),this._toolbarDefinitions.has(t))throw new CKEditorError("widget-toolbar-duplicated",this,{toolbarId:t});const ft={view:ot,getRelatedElement:pe,balloonClassName:Le,itemsConfig:me,initialized:!1};Ye.ui.addToolbar(ot,{isContextual:!0,beforeFocus:()=>{const mt=pe(Ye.editing.view.document.selection);mt&&this._showToolbar(ft,mt)},afterBlur:()=>{this._hideToolbar(ft)}}),this._toolbarDefinitions.set(t,ft)}_updateToolbarsVisibility(){let t=0,N=null,me=null;for(const pe of this._toolbarDefinitions.values()){const Le=pe.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!Le)this._isToolbarInBalloon(pe)&&this._hideToolbar(pe);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(pe)&&this._hideToolbar(pe);else{const Ye=Le.getAncestors().length;Ye>t&&(t=Ye,N=Le,me=pe)}}me&&this._showToolbar(me,N)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,N){this._isToolbarVisible(t)?repositionContextualBalloon$2(this.editor,N):this._isToolbarInBalloon(t)||(t.initialized||(t.initialized=!0,t.view.fillFromConfig(t.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:t.view,position:getBalloonPositionData$1(this.editor,N),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const me of this._toolbarDefinitions.values())if(this._isToolbarVisible(me)){const pe=me.getRelatedElement(this.editor.editing.view.document.selection);repositionContextualBalloon$2(this.editor,pe)}}))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function repositionContextualBalloon$2(de,u){const t=de.plugins.get("ContextualBalloon"),N=getBalloonPositionData$1(de,u);t.updatePosition(N)}function getBalloonPositionData$1(de,u){const t=de.editing.view,N=BalloonPanelView.defaultPositions;return{target:t.domConverter.mapViewToDom(u),positions:[N.northArrowSouth,N.northArrowSouthWest,N.northArrowSouthEast,N.southArrowNorth,N.southArrowNorthWest,N.southArrowNorthEast,N.viewportStickyNorth]}}function isWidgetSelected(de){const u=de.getSelectedElement();return!!(u&&isWidget(u))}class ResizeState extends ObservableMixin(){constructor(t){super();xt(this,"_referenceCoordinates");xt(this,"_options");xt(this,"_originalWidth");xt(this,"_originalHeight");xt(this,"_originalWidthPercents");xt(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(t,N,me){const pe=new Rect(N);this.activeHandlePosition=getHandlePosition(t),this._referenceCoordinates=getAbsoluteBoundaryPoint(N,getOppositePosition(this.activeHandlePosition)),this._originalWidth=pe.width,this._originalHeight=pe.height,this._aspectRatio=pe.width/pe.height;const Le=me.style.width;Le&&Le.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(Le):this._originalWidthPercents=calculateResizeHostPercentageWidth(me,pe)}update(t){this.proposedWidth=t.width,this.proposedHeight=t.height,this.proposedWidthPercents=t.widthPercents,this.proposedHandleHostWidth=t.handleHostWidth,this.proposedHandleHostHeight=t.handleHostHeight}}function getAbsoluteBoundaryPoint(de,u){const t=new Rect(de),N=u.split("-"),me={x:N[1]=="right"?t.right:t.left,y:N[0]=="bottom"?t.bottom:t.top};return me.x+=de.ownerDocument.defaultView.scrollX,me.y+=de.ownerDocument.defaultView.scrollY,me}function getResizerHandleClass(de){return`ck-widget__resizer__handle-${de}`}function getHandlePosition(de){const u=["top-left","top-right","bottom-right","bottom-left"];for(const t of u)if(de.classList.contains(getResizerHandleClass(t)))return t}function getOppositePosition(de){const u=de.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[u[0]]}-${t[u[1]]}`}class SizeView extends View{constructor(){super();const u=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",u.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:u.if("_isVisible","none",t=>!t)}},children:[{text:u.to("_label")}]})}_bindToState(u,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(N,me)=>N!==null&&me!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(N,me,pe)=>u.unit==="px"?`${N}${me}`:`${pe}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(N,me,pe)=>me<50||pe<50?"above-center":N)}_dismiss(){this.unbind(),this._isVisible=!1}}class Resizer extends ObservableMixin(){constructor(t){super();xt(this,"_state");xt(this,"_sizeView");xt(this,"_options");xt(this,"_viewResizerWrapper",null);xt(this,"_initialViewWidth");this._options=t,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(N,me)=>N&&me),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",N=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),N.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(N=>{N.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(N=>{N.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const t=this,N=this._options.viewElement;this._options.editor.editing.view.change(pe=>{const Le=pe.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(Ye){const nt=this.toDomElement(Ye);return t._appendHandles(nt),t._appendSizeUI(nt),nt});pe.insert(pe.createPositionAt(N,"end"),Le),pe.addClass("ck-widget_with-resizer",N),this._viewResizerWrapper=Le,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(t){this._state=new ResizeState(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const N=this._proposeNewSize(t);this._options.editor.editing.view.change(ft=>{const mt=this._options.unit||"%",bt=(mt==="%"?N.widthPercents:N.width)+mt;ft.setStyle("width",bt,this._options.viewElement)});const pe=this._getHandleHost(),Le=new Rect(pe),Ye=Math.round(Le.width),nt=Math.round(Le.height),ot=new Rect(pe);N.width=Math.round(ot.width),N.height=Math.round(ot.height),this.redraw(Le),this.state.update({...N,handleHostWidth:Ye,handleHostHeight:nt})}commit(){const t=this._options.unit||"%",N=(t==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(N)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const N=this._domResizerWrapper;if(!existsInDom(N))return;const me=N.parentElement,pe=this._getHandleHost(),Le=this._viewResizerWrapper,Ye=[Le.getStyle("width"),Le.getStyle("height"),Le.getStyle("left"),Le.getStyle("top")];let nt;if(me.isSameNode(pe)){const ot=t||new Rect(pe);nt=[ot.width+"px",ot.height+"px",void 0,void 0]}else nt=[pe.offsetWidth+"px",pe.offsetHeight+"px",pe.offsetLeft+"px",pe.offsetTop+"px"];compareArrays(Ye,nt)!=="same"&&this._options.editor.editing.view.change(ot=>{ot.setStyle({width:nt[0],height:nt[1],left:nt[2],top:nt[3]},Le)})}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(N=>{N.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(t){const N=this.state,me=extractCoordinates(t),pe=this._options.isCentered?this._options.isCentered(this):!0,Le={x:N._referenceCoordinates.x-(me.x+N.originalWidth),y:me.y-N.originalHeight-N._referenceCoordinates.y};pe&&N.activeHandlePosition.endsWith("-right")&&(Le.x=me.x-(N._referenceCoordinates.x+N.originalWidth)),pe&&(Le.x*=2);let Ye=Math.abs(N.originalWidth+Le.x),nt=Math.abs(N.originalHeight+Le.y);return(Ye/N.aspectRatio>nt?"width":"height")=="width"?nt=Ye/N.aspectRatio:Ye=nt*N.aspectRatio,{width:Math.round(Ye),height:Math.round(nt),widthPercents:Math.min(Math.round(N.originalWidthPercents/N.originalWidth*Ye*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(t){const N=["top-left","top-right","bottom-right","bottom-left"];for(const me of N)t.appendChild(new Template({tag:"div",attributes:{class:`ck-widget__resizer__handle ${getResizerClass(me)}`}}).render())}_appendSizeUI(t){this._sizeView=new SizeView,this._sizeView.render(),t.appendChild(this._sizeView.element)}}function getResizerClass(de){return`ck-widget__resizer__handle-${de}`}function extractCoordinates(de){return{x:de.pageX,y:de.pageY}}function existsInDom(de){return de&&de.ownerDocument&&de.ownerDocument.contains(de)}class WidgetResize extends Plugin{constructor(){super(...arguments);xt(this,"_resizers",new Map);xt(this,"_observer");xt(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.editing,N=global$1.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),t.view.addObserver(MouseObserver),this._observer=new(DomEmitterMixin()),this.listenTo(t.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(N,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(N,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=throttle(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[pe,Le]of this._resizers)pe.isAttached()||(this._resizers.delete(pe),Le.destroy())},{priority:"lowest"}),this._observer.listenTo(global$1.window,"resize",this._redrawSelectedResizerThrottled);const me=this.editor.editing.view.document.selection;me.on("change",()=>{const pe=me.getSelectedElement(),Le=this.getResizerByViewElement(pe)||null;Le?this.select(Le):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const t of this._resizers.values())t.destroy();this._redrawSelectedResizerThrottled.cancel()}select(t){this.deselect(),this.selectedResizer=t,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(t){const N=new Resizer(t),me=this.editor.plugins;if(N.attach(),me.has("WidgetToolbarRepository")){const Ye=me.get("WidgetToolbarRepository");N.on("begin",()=>{Ye.forceDisabled("resize")},{priority:"lowest"}),N.on("cancel",()=>{Ye.clearForceDisabled("resize")},{priority:"highest"}),N.on("commit",()=>{Ye.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(t.viewElement,N);const Le=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(Le)==N&&this.select(N),N}getResizerByViewElement(t){return this._resizers.get(t)}_getResizerByHandle(t){for(const N of this._resizers.values())if(N.containsHandle(t))return N}_mouseDownListener(t,N){const me=N.domTarget;Resizer.isResizeHandle(me)&&(this._activeResizer=this._getResizerByHandle(me)||null,this._activeResizer&&(this._activeResizer.begin(me),t.stop(),N.preventDefault()))}_mouseMoveListener(t,N){this._activeResizer&&this._activeResizer.updateSize(N)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BookmarkFormView extends View{constructor(t,N){super(t);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"idInputView");xt(this,"buttonView");xt(this,"children");xt(this,"_validators");xt(this,"_focusables",new ViewCollection);xt(this,"_focusCycler");const me=t.t;this._validators=N,this.idInputView=this._createIdInput(),this.buttonView=this._createButton(me("Insert"),"ck-button-action ck-button-bold"),this.buttonView.type="submit",this.children=this._createViewChildren(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const pe=["ck","ck-bookmark-view"];this.setTemplate({tag:"form",attributes:{class:pe,tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.idInputView,this.buttonView].forEach(N=>{this._focusables.add(N),this.focusTracker.add(N.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const N=t(this);if(N)return this.idInputView.errorText=N,!1}return!0}resetFormStatus(){this.idInputView.errorText=null}_createViewChildren(){const t=this.createCollection(),N=this.t;return t.add(new FormHeaderView(this.locale,{label:N("Bookmark")})),t.add(this._createFormContentView()),t}_createFormContentView(){const t=new View(this.locale),N=this.createCollection(),me=["ck","ck-bookmark-form","ck-responsive-form"];return N.add(this.idInputView),N.add(this.buttonView),t.setTemplate({tag:"div",attributes:{class:me},children:N}),t}_createIdInput(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputText);return N.label=t("Bookmark name"),N.infoText=t("Enter the bookmark name without spaces."),N}_createButton(t,N){const me=new ButtonView(this.locale);return me.set({label:t,withText:!0}),me.extendTemplate({attributes:{class:N}}),me}get id(){const{element:t}=this.idInputView.fieldView;return t?t.value.trim():null}}class BookmarkActionsView extends View{constructor(t){super(t);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"bookmarkPreviewView");xt(this,"removeButtonView");xt(this,"editButtonView");xt(this,"_focusables",new ViewCollection);xt(this,"_focusCycler");const N=t.t;this.bookmarkPreviewView=this._createBookmarkPreviewView(),this.removeButtonView=this._createButton(N("Remove bookmark"),icons.remove,"remove",this.bookmarkPreviewView),this.editButtonView=this._createButton(N("Edit bookmark"),icons.pencil,"edit",this.bookmarkPreviewView),this.set("id",void 0),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-bookmark-actions","ck-responsive-form"],tabindex:"-1"},children:[this.bookmarkPreviewView,this.editButtonView,this.removeButtonView]})}render(){super.render(),[this.editButtonView,this.removeButtonView].forEach(N=>{this._focusables.add(N),this.focusTracker.add(N.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(t,N,me,pe){const Le=new ButtonView(this.locale);return Le.set({label:t,icon:N,tooltip:!0}),Le.delegate("execute").to(this,me),Le.labelView.unbind("id"),Le.labelView.bind("id").to(Le,"ariaLabelledBy",Ye=>getFirstToken(Ye)),Le.ariaLabelledBy=`${Le.ariaLabelledBy} ${pe.id}`,Le}_createBookmarkPreviewView(){const t=new LabelView(this.locale);return t.extendTemplate({attributes:{class:["ck","ck-bookmark-actions__preview"]}}),t.bind("text").to(this,"id"),t}}function getFirstToken(de){return de.split(" ")[0]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isBookmarkIdValid(de){return!(!de||typeof de!="string"||/\s/.test(de))}class InsertBookmarkCommand extends Command{refresh(){const t=this.editor.model.document.selection,N=this._getPositionToInsertBookmark(t);this.isEnabled=!!N}execute(u){if(!u)return;const{bookmarkId:t}=u;if(!isBookmarkIdValid(t)){logWarning("insert-bookmark-command-executed-with-invalid-name");return}const N=this.editor,me=N.model,pe=me.document.selection;me.change(Le=>{let Ye=this._getPositionToInsertBookmark(pe);if(!me.schema.checkChild(Ye,"bookmark")){const ft=N.execute("insertParagraph",{position:Ye});if(!ft)return;Ye=ft}const ot=Le.createElement("bookmark",{...Object.fromEntries(pe.getAttributes()),bookmarkId:t});me.insertObject(ot,Ye,null,{setSelection:"on"})})}_getPositionToInsertBookmark(u){const t=this.editor.model,N=t.schema,me=u.getFirstRange(),pe=me.start;if(isBookmarkAllowed(pe,N))return pe;for(const{previousPosition:Le,item:Ye}of me){if(Ye.is("element")&&N.checkChild(Ye,"$text")&&isBookmarkAllowed(Ye,N))return t.createPositionAt(Ye,0);if(isBookmarkAllowed(Le,N))return Le}return null}}function isBookmarkAllowed(de,u){return u.checkChild(de,"bookmark")?!0:u.checkChild(de,"paragraph")?u.checkChild("paragraph","bookmark"):!1}class UpdateBookmarkCommand extends Command{refresh(){const t=this.editor.model.document.selection,N=getSelectedBookmark(t);this.isEnabled=!!N,this.value=N?N.getAttribute("bookmarkId"):void 0}execute(u){if(!u)return;const{bookmarkId:t}=u;if(!isBookmarkIdValid(t)){logWarning("update-bookmark-command-executed-with-invalid-name");return}const N=this.editor.model,me=N.document.selection,pe=getSelectedBookmark(me);pe&&N.change(Le=>{Le.setAttribute("bookmarkId",t,pe)})}}function getSelectedBookmark(de){const u=de.getSelectedElement();return u&&u.is("element","bookmark")?u:null}class BookmarkEditing extends Plugin{constructor(){super(...arguments);xt(this,"_bookmarkElements",new Map)}static get pluginName(){return"BookmarkEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:t}=this;this._defineSchema(),this._defineConverters(),t.commands.add("insertBookmark",new InsertBookmarkCommand(t)),t.commands.add("updateBookmark",new UpdateBookmarkCommand(t)),this.listenTo(t.model.document,"change:data",()=>{this._trackBookmarkElements()})}getElementForBookmarkId(t){for(const[N,me]of this._bookmarkElements)if(me==t)return N;return null}_defineSchema(){this.editor.model.schema.register("bookmark",{inheritAllFrom:"$inlineObject",allowAttributes:"bookmarkId",disallowAttributes:["linkHref","htmlA"]})}_defineConverters(){const{editor:t}=this,{conversion:N,t:me}=t;t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(pe=>upcastMatcher(pe)),t.editing.view.domConverter.registerInlineObjectMatcher(pe=>upcastMatcher(pe,!1)),N.for("dataDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(pe,{writer:Le})=>Le.createEmptyElement("a",{id:pe.getAttribute("bookmarkId")})}),N.for("editingDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(pe,{writer:Le})=>{const Ye=pe.getAttribute("bookmarkId"),nt=Le.createContainerElement("a",{id:Ye,class:"ck-bookmark"},[this._createBookmarkUIElement(Le)]);return this._bookmarkElements.set(pe,Ye),toWidget(nt,Le,{label:()=>`${Ye} ${me("bookmark widget")}`})}}),N.for("upcast").add(pe=>pe.on("element:a",dataViewModelAnchorInsertion(t)))}_createBookmarkUIElement(t){return t.createUIElement("span",{class:"ck-bookmark__icon"},function(N){const me=this.toDomElement(N),pe=new IconView;return pe.set({content:icons.bookmarkInline,isColorInherited:!1}),pe.render(),me.appendChild(pe.element),me})}_trackBookmarkElements(){this._bookmarkElements.forEach((t,N)=>{N.root.rootName==="$graveyard"&&this._bookmarkElements.delete(N)})}}function upcastMatcher(de,u=!0){if(!(de.name==="a")||u&&!de.isEmpty)return null;const N=de.hasAttribute("id"),me=de.hasAttribute("name"),pe=de.hasAttribute("href");return N&&!pe?{name:!0,attributes:["id"]}:me&&!pe?{name:!0,attributes:["name"]}:null}function dataViewModelAnchorInsertion(de){return(u,t,N)=>{const me=t.viewItem,pe=upcastMatcher(me,!1);if(!pe||!N.consumable.test(me,pe)||!isEnabledNonEmptyAnchorConversion(de)&&!me.isEmpty)return;const Ye=N.writer,nt=me.getAttribute("id"),ot=me.getAttribute("name"),ft=nt||ot,mt=Ye.createElement("bookmark",{bookmarkId:ft});if(!N.safeInsert(mt,t.modelCursor))return;N.consumable.consume(me,pe),nt===ot&&N.consumable.consume(me,{attributes:["name"]}),N.updateConversionResult(mt,t);const{modelCursor:bt,modelRange:yt}=N.convertChildren(me,t.modelCursor);t.modelCursor=bt,t.modelRange=Ye.createRange(t.modelRange.start,yt.end)}}function isEnabledNonEmptyAnchorConversion(de){const u=de.config.get("bookmark.enableNonEmptyAnchorConversion");return u!==void 0?u:!0}const VISUAL_SELECTION_MARKER_NAME$1="bookmark-ui";class BookmarkUI extends Plugin{constructor(){super(...arguments);xt(this,"actionsView",null);xt(this,"formView",null);xt(this,"_balloon")}static get requires(){return[BookmarkEditing,ContextualBalloon]}static get pluginName(){return"BookmarkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.editing.view.addObserver(ClickObserver),this._balloon=t.plugins.get(ContextualBalloon),this._createToolbarBookmarkButton(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME$1,view:{classes:["ck-fake-bookmark-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME$1,view:(N,{writer:me})=>{if(!N.markerRange.isCollapsed)return null;const pe=me.createUIElement("span");return me.addClass(["ck-fake-bookmark-selection","ck-fake-bookmark-selection_collapsed"],pe),pe}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const t=this.editor,N=new BookmarkActionsView(t.locale),me=t.commands.get("updateBookmark"),pe=t.commands.get("delete");return N.bind("id").to(me,"value"),N.editButtonView.bind("isEnabled").to(me),N.removeButtonView.bind("isEnabled").to(pe),this.listenTo(N,"edit",()=>{this._addFormView()}),this.listenTo(N,"remove",()=>{this._hideUI(),t.execute("delete")}),N.keystrokes.set("Esc",(Le,Ye)=>{this._hideUI(),Ye()}),N}_createFormView(){const t=this.editor,N=t.locale,me=t.commands.get("insertBookmark"),pe=t.commands.get("updateBookmark"),Le=[me,pe],Ye=new(CssTransitionDisablerMixin(BookmarkFormView))(N,getFormValidators$3(t));return Ye.idInputView.fieldView.bind("value").to(pe,"value"),Ye.idInputView.bind("isEnabled").toMany(Le,"isEnabled",(...nt)=>nt.some(ot=>ot)),Ye.buttonView.bind("isEnabled").toMany(Le,"isEnabled",(...nt)=>nt.some(ot=>ot)),this.listenTo(Ye,"submit",()=>{if(Ye.isValid()){const nt=Ye.id;this._getSelectedBookmarkElement()?t.execute("updateBookmark",{bookmarkId:nt}):t.execute("insertBookmark",{bookmarkId:nt}),this._closeFormView()}}),this.listenTo(Ye.idInputView,"change:errorText",()=>{t.ui.update()}),Ye.keystrokes.set("Esc",(nt,ot)=>{this._closeFormView(),ot()}),Ye}_createToolbarBookmarkButton(){const t=this.editor;t.ui.componentFactory.add("bookmark",()=>{const N=this._createButton(ButtonView);return N.set({tooltip:!0}),N}),t.ui.componentFactory.add("menuBar:bookmark",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(t){const N=this.editor,me=N.locale,pe=new t(me),Le=N.commands.get("insertBookmark"),Ye=N.commands.get("updateBookmark"),nt=me.t;return pe.set({label:nt("Bookmark"),icon:icons.bookmark}),this.listenTo(pe,"execute",()=>this._showUI(!0)),pe.bind("isEnabled").toMany([Le,Ye],"isEnabled",(...ot)=>ot.some(ft=>ft)),pe.bind("isOn").to(Ye,"value",ot=>!!ot),pe}_enableBalloonActivators(){const N=this.editor.editing.view.document;this.listenTo(N,"click",()=>{this._getSelectedBookmarkElement()&&this._showUI()})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,N)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),N())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,N)=>{this._isUIVisible&&(this._hideUI(),N())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_updateFormButtonLabel(t){const N=this.editor.locale.t;this.formView.buttonView.label=N(t?"Update":"Insert")}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const N=this.editor.commands.get("updateBookmark");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.idInputView.fieldView.value=N.value||"",this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){this.editor.commands.get("updateBookmark").value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.buttonView.focus(),this.formView.idInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedBookmarkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const t=this.editor,N=t.editing.view.document;let me=this._getSelectedBookmarkElement(),pe=Ye();this._updateFormButtonLabel(!!me);const Le=()=>{const nt=this._getSelectedBookmarkElement(),ot=Ye();me&&!nt||!me&&ot!==pe?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),this._updateFormButtonLabel(!!me),me=nt,pe=ot};function Ye(){return N.selection.focus.getAncestors().reverse().find(nt=>nt.is("element"))}this.listenTo(t.ui,"update",Le),this.listenTo(this._balloon,"change:visibleView",Le)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const t=this._balloon.visibleView;return!!this.formView&&t==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,N=this.editor.model;let me;const pe=this._getSelectedBookmarkElement();if(N.markers.has(VISUAL_SELECTION_MARKER_NAME$1)){const Le=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME$1)),Ye=t.createRange(t.createPositionBefore(Le[0]),t.createPositionAfter(Le[Le.length-1]));me=t.domConverter.viewRangeToDom(Ye)}else pe&&(me=()=>{const Le=this.editor.editing.mapper,Ye=t.domConverter,nt=Le.toViewElement(pe);return Ye.mapViewToDom(nt)});return me&&{target:me}}_getSelectedBookmarkElement(){const N=this.editor.model.document.selection.getSelectedElement();return N&&N.is("element","bookmark")?N:null}_showFakeVisualSelection(){const t=this.editor.model;t.change(N=>{const me=t.document.selection.getFirstRange();if(t.markers.has(VISUAL_SELECTION_MARKER_NAME$1))N.updateMarker(VISUAL_SELECTION_MARKER_NAME$1,{range:me});else if(me.start.isAtEnd){const pe=me.start.getLastMatchingPosition(({item:Le})=>!t.schema.isContent(Le),{boundaries:me});N.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:N.createRange(pe,me.end)})}else N.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:me})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(VISUAL_SELECTION_MARKER_NAME$1)&&t.change(N=>{N.removeMarker(VISUAL_SELECTION_MARKER_NAME$1)})}}function getFormValidators$3(de){const{t:u}=de,t=de.plugins.get(BookmarkEditing);return[N=>{if(!N.id)return u("Bookmark must not be empty.")},N=>{if(N.id&&/\s/.test(N.id))return u("Bookmark name cannot contain space characters.")},N=>{const me=de.model.document.selection.getSelectedElement(),pe=t.getElementForBookmarkId(N.id);if(me!==pe&&pe)return u("Bookmark name already exists.")}]}class Bookmark extends Plugin{static get pluginName(){return"Bookmark"}static get requires(){return[BookmarkEditing,BookmarkUI,Widget]}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClipboardObserver extends DomEventObserver{constructor(t){super(t);xt(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const N=this.document;this.listenTo(N,"paste",me("clipboardInput"),{priority:"low"}),this.listenTo(N,"drop",me("clipboardInput"),{priority:"low"}),this.listenTo(N,"dragover",me("dragging"),{priority:"low"});function me(pe){return(Le,Ye)=>{Ye.preventDefault();const nt=Ye.dropRange?[Ye.dropRange]:null,ot=new EventInfo(N,pe);N.fire(ot,{dataTransfer:Ye.dataTransfer,method:Le.name,targetRanges:nt,target:Ye.target,domEvent:Ye.domEvent}),ot.stop.called&&Ye.stopPropagation()}}}onDomEvent(t){const N="clipboardData"in t?t.clipboardData:t.dataTransfer,me=t.type=="drop"||t.type=="paste",pe={dataTransfer:new DataTransfer$1(N,{cacheFiles:me})};if(t.type=="drop"||t.type=="dragover"){const Le=getRangeFromMouseEvent(t);pe.dropRange=Le&&this.view.domConverter.domRangeToView(Le)}this.fire(t.type,t,pe)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function plainTextToHtml(de){return de=de.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(de.includes("</p><p>")||de.includes("<br>"))&&(de=`<p>${de}</p>`),de}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeClipboardData(de){return de.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(u,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const smallPaddingElements=["figcaption","li"],listElements=["ol","ul"];function viewToPlainText(de,u){if(u.is("$text")||u.is("$textProxy"))return u.data;if(u.is("element","img")&&u.hasAttribute("alt"))return u.getAttribute("alt");if(u.is("element","br"))return`
`;let t="",N=null;for(const me of u.getChildren())t+=newLinePadding(me,N)+viewToPlainText(de,me),N=me;if(u.is("rawElement")){const me=document.createElement("div");u.render(me,de),t+=domElementToPlainText(me)}return t}function domElementToPlainText(de){let u="";if(de.nodeType===Node.TEXT_NODE)return de.textContent;if(de.tagName==="BR")return`
`;for(const t of de.childNodes)u+=domElementToPlainText(t);return u}function newLinePadding(de,u){return u?de.is("element","li")&&!de.isEmpty&&de.getChild(0).is("containerElement")||listElements.includes(de.name)&&listElements.includes(u.name)?`

`:!de.is("containerElement")&&!u.is("containerElement")?"":smallPaddingElements.includes(de.name)||smallPaddingElements.includes(u.name)?`
`:de.is("element")&&de.getCustomProperty("dataPipeline:transparentRendering")||u.is("element")&&u.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class ClipboardMarkersUtils extends Plugin{constructor(){super(...arguments);xt(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,N){this._markersToCopy.set(t,N)}_copySelectedFragmentWithMarkers(t,N,me=pe=>pe.model.getSelectedContent(pe.model.document.selection)){return this.editor.model.change(pe=>{const Le=pe.model.document.selection;pe.setSelection(N);const Ye=this._insertFakeMarkersIntoSelection(pe,pe.model.document.selection,t),nt=me(pe),ot=this._removeFakeMarkersInsideElement(pe,nt);for(const[ft,mt]of Object.entries(Ye)){ot[ft]||(ot[ft]=pe.createRangeIn(nt));for(const bt of mt)pe.remove(bt)}nt.markers.clear();for(const[ft,mt]of Object.entries(ot))nt.markers.set(ft,mt);return pe.setSelection(Le),nt})}_pasteMarkersIntoTransformedElement(t,N){const me=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(pe=>{const Le=this._insertFakeMarkersElements(pe,me),Ye=N(pe),nt=this._removeFakeMarkersInsideElement(pe,Ye);for(const ot of Object.values(Le).flat())pe.remove(ot);for(const[ot,ft]of Object.entries(nt))pe.model.markers.has(ot)||pe.addMarker(ot,{usingOperation:!0,affectsData:!0,range:ft});return Ye})}_pasteFragmentWithMarkers(t){const N=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const me of N)t.markers.set(me.name,me.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,N,me={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const pe=this._markersToCopy.get(t);this._markersToCopy.set(t,me),N(),pe?this._markersToCopy.set(t,pe):this._markersToCopy.delete(t)}_isMarkerCopyable(t,N){const me=this._getMarkerClipboardConfig(t);if(!me)return!1;if(!N)return!0;const{allowedActions:pe}=me;return pe==="all"||pe.includes(N)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[N]=t.split(":");return this._markersToCopy.get(N)||null}_insertFakeMarkersIntoSelection(t,N,me){const pe=this._getCopyableMarkersFromSelection(t,N,me);return this._insertFakeMarkersElements(t,pe)}_getCopyableMarkersFromSelection(t,N,me){const pe=Array.from(N.getRanges()),Le=new Set(pe.flatMap(nt=>Array.from(t.model.markers.getMarkersIntersectingRange(nt)))),Ye=nt=>{if(!this._isMarkerCopyable(nt.name,me))return!1;const{copyPartiallySelected:ft}=this._getMarkerClipboardConfig(nt.name);if(!ft){const mt=nt.getRange();return pe.some(bt=>bt.containsRange(mt,!0))}return!0};return Array.from(Le).filter(Ye).map(nt=>({name:me==="dragstart"?this._getUniqueMarkerName(nt.name):nt.name,range:nt.getRange()}))}_getPasteMarkersFromRangeMap(t,N=null){const{model:me}=this.editor;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).flatMap(([Le,Ye])=>{if(!this._hasMarkerConfiguration(Le))return[{name:Le,range:Ye}];if(this._isMarkerCopyable(Le,N)){const nt=this._getMarkerClipboardConfig(Le),ot=me.markers.has(Le)&&me.markers.get(Le).getRange().root.rootName==="$graveyard";return(nt.duplicateOnPaste||ot)&&(Le=this._getUniqueMarkerName(Le)),[{name:Le,range:Ye}]}return[]})}_insertFakeMarkersElements(t,N){const me={},pe=N.flatMap(Le=>{const{start:Ye,end:nt}=Le.range;return[{position:Ye,marker:Le,type:"start"},{position:nt,marker:Le,type:"end"}]}).sort(({position:Le},{position:Ye})=>Le.isBefore(Ye)?1:-1);for(const{position:Le,marker:Ye,type:nt}of pe){const ot=t.createElement("$marker",{"data-name":Ye.name,"data-type":nt});me[Ye.name]||(me[Ye.name]=[]),me[Ye.name].push(ot),t.insert(ot,Le)}return me}_removeFakeMarkersInsideElement(t,N){const pe=this._getAllFakeMarkersFromElement(t,N).reduce((Le,Ye)=>{const nt=Ye.markerElement&&t.createPositionBefore(Ye.markerElement);let ot=Le[Ye.name],ft=!1;return ot&&ot.start&&ot.end&&(this._getMarkerClipboardConfig(Ye.name).duplicateOnPaste?Le[this._getUniqueMarkerName(Ye.name)]=Le[Ye.name]:ft=!0,ot=null),ft||(Le[Ye.name]={...ot,[Ye.type]:nt}),Ye.markerElement&&t.remove(Ye.markerElement),Le},{});return mapValues(pe,Le=>new Range(Le.start||t.createPositionFromPath(N,[0]),Le.end||t.createPositionAt(N,"end")))}_getAllFakeMarkersFromElement(t,N){const me=Array.from(t.createRangeIn(N)).flatMap(({item:Ye})=>{if(!Ye.is("element","$marker"))return[];const nt=Ye.getAttribute("data-name"),ot=Ye.getAttribute("data-type");return[{markerElement:Ye,name:nt,type:ot}]}),pe=[],Le=[];for(const Ye of me)Ye.type==="end"&&(me.some(ot=>ot.name===Ye.name&&ot.type==="start")||pe.push({markerElement:null,name:Ye.name,type:"start"})),Ye.type==="start"&&(me.some(ot=>ot.name===Ye.name&&ot.type==="end")||Le.unshift({markerElement:null,name:Ye.name,type:"end"}));return[...pe,...me,...Le]}_getUniqueMarkerName(t){const N=t.split(":"),me=uid().substring(1,6);return N.length===3?`${N.slice(0,2).join(":")}:${me}`:`${N.join(":")}:${me}`}}class ClipboardPipeline extends Plugin{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils]}init(){this.editor.editing.view.addObserver(ClipboardObserver),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(u,t,N){const me=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:N==="cut"},()=>{const pe=me._copySelectedFragmentWithMarkers(N,t);this.fire("outputTransformation",{dataTransfer:u,content:pe,method:N})})}_setupPasteDrop(){const u=this.editor,t=u.model,N=u.editing.view,me=N.document,pe=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(me,"clipboardInput",(Le,Ye)=>{Ye.method=="paste"&&!u.model.canEditAt(u.model.document.selection)&&Le.stop()},{priority:"highest"}),this.listenTo(me,"clipboardInput",(Le,Ye)=>{const nt=Ye.dataTransfer;let ot;if(Ye.content)ot=Ye.content;else{let bt="";nt.getData("text/html")?bt=normalizeClipboardData(nt.getData("text/html")):nt.getData("text/plain")&&(bt=plainTextToHtml(nt.getData("text/plain"))),ot=this.editor.data.htmlProcessor.toView(bt)}const ft=new EventInfo(this,"inputTransformation"),mt=nt.getData("application/ckeditor5-editor-id")||null;this.fire(ft,{content:ot,dataTransfer:nt,sourceEditorId:mt,targetRanges:Ye.targetRanges,method:Ye.method}),ft.stop.called&&Le.stop(),N.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(Le,Ye)=>{if(Ye.content.isEmpty)return;const ot=this.editor.data.toModel(Ye.content,"$clipboardHolder");ot.childCount!=0&&(Le.stop(),t.change(()=>{this.fire("contentInsertion",{content:ot,method:Ye.method,sourceEditorId:Ye.sourceEditorId,dataTransfer:Ye.dataTransfer,targetRanges:Ye.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(Le,Ye)=>{Ye.resultRange=pe._pasteFragmentWithMarkers(Ye.content)},{priority:"low"})}_setupCopyCut(){const u=this.editor,t=u.model.document,me=u.editing.view.document,pe=(Le,Ye)=>{const nt=Ye.dataTransfer;Ye.preventDefault(),this._fireOutputTransformationEvent(nt,t.selection,Le.name)};this.listenTo(me,"copy",pe,{priority:"low"}),this.listenTo(me,"cut",(Le,Ye)=>{u.model.canEditAt(u.model.document.selection)?pe(Le,Ye):Ye.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(Le,Ye)=>{const nt=u.data.toView(Ye.content,{isClipboardPipeline:!0});me.fire("clipboardOutput",{dataTransfer:Ye.dataTransfer,content:nt,method:Ye.method})},{priority:"low"}),this.listenTo(me,"clipboardOutput",(Le,Ye)=>{Ye.content.isEmpty||(Ye.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(Ye.content)),Ye.dataTransfer.setData("text/plain",viewToPlainText(u.data.htmlProcessor.domConverter,Ye.content)),Ye.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),Ye.method=="cut"&&u.model.deleteContent(t.selection)},{priority:"low"})}}const toPx$1=toUnit("px");class LineView extends View{constructor(){super();const u=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",u.if("isVisible","ck-hidden",t=>!t)],style:{left:u.to("left",t=>toPx$1(t)),top:u.to("top",t=>toPx$1(t)),width:u.to("width",t=>toPx$1(t))}}})}}class DragDropTarget extends Plugin{constructor(){super(...arguments);xt(this,"removeDropMarkerDelayed",delay(()=>this.removeDropMarker(),40));xt(this,"_updateDropMarkerThrottled",throttle(t=>this._updateDropMarker(t),40));xt(this,"_reconvertMarkerThrottled",throttle(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));xt(this,"_dropTargetLineView",new LineView);xt(this,"_domEmitter",new(DomEmitterMixin()));xt(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,N,me,pe,Le,Ye){this.removeDropMarkerDelayed.cancel();const nt=findDropTargetRange(this.editor,t,N,me,pe,Le,Ye);/* istanbul ignore next -- @preserve */if(nt){if(Ye&&Ye.containsRange(nt))return this.removeDropMarker();this._updateDropMarkerThrottled(nt)}}getFinalDropRange(t,N,me,pe,Le,Ye){const nt=findDropTargetRange(this.editor,t,N,me,pe,Le,Ye);return this.removeDropMarker(),nt}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(N=>{N.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(N,{writer:me})=>{if(t.model.schema.checkChild(N.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(me);N.markerRange.isCollapsed?this._updateDropTargetLine(N.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const N=this.editor,me=N.model.markers;N.model.change(pe=>{me.has("drop-target")?me.get("drop-target").getRange().isEqual(t)||pe.updateMarker("drop-target",{range:t}):pe.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(N){const me=this.toDomElement(N);return me.append("",N.createElement("span"),""),me})}_updateDropTargetLine(t){const N=this.editor.editing,me=t.start.nodeBefore,pe=t.start.nodeAfter,Le=t.start.parent,Ye=me?N.mapper.toViewElement(me):null,nt=Ye?N.view.domConverter.mapViewToDom(Ye):null,ot=pe?N.mapper.toViewElement(pe):null,ft=ot?N.view.domConverter.mapViewToDom(ot):null,mt=N.mapper.toViewElement(Le);if(!mt)return;const bt=N.view.domConverter.mapViewToDom(mt),yt=this._getScrollableRect(mt),{scrollX:_t,scrollY:Ct}=global$1.window,Tt=nt?new Rect(nt):null,At=ft?new Rect(ft):null,It=new Rect(bt).excludeScrollbarsAndBorders(),Pt=Tt?Tt.bottom:It.top,Bt=At?At.top:It.bottom,Ot=global$1.window.getComputedStyle(bt),Nt=Pt<=Bt?(Pt+Bt)/2:Bt;if(yt.top<Nt&&Nt<yt.bottom){const Lt=It.left+parseFloat(Ot.paddingLeft),Et=It.right-parseFloat(Ot.paddingRight),kt=Math.max(Lt+_t,yt.left),St=Math.min(Et+_t,yt.right);this._dropTargetLineView.set({isVisible:!0,left:kt,top:Nt+Ct,width:St-kt})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const N=t.root.rootName;let me;if(this._scrollables.has(N))me=this._scrollables.get(N).domElement;else{const pe=this.editor.editing.view.domConverter.mapViewToDom(t);me=findScrollableElement(pe),this._domEmitter.listenTo(me,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const Le=new ResizeObserver$1(me,this._reconvertMarkerThrottled);this._scrollables.set(N,{domElement:me,resizeObserver:Le})}return new Rect(me).excludeScrollbarsAndBorders()}}function findDropTargetRange(de,u,t,N,me,pe,Le){const Ye=de.model,nt=de.editing.mapper;let ft=getClosestMappedModelElement(de,u);for(;ft;){if(!pe){if(Ye.schema.checkChild(ft,"$text")){if(t){const mt=t[0].start,bt=nt.toModelPosition(mt);if(!Le||Array.from(Le.getItems({shallow:!0})).every(_t=>Ye.schema.checkChild(bt,_t))){if(Ye.schema.checkChild(bt,"$text"))return Ye.createRange(bt);if(mt)return findDropTargetRangeForElement(de,getClosestMappedModelElement(de,mt.parent),N,me)}}}else if(Ye.schema.isInline(ft))return findDropTargetRangeForElement(de,ft,N,me)}if(Ye.schema.isBlock(ft))return findDropTargetRangeForElement(de,ft,N,me);if(Ye.schema.checkChild(ft,"$block")){const mt=Array.from(ft.getChildren()).filter(_t=>_t.is("element")&&!shouldIgnoreElement(de,_t));let bt=0,yt=mt.length;if(yt==0)return Ye.createRange(Ye.createPositionAt(ft,"end"));for(;bt<yt-1;){const _t=Math.floor((bt+yt)/2);findElementSide(de,mt[_t],N,me)=="before"?yt=_t:bt=_t}return findDropTargetRangeForElement(de,mt[bt],N,me)}ft=ft.parent}return null}function shouldIgnoreElement(de,u){const t=de.editing.mapper,N=de.editing.view.domConverter,me=t.toViewElement(u);if(!me)return!0;const pe=N.mapViewToDom(me);return global$1.window.getComputedStyle(pe).float!="none"}function findDropTargetRangeForElement(de,u,t,N){const me=de.model;return me.createRange(me.createPositionAt(u,findElementSide(de,u,t,N)))}function findElementSide(de,u,t,N){const me=de.editing.mapper,pe=de.editing.view.domConverter,Le=me.toViewElement(u),Ye=pe.mapViewToDom(Le),nt=new Rect(Ye);return de.model.schema.isInline(u)?t<(nt.left+nt.right)/2?"before":"after":N<(nt.top+nt.bottom)/2?"before":"after"}function getClosestMappedModelElement(de,u){const t=de.editing.mapper,N=de.editing.view,me=t.toModelElement(u);if(me)return me;const pe=N.createPositionBefore(u),Le=t.findMappedViewAncestor(pe);return t.toModelElement(Le)}function findScrollableElement(de){let u=de;do{u=u.parentElement;const t=global$1.window.getComputedStyle(u).overflowY;if(t=="auto"||t=="scroll")break}while(u.tagName!="BODY");return u}class DragDropBlockToolbar extends Plugin{constructor(){super(...arguments);xt(this,"_isBlockDragging",!1);xt(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(N,me,pe)=>{pe?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),env.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const me=t.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(me,"dragstart",(pe,Le)=>this._handleBlockDragStart(Le)),this._domEmitter.listenTo(global$1.document,"dragover",(pe,Le)=>this._handleBlockDragging(Le)),this._domEmitter.listenTo(global$1.document,"drop",(pe,Le)=>this._handleBlockDragging(Le)),this._domEmitter.listenTo(global$1.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&me.setAttribute("draggable","true"),this.on("change:isEnabled",(pe,Le,Ye)=>{me.setAttribute("draggable",Ye?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const N=this.editor.model,me=N.document.selection,pe=this.editor.editing.view,Le=Array.from(me.getSelectedBlocks()),Ye=N.createRange(N.createPositionBefore(Le[0]),N.createPositionAfter(Le[Le.length-1]));N.change(nt=>nt.setSelection(Ye)),this._isBlockDragging=!0,pe.focus(),pe.getObserver(ClipboardObserver).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const N=t.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),me=t.clientY,pe=document.elementFromPoint(N,me),Le=this.editor.editing.view;!pe||!pe.closest(".ck-editor__editable")||Le.getObserver(ClipboardObserver).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:pe,clientX:N,clientY:me,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class DragDrop extends Plugin{constructor(){super(...arguments);xt(this,"_draggedRange");xt(this,"_draggingUid");xt(this,"_draggableElement");xt(this,"_clearDraggableAttributesDelayed",delay(()=>this._clearDraggableAttributes(),40));xt(this,"_blockMode",!1);xt(this,"_domEmitter",new(DomEmitterMixin()));xt(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline,Widget,DragDropTarget,DragDropBlockToolbar]}init(){const t=this.editor,N=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,N.addObserver(ClipboardObserver),N.addObserver(MouseObserver),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(me,pe,Le)=>{Le?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(me,pe,Le)=>{Le||this._finalizeDragging(!1)}),env.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,N=t.model,me=t.editing.view,pe=me.document,Le=t.plugins.get(DragDropTarget);this.listenTo(pe,"dragstart",(Ye,nt)=>{if(nt.target&&nt.target.is("editableElement")){nt.preventDefault();return}if(this._prepareDraggedRange(nt.target),!this._draggedRange){nt.preventDefault();return}this._draggingUid=uid(),nt.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",nt.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const ot=N.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(nt.dataTransfer,ot,"dragstart");const{dataTransfer:mt,domTarget:bt,domEvent:yt}=nt,{clientX:_t}=yt;this._updatePreview({dataTransfer:mt,domTarget:bt,clientX:_t}),nt.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(pe,"dragend",(Ye,nt)=>{this._finalizeDragging(!nt.dataTransfer.isCanceled&&nt.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(global$1.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(pe,"dragenter",()=>{this.isEnabled&&me.focus()}),this.listenTo(pe,"dragleave",()=>{Le.removeDropMarkerDelayed()}),this.listenTo(pe,"dragging",(Ye,nt)=>{if(!this.isEnabled){nt.dataTransfer.dropEffect="none";return}const{clientX:ot,clientY:ft}=nt.domEvent;Le.updateDropMarker(nt.target,nt.targetRanges,ot,ft,this._blockMode,this._draggedRange),this._draggedRange||(nt.dataTransfer.dropEffect="copy"),env.isGecko||(nt.dataTransfer.effectAllowed=="copy"?nt.dataTransfer.dropEffect="copy":["all","copyMove"].includes(nt.dataTransfer.effectAllowed)&&(nt.dataTransfer.dropEffect="move")),Ye.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,me=t.editing.view.document,pe=t.plugins.get(DragDropTarget);this.listenTo(me,"clipboardInput",(Le,Ye)=>{if(Ye.method!="drop")return;const{clientX:nt,clientY:ot}=Ye.domEvent,ft=pe.getFinalDropRange(Ye.target,Ye.targetRanges,nt,ot,this._blockMode,this._draggedRange);if(!ft){this._finalizeDragging(!1),Le.stop();return}if(this._draggedRange&&this._draggingUid!=Ye.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),getFinalDropEffect(Ye.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(ft,!0)){this._finalizeDragging(!1),Le.stop();return}Ye.targetRanges=[t.editing.mapper.toViewRange(ft)]},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(ClipboardPipeline);t.on("contentInsertion",(N,me)=>{if(!this.isEnabled||me.method!=="drop")return;const pe=me.targetRanges.map(Le=>this.editor.editing.mapper.toModelRange(Le));this.editor.model.change(Le=>Le.setSelection(pe))},{priority:"high"}),t.on("contentInsertion",(N,me)=>{if(!this.isEnabled||me.method!=="drop")return;const pe=getFinalDropEffect(me.dataTransfer)=="move",Le=!me.resultRange||!me.resultRange.isCollapsed;this._finalizeDragging(Le&&pe)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,N=t.editing.view,me=N.document;this.listenTo(me,"mousedown",(pe,Le)=>{if(env.isAndroid||!Le)return;this._clearDraggableAttributesDelayed.cancel();let Ye=findDraggableWidget(Le.target);if(env.isBlink&&!t.isReadOnly&&!Ye&&!me.selection.isCollapsed){const nt=me.selection.getSelectedElement();(!nt||!isWidget(nt))&&(Ye=me.selection.editableElement)}Ye&&(N.change(nt=>{nt.setAttribute("draggable","true",Ye)}),this._draggableElement=t.editing.mapper.toModelElement(Ye))}),this.listenTo(me,"mouseup",()=>{env.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(N=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&N.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const N=this.editor,me=N.model;N.plugins.get(DragDropTarget).removeDropMarker(),this._clearDraggableAttributes(),N.plugins.has("WidgetToolbarRepository")&&N.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&me.change(Le=>{const Ye=me.createSelection(this._draggedRange);me.deleteContent(Ye,{doNotAutoparagraph:!0});const nt=Ye.getFirstPosition().parent;nt.isEmpty&&!me.schema.checkChild(nt,"$text")&&me.schema.checkChild(nt,"paragraph")&&Le.insertElement("paragraph",nt,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const N=this.editor,me=N.model,pe=me.document.selection,Le=t?findDraggableWidget(t):null;if(Le){const ft=N.editing.mapper.toModelElement(Le);this._draggedRange=LiveRange.fromRange(me.createRangeOn(ft)),this._blockMode=me.schema.isBlock(ft),N.plugins.has("WidgetToolbarRepository")&&N.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(pe.isCollapsed&&!pe.getFirstPosition().parent.isEmpty)return;const Ye=Array.from(pe.getSelectedBlocks()),nt=pe.getFirstRange();if(Ye.length==0){this._draggedRange=LiveRange.fromRange(nt);return}const ot=getRangeIncludingFullySelectedParents(me,Ye);if(Ye.length>1)this._draggedRange=LiveRange.fromRange(ot),this._blockMode=!0;else if(Ye.length==1){const ft=nt.start.isTouching(ot.start)&&nt.end.isTouching(ot.end);this._draggedRange=LiveRange.fromRange(ft?ot:nt),this._blockMode=ft}me.change(ft=>ft.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:N,clientX:me}){const pe=this.editor.editing.view,Le=pe.document.selection.editableElement,Ye=pe.domConverter.mapViewToDom(Le),nt=global$1.window.getComputedStyle(Ye);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=createElement(global$1.document,"div",{style:"position: fixed; left: -999999px;"}),global$1.document.body.appendChild(this._previewContainer));const ot=new Rect(Ye);if(Ye.contains(N))return;const ft=parseFloat(nt.paddingLeft),mt=createElement(global$1.document,"div");mt.className="ck ck-content",mt.style.width=nt.width,mt.style.paddingLeft=`${ot.left-me+ft}px`,env.isiOS&&(mt.style.backgroundColor="white"),pe.domConverter.setContentOf(mt,t.getData("text/html")),t.setDragImage(mt,0,0),this._previewContainer.appendChild(mt)}}function getFinalDropEffect(de){return env.isGecko?de.dropEffect:["all","copyMove"].includes(de.effectAllowed)?"move":"copy"}function findDraggableWidget(de){if(de.is("editableElement"))return null;if(de.hasClass("ck-widget__selection-handle"))return de.findAncestor(isWidget);if(isWidget(de))return de;const u=de.findAncestor(t=>isWidget(t)||t.is("editableElement"));return isWidget(u)?u:null}function getRangeIncludingFullySelectedParents(de,u){const t=u[0],N=u[u.length-1],me=t.getCommonAncestor(N),pe=de.createPositionBefore(t),Le=de.createPositionAfter(N);if(me&&me.is("element")&&!de.schema.isLimit(me)){const Ye=de.createRangeOn(me),nt=pe.isTouching(Ye.start),ot=Le.isTouching(Ye.end);if(nt&&ot)return getRangeIncludingFullySelectedParents(de,[me])}return de.createRange(pe,Le)}class PastePlainText extends Plugin{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const u=this.editor,t=u.model,N=u.editing.view,me=t.document.selection;N.addObserver(ClipboardObserver),u.plugins.get(ClipboardPipeline).on("contentInsertion",(pe,Le)=>{isUnformattedInlineContent(Le.content,t)&&t.change(Ye=>{const nt=Array.from(me.getAttributes()).filter(([ft])=>t.schema.getAttributeProperties(ft).isFormatting);me.isCollapsed||t.deleteContent(me,{doNotAutoparagraph:!0}),nt.push(...me.getAttributes());const ot=Ye.createRangeIn(Le.content);for(const ft of ot.getItems())for(const mt of nt)t.schema.checkAttribute(ft,mt[0])&&Ye.setAttribute(mt[0],mt[1],ft)})})}}function isUnformattedInlineContent(de,u){let t=u.createRangeIn(de);if(de.childCount==1){const N=de.getChild(0);N.is("element")&&u.schema.isBlock(N)&&!u.schema.isObject(N)&&!u.schema.isLimit(N)&&(t=u.createRangeIn(N))}for(const N of t.getItems())if(!u.schema.isInline(N)||Array.from(N.getAttributeKeys()).find(pe=>u.schema.getAttributeProperties(pe).isFormatting))return!1;return!0}class Clipboard extends Plugin{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,DragDrop,PastePlainText]}init(){const u=this.editor,t=this.editor.t;u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DEFAULT_OPTIONS$1={autoRefresh:!0},DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME=36e5,TOKEN_FAILED_REFRESH_TIMEOUT_TIME=5e3;class Token extends ObservableMixin(){constructor(t,N={}){super();xt(this,"_refresh");xt(this,"_options");xt(this,"_tokenRefreshTimeout");xt(this,"_isDestroyed",!1);if(!t)throw new CKEditorError("token-missing-token-url",this);N.initValue&&this._validateTokenValue(N.initValue),this.set("value",N.initValue),typeof t=="function"?this._refresh=t:this._refresh=()=>defaultRefreshToken(t),this._options={...DEFAULT_OPTIONS$1,...N}}init(){return new Promise((t,N)=>{if(!this.value){this.refreshToken().then(t).catch(N);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),t(this)})}refreshToken(){const t=this._options.autoRefresh;return this._refresh().then(N=>(this._validateTokenValue(N),this.set("value",N),t&&this._registerRefreshTokenTimeout(),this)).catch(N=>{throw logWarning("token-refresh-failed",{autoRefresh:t}),t&&this._registerRefreshTokenTimeout(TOKEN_FAILED_REFRESH_TIMEOUT_TIME),N})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(t){const N=typeof t=="string",me=!/^".*"$/.test(t),pe=N&&t.split(".").length===3;if(!(me&&pe))throw new CKEditorError("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(t){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const N=t||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},N)}_getTokenRefreshTimeoutTime(){try{const[,t]=this.value.split("."),{exp:N}=JSON.parse(atob(t));return N?Math.floor((N*1e3-Date.now())/2):DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME}catch{return DEFAULT_TOKEN_REFRESH_TIMEOUT_TIME}}static create(t,N={}){return new Token(t,N).init()}}function defaultRefreshToken(de){return new Promise((u,t)=>{const N=new XMLHttpRequest;N.open("GET",de),N.addEventListener("load",()=>{const me=N.status,pe=N.response;return me<200||me>299?t(new CKEditorError("token-cannot-download-new-token",null)):u(pe)}),N.addEventListener("error",()=>t(new Error("Network Error"))),N.addEventListener("abort",()=>t(new Error("Abort"))),N.send()})}const BASE64_HEADER_REG_EXP=/^data:(\S*?);base64,/;class FileUploader extends EmitterMixin(){constructor(t,N,me){super();xt(this,"file");xt(this,"xhr");xt(this,"_token");xt(this,"_apiAddress");if(!t)throw new CKEditorError("fileuploader-missing-file",null);if(!N)throw new CKEditorError("fileuploader-missing-token",null);if(!me)throw new CKEditorError("fileuploader-missing-api-address",null);this.file=_isBase64(t)?_base64ToBlob(t):t,this._token=N,this._apiAddress=me}onProgress(t){return this.on("progress",(N,me)=>t(me)),this}onError(t){return this.once("error",(N,me)=>t(me)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t}_attachXHRListeners(){const t=this.xhr,N=me=>()=>this.fire("error",me);t.addEventListener("error",N("Network Error")),t.addEventListener("abort",N("Abort"));/* istanbul ignore else -- @preserve */t.upload&&t.upload.addEventListener("progress",me=>{me.lengthComputable&&this.fire("progress",{total:me.total,uploaded:me.loaded})}),t.addEventListener("load",()=>{const me=t.status,pe=t.response;if(me<200||me>299)return this.fire("error",pe.message||pe.error)})}_sendRequest(){const t=new FormData,N=this.xhr;return t.append("file",this.file),new Promise((me,pe)=>{N.addEventListener("load",()=>{const Le=N.status,Ye=N.response;return Le<200||Le>299?Ye.message?pe(new CKEditorError("fileuploader-uploading-data-failed",this,{message:Ye.message})):pe(Ye.error):me(Ye)}),N.addEventListener("error",()=>pe(new Error("Network Error"))),N.addEventListener("abort",()=>pe(new Error("Abort"))),N.send(t)})}}function _base64ToBlob(de,u=512){try{const t=de.match(BASE64_HEADER_REG_EXP)[1],N=atob(de.replace(BASE64_HEADER_REG_EXP,"")),me=[];for(let pe=0;pe<N.length;pe+=u){const Le=N.slice(pe,pe+u),Ye=new Array(Le.length);for(let nt=0;nt<Le.length;nt++)Ye[nt]=Le.charCodeAt(nt);me.push(new Uint8Array(Ye))}return new Blob(me,{type:t})}catch{throw new CKEditorError("fileuploader-decoding-image-data-error",null)}}function _isBase64(de){if(typeof de!="string")return!1;const u=de.match(BASE64_HEADER_REG_EXP);return!!(u&&u.length)}class UploadGateway{constructor(u,t){xt(this,"_token");xt(this,"_apiAddress");if(!u)throw new CKEditorError("uploadgateway-missing-token",null);if(!t)throw new CKEditorError("uploadgateway-missing-api-address",null);this._token=u,this._apiAddress=t}upload(u){return new FileUploader(u,this._token,this._apiAddress)}}class CloudServicesCore extends ContextPlugin{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(u,t){return new Token(u,t)}createUploadGateway(u,t){return new UploadGateway(u,t)}}class CloudServices extends ContextPlugin{constructor(){super(...arguments);xt(this,"tokenUrl");xt(this,"uploadUrl");xt(this,"webSocketUrl");xt(this,"bundleVersion");xt(this,"token",null);xt(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[CloudServicesCore]}async init(){const N=this.context.config.get("cloudServices")||{};for(const[Le,Ye]of Object.entries(N))this[Le]=Ye;if(!this.tokenUrl){this.token=null;return}const pe=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await pe.init(),this._tokens.set(this.tokenUrl,this.token)}catch(Le){throw pe.destroy(),Le}}async registerTokenUrl(t){if(this._tokens.has(t))return this.getTokenFor(t);const me=await this.context.plugins.get("CloudServicesCore").createToken(t).init();return this._tokens.set(t,me),me}getTokenFor(t){const N=this._tokens.get(t);if(!N)throw new CKEditorError("cloudservices-token-not-registered",this);return N}destroy(){super.destroy();for(const t of this._tokens.values())t.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getNormalizedAndLocalizedLanguageDefinitions(de){const u=de.t,t=de.config.get("codeBlock.languages");for(const N of t)N.label==="Plain text"&&(N.label=u("Plain text")),N.class===void 0&&(N.class=`language-${N.language}`);return t}function getPropertyAssociation(de,u,t){const N={};for(const me of de)if(u==="class"){const pe=me[u].split(" ").shift();N[pe]=me[t]}else N[me[u]]=me[t];return N}function getLeadingWhiteSpaces(de){return de.data.match(/^(\s*)/)[0]}function rawSnippetTextToViewDocumentFragment(de,u){const t=de.createDocumentFragment(),N=u.split(`
`),me=N.reduce((pe,Le,Ye)=>(pe.push(Le),Ye<N.length-1&&pe.push(de.createElement("br")),pe),[]);return de.appendChild(me,t),t}function getIndentOutdentPositions(de){const u=de.document.selection,t=[];if(u.isCollapsed)return[u.anchor];const N=u.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:me}of N){let pe=me.is("$textProxy")?me.textNode:me;const Le=pe.parent;if(!Le.is("element","codeBlock")||pe.is("element","softBreak"))continue;for(;pe.previousSibling&&!pe.previousSibling.is("element","softBreak");)pe=pe.previousSibling;const Ye=pe.is("$text")?pe.startOffset+getLeadingWhiteSpaces(pe).length:pe.startOffset,nt=de.createPositionAt(Le,Ye);t.every(ot=>!ot.isEqual(nt))&&t.push(nt)}return t}function isModelSelectionInCodeBlock(de){const u=first(de.getSelectedBlocks());return!!u&&u.is("element","codeBlock")}function canBeCodeBlock(de,u){return u.is("rootElement")||de.isLimit(u)?!1:de.checkChild(u.parent,"codeBlock")}function getCodeBlockAriaAnnouncement(de,u,t,N){const me=getPropertyAssociation(u,"language","label"),pe=t.getAttribute("language");if(pe in me){const Le=me[pe];return de(N==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",Le)}return de(N==="enter"?"Entering code snippet":"Leaving code snippet")}function getTextNodeAtLineStart(de,u){for(de.textNode&&(de=u.createPositionBefore(de.textNode));de.nodeBefore&&!de.nodeBefore.is("element","softBreak");)de=u.createPositionBefore(de.nodeBefore);const t=de.nodeAfter;return t&&t.is("$text")?t:null}class CodeBlockCommand extends Command{constructor(t){super(t);xt(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const N=this.editor,me=N.model,pe=me.document.selection,Ye=getNormalizedAndLocalizedLanguageDefinitions(N)[0],nt=Array.from(pe.getSelectedBlocks()),ot=t.forceValue==null?!this.value:t.forceValue,ft=getLanguage(t,this._lastLanguage,Ye.language);me.change(mt=>{ot?this._applyCodeBlock(mt,nt,ft):this._removeCodeBlock(mt,nt)})}_getValue(){const t=this.editor.model.document.selection,N=first(t.getSelectedBlocks());return!!(N&&N.is("element","codeBlock"))?N.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,N=this.editor.model.schema,me=first(t.getSelectedBlocks());return me?canBeCodeBlock(N,me):!1}_applyCodeBlock(t,N,me){this._lastLanguage=me;const pe=this.editor.model.schema,Le=N.filter(Ye=>canBeCodeBlock(pe,Ye));for(const Ye of Le)t.rename(Ye,"codeBlock"),t.setAttribute("language",me,Ye),pe.removeDisallowedAttributes([Ye],t),Array.from(Ye.getChildren()).filter(nt=>!pe.checkChild(Ye,nt)).forEach(nt=>t.remove(nt));Le.reverse().forEach((Ye,nt)=>{const ot=Le[nt+1];Ye.previousSibling===ot&&(t.appendElement("softBreak",ot),t.merge(t.createPositionBefore(Ye)))})}_removeCodeBlock(t,N){const me=N.filter(pe=>pe.is("element","codeBlock"));for(const pe of me){const Le=t.createRangeOn(pe);for(const Ye of Array.from(Le.getItems()).reverse())if(Ye.is("element","softBreak")&&Ye.parent.is("element","codeBlock")){const{position:nt}=t.split(t.createPositionBefore(Ye)),ot=nt.nodeAfter;t.rename(ot,"paragraph"),t.removeAttribute("language",ot),t.remove(Ye)}t.rename(pe,"paragraph"),t.removeAttribute("language",pe)}}}function getLanguage(de,u,t){return de.language?de.language:de.usePreviousLanguageChoice&&u?u:t}class IndentCodeBlockCommand extends Command{constructor(t){super(t);xt(this,"_indentSequence");this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const N=this.editor.model;N.change(me=>{const pe=getIndentOutdentPositions(N);for(const Le of pe){const Ye=me.createText(this._indentSequence);N.insertContent(Ye,Le)}})}_checkEnabled(){return this._indentSequence?isModelSelectionInCodeBlock(this.editor.model.document.selection):!1}}class OutdentCodeBlockCommand extends Command{constructor(t){super(t);xt(this,"_indentSequence");this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const N=this.editor.model;N.change(()=>{const me=getIndentOutdentPositions(N);for(const pe of me){const Le=getLastOutdentableSequenceRange(N,pe,this._indentSequence);Le&&N.deleteContent(N.createSelection(Le))}})}_checkEnabled(){if(!this._indentSequence)return!1;const t=this.editor.model;return isModelSelectionInCodeBlock(t.document.selection)?getIndentOutdentPositions(t).some(N=>getLastOutdentableSequenceRange(t,N,this._indentSequence)):!1}}function getLastOutdentableSequenceRange(de,u,t){const N=getTextNodeAtLineStart(u,de);if(!N)return null;const me=getLeadingWhiteSpaces(N),pe=me.lastIndexOf(t);if(pe+t.length!==me.length||pe===-1)return null;const{parent:Le,startOffset:Ye}=N;return de.createRange(de.createPositionAt(Le,Ye+pe),de.createPositionAt(Le,Ye+pe+t.length))}function modelToViewCodeBlockInsertion(de,u,t=!1){const N=getPropertyAssociation(u,"language","class"),me=getPropertyAssociation(u,"language","label");return(pe,Le,Ye)=>{const{writer:nt,mapper:ot,consumable:ft}=Ye;if(!ft.consume(Le.item,"insert"))return;const mt=Le.item.getAttribute("language"),bt=ot.toViewPosition(de.createPositionBefore(Le.item)),yt={};t&&(yt["data-language"]=me[mt],yt.spellcheck="false");const _t=N[mt]?{class:N[mt]}:void 0,Ct=nt.createContainerElement("code",_t),Tt=nt.createContainerElement("pre",yt,Ct);nt.insert(bt,Tt),ot.bindElements(Le.item,Ct)}}function modelToDataViewSoftBreakInsertion(de){return(u,t,N)=>{if(t.item.parent.name!=="codeBlock")return;const{writer:me,mapper:pe,consumable:Le}=N;if(!Le.consume(t.item,"insert"))return;const Ye=pe.toViewPosition(de.createPositionBefore(t.item));me.insert(Ye,me.createText(`
`))}}function dataViewToModelCodeBlockInsertion(de,u){const t=getPropertyAssociation(u,"class","language"),N=u[0].language;return(me,pe,Le)=>{const Ye=pe.viewItem,nt=Ye.parent;if(!nt||!nt.is("element","pre")||pe.modelCursor.findAncestor("codeBlock"))return;const{consumable:ot,writer:ft}=Le;if(!ot.test(Ye,{name:!0}))return;const mt=ft.createElement("codeBlock"),bt=[...Ye.getClassNames()];bt.length||bt.push("");for(const yt of bt){const _t=t[yt];if(_t){ft.setAttribute("language",_t,mt);break}}mt.hasAttribute("language")||ft.setAttribute("language",N,mt),Le.convertChildren(Ye,mt),Le.safeInsert(mt,pe.modelCursor)&&(ot.consume(Ye,{name:!0}),Le.updateConversionResult(mt,pe))}}function dataViewToModelTextNewlinesInsertion(){return(de,u,{consumable:t,writer:N})=>{let me=u.modelCursor;if(!t.test(u.viewItem)||!me.findAncestor("codeBlock"))return;t.consume(u.viewItem);const Le=u.viewItem.data.split(`
`).map(nt=>N.createText(nt)),Ye=Le[Le.length-1];for(const nt of Le)if(N.insert(nt,me),me=me.getShiftedBy(nt.offsetSize),nt!==Ye){const ot=N.createElement("softBreak");N.insert(ot,me),me=N.createPositionAfter(ot)}u.modelRange=N.createRange(u.modelCursor,me),u.modelCursor=me}}function dataViewToModelOrphanNodeConsumer(){return(de,u,{consumable:t})=>{const N=u.viewItem;if(N.findAncestor("pre"))return;const me=Array.from(N.getChildren()),pe=me.find(Le=>Le.is("element","code"));if(pe)for(const Le of me)Le===pe||!Le.is("$text")||t.consume(Le,{name:!0})}}const DEFAULT_ELEMENT="paragraph";class CodeBlockEditing extends Plugin{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ShiftEnter]}constructor(u){super(u),u.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const u=this.editor,t=u.model.schema,N=u.model,me=u.editing.view,pe=getNormalizedAndLocalizedLanguageDefinitions(u);u.commands.add("codeBlock",new CodeBlockCommand(u)),u.commands.add("indentCodeBlock",new IndentCodeBlockCommand(u)),u.commands.add("outdentCodeBlock",new OutdentCodeBlockCommand(u)),this.listenTo(me.document,"tab",(Le,Ye)=>{const nt=Ye.shiftKey?"outdentCodeBlock":"indentCodeBlock";u.commands.get(nt).isEnabled&&(u.execute(nt),Ye.stopPropagation(),Ye.preventDefault(),Le.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((Le,Ye)=>{const nt=Le.getItem(Le.length-2);if(t.getAttributeProperties(Ye).isFormatting&&nt&&nt.name=="codeBlock")return!1}),u.editing.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(N,pe,!0)),u.data.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(N,pe)),u.data.downcastDispatcher.on("insert:softBreak",modelToDataViewSoftBreakInsertion(N),{priority:"high"}),u.data.upcastDispatcher.on("element:code",dataViewToModelCodeBlockInsertion(me,pe)),u.data.upcastDispatcher.on("text",dataViewToModelTextNewlinesInsertion()),u.data.upcastDispatcher.on("element:pre",dataViewToModelOrphanNodeConsumer(),{priority:"high"}),this.listenTo(u.editing.view.document,"clipboardInput",(Le,Ye)=>{let nt=N.createRange(N.document.selection.anchor);if(Ye.targetRanges&&(nt=u.editing.mapper.toModelRange(Ye.targetRanges[0])),!nt.start.parent.is("element","codeBlock"))return;const ot=Ye.dataTransfer.getData("text/plain"),ft=new UpcastWriter(u.editing.view.document);Ye.content=rawSnippetTextToViewDocumentFragment(ft,ot)}),u.plugins.has("ClipboardPipeline")&&u.plugins.get(ClipboardPipeline).on("contentInsertion",(Le,Ye)=>{const nt=u.model,ot=nt.document.selection;ot.anchor.parent.is("element","codeBlock")&&nt.change(ft=>{const mt=ft.createRangeIn(Ye.content);for(const bt of[...mt.getItems()])bt.is("node")&&!t.checkChild(ot.anchor,bt)&&ft.remove(bt)})}),this.listenTo(N,"getSelectedContent",(Le,[Ye])=>{const nt=Ye.anchor;Ye.isCollapsed||!nt.parent.is("element","codeBlock")||!nt.hasSameParentAs(Ye.focus)||N.change(ot=>{const ft=Le.return;if(nt.parent.is("element")&&(ft.childCount>1||Ye.containsEntireContent(nt.parent))){const bt=ot.createElement("codeBlock",nt.parent.getAttributes());ot.append(ft,bt);const yt=ot.createDocumentFragment();ot.append(bt,yt),Le.return=yt;return}const mt=ft.getChild(0);t.checkAttribute(mt,"code")&&ot.setAttribute("code",!0,mt)})})}afterInit(){const u=this.editor,t=u.commands,N=t.get("indent"),me=t.get("outdent");N&&N.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),me&&me.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(u.editing.view.document,"enter",(pe,Le)=>{u.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!leaveBlockStartOnEnter(u,Le.isSoft)&&!leaveBlockEndOnEnter(u,Le.isSoft)&&breakLineOnEnter(u),Le.preventDefault(),pe.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:u,ui:t,t:N}=this.editor,me=getNormalizedAndLocalizedLanguageDefinitions(this.editor);let pe=null;u.document.selection.on("change:range",()=>{const Le=u.document.selection.focus.parent;!t||pe===Le||!Le.is("element")||(pe&&pe.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(N,me,pe,"leave")),Le.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(N,me,Le,"enter")),pe=Le)})}}function breakLineOnEnter(de){const u=de.model,t=u.document,N=t.selection.getLastPosition();let me;const pe=getTextNodeAtLineStart(N,u);pe&&pe.is("$text")&&(me=getLeadingWhiteSpaces(pe)),de.model.change(Le=>{de.execute("shiftEnter"),me&&Le.insertText(me,t.selection.anchor)})}function leaveBlockStartOnEnter(de,u){const N=de.model.document,me=de.editing.view,pe=N.selection.getLastPosition(),Le=pe.nodeAfter;return u||!N.selection.isCollapsed||!pe.isAtStart||!isSoftBreakNode(Le)?!1:(de.model.change(Ye=>{de.execute("enter");const nt=N.selection.anchor.parent.previousSibling;Ye.rename(nt,DEFAULT_ELEMENT),Ye.setSelection(nt,"in"),de.model.schema.removeDisallowedAttributes([nt],Ye),Ye.remove(Le)}),me.scrollToTheSelection(),!0)}function leaveBlockEndOnEnter(de,u){const t=de.model,N=t.document,me=de.editing.view,pe=N.selection.getLastPosition(),Le=pe.nodeBefore;let Ye;if(u||!N.selection.isCollapsed||!pe.isAtEnd||!Le||!Le.previousSibling)return!1;if(isSoftBreakNode(Le)&&isSoftBreakNode(Le.previousSibling))Ye=t.createRange(t.createPositionBefore(Le.previousSibling),t.createPositionAfter(Le));else if(isEmptyishTextNode(Le)&&isSoftBreakNode(Le.previousSibling)&&isSoftBreakNode(Le.previousSibling.previousSibling))Ye=t.createRange(t.createPositionBefore(Le.previousSibling.previousSibling),t.createPositionAfter(Le));else if(isEmptyishTextNode(Le)&&isSoftBreakNode(Le.previousSibling)&&isEmptyishTextNode(Le.previousSibling.previousSibling)&&Le.previousSibling.previousSibling&&isSoftBreakNode(Le.previousSibling.previousSibling.previousSibling))Ye=t.createRange(t.createPositionBefore(Le.previousSibling.previousSibling.previousSibling),t.createPositionAfter(Le));else return!1;return de.model.change(nt=>{nt.remove(Ye),de.execute("enter");const ot=N.selection.anchor.parent;nt.rename(ot,DEFAULT_ELEMENT),de.model.schema.removeDisallowedAttributes([ot],nt)}),me.scrollToTheSelection(),!0}function isEmptyishTextNode(de){return de&&de.is("$text")&&!de.data.match(/\S/)}function isSoftBreakNode(de){return de&&de.is("element","softBreak")}class CodeBlockUI extends Plugin{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,N=u.ui.componentFactory,me=getNormalizedAndLocalizedLanguageDefinitions(u),pe=this._getLanguageListItemDefinitions(me),Le=u.commands.get("codeBlock");N.add("codeBlock",Ye=>{const nt=createDropdown(Ye,SplitButtonView),ot=nt.buttonView,ft=t("Insert code block");return ot.set({label:ft,tooltip:!0,icon:icons.codeBlock,isToggleable:!0}),ot.bind("isOn").to(Le,"value",mt=>!!mt),ot.on("execute",()=>{u.execute("codeBlock",{usePreviousLanguageChoice:!0}),u.editing.view.focus()}),nt.on("execute",mt=>{u.execute("codeBlock",{language:mt.source._codeBlockLanguage,forceValue:!0}),u.editing.view.focus()}),nt.class="ck-code-block-dropdown",nt.bind("isEnabled").to(Le),addListToDropdown(nt,pe,{role:"menu",ariaLabel:ft}),nt}),N.add("menuBar:codeBlock",Ye=>{const nt=new MenuBarMenuView(Ye);nt.buttonView.set({role:"menuitem",label:t("Code block"),icon:icons.codeBlock}),nt.bind("isEnabled").to(Le);const ot=new MenuBarMenuListView(Ye);ot.set({ariaLabel:t("Insert code block")});for(const ft of pe){const mt=new MenuBarMenuListItemView(Ye,nt),bt=new MenuBarMenuListItemButtonView(Ye);bt.bind(...Object.keys(ft.model)).to(ft.model),bt.set({isToggleable:!0,role:"menuitemcheckbox"}),bt.delegate("execute").to(nt),bt.on("execute",()=>{u.execute("codeBlock",{language:ft.model._codeBlockLanguage,forceValue:Le.value!=ft.model._codeBlockLanguage}),u.editing.view.focus()}),mt.children.add(bt),ot.items.add(mt)}return nt.panelView.children.add(ot),nt})}_getLanguageListItemDefinitions(u){const N=this.editor.commands.get("codeBlock"),me=new Collection;for(const pe of u){const Le={type:"button",model:new Model({_codeBlockLanguage:pe.language,label:pe.label,role:"menuitemradio",withText:!0})};Le.model.bind("isOn").to(N,"value",Ye=>Ye===Le.model._codeBlockLanguage),me.add(Le)}return me}}class CodeBlock extends Plugin{static get requires(){return[CodeBlockEditing,CodeBlockUI]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClassicEditorUI extends EditorUI{constructor(t,N){super(t);xt(this,"view");xt(this,"_toolbarConfig");xt(this,"_elementReplacer");this.view=N,this._toolbarConfig=normalizeToolbarConfig(t.config.get("toolbar")),this._elementReplacer=new ElementReplacer,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const N=this.editor,me=this.view,pe=N.editing.view,Le=me.editable,Ye=pe.document.getRoot();Le.name=Ye.rootName,me.render();const nt=Le.element;this.setEditableElement(Le.name,nt),me.editable.bind("isFocused").to(this.focusTracker),pe.attachDomRoot(nt),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),me.menuBarView&&this._initMenuBar(me.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,N=this.editor.editing.view;this._elementReplacer.restore(),N.getDomRoot(t.editable.name)&&N.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:N})=>N||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,N=t.editing.view,me=N.document.getRoot(),pe=t.sourceElement;let Le;const Ye=t.config.get("placeholder");Ye&&(Le=typeof Ye=="string"?Ye:Ye[this.view.editable.name]),!Le&&pe&&pe.tagName.toLowerCase()==="textarea"&&(Le=pe.getAttribute("placeholder")),Le&&(me.placeholder=Le),enablePlaceholder({view:N,element:me,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,N=this.editor.plugins.get("ContextualBalloon");N.on("getPositionOptions",pe=>{const Le=pe.return;if(!Le||!t.isSticky||!t.element)return;const Ye=new Rect(t.element).height,nt=typeof Le.target=="function"?Le.target():Le.target,ot=typeof Le.limiter=="function"?Le.limiter():Le.limiter;if(nt&&ot&&new Rect(nt).height>=new Rect(ot).height-Ye)return;const ft={...Le.viewportOffsetConfig},mt=(ft.top||0)+Ye;pe.return={...Le,viewportOffsetConfig:{...ft,top:mt}}},{priority:"low"});const me=()=>{N.visibleView&&N.updatePosition()};this.listenTo(t,"change:isSticky",me),this.listenTo(this.editor.ui,"change:viewportOffset",me)}_handleScrollToTheSelectionWithStickyPanel(t,N,me){const pe=this.view.stickyPanel;if(pe.isSticky){const Le=new Rect(pe.element).height;N.viewportOffset.top+=Le}else{const Le=()=>{this.editor.editing.view.scrollToTheSelection(me)};this.listenTo(pe,"change:isSticky",Le),setTimeout(()=>{this.stopListening(pe,"change:isSticky",Le)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,N=this.editor.plugins.get("Dialog");N.on("show",()=>{const me=N.view;me.on("moveTo",(pe,Le)=>{if(!t.isSticky||me.wasMoved||me.isModal)return;const Ye=new Rect(t.contentPanelElement);Le[1]<Ye.bottom+DialogView.defaultOffset&&(Le[1]=Ye.bottom+DialogView.defaultOffset)},{priority:"high"})},{priority:"low"})}}class ClassicEditorUIView extends BoxedEditorUIView{constructor(t,N,me={}){super(t);xt(this,"stickyPanel");xt(this,"toolbar");xt(this,"editable");this.stickyPanel=new StickyPanelView(t),this.toolbar=new ToolbarView(t,{shouldGroupWhenFull:me.shouldToolbarGroupWhenFull}),me.useMenuBar&&(this.menuBarView=new MenuBarView(t)),this.editable=new InlineEditableUIView(t,N,void 0,{label:me.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class ClassicEditor extends ElementApiMixin(Editor){constructor(t,N={}){if(!isElement(t)&&N.initialData!==void 0)throw new CKEditorError("editor-create-initial-data",null);super(N);xt(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",getInitialData(t)),isElement(t)&&(this.sourceElement=t),this.model.document.createRoot();const me=!this.config.get("toolbar.shouldNotGroupWhenFull"),pe=this.config.get("menuBar"),Le=new ClassicEditorUIView(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:me,useMenuBar:pe.isVisible,label:this.config.get("label")});this.ui=new ClassicEditorUI(this,Le),attachToForm(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,N={}){return new Promise(me=>{const pe=new this(t,N);me(pe.initPlugins().then(()=>pe.ui.init(isElement(t)?t:null)).then(()=>pe.data.init(pe.config.get("initialData"))).then(()=>pe.fire("ready")).then(()=>pe))})}}function getInitialData(de){return isElement(de)?getDataFromElement(de):de}function isElement(de){return isElement$2(de)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SelectAllCommand extends Command{constructor(u){super(u),this.affectsData=!1}execute(){const u=this.editor.model,t=u.document.selection;let N=u.schema.getLimitElement(t);if(t.containsEntireContent(N)||!isSelectAllScope(u.schema,N))do if(N=N.parent,!N)return;while(!isSelectAllScope(u.schema,N));u.change(me=>{me.setSelection(N,"in")})}}function isSelectAllScope(de,u){return de.isLimit(u)&&(de.checkChild(u,"$text")||de.checkChild(u,"paragraph"))}const SELECT_ALL_KEYSTROKE=parseKeystroke("Ctrl+A");class SelectAllEditing extends Plugin{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,me=u.editing.view.document;u.commands.add("selectAll",new SelectAllCommand(u)),this.listenTo(me,"keydown",(pe,Le)=>{getCode(Le)===SELECT_ALL_KEYSTROKE&&(u.execute("selectAll"),Le.preventDefault())}),u.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}var selectAllIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class SelectAllUI extends Plugin{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,N=t.locale,me=t.commands.get("selectAll"),pe=new u(t.locale),Le=N.t;return pe.set({label:Le("Select all"),icon:selectAllIcon,keystroke:"Ctrl+A"}),pe.bind("isEnabled").to(me,"isEnabled"),this.listenTo(pe,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),pe}}class SelectAll extends Plugin{static get requires(){return[SelectAllEditing,SelectAllUI]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BaseCommand extends Command{constructor(t){super(t);xt(this,"_stack",[]);xt(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(N,me)=>{me[1]={...me[1]};const pe=me[1];pe.batchType||(pe.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(N,me)=>{me[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const N=this.editor.model.document.selection,me={ranges:N.hasOwnRange?Array.from(N.getRanges()):[],isBackward:N.isBackward};this._stack.push({batch:t,selection:me}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,N,me){const pe=this.editor.model,Le=pe.document,Ye=[],nt=t.map(ft=>ft.getTransformedByOperations(me)),ot=nt.flat();for(const ft of nt){const mt=ft.filter(bt=>bt.root!=Le.graveyard).filter(bt=>!isRangeContainedByAnyOtherRange(bt,ot));mt.length&&(normalizeRanges(mt),Ye.push(mt[0]))}Ye.length&&pe.change(ft=>{ft.setSelection(Ye,{backward:N})})}_undo(t,N){const me=this.editor.model,pe=me.document;this._createdBatches.add(N);const Le=t.operations.slice().filter(Ye=>Ye.isDocumentOperation);Le.reverse();for(const Ye of Le){const nt=Ye.baseVersion+1,ot=Array.from(pe.history.getOperations(nt)),mt=transformSets([Ye.getReversed()],ot,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let bt of mt){const yt=bt.affectedSelectable;yt&&!me.canEditAt(yt)&&(bt=new NoOperation(bt.baseVersion)),N.addOperation(bt),me.applyOperation(bt),pe.history.setOperationAsUndone(Ye,bt)}}}}function normalizeRanges(de){de.sort((u,t)=>u.start.isBefore(t.start)?-1:1);for(let u=1;u<de.length;u++){const N=de[u-1].getJoined(de[u],!0);N&&(u--,de.splice(u,2,N))}}function isRangeContainedByAnyOtherRange(de,u){return u.some(t=>t!==de&&t.containsRange(de,!0))}class UndoCommand extends BaseCommand{execute(u=null){const t=u?this._stack.findIndex(pe=>pe.batch==u):this._stack.length-1,N=this._stack.splice(t,1)[0],me=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(me,()=>{this._undo(N.batch,me);const pe=this.editor.model.document.history.getOperations(N.batch.baseVersion);this._restoreSelection(N.selection.ranges,N.selection.isBackward,pe)}),this.fire("revert",N.batch,me),this.refresh()}}class RedoCommand extends BaseCommand{execute(){const u=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const me=u.batch.operations[u.batch.operations.length-1].baseVersion+1,pe=this.editor.model.document.history.getOperations(me);this._restoreSelection(u.selection.ranges,u.selection.isBackward,pe),this._undo(u.batch,t)}),this.refresh()}}class UndoEditing extends Plugin{constructor(){super(...arguments);xt(this,"_undoCommand");xt(this,"_redoCommand");xt(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.t;this._undoCommand=new UndoCommand(t),this._redoCommand=new RedoCommand(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(me,pe)=>{const Le=pe[0];if(!Le.isDocumentOperation)return;const Ye=Le.batch,nt=this._redoCommand.createdBatches.has(Ye),ot=this._undoCommand.createdBatches.has(Ye);this._batchRegistry.has(Ye)||(this._batchRegistry.add(Ye),Ye.isUndoable&&(nt?this._undoCommand.addBatch(Ye):ot||(this._undoCommand.addBatch(Ye),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(me,pe,Le)=>{this._redoCommand.addBatch(Le)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:N("Undo"),keystroke:"CTRL+Z"},{label:N("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class UndoUI extends Plugin{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale,N=u.t,me=t.uiLanguageDirection=="ltr"?icons.undo:icons.redo,pe=t.uiLanguageDirection=="ltr"?icons.redo:icons.undo;this._addButtonsToFactory("undo",N("Undo"),"CTRL+Z",me),this._addButtonsToFactory("redo",N("Redo"),"CTRL+Y",pe)}_addButtonsToFactory(u,t,N,me){const pe=this.editor;pe.ui.componentFactory.add(u,()=>{const Le=this._createButton(ButtonView,u,t,N,me);return Le.set({tooltip:!0}),Le}),pe.ui.componentFactory.add("menuBar:"+u,()=>this._createButton(MenuBarMenuListItemButtonView,u,t,N,me))}_createButton(u,t,N,me,pe){const Le=this.editor,Ye=Le.locale,nt=Le.commands.get(t),ot=new u(Ye);return ot.set({label:N,icon:pe,keystroke:me}),ot.bind("isEnabled").to(nt,"isEnabled"),this.listenTo(ot,"execute",()=>{Le.execute(t),Le.editing.view.focus()}),ot}}class Undo extends Plugin{static get requires(){return[UndoEditing,UndoUI]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Essentials extends Plugin{static get requires(){return[AccessibilityHelp,Clipboard,Enter,SelectAll,ShiftEnter,Typing,Undo]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FindAndReplaceFormView extends View{constructor(t){super(t);xt(this,"children");xt(this,"_findInputView");xt(this,"_replaceInputView");xt(this,"_findButtonView");xt(this,"_findPrevButtonView");xt(this,"_findNextButtonView");xt(this,"_advancedOptionsCollapsibleView");xt(this,"_matchCaseSwitchView");xt(this,"_wholeWordsOnlySwitchView");xt(this,"_replaceButtonView");xt(this,"_replaceAllButtonView");xt(this,"_inputsDivView");xt(this,"_actionButtonsDivView");xt(this,"_focusTracker");xt(this,"_keystrokes");xt(this,"_focusables");xt(this,"focusCycler");const N=t.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(me,pe)=>me>0&&!pe),this._findInputView=this._createInputField(N("Find in text")),this._findPrevButtonView=this._createButton({label:N("Previous result"),class:"ck-button-prev",icon:icons.previousArrow,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:N("Next result"),class:"ck-button-next",icon:icons.previousArrow,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(N("Replace with"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:N("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:N("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:N("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new FocusTracker,this._keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const t=this.locale,N=t.t,me=new View(t);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:pe})=>pe),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:pe})=>pe),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:pe},Le)=>pe&&Le),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(pe,Le)=>pe||!Le?"":N("Tip: Find some text first in order to replace it.")),me.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),me}_onFindButtonExecute(){if(!this._textToFind){const t=this.t;this._findInputView.errorText=t("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const t=this.locale,N=t.t,me=this.bindTemplate,pe=new View(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(Ye,nt)=>N("%0 of %1",[Ye,nt])),pe.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",me.if("isDirty","ck-hidden")]},children:[{text:me.to("_resultsCounterText")}]});const Le=()=>{const Ye=this._findInputView.fieldView.element;if(!Ye||!isVisible(Ye))return;const nt=new Rect(pe.element).width,ot=t.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";nt?Ye.style[ot]=`calc( 2 * var(--ck-spacing-standard) + ${nt}px )`:Ye.style[ot]=""};this.on("change:_resultsCounterText",Le,{priority:"low"}),this.on("change:isDirty",Le,{priority:"low"}),this._findInputView.template.children[0].children.push(pe)}_createAdvancedOptionsCollapsible(){const t=this.locale.t,N=new CollapsibleView(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return N.set({label:t("Advanced options"),isCollapsed:!0}),N}_createActionButtonsDiv(){const t=new View(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:N},me)=>N&&me),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:N},me)=>N&&me),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),t.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),t}_createMatchCaseSwitch(){const t=this.locale.t,N=new SwitchButtonView(this.locale);return N.set({label:t("Match case"),withText:!0}),N.bind("isOn").to(this,"_matchCase"),N.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),N}_createWholeWordsOnlySwitch(){const t=this.locale.t,N=new SwitchButtonView(this.locale);return N.set({label:t("Whole words only"),withText:!0}),N.bind("isOn").to(this,"_wholeWordsOnly"),N.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),N}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(N=>{this._focusables.add(N),this._focusTracker.add(N.element)})}_initKeystrokeHandling(){const t=me=>me.stopPropagation(),N=me=>{me.stopPropagation(),me.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",me=>{N(me),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",me=>{N(me),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",me=>{const pe=me.target;pe===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),N(me)):pe===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),N(me))}),this._keystrokes.set("shift+enter",me=>{me.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),N(me))}),this._keystrokes.set("arrowright",t),this._keystrokes.set("arrowleft",t),this._keystrokes.set("arrowup",t),this._keystrokes.set("arrowdown",t)}_createButton(t){const N=new ButtonView(this.locale);return N.set(t),N}_createInputField(t,N){const me=new LabeledFieldView(this.locale,createLabeledInputText);return me.label=t,me.class=N,me}}var loupeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';class FindAndReplaceUI extends Plugin{constructor(t){super(t);xt(this,"formView");t.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[Dialog]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.config.get("findAndReplace.uiType")==="dropdown",me=t.commands.get("find"),pe=this.editor.t;t.ui.componentFactory.add("findAndReplace",()=>{let Le;return N?(Le=this._createDropdown(),Le.bind("isEnabled").to(me)):Le=this._createDialogButtonForToolbar(),t.keystrokes.set("Ctrl+F",(Ye,nt)=>{if(me.isEnabled){if(Le instanceof DropdownView){const ot=Le.buttonView;ot.isOn||ot.fire("execute")}else Le.isOn?t.plugins.get("Dialog").view.focus():Le.fire("execute");nt()}}),Le}),N||t.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),t.accessibility.addKeystrokeInfos({keystrokes:[{label:pe("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const t=this.editor,N=t.locale.t,me=createDropdown(t.locale);return me.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new FormHeaderView(t.locale,{label:N("Find and replace")}),0),me.panelView.children.add(this.formView)}),me.on("change:isOpen",(pe,Le,Ye)=>{Ye?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),me.buttonView.set({icon:loupeIcon,label:N("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),me}_createDialogButtonForToolbar(){const t=this.editor,N=this._createButton(ButtonView),me=t.plugins.get("Dialog");return N.set({tooltip:!0}),N.bind("isOn").to(me,"id",pe=>pe==="findAndReplace"),N.on("execute",()=>{N.isOn?me.hide():this._showDialog()}),N}_createDialogButtonForMenuBar(){const t=this._createButton(MenuBarMenuListItemButtonView),N=this.editor.plugins.get("Dialog"),me=this.editor.plugins.get("Dialog");return t.set({role:"menuitemcheckbox",isToggleable:!0}),t.bind("isOn").to(me,"id",pe=>pe==="findAndReplace"),t.on("execute",()=>{if(N.id==="findAndReplace"){N.hide();return}this._showDialog()}),t}_createButton(t){const N=this.editor,me=N.commands.get("find"),pe=new t(N.locale),Le=N.locale.t;return pe.bind("isEnabled").to(me),pe.set({icon:loupeIcon,label:Le("Find and replace"),keystroke:"CTRL+F"}),pe}_showDialog(){const t=this.editor,N=t.plugins.get("Dialog"),me=t.locale.t;this.formView||(this.formView=this._createFormView()),N.show({id:"findAndReplace",title:me("Find and replace"),content:this.formView,position:DialogViewPosition.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const t=this.editor,N=new(CssTransitionDisablerMixin(FindAndReplaceFormView))(t.locale),me=t.commands,Le=this.editor.plugins.get("FindAndReplaceEditing").state;N.bind("highlightOffset").to(Le,"highlightedOffset"),N.listenTo(Le.results,"change",()=>{N.matchCount=Le.results.length});const Ye=me.get("findNext"),nt=me.get("findPrevious"),ot=me.get("replace"),ft=me.get("replaceAll");return N.bind("_areCommandsEnabled").to(Ye,"isEnabled",nt,"isEnabled",ot,"isEnabled",ft,"isEnabled",(mt,bt,yt,_t)=>({findNext:mt,findPrevious:bt,replace:yt,replaceAll:_t})),N.delegate("findNext","findPrevious","replace","replaceAll").to(this),N.on("change:isDirty",(mt,bt,yt)=>{yt&&this.fire("searchReseted")}),N}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class FindCommand extends Command{constructor(t,N){super(t);xt(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=N}execute(t,{matchCase:N,wholeWords:me}={}){const{editor:pe}=this,{model:Le}=pe,Ye=pe.plugins.get("FindAndReplaceUtils");let nt,ot="";typeof t=="string"?nt=(...bt)=>({results:Ye.findByTextCallback(t,{matchCase:N,wholeWords:me})(...bt),searchText:t}):nt=t;const ft=nt;nt=(...bt)=>{const yt=ft(...bt);return yt&&"searchText"in yt&&(ot=yt.searchText),yt};const mt=Le.document.getRootNames().reduce((bt,yt)=>Ye.updateFindResultFromRange(Le.createRangeIn(Le.document.getRoot(yt)),Le,nt,bt),null);return this._state.clear(Le),this._state.results.addMany(mt),this._state.highlightedResult=mt.get(0),this._state.searchText=ot,nt&&(this._state.lastSearchCallback=nt),this._state.matchCase=!!N,this._state.matchWholeWords=!!me,{results:mt,findCallback:nt}}}class FindAndReplaceState extends ObservableMixin(){constructor(u){super(),this.set("results",new Collection),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:N,index:me})=>{if(Array.from(N).length){let pe=!1;if(u.change(Le=>{for(const Ye of N)this.highlightedResult===Ye&&(pe=!0),u.markers.has(Ye.marker.name)&&Le.removeMarker(Ye.marker)}),pe){const Le=me>=this.results.length?0:me;this.highlightedResult=this.results.get(Le)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(u)})}clear(u){this.searchText="",u.change(t=>{if(this.highlightedResult){const N=this.highlightedResult.marker.name.split(":")[1],me=u.markers.get(`findResultHighlighted:${N}`);me&&t.removeMarker(me)}[...this.results].forEach(({marker:N})=>{t.removeMarker(N)})}),this.results.clear()}refreshHighlightOffset(u){const{highlightedResult:t,results:N}=this;t?this.highlightedOffset=sortSearchResultsByMarkerPositions(u,[...N]).indexOf(t)+1:this.highlightedOffset=0}}function sortSearchResultsByMarkerPositions(de,u){const t={before:-1,same:0,after:1,different:1};return de.document.getRootNames().flatMap(N=>u.filter(me=>me.marker.getStart().root.rootName===N).sort((me,pe)=>t[me.marker.getStart().compareWith(pe.marker.getStart())]))}class ReplaceCommandBase extends Command{constructor(t,N){super(t);xt(this,"_state");this.isEnabled=!0,this._state=N,this._isEnabledBasedOnSelection=!1}_replace(t,N){const{model:me}=this.editor,pe=N.marker.getRange();me.canEditAt(pe)&&me.change(Le=>{if(pe.root.rootName==="$graveyard"){this._state.results.remove(N);return}let Ye={};for(const nt of pe.getItems())if(nt.is("$text")||nt.is("$textProxy")){Ye=nt.getAttributes();break}me.insertContent(Le.createText(t,Ye),pe),this._state.results.has(N)&&this._state.results.remove(N)})}}class ReplaceCommand extends ReplaceCommandBase{execute(u,t){const N=Math.max(this._state.highlightedOffset-1,0);if(this._replace(u,t),this._state.results.length){const me=sortSearchResultsByMarkerPositions(this.editor.model,[...this._state.results]);this._state.highlightedResult=me[N%me.length]}}}class ReplaceAllCommand extends ReplaceCommandBase{execute(u,t){const{editor:N}=this,{model:me}=N,pe=N.plugins.get("FindAndReplaceUtils"),Le=t instanceof Collection?t:me.document.getRootNames().reduce((Ye,nt)=>pe.updateFindResultFromRange(me.createRangeIn(me.document.getRoot(nt)),me,pe.findByTextCallback(t,this._state),Ye),null);Le.length&&me.change(()=>{[...Le].forEach(Ye=>{this._replace(u,Ye)})})}}class FindNextCommand extends Command{constructor(t,N){super(t);xt(this,"_state");this.affectsData=!1,this._state=N,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const t=this._state.results,N=t.getIndex(this._state.highlightedResult),me=N+1>=t.length?0:N+1;this._state.highlightedResult=this._state.results.get(me)}}class FindPreviousCommand extends FindNextCommand{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),N=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(N)}}class FindAndReplaceUtils extends Plugin{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(u,t,N,me){const pe=me||new Collection,Le=Ye=>pe.find(nt=>{const{marker:ot}=nt,ft=ot.getRange(),mt=Ye.getRange();return ft.isEqual(mt)});return t.change(Ye=>{[...u].forEach(({type:nt,item:ot})=>{if(nt==="elementStart"&&t.schema.checkChild(ot,"$text")){let ft=N({item:ot,text:this.rangeToText(t.createRangeIn(ot))});if(!ft)return;"results"in ft&&(ft=ft.results),ft.forEach(mt=>{const bt=`findResult:${uid()}`,yt=Ye.addMarker(bt,{usingOperation:!1,affectsData:!1,range:Ye.createRange(Ye.createPositionAt(ot,mt.start),Ye.createPositionAt(ot,mt.end))}),_t=findInsertIndex(pe,yt);Le(yt)||pe.add({id:bt,label:mt.label,marker:yt},_t)})}})}),pe}rangeToText(u){return Array.from(u.getItems({shallow:!0})).reduce((t,N)=>N.is("$text")||N.is("$textProxy")?t+N.data:`${t}
`,"")}findByTextCallback(u,t){let N="gu";t.matchCase||(N+="i");let me=`(${escapeRegExp(u)})`;if(t.wholeWords){const Ye="[^a-zA-Z--]";new RegExp("^"+Ye).test(u)||(me=`(^|${Ye}|_)${me}`),new RegExp(Ye+"$").test(u)||(me=`${me}(?=_|${Ye}|$)`)}const pe=new RegExp(me,N);function Le({text:Ye}){return[...Ye.matchAll(pe)].map(regexpMatchToFindResult)}return Le}}function findInsertIndex(de,u){const t=de.find(({marker:N})=>u.getStart().isBefore(N.getStart()));return t?de.getIndex(t):de.length}function regexpMatchToFindResult(de){const u=de.length-1;let t=de.index;return de.length===3&&(t+=de[1].length),{label:de[u],start:t,end:t+de[u].length}}const HIGHLIGHT_CLASS$1="ck-find-result_selected";class FindAndReplaceEditing extends Plugin{constructor(){super(...arguments);xt(this,"state");xt(this,"_onDocumentChange",()=>{const t=new Set,N=new Set,me=this.editor.model,{results:pe}=this.state,Le=me.document.differ.getChanges(),Ye=me.document.differ.getChangedMarkers();Le.forEach(ft=>{ft.position&&(ft.name==="$text"||ft.position.nodeAfter&&me.schema.isInline(ft.position.nodeAfter)?(t.add(ft.position.parent),[...me.markers.getMarkersAtPosition(ft.position)].forEach(mt=>{N.add(mt.name)})):ft.type==="insert"&&ft.position.nodeAfter&&t.add(ft.position.nodeAfter))}),Ye.forEach(({name:ft,data:{newRange:mt}})=>{mt&&mt.start.root.rootName==="$graveyard"&&N.add(ft)}),t.forEach(ft=>{[...me.markers.getMarkersIntersectingRange(me.createRangeIn(ft))].forEach(bt=>N.add(bt.name))}),N.forEach(ft=>{pe.has(ft)&&(pe.get(ft)===this.state.highlightedResult&&(this.state.highlightedResult=null),pe.remove(ft))});const nt=[],ot=this.editor.plugins.get("FindAndReplaceUtils");t.forEach(ft=>{const mt=ot.updateFindResultFromRange(me.createRangeOn(ft),me,this.state.lastSearchCallback,pe);nt.push(...mt)}),Ye.forEach(ft=>{if(ft.data.newRange){const mt=ot.updateFindResultFromRange(ft.data.newRange,me,this.state.lastSearchCallback,pe);nt.push(...mt)}}),!this.state.highlightedResult&&nt.length?this.state.highlightedResult=nt[0]:this.state.refreshHighlightOffset(me)})}static get requires(){return[FindAndReplaceUtils]}static get pluginName(){return"FindAndReplaceEditing"}static get isOfficialPlugin(){return!0}init(){this.state=new FindAndReplaceState(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(me,pe,Le,Ye)=>{const{model:nt}=this.editor;nt.change(ot=>{if(Ye){const ft=Ye.marker.name.split(":")[1],mt=nt.markers.get(`findResultHighlighted:${ft}`);mt&&ot.removeMarker(mt)}if(Le){const ft=Le.marker.name.split(":")[1];ot.addMarker(`findResultHighlighted:${ft}`,{usingOperation:!1,affectsData:!1,range:Le.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const N=debounce(((me,pe,Le)=>{if(Le){const Ye=this.editor.editing.view.domConverter,nt=this.editor.editing.mapper.toViewRange(Le.marker.getRange());scrollViewportToShowTarget({target:Ye.viewRangeToDom(nt),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",N,{priority:"low"}),this.listenTo(this.editor,"destroy",N.cancel),this.on("change:_isSearchActive",(me,pe,Le)=>{Le?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(t,N){return this._isSearchActive=!0,this.editor.execute("find",t,N),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new FindCommand(this.editor,this.state)),this.editor.commands.add("findNext",new FindNextCommand(this.editor,this.state)),this.editor.commands.add("findPrevious",new FindPreviousCommand(this.editor,this.state)),this.editor.commands.add("replace",new ReplaceCommand(this.editor,this.state)),this.editor.commands.add("replaceAll",new ReplaceAllCommand(this.editor,this.state))}_defineConverters(){const{editor:t}=this;t.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:N})=>{const[,me]=N.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":me}}}}),t.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:N})=>{const[,me]=N.split(":");return{name:"span",classes:[HIGHLIGHT_CLASS$1],attributes:{"data-find-result":me}}}})}}class FindAndReplace extends Plugin{static get requires(){return[FindAndReplaceEditing,FindAndReplaceUI]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing"),N=t.state;u.on("findNext",(me,pe)=>{pe?(N.searchText=pe.searchText,t.find(pe.searchText,pe)):this.editor.execute("findNext")}),u.on("findPrevious",(me,pe)=>{pe&&N.searchText!==pe.searchText?t.find(pe.searchText):this.editor.execute("findPrevious")}),u.on("replace",(me,pe)=>{N.searchText!==pe.searchText&&t.find(pe.searchText);const Le=N.highlightedResult;Le&&this.editor.execute("replace",pe.replaceText,Le)}),u.on("replaceAll",(me,pe)=>{N.searchText!==pe.searchText&&t.find(pe.searchText),this.editor.execute("replaceAll",pe.replaceText,N.results)}),u.on("searchReseted",()=>{N.clear(this.editor.model),t.stop()})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FontCommand extends Command{constructor(t,N){super(t);xt(this,"attributeKey");this.attributeKey=N}refresh(){const t=this.editor.model,N=t.document;this.value=N.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(N.selection,this.attributeKey)}execute(t={}){const N=this.editor.model,pe=N.document.selection,Le=t.value,Ye=t.batch,nt=ot=>{if(pe.isCollapsed)Le?ot.setSelectionAttribute(this.attributeKey,Le):ot.removeSelectionAttribute(this.attributeKey);else{const ft=N.schema.getValidRanges(pe.getRanges(),this.attributeKey);for(const mt of ft)Le?ot.setAttribute(this.attributeKey,Le,mt):ot.removeAttribute(this.attributeKey,mt)}};Ye?N.enqueueChange(Ye,ot=>{nt(ot)}):N.change(ot=>{nt(ot)})}}const FONT_SIZE="fontSize",FONT_FAMILY="fontFamily",FONT_COLOR="fontColor",FONT_BACKGROUND_COLOR="fontBackgroundColor";function buildDefinition(de,u){const t={model:{key:de,values:[]},view:{},upcastAlso:{}};for(const N of u)t.model.values.push(N.model),t.view[N.model]=N.view,N.upcastAlso&&(t.upcastAlso[N.model]=N.upcastAlso);return t}function renderUpcastAttribute(de){return u=>normalizeColorCode(u.getStyle(de))}function renderDowncastElement(de){return(u,{writer:t})=>t.createAttributeElement("span",{style:`${de}:${u}`},{priority:7})}function addColorSelectorToDropdown({dropdownView:de,colors:u,columns:t,removeButtonLabel:N,colorPickerLabel:me,documentColorsLabel:pe,documentColorsCount:Le,colorPickerViewConfig:Ye}){const nt=de.locale,ot=new ColorSelectorView(nt,{colors:u,columns:t,removeButtonLabel:N,colorPickerLabel:me,documentColorsLabel:pe,documentColorsCount:Le,colorPickerViewConfig:Ye});return de.colorSelectorView=ot,de.panelView.children.add(ot),ot}function normalizeColorCode(de){return de.replace(/\s/g,"")}class FontFamilyCommand extends FontCommand{constructor(u){super(u,FONT_FAMILY)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeOptions$1(de){return de.map(getOptionDefinition$1).filter(u=>u!==void 0)}function getOptionDefinition$1(de){if(typeof de=="object")return de;if(de==="default")return{title:"Default",model:void 0};if(typeof de=="string")return generateFontPreset(de)}function generateFontPreset(de){const u=de.replace(/"|'/g,"").split(","),t=u[0],N=u.map(normalizeFontNameForCSS).join(", ");return{title:t,model:N,view:{name:"span",styles:{"font-family":N},priority:7}}}function normalizeFontNameForCSS(de){return de=de.trim(),de.indexOf(" ")>0&&(de=`'${de}'`),de}class FontFamilyEditing extends Plugin{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_FAMILY,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:FONT_FAMILY}),u.model.schema.setAttributeProperties(FONT_FAMILY,{isFormatting:!0,copyOnEnter:!0});const t=normalizeOptions$1(u.config.get("fontFamily.options")).filter(me=>me.model),N=buildDefinition(FONT_FAMILY,t);u.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):u.conversion.attributeToElement(N),u.commands.add(FONT_FAMILY,new FontFamilyCommand(u))}_prepareAnyValueConverters(){const u=this.editor;u.conversion.for("downcast").attributeToElement({model:FONT_FAMILY,view:(t,{writer:N})=>N.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),u.conversion.for("upcast").elementToAttribute({model:{key:FONT_FAMILY,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:FONT_FAMILY,value:t=>t.getAttribute("face")}})}}var fontFamilyIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class FontFamilyUI extends Plugin{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,N=this._getLocalizedOptions(),me=u.commands.get(FONT_FAMILY),pe=t("Font Family"),Le=_prepareListOptions$1(N,me);u.ui.componentFactory.add(FONT_FAMILY,Ye=>{const nt=createDropdown(Ye);return addListToDropdown(nt,Le,{role:"menu",ariaLabel:pe}),nt.buttonView.set({label:pe,icon:fontFamilyIcon,tooltip:!0}),nt.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),nt.bind("isEnabled").to(me),this.listenTo(nt,"execute",ot=>{u.execute(ot.source.commandName,{value:ot.source.commandParam}),u.editing.view.focus()}),nt}),u.ui.componentFactory.add(`menuBar:${FONT_FAMILY}`,Ye=>{const nt=new MenuBarMenuView(Ye);nt.buttonView.set({label:pe,icon:fontFamilyIcon}),nt.bind("isEnabled").to(me);const ot=new MenuBarMenuListView(Ye);for(const ft of Le){const mt=new MenuBarMenuListItemView(Ye,nt),bt=new MenuBarMenuListItemButtonView(Ye);bt.set({role:"menuitemradio",isToggleable:!0}),bt.bind(...Object.keys(ft.model)).to(ft.model),bt.delegate("execute").to(nt),bt.on("execute",()=>{u.execute(ft.model.commandName,{value:ft.model.commandParam}),u.editing.view.focus()}),mt.children.add(bt),ot.items.add(mt)}return nt.panelView.children.add(ot),nt})}_getLocalizedOptions(){const u=this.editor,t=u.t;return normalizeOptions$1(u.config.get(FONT_FAMILY).options).map(me=>(me.title==="Default"&&(me.title=t("Default")),me))}}function _prepareListOptions$1(de,u){const t=new Collection;for(const N of de){const me={type:"button",model:new Model({commandName:FONT_FAMILY,commandParam:N.model,label:N.title,role:"menuitemradio",withText:!0})};me.model.bind("isOn").to(u,"value",pe=>pe===N.model?!0:!pe||!N.model?!1:pe.split(",")[0].replace(/'/g,"").toLowerCase()===N.model.toLowerCase()),N.view&&typeof N.view!="string"&&N.view.styles&&me.model.set("labelStyle",`font-family: ${N.view.styles["font-family"]}`),t.add(me)}return t}class FontFamily extends Plugin{static get requires(){return[FontFamilyEditing,FontFamilyUI]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class FontSizeCommand extends FontCommand{constructor(u){super(u,FONT_SIZE)}}function normalizeOptions(de){return de.map(u=>getOptionDefinition(u)).filter(u=>u!==void 0)}const namedPresets={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function getOptionDefinition(de){if(typeof de=="number"&&(de=String(de)),typeof de=="object"&&isFullItemDefinition(de))return attachPriority(de);const u=findPreset(de);if(u)return attachPriority(u);if(de==="default")return{model:void 0,title:"Default"};if(!isNumericalDefinition(de))return generatePixelPreset(de)}function generatePixelPreset(de){return typeof de=="string"&&(de={title:de,model:`${parseFloat(de)}px`}),de.view={name:"span",styles:{"font-size":de.model}},attachPriority(de)}function attachPriority(de){return de.view&&typeof de.view!="string"&&!de.view.priority&&(de.view.priority=7),de}function findPreset(de){return typeof de=="string"?namedPresets[de]:namedPresets[de.model]}function isFullItemDefinition(de){return de.title&&de.model&&de.view}function isNumericalDefinition(de){let u;if(typeof de=="object")if(de.model)u=parseFloat(de.model);else throw new CKEditorError("font-size-invalid-definition",null,de);else u=parseFloat(de);return isNaN(u)}const styleFontSize=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class FontSizeEditing extends Plugin{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_SIZE,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:FONT_SIZE}),u.model.schema.setAttributeProperties(FONT_SIZE,{isFormatting:!0,copyOnEnter:!0});const t=u.config.get("fontSize.supportAllValues"),N=normalizeOptions(this.editor.config.get("fontSize.options")).filter(pe=>pe.model),me=buildDefinition(FONT_SIZE,N);t?(this._prepareAnyValueConverters(me),this._prepareCompatibilityConverter()):u.conversion.attributeToElement(me),u.commands.add(FONT_SIZE,new FontSizeCommand(u))}_prepareAnyValueConverters(u){const t=this.editor,N=u.model.values.filter(me=>!isLength(String(me))&&!isPercentage(String(me)));if(N.length)throw new CKEditorError("font-size-invalid-use-of-named-presets",null,{presets:N});t.conversion.for("downcast").attributeToElement({model:FONT_SIZE,view:(me,{writer:pe})=>{if(me)return pe.createAttributeElement("span",{style:"font-size:"+me},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:FONT_SIZE,value:me=>me.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:FONT_SIZE,value:t=>{const N=t.getAttribute("size"),me=N[0]==="-"||N[0]==="+";let pe=parseInt(N,10);me&&(pe=3+pe);const Le=styleFontSize.length-1,Ye=Math.min(Math.max(pe,0),Le);return styleFontSize[Ye]}}})}}var fontSizeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class FontSizeUI extends Plugin{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,N=this._getLocalizedOptions(),me=u.commands.get(FONT_SIZE),pe=t("Font Size"),Le=_prepareListOptions(N,me);u.ui.componentFactory.add(FONT_SIZE,Ye=>{const nt=createDropdown(Ye);return addListToDropdown(nt,Le,{role:"menu",ariaLabel:pe}),nt.buttonView.set({label:pe,icon:fontSizeIcon,tooltip:!0}),nt.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),nt.bind("isEnabled").to(me),this.listenTo(nt,"execute",ot=>{u.execute(ot.source.commandName,{value:ot.source.commandParam}),u.editing.view.focus()}),nt}),u.ui.componentFactory.add(`menuBar:${FONT_SIZE}`,Ye=>{const nt=new MenuBarMenuView(Ye);nt.buttonView.set({label:pe,icon:fontSizeIcon}),nt.bind("isEnabled").to(me);const ot=new MenuBarMenuListView(Ye);for(const ft of Le){const mt=new MenuBarMenuListItemView(Ye,nt),bt=new MenuBarMenuListItemButtonView(Ye);bt.set({role:"menuitemradio",isToggleable:!0}),bt.bind(...Object.keys(ft.model)).to(ft.model),bt.delegate("execute").to(nt),bt.on("execute",()=>{u.execute(ft.model.commandName,{value:ft.model.commandParam}),u.editing.view.focus()}),mt.children.add(bt),ot.items.add(mt)}return nt.panelView.children.add(ot),nt})}_getLocalizedOptions(){const u=this.editor,t=u.t,N={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return normalizeOptions(u.config.get(FONT_SIZE).options).map(pe=>{const Le=N[pe.title];return Le&&Le!=pe.title&&(pe=Object.assign({},pe,{title:Le})),pe})}}function _prepareListOptions(de,u){const t=new Collection;for(const N of de){const me={type:"button",model:new Model({commandName:FONT_SIZE,commandParam:N.model,label:N.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};N.view&&typeof N.view!="string"&&(N.view.styles&&me.model.set("labelStyle",`font-size:${N.view.styles["font-size"]}`),N.view.classes&&me.model.set("class",`${me.model.class} ${N.view.classes}`)),me.model.bind("isOn").to(u,"value",pe=>pe===N.model),t.add(me)}return t}class FontSize extends Plugin{static get requires(){return[FontSizeEditing,FontSizeUI]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(u){return normalizeOptions(u)}}class FontColorCommand extends FontCommand{constructor(u){super(u,FONT_COLOR)}}class FontColorEditing extends Plugin{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),u.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:FONT_COLOR,value:renderUpcastAttribute("color")}}),u.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:FONT_COLOR,value:t=>t.getAttribute("color")}}),u.conversion.for("downcast").attributeToElement({model:FONT_COLOR,view:renderDowncastElement("color")}),u.commands.add(FONT_COLOR,new FontColorCommand(u)),u.model.schema.extend("$text",{allowAttributes:FONT_COLOR}),u.model.schema.setAttributeProperties(FONT_COLOR,{isFormatting:!0,copyOnEnter:!0})}}class ColorUI extends Plugin{constructor(t,{commandName:N,componentName:me,icon:pe,dropdownLabel:Le}){super(t);xt(this,"commandName");xt(this,"componentName");xt(this,"icon");xt(this,"dropdownLabel");xt(this,"columns");this.commandName=N,this.componentName=me,this.icon=pe,this.dropdownLabel=Le,this.columns=t.config.get(`${this.componentName}.columns`)}init(){const t=this.editor,N=t.locale,me=N.t,pe=t.commands.get(this.commandName),Le=t.config.get(this.componentName),Ye=normalizeColorOptions(Le.colors),nt=getLocalizedColorOptions(N,Ye),ot=Le.documentColors,ft=Le.colorPicker!==!1;t.ui.componentFactory.add(this.componentName,mt=>{const bt=createDropdown(mt);let yt=!1;const _t=addColorSelectorToDropdown({dropdownView:bt,colors:nt.map(Ct=>({label:Ct.label,color:Ct.model,options:{hasBorder:Ct.hasBorder}})),columns:this.columns,removeButtonLabel:me("Remove color"),colorPickerLabel:me("Color picker"),documentColorsLabel:ot!==0?me("Document colors"):"",documentColorsCount:ot===void 0?this.columns:ot,colorPickerViewConfig:ft?Le.colorPicker||{}:!1});return _t.bind("selectedColor").to(pe,"value"),bt.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),bt.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),bt.bind("isEnabled").to(pe),_t.on("execute",(Ct,Tt)=>{bt.isOpen&&t.execute(this.commandName,{value:Tt.value,batch:this._undoStepBatch}),Tt.source!=="colorPicker"&&t.editing.view.focus(),Tt.source==="colorPickerSaveButton"&&(bt.isOpen=!1)}),_t.on("colorPicker:show",()=>{this._undoStepBatch=t.model.createBatch()}),_t.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(bt.isOpen=!1,t.execute("undo",this._undoStepBatch)),t.editing.view.focus()}),bt.on("change:isOpen",(Ct,Tt,At)=>{yt||(yt=!0,bt.colorSelectorView.appendUI()),At&&(ot!==0&&_t.updateDocumentColors(t.model,this.componentName),_t.updateSelectedColors(),_t.showColorGridsFragment())}),focusChildOnDropdownOpen(bt,()=>bt.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(Ct=>Ct.isOn)),bt}),t.ui.componentFactory.add(`menuBar:${this.componentName}`,mt=>{const bt=new MenuBarMenuView(mt);bt.buttonView.set({label:this.dropdownLabel,icon:this.icon}),bt.bind("isEnabled").to(pe);let yt=!1;const _t=new ColorSelectorView(mt,{colors:nt.map(Ct=>({label:Ct.label,color:Ct.model,options:{hasBorder:Ct.hasBorder}})),columns:this.columns,removeButtonLabel:me("Remove color"),colorPickerLabel:me("Color picker"),documentColorsLabel:ot!==0?me("Document colors"):"",documentColorsCount:ot===void 0?this.columns:ot,colorPickerViewConfig:!1});return _t.bind("selectedColor").to(pe,"value"),_t.delegate("execute").to(bt),_t.on("execute",(Ct,Tt)=>{t.execute(this.commandName,{value:Tt.value,batch:this._undoStepBatch}),t.editing.view.focus()}),bt.on("change:isOpen",(Ct,Tt,At)=>{yt||(yt=!0,_t.appendUI()),At&&(ot!==0&&_t.updateDocumentColors(t.model,this.componentName),_t.updateSelectedColors(),_t.showColorGridsFragment())}),bt.panelView.children.add(_t),bt})}}var fontColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class FontColorUI extends ColorUI{constructor(u){const t=u.locale.t;super(u,{commandName:FONT_COLOR,componentName:FONT_COLOR,icon:fontColorIcon,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class FontColor extends Plugin{static get requires(){return[FontColorEditing,FontColorUI]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class FontBackgroundColorCommand extends FontCommand{constructor(u){super(u,FONT_BACKGROUND_COLOR)}}class FontBackgroundColorEditing extends Plugin{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define(FONT_BACKGROUND_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),u.data.addStyleProcessorRules(addBackgroundRules),u.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:FONT_BACKGROUND_COLOR,value:renderUpcastAttribute("background-color")}}),u.conversion.for("downcast").attributeToElement({model:FONT_BACKGROUND_COLOR,view:renderDowncastElement("background-color")}),u.commands.add(FONT_BACKGROUND_COLOR,new FontBackgroundColorCommand(u)),u.model.schema.extend("$text",{allowAttributes:FONT_BACKGROUND_COLOR}),u.model.schema.setAttributeProperties(FONT_BACKGROUND_COLOR,{isFormatting:!0,copyOnEnter:!0})}}var fontBackgroundColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class FontBackgroundColorUI extends ColorUI{constructor(u){const t=u.locale.t;super(u,{commandName:FONT_BACKGROUND_COLOR,componentName:FONT_BACKGROUND_COLOR,icon:fontBackgroundColorIcon,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class FontBackgroundColor extends Plugin{static get requires(){return[FontBackgroundColorEditing,FontBackgroundColorUI]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class Font extends Plugin{static get requires(){return[FontFamily,FontSize,FontColor,FontBackgroundColor]}static get pluginName(){return"Font"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ParagraphCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}refresh(){const u=this.editor.model,t=u.document,N=first(t.selection.getSelectedBlocks());this.value=!!N&&N.is("element","paragraph"),this.isEnabled=!!N&&checkCanBecomeParagraph(N,u.schema)}execute(u={}){const t=this.editor.model,N=t.document,me=u.selection||N.selection;t.canEditAt(me)&&t.change(pe=>{const Le=me.getSelectedBlocks();for(const Ye of Le)!Ye.is("element","paragraph")&&checkCanBecomeParagraph(Ye,t.schema)&&pe.rename(Ye,"paragraph")})}}function checkCanBecomeParagraph(de,u){return u.checkChild(de.parent,"paragraph")&&!u.isObject(de)}class InsertParagraphCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}execute(u){const t=this.editor.model,N=u.attributes;let me=u.position;return t.canEditAt(me)?t.change(pe=>{if(me=this._findPositionToInsertParagraph(me,pe),!me)return null;const Le=pe.createElement("paragraph");return N&&t.schema.setAllowedAttributes(Le,N,pe),t.insertContent(Le,me),pe.setSelection(Le,"in"),pe.createPositionAt(Le,0)}):null}_findPositionToInsertParagraph(u,t){const N=this.editor.model;if(N.schema.checkChild(u,"paragraph"))return u;const me=N.schema.findAllowedParent(u,"paragraph");if(!me)return null;const pe=u.parent,Le=N.schema.checkChild(pe,"$text");return pe.isEmpty||Le&&u.isAtEnd?N.createPositionAfter(pe):!pe.isEmpty&&Le&&u.isAtStart?N.createPositionBefore(pe):t.split(u,me).position}}const ul=class ul extends Plugin{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model;u.commands.add("paragraph",new ParagraphCommand(u)),u.commands.add("insertParagraph",new InsertParagraphCommand(u)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),u.conversion.elementToElement({model:"paragraph",view:"p"}),u.conversion.for("upcast").elementToElement({model:(N,{writer:me})=>!ul.paragraphLikeElements.has(N.name)||N.isEmpty?null:me.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};xt(ul,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Paragraph=ul;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HeadingCommand extends Command{constructor(t,N){super(t);xt(this,"modelElements");this.modelElements=N}refresh(){const t=first(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(N=>checkCanBecomeHeading(t,N,this.editor.model.schema))}execute(t){const N=this.editor.model,me=N.document,pe=t.value;N.change(Le=>{const Ye=Array.from(me.selection.getSelectedBlocks()).filter(nt=>checkCanBecomeHeading(nt,pe,N.schema));for(const nt of Ye)nt.is("element",pe)||Le.rename(nt,pe)})}}function checkCanBecomeHeading(de,u,t){return t.checkChild(de.parent,u)&&!t.isObject(de)}const defaultModelElement="paragraph";class HeadingEditing extends Plugin{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Paragraph]}init(){const u=this.editor,t=u.config.get("heading.options"),N=[];for(const me of t)me.model!=="paragraph"&&(u.model.schema.register(me.model,{inheritAllFrom:"$block"}),u.conversion.elementToElement(me),N.push(me.model));this._addDefaultH1Conversion(u),u.commands.add("heading",new HeadingCommand(u,N))}afterInit(){const u=this.editor,t=u.commands.get("enter"),N=u.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(me,pe)=>{const Le=u.model.document.selection.getFirstPosition().parent;N.some(nt=>Le.is("element",nt.model))&&!Le.is("element",defaultModelElement)&&Le.childCount===0&&pe.writer.rename(Le,defaultModelElement)})}_addDefaultH1Conversion(u){u.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:priorities.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedOptions(de){const u=de.t,t={Paragraph:u("Paragraph"),"Heading 1":u("Heading 1"),"Heading 2":u("Heading 2"),"Heading 3":u("Heading 3"),"Heading 4":u("Heading 4"),"Heading 5":u("Heading 5"),"Heading 6":u("Heading 6")};return de.config.get("heading.options").map(N=>{const me=t[N.title];return me&&me!=N.title&&(N.title=me),N})}class HeadingUI extends Plugin{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.t,N=getLocalizedOptions(u),me=t("Choose heading"),pe=t("Heading");u.ui.componentFactory.add("heading",Le=>{const Ye={},nt=new Collection,ot=u.commands.get("heading"),ft=u.commands.get("paragraph"),mt=[ot];for(const yt of N){const _t={type:"button",model:new Model({label:yt.title,class:yt.class,role:"menuitemradio",withText:!0})};yt.model==="paragraph"?(_t.model.bind("isOn").to(ft,"value"),_t.model.set("commandName","paragraph"),mt.push(ft)):(_t.model.bind("isOn").to(ot,"value",Ct=>Ct===yt.model),_t.model.set({commandName:"heading",commandValue:yt.model})),nt.add(_t),Ye[yt.model]=yt.title}const bt=createDropdown(Le);return addListToDropdown(bt,nt,{ariaLabel:pe,role:"menu"}),bt.buttonView.set({ariaLabel:pe,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:pe}),bt.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),bt.bind("isEnabled").toMany(mt,"isEnabled",(...yt)=>yt.some(_t=>_t)),bt.buttonView.bind("label").to(ot,"value",ft,"value",(yt,_t)=>{const Ct=_t?"paragraph":yt;return typeof Ct=="boolean"||!Ye[Ct]?me:Ye[Ct]}),bt.buttonView.bind("ariaLabel").to(ot,"value",ft,"value",(yt,_t)=>{const Ct=_t?"paragraph":yt;return typeof Ct=="boolean"||!Ye[Ct]?pe:`${Ye[Ct]}, ${pe}`}),this.listenTo(bt,"execute",yt=>{const{commandName:_t,commandValue:Ct}=yt.source;u.execute(_t,Ct?{value:Ct}:void 0),u.editing.view.focus()}),bt}),u.ui.componentFactory.add("menuBar:heading",Le=>{const Ye=new MenuBarMenuView(Le),nt=u.commands.get("heading"),ot=u.commands.get("paragraph"),ft=[nt],mt=new MenuBarMenuListView(Le);Ye.set({class:"ck-heading-dropdown"}),mt.set({ariaLabel:t("Heading"),role:"menu"}),Ye.buttonView.set({label:t("Heading")}),Ye.panelView.children.add(mt);for(const bt of N){const yt=new MenuBarMenuListItemView(Le,Ye),_t=new MenuBarMenuListItemButtonView(Le);yt.children.add(_t),mt.items.add(yt),_t.set({isToggleable:!0,label:bt.title,role:"menuitemradio",class:bt.class}),_t.delegate("execute").to(Ye),_t.on("execute",()=>{const Ct=bt.model==="paragraph"?"paragraph":"heading";u.execute(Ct,{value:bt.model}),u.editing.view.focus()}),bt.model==="paragraph"?(_t.bind("isOn").to(ot,"value"),ft.push(ot)):_t.bind("isOn").to(nt,"value",Ct=>Ct===bt.model)}return Ye.bind("isEnabled").toMany(ft,"isEnabled",(...bt)=>bt.some(yt=>yt)),Ye})}}class Heading extends Plugin{static get requires(){return[HeadingEditing,HeadingUI]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightCommand extends Command{refresh(){const u=this.editor.model,t=u.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=u.schema.checkAttributeInSelection(t.selection,"highlight")}execute(u={}){const t=this.editor.model,me=t.document.selection,pe=u.value;t.change(Le=>{if(me.isCollapsed){const Ye=me.getFirstPosition();if(me.hasAttribute("highlight")){const nt=bt=>bt.item.hasAttribute("highlight")&&bt.item.getAttribute("highlight")===this.value,ot=Ye.getLastMatchingPosition(nt,{direction:"backward"}),ft=Ye.getLastMatchingPosition(nt),mt=Le.createRange(ot,ft);!pe||this.value===pe?(Ye.isEqual(ft)||Le.removeAttribute("highlight",mt),Le.removeSelectionAttribute("highlight")):(Ye.isEqual(ft)||Le.setAttribute("highlight",pe,mt),Le.setSelectionAttribute("highlight",pe))}else pe&&Le.setSelectionAttribute("highlight",pe)}else{const Ye=t.schema.getValidRanges(me.getRanges(),"highlight");for(const nt of Ye)pe?Le.setAttribute("highlight",pe,nt):Le.removeAttribute("highlight",nt)}})}}class HighlightEditing extends Plugin{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const u=this.editor;u.model.schema.extend("$text",{allowAttributes:"highlight"});const t=u.config.get("highlight.options");u.conversion.attributeToElement(_buildDefinition(t)),u.commands.add("highlight",new HighlightCommand(u))}}function _buildDefinition(de){const u={model:{key:"highlight",values:[]},view:{}};for(const t of de)u.model.values.push(t.model),u.view[t.model]={name:"mark",classes:t.class};return u}var markerIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',penIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';class HighlightUI extends Plugin{get localizedOptionTitles(){const u=this.editor.t;return{"Yellow marker":u("Yellow marker"),"Green marker":u("Green marker"),"Pink marker":u("Pink marker"),"Blue marker":u("Blue marker"),"Red pen":u("Red pen"),"Green pen":u("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.config.get("highlight.options");for(const t of u)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(u),this._addMenuBarButton(u)}_addRemoveHighlightButton(){const u=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",u("Remove highlight"),icons.eraser,null,N=>{N.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(u){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+u.model,u.title,getIconForType(u.type),u.model,N);function N(me){me.bind("isEnabled").to(t,"isEnabled"),me.bind("isOn").to(t,"value",pe=>pe===u.model),me.iconView.fillColor=u.color,me.isToggleable=!0}}_addButton(u,t,N,me,pe){const Le=this.editor;Le.ui.componentFactory.add(u,Ye=>{const nt=new ButtonView(Ye),ot=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return nt.set({label:ot,icon:N,tooltip:!0}),nt.on("execute",()=>{Le.execute("highlight",{value:me}),Le.editing.view.focus()}),pe(nt),nt})}_addDropdown(u){const t=this.editor,N=t.t,me=t.ui.componentFactory,pe=u[0],Le=u.reduce((Ye,nt)=>(Ye[nt.model]=nt,Ye),{});me.add("highlight",Ye=>{const nt=t.commands.get("highlight"),ot=createDropdown(Ye,SplitButtonView),ft=ot.buttonView;ft.set({label:N("Highlight"),tooltip:!0,lastExecuted:pe.model,commandValue:pe.model,isToggleable:!0}),ft.bind("icon").to(nt,"value",yt=>getIconForType(bt(yt,"type"))),ft.bind("color").to(nt,"value",yt=>bt(yt,"color")),ft.bind("commandValue").to(nt,"value",yt=>bt(yt,"model")),ft.bind("isOn").to(nt,"value",yt=>!!yt),ft.delegate("execute").to(ot);const mt=()=>{const yt=u.map(_t=>{const Ct=me.create("highlight:"+_t.model);return this.listenTo(Ct,"execute",()=>{ot.buttonView.set({lastExecuted:_t.model})}),Ct});return yt.push(new ToolbarSeparatorView),yt.push(me.create("removeHighlight")),yt};ot.bind("isEnabled").to(nt,"isEnabled"),addToolbarToDropdown(ot,mt,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:N("Text highlight toolbar")}),bindToolbarIconStyleToActiveColor(ot),ft.on("execute",()=>{t.execute("highlight",{value:ft.commandValue})}),this.listenTo(ot,"execute",()=>{t.editing.view.focus()});function bt(yt,_t){const Ct=!yt||yt===ft.lastExecuted?ft.lastExecuted:yt;return Le[Ct][_t]}return ot})}_addMenuBarButton(u){const t=this.editor,N=t.t,me=t.commands.get("highlight");t.ui.componentFactory.add("menuBar:highlight",pe=>{const Le=new MenuBarMenuView(pe);Le.buttonView.set({label:N("Highlight"),icon:getIconForType("marker")}),Le.bind("isEnabled").to(me),Le.buttonView.iconView.fillColor="transparent";const Ye=new MenuBarMenuListView(pe);for(const ft of u){const mt=new MenuBarMenuListItemView(pe,Le),bt=new MenuBarMenuListItemButtonView(pe);bt.set({label:ft.title,icon:getIconForType(ft.type),role:"menuitemradio",isToggleable:!0}),bt.iconView.fillColor=ft.color,bt.delegate("execute").to(Le),bt.bind("isOn").to(me,"value",yt=>yt===ft.model),bt.on("execute",()=>{t.execute("highlight",{value:ft.model}),t.editing.view.focus()}),mt.children.add(bt),Ye.items.add(mt)}Ye.items.add(new ListSeparatorView(pe));const nt=new MenuBarMenuListItemView(pe,Le),ot=new MenuBarMenuListItemButtonView(pe);return ot.set({label:N("Remove highlight"),icon:icons.eraser}),ot.delegate("execute").to(Le),ot.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),nt.children.add(ot),Ye.items.add(nt),Le.panelView.children.add(Ye),Le})}}function bindToolbarIconStyleToActiveColor(de){de.buttonView.actionView.iconView.bind("fillColor").to(de.buttonView,"color")}function getIconForType(de){return de==="marker"?markerIcon:penIcon}class Highlight extends Plugin{static get requires(){return[HighlightEditing,HighlightUI]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HorizontalLineCommand extends Command{refresh(){const u=this.editor.model,t=u.schema,N=u.document.selection;this.isEnabled=isHorizontalLineAllowedInParent(N,t,u)}execute(){const u=this.editor.model;u.change(t=>{const N=t.createElement("horizontalLine");u.insertObject(N,null,null,{setSelection:"after"})})}}function isHorizontalLineAllowedInParent(de,u,t){const N=getInsertHorizontalLineParent(de,t);return u.checkChild(N,"horizontalLine")}function getInsertHorizontalLineParent(de,u){const N=findOptimalInsertionRange(de,u).start.parent;return N.isEmpty&&!N.is("element","$root")?N.parent:N}class HorizontalLineEditing extends Plugin{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model.schema,N=u.t,me=u.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),me.for("dataDowncast").elementToElement({model:"horizontalLine",view:(pe,{writer:Le})=>Le.createEmptyElement("hr")}),me.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(pe,{writer:Le})=>{const Ye=N("Horizontal line"),nt=Le.createContainerElement("div",null,Le.createEmptyElement("hr"));return Le.addClass("ck-horizontal-line",nt),Le.setCustomProperty("hr",!0,nt),toHorizontalLineWidget(nt,Le,Ye)}}),me.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),u.commands.add("horizontalLine",new HorizontalLineCommand(u))}}function toHorizontalLineWidget(de,u,t){return u.setCustomProperty("horizontalLine",!0,de),toWidget(de,u,{label:t})}class HorizontalLineUI extends Plugin{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,N=t.locale,me=t.commands.get("horizontalLine"),pe=new u(t.locale),Le=N.t;return pe.set({label:Le("Horizontal line"),icon:icons.horizontalLine}),pe.bind("isEnabled").to(me,"isEnabled"),this.listenTo(pe,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),pe}}class HorizontalLine extends Plugin{static get requires(){return[HorizontalLineEditing,HorizontalLineUI,Widget]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createInlineImageViewElement(de){return de.createContainerElement("span",{class:"image-inline"},de.createEmptyElement("img"))}function createBlockImageViewElement(de){return de.createContainerElement("figure",{class:"image"},[de.createEmptyElement("img"),de.createSlot("children")])}function getImgViewElementMatcher(de,u){const t=de.plugins.get("ImageUtils"),N=de.plugins.has("ImageInlineEditing")&&de.plugins.has("ImageBlockEditing");return pe=>t.isInlineImageView(pe)?N&&(pe.getStyle("display")=="block"||pe.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==u?null:me(pe):null;function me(pe){const Le={name:!0};return pe.hasAttribute("src")&&(Le.attributes=["src"]),Le}}function determineImageTypeForInsertionAtSelection(de,u){const t=first(u.getSelectedBlocks());return!t||de.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function getSizeValueIfInPx(de){return de&&de.endsWith("px")?parseInt(de):null}function widthAndHeightStylesAreBothSet(de){const u=getSizeValueIfInPx(de.getStyle("width")),t=getSizeValueIfInPx(de.getStyle("height"));return!!(u&&t)}const IMAGE_WIDGETS_CLASSES_MATCH_REGEXP=/^(image|image-inline)$/;class ImageUtils extends Plugin{constructor(){super(...arguments);xt(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},N=null,me=null,pe={}){const Le=this.editor,Ye=Le.model,nt=Ye.document.selection,ot=determineImageTypeForInsertion(Le,N||nt,me);t={...Object.fromEntries(nt.getAttributes()),...t};for(const ft in t)Ye.schema.checkAttribute(ot,ft)||delete t[ft];return Ye.change(ft=>{const{setImageSizes:mt=!0}=pe,bt=ft.createElement(ot,t);return Ye.insertObject(bt,N,null,{setSelection:"on",findOptimalPosition:!N&&ot!="imageInline"?"auto":void 0}),bt.parent?(mt&&this.setImageNaturalSizeAttributes(bt),bt):null})}setImageNaturalSizeAttributes(t){const N=t.getAttribute("src");N&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(me=>{const pe=new global$1.window.Image;this._domEmitter.listenTo(pe,"load",()=>{!t.getAttribute("width")&&!t.getAttribute("height")&&this.editor.model.enqueueChange(me.batch,Le=>{Le.setAttribute("width",pe.naturalWidth,t),Le.setAttribute("height",pe.naturalHeight,t)}),this._domEmitter.stopListening(pe,"load")}),pe.src=N}))}getClosestSelectedImageWidget(t){const N=t.getFirstPosition();if(!N)return null;const me=t.getSelectedElement();if(me&&this.isImageWidget(me))return me;let pe=N.parent;for(;pe;){if(pe.is("element")&&this.isImageWidget(pe))return pe;pe=pe.parent}return null}getClosestSelectedImageElement(t){const N=t.getSelectedElement();return this.isImage(N)?N:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:IMAGE_WIDGETS_CLASSES_MATCH_REGEXP})}isImageAllowed(){const N=this.editor.model.document.selection;return isImageAllowedInParent(this.editor,N)&&isNotInsideImage(N)}toImageWidget(t,N,me){return N.setCustomProperty("image",!0,t),toWidget(t,N,{label:()=>{const Ye=this.findViewImgElement(t).getAttribute("alt");return Ye?`${Ye} ${me}`:me}})}isImageWidget(t){return!!t.getCustomProperty("image")&&isWidget(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const N=this.editor.editing.view;for(const{item:me}of N.createRangeIn(t))if(this.isInlineImageView(me))return me}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function isImageAllowedInParent(de,u){if(determineImageTypeForInsertion(de,u,null)=="imageBlock"){const N=getInsertImageParent(u,de.model);if(de.model.schema.checkChild(N,"imageBlock"))return!0}else if(de.model.schema.checkChild(u.focus,"imageInline"))return!0;return!1}function isNotInsideImage(de){return[...de.focus.getAncestors()].every(u=>!u.is("element","imageBlock"))}function getInsertImageParent(de,u){const N=findOptimalInsertionRange(de,u).start.parent;return N.isEmpty&&!N.is("element","$root")?N.parent:N}function determineImageTypeForInsertion(de,u,t){const N=de.model.schema,me=de.config.get("image.insert.type");return de.plugins.has("ImageBlockEditing")?de.plugins.has("ImageInlineEditing")?t||(me==="inline"?"imageInline":me!=="auto"?"imageBlock":u.is("selection")?determineImageTypeForInsertionAtSelection(N,u):N.checkChild(u,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class ImageTextAlternativeCommand extends Command{refresh(){const N=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!N,this.isEnabled&&N.hasAttribute("alt")?this.value=N.getAttribute("alt"):this.value=!1}execute(u){const t=this.editor,N=t.plugins.get("ImageUtils"),me=t.model,pe=N.getClosestSelectedImageElement(me.document.selection);me.change(Le=>{Le.setAttribute("alt",u.newValue,pe)})}}class ImageTextAlternativeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new ImageTextAlternativeCommand(this.editor))}}class TextAlternativeFormView extends View{constructor(t){super(t);xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"labeledInput");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"_focusables");xt(this,"_focusCycler");const N=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(N("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(N("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(t,N,me,pe){const Le=new ButtonView(this.locale);return Le.set({label:t,icon:N,tooltip:!0}),Le.extendTemplate({attributes:{class:me}}),pe&&Le.delegate("execute").to(this,pe),Le}_createLabeledInputView(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputText);return N.label=t("Text alternative"),N}}function repositionContextualBalloon$1(de){const u=de.plugins.get("ContextualBalloon");if(de.plugins.get("ImageUtils").getClosestSelectedImageWidget(de.editing.view.document.selection)){const N=getBalloonPositionData(de);u.updatePosition(N)}}function getBalloonPositionData(de){const u=de.editing.view,t=BalloonPanelView.defaultPositions,N=de.plugins.get("ImageUtils");return{target:u.domConverter.mapViewToDom(N.getClosestSelectedImageWidget(u.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class ImageTextAlternativeUI extends Plugin{constructor(){super(...arguments);xt(this,"_balloon");xt(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const t=this.editor,N=t.t;t.ui.componentFactory.add("imageTextAlternative",me=>{const pe=t.commands.get("imageTextAlternative"),Le=new ButtonView(me);return Le.set({label:N("Change image text alternative"),icon:icons.textAlternative,tooltip:!0}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("isOn").to(pe,"value",Ye=>!!Ye),this.listenTo(Le,"execute",()=>{this._showForm()}),Le})}_createForm(){const t=this.editor,me=t.editing.view.document,pe=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(TextAlternativeFormView))(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(Le,Ye)=>{this._hideForm(!0),Ye()}),this.listenTo(t.ui,"update",()=>{pe.getClosestSelectedImageWidget(me.selection)?this._isVisible&&repositionContextualBalloon$1(t):this._hideForm(!0)}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const t=this.editor,N=t.commands.get("imageTextAlternative"),me=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(t)}),me.fieldView.value=me.fieldView.element.value=N.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class ImageTextAlternative extends Plugin{static get requires(){return[ImageTextAlternativeEditing,ImageTextAlternativeUI]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function upcastImageFigure(de){const u=(t,N,me)=>{if(!me.consumable.test(N.viewItem,{name:!0,classes:"image"}))return;const pe=de.findViewImgElement(N.viewItem);if(!pe||!me.consumable.test(pe,{name:!0}))return;me.consumable.consume(N.viewItem,{name:!0,classes:"image"});const Le=me.convertItem(pe,N.modelCursor),Ye=first(Le.modelRange.getItems());if(!Ye){me.consumable.revert(N.viewItem,{name:!0,classes:"image"});return}me.convertChildren(N.viewItem,Ye),me.updateConversionResult(Ye,N)};return t=>{t.on("element:figure",u)}}function downcastSrcsetAttribute(de,u){const t=(N,me,pe)=>{if(!pe.consumable.consume(me.item,N.name))return;const Le=pe.writer,Ye=pe.mapper.toViewElement(me.item),nt=de.findViewImgElement(Ye);me.attributeNewValue===null?(Le.removeAttribute("srcset",nt),Le.removeAttribute("sizes",nt)):me.attributeNewValue&&(Le.setAttribute("srcset",me.attributeNewValue,nt),Le.setAttribute("sizes","100vw",nt))};return N=>{N.on(`attribute:srcset:${u}`,t)}}function downcastImageAttribute(de,u,t){const N=(me,pe,Le)=>{if(!Le.consumable.consume(pe.item,me.name))return;const Ye=Le.writer,nt=Le.mapper.toViewElement(pe.item),ot=de.findViewImgElement(nt);Ye.setAttribute(pe.attributeKey,pe.attributeNewValue||"",ot)};return me=>{me.on(`attribute:${t}:${u}`,N)}}class ImageLoadObserver extends Observer{observe(u){this.listenTo(u,"load",(t,N)=>{const me=N.target;this.checkShouldIgnoreEventFromTarget(me)||me.tagName=="IMG"&&this._fireEvents(N)},{useCapture:!0})}stopObserving(u){this.stopListening(u)}_fireEvents(u){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",u))}}class InsertImageCommand extends Command{constructor(u){super(u);const t=u.config.get("image.insert.type");u.plugins.has("ImageBlockEditing")||t==="block"&&logWarning("image-block-plugin-required"),u.plugins.has("ImageInlineEditing")||t==="inline"&&logWarning("image-inline-plugin-required")}refresh(){const u=this.editor.plugins.get("ImageUtils");this.isEnabled=u.isImageAllowed()}execute(u){const t=toArray$2(u.source),N=this.editor.model.document.selection,me=this.editor.plugins.get("ImageUtils"),pe=Object.fromEntries(N.getAttributes());t.forEach((Le,Ye)=>{const nt=N.getSelectedElement();if(typeof Le=="string"&&(Le={src:Le}),Ye&&nt&&me.isImage(nt)){const ot=this.editor.model.createPositionAfter(nt);me.insertImage({...Le,...pe},ot,u.imageType)}else u.breakBlock?me.insertImage({...Le,...pe},N.getFirstPosition(),u.imageType):me.insertImage({...Le,...pe},null,u.imageType)})}}class ReplaceImageSourceCommand extends Command{constructor(u){super(u),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),N=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(N),this.value=this.isEnabled?N.getAttribute("src"):null}execute(u){const t=this.editor.model.document.selection.getSelectedElement(),N=this.editor.plugins.get("ImageUtils");this.editor.model.change(me=>{me.setAttribute("src",u.source,t),this.cleanupImage(me,t),N.setImageNaturalSizeAttributes(t)})}cleanupImage(u,t){u.removeAttribute("srcset",t),u.removeAttribute("sizes",t),u.removeAttribute("sources",t),u.removeAttribute("width",t),u.removeAttribute("height",t),u.removeAttribute("alt",t)}}class ImageEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.conversion;u.editing.view.addObserver(ImageLoadObserver),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const N=new InsertImageCommand(u),me=new ReplaceImageSourceCommand(u);u.commands.add("insertImage",N),u.commands.add("replaceImageSource",me),u.commands.add("imageInsert",N)}}class ImageSizeAttributes extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(u){const t=this.editor,N=t.plugins.get("ImageUtils"),me=u==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:me,styles:{width:/.+/}},model:{key:"width",value:Le=>widthAndHeightStylesAreBothSet(Le)?getSizeValueIfInPx(Le.getStyle("width")):null}}).attributeToAttribute({view:{name:me,key:"width"},model:"width"}).attributeToAttribute({view:{name:me,styles:{height:/.+/}},model:{key:"height",value:Le=>widthAndHeightStylesAreBothSet(Le)?getSizeValueIfInPx(Le.getStyle("height")):null}}).attributeToAttribute({view:{name:me,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(Le=>{pe(Le,"width","width",!0,!0),pe(Le,"height","height",!0,!0)}),t.conversion.for("dataDowncast").add(Le=>{pe(Le,"width","width",!1),pe(Le,"height","height",!1)});function pe(Le,Ye,nt,ot,ft=!1){Le.on(`attribute:${Ye}:${u}`,(mt,bt,yt)=>{if(!yt.consumable.consume(bt.item,mt.name))return;const _t=yt.writer,Ct=yt.mapper.toViewElement(bt.item),Tt=N.findViewImgElement(Ct);bt.attributeNewValue!==null?_t.setAttribute(nt,bt.attributeNewValue,Tt):_t.removeAttribute(nt,Tt);const At=bt.item.getAttribute("width"),It=bt.item.getAttribute("height"),Pt=At&&It;if(Pt&&ft&&_t.setAttribute("loading","lazy",Tt),bt.item.hasAttribute("sources"))return;const Bt=bt.item.hasAttribute("resizedWidth");u==="imageInline"&&!Bt&&!ot||Pt&&_t.setStyle("aspect-ratio",`${At}/${It}`,Tt)})}}}class ImageTypeCommand extends Command{constructor(t,N){super(t);xt(this,"_modelElementName");this._modelElementName=N}refresh(){const N=this.editor.plugins.get("ImageUtils"),me=N.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=N.isInlineImage(me):this.isEnabled=N.isBlockImage(me)}execute(t={}){const N=this.editor,me=this.editor.model,pe=N.plugins.get("ImageUtils"),Le=pe.getClosestSelectedImageElement(me.document.selection),Ye=Object.fromEntries(Le.getAttributes());return!Ye.src&&!Ye.uploadId?null:me.change(nt=>{const{setImageSizes:ot=!0}=t,ft=Array.from(me.markers).filter(yt=>yt.getRange().containsItem(Le)),mt=pe.insertImage(Ye,me.createSelection(Le,"on"),this._modelElementName,{setImageSizes:ot});if(!mt)return null;const bt=nt.createRangeOn(mt);for(const yt of ft){const _t=yt.getRange(),Ct=_t.root.rootName!="$graveyard"?_t.getJoined(bt,!0):bt;nt.updateMarker(yt,{range:Ct})}return{oldElement:Le,newElement:mt}})}}class ImagePlaceholder extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const u=this.editor.model.schema;u.isRegistered("imageBlock")&&u.extend("imageBlock",{allowAttributes:["placeholder"]}),u.isRegistered("imageInline")&&u.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const u=this.editor,t=u.conversion,N=u.plugins.get("ImageUtils");t.for("editingDowncast").add(me=>{me.on("attribute:placeholder",(pe,Le,Ye)=>{if(!Ye.consumable.test(Le.item,pe.name)||!Le.item.is("element","imageBlock")&&!Le.item.is("element","imageInline"))return;Ye.consumable.consume(Le.item,pe.name);const nt=Ye.writer,ot=Ye.mapper.toViewElement(Le.item),ft=N.findViewImgElement(ot);Le.attributeNewValue?(nt.addClass("image_placeholder",ft),nt.setStyle("background-image",`url(${Le.attributeNewValue})`,ft),nt.setCustomProperty("editingPipeline:doNotReuseOnce",!0,ft)):(nt.removeClass("image_placeholder",ft),nt.removeStyle("background-image",ft))})})}_setupLoadListener(){const u=this.editor,t=u.model,N=u.editing,me=N.view,pe=u.plugins.get("ImageUtils");me.addObserver(ImageLoadObserver),this.listenTo(me.document,"imageLoaded",(Le,Ye)=>{const nt=me.domConverter.mapDomToView(Ye.target);if(!nt)return;const ot=pe.getImageWidgetFromImageView(nt);if(!ot)return;const ft=N.mapper.toModelElement(ot);!ft||!ft.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},mt=>{mt.removeAttribute("placeholder",ft)})})}}class ImageBlockEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),u.plugins.has("ImageInlineEditing")&&(u.commands.add("imageTypeBlock",new ImageTypeCommand(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const u=this.editor,t=u.t,N=u.conversion,me=u.plugins.get("ImageUtils");N.for("dataDowncast").elementToStructure({model:"imageBlock",view:(pe,{writer:Le})=>createBlockImageViewElement(Le)}),N.for("editingDowncast").elementToStructure({model:"imageBlock",view:(pe,{writer:Le})=>me.toImageWidget(createBlockImageViewElement(Le),Le,t("image widget"))}),N.for("downcast").add(downcastImageAttribute(me,"imageBlock","src")).add(downcastImageAttribute(me,"imageBlock","alt")).add(downcastSrcsetAttribute(me,"imageBlock")),N.for("upcast").elementToElement({view:getImgViewElementMatcher(u,"imageBlock"),model:(pe,{writer:Le})=>Le.createElement("imageBlock",pe.hasAttribute("src")?{src:pe.getAttribute("src")}:void 0)}).add(upcastImageFigure(me))}_setupClipboardIntegration(){const u=this.editor,t=u.model,N=u.editing.view,me=u.plugins.get("ImageUtils"),pe=u.plugins.get("ClipboardPipeline");this.listenTo(pe,"inputTransformation",(Le,Ye)=>{const nt=Array.from(Ye.content.getChildren());let ot;if(!nt.every(me.isInlineImageView))return;Ye.targetRanges?ot=u.editing.mapper.toModelRange(Ye.targetRanges[0]):ot=t.document.selection.getFirstRange();const ft=t.createSelection(ot);if(determineImageTypeForInsertionAtSelection(t.schema,ft)==="imageBlock"){const mt=new UpcastWriter(N.document),bt=nt.map(yt=>mt.createElement("figure",{class:"image"},yt));Ye.content=mt.createDocumentFragment(bt)}}),this.listenTo(pe,"contentInsertion",(Le,Ye)=>{Ye.method==="paste"&&t.change(nt=>{const ot=nt.createRangeIn(Ye.content);for(const ft of ot.getItems())ft.is("element","imageBlock")&&me.setImageNaturalSizeAttributes(ft)})})}}class ImageInsertFormView extends View{constructor(t,N=[]){super(t);xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"_focusables");xt(this,"_focusCycler");xt(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.children=this.createCollection(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const me of N)this.children.add(me),this._focusables.add(me),me instanceof CollapsibleView&&this._focusables.addMany(me.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),submitHandler({view:this});for(const N of this._focusables)this.focusTracker.add(N.element);this.keystrokes.listenTo(this.element);const t=N=>N.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ImageInsertUI extends Plugin{constructor(t){super(t);xt(this,"dropdownView");xt(this,"_integrations",new Map);t.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const t=this.editor,N=t.model.document.selection,me=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=me.isImage(N.getSelectedElement())});const pe=Ye=>this._createToolbarComponent(Ye),Le=Ye=>this._createMenuBarComponent(Ye);t.ui.componentFactory.add("insertImage",pe),t.ui.componentFactory.add("imageInsert",pe),t.ui.componentFactory.add("menuBar:insertImage",Le)}registerIntegration({name:t,observable:N,buttonViewCreator:me,formViewCreator:pe,menuBarButtonViewCreator:Le,requiresForm:Ye=!1,override:nt=!1}){this._integrations.has(t)&&!nt&&logWarning("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:N,buttonViewCreator:me,menuBarButtonViewCreator:Le,formViewCreator:pe,requiresForm:Ye})}_createToolbarComponent(t){const N=this.editor,me=t.t,pe=this._prepareIntegrations();if(!pe.length)return null;let Le;const Ye=pe[0];if(pe.length==1){if(!Ye.requiresForm)return Ye.buttonViewCreator(!0);Le=Ye.buttonViewCreator(!0)}else{const ft=Ye.buttonViewCreator(!1);Le=new SplitButtonView(t,ft),Le.tooltip=!0,Le.bind("label").to(this,"isImageSelected",mt=>me(mt?"Replace image":"Insert image"))}const nt=this.dropdownView=createDropdown(t,Le),ot=pe.map(({observable:ft})=>typeof ft=="function"?ft():ft);return nt.bind("isEnabled").toMany(ot,"isEnabled",(...ft)=>ft.some(mt=>mt)),nt.once("change:isOpen",()=>{const ft=pe.flatMap(({formViewCreator:bt})=>bt(pe.length==1)),mt=new ImageInsertFormView(N.locale,ft);nt.panelView.children.add(mt)}),nt}_createMenuBarComponent(t){const N=t.t,me=this._prepareIntegrations();if(!me.length)return null;const pe=me.flatMap(({menuBarButtonViewCreator:nt})=>nt(me.length==1)),Le=new MenuBarMenuView(t),Ye=new MenuBarMenuListView(t);Le.panelView.children.add(Ye),Le.buttonView.set({icon:icons.image,label:N("Image")});for(const nt of pe){const ot=new MenuBarMenuListItemView(t,Le);ot.children.add(nt),Ye.items.add(ot),nt.delegate("execute").to(Le)}return Le}_prepareIntegrations(){const N=this.editor.config.get("image.insert.integrations"),me=[];if(!N.length)return logWarning("image-insert-integrations-not-specified"),me;for(const pe of N){if(!this._integrations.has(pe)){["upload","assetManager","url"].includes(pe)||logWarning("image-insert-unknown-integration",{item:pe});continue}me.push(this._integrations.get(pe))}return me.length||logWarning("image-insert-integrations-not-registered"),me}}class ImageBlock extends Plugin{static get requires(){return[ImageBlockEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class ImageInlineEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),u.plugins.has("ImageBlockEditing")&&(u.commands.add("imageTypeInline",new ImageTypeCommand(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const u=this.editor,t=u.t,N=u.conversion,me=u.plugins.get("ImageUtils");N.for("dataDowncast").elementToElement({model:"imageInline",view:(pe,{writer:Le})=>Le.createEmptyElement("img")}),N.for("editingDowncast").elementToStructure({model:"imageInline",view:(pe,{writer:Le})=>me.toImageWidget(createInlineImageViewElement(Le),Le,t("image widget"))}),N.for("downcast").add(downcastImageAttribute(me,"imageInline","src")).add(downcastImageAttribute(me,"imageInline","alt")).add(downcastSrcsetAttribute(me,"imageInline")),N.for("upcast").elementToElement({view:getImgViewElementMatcher(u,"imageInline"),model:(pe,{writer:Le})=>Le.createElement("imageInline",pe.hasAttribute("src")?{src:pe.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const u=this.editor,t=u.model,N=u.editing.view,me=u.plugins.get("ImageUtils"),pe=u.plugins.get("ClipboardPipeline");this.listenTo(pe,"inputTransformation",(Le,Ye)=>{const nt=Array.from(Ye.content.getChildren());let ot;if(!nt.every(me.isBlockImageView))return;Ye.targetRanges?ot=u.editing.mapper.toModelRange(Ye.targetRanges[0]):ot=t.document.selection.getFirstRange();const ft=t.createSelection(ot);if(determineImageTypeForInsertionAtSelection(t.schema,ft)==="imageInline"){const mt=new UpcastWriter(N.document),bt=nt.map(yt=>yt.childCount===1?(Array.from(yt.getAttributes()).forEach(_t=>mt.setAttribute(..._t,me.findViewImgElement(yt))),yt.getChild(0)):yt);Ye.content=mt.createDocumentFragment(bt)}}),this.listenTo(pe,"contentInsertion",(Le,Ye)=>{Ye.method==="paste"&&t.change(nt=>{const ot=nt.createRangeIn(Ye.content);for(const ft of ot.getItems())ft.is("element","imageInline")&&me.setImageNaturalSizeAttributes(ft)})})}}class ImageInline extends Plugin{static get requires(){return[ImageInlineEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class Image extends Plugin{static get requires(){return[ImageBlock,ImageInline]}static get pluginName(){return"Image"}static get isOfficialPlugin(){return!0}}class ImageCaptionUtils extends Plugin{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}getCaptionFromImageModelElement(u){for(const t of u.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(u){const t=this.editor.plugins.get("ImageUtils"),N=u.getFirstPosition().findAncestor("caption");return N&&t.isBlockImage(N.parent)?N:null}matchImageCaptionViewElement(u){const t=this.editor.plugins.get("ImageUtils");return u.name=="figcaption"&&t.isBlockImageView(u.parent)?{name:!0}:null}}class ToggleImageCaptionCommand extends Command{refresh(){const u=this.editor,t=u.plugins.get("ImageCaptionUtils"),N=u.plugins.get("ImageUtils");if(!u.plugins.has(ImageBlockEditing)){this.isEnabled=!1,this.value=!1;return}const me=u.model.document.selection,pe=me.getSelectedElement();if(!pe){const Le=t.getCaptionFromModelSelection(me);this.isEnabled=!!Le,this.value=!!Le;return}this.isEnabled=N.isImage(pe),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(pe):this.value=!1}execute(u={}){const{focusCaptionOnShow:t}=u;this.editor.model.change(N=>{this.value?this._hideImageCaption(N):this._showImageCaption(N,t)})}_showImageCaption(u,t){const me=this.editor.model.document.selection,pe=this.editor.plugins.get("ImageCaptionEditing"),Le=this.editor.plugins.get("ImageUtils");let Ye=me.getSelectedElement();const nt=pe._getSavedCaption(Ye);Le.isInlineImage(Ye)&&(this.editor.execute("imageTypeBlock"),Ye=me.getSelectedElement());const ot=nt||u.createElement("caption");u.append(ot,Ye),t&&u.setSelection(ot,"in")}_hideImageCaption(u){const t=this.editor,N=t.model.document.selection,me=t.plugins.get("ImageCaptionEditing"),pe=t.plugins.get("ImageCaptionUtils");let Le=N.getSelectedElement(),Ye;Le?Ye=pe.getCaptionFromImageModelElement(Le):(Ye=pe.getCaptionFromModelSelection(N),Le=Ye.parent),me._saveCaption(Le,Ye),u.setSelection(Le,"on"),u.remove(Ye)}}class ImageCaptionEditing extends Plugin{constructor(t){super(t);xt(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[ImageUtils,ImageCaptionUtils]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model.schema;N.isRegistered("caption")?N.extend("caption",{allowIn:"imageBlock"}):N.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleImageCaption",new ToggleImageCaptionCommand(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const t=this.editor,N=t.editing.view,me=t.plugins.get("ImageUtils"),pe=t.plugins.get("ImageCaptionUtils"),Le=t.t;t.conversion.for("upcast").elementToElement({view:Ye=>pe.matchImageCaptionViewElement(Ye),model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(Ye,{writer:nt})=>me.isBlockImage(Ye.parent)?nt.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(Ye,{writer:nt})=>{if(!me.isBlockImage(Ye.parent))return null;const ot=nt.createEditableElement("figcaption");nt.setCustomProperty("imageCaption",!0,ot),ot.placeholder=Le("Enter image caption"),enablePlaceholder({view:N,element:ot,keepOnFocus:!0});const ft=Ye.parent.getAttribute("alt"),mt=ft?Le("Caption for image: %0",[ft]):Le("Caption for the image");return toWidgetEditable(ot,nt,{label:mt})}})}_setupImageTypeCommandsIntegration(){const t=this.editor,N=t.plugins.get("ImageUtils"),me=t.plugins.get("ImageCaptionUtils"),pe=t.commands.get("imageTypeInline"),Le=t.commands.get("imageTypeBlock"),Ye=nt=>{if(!nt.return)return;const{oldElement:ot,newElement:ft}=nt.return;/* istanbul ignore if: paranoid check -- @preserve */if(!ot)return;if(N.isBlockImage(ot)){const bt=me.getCaptionFromImageModelElement(ot);if(bt){this._saveCaption(ft,bt);return}}const mt=this._getSavedCaption(ot);mt&&this._saveCaption(ft,mt)};pe&&this.listenTo(pe,"execute",Ye,{priority:"low"}),Le&&this.listenTo(Le,"execute",Ye,{priority:"low"})}_getSavedCaption(t){const N=this._savedCaptionsMap.get(t);return N?Element.fromJSON(N):null}_saveCaption(t,N){this._savedCaptionsMap.set(t,N.toJSON())}_registerCaptionReconversion(){const t=this.editor,N=t.model,me=t.plugins.get("ImageUtils"),pe=t.plugins.get("ImageCaptionUtils");N.document.on("change:data",()=>{const Le=N.document.differ.getChanges();for(const Ye of Le){if(Ye.attributeKey!=="alt")continue;const nt=Ye.range.start.nodeAfter;if(me.isBlockImage(nt)){const ot=pe.getCaptionFromImageModelElement(nt);if(!ot)return;t.editing.reconvertItem(ot)}}})}}class ImageCaptionUI extends Plugin{static get requires(){return[ImageCaptionUtils]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.editing.view,N=u.plugins.get("ImageCaptionUtils"),me=u.t;u.ui.componentFactory.add("toggleImageCaption",pe=>{const Le=u.commands.get("toggleImageCaption"),Ye=new ButtonView(pe);return Ye.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),Ye.bind("isOn","isEnabled").to(Le,"value","isEnabled"),Ye.bind("label").to(Le,"value",nt=>me(nt?"Toggle caption off":"Toggle caption on")),this.listenTo(Ye,"execute",()=>{u.execute("toggleImageCaption",{focusCaptionOnShow:!0});const nt=N.getCaptionFromModelSelection(u.model.document.selection);if(nt){const ot=u.editing.mapper.toViewElement(nt);t.scrollToTheSelection(),t.change(ft=>{ft.addClass("image__caption_highlighted",ot)})}u.editing.view.focus()}),Ye})}}class ImageCaption extends Plugin{static get requires(){return[ImageCaptionEditing,ImageCaptionUI]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function createImageTypeRegExp(de){const u=de.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${u.join("|")})$`)}function fetchLocalImage(de){return new Promise((u,t)=>{const N=de.getAttribute("src");fetch(N).then(me=>me.blob()).then(me=>{const pe=getImageMimeType(me,N),Ye=`image.${pe.replace("image/","")}`,nt=new File([me],Ye,{type:pe});u(nt)}).catch(me=>me&&me.name==="TypeError"?convertLocalImageOnCanvas(N).then(u).catch(t):t(me))})}function isLocalImage(de,u){return!de.isInlineImageView(u)||!u.getAttribute("src")?!1:!!u.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!u.getAttribute("src").match(/^blob:/g)}function getImageMimeType(de,u){return de.type?de.type:u.match(/data:(image\/\w+);base64/)?u.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function convertLocalImageOnCanvas(de){return getBlobFromCanvas(de).then(u=>{const t=getImageMimeType(u,de),me=`image.${t.replace("image/","")}`;return new File([u],me,{type:t})})}function getBlobFromCanvas(de){return new Promise((u,t)=>{const N=global$1.document.createElement("img");N.addEventListener("load",()=>{const me=global$1.document.createElement("canvas");me.width=N.width,me.height=N.height,me.getContext("2d").drawImage(N,0,0),me.toBlob(Le=>Le?u(Le):t())}),N.addEventListener("error",()=>t()),N.src=de})}class ImageUploadUI extends Plugin{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),u.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),u.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),u.plugins.has("ImageInsertUI")&&u.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>u.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(u){const t=this.editor,N=t.locale,me=t.commands.get("uploadImage"),pe=t.config.get("image.upload.types"),Le=createImageTypeRegExp(pe),Ye=new u(t.locale),nt=N.t;return Ye.set({acceptedType:pe.map(ot=>`image/${ot}`).join(","),allowMultipleFiles:!0,label:nt("Upload from computer"),icon:icons.imageUpload}),Ye.bind("isEnabled").to(me),Ye.on("done",(ot,ft)=>{const mt=Array.from(ft).filter(bt=>Le.test(bt.type));mt.length&&(t.execute("uploadImage",{file:mt}),t.editing.view.focus())}),Ye}_createToolbarButton(){const u=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),N=this.editor.commands.get("uploadImage"),me=this._createButton(FileDialogButtonView);return me.tooltip=!0,me.bind("label").to(t,"isImageSelected",N,"isAccessAllowed",(pe,Le)=>u(Le?pe?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),me}_createDropdownButton(){const u=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),N=this._createButton(FileDialogButtonView);return N.withText=!0,N.bind("label").to(t,"isImageSelected",me=>u(me?"Replace from computer":"Upload from computer")),N.on("execute",()=>{t.dropdownView.isOpen=!1}),N}_createMenuBarButton(u){const t=this.editor.locale.t,N=this._createButton(MenuBarMenuListItemFileDialogButtonView);switch(N.withText=!0,u){case"standalone":N.label=t("Image from computer");break;case"insertOnly":N.label=t("Image");break;case"insertNested":N.label=t("From computer");break}return N}}class ImageUploadProgress extends Plugin{constructor(t){super(t);xt(this,"placeholder");xt(this,"uploadStatusChange",(t,N,me)=>{const pe=this.editor,Le=N.item,Ye=Le.getAttribute("uploadId");if(!me.consumable.consume(N.item,t.name))return;const nt=pe.plugins.get("ImageUtils"),ot=pe.plugins.get(FileRepository),ft=Ye?N.attributeNewValue:null,mt=this.placeholder,bt=pe.editing.mapper.toViewElement(Le),yt=me.writer;if(ft=="reading"){_startAppearEffect(bt,yt),_showPlaceholder(nt,mt,bt,yt);return}if(ft=="uploading"){const _t=ot.loaders.get(Ye);_startAppearEffect(bt,yt),_t?(_hidePlaceholder(bt,yt),_showProgressBar(bt,yt,_t,pe.editing.view),_displayLocalImage(nt,bt,yt,_t)):_showPlaceholder(nt,mt,bt,yt);return}ft=="complete"&&ot.loaders.get(Ye)&&_showCompleteIcon(bt,yt,pe.editing.view),_hideProgressBar(bt,yt),_hidePlaceholder(bt,yt),_stopAppearEffect(bt,yt)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function _startAppearEffect(de,u){de.hasClass("ck-appear")||u.addClass("ck-appear",de)}function _stopAppearEffect(de,u){u.removeClass("ck-appear",de)}function _showPlaceholder(de,u,t,N){t.hasClass("ck-image-upload-placeholder")||N.addClass("ck-image-upload-placeholder",t);const me=de.findViewImgElement(t);me.getAttribute("src")!==u&&N.setAttribute("src",u,me),_getUIElement(t,"placeholder")||N.insert(N.createPositionAfter(me),_createPlaceholder(N))}function _hidePlaceholder(de,u){de.hasClass("ck-image-upload-placeholder")&&u.removeClass("ck-image-upload-placeholder",de),_removeUIElement(de,u,"placeholder")}function _showProgressBar(de,u,t,N){const me=_createProgressBar(u);u.insert(u.createPositionAt(de,"end"),me),t.on("change:uploadedPercent",(pe,Le,Ye)=>{N.change(nt=>{nt.setStyle("width",Ye+"%",me)})})}function _hideProgressBar(de,u){_removeUIElement(de,u,"progressBar")}function _showCompleteIcon(de,u,t){const N=u.createUIElement("div",{class:"ck-image-upload-complete-icon"});u.insert(u.createPositionAt(de,"end"),N),setTimeout(()=>{t.change(me=>me.remove(me.createRangeOn(N)))},3e3)}function _createProgressBar(de){const u=de.createUIElement("div",{class:"ck-progress-bar"});return de.setCustomProperty("progressBar",!0,u),u}function _createPlaceholder(de){const u=de.createUIElement("div",{class:"ck-upload-placeholder-loader"});return de.setCustomProperty("placeholder",!0,u),u}function _getUIElement(de,u){for(const t of de.getChildren())if(t.getCustomProperty(u))return t}function _removeUIElement(de,u,t){const N=_getUIElement(de,t);N&&u.remove(u.createRangeOn(N))}function _displayLocalImage(de,u,t,N){if(N.data){const me=de.findViewImgElement(u);t.setAttribute("src",N.data,me)}}class UploadImageCommand extends Command{constructor(u){super(u),this.set("isAccessAllowed",!0)}refresh(){const u=this.editor,t=u.plugins.get("ImageUtils"),N=u.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(N)}execute(u){const t=toArray$2(u.file),N=this.editor.model.document.selection,me=this.editor.plugins.get("ImageUtils"),pe=Object.fromEntries(N.getAttributes());t.forEach((Le,Ye)=>{const nt=N.getSelectedElement();if(Ye&&nt&&me.isImage(nt)){const ot=this.editor.model.createPositionAfter(nt);this._uploadImage(Le,pe,ot)}else this._uploadImage(Le,pe)})}_uploadImage(u,t,N){const me=this.editor,Le=me.plugins.get(FileRepository).createLoader(u),Ye=me.plugins.get("ImageUtils");Le&&Ye.insertImage({...t,uploadId:Le.id},N)}}class ImageUploadEditing extends Plugin{constructor(t){super(t);xt(this,"_uploadImageElements");xt(this,"_uploadedImages",new Map);t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[FileRepository,Notification,ClipboardPipeline,ImageUtils]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model.document,me=t.conversion,pe=t.plugins.get(FileRepository),Le=t.plugins.get("ImageUtils"),Ye=t.plugins.get("ClipboardPipeline"),nt=createImageTypeRegExp(t.config.get("image.upload.types")),ot=new UploadImageCommand(t);t.commands.add("uploadImage",ot),t.commands.add("imageUpload",ot),me.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(ft=>ft.on("element:img",(mt,bt,yt)=>{if(!yt.consumable.test(bt.viewItem,{attributes:["data-ck-upload-id"]}))return;const _t=bt.viewItem.getAttribute("data-ck-upload-id");if(!_t)return;const[Ct]=Array.from(bt.modelRange.getItems({shallow:!0})),Tt=pe.loaders.get(_t);Ct&&(yt.writer.setAttribute("uploadId",_t,Ct),yt.consumable.consume(bt.viewItem,{attributes:["data-ck-upload-id"]}),Tt&&Tt.data&&yt.writer.setAttribute("uploadStatus",Tt.status,Ct))},{priority:"low"})),this.listenTo(t.editing.view.document,"clipboardInput",(ft,mt)=>{if(isHtmlIncluded(mt.dataTransfer))return;const bt=Array.from(mt.dataTransfer.files).filter(_t=>_t?nt.test(_t.type):!1);if(!bt.length)return;if(ft.stop(),t.model.change(_t=>{mt.targetRanges&&_t.setSelection(mt.targetRanges.map(Ct=>t.editing.mapper.toModelRange(Ct))),t.execute("uploadImage",{file:bt})}),!t.commands.get("uploadImage").isAccessAllowed){const _t=t.plugins.get("Notification"),Ct=t.locale.t;_t.showWarning(Ct("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(Ye,"inputTransformation",(ft,mt)=>{const bt=Array.from(t.editing.view.createRangeIn(mt.content)).map(_t=>_t.item).filter(_t=>isLocalImage(Le,_t)&&!_t.getAttribute("uploadProcessed")).map(_t=>({promise:fetchLocalImage(_t),imageElement:_t}));if(!bt.length)return;const yt=new UpcastWriter(t.editing.view.document);for(const _t of bt){yt.setAttribute("uploadProcessed",!0,_t.imageElement);const Ct=pe.createLoader(_t.promise);Ct&&(yt.setAttribute("src","",_t.imageElement),yt.setAttribute("uploadId",Ct.id,_t.imageElement))}}),t.editing.view.document.on("dragover",(ft,mt)=>{mt.preventDefault()}),N.on("change",()=>{const ft=N.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),mt=new Set;for(const bt of ft)if(bt.type=="insert"&&bt.name!="$text"){const yt=bt.position.nodeAfter,_t=bt.position.root.rootName=="$graveyard";for(const Ct of getImagesFromChangeItem(t,yt)){const Tt=Ct.getAttribute("uploadId");if(!Tt)continue;const At=pe.loaders.get(Tt);if(!At){!_t&&this._uploadedImages.has(Tt)&&t.model.enqueueChange({isUndoable:!1},It=>{It.setAttribute("uploadStatus","complete",Ct),this.fire("uploadComplete",{data:this._uploadedImages.get(Tt),imageElement:Ct})});continue}_t?mt.has(Tt)||Array.from(this._uploadImageElements.get(Tt)).every(Pt=>Pt.root.rootName=="$graveyard")&&At.abort():(mt.add(Tt),this._uploadImageElements.has(Tt)?this._uploadImageElements.get(Tt).add(Ct):this._uploadImageElements.set(Tt,new Set([Ct])),At.status=="idle"&&this._readAndUpload(At))}}}),this.on("uploadComplete",(ft,{imageElement:mt,data:bt})=>{const yt=bt.urls?bt.urls:bt;this.editor.model.change(_t=>{_t.setAttribute("src",yt.default,mt),this._parseAndSetSrcsetAttributeOnImage(yt,mt,_t),Le.setImageNaturalSizeAttributes(mt)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(t){const N=this.editor,me=N.model,pe=N.locale.t,Le=N.plugins.get(FileRepository),Ye=N.plugins.get(Notification),nt=N.plugins.get("ImageUtils"),ot=this._uploadImageElements;return me.enqueueChange({isUndoable:!1},mt=>{const bt=ot.get(t.id);for(const yt of bt)mt.setAttribute("uploadStatus","reading",yt)}),t.read().then(()=>{const mt=t.upload();N.ui&&N.ui.ariaLiveAnnouncer.announce(pe("Uploading image"));for(const bt of ot.get(t.id)){/* istanbul ignore next -- @preserve */if(env.isSafari){const yt=N.editing.mapper.toViewElement(bt),_t=nt.findViewImgElement(yt);N.editing.view.once("render",()=>{if(!_t.parent)return;const Ct=N.editing.view.domConverter.mapViewToDom(_t.parent);if(!Ct)return;const Tt=Ct.style.display;Ct.style.display="none",Ct._ckHack=Ct.offsetHeight,Ct.style.display=Tt})}me.enqueueChange({isUndoable:!1},yt=>{yt.setAttribute("uploadStatus","uploading",bt)})}return mt}).then(mt=>{me.enqueueChange({isUndoable:!1},bt=>{for(const yt of ot.get(t.id))bt.setAttribute("uploadStatus","complete",yt),this.fire("uploadComplete",{data:mt,imageElement:yt});N.ui&&N.ui.ariaLiveAnnouncer.announce(pe("Image upload complete")),this._uploadedImages.set(t.id,mt)}),ft()}).catch(mt=>{if(N.ui&&N.ui.ariaLiveAnnouncer.announce(pe("Error during image upload")),t.status!=="error"&&t.status!=="aborted")throw mt;t.status=="error"&&mt&&Ye.showWarning(mt,{title:pe("Upload failed"),namespace:"upload"}),me.enqueueChange({isUndoable:!1},bt=>{for(const yt of ot.get(t.id))yt.root.rootName!=="$graveyard"&&bt.remove(yt)}),ft()});function ft(){me.enqueueChange({isUndoable:!1},mt=>{for(const bt of ot.get(t.id))mt.removeAttribute("uploadId",bt),mt.removeAttribute("uploadStatus",bt);ot.delete(t.id)}),Le.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,N,me){let pe=0;const Le=Object.keys(t).filter(Ye=>{const nt=parseInt(Ye,10);if(!isNaN(nt))return pe=Math.max(pe,nt),!0}).map(Ye=>`${t[Ye]} ${Ye}w`).join(", ");if(Le!=""){const Ye={srcset:Le};!N.hasAttribute("width")&&!N.hasAttribute("height")&&(Ye.width=pe),me.setAttributes(Ye,N)}}_registerConverters(t){const{conversion:N,plugins:me}=this.editor,pe=me.get(FileRepository),Le=me.get(ImageUtils);N.for("dataDowncast").add(Ye=>{Ye.on(`attribute:uploadId:${t}`,(nt,ot,ft)=>{if(!ft.consumable.test(ot.item,nt.name))return;const mt=pe.loaders.get(ot.attributeNewValue);if(!mt||!mt.data)return null;const bt=ft.mapper.toViewElement(ot.item),yt=Le.findViewImgElement(bt);yt&&(ft.consumable.consume(ot.item,nt.name),ft.writer.setAttribute("data-ck-upload-id",mt.id,yt))})})}}function isHtmlIncluded(de){return Array.from(de.types).includes("text/html")&&de.getData("text/html")!==""}function getImagesFromChangeItem(de,u){const t=de.plugins.get("ImageUtils");return Array.from(de.model.createRangeOn(u)).filter(N=>t.isImage(N.item)).map(N=>N.item)}class ImageUpload extends Plugin{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUploadEditing,ImageUploadUI,ImageUploadProgress]}}class ImageInsertUrlView extends View{constructor(t){super(t);xt(this,"urlInputView");xt(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new KeystrokeHandler,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),submitHandler({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const t=this.locale,N=t.t,me=new LabeledFieldView(t,createLabeledInputText);return me.bind("label").to(this,"isImageSelected",pe=>N(pe?"Update image URL":"Insert image via URL")),me.bind("isEnabled").to(this),me.fieldView.inputMode="url",me.fieldView.placeholder="https://example.com/image.png",me.fieldView.bind("value").to(this,"imageURLInputValue",pe=>pe||""),me.fieldView.on("input",()=>{this.imageURLInputValue=me.fieldView.element.value.trim()}),me}focus(){this.urlInputView.focus()}}class ImageInsertViaUrlUI extends Plugin{constructor(){super(...arguments);xt(this,"_imageInsertUI");xt(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertUI,Dialog]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createInsertUrlButton(t){const N=new t(this.editor.locale);return N.icon=icons.imageUrl,N.on("execute",()=>{this._showModal()}),N}_createToolbarButton(){const t=this.editor.locale.t,N=this._createInsertUrlButton(ButtonView);return N.tooltip=!0,N.bind("label").to(this._imageInsertUI,"isImageSelected",me=>t(me?"Update image URL":"Insert image via URL")),N}_createDropdownButton(){const t=this.editor.locale.t,N=this._createInsertUrlButton(ButtonView);return N.withText=!0,N.bind("label").to(this._imageInsertUI,"isImageSelected",me=>t(me?"Update image URL":"Insert via URL")),N}_createMenuBarButton(t){const N=this.editor.locale.t,me=this._createInsertUrlButton(MenuBarMenuListItemButtonView);switch(me.withText=!0,t){case"standalone":me.label=N("Image via URL");break;case"insertOnly":me.label=N("Image");break;case"insertNested":me.label=N("Via URL");break}return me}_createInsertUrlView(){const t=this.editor,N=t.locale,me=t.commands.get("replaceImageSource"),pe=t.commands.get("insertImage"),Le=new ImageInsertUrlView(N);return Le.bind("isImageSelected").to(this._imageInsertUI),Le.bind("isEnabled").toMany([pe,me],"isEnabled",(...Ye)=>Ye.some(nt=>nt)),Le}_showModal(){const t=this.editor,me=t.locale.t,pe=t.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const Le=t.commands.get("replaceImageSource");this._formView.imageURLInputValue=Le.value||"",pe.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?me("Update image URL"):me("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:me("Cancel"),withText:!0,onExecute:()=>pe.hide()},{label:me("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class ImageInsertViaUrl extends Plugin{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertViaUrlUI,ImageInsertUI]}}class ImageInsert extends Plugin{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUpload,ImageInsertViaUrl,ImageInsertUI]}}class ResizeImageCommand extends Command{refresh(){const u=this.editor,N=u.plugins.get("ImageUtils").getClosestSelectedImageElement(u.model.document.selection);this.isEnabled=!!N,!N||!N.hasAttribute("resizedWidth")?this.value=null:this.value={width:N.getAttribute("resizedWidth"),height:null}}execute(u){const t=this.editor,N=t.model,me=t.plugins.get("ImageUtils"),pe=me.getClosestSelectedImageElement(N.document.selection);this.value={width:u.width,height:null},pe&&N.change(Le=>{Le.setAttribute("resizedWidth",u.width,pe),Le.removeAttribute("resizedHeight",pe),me.setImageNaturalSizeAttributes(pe)})}}class ImageResizeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const u=this.editor,t=new ResizeImageCommand(u);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),u.commands.add("resizeImage",t),u.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(u){const t=this.editor,N=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(me=>me.on(`attribute:resizedWidth:${u}`,(pe,Le,Ye)=>{if(!Ye.consumable.consume(Le.item,pe.name))return;const nt=Ye.writer,ot=Ye.mapper.toViewElement(Le.item);Le.attributeNewValue!==null?(nt.setStyle("width",Le.attributeNewValue,ot),nt.addClass("image_resized",ot)):(nt.removeStyle("width",ot),nt.removeClass("image_resized",ot))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:u,key:"resizedHeight"},view:me=>({key:"style",value:{height:me}})}),t.conversion.for("editingDowncast").add(me=>me.on(`attribute:resizedHeight:${u}`,(pe,Le,Ye)=>{if(!Ye.consumable.consume(Le.item,pe.name))return;const nt=Ye.writer,ot=Ye.mapper.toViewElement(Le.item),ft=u==="imageInline"?N.findViewImgElement(ot):ot;Le.attributeNewValue!==null?nt.setStyle("height",Le.attributeNewValue,ft):nt.removeStyle("height",ft)})),t.conversion.for("upcast").attributeToAttribute({view:{name:u==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:me=>widthAndHeightStylesAreBothSet(me)?null:me.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:u==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:me=>widthAndHeightStylesAreBothSet(me)?null:me.getStyle("height")}})}}const RESIZE_ICONS={small:icons.objectSizeSmall,medium:icons.objectSizeMedium,large:icons.objectSizeLarge,custom:icons.objectSizeCustom,original:icons.objectSizeFull};class ImageResizeButtons extends Plugin{constructor(t){super(t);xt(this,"_resizeUnit");this._resizeUnit=t.config.get("image.resizeUnit")}static get requires(){return[ImageResizeEditing]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.config.get("image.resizeOptions"),me=t.commands.get("resizeImage");this.bind("isEnabled").to(me);for(const pe of N)this._registerImageResizeButton(pe);this._registerImageResizeDropdown(N)}_registerImageResizeButton(t){const N=this.editor,{name:me,value:pe,icon:Le}=t;N.ui.componentFactory.add(me,Ye=>{const nt=new ButtonView(Ye),ot=N.commands.get("resizeImage"),ft=this._getOptionLabelValue(t,!0);if(!RESIZE_ICONS[Le])throw new CKEditorError("imageresizebuttons-missing-icon",N,t);if(nt.set({label:ft,icon:RESIZE_ICONS[Le],tooltip:ft,isToggleable:!0}),nt.bind("isEnabled").to(this),N.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(t)){const mt=N.plugins.get("ImageCustomResizeUI");this.listenTo(nt,"execute",()=>{mt._showForm(this._resizeUnit)})}else{const mt=pe?pe+this._resizeUnit:null;nt.bind("isOn").to(ot,"value",getIsOnButtonCallback(mt)),this.listenTo(nt,"execute",()=>{N.execute("resizeImage",{width:mt})})}return nt})}_registerImageResizeDropdown(t){const N=this.editor,me=N.t,pe=t.find(Ye=>!Ye.value),Le=Ye=>{const nt=N.commands.get("resizeImage"),ot=createDropdown(Ye,DropdownButtonView),ft=ot.buttonView,mt=me("Resize image");return ft.set({tooltip:mt,commandValue:pe.value,icon:RESIZE_ICONS.medium,isToggleable:!0,label:this._getOptionLabelValue(pe),withText:!0,class:"ck-resize-image-button",ariaLabel:mt,ariaLabelledBy:void 0}),ft.bind("label").to(nt,"value",bt=>bt&&bt.width?bt.width:this._getOptionLabelValue(pe)),ot.bind("isEnabled").to(this),addListToDropdown(ot,()=>this._getResizeDropdownListItemDefinitions(t,nt),{ariaLabel:me("Image resize list"),role:"menu"}),this.listenTo(ot,"execute",bt=>{"onClick"in bt.source?bt.source.onClick():(N.execute(bt.source.commandName,{width:bt.source.commandValue}),N.editing.view.focus())}),ot};N.ui.componentFactory.add("resizeImage",Le),N.ui.componentFactory.add("imageResize",Le)}_getOptionLabelValue(t,N=!1){const me=this.editor.t;return t.label?t.label:N?isCustomImageResizeOption(t)?me("Custom image size"):t.value?me("Resize image to %0",t.value+this._resizeUnit):me("Resize image to the original size"):isCustomImageResizeOption(t)?me("Custom"):t.value?t.value+this._resizeUnit:me("Original")}_getResizeDropdownListItemDefinitions(t,N){const{editor:me}=this,pe=new Collection,Le=t.map(Ye=>isCustomImageResizeOption(Ye)?{...Ye,valueWithUnits:"custom"}:Ye.value?{...Ye,valueWithUnits:`${Ye.value}${this._resizeUnit}`}:{...Ye,valueWithUnits:null});for(const Ye of Le){let nt=null;if(me.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(Ye)){const ot=me.plugins.get("ImageCustomResizeUI");nt={type:"button",model:new Model({label:this._getOptionLabelValue(Ye),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{ot._showForm(this._resizeUnit)}})};const ft=map$1(Le,"valueWithUnits");nt.model.bind("isOn").to(N,"value",getIsOnCustomButtonCallback(ft))}else nt={type:"button",model:new Model({commandName:"resizeImage",commandValue:Ye.valueWithUnits,label:this._getOptionLabelValue(Ye),role:"menuitemradio",withText:!0,icon:null})},nt.model.bind("isOn").to(N,"value",getIsOnButtonCallback(Ye.valueWithUnits));nt.model.bind("isEnabled").to(N,"isEnabled"),pe.add(nt)}return pe}}function isCustomImageResizeOption(de){return de.value==="custom"}function getIsOnButtonCallback(de){return u=>{const t=u;return de===null&&t===de?!0:t!==null&&t.width===de}}function getIsOnCustomButtonCallback(de){return u=>!de.some(t=>getIsOnButtonCallback(t)(u))}const RESIZABLE_IMAGES_CSS_SELECTOR="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",RESIZED_IMAGE_CLASS="image_resized";class ImageResizeHandles extends Plugin{static get requires(){return[WidgetResize,ImageUtils]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(u),this._setupResizerCreator()}_setupResizerCreator(){const u=this.editor,t=u.editing.view,N=u.plugins.get("ImageUtils");t.addObserver(ImageLoadObserver),this.listenTo(t.document,"imageLoaded",(me,pe)=>{if(!pe.target.matches(RESIZABLE_IMAGES_CSS_SELECTOR))return;const Le=u.editing.view.domConverter,Ye=Le.domToView(pe.target),nt=N.getImageWidgetFromImageView(Ye);let ot=this.editor.plugins.get(WidgetResize).getResizerByViewElement(nt);if(ot){ot.redraw();return}const ft=u.editing.mapper,mt=ft.toModelElement(nt);ot=u.plugins.get(WidgetResize).attachTo({unit:u.config.get("image.resizeUnit"),modelElement:mt,viewElement:nt,editor:u,getHandleHost(bt){return bt.querySelector("img")},getResizeHost(){return Le.mapViewToDom(ft.toViewElement(mt))},isCentered(){return mt.getAttribute("imageStyle")=="alignCenter"},onCommit(bt){t.change(yt=>{yt.removeClass(RESIZED_IMAGE_CLASS,nt)}),u.execute("resizeImage",{width:bt})}}),ot.on("updateSize",()=>{nt.hasClass(RESIZED_IMAGE_CLASS)||t.change(yt=>{yt.addClass(RESIZED_IMAGE_CLASS,nt)});const bt=mt.name==="imageInline"?Ye:nt;bt.getStyle("height")&&t.change(yt=>{yt.removeStyle("height",bt)})}),ot.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tryParseDimensionWithUnit(de){if(!de)return null;const[,u,t]=de.trim().match(/([.,\d]+)(%|px)$/)||[],N=Number.parseFloat(u);return Number.isNaN(N)?null:{value:N,unit:t}}function tryCastDimensionsToUnit(de,u,t){return t==="px"?{value:u.value,unit:"px"}:{value:u.value/de*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedImageEditorNodes(de){const{editing:u}=de,N=de.plugins.get("ImageUtils").getClosestSelectedImageElement(de.model.document.selection);if(!N)return null;const me=u.mapper.toViewElement(N),pe=u.view.domConverter.mapViewToDom(me);return{model:N,view:me,dom:pe}}function getSelectedImageWidthInUnits(de,u){const t=getSelectedImageEditorNodes(de);if(!t)return null;const N=tryParseDimensionWithUnit(t.model.getAttribute("resizedWidth")||null);if(!N)return null;if(N.unit===u)return N;const me=calculateResizeHostAncestorWidth(t.dom),pe={value:new Rect(t.dom).width};return tryCastDimensionsToUnit(me,pe,u)}class ImageCustomResizeFormView extends View{constructor(t,N,me){super(t);xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"unit");xt(this,"labeledInput");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"_focusables");xt(this,"_focusCycler");xt(this,"_validators");const pe=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.unit=N,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(pe("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(pe("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._validators=me,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(t,N,me,pe){const Le=new ButtonView(this.locale);return Le.set({label:t,icon:N,tooltip:!0}),Le.extendTemplate({attributes:{class:me}}),pe&&Le.delegate("execute").to(this,pe),Le}_createLabeledInputView(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputNumber);return N.label=t("Resize image (in %0)",this.unit),N.fieldView.set({step:.1}),N}isValid(){this.resetFormStatus();for(const t of this._validators){const N=t(this);if(N)return this.labeledInput.errorText=N,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:t}=this.labeledInput.fieldView;return t?t.value:null}get parsedSize(){const{rawSize:t}=this;if(t===null)return null;const N=Number.parseFloat(t);return Number.isNaN(N)?null:N}get sizeWithUnits(){const{parsedSize:t,unit:N}=this;return t===null?null:`${t}${N}`}}function getSelectedImagePossibleResizeRange(de,u){const t=getSelectedImageEditorNodes(de);if(!t)return null;const N=calculateResizeHostAncestorWidth(t.dom),me=tryParseDimensionWithUnit(window.getComputedStyle(t.dom).minWidth)||{value:1},pe=Math.max(.1,tryCastDimensionsToUnit(N,me,u).value);return{unit:u,lower:pe,upper:u==="px"?N:100}}class ImageCustomResizeUI extends Plugin{constructor(){super(...arguments);xt(this,"_balloon");xt(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(t){const N=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(ImageCustomResizeFormView))(N.locale,t,getFormValidators$2(N)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(N.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{N.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(me,pe)=>{this._hideForm(!0),pe()}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(t){if(this._isVisible)return;this._form||this._createForm(t);const N=this.editor,me=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(N)});const pe=getSelectedImageWidthInUnits(N,t),Le=pe?pe.value.toFixed(1):"",Ye=getSelectedImagePossibleResizeRange(N,t);me.fieldView.value=me.fieldView.element.value=Le,Ye&&Object.assign(me.fieldView,{min:Ye.lower.toFixed(1),max:Math.ceil(Ye.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function getFormValidators$2(de){const u=de.t;return[t=>{if(t.rawSize.trim()==="")return u("The value must not be empty.");if(t.parsedSize===null)return u("The value should be a plain number.")}]}class ImageResize extends Plugin{static get requires(){return[ImageResizeEditing,ImageResizeHandles,ImageCustomResizeUI,ImageResizeButtons]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class ImageStyleCommand extends Command{constructor(t,N){super(t);xt(this,"_defaultStyles");xt(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(N.map(me=>{if(me.isDefault)for(const pe of me.modelElements)this._defaultStyles[pe]=me.name;return[me.name,me]}))}refresh(){const me=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!me,this.isEnabled?me.hasAttribute("imageStyle")?this.value=me.getAttribute("imageStyle"):this.value=this._defaultStyles[me.name]:this.value=!1}execute(t={}){const N=this.editor,me=N.model,pe=N.plugins.get("ImageUtils");me.change(Le=>{const Ye=t.value,{setImageSizes:nt=!0}=t;let ot=pe.getClosestSelectedImageElement(me.document.selection);Ye&&this.shouldConvertImageType(Ye,ot)&&(this.editor.execute(pe.isBlockImage(ot)?"imageTypeInline":"imageTypeBlock",{setImageSizes:nt}),ot=pe.getClosestSelectedImageElement(me.document.selection)),!Ye||this._styles.get(Ye).isDefault?Le.removeAttribute("imageStyle",ot):Le.setAttribute("imageStyle",Ye,ot),nt&&pe.setImageNaturalSizeAttributes(ot)})}shouldConvertImageType(t,N){return!this._styles.get(t).modelElements.includes(N.name)}}const DEFAULT_OPTIONS={get inline(){return{name:"inline",title:"In line",icon:icons.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:icons.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:icons.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:icons.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:icons.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:icons.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},DEFAULT_ICONS={full:icons.objectFullWidth,left:icons.objectBlockLeft,right:icons.objectBlockRight,center:icons.objectCenter,inlineLeft:icons.objectLeft,inlineRight:icons.objectRight,inline:icons.objectInline},DEFAULT_DROPDOWN_DEFINITIONS=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function normalizeStyles(de){return(de.configuredStyles.options||[]).map(N=>normalizeDefinition(N)).filter(N=>isValidOption(N,de))}function getDefaultStylesConfiguration(de,u){return de&&u?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:de?{options:["block","side"]}:u?{options:["inline","alignLeft","alignRight"]}:{}}function getDefaultDropdownDefinitions(de){return de.has("ImageBlockEditing")&&de.has("ImageInlineEditing")?[...DEFAULT_DROPDOWN_DEFINITIONS]:[]}function normalizeDefinition(de){return typeof de=="string"?DEFAULT_OPTIONS[de]?de={...DEFAULT_OPTIONS[de]}:de={name:de}:de=extendStyle(DEFAULT_OPTIONS[de.name],de),typeof de.icon=="string"&&(de.icon=DEFAULT_ICONS[de.icon]||de.icon),de}function isValidOption(de,{isBlockPluginLoaded:u,isInlinePluginLoaded:t}){const{modelElements:N,name:me}=de;if(!N||!N.length||!me)return warnInvalidStyle({style:de}),!1;{const pe=[u?"imageBlock":null,t?"imageInline":null];if(!N.some(Le=>pe.includes(Le)))return logWarning("image-style-missing-dependency",{style:de,missingPlugins:N.map(Le=>Le==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function extendStyle(de,u){const t={...u};for(const N in de)Object.prototype.hasOwnProperty.call(u,N)||(t[N]=de[N]);return t}function warnInvalidStyle(de){logWarning("image-style-configuration-definition-invalid",de)}var utils={normalizeStyles,getDefaultStylesConfiguration,getDefaultDropdownDefinitions,warnInvalidStyle,DEFAULT_OPTIONS,DEFAULT_ICONS,DEFAULT_DROPDOWN_DEFINITIONS};function modelToViewStyleAttribute(de){return(u,t,N)=>{if(!N.consumable.consume(t.item,u.name))return;const me=getStyleDefinitionByName(t.attributeNewValue,de),pe=getStyleDefinitionByName(t.attributeOldValue,de),Le=N.mapper.toViewElement(t.item),Ye=N.writer;pe&&Ye.removeClass(pe.className,Le),me&&Ye.addClass(me.className,Le)}}function viewToModelStyleAttribute(de){const u={imageInline:de.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:de.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,N,me)=>{if(!N.modelRange)return;const pe=N.viewItem,Le=first(N.modelRange.getItems());if(Le&&me.schema.checkAttribute(Le,"imageStyle"))for(const Ye of u[Le.name])me.consumable.consume(pe,{classes:Ye.className})&&me.writer.setAttribute("imageStyle",Ye.name,Le)}}function getStyleDefinitionByName(de,u){for(const t of u)if(t.name===de)return t}class ImageStyleEditing extends Plugin{constructor(){super(...arguments);xt(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const{normalizeStyles:t,getDefaultStylesConfiguration:N}=utils,me=this.editor,pe=me.plugins.has("ImageBlockEditing"),Le=me.plugins.has("ImageInlineEditing");me.config.define("image.styles",N(pe,Le)),this.normalizedStyles=t({configuredStyles:me.config.get("image.styles"),isBlockPluginLoaded:pe,isInlinePluginLoaded:Le}),this._setupConversion(pe,Le),this._setupPostFixer(),me.commands.add("imageStyle",new ImageStyleCommand(me,this.normalizedStyles))}_setupConversion(t,N){const me=this.editor,pe=me.model.schema,Le=modelToViewStyleAttribute(this.normalizedStyles),Ye=viewToModelStyleAttribute(this.normalizedStyles);me.editing.downcastDispatcher.on("attribute:imageStyle",Le),me.data.downcastDispatcher.on("attribute:imageStyle",Le),t&&(pe.extend("imageBlock",{allowAttributes:"imageStyle"}),me.data.upcastDispatcher.on("element:figure",Ye,{priority:"low"})),N&&(pe.extend("imageInline",{allowAttributes:"imageStyle"}),me.data.upcastDispatcher.on("element:img",Ye,{priority:"low"}))}_setupPostFixer(){const t=this.editor,N=t.model.document,me=t.plugins.get(ImageUtils),pe=new Map(this.normalizedStyles.map(Le=>[Le.name,Le]));N.registerPostFixer(Le=>{let Ye=!1;for(const nt of N.differ.getChanges())if(nt.type=="insert"||nt.type=="attribute"&&nt.attributeKey=="imageStyle"){let ot=nt.type=="insert"?nt.position.nodeAfter:nt.range.start.nodeAfter;if(ot&&ot.is("element","paragraph")&&ot.childCount>0&&(ot=ot.getChild(0)),!me.isImage(ot))continue;const ft=ot.getAttribute("imageStyle");if(!ft)continue;const mt=pe.get(ft);(!mt||!mt.modelElements.includes(ot.name))&&(Le.removeAttribute("imageStyle",ot),Ye=!0)}return Ye})}}class ImageStyleUI extends Plugin{static get requires(){return[ImageStyleEditing]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const u=this.editor.t;return{"Wrap text":u("Wrap text"),"Break text":u("Break text"),"In line":u("In line"),"Full size image":u("Full size image"),"Side image":u("Side image"),"Left aligned image":u("Left aligned image"),"Centered image":u("Centered image"),"Right aligned image":u("Right aligned image")}}init(){const u=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],N=u.get("ImageStyleEditing"),me=translateStyles(N.normalizedStyles,this.localizedDefaultStylesTitles);for(const Le of me)this._createButton(Le);const pe=translateStyles([...t.filter(isObject$2),...utils.getDefaultDropdownDefinitions(u)],this.localizedDefaultStylesTitles);for(const Le of pe)this._createDropdown(Le,me)}_createDropdown(u,t){const N=this.editor.ui.componentFactory;N.add(u.name,me=>{let pe;const{defaultItem:Le,items:Ye,title:nt}=u,ot=Ye.filter(yt=>t.find(({name:_t})=>getUIComponentName(_t)===yt)).map(yt=>{const _t=N.create(yt);return yt===Le&&(pe=_t),_t});Ye.length!==ot.length&&utils.warnInvalidStyle({dropdown:u});const ft=createDropdown(me,SplitButtonView),mt=ft.buttonView,bt=mt.arrowView;return addToolbarToDropdown(ft,ot,{enableActiveItemFocusOnDropdownOpen:!0}),mt.set({label:getDropdownButtonTitle(nt,pe.label),class:null,tooltip:!0}),bt.unbind("label"),bt.set({label:nt}),mt.bind("icon").toMany(ot,"isOn",(...yt)=>{const _t=yt.findIndex(identity);return _t<0?pe.icon:ot[_t].icon}),mt.bind("label").toMany(ot,"isOn",(...yt)=>{const _t=yt.findIndex(identity);return getDropdownButtonTitle(nt,_t<0?pe.label:ot[_t].label)}),mt.bind("isOn").toMany(ot,"isOn",(...yt)=>yt.some(identity)),mt.bind("class").toMany(ot,"isOn",(...yt)=>yt.some(identity)?"ck-splitbutton_flatten":void 0),mt.on("execute",()=>{ot.some(({isOn:yt})=>yt)?ft.isOpen=!ft.isOpen:pe.fire("execute")}),ft.bind("isEnabled").toMany(ot,"isEnabled",(...yt)=>yt.some(identity)),this.listenTo(ft,"execute",()=>{this.editor.editing.view.focus()}),ft})}_createButton(u){const t=u.name;this.editor.ui.componentFactory.add(getUIComponentName(t),N=>{const me=this.editor.commands.get("imageStyle"),pe=new ButtonView(N);return pe.set({label:u.title,icon:u.icon,tooltip:!0,isToggleable:!0}),pe.bind("isEnabled").to(me,"isEnabled"),pe.bind("isOn").to(me,"value",Le=>Le===t),pe.on("execute",this._executeCommand.bind(this,t)),pe})}_executeCommand(u){this.editor.execute("imageStyle",{value:u}),this.editor.editing.view.focus()}}function translateStyles(de,u){for(const t of de)u[t.title]&&(t.title=u[t.title]);return de}function getUIComponentName(de){return`imageStyle:${de}`}function getDropdownButtonTitle(de,u){return(de?de+": ":"")+u}class ImageStyle extends Plugin{static get requires(){return[ImageStyleEditing,ImageStyleUI]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ImageToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository,ImageUtils]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t,N=u.plugins.get(WidgetToolbarRepository),me=u.plugins.get("ImageUtils");N.register("image",{ariaLabel:t("Image toolbar"),items:normalizeDeclarativeConfig(u.config.get("image.toolbar")||[]),getRelatedElement:pe=>me.getClosestSelectedImageWidget(pe)})}}function normalizeDeclarativeConfig(de){return de.map(u=>isObject$2(u)?u.name:u)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentEditing extends Plugin{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.commands.add("indent",new MultiCommand(u)),u.commands.add("outdent",new MultiCommand(u))}}class IndentUI extends Plugin{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale,N=u.t,me=t.uiLanguageDirection=="ltr"?icons.indent:icons.outdent,pe=t.uiLanguageDirection=="ltr"?icons.outdent:icons.indent;this._defineButton("indent",N("Increase indent"),me),this._defineButton("outdent",N("Decrease indent"),pe)}_defineButton(u,t,N){const me=this.editor;me.ui.componentFactory.add(u,()=>{const pe=this._createButton(ButtonView,u,t,N);return pe.set({tooltip:!0}),pe}),me.ui.componentFactory.add("menuBar:"+u,()=>this._createButton(MenuBarMenuListItemButtonView,u,t,N))}_createButton(u,t,N,me){const pe=this.editor,Le=pe.commands.get(t),Ye=new u(pe.locale);return Ye.set({label:N,icon:me}),Ye.bind("isEnabled").to(Le,"isEnabled"),this.listenTo(Ye,"execute",()=>{pe.execute(t),pe.editing.view.focus()}),Ye}}class Indent extends Plugin{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[IndentEditing,IndentUI]}}class IndentBlockCommand extends Command{constructor(t,N){super(t);xt(this,"_indentBehavior");this._indentBehavior=N}refresh(){const N=this.editor.model,me=first(N.document.selection.getSelectedBlocks());if(!me||!this._isIndentationChangeAllowed(me)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(me.getAttribute("blockIndent"))}execute(){const t=this.editor.model,N=this._getBlocksToChange();t.change(me=>{for(const pe of N){const Le=pe.getAttribute("blockIndent"),Ye=this._indentBehavior.getNextIndent(Le);Ye?me.setAttribute("blockIndent",Ye,pe):me.removeAttribute("blockIndent",pe)}})}_getBlocksToChange(){const N=this.editor.model.document.selection;return Array.from(N.getSelectedBlocks()).filter(pe=>this._isIndentationChangeAllowed(pe))}_isIndentationChangeAllowed(t){const N=this.editor;return N.model.schema.checkAttribute(t,"blockIndent")?!N.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!N.plugins.get("ListUtils").isListItemBlock(t):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingOffset{constructor(u){xt(this,"isForward");xt(this,"offset");xt(this,"unit");this.isForward=u.direction==="forward",this.offset=u.offset,this.unit=u.unit}checkEnabled(u){const t=parseFloat(u||"0");return this.isForward||t>0}getNextIndent(u){const t=parseFloat(u||"0");if(!(!u||u.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const me=this.isForward?this.offset:-this.offset,pe=t+me;return pe>0?pe+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingClasses{constructor(u){xt(this,"isForward");xt(this,"classes");this.isForward=u.direction==="forward",this.classes=u.classes}checkEnabled(u){const t=this.classes.indexOf(u);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(u){const t=this.classes.indexOf(u),N=this.isForward?1:-1;return this.classes[t+N]}}const DEFAULT_ELEMENTS=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class IndentBlock extends Plugin{constructor(u){super(u),u.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),u.commands.add("indentBlock",new IndentBlockCommand(u,new IndentUsingClasses({direction:"forward",classes:t.classes}))),u.commands.add("outdentBlock",new IndentBlockCommand(u,new IndentUsingClasses({direction:"backward",classes:t.classes})))):(u.data.addStyleProcessorRules(addMarginRules),this._setupConversionUsingOffset(),u.commands.add("indentBlock",new IndentBlockCommand(u,new IndentUsingOffset({direction:"forward",offset:t.offset,unit:t.unit}))),u.commands.add("outdentBlock",new IndentBlockCommand(u,new IndentUsingOffset({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const u=this.editor,t=u.model.schema,N=u.commands.get("indent"),me=u.commands.get("outdent"),pe=u.config.get("heading.options");(pe&&pe.map(nt=>nt.model)||DEFAULT_ELEMENTS).forEach(nt=>{t.isRegistered(nt)&&t.extend(nt,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),N.registerChildCommand(u.commands.get("indentBlock")),me.registerChildCommand(u.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const u=this.editor.conversion,N=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";u.for("upcast").attributeToAttribute({view:{styles:{[N]:/[\s\S]+/}},model:{key:"blockIndent",value:me=>{if(!me.is("element","li"))return me.getStyle(N)}}}),u.for("downcast").attributeToAttribute({model:"blockIndent",view:me=>({key:"style",value:{[N]:me}})})}_setupConversionUsingClasses(u){const t={model:{key:"blockIndent",values:[]},view:{}};for(const N of u)t.model.values.push(N),t.view[N]={key:"class",value:[N]};this.editor.conversion.attributeToAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AutomaticDecorators{constructor(){xt(this,"_definitions",new Set)}get length(){return this._definitions.size}add(u){Array.isArray(u)?u.forEach(t=>this._definitions.add(t)):this._definitions.add(u)}getDispatcher(){return u=>{u.on("attribute:linkHref",(t,N,me)=>{if(!me.consumable.test(N.item,"attribute:linkHref")||!(N.item.is("selection")||me.schema.isInline(N.item)))return;const pe=me.writer,Le=pe.document.selection;for(const Ye of this._definitions){const nt=pe.createAttributeElement("a",Ye.attributes,{priority:5});Ye.classes&&pe.addClass(Ye.classes,nt);for(const ot in Ye.styles)pe.setStyle(ot,Ye.styles[ot],nt);pe.setCustomProperty("link",!0,nt),Ye.callback(N.attributeNewValue)?N.item.is("selection")?pe.wrap(Le.getFirstRange(),nt):pe.wrap(me.mapper.toViewRange(N.range),nt):pe.unwrap(me.mapper.toViewRange(N.range),nt)}},{priority:"high"})}}getDispatcherForLinkedImage(){return u=>{u.on("attribute:linkHref:imageBlock",(t,N,{writer:me,mapper:pe})=>{const Le=pe.toViewElement(N.item),Ye=Array.from(Le.getChildren()).find(nt=>nt.is("element","a"));if(Ye)for(const nt of this._definitions){const ot=toMap(nt.attributes);if(nt.callback(N.attributeNewValue)){for(const[ft,mt]of ot)ft==="class"?me.addClass(mt,Ye):me.setAttribute(ft,mt,Ye);nt.classes&&me.addClass(nt.classes,Ye);for(const ft in nt.styles)me.setStyle(ft,nt.styles[ft],Ye)}else{for(const[ft,mt]of ot)ft==="class"?me.removeClass(mt,Ye):me.removeAttribute(ft,Ye);nt.classes&&me.removeClass(nt.classes,Ye);for(const ft in nt.styles)me.removeStyle(ft,Ye)}}})}}}const ATTRIBUTE_WHITESPACES=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,SAFE_URL_TEMPLATE="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",EMAIL_REG_EXP=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,PROTOCOL_REG_EXP=/^((\w+:(\/{2,})?)|(\W))/i,DEFAULT_LINK_PROTOCOLS=["https?","ftps?","mailto"],LINK_KEYSTROKE="Ctrl+K";function isLinkElement(de){return de.is("attributeElement")&&!!de.getCustomProperty("link")}function createLinkElement(de,{writer:u}){const t=u.createAttributeElement("a",{href:de},{priority:5});return u.setCustomProperty("link",!0,t),t}function ensureSafeUrl(de,u=DEFAULT_LINK_PROTOCOLS){const t=String(de),N=u.join("|"),me=new RegExp(`${SAFE_URL_TEMPLATE.replace("<protocols>",N)}`,"i");return isSafeUrl(t,me)?t:"#"}function isSafeUrl(de,u){return!!de.replace(ATTRIBUTE_WHITESPACES,"").match(u)}function getLocalizedDecorators(de,u){const t={"Open in a new tab":de("Open in a new tab"),Downloadable:de("Downloadable")};return u.forEach(N=>("label"in N&&t[N.label]&&(N.label=t[N.label]),N)),u}function normalizeDecorators(de){const u=[];if(de)for(const[t,N]of Object.entries(de)){const me=Object.assign({},N,{id:`link${upperFirst(t)}`});u.push(me)}return u}function isLinkableElement(de,u){return de?u.checkAttribute(de.name,"linkHref"):!1}function isEmail(de){return EMAIL_REG_EXP.test(de)}function addLinkProtocolIfApplicable(de,u){const t=isEmail(de)?"mailto:":u,N=!!t&&!linkHasProtocol(de);return de&&N?t+de:de}function linkHasProtocol(de){return PROTOCOL_REG_EXP.test(de)}function openLink(de){window.open(de,"_blank","noopener")}function createBookmarkCallbacks(de){const u=de.plugins.has("BookmarkEditing")?de.plugins.get("BookmarkEditing"):null;function t(me){return!!me&&me.startsWith("#")&&!!u&&!!u.getElementForBookmarkId(me.slice(1))}function N(me){const pe=me.slice(1),Le=u.getElementForBookmarkId(pe);de.model.change(Ye=>{Ye.setSelection(Le,"on")}),de.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:t,scrollToTarget:N}}class LinkCommand extends Command{constructor(){super(...arguments);xt(this,"manualDecorators",new Collection);xt(this,"automaticDecorators",new AutomaticDecorators)}restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,N=t.document.selection,me=N.getSelectedElement()||first(N.getSelectedBlocks());isLinkableElement(me,t.schema)?(this.value=me.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(me,"linkHref")):(this.value=N.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(N,"linkHref"));for(const pe of this.manualDecorators)pe.value=this._getDecoratorStateFromModel(pe.id)}execute(t,N={}){const me=this.editor.model,pe=me.document.selection,Le=[],Ye=[];for(const nt in N)N[nt]?Le.push(nt):Ye.push(nt);me.change(nt=>{if(pe.isCollapsed){const ot=pe.getFirstPosition();if(pe.hasAttribute("linkHref")){const ft=extractTextFromSelection(pe);let mt=findAttributeRange(ot,"linkHref",pe.getAttribute("linkHref"),me);pe.getAttribute("linkHref")===ft&&(mt=this._updateLinkContent(me,nt,mt,t)),nt.setAttribute("linkHref",t,mt),Le.forEach(bt=>{nt.setAttribute(bt,!0,mt)}),Ye.forEach(bt=>{nt.removeAttribute(bt,mt)}),nt.setSelection(nt.createPositionAfter(mt.end.nodeBefore))}else if(t!==""){const ft=toMap(pe.getAttributes());ft.set("linkHref",t),Le.forEach(bt=>{ft.set(bt,!0)});const{end:mt}=me.insertContent(nt.createText(t,ft),ot);nt.setSelection(mt)}["linkHref",...Le,...Ye].forEach(ft=>{nt.removeSelectionAttribute(ft)})}else{const ot=me.schema.getValidRanges(pe.getRanges(),"linkHref"),ft=[];for(const bt of pe.getSelectedBlocks())me.schema.checkAttribute(bt,"linkHref")&&ft.push(nt.createRangeOn(bt));const mt=ft.slice();for(const bt of ot)this._isRangeToUpdate(bt,ft)&&mt.push(bt);for(const bt of mt){let yt=bt;if(mt.length===1){const _t=extractTextFromSelection(pe);pe.getAttribute("linkHref")===_t&&(yt=this._updateLinkContent(me,nt,bt,t),nt.setSelection(nt.createSelection(yt)))}nt.setAttribute("linkHref",t,yt),Le.forEach(_t=>{nt.setAttribute(_t,!0,yt)}),Ye.forEach(_t=>{nt.removeAttribute(_t,yt)})}}})}_getDecoratorStateFromModel(t){const N=this.editor.model,me=N.document.selection,pe=me.getSelectedElement();return isLinkableElement(pe,N.schema)?pe.getAttribute(t):me.getAttribute(t)}_isRangeToUpdate(t,N){for(const me of N)if(me.containsRange(t))return!1;return!0}_updateLinkContent(t,N,me,pe){const Le=N.createText(pe,{linkHref:pe});return t.insertContent(Le,me)}}function extractTextFromSelection(de){if(de.isCollapsed){const u=de.getFirstPosition();return u.textNode&&u.textNode.data}else{const u=Array.from(de.getFirstRange().getItems());if(u.length>1)return null;const t=u[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}class UnlinkCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,N=t.getSelectedElement();isLinkableElement(N,u.schema)?this.isEnabled=u.schema.checkAttribute(N,"linkHref"):this.isEnabled=u.schema.checkAttributeInSelection(t,"linkHref")}execute(){const u=this.editor,t=this.editor.model,N=t.document.selection,me=u.commands.get("link");t.change(pe=>{const Le=N.isCollapsed?[findAttributeRange(N.getFirstPosition(),"linkHref",N.getAttribute("linkHref"),t)]:t.schema.getValidRanges(N.getRanges(),"linkHref");for(const Ye of Le)if(pe.removeAttribute("linkHref",Ye),me)for(const nt of me.manualDecorators)pe.removeAttribute(nt.id,Ye)})}}class ManualDecorator extends ObservableMixin(){constructor({id:t,label:N,attributes:me,classes:pe,styles:Le,defaultValue:Ye}){super();xt(this,"id");xt(this,"defaultValue");xt(this,"label");xt(this,"attributes");xt(this,"classes");xt(this,"styles");this.id=t,this.set("value",void 0),this.defaultValue=Ye,this.label=N,this.attributes=me,this.classes=pe,this.styles=Le}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const HIGHLIGHT_CLASS="ck-link_selected",DECORATOR_AUTOMATIC="automatic",DECORATOR_MANUAL="manual",EXTERNAL_LINKS_REGEXP=/^(https?:)?\/\//;class LinkEditing extends Plugin{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement,Input,ClipboardPipeline]}constructor(u){super(u),u.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const u=this.editor,t=this.editor.config.get("link.allowedProtocols");u.model.schema.extend("$text",{allowAttributes:"linkHref"}),u.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:createLinkElement}),u.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(pe,Le)=>createLinkElement(ensureSafeUrl(pe,t),Le)}),u.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:pe=>pe.getAttribute("href")}}),u.commands.add("link",new LinkCommand(u)),u.commands.add("unlink",new UnlinkCommand(u));const N=getLocalizedDecorators(u.t,normalizeDecorators(u.config.get("link.decorators")));this._enableAutomaticDecorators(N.filter(pe=>pe.mode===DECORATOR_AUTOMATIC)),this._enableManualDecorators(N.filter(pe=>pe.mode===DECORATOR_MANUAL)),u.plugins.get(TwoStepCaretMovement).registerAttribute("linkHref"),inlineHighlight(u,"linkHref","a",HIGHLIGHT_CLASS),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(u){const t=this.editor,me=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&me.add({id:"linkIsExternal",mode:DECORATOR_AUTOMATIC,callback:pe=>!!pe&&EXTERNAL_LINKS_REGEXP.test(pe),attributes:{target:"_blank",rel:"noopener noreferrer"}}),me.add(u),me.length&&t.conversion.for("downcast").add(me.getDispatcher())}_enableManualDecorators(u){if(!u.length)return;const t=this.editor,me=t.commands.get("link").manualDecorators;u.forEach(pe=>{t.model.schema.extend("$text",{allowAttributes:pe.id});const Le=new ManualDecorator(pe);me.add(Le),t.conversion.for("downcast").attributeToElement({model:Le.id,view:(Ye,{writer:nt,schema:ot},{item:ft})=>{if((ft.is("selection")||ot.isInline(ft))&&Ye){const mt=nt.createAttributeElement("a",Le.attributes,{priority:5});Le.classes&&nt.addClass(Le.classes,mt);for(const bt in Le.styles)nt.setStyle(bt,Le.styles[bt],mt);return nt.setCustomProperty("link",!0,mt),mt}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...Le._createPattern()},model:{key:Le.id}})})}_enableLinkOpen(){const u=this.editor,N=u.editing.view.document,me=createBookmarkCallbacks(u);function pe(Le){me.isScrollableToTarget(Le)?me.scrollToTarget(Le):openLink(Le)}this.listenTo(N,"click",(Le,Ye)=>{if(!(env.isMac?Ye.domEvent.metaKey:Ye.domEvent.ctrlKey))return;let ot=Ye.domTarget;if(ot.tagName.toLowerCase()!="a"&&(ot=ot.closest("a")),!ot)return;const ft=ot.getAttribute("href");ft&&(Le.stop(),Ye.preventDefault(),pe(ft))},{context:"$capture"}),this.listenTo(N,"keydown",(Le,Ye)=>{const ot=u.commands.get("link").value;ot&&Ye.keyCode===keyCodes.enter&&Ye.altKey&&(Le.stop(),pe(ot))})}_enableSelectionAttributesFixer(){const t=this.editor.model,N=t.document.selection;this.listenTo(N,"change:attribute",(me,{attributeKeys:pe})=>{!pe.includes("linkHref")||N.hasAttribute("linkHref")||t.change(Le=>{removeLinkAttributesFromSelection(Le,getLinkAttributesAllowedOnText(t.schema))})})}_enableClipboardIntegration(){const u=this.editor,t=u.model,N=this.editor.config.get("link.defaultProtocol");N&&this.listenTo(u.plugins.get("ClipboardPipeline"),"contentInsertion",(me,pe)=>{t.change(Le=>{const Ye=Le.createRangeIn(pe.content);for(const nt of Ye.getItems())if(nt.hasAttribute("linkHref")){const ot=addLinkProtocolIfApplicable(nt.getAttribute("linkHref"),N);Le.setAttribute("linkHref",ot,nt)}})})}}function removeLinkAttributesFromSelection(de,u){de.removeSelectionAttribute("linkHref");for(const t of u)de.removeSelectionAttribute(t)}function getLinkAttributesAllowedOnText(de){return de.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}class LinkFormView extends View{constructor(t,N,me){super(t);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"urlInputView");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"_manualDecoratorSwitches");xt(this,"children");xt(this,"_validators");xt(this,"_focusables",new ViewCollection);xt(this,"_focusCycler");const pe=t.t;this._validators=me,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(pe("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(pe("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(N),this.children=this._createFormChildren(N.manualDecorators),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const Le=["ck","ck-link-form","ck-responsive-form"];N.manualDecorators.length&&Le.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:Le,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((t,N)=>(t[N.name]=N.isOn,t),{})}render(){super.render(),submitHandler({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(N=>{this._focusables.add(N),this.focusTracker.add(N.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const N=t(this);if(N)return this.urlInputView.errorText=N,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputText);return N.fieldView.inputMode="url",N.label=t("Link URL"),N}_createButton(t,N,me,pe){const Le=new ButtonView(this.locale);return Le.set({label:t,icon:N,tooltip:!0}),Le.extendTemplate({attributes:{class:me}}),pe&&Le.delegate("execute").to(this,pe),Le}_createManualDecoratorSwitches(t){const N=this.createCollection();for(const me of t.manualDecorators){const pe=new SwitchButtonView(this.locale);pe.set({name:me.id,label:me.label,withText:!0}),pe.bind("isOn").toMany([me,t],"value",(Le,Ye)=>Ye===void 0&&Le===void 0?!!me.defaultValue:!!Le),pe.on("execute",()=>{me.set("value",!pe.isOn)}),N.add(pe)}return N}_createFormChildren(t){const N=this.createCollection();if(N.add(this.urlInputView),t.length){const me=new View;me.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(pe=>({tag:"li",children:[pe],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),N.add(me)}return N.add(this.saveButtonView),N.add(this.cancelButtonView),N}get url(){const{element:t}=this.urlInputView.fieldView;return t?t.value.trim():null}}var unlinkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class LinkActionsView extends View{constructor(t,N={},me){super(t);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"previewButtonView");xt(this,"unlinkButtonView");xt(this,"editButtonView");xt(this,"_focusables",new ViewCollection);xt(this,"_focusCycler");xt(this,"_linkConfig");xt(this,"_options");const pe=t.t;this._options=me,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(pe("Unlink"),unlinkIcon,"unlink"),this.editButtonView=this._createButton(pe("Edit link"),icons.pencil,"edit"),this.set("href",void 0),this._linkConfig=N,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(N=>{this._focusables.add(N),this.focusTracker.add(N.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(t,N,me){const pe=new ButtonView(this.locale);return pe.set({label:t,icon:N,tooltip:!0}),pe.delegate("execute").to(this,me),pe}_createPreviewButton(){const t=new ButtonView(this.locale),N=this.bindTemplate,me=this.t;return t.set({withText:!0}),t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:N.to("href",pe=>pe&&ensureSafeUrl(pe,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:N.to(pe=>{this._options&&this._options.isScrollableToTarget(this.href)?(pe.preventDefault(),this._options.scrollToTarget(this.href)):openLink(this.href)})}}),t.bind("tooltip").to(this,"href",pe=>this._options&&this._options.isScrollableToTarget(pe)?me("Scroll to target"):me("Open link in new tab")),t.bind("label").to(this,"href",pe=>pe||me("This link has no URL")),t.bind("isEnabled").to(this,"href",pe=>!!pe),t.template.tag="a",t}}var linkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const VISUAL_SELECTION_MARKER_NAME="link-ui";class LinkUI extends Plugin{constructor(){super(...arguments);xt(this,"actionsView",null);xt(this,"formView",null);xt(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=this.editor.t;t.editing.view.addObserver(ClickObserver),this._balloon=t.plugins.get(ContextualBalloon),this._createToolbarLinkButton(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME,view:(me,{writer:pe})=>{if(!me.markerRange.isCollapsed)return null;const Le=pe.createUIElement("span");return pe.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],Le),Le}}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:N("Create link"),keystroke:LINK_KEYSTROKE},{label:N("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const t=this.editor,N=new LinkActionsView(t.locale,t.config.get("link"),createBookmarkCallbacks(t)),me=t.commands.get("link"),pe=t.commands.get("unlink");return N.bind("href").to(me,"value"),N.editButtonView.bind("isEnabled").to(me),N.unlinkButtonView.bind("isEnabled").to(pe),this.listenTo(N,"edit",()=>{this._addFormView()}),this.listenTo(N,"unlink",()=>{t.execute("unlink"),this._hideUI()}),N.keystrokes.set("Esc",(Le,Ye)=>{this._hideUI(),Ye()}),N.keystrokes.set(LINK_KEYSTROKE,(Le,Ye)=>{this._addFormView(),Ye()}),N}_createFormView(){const t=this.editor,N=t.commands.get("link"),me=t.config.get("link.defaultProtocol"),pe=new(CssTransitionDisablerMixin(LinkFormView))(t.locale,N,getFormValidators$1(t));return pe.urlInputView.fieldView.bind("value").to(N,"value"),pe.urlInputView.bind("isEnabled").to(N,"isEnabled"),pe.saveButtonView.bind("isEnabled").to(N,"isEnabled"),this.listenTo(pe,"submit",()=>{if(pe.isValid()){const{value:Le}=pe.urlInputView.fieldView.element,Ye=addLinkProtocolIfApplicable(Le,me);t.execute("link",Ye,pe.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(pe.urlInputView,"change:errorText",()=>{t.ui.update()}),this.listenTo(pe,"cancel",()=>{this._closeFormView()}),pe.keystrokes.set("Esc",(Le,Ye)=>{this._closeFormView(),Ye()}),pe}_createToolbarLinkButton(){const t=this.editor;t.ui.componentFactory.add("link",()=>{const N=this._createButton(ButtonView);return N.set({tooltip:!0}),N}),t.ui.componentFactory.add("menuBar:link",()=>{const N=this._createButton(MenuBarMenuListItemButtonView);return N.set({role:"menuitemcheckbox"}),N})}_createButton(t){const N=this.editor,me=N.locale,pe=N.commands.get("link"),Le=new t(N.locale),Ye=me.t;return Le.set({label:Ye("Link"),icon:linkIcon,keystroke:LINK_KEYSTROKE,isToggleable:!0}),Le.bind("isEnabled").to(pe,"isEnabled"),Le.bind("isOn").to(pe,"value",nt=>!!nt),this.listenTo(Le,"execute",()=>this._showUI(!0)),Le}_enableBalloonActivators(){const t=this.editor,N=t.editing.view.document;this.listenTo(N,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),t.keystrokes.set(LINK_KEYSTROKE,(me,pe)=>{pe(),t.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,N)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),N())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,N)=>{this._isUIVisible&&(this._hideUI(),N())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const N=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=N.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),t.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const t=this.editor,N=t.editing.view.document;let me=this._getSelectedLinkElement(),pe=Ye();const Le=()=>{const nt=this._getSelectedLinkElement(),ot=Ye();me&&!nt||!me&&ot!==pe?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),me=nt,pe=ot};function Ye(){return N.selection.focus.getAncestors().reverse().find(nt=>nt.is("element"))}this.listenTo(t.ui,"update",Le),this.listenTo(this._balloon,"change:visibleView",Le)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const t=this._balloon.visibleView;return!!this.formView&&t==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,N=this.editor.model,me=t.document;let pe;if(N.markers.has(VISUAL_SELECTION_MARKER_NAME)){const Le=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME)),Ye=t.createRange(t.createPositionBefore(Le[0]),t.createPositionAfter(Le[Le.length-1]));pe=t.domConverter.viewRangeToDom(Ye)}else pe=()=>{const Le=this._getSelectedLinkElement();return Le?t.domConverter.mapViewToDom(Le):t.domConverter.viewRangeToDom(me.selection.getFirstRange())};return{target:pe}}_getSelectedLinkElement(){const t=this.editor.editing.view,N=t.document.selection,me=N.getSelectedElement();if(N.isCollapsed||me&&isWidget(me))return findLinkElementAncestor(N.getFirstPosition());{const pe=N.getFirstRange().getTrimmed(),Le=findLinkElementAncestor(pe.start),Ye=findLinkElementAncestor(pe.end);return!Le||Le!=Ye?null:t.createRangeIn(Le).getTrimmed().isEqual(pe)?Le:null}}_showFakeVisualSelection(){const t=this.editor.model;t.change(N=>{const me=t.document.selection.getFirstRange();if(t.markers.has(VISUAL_SELECTION_MARKER_NAME))N.updateMarker(VISUAL_SELECTION_MARKER_NAME,{range:me});else if(me.start.isAtEnd){const pe=me.start.getLastMatchingPosition(({item:Le})=>!t.schema.isContent(Le),{boundaries:me});N.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:N.createRange(pe,me.end)})}else N.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:me})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(VISUAL_SELECTION_MARKER_NAME)&&t.change(N=>{N.removeMarker(VISUAL_SELECTION_MARKER_NAME)})}}function findLinkElementAncestor(de){return de.getAncestors().find(u=>isLinkElement(u))||null}function getFormValidators$1(de){const u=de.t,t=de.config.get("link.allowCreatingEmptyLinks");return[N=>{if(!t&&!N.url.length)return u("Link URL must not be empty.")}]}const MIN_LINK_LENGTH_WITH_SPACE_AT_END=4,URL_REG_EXP=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),URL_GROUP_IN_MATCH=2;class AutoLink extends Plugin{static get requires(){return[Delete,LinkEditing]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(u,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?findAttributeRange(t,"linkHref",t.textNode.getAttribute("linkHref"),u):null}_selectEntireLinks(u,t){const me=this.editor.model,pe=me.document.selection,Le=pe.getFirstPosition(),Ye=pe.getLastPosition();let nt=t.getJoined(this._expandLinkRange(me,Le)||t);nt&&(nt=nt.getJoined(this._expandLinkRange(me,Ye)||t)),nt&&(nt.start.isBefore(Le)||nt.end.isAfter(Ye))&&u.setSelection(nt)}_enablePasteLinking(){const u=this.editor,t=u.model,N=t.document.selection,me=u.plugins.get("ClipboardPipeline"),pe=u.commands.get("link");me.on("inputTransformation",(Le,Ye)=>{if(!this.isEnabled||!pe.isEnabled||N.isCollapsed||Ye.method!=="paste"||N.rangeCount>1)return;const nt=N.getFirstRange(),ot=Ye.dataTransfer.getData("text/plain");if(!ot)return;const ft=ot.match(URL_REG_EXP);ft&&ft[2]===ot&&(t.change(mt=>{this._selectEntireLinks(mt,nt),pe.execute(ot)}),Le.stop())},{priority:"high"})}_enableTypingHandling(){const u=this.editor,t=new TextWatcher(u.model,N=>{let me=N;if(!isSingleSpaceAtTheEnd(me))return;me=me.slice(0,-1),"!.:,;?".includes(me[me.length-1])&&(me=me.slice(0,-1));const pe=getUrlAtTextEnd(me);if(pe)return{url:pe,removedTrailingCharacters:N.length-me.length}});t.on("matched:data",(N,me)=>{const{batch:pe,range:Le,url:Ye,removedTrailingCharacters:nt}=me;if(!pe.isTyping)return;const ot=Le.end.getShiftedBy(-nt),ft=ot.getShiftedBy(-Ye.length),mt=u.model.createRange(ft,ot);this._applyAutoLink(Ye,mt)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const u=this.editor,t=u.model,N=u.commands.get("enter");N&&N.on("execute",()=>{const me=t.document.selection.getFirstPosition();if(!me.parent.previousSibling)return;const pe=t.createRangeIn(me.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(pe)})}_enableShiftEnterHandling(){const u=this.editor,t=u.model,N=u.commands.get("shiftEnter");N&&N.on("execute",()=>{const me=t.document.selection.getFirstPosition(),pe=t.createRange(t.createPositionAt(me.parent,0),me.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(pe)})}_checkAndApplyAutoLinkOnRange(u){const t=this.editor.model,{text:N,range:me}=getLastTextLine(u,t),pe=getUrlAtTextEnd(N);if(pe){const Le=t.createRange(me.end.getShiftedBy(-pe.length),me.end);this._applyAutoLink(pe,Le)}}_applyAutoLink(u,t){const N=this.editor.model,me=this.editor.config.get("link.defaultProtocol"),pe=addLinkProtocolIfApplicable(u,me);!this.isEnabled||!isLinkAllowedOnRange(t,N)||!linkHasProtocol(pe)||linkIsAlreadySet(t)||this._persistAutoLink(pe,t)}_persistAutoLink(u,t){const N=this.editor.model,me=this.editor.plugins.get("Delete");N.enqueueChange(pe=>{pe.setAttribute("linkHref",u,t),N.enqueueChange(()=>{me.requestUndoOnBackspace()})})}}function isSingleSpaceAtTheEnd(de){return de.length>MIN_LINK_LENGTH_WITH_SPACE_AT_END&&de[de.length-1]===" "&&de[de.length-2]!==" "}function getUrlAtTextEnd(de){const u=URL_REG_EXP.exec(de);return u?u[URL_GROUP_IN_MATCH]:null}function isLinkAllowedOnRange(de,u){return u.schema.checkAttributeInSelection(u.createSelection(de),"linkHref")}function linkIsAlreadySet(de){const u=de.start.nodeAfter;return!!u&&u.hasAttribute("linkHref")}class Link extends Plugin{static get requires(){return[LinkEditing,LinkUI,AutoLink]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ListWalker{constructor(u,t){xt(this,"_startElement");xt(this,"_referenceIndent");xt(this,"_isForward");xt(this,"_includeSelf");xt(this,"_sameAttributes");xt(this,"_sameIndent");xt(this,"_lowerIndent");xt(this,"_higherIndent");this._startElement=u,this._referenceIndent=u.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=toArray$2(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(u,t){const me=new this(u,t)[Symbol.iterator]();return first(me)}*[Symbol.iterator](){const u=[];for(const{node:t}of new SiblingListBlocksIterator(this._getStartNode(),this._isForward?"forward":"backward")){const N=t.getAttribute("listIndent");if(N<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=N}else if(N>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){u.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){u.length&&(yield*u,u.length=0);break}continue}if(this._sameAttributes.some(me=>t.getAttribute(me)!==this._startElement.getAttribute(me)))break}u.length&&(yield*u,u.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class SiblingListBlocksIterator{constructor(u,t="forward"){xt(this,"_node");xt(this,"_isForward");xt(this,"_previousNodesByIndent",[]);xt(this,"_previous",null);xt(this,"_previousNodeIndent",null);this._node=u,this._isForward=t==="forward"}[Symbol.iterator](){return this}next(){if(!isListItemBlock(this._node))return{done:!0,value:void 0};const u=this._node.getAttribute("listIndent");let t=null;if(this._previous){const me=this._previousNodeIndent;u>me?this._previousNodesByIndent[me]=this._previous:u<me?(t=this._previousNodesByIndent[u]||null,this._previousNodesByIndent.length=u):t=this._previous}const N={node:this._node,previous:this._previous,previousNodeInList:t};return this._previous=this._node,this._previousNodeIndent=u,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:N,done:!1}}}class ListBlocksIterable{constructor(u){xt(this,"_listHead");this._listHead=u}[Symbol.iterator](){return new SiblingListBlocksIterator(this._listHead)}}class ListItemUid{static next(){return uid()}}function isListItemBlock(de){return!!de&&de.is("element")&&de.hasAttribute("listItemId")}function getAllListItemBlocks(de,u={}){return[...getListItemBlocks(de,{...u,direction:"backward"}),...getListItemBlocks(de,{...u,direction:"forward"})]}function getListItemBlocks(de,u={}){const t=u.direction=="forward",N=Array.from(new ListWalker(de,{...u,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?N:N.reverse()}function getNestedListBlocks(de){return Array.from(new ListWalker(de,{direction:"forward",higherIndent:!0}))}function getListItems(de,u){const t=new ListWalker(de,{sameIndent:!0,sameAttributes:"listType",...u}),N=new ListWalker(de,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...u});return[...Array.from(t).reverse(),...N]}function isFirstBlockOfListItem(de){return!ListWalker.first(de,{sameIndent:!0,sameAttributes:"listItemId"})}function isLastBlockOfListItem(de){return!ListWalker.first(de,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function expandListBlocksToCompleteItems(de,u={}){de=toArray$2(de);const t=u.withNested!==!1,N=new Set;for(const me of de)for(const pe of getAllListItemBlocks(me,{higherIndent:t}))N.add(pe);return sortBlocks(N)}function expandListBlocksToCompleteList(de){de=toArray$2(de);const u=new Set;for(const t of de)for(const N of getListItems(t))u.add(N);return sortBlocks(u)}function splitListItemBefore(de,u){const t=getListItemBlocks(de,{direction:"forward"}),N=ListItemUid.next();for(const me of t)u.setAttribute("listItemId",N,me);return t}function mergeListItemBefore(de,u,t){const N={};for(const[pe,Le]of u.getAttributes())pe.startsWith("list")&&(N[pe]=Le);const me=getListItemBlocks(de,{direction:"forward"});for(const pe of me)t.setAttributes(N,pe);return me}function indentBlocks(de,u,{expand:t,indentBy:N=1}={}){de=toArray$2(de);const me=t?expandListBlocksToCompleteItems(de):de;for(const pe of me){const Le=pe.getAttribute("listIndent")+N;Le<0?removeListAttributes(pe,u):u.setAttribute("listIndent",Le,pe)}return me}function outdentBlocksWithMerge(de,u){de=toArray$2(de);const t=expandListBlocksToCompleteItems(de),N=new Set,me=Math.min(...t.map(Le=>Le.getAttribute("listIndent"))),pe=new Map;for(const Le of t)pe.set(Le,ListWalker.first(Le,{lowerIndent:!0}));for(const Le of t){if(N.has(Le))continue;N.add(Le);const Ye=Le.getAttribute("listIndent")-1;if(Ye<0){removeListAttributes(Le,u);continue}if(Le.getAttribute("listIndent")==me){const nt=mergeListItemIfNotLast(Le,pe.get(Le),u);for(const ot of nt)N.add(ot);if(nt.length)continue}u.setAttribute("listIndent",Ye,Le)}return sortBlocks(N)}function removeListAttributes(de,u){de=toArray$2(de);for(const t of de)t.is("element","listItem")&&u.rename(t,"paragraph");for(const t of de)for(const N of t.getAttributeKeys())N.startsWith("list")&&u.removeAttribute(N,t);return de}function isSingleListItem(de){if(!de.length)return!1;const u=de[0].getAttribute("listItemId");return u?!de.some(t=>t.getAttribute("listItemId")!=u):!1}function outdentFollowingItems(de,u){const t=[];let N=Number.POSITIVE_INFINITY;for(const{node:me}of new SiblingListBlocksIterator(de.nextSibling)){const pe=me.getAttribute("listIndent");if(pe==0)break;pe<N&&(N=pe);const Le=pe-N;u.setAttribute("listIndent",Le,me),t.push(me)}return t}function sortBlocks(de){return Array.from(de).filter(u=>u.root.rootName!=="$graveyard").sort((u,t)=>u.index-t.index)}function getSelectedBlockObject(de){const u=de.document.selection.getSelectedElement();return u&&de.schema.isObject(u)&&de.schema.isBlock(u)?u:null}function canBecomeSimpleListItem(de,u){return u.checkChild(de.parent,"listItem")&&u.checkChild(de,"$text")&&!u.isObject(de)}function isNumberedListType(de){return de=="numbered"||de=="customNumbered"}function mergeListItemIfNotLast(de,u,t){return getListItemBlocks(u,{direction:"forward"}).pop().index>de.index?mergeListItemBefore(de,u,t):[]}class ListIndentCommand extends Command{constructor(t,N){super(t);xt(this,"_direction");this._direction=N}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,N=getSelectedListBlocks(t.document.selection);t.change(me=>{const pe=[];isSingleListItem(N)&&!isFirstBlockOfListItem(N[0])?(this._direction=="forward"&&pe.push(...indentBlocks(N,me)),pe.push(...splitListItemBefore(N[0],me))):this._direction=="forward"?pe.push(...indentBlocks(N,me,{expand:!0})):pe.push(...outdentBlocksWithMerge(N,me));for(const Le of pe){if(!Le.hasAttribute("listType"))continue;const Ye=ListWalker.first(Le,{sameIndent:!0});Ye&&me.setAttribute("listType",Ye.getAttribute("listType"),Le)}this._fireAfterExecute(pe)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){let t=getSelectedListBlocks(this.editor.model.document.selection),N=t[0];if(!N)return!1;if(this._direction=="backward"||isSingleListItem(t)&&!isFirstBlockOfListItem(t[0]))return!0;t=expandListBlocksToCompleteItems(t),N=t[0];const me=ListWalker.first(N,{sameIndent:!0});return me?me.getAttribute("listType")==N.getAttribute("listType"):!1}}function getSelectedListBlocks(de){const u=Array.from(de.getSelectedBlocks()),t=u.findIndex(N=>!isListItemBlock(N));return t!=-1&&(u.length=t),u}class ListCommand extends Command{constructor(t,N,me={}){super(t);xt(this,"type");xt(this,"_listWalkerOptions");this.type=N,this._listWalkerOptions=me.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const N=this.editor.model,me=N.document,pe=getSelectedBlockObject(N),Le=Array.from(me.selection.getSelectedBlocks()).filter(nt=>N.schema.checkAttribute(nt,"listType")||canBecomeSimpleListItem(nt,N.schema)),Ye=t.forceValue!==void 0?!t.forceValue:this.value;N.change(nt=>{if(Ye){const ot=Le[Le.length-1],ft=getListItemBlocks(ot,{direction:"forward"}),mt=[];ft.length>1&&mt.push(...splitListItemBefore(ft[1],nt)),mt.push(...removeListAttributes(Le,nt)),mt.push(...outdentFollowingItems(ot,nt)),this._fireAfterExecute(mt)}else if((pe||me.selection.isCollapsed)&&isListItemBlock(Le[0])){const ot=getListItems(pe||Le[0],this._listWalkerOptions);for(const ft of ot)nt.setAttributes({...t.additionalAttributes,listType:this.type},ft);this._fireAfterExecute(ot)}else{const ot=[];for(const ft of Le)if(!ft.hasAttribute("listType"))!ft.is("element","listItem")&&canBecomeSimpleListItem(ft,N.schema)&&nt.rename(ft,"listItem"),nt.setAttributes({...t.additionalAttributes,listIndent:0,listItemId:ListItemUid.next(),listType:this.type},ft),ot.push(ft);else for(const mt of expandListBlocksToCompleteItems(ft,{withNested:!1}))mt.getAttribute("listType")!=this.type&&(nt.setAttributes({...t.additionalAttributes,listType:this.type},mt),ot.push(mt));this._fireAfterExecute(ot)}})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_getValue(){const t=this.editor.model.document.selection,N=Array.from(t.getSelectedBlocks());if(!N.length)return!1;for(const me of N)if(me.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const t=this.editor.model,N=t.schema,me=t.document.selection,pe=Array.from(me.getSelectedBlocks());if(!pe.length)return!1;if(this.value)return!0;for(const Le of pe)if(N.checkAttribute(Le,"listType")||canBecomeSimpleListItem(Le,N))return!0;return!1}}class ListMergeCommand extends Command{constructor(t,N){super(t);xt(this,"_direction");this._direction=N}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:t=!1}={}){const N=this.editor.model,me=N.document.selection,pe=[];N.change(Le=>{const{firstElement:Ye,lastElement:nt}=this._getMergeSubjectElements(me,t),ot=Ye.getAttribute("listIndent")||0,ft=nt.getAttribute("listIndent"),mt=nt.getAttribute("listItemId");if(ot!=ft){const bt=getNestedListBlocks(nt);pe.push(...indentBlocks([nt,...bt],Le,{indentBy:ot-ft,expand:ot<ft}))}if(t){let bt=me;me.isCollapsed&&(bt=Le.createSelection(Le.createRange(Le.createPositionAt(Ye,"end"),Le.createPositionAt(nt,0)))),N.deleteContent(bt,{doNotResetEntireContent:me.isCollapsed});const yt=bt.getLastPosition().parent,_t=yt.nextSibling;pe.push(yt),_t&&_t!==nt&&_t.getAttribute("listItemId")==mt&&pe.push(...mergeListItemBefore(_t,yt,Le))}else pe.push(...mergeListItemBefore(nt,Ye,Le));this._fireAfterExecute(pe)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){const t=this.editor.model,N=t.document.selection,me=getSelectedBlockObject(t);if(N.isCollapsed||me){const pe=me||N.getFirstPosition().parent;if(!isListItemBlock(pe))return!1;const Le=this._direction=="backward"?pe.previousSibling:pe.nextSibling;if(!Le||isSingleListItem([pe,Le]))return!1}else{const pe=N.getLastPosition(),Le=N.getFirstPosition();if(pe.parent===Le.parent||!isListItemBlock(pe.parent))return!1}return!0}_getMergeSubjectElements(t,N){const me=this.editor.model,pe=getSelectedBlockObject(me);let Le,Ye;if(t.isCollapsed||pe){const nt=pe||t.getFirstPosition().parent,ot=isFirstBlockOfListItem(nt);this._direction=="backward"?(Ye=nt,ot&&!N?Le=ListWalker.first(nt,{sameIndent:!0,lowerIndent:!0}):Le=nt.previousSibling):(Le=nt,Ye=nt.nextSibling)}else Le=t.getFirstPosition().parent,Ye=t.getLastPosition().parent;return{firstElement:Le,lastElement:Ye}}}class ListSplitCommand extends Command{constructor(t,N){super(t);xt(this,"_direction");this._direction=N}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(N=>{const me=splitListItemBefore(this._getStartBlock(),N);this._fireAfterExecute(me)})}_fireAfterExecute(t){this.fire("afterExecute",sortBlocks(new Set(t)))}_checkEnabled(){const t=this.editor.model.document.selection,N=this._getStartBlock();return t.isCollapsed&&isListItemBlock(N)&&!isFirstBlockOfListItem(N)}_getStartBlock(){const N=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?N:N.nextSibling}}class ListUtils extends Plugin{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(u){return expandListBlocksToCompleteList(u)}isFirstBlockOfListItem(u){return isFirstBlockOfListItem(u)}isListItemBlock(u){return isListItemBlock(u)}expandListBlocksToCompleteItems(u,t={}){return expandListBlocksToCompleteItems(u,t)}isNumberedListType(u){return isNumberedListType(u)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isListView(de){return de.is("element","ol")||de.is("element","ul")}function isListItemView(de){return de.is("element","li")}function getIndent$1(de){let u=0,t=de.parent;for(;t;){if(isListItemView(t))u++;else{const N=t.previousSibling;N&&isListItemView(N)&&u++}t=t.parent}return u}function createListElement(de,u,t,N=getViewElementIdForListType(t,u)){return de.createAttributeElement(getViewElementNameForListType(t),null,{priority:2*u/100-100,id:N})}function createListItemElement(de,u,t){return de.createAttributeElement("li",null,{priority:(2*u+1)/100-100,id:t})}function getViewElementNameForListType(de){return de=="numbered"||de=="customNumbered"?"ol":"ul"}function getViewElementIdForListType(de,u){return`list-${de}-${u}`}function findAndAddListHeadToMap(de,u,t){const N=de.nodeBefore;if(isListItemBlock(N)){let me=N;for(const{node:pe}of new SiblingListBlocksIterator(me,"backward"))if(me=pe,t.has(me)||(t.add(me),u.has(N)))return;u.add(me)}else{const me=de.nodeAfter;isListItemBlock(me)&&u.add(me)}}function fixListIndents(de,u){let t=0,N=-1,me=null,pe=!1;for(const{node:Le}of de){const Ye=Le.getAttribute("listIndent");if(Ye>t){let nt;me===null?(me=Ye-t,nt=t):(me>Ye&&(me=Ye),nt=Ye-me),nt>N+1&&(nt=N+1),u.setAttribute("listIndent",nt,Le),pe=!0,N=nt}else me=null,t=Ye+1,N=Ye}return pe}function fixListItemIds(de,u,t){const N=new Set;let me=!1;for(const{node:pe}of de){if(N.has(pe))continue;let Le=pe.getAttribute("listType"),Ye=pe.getAttribute("listItemId");if(u.has(Ye)&&(Ye=ListItemUid.next()),u.add(Ye),pe.is("element","listItem")){pe.getAttribute("listItemId")!=Ye&&(t.setAttribute("listItemId",Ye,pe),me=!0);continue}for(const nt of getListItemBlocks(pe,{direction:"forward"}))N.add(nt),nt.getAttribute("listType")!=Le&&(Ye=ListItemUid.next(),Le=nt.getAttribute("listType")),nt.getAttribute("listItemId")!=Ye&&(t.setAttribute("listItemId",Ye,nt),me=!0)}return me}function listItemUpcastConverter(){return(de,u,t)=>{const{writer:N,schema:me}=t;if(!u.modelRange)return;const pe=Array.from(u.modelRange.getItems({shallow:!0})).filter(mt=>me.checkAttribute(mt,"listItemId"));if(!pe.length)return;const Le=ListItemUid.next(),Ye=getIndent$1(u.viewItem);let nt=u.viewItem.parent&&u.viewItem.parent.is("element","ol")?"numbered":"bulleted";const ot=pe[0].getAttribute("listType");ot&&(nt=ot);const ft={listItemId:Le,listIndent:Ye,listType:nt};for(const mt of pe)mt.hasAttribute("listItemId")||N.setAttributes(ft,mt);pe.length>1&&pe[1].getAttribute("listItemId")!=ft.listItemId&&t.keepEmptyElement(pe[0])}}function reconvertItemsOnDataChange(de,u,t,N){return()=>{const Ye=de.document.differ.getChanges(),nt=[],ot=new Set,ft=new Set,mt=new Set;for(const bt of Ye)if(bt.type=="insert"&&bt.name!="$text")findAndAddListHeadToMap(bt.position,ot,mt),bt.attributes.has("listItemId")?ft.add(bt.position.nodeAfter):findAndAddListHeadToMap(bt.position.getShiftedBy(bt.length),ot,mt);else if(bt.type=="remove"&&bt.attributes.has("listItemId"))findAndAddListHeadToMap(bt.position,ot,mt);else if(bt.type=="attribute"){const yt=bt.range.start.nodeAfter;t.includes(bt.attributeKey)?(findAndAddListHeadToMap(bt.range.start,ot,mt),bt.attributeNewValue===null?(findAndAddListHeadToMap(bt.range.start.getShiftedBy(1),ot,mt),pe(yt)&&nt.push(yt)):ft.add(yt)):isListItemBlock(yt)&&pe(yt)&&nt.push(yt)}for(const bt of ot.values())nt.push(...me(bt,ft));for(const bt of new Set(nt))u.reconvertItem(bt)};function me(Ye,nt){const ot=[],ft=new Set,mt=[];for(const{node:bt,previous:yt}of new SiblingListBlocksIterator(Ye)){if(ft.has(bt))continue;const _t=bt.getAttribute("listIndent");yt&&_t<yt.getAttribute("listIndent")&&(mt.length=_t+1),mt[_t]=Object.fromEntries(Array.from(bt.getAttributes()).filter(([Tt])=>t.includes(Tt)));const Ct=getListItemBlocks(bt,{direction:"forward"});for(const Tt of Ct)ft.add(Tt),(pe(Tt,Ct)||Le(Tt,mt,nt))&&ot.push(Tt)}return ot}function pe(Ye,nt){const ot=u.mapper.toViewElement(Ye);if(!ot)return!1;if(N.fire("checkElement",{modelElement:Ye,viewElement:ot}))return!0;if(!Ye.is("element","paragraph")&&!Ye.is("element","listItem"))return!1;const mt=shouldUseBogusParagraph(Ye,t,nt);return mt&&ot.is("element","p")?!0:!!(!mt&&ot.is("element","span"))}function Le(Ye,nt,ot){if(ot.has(Ye))return!1;const ft=u.mapper.toViewElement(Ye);let mt=nt.length-1;for(let bt=ft.parent;!bt.is("editableElement");bt=bt.parent){const yt=isListItemView(bt),_t=isListView(bt);if(!_t&&!yt)continue;const Ct=`checkAttributes:${yt?"item":"list"}`;if(N.fire(Ct,{viewElement:bt,modelAttributes:nt[mt]}))break;if(_t&&(mt--,mt<0))return!1}return!0}}function listItemDowncastConverter(de,u,t,{dataPipeline:N}={}){const me=createAttributesConsumer(de);return(pe,Le,Ye)=>{const{writer:nt,mapper:ot,consumable:ft}=Ye,mt=Le.item;if(!de.includes(Le.attributeKey)||!me(mt,ft))return;const bt=findMappedViewElement(mt,ot,t);removeCustomMarkerElements(bt,nt,ot),unwrapListItemBlock(bt,nt);const yt=insertCustomMarkerElements(mt,bt,u,nt,{dataPipeline:N});wrapListItemBlock(mt,yt,u,nt)}}function listItemDowncastRemoveConverter(de){return(u,t,N)=>{const{writer:me,mapper:pe}=N,Le=u.name.split(":")[1];if(!de.checkAttribute(Le,"listItemId"))return;const Ye=pe.toViewPosition(t.position),nt=t.position.getShiftedBy(t.length),ot=pe.toViewPosition(nt,{isPhantom:!0}),mt=me.createRange(Ye,ot).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */mt&&removeCustomMarkerElements(mt,me,pe)}}function bogusParagraphCreator(de,{dataPipeline:u}={}){return(t,{writer:N})=>{if(!shouldUseBogusParagraph(t,de))return null;if(!u)return N.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const me=N.createContainerElement("p");return N.setCustomProperty("dataPipeline:transparentRendering",!0,me),me}}function findMappedViewElement(de,u,t){const N=t.createRangeOn(de);return u.toViewRange(N).getTrimmed().end.nodeBefore}function createModelToViewPositionMapper(de,u){return(t,N)=>{if(N.modelPosition.offset>0)return;const me=N.modelPosition.parent;if(!isListItemBlock(me)||!de.some(ot=>ot.scope=="itemMarker"&&ot.canInjectMarkerIntoElement&&ot.canInjectMarkerIntoElement(me)))return;const pe=N.mapper.toViewElement(me),Le=u.createRangeIn(pe),Ye=Le.getWalker();let nt=Le.start;for(const{item:ot}of Ye){if(ot.is("element")&&N.mapper.toModelElement(ot)||ot.is("$textProxy"))break;ot.is("element")&&ot.getCustomProperty("listItemMarker")&&(nt=u.createPositionAfter(ot),Ye.skip(({previousPosition:ft})=>!ft.isEqual(nt)))}N.viewPosition=nt}}function removeCustomMarkerElements(de,u,t){for(;de.parent.is("attributeElement")&&de.parent.getCustomProperty("listItemWrapper");)u.unwrap(u.createRangeOn(de),de.parent);const N=[];me(u.createPositionBefore(de).getWalker({direction:"backward"})),me(u.createRangeIn(de).getWalker());for(const pe of N)u.remove(pe);function me(pe){for(const{item:Le}of pe){if(Le.is("element")&&t.toModelElement(Le))break;Le.is("element")&&Le.getCustomProperty("listItemMarker")&&N.push(Le)}}}function insertCustomMarkerElements(de,u,t,N,{dataPipeline:me}){let pe=N.createRangeOn(u);if(!isFirstBlockOfListItem(de))return pe;for(const Le of t){if(Le.scope!="itemMarker")continue;const Ye=Le.createElement(N,de,{dataPipeline:me});if(!Ye||(N.setCustomProperty("listItemMarker",!0,Ye),Le.canInjectMarkerIntoElement&&Le.canInjectMarkerIntoElement(de)?N.insert(N.createPositionAt(u,0),Ye):(N.insert(pe.start,Ye),pe=N.createRange(N.createPositionBefore(Ye),N.createPositionAfter(u))),!Le.createWrapperElement||!Le.canWrapElement))continue;const nt=Le.createWrapperElement(N,de,{dataPipeline:me});N.setCustomProperty("listItemWrapper",!0,nt),Le.canWrapElement(de)?pe=N.wrap(pe,nt):(pe=N.wrap(N.createRangeOn(Ye),nt),pe=N.createRange(pe.start,N.createPositionAfter(u)))}return pe}function unwrapListItemBlock(de,u){let t=de.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const N=t.parent;u.unwrap(u.createRangeOn(de),t),t=N}}function wrapListItemBlock(de,u,t,N){if(!de.hasAttribute("listIndent"))return;const me=de.getAttribute("listIndent");let pe=de;for(let Le=me;Le>=0;Le--){const Ye=createListItemElement(N,Le,pe.getAttribute("listItemId")),nt=createListElement(N,Le,pe.getAttribute("listType"));for(const ot of t)(ot.scope=="list"||ot.scope=="item")&&pe.hasAttribute(ot.attributeName)&&ot.setAttributeOnDowncast(N,pe.getAttribute(ot.attributeName),ot.scope=="list"?nt:Ye);if(u=N.wrap(u,Ye),u=N.wrap(u,nt),Le==0||(pe=ListWalker.first(pe,{lowerIndent:!0}),!pe))break}}function createAttributesConsumer(de){return(u,t)=>{const N=[];for(const me of de)u.hasAttribute(me)&&N.push(`attribute:${me}`);return N.every(me=>t.test(u,me)!==!1)?(N.forEach(me=>t.consume(u,me)),!0):!1}}function shouldUseBogusParagraph(de,u,t=getAllListItemBlocks(de)){if(!isListItemBlock(de))return!1;for(const N of de.getAttributeKeys())if(!(N.startsWith("selection:")||N=="htmlEmptyBlock")&&!u.includes(N))return!1;return t.length<2}const LIST_BASE_ATTRIBUTES=["listType","listIndent","listItemId"];class ListEditing extends Plugin{constructor(t){super(t);xt(this,"_downcastStrategies",[]);t.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete,ListUtils,ClipboardPipeline]}init(){const t=this.editor,N=t.model,me=t.config.get("list.multiBlock");if(t.plugins.has("LegacyListEditing"))throw new CKEditorError("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});N.schema.register("$listItem",{allowAttributes:LIST_BASE_ATTRIBUTES}),me?(N.schema.extend("$container",{allowAttributesOf:"$listItem"}),N.schema.extend("$block",{allowAttributesOf:"$listItem"}),N.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):N.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const pe of LIST_BASE_ATTRIBUTES)N.schema.setAttributeProperties(pe,{copyOnReplace:!0});t.commands.add("numberedList",new ListCommand(t,"numbered")),t.commands.add("bulletedList",new ListCommand(t,"bulleted")),t.commands.add("customNumberedList",new ListCommand(t,"customNumbered",{multiLevel:!0})),t.commands.add("customBulletedList",new ListCommand(t,"customBulleted",{multiLevel:!0})),t.commands.add("indentList",new ListIndentCommand(t,"forward")),t.commands.add("outdentList",new ListIndentCommand(t,"backward")),t.commands.add("splitListItemBefore",new ListSplitCommand(t,"before")),t.commands.add("splitListItemAfter",new ListSplitCommand(t,"after")),me&&(t.commands.add("mergeListItemBackward",new ListMergeCommand(t,"backward")),t.commands.add("mergeListItemForward",new ListMergeCommand(t,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const N=this.editor.commands,me=N.get("indent"),pe=N.get("outdent");me&&me.registerChildCommand(N.get("indentList"),{priority:"high"}),pe&&pe.registerChildCommand(N.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(t){this._downcastStrategies.push(t)}getListAttributeNames(){return[...LIST_BASE_ATTRIBUTES,...this._downcastStrategies.map(t=>t.attributeName)]}_setupDeleteIntegration(){const t=this.editor,N=t.commands.get("mergeListItemBackward"),me=t.commands.get("mergeListItemForward");this.listenTo(t.editing.view.document,"delete",(pe,Le)=>{const Ye=t.model.document.selection;getSelectedBlockObject(t.model)||t.model.change(()=>{const nt=Ye.getFirstPosition();if(Ye.isCollapsed&&Le.direction=="backward"){if(!nt.isAtStart)return;const ot=nt.parent;if(!isListItemBlock(ot))return;if(!ListWalker.first(ot,{sameAttributes:"listType",sameIndent:!0})&&ot.getAttribute("listIndent")===0)isLastBlockOfListItem(ot)||t.execute("splitListItemAfter"),t.execute("outdentList");else{if(!N||!N.isEnabled)return;N.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(t.model,"backward")})}Le.preventDefault(),pe.stop()}else{if(Ye.isCollapsed&&!Ye.getLastPosition().isAtEnd||!me||!me.isEnabled)return;me.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(t.model,"forward")}),Le.preventDefault(),pe.stop()}})},{context:"li"})}_setupEnterIntegration(){const t=this.editor,N=t.model,me=t.commands,pe=me.get("enter");this.listenTo(t.editing.view.document,"enter",(Le,Ye)=>{const nt=N.document,ot=nt.selection.getFirstPosition().parent;if(nt.selection.isCollapsed&&isListItemBlock(ot)&&ot.isEmpty&&!Ye.isSoft){const ft=isFirstBlockOfListItem(ot),mt=isLastBlockOfListItem(ot);ft&&mt?(t.execute("outdentList"),Ye.preventDefault(),Le.stop()):ft&&!mt?(t.execute("splitListItemAfter"),Ye.preventDefault(),Le.stop()):mt&&(t.execute("splitListItemBefore"),Ye.preventDefault(),Le.stop())}},{context:"li"}),this.listenTo(pe,"afterExecute",()=>{const Le=me.get("splitListItemBefore");if(Le.refresh(),!Le.isEnabled)return;const nt=t.model.document.selection.getLastPosition().parent;getAllListItemBlocks(nt).length===2&&Le.execute()})}_setupTabIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"tab",(N,me)=>{const pe=me.shiftKey?"outdentList":"indentList";this.editor.commands.get(pe).isEnabled&&(t.execute(pe),me.stopPropagation(),me.preventDefault(),N.stop())},{context:"li"})}_setupConversion(){const t=this.editor,N=t.model,me=this.getListAttributeNames(),pe=t.config.get("list.multiBlock"),Le=pe?"paragraph":"listItem";t.conversion.for("upcast").elementToElement({view:"li",model:(nt,{writer:ot})=>ot.createElement(Le,{listType:""})}).elementToElement({view:"p",model:(nt,{writer:ot})=>nt.parent&&nt.parent.is("element","li")?ot.createElement(Le,{listType:""}):null,converterPriority:"high"}).add(nt=>{nt.on("element:li",listItemUpcastConverter())}),pe||t.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),t.conversion.for("editingDowncast").elementToElement({model:Le,view:bogusParagraphCreator(me),converterPriority:"high"}).add(nt=>{nt.on("attribute",listItemDowncastConverter(me,this._downcastStrategies,N)),nt.on("remove",listItemDowncastRemoveConverter(N.schema))}),t.conversion.for("dataDowncast").elementToElement({model:Le,view:bogusParagraphCreator(me,{dataPipeline:!0}),converterPriority:"high"}).add(nt=>{nt.on("attribute",listItemDowncastConverter(me,this._downcastStrategies,N,{dataPipeline:!0}))});const Ye=createModelToViewPositionMapper(this._downcastStrategies,t.editing.view);t.editing.mapper.on("modelToViewPosition",Ye),t.data.mapper.on("modelToViewPosition",Ye),this.listenTo(N.document,"change:data",reconvertItemsOnDataChange(N,t.editing,me,this),{priority:"high"}),this.on("checkAttributes:item",(nt,{viewElement:ot,modelAttributes:ft})=>{ot.id!=ft.listItemId&&(nt.return=!0,nt.stop())}),this.on("checkAttributes:list",(nt,{viewElement:ot,modelAttributes:ft})=>{(ot.name!=getViewElementNameForListType(ft.listType)||ot.id!=getViewElementIdForListType(ft.listType,ft.listIndent))&&(nt.return=!0,nt.stop())})}_setupModelPostFixing(){const t=this.editor.model,N=this.getListAttributeNames();t.document.registerPostFixer(me=>modelChangePostFixer$1(t,me,N,this)),this.on("postFixer",(me,{listNodes:pe,writer:Le})=>{me.return=fixListIndents(pe,Le)||me.return},{priority:"high"}),this.on("postFixer",(me,{listNodes:pe,writer:Le,seenIds:Ye})=>{me.return=fixListItemIds(pe,Ye,Le)||me.return},{priority:"high"})}_setupClipboardIntegration(){const t=this.editor.model,N=this.editor.plugins.get("ClipboardPipeline");this.listenTo(t,"insertContent",createModelIndentPasteFixer(t),{priority:"high"}),this.listenTo(N,"outputTransformation",(me,pe)=>{t.change(Le=>{const Ye=Array.from(pe.content.getChildren()),nt=Ye[Ye.length-1];if(Ye.length>1&&nt.is("element")&&nt.isEmpty&&Ye.slice(0,-1).every(isListItemBlock)&&Le.remove(nt),pe.method=="copy"||pe.method=="cut"){const ot=Array.from(pe.content.getChildren());isSingleListItem(ot)&&removeListAttributes(ot,Le)}})})}_setupAccessibilityIntegration(){const t=this.editor,N=t.t;t.accessibility.addKeystrokeInfoGroup({id:"list",label:N("Keystrokes that can be used in a list"),keystrokes:[{label:N("Increase list item indent"),keystroke:"Tab"},{label:N("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function modelChangePostFixer$1(de,u,t,N){const me=de.document.differ.getChanges(),pe=new Set,Le=new Set,Ye=N.editor.config.get("list.multiBlock");let nt=!1;for(const ft of me){if(ft.type=="insert"&&ft.name!="$text"){const mt=ft.position.nodeAfter;if(!de.schema.checkAttribute(mt,"listItemId"))for(const bt of Array.from(mt.getAttributeKeys()))t.includes(bt)&&(u.removeAttribute(bt,mt),nt=!0);findAndAddListHeadToMap(ft.position,Le,pe),ft.attributes.has("listItemId")||findAndAddListHeadToMap(ft.position.getShiftedBy(ft.length),Le,pe);for(const{item:bt,previousPosition:yt}of de.createRangeIn(mt))isListItemBlock(bt)&&findAndAddListHeadToMap(yt,Le,pe)}else ft.type=="remove"?findAndAddListHeadToMap(ft.position,Le,pe):ft.type=="attribute"&&t.includes(ft.attributeKey)&&(findAndAddListHeadToMap(ft.range.start,Le,pe),ft.attributeNewValue===null&&findAndAddListHeadToMap(ft.range.start.getShiftedBy(1),Le,pe));if(!Ye&&ft.type=="attribute"&&LIST_BASE_ATTRIBUTES.includes(ft.attributeKey)){const mt=ft.range.start.nodeAfter;ft.attributeNewValue===null&&mt&&mt.is("element","listItem")?(u.rename(mt,"paragraph"),nt=!0):ft.attributeOldValue===null&&mt&&mt.is("element")&&mt.name!="listItem"&&(u.rename(mt,"listItem"),nt=!0)}}const ot=new Set;for(const ft of Le.values())nt=N.fire("postFixer",{listNodes:new ListBlocksIterable(ft),listHead:ft,writer:u,seenIds:ot})||nt;return nt}function createModelIndentPasteFixer(de){return(u,[t,N])=>{const me=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!me.length)return;const Le=(N?de.createSelection(N):de.document.selection).getFirstPosition();let Ye;if(isListItemBlock(Le.parent))Ye=Le.parent;else if(isListItemBlock(Le.nodeBefore)&&isListItemBlock(Le.nodeAfter))Ye=Le.nodeBefore;else return;de.change(nt=>{const ot=Ye.getAttribute("listType"),ft=Ye.getAttribute("listIndent"),mt=me[0].getAttribute("listIndent")||0,bt=Math.max(ft-mt,0);for(const yt of me){const _t=isListItemBlock(yt);Ye.is("element","listItem")&&yt.is("element","paragraph")&&nt.rename(yt,"listItem"),nt.setAttributes({listIndent:(_t?yt.getAttribute("listIndent"):0)+bt,listItemId:_t?yt.getAttribute("listItemId"):ListItemUid.next(),listType:ot},yt)}})}}function shouldMergeOnBlocksContentLevel(de,u){const t=de.document.selection;if(!t.isCollapsed)return!getSelectedBlockObject(de);if(u==="forward")return!0;const me=t.getFirstPosition().parent,pe=me.previousSibling;return de.schema.isObject(pe)?!1:pe.isEmpty?!0:isSingleListItem([me,pe])}function createUIComponents(de,u,t,N){de.ui.componentFactory.add(u,()=>{const me=_createButton(ButtonView,de,u,t,N);return me.set({tooltip:!0,isToggleable:!0}),me}),de.ui.componentFactory.add(`menuBar:${u}`,()=>{const me=_createButton(MenuBarMenuListItemButtonView,de,u,t,N);return me.set({role:"menuitemcheckbox",isToggleable:!0}),me})}function _createButton(de,u,t,N,me){const pe=u.commands.get(t),Le=new de(u.locale);return Le.set({label:N,icon:me}),Le.bind("isOn","isEnabled").to(pe,"value","isEnabled"),Le.on("execute",()=>{u.execute(t),u.editing.view.focus()}),Le}class ListUI extends Plugin{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||createUIComponents(this.editor,"numberedList",u("Numbered List"),icons.numberedList),this.editor.ui.componentFactory.has("bulletedList")||createUIComponents(this.editor,"bulletedList",u("Bulleted List"),icons.bulletedList)}}class List extends Plugin{static get requires(){return[ListEditing,ListUI]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class ListStartCommand extends Command{refresh(){const u=this._getValue();this.value=u,this.isEnabled=u!=null}execute({startIndex:u=1}={}){const t=this.editor.model,N=t.document;let me=Array.from(N.selection.getSelectedBlocks()).filter(pe=>isListItemBlock(pe)&&isNumberedListType(pe.getAttribute("listType")));me=expandListBlocksToCompleteList(me),t.change(pe=>{for(const Le of me)pe.setAttribute("listStart",u>=0?u:1,Le)})}_getValue(){const t=this.editor.model.document,N=first(t.selection.getSelectedBlocks());return N&&isListItemBlock(N)&&isNumberedListType(N.getAttribute("listType"))?N.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const LIST_STYLE_TO_LIST_TYPE={},LIST_STYLE_TO_TYPE_ATTRIBUTE={},TYPE_ATTRIBUTE_TO_LIST_STYLE={},LIST_STYLE_TYPES=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:de,typeAttribute:u,listType:t}of LIST_STYLE_TYPES)LIST_STYLE_TO_LIST_TYPE[de]=t,LIST_STYLE_TO_TYPE_ATTRIBUTE[de]=u,u&&(TYPE_ATTRIBUTE_TO_LIST_STYLE[u]=de);function getAllSupportedStyleTypes(){return LIST_STYLE_TYPES.map(de=>de.listStyle)}function getListTypeFromListStyleType$1(de){return LIST_STYLE_TO_LIST_TYPE[de]||null}function getListStyleTypeFromTypeAttribute(de){return TYPE_ATTRIBUTE_TO_LIST_STYLE[de]||null}function getTypeAttributeFromListStyleType(de){return LIST_STYLE_TO_TYPE_ATTRIBUTE[de]||null}function normalizeListStyle(de){switch(de){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return de}}class ListStyleCommand extends Command{constructor(t,N,me){super(t);xt(this,"defaultType");xt(this,"_supportedTypes");this.defaultType=N,this._supportedTypes=me}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const N=this.editor.model,me=N.document;N.change(pe=>{this._tryToConvertItemsToList(t);let Le=Array.from(me.selection.getSelectedBlocks()).filter(Ye=>Ye.hasAttribute("listType"));if(Le.length){Le=expandListBlocksToCompleteList(Le);for(const Ye of Le)pe.setAttribute("listStyle",t.type||this.defaultType,Ye)}})}isStyleTypeSupported(t){return this._supportedTypes?this._supportedTypes.includes(t):!0}_getValue(){const t=first(this.editor.model.document.selection.getSelectedBlocks());return isListItemBlock(t)?t.getAttribute("listStyle"):null}_checkEnabled(){const t=this.editor,N=t.commands.get("numberedList"),me=t.commands.get("bulletedList");return N.isEnabled||me.isEnabled}_tryToConvertItemsToList(t){if(!t.type)return;const N=getListTypeFromListStyleType$1(t.type);if(!N)return;const me=this.editor,pe=`${N}List`;me.commands.get(pe).value||me.execute(pe)}}class ListReversedCommand extends Command{refresh(){const u=this._getValue();this.value=u,this.isEnabled=u!=null}execute(u={}){const t=this.editor.model,N=t.document;let me=Array.from(N.selection.getSelectedBlocks()).filter(pe=>isListItemBlock(pe)&&pe.getAttribute("listType")=="numbered");me=expandListBlocksToCompleteList(me),t.change(pe=>{for(const Le of me)pe.setAttribute("listReversed",!!u.reversed,Le)})}_getValue(){const t=this.editor.model.document,N=first(t.selection.getSelectedBlocks());return isListItemBlock(N)&&N.getAttribute("listType")=="numbered"?N.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function listPropertiesUpcastConverter(de){return(u,t,N)=>{const{writer:me,schema:pe,consumable:Le}=N;if(Le.test(t.viewItem,de.viewConsumables)===!1)return;t.modelRange||Object.assign(t,N.convertChildren(t.viewItem,t.modelCursor));let Ye=!1;for(const nt of t.modelRange.getItems({shallow:!0}))pe.checkAttribute(nt,de.attributeName)&&de.appliesToListItem(nt)&&(nt.hasAttribute(de.attributeName)||(me.setAttribute(de.attributeName,de.getAttributeOnUpcast(t.viewItem),nt),Ye=!0));Ye&&Le.consume(t.viewItem,de.viewConsumables)}}class ListPropertiesUtils extends Plugin{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return getAllSupportedStyleTypes()}getListTypeFromListStyleType(u){return getListTypeFromListStyleType$1(u)}getListStyleTypeFromTypeAttribute(u){return getListStyleTypeFromTypeAttribute(u)}getTypeAttributeFromListStyleType(u){return getTypeAttributeFromListStyleType(u)}}function getNormalizedConfig(de){const{startIndex:u,reversed:t,styles:N}=de;return{styles:getNormalizedStylesConfig(N),startIndex:u||!1,reversed:t||!1}}function getNormalizedStylesConfig(de){const u={listTypes:["bulleted","numbered"],useAttribute:!1};return de===!0||(de?Array.isArray(de)||typeof de=="string"?u.listTypes=toArray$2(de):(u.listTypes=de.listTypes?toArray$2(de.listTypes):u.listTypes,u.useAttribute=!!de.useAttribute,de.listStyleTypes&&(u.listStyleTypes=de.listStyleTypes)):u.listTypes=[]),u}const DEFAULT_LIST_TYPE$1="default";class ListPropertiesEditing extends Plugin{static get requires(){return[ListEditing,ListPropertiesUtils]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(u){super(u),u.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const u=this.editor,t=u.model,N=u.plugins.get(ListEditing),me=u.config.get("list.properties"),pe=createAttributeStrategies$1(me);for(const Le of pe)Le.addCommand(u),t.schema.extend("$listItem",{allowAttributes:Le.attributeName}),N.registerDowncastStrategy({scope:"list",attributeName:Le.attributeName,setAttributeOnDowncast(Ye,nt,ot){Le.setAttributeOnDowncast(Ye,nt,ot)}});u.conversion.for("upcast").add(Le=>{for(const Ye of pe)Le.on("element:ol",listPropertiesUpcastConverter(Ye)),Le.on("element:ul",listPropertiesUpcastConverter(Ye))}),N.on("checkAttributes:list",(Le,{viewElement:Ye,modelAttributes:nt})=>{for(const ot of pe)ot.getAttributeOnUpcast(Ye)!=nt[ot.attributeName]&&(Le.return=!0,Le.stop())}),this.listenTo(u.commands.get("indentList"),"afterExecute",(Le,Ye)=>{t.change(nt=>{for(const ot of Ye)for(const ft of pe)ft.appliesToListItem(ot)&&nt.setAttribute(ft.attributeName,ft.defaultValue,ot)})}),N.on("postFixer",(Le,{listNodes:Ye,writer:nt})=>{for(const{node:ot}of Ye)for(const ft of pe)ft.hasValidAttribute(ot)||(ft.appliesToListItem(ot)?nt.setAttribute(ft.attributeName,ft.defaultValue,ot):nt.removeAttribute(ft.attributeName,ot),Le.return=!0)}),N.on("postFixer",(Le,{listNodes:Ye,writer:nt})=>{for(const{node:ot,previousNodeInList:ft}of Ye)if(ft&&ft.getAttribute("listType")==ot.getAttribute("listType"))for(const mt of pe){const{attributeName:bt}=mt;if(!mt.appliesToListItem(ot))continue;const yt=ft.getAttribute(bt);ot.getAttribute(bt)!=yt&&(nt.setAttribute(bt,yt,ot),Le.return=!0)}})}}function createAttributeStrategies$1(de){const u=[],t=getNormalizedConfig(de);if(de.styles){const N=t.styles.useAttribute;u.push({attributeName:"listStyle",defaultValue:DEFAULT_LIST_TYPE$1,viewConsumables:{styles:"list-style-type"},addCommand(me){let pe=getAllSupportedStyleTypes();N&&(pe=pe.filter(Le=>!!getTypeAttributeFromListStyleType(Le))),me.commands.add("listStyle",new ListStyleCommand(me,DEFAULT_LIST_TYPE$1,pe))},appliesToListItem(me){return me.getAttribute("listType")=="numbered"||me.getAttribute("listType")=="bulleted"},hasValidAttribute(me){if(!this.appliesToListItem(me))return!me.hasAttribute("listStyle");if(!me.hasAttribute("listStyle"))return!1;const pe=me.getAttribute("listStyle");return pe==DEFAULT_LIST_TYPE$1?!0:getListTypeFromListStyleType$1(pe)==me.getAttribute("listType")},setAttributeOnDowncast(me,pe,Le){if(pe&&pe!==DEFAULT_LIST_TYPE$1)if(N){const Ye=getTypeAttributeFromListStyleType(pe);if(Ye){me.setAttribute("type",Ye,Le);return}}else{me.setStyle("list-style-type",pe,Le);return}me.removeStyle("list-style-type",Le),me.removeAttribute("type",Le)},getAttributeOnUpcast(me){const pe=me.getStyle("list-style-type");if(pe)return normalizeListStyle(pe);const Le=me.getAttribute("type");return Le?getListStyleTypeFromTypeAttribute(Le):DEFAULT_LIST_TYPE$1}})}return de.reversed&&u.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(N){N.commands.add("listReversed",new ListReversedCommand(N))},appliesToListItem(N){return N.getAttribute("listType")=="numbered"},hasValidAttribute(N){return this.appliesToListItem(N)==N.hasAttribute("listReversed")},setAttributeOnDowncast(N,me,pe){me?N.setAttribute("reversed","reversed",pe):N.removeAttribute("reversed",pe)},getAttributeOnUpcast(N){return N.hasAttribute("reversed")}}),de.startIndex&&u.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(N){N.commands.add("listStart",new ListStartCommand(N))},appliesToListItem(N){return isNumberedListType(N.getAttribute("listType"))},hasValidAttribute(N){return this.appliesToListItem(N)==N.hasAttribute("listStart")},setAttributeOnDowncast(N,me,pe){me==0||me>1?N.setAttribute("start",me,pe):N.removeAttribute("start",pe)},getAttributeOnUpcast(N){const me=N.getAttribute("start");return me>=0?me:1}}),u}class ListPropertiesView extends View{constructor(t,{enabledProperties:N,styleButtonViews:me,styleGridAriaLabel:pe}){super(t);xt(this,"children");xt(this,"stylesView",null);xt(this,"additionalPropertiesCollapsibleView",null);xt(this,"startIndexFieldView",null);xt(this,"reversedSwitchButtonView",null);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"focusables",new ViewCollection);xt(this,"focusCycler");const Le=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),me&&me.length?(this.stylesView=this._createStylesView(me,pe),this.children.add(this.stylesView)):Le.push("ck-list-properties_without-styles"),(N.startIndex||N.reversed)&&(this._addNumberedListPropertyViews(N),Le.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:Le},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=N=>N.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,N){const me=new View(this.locale);return me.children=me.createCollection(),me.children.addMany(t),me.setTemplate({tag:"div",attributes:{"aria-label":N,class:["ck","ck-list-styles-list"]},children:me.children}),me.children.delegate("execute").to(this),me.focus=function(){for(const pe of this.children)if(pe instanceof ButtonView&&pe.isOn){pe.focus();return}this.children.first.focus()},me.focusTracker=new FocusTracker,me.keystrokes=new KeystrokeHandler,me.render(),me.keystrokes.listenTo(me.element),me}_addNumberedListPropertyViews(t){const N=this.locale.t,me=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),me.push(this.startIndexFieldView)),t.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),me.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,me),this.additionalPropertiesCollapsibleView.set({label:N("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(me,"isEnabled",(...pe)=>pe.some(Le=>Le)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(pe,Le,Ye)=>{Ye||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(me)}_createStartIndexField(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputNumber);return N.set({label:t("Start at"),class:"ck-numbered-list-properties__start-index"}),N.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),N.fieldView.on("input",()=>{const me=N.fieldView.element,pe=me.valueAsNumber;if(Number.isNaN(pe)){N.errorText=t("Invalid start index value.");return}me.checkValidity()?this.fire("listStart",{startIndex:pe}):N.errorText=t("Start index must be greater than 0.")}),N}_createReversedSwitchButton(){const t=this.locale.t,N=new SwitchButtonView(this.locale);return N.set({withText:!0,label:t("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),N.delegate("execute").to(this,"listReversed"),N}}var listStyleDiscIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',listStyleCircleIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',listStyleSquareIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',listStyleDecimalIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',listStyleDecimalWithLeadingZeroIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class ListPropertiesUI extends Plugin{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.locale.t,N=u.config.get("list.properties"),me=getNormalizedConfig(N),pe=me.styles.listTypes;if(pe.includes("bulleted")){const Le=[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:listStyleDiscIcon},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:listStyleCircleIcon},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:listStyleSquareIcon}],Ye=t("Bulleted List"),nt=t("Bulleted list styles toolbar"),ot="bulletedList";u.ui.componentFactory.add(ot,getDropdownViewCreator({editor:u,normalizedConfig:me,parentCommandName:ot,buttonLabel:Ye,buttonIcon:icons.bulletedList,styleGridAriaLabel:nt,styleDefinitions:Le})),u.ui.componentFactory.add(`menuBar:${ot}`,getMenuBarStylesMenuCreator({editor:u,normalizedConfig:me,parentCommandName:ot,buttonLabel:Ye,styleGridAriaLabel:nt,styleDefinitions:Le}))}if(pe.includes("numbered")||N.startIndex||N.reversed){const Le=[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:listStyleDecimalIcon},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:listStyleDecimalWithLeadingZeroIcon},{label:t("Toggle the lowerroman list style"),tooltip:t("Lowerroman"),type:"lower-roman",icon:listStyleLowerRomanIcon},{label:t("Toggle the upperroman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:listStyleUpperRomanIcon},{label:t("Toggle the lowerlatin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:listStyleLowerLatinIcon},{label:t("Toggle the upperlatin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:listStyleUpperLatinIcon}],Ye=t("Numbered List"),nt=t("Numbered list styles toolbar"),ot="numberedList";u.ui.componentFactory.add(ot,getDropdownViewCreator({editor:u,normalizedConfig:me,parentCommandName:ot,buttonLabel:Ye,buttonIcon:icons.numberedList,styleGridAriaLabel:nt,styleDefinitions:Le})),pe.includes("numbered")&&u.ui.componentFactory.add(`menuBar:${ot}`,getMenuBarStylesMenuCreator({editor:u,normalizedConfig:me,parentCommandName:ot,buttonLabel:Ye,styleGridAriaLabel:nt,styleDefinitions:Le}))}}}function getDropdownViewCreator({editor:de,normalizedConfig:u,parentCommandName:t,buttonLabel:N,buttonIcon:me,styleGridAriaLabel:pe,styleDefinitions:Le}){const Ye=de.commands.get(t);return nt=>{const ot=createDropdown(nt,SplitButtonView),ft=ot.buttonView;return ot.bind("isEnabled").to(Ye),ot.class="ck-list-styles-dropdown",ft.on("execute",()=>{de.execute(t),de.editing.view.focus()}),ft.set({label:N,icon:me,tooltip:!0,isToggleable:!0}),ft.bind("isOn").to(Ye,"value",mt=>!!mt),ot.once("change:isOpen",()=>{const mt=createListPropertiesView({editor:de,normalizedConfig:u,dropdownView:ot,parentCommandName:t,styleGridAriaLabel:pe,styleDefinitions:Le});ot.panelView.children.add(mt)}),ot.on("execute",()=>{de.editing.view.focus()}),ot}}function getStyleButtonCreator({editor:de,listStyleCommand:u,parentCommandName:t}){const N=de.locale,me=de.commands.get(t);return({label:pe,type:Le,icon:Ye,tooltip:nt})=>{const ot=new ButtonView(N);return ot.set({label:pe,icon:Ye,tooltip:nt}),ot.bind("isOn").to(u,"value",ft=>ft===Le),ot.on("execute",()=>{me.value?u.value===Le?de.execute(t):u.value!==Le&&de.execute("listStyle",{type:Le}):de.model.change(()=>{de.execute("listStyle",{type:Le})})}),ot}}function createListPropertiesView({editor:de,normalizedConfig:u,dropdownView:t,parentCommandName:N,styleDefinitions:me,styleGridAriaLabel:pe}){const Le=de.locale,Ye={...u,...N!="numberedList"?{startIndex:!1,reversed:!1}:null},nt=N.replace("List","");let ot=null;if(u.styles.listTypes.includes(nt)){const mt=de.commands.get("listStyle"),bt=getStyleButtonCreator({editor:de,parentCommandName:N,listStyleCommand:mt}),yt=u.styles.listStyleTypes;let _t=me;if(yt){const Tt=yt[nt];Tt&&(_t=me.filter(At=>Tt.includes(At.type)))}const Ct=getStyleTypeSupportChecker(mt);ot=_t.filter(Ct).map(bt)}const ft=new ListPropertiesView(Le,{styleGridAriaLabel:pe,enabledProperties:Ye,styleButtonViews:ot});if(u.styles.listTypes.includes(nt)&&focusChildOnDropdownOpen(t,()=>ft.stylesView.children.find(mt=>mt.isOn)),Ye.startIndex){const mt=de.commands.get("listStart");ft.startIndexFieldView.bind("isEnabled").to(mt),ft.startIndexFieldView.fieldView.bind("value").to(mt),ft.on("listStart",(bt,yt)=>de.execute("listStart",yt))}if(Ye.reversed){const mt=de.commands.get("listReversed");ft.reversedSwitchButtonView.bind("isEnabled").to(mt),ft.reversedSwitchButtonView.bind("isOn").to(mt,"value",bt=>!!bt),ft.on("listReversed",()=>{const bt=mt.value;de.execute("listReversed",{reversed:!bt})})}return ft.delegate("execute").to(t),ft}function getMenuBarStylesMenuCreator({editor:de,normalizedConfig:u,parentCommandName:t,buttonLabel:N,styleGridAriaLabel:me,styleDefinitions:pe}){return Le=>{const Ye=new MenuBarMenuView(Le),nt=de.commands.get(t),ot=de.commands.get("listStyle"),ft=getStyleTypeSupportChecker(ot),mt=getStyleButtonCreator({editor:de,parentCommandName:t,listStyleCommand:ot}),bt=u.styles.listStyleTypes;let yt=pe;if(bt){const Tt=nt.type,At=bt[Tt];At&&(yt=pe.filter(It=>At.includes(It.type)))}const _t=yt.filter(ft).map(mt),Ct=new ListPropertiesView(Le,{styleGridAriaLabel:me,enabledProperties:{...u,startIndex:!1,reversed:!1},styleButtonViews:_t});return Ct.delegate("execute").to(Ye),Ye.buttonView.set({label:N,icon:icons[t]}),Ye.panelView.children.add(Ct),Ye.bind("isEnabled").to(nt,"isEnabled"),Ye.on("execute",()=>{de.editing.view.focus()}),Ye}}function getStyleTypeSupportChecker(de){return typeof de.isStyleTypeSupported=="function"?u=>de.isStyleTypeSupported(u.type):()=>!0}class ListProperties extends Plugin{static get requires(){return[ListPropertiesEditing,ListPropertiesUI]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class CheckTodoListCommand extends Command{constructor(u){super(u),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const u=this._getSelectedItems();this.value=this._getValue(u),this.isEnabled=!!u.length}execute(u={}){this.editor.model.change(t=>{const N=this._getSelectedItems(),me=u.forceValue===void 0?!this._getValue(N):u.forceValue;for(const pe of N)me?t.setAttribute("todoListChecked",!0,pe):t.removeAttribute("todoListChecked",pe)})}_getValue(u){return u.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const u=this.editor.model,t=u.schema,N=u.document.selection.getFirstRange(),me=N.start.parent,pe=[];t.checkAttribute(me,"todoListChecked")&&pe.push(...getAllListItemBlocks(me));for(const Le of N.getItems({shallow:!0}))t.checkAttribute(Le,"todoListChecked")&&!pe.includes(Le)&&pe.push(...getAllListItemBlocks(Le));return pe}}class TodoCheckboxChangeObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType",["change"])}onDomEvent(t){if(t.target){const N=this.view.domConverter.mapDomToView(t.target);N&&N.is("element","input")&&N.getAttribute("type")=="checkbox"&&N.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",t)}}}const ITEM_TOGGLE_KEYSTROKE$1=parseKeystroke("Ctrl+Enter");class TodoListEditing extends Plugin{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ListEditing]}init(){const u=this.editor,t=u.model,N=u.editing,me=u.plugins.get(ListEditing),Le=u.config.get("list.multiBlock")?"paragraph":"listItem";u.commands.add("todoList",new ListCommand(u,"todo")),u.commands.add("checkTodoList",new CheckTodoListCommand(u)),N.view.addObserver(TodoCheckboxChangeObserver),t.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),t.schema.addAttributeCheck(Ye=>{const nt=Ye.last;if(!nt.getAttribute("listItemId")||nt.getAttribute("listType")!="todo")return!1},"todoListChecked"),u.conversion.for("upcast").add(Ye=>{Ye.on("element:input",todoItemInputConverter()),Ye.on("element:li",todoListItemUpcastConverter(),{priority:"low"}),Ye.on("element:label",elementUpcastConsumingConverter({name:"label",classes:"todo-list__label"})),Ye.on("element:label",elementUpcastConsumingConverter({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),Ye.on("element:span",elementUpcastConsumingConverter({name:"span",classes:"todo-list__label__description"})),Ye.on("element:ul",attributeUpcastConsumingConverter({name:"ul",classes:"todo-list"}))}),u.conversion.for("downcast").elementToElement({model:Le,view:(Ye,{writer:nt})=>{if(isDescriptionBlock(Ye,me.getListAttributeNames()))return nt.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),me.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(Ye,nt,ot){nt=="todo"?Ye.addClass("todo-list",ot):Ye.removeClass("todo-list",ot)}}),me.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(Ye,nt,{dataPipeline:ot}){if(nt.getAttribute("listType")!="todo")return null;const ft=Ye.createUIElement("input",{type:"checkbox",...nt.getAttribute("todoListChecked")?{checked:"checked"}:null,...ot?{disabled:"disabled"}:{tabindex:"-1"}});if(ot)return ft;const mt=Ye.createContainerElement("span",{contenteditable:"false"},ft);return mt.getFillerOffset=()=>null,mt},canWrapElement(Ye){return isDescriptionBlock(Ye,me.getListAttributeNames())},createWrapperElement(Ye,nt,{dataPipeline:ot}){const ft=["todo-list__label"];return isDescriptionBlock(nt,me.getListAttributeNames())||ft.push("todo-list__label_without-description"),Ye.createAttributeElement(ot?"label":"span",{class:ft.join(" ")})}}),me.on("checkElement",(Ye,{modelElement:nt,viewElement:ot})=>{const ft=isDescriptionBlock(nt,me.getListAttributeNames());ot.hasClass("todo-list__label__description")!=ft&&(Ye.return=!0,Ye.stop())}),me.on("checkElement",(Ye,{modelElement:nt,viewElement:ot})=>{const ft=nt.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(nt);let mt=!1;const bt=u.editing.view.createPositionBefore(ot).getWalker({direction:"backward"});for(const{item:yt}of bt){if(yt.is("element")&&u.editing.mapper.toModelElement(yt))break;yt.is("element","input")&&yt.getAttribute("type")=="checkbox"&&(mt=!0)}mt!=ft&&(Ye.return=!0,Ye.stop())}),me.on("postFixer",(Ye,{listNodes:nt,writer:ot})=>{for(const{node:ft,previousNodeInList:mt}of nt){if(!mt||mt.getAttribute("listItemId")!=ft.getAttribute("listItemId"))continue;const bt=mt.hasAttribute("todoListChecked"),yt=ft.hasAttribute("todoListChecked");yt&&!bt?(ot.removeAttribute("todoListChecked",ft),Ye.return=!0):!yt&&bt&&(ot.setAttribute("todoListChecked",!0,ft),Ye.return=!0)}}),t.document.registerPostFixer(Ye=>{const nt=t.document.differ.getChanges();let ot=!1;for(const ft of nt)if(ft.type=="attribute"&&ft.attributeKey=="listType"){const mt=ft.range.start.nodeAfter;ft.attributeOldValue=="todo"&&mt.hasAttribute("todoListChecked")&&(Ye.removeAttribute("todoListChecked",mt),ot=!0)}else if(ft.type=="insert"&&ft.name!="$text")for(const{item:mt}of Ye.createRangeOn(ft.position.nodeAfter))mt.is("element")&&mt.getAttribute("listType")!="todo"&&mt.hasAttribute("todoListChecked")&&(Ye.removeAttribute("todoListChecked",mt),ot=!0);return ot}),this.listenTo(N.view.document,"keydown",(Ye,nt)=>{getCode(nt)===ITEM_TOGGLE_KEYSTROKE$1&&(u.execute("checkTodoList"),Ye.stop())},{priority:"high"}),this.listenTo(N.view.document,"todoCheckboxChange",(Ye,nt)=>{const ot=nt.target;if(!ot||!ot.is("element","input"))return;const ft=N.view.createPositionAfter(ot),bt=N.mapper.toModelPosition(ft).parent;bt&&isListItemBlock(bt)&&bt.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(bt)}),this.listenTo(N.view.document,"arrowKey",jumpOverCheckmarkOnSideArrowKeyPress$1(t,u.locale),{context:"$text"}),this.listenTo(N.mapper,"viewToModelPosition",(Ye,nt)=>{const ot=nt.viewPosition.parent,ft=ot.is("attributeElement","li")&&nt.viewPosition.offset==0,mt=isLabelElement(ot)&&nt.viewPosition.offset<=1,bt=ot.is("element","span")&&ot.getAttribute("contenteditable")=="false"&&isLabelElement(ot.parent);if(!ft&&!mt&&!bt)return;const yt=nt.modelPosition.nodeAfter;yt&&yt.getAttribute("listType")=="todo"&&(nt.modelPosition=t.createPositionAt(yt,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(u){const t=this.editor,N=t.model,me=Array.from(N.document.selection.getRanges());N.change(pe=>{pe.setSelection(u,"end"),t.execute("checkTodoList"),pe.setSelection(me)})}_initAriaAnnouncements(){const{model:u,ui:t,t:N}=this.editor;let me=null;t&&u.document.selection.on("change:range",()=>{const pe=u.document.selection.focus.parent,Le=isTodoListItemElement(me),Ye=isTodoListItemElement(pe);Le&&!Ye?t.ariaLiveAnnouncer.announce(N("Leaving a to-do list")):!Le&&Ye&&t.ariaLiveAnnouncer.announce(N("Entering a to-do list")),me=pe})}}function todoListItemUpcastConverter(){return(de,u,t)=>{const{writer:N,schema:me}=t;if(!u.modelRange)return;const pe=Array.from(u.modelRange.getItems({shallow:!0})).filter(Le=>Le.getAttribute("listType")==="todo"&&me.checkAttribute(Le,"listItemId")).reduce((Le,Ye)=>{const nt=Ye.getAttribute("listItemId");return Le.has(nt)||Le.set(nt,getAllListItemBlocks(Ye)),Le},new Map);for(const[,Le]of pe.entries())if(Le.some(Ye=>Ye.getAttribute("todoListChecked")))for(const Ye of Le)N.setAttribute("todoListChecked",!0,Ye)}}function todoItemInputConverter(){return(de,u,t)=>{const N=u.modelCursor,me=N.parent,pe=u.viewItem;if(!t.consumable.test(pe,{name:!0})||pe.getAttribute("type")!="checkbox"||!N.isAtStart||!me.hasAttribute("listType"))return;t.consumable.consume(pe,{name:!0});const Le=t.writer;Le.setAttribute("listType","todo",me),u.viewItem.hasAttribute("checked")&&Le.setAttribute("todoListChecked",!0,me),u.modelRange=Le.createRange(N)}}function elementUpcastConsumingConverter(de){const u=new Matcher(de);return(t,N,me)=>{const pe=u.match(N.viewItem);pe&&me.consumable.consume(N.viewItem,pe.match)&&Object.assign(N,me.convertChildren(N.viewItem,N.modelCursor))}}function attributeUpcastConsumingConverter(de){const u=new Matcher(de);return(t,N,me)=>{const pe=u.match(N.viewItem);if(!pe)return;const Le=pe.match;Le.name=!1,me.consumable.consume(N.viewItem,Le)}}function isDescriptionBlock(de,u){return(de.is("element","paragraph")||de.is("element","listItem"))&&de.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(de)&&hasOnlyListAttributes(de,u)}function hasOnlyListAttributes(de,u){for(const t of de.getAttributeKeys())if(!t.startsWith("selection:")&&!u.includes(t))return!1;return!0}function jumpOverCheckmarkOnSideArrowKeyPress$1(de,u){return(t,N)=>{const me=getLocalizedArrowKeyCodeDirection(N.keyCode,u.contentLanguageDirection),pe=de.schema,Le=de.document.selection;if(!Le.isCollapsed)return;const Ye=Le.getFirstPosition(),nt=Ye.parent;if(me=="right"&&Ye.isAtEnd){const ot=pe.getNearestSelectionRange(de.createPositionAfter(nt),"forward");if(!ot)return;const ft=ot.start.parent;ft&&isListItemBlock(ft)&&ft.getAttribute("listType")=="todo"&&(de.change(mt=>mt.setSelection(ot)),N.preventDefault(),N.stopPropagation(),t.stop())}else if(me=="left"&&Ye.isAtStart&&isListItemBlock(nt)&&nt.getAttribute("listType")=="todo"){const ot=pe.getNearestSelectionRange(de.createPositionBefore(nt),"backward");if(!ot)return;de.change(ft=>ft.setSelection(ot)),N.preventDefault(),N.stopPropagation(),t.stop()}}}function isLabelElement(de){return!!de&&de.is("attributeElement")&&de.hasClass("todo-list__label")}function isTodoListItemElement(de){return!de||!de.is("element","paragraph")&&!de.is("element","listItem")?!1:de.getAttribute("listType")=="todo"}class TodoListUI extends Plugin{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor.t;createUIComponents(this.editor,"todoList",u("To-do List"),icons.todoList)}}class TodoList extends Plugin{static get requires(){return[TodoListEditing,TodoListUI]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelToViewUrlAttributeConverter(de,u){const t=(N,me,pe)=>{if(!pe.consumable.consume(me.item,N.name))return;const Le=me.attributeNewValue,Ye=pe.writer,nt=pe.mapper.toViewElement(me.item),ot=[...nt.getChildren()].find(mt=>mt.getCustomProperty("media-content"));Ye.remove(ot);const ft=de.getMediaViewElement(Ye,Le,u);Ye.insert(Ye.createPositionAt(nt,0),ft)};return N=>{N.on("attribute:url:media",t)}}function toMediaWidget(de,u,t){return u.setCustomProperty("media",!0,de),toWidget(de,u,{label:t})}function getSelectedMediaViewWidget(de){const u=de.getSelectedElement();return u&&isMediaWidget(u)?u:null}function isMediaWidget(de){return!!de.getCustomProperty("media")&&isWidget(de)}function createMediaFigureElement(de,u,t,N){return de.createContainerElement("figure",{class:"media"},[u.getMediaViewElement(de,t,N),de.createSlot()])}function getSelectedMediaModelWidget(de){const u=de.getSelectedElement();return u&&u.is("element","media")?u:null}function insertMedia(de,u,t,N){de.change(me=>{const pe=me.createElement("media",{url:u});de.insertObject(pe,t,null,{setSelection:"on",findOptimalPosition:N?"auto":void 0})})}class MediaEmbedCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,N=getSelectedMediaModelWidget(t);this.value=N?N.getAttribute("url"):void 0,this.isEnabled=isMediaSelected(t)||isAllowedInParent$1(t,u)}execute(u){const t=this.editor.model,N=t.document.selection,me=getSelectedMediaModelWidget(N);me?t.change(pe=>{pe.setAttribute("url",u,me)}):insertMedia(t,u,N,!0)}}function isAllowedInParent$1(de,u){let N=findOptimalInsertionRange(de,u).start.parent;return N.isEmpty&&!u.schema.isLimit(N)&&(N=N.parent),u.schema.checkChild(N,"media")}function isMediaSelected(de){const u=de.getSelectedElement();return!!u&&u.name==="media"}var mediaPlaceholderIcon='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const mediaPlaceholderIconViewBox="0 0 64 42";class MediaRegistry{constructor(u,t){xt(this,"locale");xt(this,"providerDefinitions");const N=t.providers,me=t.extraProviders||[],pe=new Set(t.removeProviders),Le=N.concat(me).filter(Ye=>{const nt=Ye.name;return nt?!pe.has(nt):(logWarning("media-embed-no-provider-name",{provider:Ye}),!1)});this.locale=u,this.providerDefinitions=Le}hasMedia(u){return!!this._getMedia(u)}getMediaViewElement(u,t,N){return this._getMedia(t).getViewElement(u,N)}_getMedia(u){if(!u)return new Media(this.locale);u=u.trim();for(const t of this.providerDefinitions){const N=t.html,me=toArray$2(t.url);for(const pe of me){const Le=this._getUrlMatches(u,pe);if(Le)return new Media(this.locale,u,Le,N)}}return null}_getUrlMatches(u,t){let N=u.match(t);if(N)return N;let me=u.replace(/^https?:\/\//,"");return N=me.match(t),N||(me=me.replace(/^www\./,""),N=me.match(t),N)?N:null}}class Media{constructor(u,t,N,me){xt(this,"url");xt(this,"_locale");xt(this,"_match");xt(this,"_previewRenderer");this.url=this._getValidUrl(t),this._locale=u,this._match=N,this._previewRenderer=me}getViewElement(u,t){const N={};let me;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(N["data-oembed-url"]=this.url),t.renderForEditingView&&(N.class="ck-media__wrapper");const pe=this._getPreviewHtml(t);me=u.createRawElement("div",N,(Le,Ye)=>{Ye.setContentOf(Le,pe)})}else this.url&&(N.url=this.url),me=u.createEmptyElement(t.elementName,N);return u.setCustomProperty("media-content",!0,me),me}_getPreviewHtml(u){return this._previewRenderer?this._previewRenderer(this._match):this.url&&u.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const u=new IconView,t=this._locale.t;return u.content=mediaPlaceholderIcon,u.viewBox=mediaPlaceholderIconViewBox,new Template({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[u]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(u){return u?u.match(/^https?/)?u:"https://"+u:null}}class MediaEmbedEditing extends Plugin{constructor(t){super(t);xt(this,"registry");t.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:N=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${N[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:N=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${N[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:N=>{const me=N[1],pe=N[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${me}${pe?`?start=${pe}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:N=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${N[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new MediaRegistry(t.locale,t.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model.schema,me=t.t,pe=t.conversion,Le=t.config.get("mediaEmbed.previewsInData"),Ye=t.config.get("mediaEmbed.elementName"),nt=this.registry;t.commands.add("mediaEmbed",new MediaEmbedCommand(t)),N.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),pe.for("dataDowncast").elementToStructure({model:"media",view:(ot,{writer:ft})=>{const mt=ot.getAttribute("url");return createMediaFigureElement(ft,nt,mt,{elementName:Ye,renderMediaPreview:!!mt&&Le})}}),pe.for("dataDowncast").add(modelToViewUrlAttributeConverter(nt,{elementName:Ye,renderMediaPreview:Le})),pe.for("editingDowncast").elementToStructure({model:"media",view:(ot,{writer:ft})=>{const mt=ot.getAttribute("url"),bt=createMediaFigureElement(ft,nt,mt,{elementName:Ye,renderForEditingView:!0});return toMediaWidget(bt,ft,me("media widget"))}}),pe.for("editingDowncast").add(modelToViewUrlAttributeConverter(nt,{elementName:Ye,renderForEditingView:!0})),pe.for("upcast").elementToElement({view:ot=>["oembed",Ye].includes(ot.name)&&ot.getAttribute("url")?{name:!0}:null,model:(ot,{writer:ft})=>{const mt=ot.getAttribute("url");return nt.hasMedia(mt)?ft.createElement("media",{url:mt}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(ot,{writer:ft})=>{const mt=ot.getAttribute("data-oembed-url");return nt.hasMedia(mt)?ft.createElement("media",{url:mt}):null}}).add(ot=>{const ft=(mt,bt,yt)=>{if(!yt.consumable.consume(bt.viewItem,{name:!0,classes:"media"}))return;const{modelRange:_t,modelCursor:Ct}=yt.convertChildren(bt.viewItem,bt.modelCursor);bt.modelRange=_t,bt.modelCursor=Ct,first(_t.getItems())||yt.consumable.revert(bt.viewItem,{name:!0,classes:"media"})};ot.on("element:figure",ft)})}}const URL_REGEXP=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class AutoMediaEmbed extends Plugin{constructor(t){super(t);xt(this,"_timeoutId");xt(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,Delete,Undo]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.model.document,me=t.plugins.get("ClipboardPipeline");this.listenTo(me,"inputTransformation",()=>{const Le=N.selection.getFirstRange(),Ye=LivePosition.fromPosition(Le.start);Ye.stickiness="toPrevious";const nt=LivePosition.fromPosition(Le.end);nt.stickiness="toNext",N.once("change:data",()=>{this._embedMediaBetweenPositions(Ye,nt),Ye.detach(),nt.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(t,N){const me=this.editor,pe=me.plugins.get(MediaEmbedEditing).registry,Le=new LiveRange(t,N),Ye=Le.getWalker({ignoreElementEnd:!0});let nt="";for(const ft of Ye)ft.item.is("$textProxy")&&(nt+=ft.item.data);if(nt=nt.trim(),!nt.match(URL_REGEXP)){Le.detach();return}if(!pe.hasMedia(nt)){Le.detach();return}if(!me.commands.get("mediaEmbed").isEnabled){Le.detach();return}this._positionToInsert=LivePosition.fromPosition(t),this._timeoutId=global$1.window.setTimeout(()=>{me.model.change(ft=>{this._timeoutId=null,ft.remove(Le),Le.detach();let mt=null;this._positionToInsert.root.rootName!=="$graveyard"&&(mt=this._positionToInsert),insertMedia(me.model,nt,mt,!1),this._positionToInsert.detach(),this._positionToInsert=null}),me.plugins.get(Delete).requestUndoOnBackspace()},100)}}class MediaFormView extends View{constructor(t,N){super(N);xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"urlInputView");xt(this,"_validators");xt(this,"_urlInputViewInfoDefault");xt(this,"_urlInputViewInfoTip");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),submitHandler({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(t){this.urlInputView.fieldView.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const N=t(this);if(N)return this.urlInputView.errorText=N,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,N=new LabeledFieldView(this.locale,createLabeledInputText),me=N.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),N.label=t("Media URL"),N.infoText=this._urlInputViewInfoDefault,me.inputMode="url",me.on("input",()=>{N.infoText=me.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=me.element.value.trim()}),N}}var mediaIcon='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class MediaEmbedUI extends Plugin{constructor(){super(...arguments);xt(this,"_formView")}static get requires(){return[MediaEmbedEditing,Dialog]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("mediaEmbed",()=>{const N=this.editor.locale.t,me=this._createDialogButton(ButtonView);return me.tooltip=!0,me.label=N("Insert media"),me}),t.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const N=this.editor.locale.t,me=this._createDialogButton(MenuBarMenuListItemButtonView);return me.label=N("Media"),me})}_createDialogButton(t){const N=this.editor,me=new t(N.locale),pe=N.commands.get("mediaEmbed"),Le=this.editor.plugins.get("Dialog");return me.icon=mediaIcon,me.bind("isEnabled").to(pe,"isEnabled"),me.on("execute",()=>{Le.id==="mediaEmbed"?Le.hide():this._showDialog()}),me}_showDialog(){const t=this.editor,N=t.plugins.get("Dialog"),me=t.commands.get("mediaEmbed"),pe=t.locale.t;if(!this._formView){const Le=t.plugins.get(MediaEmbedEditing).registry;this._formView=new(CssTransitionDisablerMixin(MediaFormView))(getFormValidators(t.t,Le),t.locale),this._formView.on("submit",()=>this._handleSubmitForm())}N.show({id:"mediaEmbed",title:pe("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=me.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:pe("Cancel"),withText:!0,onExecute:()=>N.hide()},{label:pe("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const t=this.editor,N=t.plugins.get("Dialog");this._formView.isValid()&&(t.execute("mediaEmbed",this._formView.url),N.hide(),t.editing.view.focus())}}function getFormValidators(de,u){return[t=>{if(!t.url.length)return de("The URL must not be empty.")},t=>{if(!u.hasMedia(t.url))return de("This media URL is not supported.")}]}class MediaEmbed extends Plugin{static get requires(){return[MediaEmbedEditing,MediaEmbedUI,AutoMediaEmbed,Widget]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}class MediaEmbedToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"MediaEmbedToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t;u.plugins.get(WidgetToolbarRepository).register("mediaEmbed",{ariaLabel:t("Media toolbar"),items:u.config.get("mediaEmbed.toolbar")||[],getRelatedElement:getSelectedMediaViewWidget})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BRACKET_PAIRS={"(":")","[":"]","{":"}"};class MentionCommand extends Command{constructor(u){super(u),this._isEnabledBasedOnSelection=!1}refresh(){const u=this.editor.model,t=u.document;this.isEnabled=u.schema.checkAttributeInSelection(t.selection,"mention")}execute(u){const t=this.editor.model,me=t.document.selection,pe=typeof u.mention=="string"?{id:u.mention}:u.mention,Le=pe.id,Ye=u.range||me.getFirstRange();if(!t.canEditAt(Ye))return;const nt=u.text||Le,ot=_addMentionAttributes({_text:nt,id:Le},pe);if(!Le.startsWith(u.marker))throw new CKEditorError("mentioncommand-incorrect-id",this);t.change(ft=>{const mt=toMap(me.getAttributes()),bt=new Map(mt.entries());bt.set("mention",ot);const yt=t.insertContent(ft.createText(nt,bt),Ye),_t=yt.start.nodeBefore,Ct=yt.end.nodeAfter,Tt=Ct&&Ct.is("$text")&&Ct.data.startsWith(" ");let At=!1;if(_t&&Ct&&_t.is("$text")&&Ct.is("$text")){const It=_t.data.slice(-1),Pt=It in BRACKET_PAIRS,Bt=Pt&&Ct.data.startsWith(BRACKET_PAIRS[It]);At=Pt&&Bt}!At&&!Tt&&t.insertContent(ft.createText(" ",mt),Ye.start.getShiftedBy(nt.length))})}}class MentionEditing extends Plugin{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=u.model,N=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),u.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:me=>_toMentionAttribute(me)}}),u.conversion.for("downcast").attributeToElement({model:"mention",view:createViewMentionElement}),u.conversion.for("downcast").add(preventPartialMentionDowncast),N.registerPostFixer(me=>removePartialMentionPostFixer(me,N,t.schema)),N.registerPostFixer(me=>extendAttributeOnMentionPostFixer(me,N)),N.registerPostFixer(me=>selectionMentionAttributePostFixer(me,N)),u.commands.add("mention",new MentionCommand(u))}}function _addMentionAttributes(de,u){return Object.assign({uid:uid()},de,u||{})}function _toMentionAttribute(de,u){const t=de.getAttribute("data-mention"),N=de.getChild(0);if(!N)return;const me={id:t,_text:N.data};return _addMentionAttributes(me,u)}function preventPartialMentionDowncast(de){de.on("attribute:mention",(u,t,N)=>{const me=t.attributeNewValue;if(!t.item.is("$textProxy")||!me)return;const pe=t.range.start;(pe.textNode||pe.nodeAfter).data!=me._text&&N.consumable.consume(t.item,u.name)},{priority:"highest"})}function createViewMentionElement(de,{writer:u}){if(!de)return;const t={class:"mention","data-mention":de.id},N={id:de.uid,priority:20};return u.createAttributeElement("span",t,N)}function selectionMentionAttributePostFixer(de,u){const t=u.selection,N=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&shouldNotTypeWithMentionAt(N)?(de.removeSelectionAttribute("mention"),!0):!1}function shouldNotTypeWithMentionAt(de){const u=de.isAtStart;return de.nodeBefore&&de.nodeBefore.is("$text")||u}function removePartialMentionPostFixer(de,u,t){const N=u.differ.getChanges();let me=!1;for(const pe of N){if(pe.type=="attribute")continue;const Le=pe.position;if(pe.name=="$text"){const Ye=Le.textNode&&Le.textNode.nextSibling;me=checkAndFix(Le.textNode,de)||me,me=checkAndFix(Ye,de)||me,me=checkAndFix(Le.nodeBefore,de)||me,me=checkAndFix(Le.nodeAfter,de)||me}if(pe.name!="$text"&&pe.type=="insert"){const Ye=Le.nodeAfter;for(const nt of de.createRangeIn(Ye).getItems())me=checkAndFix(nt,de)||me}if(pe.type=="insert"&&t.isInline(pe.name)){const Ye=Le.nodeAfter&&Le.nodeAfter.nextSibling;me=checkAndFix(Le.nodeBefore,de)||me,me=checkAndFix(Ye,de)||me}}return me}function extendAttributeOnMentionPostFixer(de,u){const t=u.differ.getChanges();let N=!1;for(const me of t)if(me.type==="attribute"&&me.attributeKey!="mention"){const pe=me.range.start.nodeBefore,Le=me.range.end.nodeAfter;for(const Ye of[pe,Le])isBrokenMentionNode(Ye)&&Ye.getAttribute(me.attributeKey)!=me.attributeNewValue&&(de.setAttribute(me.attributeKey,me.attributeNewValue,Ye),N=!0)}return N}function isBrokenMentionNode(de){if(!de||!(de.is("$text")||de.is("$textProxy"))||!de.hasAttribute("mention"))return!1;const u=de.data,N=de.getAttribute("mention")._text;return u!=N}function checkAndFix(de,u){return isBrokenMentionNode(de)?(u.removeAttribute("mention",de),!0):!1}class MentionsView extends ListView{constructor(t){super(t);xt(this,"selected");xt(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const t=this.selected,N=this.items.getIndex(t);this.select(N+1)}selectPrevious(){const t=this.selected,N=this.items.getIndex(t);this.select(N-1)}select(t){let N=0;t>0&&t<this.items.length?N=t:t<0&&(N=this.items.length-1);const me=this.items.get(N);this.selected!==me&&(this.selected&&this.selected.removeHighlight(),me.highlight(),this.selected=me,this._isItemVisibleInScrolledArea(me)||(this.element.scrollTop=me.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(t){return new Rect(this.element).contains(new Rect(t.element))}}class DomWrapperView extends View{constructor(t,N){super(t);xt(this,"domElement");this.template=void 0,this.domElement=N,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(me,pe,Le)=>{Le?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class MentionListItemView extends ListItemView{constructor(){super(...arguments);xt(this,"item");xt(this,"marker")}highlight(){const t=this.children.first;t.isOn=!0}removeHighlight(){const t=this.children.first;t.isOn=!1}}const VERTICAL_SPACING=3,defaultHandledKeyCodes=[keyCodes.arrowup,keyCodes.arrowdown,keyCodes.esc],defaultCommitKeyCodes=[keyCodes.enter,keyCodes.tab];class MentionUI extends Plugin{constructor(t){super(t);xt(this,"_mentionsView");xt(this,"_mentionsConfigurations");xt(this,"_balloon");xt(this,"_items",new Collection);xt(this,"_lastRequested");xt(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=debounce(this._requestFeed,100),t.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const t=this.editor,N=t.config.get("mention.commitKeys")||defaultCommitKeyCodes,me=defaultHandledKeyCodes.concat(N);this._balloon=t.plugins.get(ContextualBalloon),t.editing.view.document.on("keydown",(Ye,nt)=>{Le(nt.keyCode)&&this._isUIVisible&&(nt.preventDefault(),Ye.stop(),nt.keyCode==keyCodes.arrowdown&&this._mentionsView.selectNext(),nt.keyCode==keyCodes.arrowup&&this._mentionsView.selectPrevious(),N.includes(nt.keyCode)&&this._mentionsView.executeSelected(),nt.keyCode==keyCodes.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),clickOutsideHandler({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const pe=t.config.get("mention.feeds");for(const Ye of pe){const{feed:nt,marker:ot,dropdownLimit:ft}=Ye;if(!isValidMentionMarker(ot))throw new CKEditorError("mentionconfig-incorrect-marker",null,{marker:ot});const mt=typeof nt=="function"?nt.bind(this.editor):createFeedCallback(nt),bt=Ye.itemRenderer,yt={marker:ot,feedCallback:mt,itemRenderer:bt,dropdownLimit:ft};this._mentionsConfigurations.set(ot,yt)}this._setupTextWatcher(pe),this.listenTo(t,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(Ye,nt)=>this._handleFeedResponse(nt)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function Le(Ye){return me.includes(Ye)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const t=this.editor.locale,N=new MentionsView(t);return N.items.bindTo(this._items).using(me=>{const{item:pe,marker:Le}=me,{dropdownLimit:Ye}=this._mentionsConfigurations.get(Le),nt=Ye||this.editor.config.get("mention.dropdownLimit")||10;if(N.items.length>=nt)return null;const ot=new MentionListItemView(t),ft=this._renderItem(pe,Le);return ft.delegate("execute").to(ot),ot.children.add(ft),ot.item=pe,ot.marker=Le,ot.on("execute",()=>{N.fire("execute",{item:pe,marker:Le})}),ot}),N.on("execute",(me,pe)=>{const Le=this.editor,Ye=Le.model,nt=pe.item,ot=pe.marker,ft=Le.model.markers.get("mention"),mt=Ye.createPositionAt(Ye.document.selection.focus),bt=Ye.createPositionAt(ft.getStart()),yt=Ye.createRange(bt,mt);this._hideUIAndRemoveMarker(),Le.execute("mention",{mention:nt,text:nt.text,marker:ot,range:yt}),Le.editing.view.focus()}),N}_getItemRenderer(t){const{itemRenderer:N}=this._mentionsConfigurations.get(t);return N}_requestFeed(t,N){this._lastRequested=N;const{feedCallback:me}=this._mentionsConfigurations.get(t),pe=me(N);if(!(pe instanceof Promise)){this.fire("requestFeed:response",{feed:pe,marker:t,feedText:N});return}pe.then(Ye=>{this._lastRequested==N?this.fire("requestFeed:response",{feed:Ye,marker:t,feedText:N}):this.fire("requestFeed:discarded",{feed:Ye,marker:t,feedText:N})}).catch(Ye=>{this.fire("requestFeed:error",{error:Ye}),logWarning("mention-feed-callback-error",{marker:t})})}_setupTextWatcher(t){const N=this.editor,me=t.map(Ye=>({...Ye,pattern:createRegExp(Ye.marker,Ye.minimumCharacters||0)})),pe=new TextWatcher(N.model,createTestCallback(me));pe.on("matched",(Ye,nt)=>{const ot=getLastValidMarkerInText(me,nt.text),mt=N.model.document.selection.focus,bt=N.model.createPositionAt(mt.parent,ot.position);if(isPositionInExistingMention(mt)||isMarkerInExistingMention(bt)){this._hideUIAndRemoveMarker();return}const yt=requestFeedText(ot,nt.text),_t=ot.marker.length+yt.length,Ct=mt.getShiftedBy(-_t),Tt=mt.getShiftedBy(-yt.length),At=N.model.createRange(Ct,Tt);if(checkIfStillInCompletionMode(N)){const It=N.model.markers.get("mention");N.model.change(Pt=>{Pt.updateMarker(It,{range:At})})}else N.model.change(It=>{It.addMarker("mention",{range:At,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(ot.marker,yt)}),pe.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const Le=N.commands.get("mention");return pe.bind("isEnabled").to(Le),pe}_handleFeedResponse(t){const{feed:N,marker:me}=t;if(!checkIfStillInCompletionMode(this.editor))return;this._items.clear();for(const Le of N){const Ye=typeof Le!="object"?{id:Le,text:Le}:Le;this._items.add({item:Ye,marker:me})}const pe=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(pe):this._hideUIAndRemoveMarker()}_showOrUpdateUI(t){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(t,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(t,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),checkIfStillInCompletionMode(this.editor)&&this.editor.model.change(t=>t.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(t,N){const me=this.editor;let pe,Le=t.id;const Ye=this._getItemRenderer(N);if(Ye){const nt=Ye(t);typeof nt!="string"?pe=new DomWrapperView(me.locale,nt):Le=nt}if(!pe){const nt=new ButtonView(me.locale);nt.label=Le,nt.withText=!0,pe=nt}return pe}_getBalloonPanelPositionData(t,N){const me=this.editor,pe=me.editing,Le=pe.view.domConverter,Ye=pe.mapper,nt=me.locale.uiLanguageDirection;return{target:()=>{let ot=t.getRange();ot.start.root.rootName=="$graveyard"&&(ot=me.model.document.selection.getFirstRange());const ft=Ye.toViewRange(ot);return Rect.getDomRangeRects(Le.viewRangeToDom(ft)).pop()},limiter:()=>{const ot=this.editor.editing.view,mt=ot.document.selection.editableElement;return mt?ot.domConverter.mapViewToDom(mt.root):null},positions:getBalloonPanelPositions(N,nt)}}}function getBalloonPanelPositions(de,u){const t={caret_se:N=>({top:N.bottom+VERTICAL_SPACING,left:N.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(N,me)=>({top:N.top-me.height-VERTICAL_SPACING,left:N.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(N,me)=>({top:N.bottom+VERTICAL_SPACING,left:N.right-me.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(N,me)=>({top:N.top-me.height-VERTICAL_SPACING,left:N.right-me.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,de)?[t[de]]:u!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function getLastValidMarkerInText(de,u){let t;for(const N of de){const me=u.lastIndexOf(N.marker);me>0&&!u.substring(me-1).match(N.pattern)||(!t||me>=t.position)&&(t={marker:N.marker,position:me,minimumCharacters:N.minimumCharacters,pattern:N.pattern})}return t}function createRegExp(de,u){const t=u==0?"*":`{${u},}`,N=env.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,me=".";de=de.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const pe=`(?:^|[ ${N}])(${de})(${me}${t})$`;return new RegExp(pe,"u")}function createTestCallback(de){return t=>{const N=getLastValidMarkerInText(de,t);if(!N)return!1;let me=0;N.position!==0&&(me=N.position-1);const pe=t.substring(me);return N.pattern.test(pe)}}function requestFeedText(de,u){let t=0;de.position!==0&&(t=de.position-1);const N=createRegExp(de.marker,0);return u.substring(t).match(N)[2]}function createFeedCallback(de){return u=>de.filter(N=>(typeof N=="string"?N:String(N.id)).toLowerCase().includes(u.toLowerCase()))}function isPositionInExistingMention(de){const u=de.textNode&&de.textNode.hasAttribute("mention"),t=de.nodeBefore;return u||t&&t.is("$text")&&t.hasAttribute("mention")}function isMarkerInExistingMention(de){const u=de.nodeAfter;return u&&u.is("$text")&&u.hasAttribute("mention")}function isValidMentionMarker(de){return!!de}function checkIfStillInCompletionMode(de){return de.model.markers.has("mention")}class Mention extends Plugin{toMentionAttribute(u,t){return _toMentionAttribute(u,t)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[MentionEditing,MentionUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function transformBookmarks(de,u){const t=[];for(const N of u.createRangeIn(de)){const me=N.item;me.is("element","a")&&!me.hasAttribute("href")&&(me.hasAttribute("id")||me.hasAttribute("name"))&&t.push(me)}for(const N of t){const me=N.parent.getChildIndex(N)+1,pe=N.getChildren();u.insertChild(me,pe,N.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertCssLengthToPx(de){const u=parseFloat(de);return de.endsWith("pt")?toPx(u*96/72):de.endsWith("pc")?toPx(u*12*96/72):de.endsWith("in")?toPx(u*96):de.endsWith("cm")?toPx(u*96/2.54):de.endsWith("mm")?toPx(u/10*96/2.54):de}function isPx(de){return de!==void 0&&de.endsWith("px")}function toPx(de){return de.toFixed(2).replace(/\.?0+$/,"")+"px"}function transformListItemLikeElementsIntoLists(de,u,t){if(!de.childCount)return;const N=new UpcastWriter(de.document),me=findAllItemLikeElements(de,N);if(!me.length)return;const pe={},Le=[];for(const Ye of me)if(Ye.indent!==void 0){isListContinuation(Ye)||(Le.length=0);const nt=`${Ye.id}:${Ye.indent}`,ot=Math.min(Ye.indent-1,Le.length);if(ot<Le.length&&Le[ot].id!==Ye.id&&(Le.length=ot),ot<Le.length-1)Le.length=ot+1;else{const mt=detectListStyle(Ye,u);if(ot>Le.length-1||Le[ot].listElement.name!=mt.type){ot==0&&mt.type=="ol"&&Ye.id!==void 0&&pe[nt]&&(mt.startIndex=pe[nt]);const bt=createNewEmptyList(mt,N,t);if(isPx(Ye.marginLeft)&&(ot==0||isPx(Le[ot-1].marginLeft))){let yt=Ye.marginLeft;ot>0&&(yt=toPx(parseFloat(yt)-parseFloat(Le[ot-1].marginLeft))),N.setStyle("padding-left",yt,bt)}if(Le.length==0){const yt=Ye.element.parent,_t=yt.getChildIndex(Ye.element)+1;N.insertChild(_t,bt,yt)}else{const yt=Le[ot-1].listItemElements;N.appendChild(bt,yt[yt.length-1])}Le[ot]={...Ye,listElement:bt,listItemElements:[]},ot==0&&Ye.id!==void 0&&(pe[nt]=mt.startIndex||1)}}const ft=Ye.element.name=="li"?Ye.element:N.createElement("li");N.appendChild(ft,Le[ot].listElement),Le[ot].listItemElements.push(ft),ot==0&&Ye.id!==void 0&&pe[nt]++,Ye.element!=ft&&N.appendChild(Ye.element,ft),removeBulletElement(Ye.element,N),N.removeStyle("text-indent",Ye.element),N.removeStyle("margin-left",Ye.element)}else{const nt=Le.find(ot=>ot.marginLeft==Ye.marginLeft);if(nt){const ot=nt.listItemElements;N.appendChild(Ye.element,ot[ot.length-1]),N.removeStyle("margin-left",Ye.element)}else Le.length=0}}function unwrapParagraphInListItem(de,u){for(const t of u.createRangeIn(de)){const N=t.item;if(N.is("element","li")){const me=N.getChild(0);me&&me.is("element","p")&&u.unwrapElement(me)}}}function findAllItemLikeElements(de,u){const t=u.createRangeIn(de),N=[],me=new Set;for(const pe of t.getItems()){if(!pe.is("element")||!pe.name.match(/^(p|h\d+|li|div)$/))continue;let Le=getMarginLeftNormalized(pe);if(Le!==void 0&&parseFloat(Le)==0&&!Array.from(pe.getClassNames()).find(Ye=>Ye.startsWith("MsoList"))&&(Le=void 0),pe.hasStyle("mso-list")||Le!==void 0&&me.has(Le)){const Ye=getListItemData(pe);N.push({element:pe,id:Ye.id,order:Ye.order,indent:Ye.indent,marginLeft:Le}),Le!==void 0&&me.add(Le)}else me.clear()}return N}function isListContinuation(de){const u=de.element.previousSibling;return isList(u||de.element.parent)}function isList(de){return de.is("element","ol")||de.is("element","ul")}function detectListStyle(de,u){const t=new RegExp(`@list l${de.id}:level${de.indent}\\s*({[^}]*)`,"gi"),N=/mso-level-number-format:([^;]{0,100});/gi,me=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,pe=new RegExp(`@list\\s+l${de.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),Le=new RegExp(`@list l${de.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),Ye=pe.exec(u),nt=Le.exec(u),ot=Ye&&!nt,ft=t.exec(u);let mt="decimal",bt="ol",yt=null;if(ft&&ft[1]){const _t=N.exec(ft[1]);if(_t&&_t[1]&&(mt=_t[1].trim(),bt=mt!=="bullet"&&mt!=="image"?"ol":"ul"),mt==="bullet"){const Ct=findBulletedListStyle(de.element);Ct&&(mt=Ct)}else{const Ct=me.exec(ft[1]);Ct&&Ct[1]&&(yt=parseInt(Ct[1]))}ot&&(bt="ol")}return{type:bt,startIndex:yt,style:mapListStyleDefinition(mt),isLegalStyleList:ot}}function findBulletedListStyle(de){if(de.name=="li"&&de.parent.name=="ul"&&de.parent.hasAttribute("type"))return de.parent.getAttribute("type");const u=findListMarkerNode(de);if(!u)return null;const t=u._data;return t==="o"?"circle":t===""?"disc":t===""?"square":null}function findListMarkerNode(de){if(de.getChild(0).is("$text"))return null;for(const u of de.getChildren()){if(!u.is("element","span"))continue;const t=u.getChild(0);if(t)return t.is("$text")?t:t.getChild(0)}/* istanbul ignore next -- @preserve */return null}function mapListStyleDefinition(de){if(de.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(de){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return de;default:return null}}function createNewEmptyList(de,u,t){const N=u.createElement(de.type);return de.style&&u.setStyle("list-style-type",de.style,N),de.startIndex&&de.startIndex>1&&u.setAttribute("start",de.startIndex,N),de.isLegalStyleList&&t&&u.addClass("legal-list",N),N}function getListItemData(de){const u=de.getStyle("mso-list");if(u===void 0)return{};const t=u.match(/(^|\s{1,100})l(\d+)/i),N=u.match(/\s{0,100}lfo(\d+)/i),me=u.match(/\s{0,100}level(\d+)/i);return t&&N&&me?{id:t[2],order:N[1],indent:parseInt(me[1])}:{indent:1}}function removeBulletElement(de,u){const t=new Matcher({name:"span",styles:{"mso-list":"Ignore"}}),N=u.createRangeIn(de);for(const me of N)me.type==="elementStart"&&t.match(me.item)&&u.remove(me.item)}function getMarginLeftNormalized(de){const u=de.getStyle("margin-left");return u===void 0||u.endsWith("px")?u:convertCssLengthToPx(u)}function replaceImagesSourceWithBase64(de,u){if(!de.childCount)return;const t=new UpcastWriter(de.document),N=findAllShapesIds(de,t);removeAllImgElementsRepresentingShapes(N,de,t),insertMissingImgs(N,de,t),removeAllShapeElements(de,t);const me=findAllImageElementsWithLocalSource(de,t);me.length&&replaceImagesFileSourceWithInlineRepresentation(me,extractImageDataFromRtf(u),t)}function _convertHexToBase64(de){return btoa(de.match(/\w{2}/g).map(u=>String.fromCharCode(parseInt(u,16))).join(""))}function findAllShapesIds(de,u){const t=u.createRangeIn(de),N=new Matcher({name:/v:(.+)/}),me=[];for(const pe of t){if(pe.type!="elementStart")continue;const Le=pe.item,Ye=Le.previousSibling,nt=Ye&&Ye.is("element")?Ye.name:null,ot=["Chart"],ft=N.match(Le),mt=Le.getAttribute("o:gfxdata"),bt=nt==="v:shapetype",yt=mt&&ot.some(_t=>Le.getAttribute("id").includes(_t));ft&&mt&&!bt&&!yt&&me.push(pe.item.getAttribute("id"))}return me}function removeAllImgElementsRepresentingShapes(de,u,t){const N=t.createRangeIn(u),me=new Matcher({name:"img"}),pe=[];for(const Le of N)if(Le.item.is("element")&&me.match(Le.item)){const Ye=Le.item,nt=Ye.getAttribute("v:shapes")?Ye.getAttribute("v:shapes").split(" "):[];nt.length&&nt.every(ot=>de.indexOf(ot)>-1)?pe.push(Ye):Ye.getAttribute("src")||pe.push(Ye)}for(const Le of pe)t.remove(Le)}function removeAllShapeElements(de,u){const t=u.createRangeIn(de),N=new Matcher({name:/v:(.+)/}),me=[];for(const pe of t)pe.type=="elementStart"&&N.match(pe.item)&&me.push(pe.item);for(const pe of me)u.remove(pe)}function insertMissingImgs(de,u,t){const N=t.createRangeIn(u),me=[];for(const Ye of N)if(Ye.type=="elementStart"&&Ye.item.is("element","v:shape")){const nt=Ye.item.getAttribute("id");if(de.includes(nt))continue;pe(Ye.item.parent.getChildren(),nt)||me.push(Ye.item)}for(const Ye of me){const nt={src:Le(Ye)};Ye.hasAttribute("alt")&&(nt.alt=Ye.getAttribute("alt"));const ot=t.createElement("img",nt);t.insertChild(Ye.index+1,ot,Ye.parent)}function pe(Ye,nt){for(const ot of Ye){/* istanbul ignore else -- @preserve */if(ot.is("element")&&(ot.name=="img"&&ot.getAttribute("v:shapes")==nt||pe(ot.getChildren(),nt)))return!0}return!1}function Le(Ye){for(const nt of Ye.getChildren()){/* istanbul ignore else -- @preserve */if(nt.is("element")&&nt.getAttribute("src"))return nt.getAttribute("src")}}}function findAllImageElementsWithLocalSource(de,u){const t=u.createRangeIn(de),N=new Matcher({name:"img"}),me=[];for(const pe of t)pe.item.is("element")&&N.match(pe.item)&&pe.item.getAttribute("src").startsWith("file://")&&me.push(pe.item);return me}function extractImageDataFromRtf(de){if(!de)return[];const u=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+u.source+"))([\\da-fA-F\\s]+)\\}","g"),N=de.match(t),me=[];if(N)for(const pe of N){let Le=!1;pe.includes("\\pngblip")?Le="image/png":pe.includes("\\jpegblip")&&(Le="image/jpeg"),Le&&me.push({hex:pe.replace(u,"").replace(/[^\da-fA-F]/g,""),type:Le})}return me}function replaceImagesFileSourceWithInlineRepresentation(de,u,t){if(de.length===u.length)for(let N=0;N<de.length;N++){const me=`data:${u[N].type};base64,${_convertHexToBase64(u[N].hex)}`;t.setAttribute("src",me,de[N])}}function removeMSAttributes(de){const u=[],t=new UpcastWriter(de.document);for(const{item:N}of t.createRangeIn(de))if(N.is("element")){for(const me of N.getClassNames())/\bmso/gi.exec(me)&&t.removeClass(me,N);for(const me of N.getStyleNames())/\bmso/gi.exec(me)&&t.removeStyle(me,N);(N.is("element","w:sdt")||N.is("element","w:sdtpr")&&N.isEmpty||N.is("element","o:p")&&N.isEmpty)&&u.push(N)}for(const N of u){const me=N.parent,pe=me.getChildIndex(N);t.insertChild(pe,N.getChildren(),me),t.remove(N)}}const msWordMatch1=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,msWordMatch2=/xmlns:o="urn:schemas-microsoft-com/i;class MSWordNormalizer{constructor(u,t=!1){xt(this,"document");xt(this,"hasMultiLevelListPlugin");this.document=u,this.hasMultiLevelListPlugin=t}isActive(u){return msWordMatch1.test(u)||msWordMatch2.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:N,stylesString:me}=u._parsedData;transformBookmarks(N,t),transformListItemLikeElementsIntoLists(N,me,this.hasMultiLevelListPlugin),replaceImagesSourceWithBase64(N,u.dataTransfer.getData("text/rtf")),removeMSAttributes(N),u.content=N}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeBoldWrapper(de,u){for(const t of de.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const N=de.getChildIndex(t);u.remove(t),u.insertChild(N,t.getChildren(),de)}}function transformBlockBrsToParagraphs(de,u){const t=new Document$1(u.document.stylesProcessor),N=new DomConverter(t,{renderingMode:"data"}),me=N.blockElements,pe=N.inlineObjectElements,Le=[];for(const Ye of u.createRangeIn(de)){const nt=Ye.item;if(nt.is("element","br")){const ot=findSibling(nt,"forward",u,{blockElements:me,inlineObjectElements:pe}),ft=findSibling(nt,"backward",u,{blockElements:me,inlineObjectElements:pe}),mt=isBlockViewElement(ot,me);(isBlockViewElement(ft,me)||mt)&&Le.push(nt)}}for(const Ye of Le)Ye.hasClass("Apple-interchange-newline")?u.remove(Ye):u.replace(Ye,u.createElement("p"))}function findSibling(de,u,t,{blockElements:N,inlineObjectElements:me}){let pe=t.createPositionAt(de,u=="forward"?"after":"before");return pe=pe.getLastMatchingPosition(({item:Le})=>Le.is("element")&&!N.includes(Le.name)&&!me.includes(Le.name),{direction:u}),u=="forward"?pe.nodeAfter:pe.nodeBefore}function isBlockViewElement(de,u){return!!de&&de.is("element")&&u.includes(de.name)}const googleDocsMatch=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class GoogleDocsNormalizer{constructor(u){xt(this,"document");this.document=u}isActive(u){return googleDocsMatch.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:N}=u._parsedData;removeBoldWrapper(N,t),unwrapParagraphInListItem(N,t),transformBlockBrsToParagraphs(N,t),u.content=N}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeXmlns(de,u){for(const t of de.getChildren())t.is("element","table")&&t.hasAttribute("xmlns")&&u.removeAttribute("xmlns",t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeGoogleSheetsTag(de,u){for(const t of de.getChildren())if(t.is("element","google-sheets-html-origin")){const N=de.getChildIndex(t);u.remove(t),u.insertChild(N,t.getChildren(),de)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeInvalidTableWidth(de,u){for(const t of de.getChildren())t.is("element","table")&&t.getStyle("width")==="0px"&&u.removeStyle("width",t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeStyleBlock(de,u){for(const t of Array.from(de.getChildren()))t.is("element","style")&&u.remove(t)}const googleSheetsMatch=/<google-sheets-html-origin/i;class GoogleSheetsNormalizer{constructor(u){xt(this,"document");this.document=u}isActive(u){return googleSheetsMatch.test(u)}execute(u){const t=new UpcastWriter(this.document),{body:N}=u._parsedData;removeGoogleSheetsTag(N,t),removeXmlns(N,t),removeInvalidTableWidth(N,t),removeStyleBlock(N,t),u.content=N}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeSpacing(de){return normalizeSafariSpaceSpans(normalizeSafariSpaceSpans(de)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function normalizeSpacerunSpans(de){de.querySelectorAll("span[style*=spacerun]").forEach(u=>{const t=u,N=t.innerText.length||0;t.innerText=Array(N+1).join(" ").substr(0,N)})}function normalizeSafariSpaceSpans(de){return de.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(u,t)=>t.length===1?" ":Array(t.length+1).join(" ").substr(0,t.length))}function parseHtml(de,u){const t=new DOMParser;de=de.replace(/<!--\[if gte vml 1]>/g,""),de=de.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const N=normalizeSpacing(cleanContentAfterBody(de)),me=t.parseFromString(N,"text/html");normalizeSpacerunSpans(me);const pe=me.body.innerHTML,Le=documentToView(me,u),Ye=extractStyles(me);return{body:Le,bodyString:pe,styles:Ye.styles,stylesString:Ye.stylesString}}function documentToView(de,u){const t=new Document$1(u),N=new DomConverter(t,{renderingMode:"data"}),me=de.createDocumentFragment(),pe=de.body.childNodes;for(;pe.length>0;)me.appendChild(pe[0]);return N.domToView(me,{skipComments:!0})}function extractStyles(de){const u=[],t=[],N=Array.from(de.getElementsByTagName("style"));for(const me of N)me.sheet&&me.sheet.cssRules&&me.sheet.cssRules.length&&(u.push(me.sheet),t.push(me.innerHTML));return{styles:u,stylesString:t.join(" ")}}function cleanContentAfterBody(de){const u="</body>",t="</html>",N=de.indexOf(u);if(N<0)return de;const me=de.indexOf(t,N+u.length);return de.substring(0,N+u.length)+(me>=0?de.substring(me):"")}class PasteFromOffice extends Plugin{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const u=this.editor,t=u.plugins.get("ClipboardPipeline"),N=u.editing.view.document,me=[],pe=this.editor.plugins.has("MultiLevelList");me.push(new MSWordNormalizer(N,pe)),me.push(new GoogleDocsNormalizer(N)),me.push(new GoogleSheetsNormalizer(N)),t.on("inputTransformation",(Le,Ye)=>{if(Ye._isTransformedWithPasteFromOffice||u.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const ot=Ye.dataTransfer.getData("text/html"),ft=me.find(mt=>mt.isActive(ot));ft&&(Ye._parsedData||(Ye._parsedData=parseHtml(ot,N.stylesProcessor)),ft.execute(Ye),Ye._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var removeFormatIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const REMOVE_FORMAT="removeFormat";class RemoveFormatUI extends Plugin{static get pluginName(){return"RemoveFormatUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add(REMOVE_FORMAT,()=>{const t=this._createButton(ButtonView);return t.set({tooltip:!0}),t}),u.ui.componentFactory.add(`menuBar:${REMOVE_FORMAT}`,()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,N=t.locale,me=t.commands.get(REMOVE_FORMAT),pe=new u(t.locale),Le=N.t;return pe.set({label:Le("Remove Format"),icon:removeFormatIcon}),pe.bind("isEnabled").to(me,"isEnabled"),this.listenTo(pe,"execute",()=>{t.execute(REMOVE_FORMAT),t.editing.view.focus()}),pe}}class RemoveFormatCommand extends Command{refresh(){const u=this.editor.model;this.isEnabled=!!first(this._getFormattingItems(u.document.selection,u.schema))}execute(){const u=this.editor.model,t=u.schema;u.change(N=>{for(const me of this._getFormattingItems(u.document.selection,t))if(me.is("selection"))for(const pe of this._getFormattingAttributes(me,t))N.removeSelectionAttribute(pe);else{const pe=N.createRangeOn(me);for(const Le of this._getFormattingAttributes(me,t))N.removeAttribute(Le,pe)}})}*_getFormattingItems(u,t){const N=me=>!!first(this._getFormattingAttributes(me,t));for(const me of u.getRanges())for(const pe of me.getItems())!t.isBlock(pe)&&N(pe)&&(yield pe);for(const me of u.getSelectedBlocks())N(me)&&(yield me);N(u)&&(yield u)}*_getFormattingAttributes(u,t){for(const[N]of u.getAttributes()){const me=t.getAttributeProperties(N);me&&me.isFormatting&&(yield N)}}}class RemoveFormatEditing extends Plugin{static get pluginName(){return"RemoveFormatEditing"}static get isOfficialPlugin(){return!0}init(){const u=this.editor;u.commands.add("removeFormat",new RemoveFormatCommand(u))}}class RemoveFormat extends Plugin{static get requires(){return[RemoveFormatEditing,RemoveFormatUI]}static get pluginName(){return"RemoveFormat"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class CharacterGridView extends View{constructor(t){super(t);xt(this,"tiles");xt(this,"focusTracker");xt(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>global$1.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(t,N){const me=new ButtonView(this.locale);return me.set({label:t,withText:!0,class:"ck-character-grid__tile"}),me.extendTemplate({attributes:{title:N},on:{mouseover:me.bindTemplate.to("mouseover"),focus:me.bindTemplate.to("focus")}}),me.on("mouseover",()=>{this.fire("tileHover",{name:N,character:t})}),me.on("focus",()=>{this.fire("tileFocus",{name:N,character:t})}),me.on("execute",()=>{this.fire("execute",{name:N,character:t})}),me}render(){super.render();for(const t of this.tiles)this.focusTracker.add(t.element);this.tiles.on("change",(t,{added:N,removed:me})=>{if(N.length>0)for(const pe of N)this.focusTracker.add(pe.element);if(me.length>0)for(const pe of me)this.focusTracker.remove(pe.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class CharacterInfoView extends View{constructor(u){super(u);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",characterToUnicodeString),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",N=>N||"")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function characterToUnicodeString(de){return de===null?"":"U+"+("0000"+de.codePointAt(0).toString(16)).slice(-4)}class SpecialCharactersView extends View{constructor(t,N,me,pe){super(t);xt(this,"items");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"_focusCycler");xt(this,"categoriesView");xt(this,"gridView");xt(this,"infoView");this.categoriesView=N,this.gridView=me,this.infoView=pe,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var specialCharactersIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class SpecialCharactersCategoriesView extends View{constructor(t,N){super(t);xt(this,"_groupNames");xt(this,"_dropdownView");this.set("currentGroupName",Array.from(N.entries())[0][0]),this._groupNames=N,this._dropdownView=new LabeledFieldView(t,createLabeledDropdown),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const t=new Collection;for(const[pe,Le]of this._groupNames){const Ye={type:"button",model:new Model({name:pe,label:Le,role:"menuitemradio",withText:!0})};Ye.model.bind("isOn").to(this,"currentGroupName",nt=>nt===pe),t.add(Ye)}const N=this.locale.t,me=N("Category");this._dropdownView.set({label:me,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:me,ariaLabel:me,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",pe=>this._groupNames.get(pe)),this._dropdownView.fieldView.on("execute",({source:pe})=>{this.currentGroupName=pe.name}),addListToDropdown(this._dropdownView.fieldView,t,{ariaLabel:me,role:"menu"})}}const ALL_SPECIAL_CHARACTERS_GROUP="All";class SpecialCharacters extends Plugin{constructor(t){super(t);xt(this,"_characters");xt(this,"_groups");xt(this,"_allSpecialCharactersGroupLabel");const N=t.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=N("All")}static get requires(){return[Typing,Dialog]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("specialCharacters",()=>{const N=this._createDialogButton(ButtonView);return N.set({tooltip:!0}),N}),t.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(MenuBarMenuListItemButtonView))}addItems(t,N,me={label:t}){if(t===ALL_SPECIAL_CHARACTERS_GROUP)throw new CKEditorError("special-character-invalid-group-name",null);const pe=this._getGroup(t,me.label);for(const Le of N)pe.items.add(Le.title),this._characters.set(Le.title,Le.character)}getGroups(){const t=Array.from(this._groups.keys()),N=this.editor.config.get("specialCharacters.order")||[],me=N.find(pe=>!t.includes(pe));if(me)throw new CKEditorError("special-character-invalid-order-group-name",null,{invalidGroup:me});return new Set([...N,...t])}getCharactersForGroup(t){if(t===ALL_SPECIAL_CHARACTERS_GROUP)return new Set(this._characters.keys());const N=this._groups.get(t);if(N)return N.items}getCharacter(t){return this._characters.get(t)}_getGroup(t,N){return this._groups.has(t)||this._groups.set(t,{items:new Set,label:N}),this._groups.get(t)}_updateGrid(t,N){N.tiles.clear();const me=this.getCharactersForGroup(t);for(const pe of me){const Le=this.getCharacter(pe);N.tiles.add(N.createTile(Le,pe))}}_createDropdownPanelContent(t){const N=Array.from(this.getGroups()).map(nt=>[nt,this._groups.get(nt).label]),me=new Map([[ALL_SPECIAL_CHARACTERS_GROUP,this._allSpecialCharactersGroupLabel],...N]),pe=new SpecialCharactersCategoriesView(t,me),Le=new CharacterGridView(t),Ye=new CharacterInfoView(t);return Le.on("tileHover",(nt,ot)=>{Ye.set(ot)}),Le.on("tileFocus",(nt,ot)=>{Ye.set(ot)}),pe.on("change:currentGroupName",(nt,ot,ft)=>{this._updateGrid(ft,Le)}),this._updateGrid(pe.currentGroupName,Le),{categoriesView:pe,gridView:Le,infoView:Ye}}_createDialogButton(t){const N=this.editor,me=N.locale,pe=new t(N.locale),Le=N.commands.get("insertText"),Ye=me.t,nt=this.editor.plugins.get("Dialog");return pe.set({label:Ye("Special characters"),icon:specialCharactersIcon,isToggleable:!0}),pe.bind("isOn").to(nt,"id",ot=>ot==="specialCharacters"),pe.bind("isEnabled").to(Le,"isEnabled"),pe.on("execute",()=>{if(nt.id==="specialCharacters"){nt.hide();return}this._showDialog()}),pe}_showDialog(){const t=this.editor,N=t.plugins.get("Dialog"),me=t.locale,pe=me.t,{categoriesView:Le,gridView:Ye,infoView:nt}=this._createDropdownPanelContent(me),ot=new SpecialCharactersView(me,Le,Ye,nt);Ye.on("execute",(ft,mt)=>{t.execute("insertText",{text:mt.character})}),N.show({id:"specialCharacters",title:pe("Special characters"),className:"ck-special-characters",content:ot,position:DialogViewPosition.EDITOR_TOP_SIDE})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function upcastStyleToAttribute(de,u){const{modelAttribute:t,styleName:N,viewElement:me,defaultValue:pe,reduceBoxSides:Le=!1,shouldUpcast:Ye=()=>!0}=u;de.for("upcast").attributeToAttribute({view:{name:me,styles:{[N]:/[\s\S]+/}},model:{key:t,value:nt=>{if(!Ye(nt))return;const ot=nt.getNormalizedStyle(N),ft=Le?reduceBoxSidesValue(ot):ot;if(pe!==ft)return ft}}})}function upcastBorderStyles(de,u,t,N){de.for("upcast").add(me=>me.on("element:"+u,(pe,Le,Ye)=>{if(!Le.modelRange)return;const nt=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(yt=>Le.viewItem.hasStyle(yt));if(!nt.length)return;const ot={styles:nt};if(!Ye.consumable.test(Le.viewItem,ot))return;const ft=[...Le.modelRange.getItems({shallow:!0})].pop();Ye.consumable.consume(Le.viewItem,ot);const mt={style:Le.viewItem.getNormalizedStyle("border-style"),color:Le.viewItem.getNormalizedStyle("border-color"),width:Le.viewItem.getNormalizedStyle("border-width")},bt={style:reduceBoxSidesValue(mt.style),color:reduceBoxSidesValue(mt.color),width:reduceBoxSidesValue(mt.width)};bt.style!==N.style&&Ye.writer.setAttribute(t.style,bt.style,ft),bt.color!==N.color&&Ye.writer.setAttribute(t.color,bt.color,ft),bt.width!==N.width&&Ye.writer.setAttribute(t.width,bt.width,ft)}))}function downcastAttributeToStyle(de,u){const{modelElement:t,modelAttribute:N,styleName:me}=u;de.for("downcast").attributeToAttribute({model:{name:t,key:N},view:pe=>({key:"style",value:{[me]:pe}})})}function downcastTableAttribute(de,u){const{modelAttribute:t,styleName:N}=u;de.for("downcast").add(me=>me.on(`attribute:${t}:table`,(pe,Le,Ye)=>{const{item:nt,attributeNewValue:ot}=Le,{mapper:ft,writer:mt}=Ye;if(!Ye.consumable.consume(Le.item,pe.name))return;const bt=[...ft.toViewElement(nt).getChildren()].find(yt=>yt.is("element","table"));ot?mt.setStyle(N,ot,bt):mt.removeStyle(N,bt)}))}function reduceBoxSidesValue(de){if(!de)return;const u=["top","right","bottom","left"];if(!u.every(pe=>de[pe]))return de;const N=de.top;return u.every(pe=>de[pe]===N)?N:de}function updateNumericAttribute(de,u,t,N,me=1){u!=null&&me!==void 0&&me!==null&&u>me?N.setAttribute(de,u,t):N.removeAttribute(de,t)}function createEmptyTableCell(de,u,t={}){const N=de.createElement("tableCell",t);return de.insertElement("paragraph",N),de.insert(N,u),N}function isHeadingColumnCell(de,u){const t=u.parent.parent,N=parseInt(t.getAttribute("headingColumns")||"0"),{column:me}=de.getCellLocation(u);return!!N&&me<N}function enableProperty$1(de,u,t){const{modelAttribute:N}=t;de.extend("tableCell",{allowAttributes:[N]}),upcastStyleToAttribute(u,{viewElement:/^(td|th)$/,...t}),downcastAttributeToStyle(u,{modelElement:"tableCell",...t})}function getSelectionAffectedTable(de){const u=de.getSelectedElement();return u&&u.is("element","table")?u:de.getFirstPosition().findAncestor("table")}function upcastTableFigure(){return de=>{de.on("element:figure",(u,t,N)=>{if(!N.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const me=getViewTableFromFigure(t.viewItem);if(!me||!N.consumable.test(me,{name:!0}))return;N.consumable.consume(t.viewItem,{name:!0,classes:"table"});const pe=N.convertItem(me,t.modelCursor),Le=first(pe.modelRange.getItems());if(!Le){N.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}N.convertChildren(t.viewItem,N.writer.createPositionAt(Le,"end")),N.updateConversionResult(Le,t)})}}function upcastTable(){return de=>{de.on("element:table",(u,t,N)=>{const me=t.viewItem;if(!N.consumable.test(me,{name:!0}))return;const{rows:pe,headingRows:Le,headingColumns:Ye}=scanTable(me),nt={};Ye&&(nt.headingColumns=Ye),Le&&(nt.headingRows=Le);const ot=N.writer.createElement("table",nt);if(N.safeInsert(ot,t.modelCursor)){if(N.consumable.consume(me,{name:!0}),pe.forEach(ft=>N.convertItem(ft,N.writer.createPositionAt(ot,"end"))),N.convertChildren(me,N.writer.createPositionAt(ot,"end")),ot.isEmpty){const ft=N.writer.createElement("tableRow");N.writer.insert(ft,N.writer.createPositionAt(ot,"end")),createEmptyTableCell(N.writer,N.writer.createPositionAt(ft,"end"))}N.updateConversionResult(ot,t)}})}}function skipEmptyTableRow(){return de=>{de.on("element:tr",(u,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&u.stop()},{priority:"high"})}}function ensureParagraphInTableCell(de){return u=>{u.on(`element:${de}`,(t,N,{writer:me})=>{if(!N.modelRange)return;const pe=N.modelRange.start.nodeAfter,Le=me.createPositionAt(pe,0);if(N.viewItem.isEmpty){me.insertElement("paragraph",Le);return}const Ye=Array.from(pe.getChildren());if(Ye.every(nt=>nt.is("element","$marker"))){const nt=me.createElement("paragraph");me.insert(nt,me.createPositionAt(pe,0));for(const ot of Ye)me.move(me.createRangeOn(ot),me.createPositionAt(nt,"end"))}},{priority:"low"})}}function getViewTableFromFigure(de){for(const u of de.getChildren())if(u.is("element","table"))return u}function scanTable(de){let u=0,t;const N=[],me=[];let pe;for(const Le of Array.from(de.getChildren())){if(Le.name!=="tbody"&&Le.name!=="thead"&&Le.name!=="tfoot")continue;Le.name==="thead"&&!pe&&(pe=Le);const Ye=Array.from(Le.getChildren()).filter(ot=>ot.is("element","tr"));let nt=null;for(const ot of Ye){const ft=Array.from(ot.getChildren()).filter(mt=>mt.is("element","td")||mt.is("element","th"));if(pe&&Le===pe||Le.name==="tbody"&&ft.length>0&&(nt===null||ft.length===nt)&&ft.every(mt=>mt.is("element","th")))u++,N.push(ot);else{me.push(ot);const mt=scanRowForHeadingColumns(ot);(!t||mt<t)&&(t=mt)}nt=Math.max(nt||0,ft.length)}}return{headingRows:u,headingColumns:t||0,rows:[...N,...me]}}function scanRowForHeadingColumns(de){let u=0,t=0;const N=Array.from(de.getChildren()).filter(me=>me.name==="th"||me.name==="td");for(;t<N.length&&N[t].name==="th";){const me=N[t],pe=parseInt(me.getAttribute("colspan")||"1");u=u+pe,t++}return u}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TableWalker{constructor(u,t={}){xt(this,"_table");xt(this,"_startRow");xt(this,"_endRow");xt(this,"_startColumn");xt(this,"_endColumn");xt(this,"_includeAllSlots");xt(this,"_skipRows");xt(this,"_row");xt(this,"_rowIndex");xt(this,"_column");xt(this,"_cellIndex");xt(this,"_spannedCells");xt(this,"_nextCellAtColumn");xt(this,"_jumpedToStartRow",!1);this._table=u,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const u=this._table.getChild(this._rowIndex);if(!u||this._isOverEndRow())return{done:!0,value:void 0};if(!u.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const N=this._getSpanned();if(N)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(N.cell,N.row,N.column));else{const me=u.getChild(this._cellIndex);if(!me)return this._advanceToNextRow();const pe=parseInt(me.getAttribute("colspan")||"1"),Le=parseInt(me.getAttribute("rowspan")||"1");(pe>1||Le>1)&&this._recordSpans(me,Le,pe),this._shouldSkipSlot()||(t=this._formatOutValue(me)),this._nextCellAtColumn=this._column+pe}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(u){this._skipRows.add(u)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(u,t=this._row,N=this._column){return{done:!1,value:new TableSlot(this,u,t,N)}}_shouldSkipSlot(){const u=this._skipRows.has(this._row),t=this._row<this._startRow,N=this._column<this._startColumn,me=this._endColumn!==void 0&&this._column>this._endColumn;return u||t||N||me}_getSpanned(){const u=this._spannedCells.get(this._row);return u&&u.get(this._column)||null}_recordSpans(u,t,N){const me={cell:u,row:this._row,column:this._column};for(let pe=this._row;pe<this._row+t;pe++)for(let Le=this._column;Le<this._column+N;Le++)(pe!=this._row||Le!=this._column)&&this._markSpannedCell(pe,Le,me)}_markSpannedCell(u,t,N){this._spannedCells.has(u)||this._spannedCells.set(u,new Map),this._spannedCells.get(u).set(t,N)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const u=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)u===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(u){return[...this._table.getChild(u).getChildren()].reduce((N,me)=>N+parseInt(me.getAttribute("colspan")||"1"),0)}}class TableSlot{constructor(u,t,N,me){xt(this,"cell");xt(this,"row");xt(this,"column");xt(this,"cellAnchorRow");xt(this,"cellAnchorColumn");xt(this,"_cellIndex");xt(this,"_rowIndex");xt(this,"_table");this.cell=t,this.row=u._row,this.column=u._column,this.cellAnchorRow=N,this.cellAnchorColumn=me,this._cellIndex=u._cellIndex,this._rowIndex=u._rowIndex,this._table=u._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function downcastTable(de,u){return(t,{writer:N})=>{const me=t.getAttribute("headingRows")||0,pe=N.createContainerElement("table",null,[]),Le=N.createContainerElement("figure",{class:"table"},pe);me>0&&N.insert(N.createPositionAt(pe,"end"),N.createContainerElement("thead",null,N.createSlot(Ye=>Ye.is("element","tableRow")&&Ye.index<me))),me<de.getRows(t)&&N.insert(N.createPositionAt(pe,"end"),N.createContainerElement("tbody",null,N.createSlot(Ye=>Ye.is("element","tableRow")&&Ye.index>=me)));for(const{positionOffset:Ye,filter:nt}of u.additionalSlots)N.insert(N.createPositionAt(pe,Ye),N.createSlot(nt));return N.insert(N.createPositionAt(pe,"after"),N.createSlot(Ye=>Ye.is("element","tableRow")?!1:!u.additionalSlots.some(({filter:nt})=>nt(Ye)))),u.asWidget?toTableWidget(Le,N):Le}}function downcastRow(){return(de,{writer:u})=>de.isEmpty?u.createEmptyElement("tr"):u.createContainerElement("tr")}function downcastCell(de={}){return(u,{writer:t})=>{const N=u.parent,me=N.parent,pe=me.getChildIndex(N),Le=new TableWalker(me,{row:pe}),Ye=me.getAttribute("headingRows")||0,nt=me.getAttribute("headingColumns")||0;let ot=null;for(const ft of Le)if(ft.cell==u){const bt=ft.row<Ye||ft.column<nt?"th":"td";ot=de.asWidget?toWidgetEditable(t.createEditableElement(bt),t):t.createContainerElement(bt);break}return ot}}function convertParagraphInTableCell(de={}){return(u,{writer:t})=>{if(!u.parent.is("element","tableCell")||!isSingleParagraphWithoutAttributes(u))return null;if(de.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const N=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,N),N}}}function isSingleParagraphWithoutAttributes(de){return de.parent.childCount==1&&!hasAnyAttribute(de)}function toTableWidget(de,u){return u.setCustomProperty("table",!0,de),toWidget(de,u,{hasSelectionHandle:!0})}function hasAnyAttribute(de){for(const u of de.getAttributeKeys())if(!(u.startsWith("selection:")||u=="htmlEmptyBlock"))return!0;return!1}class InsertTableCommand extends Command{refresh(){const u=this.editor.model,t=u.document.selection,N=u.schema;this.isEnabled=isAllowedInParent(t,N)}execute(u={}){const t=this.editor,N=t.model,me=t.plugins.get("TableUtils"),pe=t.config.get("table.defaultHeadings.rows"),Le=t.config.get("table.defaultHeadings.columns");u.headingRows===void 0&&pe&&(u.headingRows=pe),u.headingColumns===void 0&&Le&&(u.headingColumns=Le),N.change(Ye=>{const nt=me.createTable(Ye,u);N.insertObject(nt,null,null,{findOptimalPosition:"auto"}),Ye.setSelection(Ye.createPositionAt(nt.getNodeByPath([0,0,0]),0))})}}function isAllowedInParent(de,u){const t=de.getFirstPosition().parent,N=t===t.root?t:t.parent;return u.checkChild(N,"table")}class InsertRowCommand extends Command{constructor(t,N={}){super(t);xt(this,"order");this.order=N.order||"below"}refresh(){const t=this.editor.model.document.selection,me=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=me}execute(){const t=this.editor,N=t.model.document.selection,me=t.plugins.get("TableUtils"),pe=this.order==="above",Le=me.getSelectionAffectedTableCells(N),Ye=me.getRowIndexes(Le),nt=pe?Ye.first:Ye.last,ot=Le[0].findAncestor("table");me.insertRows(ot,{at:pe?nt:nt+1,copyStructureFromAbove:!pe})}}class InsertColumnCommand extends Command{constructor(t,N={}){super(t);xt(this,"order");this.order=N.order||"right"}refresh(){const t=this.editor.model.document.selection,me=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=me}execute(){const t=this.editor,N=t.model.document.selection,me=t.plugins.get("TableUtils"),pe=this.order==="left",Le=me.getSelectionAffectedTableCells(N),Ye=me.getColumnIndexes(Le),nt=pe?Ye.first:Ye.last,ot=Le[0].findAncestor("table");me.insertColumns(ot,{columns:1,at:pe?nt:nt+1})}}class SplitCellCommand extends Command{constructor(t,N={}){super(t);xt(this,"direction");this.direction=N.direction||"horizontally"}refresh(){const N=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=N.length===1}execute(){const t=this.editor.plugins.get("TableUtils"),N=t.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?t.splitCellHorizontally(N,2):t.splitCellVertically(N,2)}}function cropTableToDimensions(de,u,t){const{startRow:N,startColumn:me,endRow:pe,endColumn:Le}=u,Ye=t.createElement("table"),nt=pe-N+1;for(let ft=0;ft<nt;ft++)t.insertElement("tableRow",Ye,"end");const ot=[...new TableWalker(de,{startRow:N,endRow:pe,startColumn:me,endColumn:Le,includeAllSlots:!0})];for(const{row:ft,column:mt,cell:bt,isAnchor:yt,cellAnchorRow:_t,cellAnchorColumn:Ct}of ot){const Tt=ft-N,At=Ye.getChild(Tt);if(!yt)(_t<N||Ct<me)&&createEmptyTableCell(t,t.createPositionAt(At,"end"));else{const It=t.cloneElement(bt);t.append(It,At),trimTableCellIfNeeded(It,ft,mt,pe,Le,t)}}return addHeadingsToCroppedTable(Ye,de,N,me,t),Ye}function getVerticallyOverlappingCells(de,u,t=0){const N=[],me=new TableWalker(de,{startRow:t,endRow:u-1});for(const pe of me){const{row:Le,cellHeight:Ye}=pe,nt=Le+Ye-1;Le<u&&u<=nt&&N.push(pe)}return N}function splitHorizontally(de,u,t){const N=de.parent,me=N.parent,pe=N.index,Le=parseInt(de.getAttribute("rowspan")),Ye=u-pe,nt={},ot=Le-Ye;ot>1&&(nt.rowspan=ot);const ft=parseInt(de.getAttribute("colspan")||"1");ft>1&&(nt.colspan=ft);const mt=pe,bt=mt+Ye,yt=[...new TableWalker(me,{startRow:mt,endRow:bt,includeAllSlots:!0})];let _t=null,Ct;for(const Tt of yt){const{row:At,column:It,cell:Pt}=Tt;Pt===de&&Ct===void 0&&(Ct=It),Ct!==void 0&&Ct===It&&At===bt&&(_t=createEmptyTableCell(t,Tt.getPositionBefore(),nt))}return updateNumericAttribute("rowspan",Ye,de,t),_t}function getHorizontallyOverlappingCells(de,u){const t=[],N=new TableWalker(de);for(const me of N){const{column:pe,cellWidth:Le}=me,Ye=pe+Le-1;pe<u&&u<=Ye&&t.push(me)}return t}function splitVertically(de,u,t,N){const me=parseInt(de.getAttribute("colspan")),pe=t-u,Le={},Ye=me-pe;Ye>1&&(Le.colspan=Ye);const nt=parseInt(de.getAttribute("rowspan")||"1");nt>1&&(Le.rowspan=nt);const ot=createEmptyTableCell(N,N.createPositionAfter(de),Le);return updateNumericAttribute("colspan",pe,de,N),ot}function trimTableCellIfNeeded(de,u,t,N,me,pe){const Le=parseInt(de.getAttribute("colspan")||"1"),Ye=parseInt(de.getAttribute("rowspan")||"1");if(t+Le-1>me){const ft=me-t+1;updateNumericAttribute("colspan",ft,de,pe,1)}if(u+Ye-1>N){const ft=N-u+1;updateNumericAttribute("rowspan",ft,de,pe,1)}}function addHeadingsToCroppedTable(de,u,t,N,me){const pe=parseInt(u.getAttribute("headingRows")||"0");if(pe>0){const Ye=pe-t;updateNumericAttribute("headingRows",Ye,de,me,0)}const Le=parseInt(u.getAttribute("headingColumns")||"0");if(Le>0){const Ye=Le-N;updateNumericAttribute("headingColumns",Ye,de,me,0)}}function removeEmptyColumns(de,u){const t=u.getColumns(de),N=new Array(t).fill(0);for(const{column:pe}of new TableWalker(de))N[pe]++;const me=N.reduce((pe,Le,Ye)=>Le?pe:[...pe,Ye],[]);if(me.length>0){const pe=me[me.length-1];return u.removeColumns(de,{at:pe}),!0}return!1}function removeEmptyRows(de,u){const t=[],N=u.getRows(de);for(let me=0;me<N;me++)de.getChild(me).isEmpty&&t.push(me);if(t.length>0){const me=t[t.length-1];return u.removeRows(de,{at:me}),!0}return!1}function removeEmptyRowsColumns(de,u){removeEmptyColumns(de,u)||removeEmptyRows(de,u)}function adjustLastRowIndex(de,u){const t=Array.from(new TableWalker(de,{startColumn:u.firstColumn,endColumn:u.lastColumn,row:u.lastRow}));if(t.every(({cellHeight:pe})=>pe===1))return u.lastRow;const me=t[0].cellHeight-1;return u.lastRow+me}function adjustLastColumnIndex(de,u){const t=Array.from(new TableWalker(de,{startRow:u.firstRow,endRow:u.lastRow,column:u.lastColumn}));if(t.every(({cellWidth:pe})=>pe===1))return u.lastColumn;const me=t[0].cellWidth-1;return u.lastColumn+me}class MergeCellCommand extends Command{constructor(t,N){super(t);xt(this,"direction");xt(this,"isHorizontal");this.direction=N.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,N=t.document,pe=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(N.selection)[0],Le=this.value,Ye=this.direction;t.change(nt=>{const ot=Ye=="right"||Ye=="down",ft=ot?pe:Le,mt=ot?Le:pe,bt=mt.parent;mergeTableCells$1(mt,ft,nt);const yt=this.isHorizontal?"colspan":"rowspan",_t=parseInt(pe.getAttribute(yt)||"1"),Ct=parseInt(Le.getAttribute(yt)||"1");nt.setAttribute(yt,_t+Ct,ft),nt.setSelection(nt.createRangeIn(ft));const Tt=this.editor.plugins.get("TableUtils"),At=bt.findAncestor("table");removeEmptyRowsColumns(At,Tt)})}_getMergeableCell(){const N=this.editor.model.document,me=this.editor.plugins.get("TableUtils"),pe=me.getTableCellsContainingSelection(N.selection)[0];if(!pe)return;const Le=this.isHorizontal?getHorizontalCell(pe,this.direction,me):getVerticalCell(pe,this.direction,me);if(!Le)return;const Ye=this.isHorizontal?"rowspan":"colspan",nt=parseInt(pe.getAttribute(Ye)||"1");if(parseInt(Le.getAttribute(Ye)||"1")===nt)return Le}}function getHorizontalCell(de,u,t){const me=de.parent.parent,pe=u=="right"?de.nextSibling:de.previousSibling,Le=(me.getAttribute("headingColumns")||0)>0;if(!pe)return;const Ye=u=="right"?de:pe,nt=u=="right"?pe:de,{column:ot}=t.getCellLocation(Ye),{column:ft}=t.getCellLocation(nt),mt=parseInt(Ye.getAttribute("colspan")||"1"),bt=isHeadingColumnCell(t,Ye),yt=isHeadingColumnCell(t,nt);return Le&&bt!=yt?void 0:ot+mt===ft?pe:void 0}function getVerticalCell(de,u,t){const N=de.parent,me=N.parent,pe=me.getChildIndex(N);if(u=="down"&&pe===t.getRows(me)-1||u=="up"&&pe===0)return null;const Le=parseInt(de.getAttribute("rowspan")||"1"),Ye=me.getAttribute("headingRows")||0,nt=u=="down"&&pe+Le===Ye,ot=u=="up"&&pe===Ye;if(Ye&&(nt||ot))return null;const ft=parseInt(de.getAttribute("rowspan")||"1"),mt=u=="down"?pe+ft:pe,bt=[...new TableWalker(me,{endRow:mt})],_t=bt.find(Tt=>Tt.cell===de).column,Ct=bt.find(({row:Tt,cellHeight:At,column:It})=>It!==_t?!1:u=="down"?Tt===mt:mt===Tt+At);return Ct&&Ct.cell?Ct.cell:null}function mergeTableCells$1(de,u,t){isEmpty$2(de)||(isEmpty$2(u)&&t.remove(t.createRangeIn(u)),t.move(t.createRangeIn(de),t.createPositionAt(u,"end"))),t.remove(de)}function isEmpty$2(de){const u=de.getChild(0);return de.childCount==1&&u.is("element","paragraph")&&u.isEmpty}class RemoveRowCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=u.getSelectionAffectedTableCells(this.editor.model.document.selection),N=t[0];if(N){const me=N.findAncestor("table"),Le=u.getRows(me)-1,Ye=u.getRowIndexes(t),nt=Ye.first===0&&Ye.last===Le;this.isEnabled=!nt}else this.isEnabled=!1}execute(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),N=t.getSelectionAffectedTableCells(u.document.selection),me=t.getRowIndexes(N),pe=N[0],Le=pe.findAncestor("table"),Ye=t.getCellLocation(pe).column;u.change(nt=>{const ot=me.last-me.first+1;t.removeRows(Le,{at:me.first,rows:ot});const ft=getCellToFocus$1(Le,me.first,Ye,t.getRows(Le));nt.setSelection(nt.createPositionAt(ft,0))})}}function getCellToFocus$1(de,u,t,N){const me=de.getChild(Math.min(u,N-1));let pe=me.getChild(0),Le=0;for(const Ye of me.getChildren()){if(Le>t)return pe;pe=Ye,Le+=parseInt(Ye.getAttribute("colspan")||"1")}return pe}class RemoveColumnCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=u.getSelectionAffectedTableCells(this.editor.model.document.selection),N=t[0];if(N){const me=N.findAncestor("table"),pe=u.getColumns(me),{first:Le,last:Ye}=u.getColumnIndexes(t);this.isEnabled=Ye-Le<pe-1}else this.isEnabled=!1}execute(){const u=this.editor.plugins.get("TableUtils"),[t,N]=getBoundaryCells(this.editor.model.document.selection,u),me=t.parent.parent,pe=[...new TableWalker(me)],Le={first:pe.find(nt=>nt.cell===t).column,last:pe.find(nt=>nt.cell===N).column},Ye=getCellToFocus(pe,t,N,Le);this.editor.model.change(nt=>{const ot=Le.last-Le.first+1;u.removeColumns(me,{at:Le.first,columns:ot}),nt.setSelection(nt.createPositionAt(Ye,0))})}}function getCellToFocus(de,u,t,N){return parseInt(t.getAttribute("colspan")||"1")>1?t:u.previousSibling||t.nextSibling?t.nextSibling||u.previousSibling:N.first?de.reverse().find(({column:pe})=>pe<N.first).cell:de.reverse().find(({column:pe})=>pe>N.last).cell}function getBoundaryCells(de,u){const t=u.getSelectionAffectedTableCells(de),N=t[0],me=t.pop(),pe=[N,me];return N.isBefore(me)?pe:pe.reverse()}class SetHeaderRowCommand extends Command{refresh(){const u=this.editor.plugins.get("TableUtils"),t=this.editor.model,N=u.getSelectionAffectedTableCells(t.document.selection),me=N.length>0;this.isEnabled=me,this.value=me&&N.every(pe=>this._isInHeading(pe,pe.parent.parent))}execute(u={}){if(u.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),N=this.editor.model,me=t.getSelectionAffectedTableCells(N.document.selection),pe=me[0].findAncestor("table"),{first:Le,last:Ye}=t.getRowIndexes(me),nt=this.value?Le:Ye+1,ot=pe.getAttribute("headingRows")||0;N.change(ft=>{if(nt){const mt=nt>ot?ot:0,bt=getVerticallyOverlappingCells(pe,nt,mt);for(const{cell:yt}of bt)splitHorizontally(yt,nt,ft)}updateNumericAttribute("headingRows",nt,pe,ft,0)})}_isInHeading(u,t){const N=parseInt(t.getAttribute("headingRows")||"0");return!!N&&u.parent.index<N}}class SetHeaderColumnCommand extends Command{refresh(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),N=t.getSelectionAffectedTableCells(u.document.selection),me=N.length>0;this.isEnabled=me,this.value=me&&N.every(pe=>isHeadingColumnCell(t,pe))}execute(u={}){if(u.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),N=this.editor.model,me=t.getSelectionAffectedTableCells(N.document.selection),pe=me[0].findAncestor("table"),{first:Le,last:Ye}=t.getColumnIndexes(me),nt=this.value?Le:Ye+1;N.change(ot=>{if(nt){const ft=getHorizontallyOverlappingCells(pe,nt);for(const{cell:mt,column:bt}of ft)splitVertically(mt,bt,nt,ot)}updateNumericAttribute("headingColumns",nt,pe,ot,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const COLUMN_MIN_WIDTH_AS_PERCENTAGE=5,COLUMN_MIN_WIDTH_IN_PIXELS=40,COLUMN_WIDTH_PRECISION=2;function getChangedResizedTables(de){const u=new Set;for(const t of de.document.differ.getChanges()){let N=null;switch(t.type){case"insert":N=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":N=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(N=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!N)continue;const me=N.nodeAfter&&N.nodeAfter.is("element","table")?N.nodeAfter:N.findAncestor("table");for(const pe of de.createRangeOn(me).getItems())pe.is("element","table")&&getColumnGroupElement(pe)&&u.add(pe)}return u}function getColumnMinWidthAsPercentage(de,u){return COLUMN_MIN_WIDTH_IN_PIXELS*100/getTableWidthInPixels(de,u)}function getTableWidthInPixels(de,u){const t=getChildrenViewElement(de,"tbody",u)||getChildrenViewElement(de,"thead",u),N=u.editing.view.domConverter.mapViewToDom(t);return getElementWidthInPixels(N)}function getChildrenViewElement(de,u,t){return[...[...t.editing.mapper.toViewElement(de).getChildren()].find(pe=>pe.is("element","table")).getChildren()].find(pe=>pe.is("element",u))}function getElementWidthInPixels(de){const u=global$1.window.getComputedStyle(de);return u.boxSizing==="border-box"?parseFloat(u.width)-parseFloat(u.paddingLeft)-parseFloat(u.paddingRight)-parseFloat(u.borderLeftWidth)-parseFloat(u.borderRightWidth):parseFloat(u.width)}function getColumnEdgesIndexes(de,u){const t=u.getCellLocation(de).column,N=de.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+N-1}}function toPrecision(de){const u=Math.pow(10,COLUMN_WIDTH_PRECISION),t=typeof de=="number"?de:parseFloat(de);return Math.round(t*u)/u}function clamp(de,u,t){return de<=u?toPrecision(u):de>=t?toPrecision(t):toPrecision(de)}function createFilledArray(de,u){return Array(de).fill(u)}function sumArray(de){return de.map(u=>typeof u=="number"?u:parseFloat(u)).filter(u=>!Number.isNaN(u)).reduce((u,t)=>u+t,0)}function normalizeColumnWidths(de){const u=de.map(me=>me==="auto"?me:parseFloat(me.replace("%","")));let t=calculateMissingColumnWidths(u);const N=sumArray(t);return N!==100&&(t=t.map(me=>toPrecision(me*100/N)).map((me,pe,Le)=>{if(!(pe===Le.length-1))return me;const nt=sumArray(Le);return toPrecision(me+100-nt)})),t.map(me=>me+"%")}function calculateMissingColumnWidths(de){const u=de.filter(me=>me==="auto").length;if(u===0)return de.map(me=>toPrecision(me));const t=sumArray(de),N=Math.max((100-t)/u,COLUMN_MIN_WIDTH_AS_PERCENTAGE);return de.map(me=>me==="auto"?N:me).map(me=>toPrecision(me))}function getDomCellOuterWidth(de){const u=global$1.window.getComputedStyle(de);return u.boxSizing==="border-box"?parseInt(u.width):parseFloat(u.width)+parseFloat(u.paddingLeft)+parseFloat(u.paddingRight)+parseFloat(u.borderWidth)}function updateColumnElements(de,u,t,N){for(let me=0;me<Math.max(t.length,de.length);me++){const pe=de[me],Le=t[me];Le?pe?N.setAttribute("columnWidth",Le,pe):N.appendElement("tableColumn",{columnWidth:Le},u):N.remove(pe)}}function getColumnGroupElement(de){if(de.is("element","tableColumnGroup"))return de;const u=de.getChildren();return Array.from(u).find(t=>t.is("element","tableColumnGroup"))}function getTableColumnElements(de){const u=getColumnGroupElement(de);return u?Array.from(u.getChildren()):[]}function getTableColumnsWidths(de){return getTableColumnElements(de).map(u=>u.getAttribute("columnWidth"))}function translateColSpanAttribute(de,u){return getTableColumnElements(de).reduce((N,me)=>{const pe=me.getAttribute("columnWidth"),Le=me.getAttribute("colSpan");if(!Le)return N.push(pe),N;for(let Ye=0;Ye<Le;Ye++)N.push(pe);return u.removeAttribute("colSpan",me),N},[])}class TableUtils extends Plugin{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(u){const t=u.parent,N=t.parent,me=N.getChildIndex(t),pe=new TableWalker(N,{row:me});for(const{cell:Le,row:Ye,column:nt}of pe)if(Le===u)return{row:Ye,column:nt};/* istanbul ignore next -- @preserve */}createTable(u,t){const N=u.createElement("table"),me=t.rows||2,pe=t.columns||2;return createEmptyRows(u,N,0,me,pe),t.headingRows&&updateNumericAttribute("headingRows",Math.min(t.headingRows,me),N,u,0),t.headingColumns&&updateNumericAttribute("headingColumns",Math.min(t.headingColumns,pe),N,u,0),N}insertRows(u,t={}){const N=this.editor.model,me=t.at||0,pe=t.rows||1,Le=t.copyStructureFromAbove!==void 0,Ye=t.copyStructureFromAbove?me-1:me,nt=this.getRows(u),ot=this.getColumns(u);if(me>nt)throw new CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:t});N.change(ft=>{const mt=u.getAttribute("headingRows")||0;if(mt>me&&updateNumericAttribute("headingRows",mt+pe,u,ft,0),!Le&&(me===0||me===nt)){createEmptyRows(ft,u,me,pe,ot);return}const bt=Le?Math.max(me,Ye):me,yt=new TableWalker(u,{endRow:bt}),_t=new Array(ot).fill(1);for(const{row:Ct,column:Tt,cellHeight:At,cellWidth:It,cell:Pt}of yt){const Bt=Ct+At-1,Ot=Ct<me&&me<=Bt,Nt=Ct<=Ye&&Ye<=Bt;Ot?(ft.setAttribute("rowspan",At+pe,Pt),_t[Tt]=-It):Le&&Nt&&(_t[Tt]=It)}for(let Ct=0;Ct<pe;Ct++){const Tt=ft.createElement("tableRow");ft.insert(Tt,u,me);for(let At=0;At<_t.length;At++){const It=_t[At],Pt=ft.createPositionAt(Tt,"end");It>0&&createEmptyTableCell(ft,Pt,It>1?{colspan:It}:void 0),At+=Math.abs(It)-1}}})}insertColumns(u,t={}){const N=this.editor.model,me=t.at||0,pe=t.columns||1;N.change(Le=>{const Ye=u.getAttribute("headingColumns");me<Ye&&Le.setAttribute("headingColumns",Ye+pe,u);const nt=this.getColumns(u);if(me===0||nt===me){for(const ft of u.getChildren())ft.is("element","tableRow")&&createCells(pe,Le,Le.createPositionAt(ft,me?"end":0));return}const ot=new TableWalker(u,{column:me,includeAllSlots:!0});for(const ft of ot){const{row:mt,cell:bt,cellAnchorColumn:yt,cellAnchorRow:_t,cellWidth:Ct,cellHeight:Tt}=ft;if(yt<me){Le.setAttribute("colspan",Ct+pe,bt);const At=_t+Tt-1;for(let It=mt;It<=At;It++)ot.skipRow(It)}else createCells(pe,Le,ft.getPositionBefore())}})}removeRows(u,t){const N=this.editor.model,me=t.rows||1,pe=this.getRows(u),Le=t.at,Ye=Le+me-1;if(Ye>pe-1)throw new CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:u,options:t});N.change(nt=>{const ot={first:Le,last:Ye},{cellsToMove:ft,cellsToTrim:mt}=getCellsToMoveAndTrimOnRemoveRow(u,ot);if(ft.size){const bt=Ye+1;moveCellsToRow(u,bt,ft,nt)}for(let bt=Ye;bt>=Le;bt--)nt.remove(u.getChild(bt));for(const{rowspan:bt,cell:yt}of mt)updateNumericAttribute("rowspan",bt,yt,nt);updateHeadingRows(u,ot,nt),removeEmptyColumns(u,this)||removeEmptyRows(u,this)})}removeColumns(u,t){const N=this.editor.model,me=t.at,pe=t.columns||1,Le=t.at+pe-1;N.change(Ye=>{adjustHeadingColumns(u,{first:me,last:Le},Ye);const nt=getTableColumnElements(u);for(let ot=Le;ot>=me;ot--){for(const{cell:ft,column:mt,cellWidth:bt}of[...new TableWalker(u)])mt<=ot&&bt>1&&mt+bt>ot?updateNumericAttribute("colspan",bt-1,ft,Ye):mt===ot&&Ye.remove(ft);if(nt[ot]){const ft=ot===0?nt[1]:nt[ot-1],mt=parseFloat(nt[ot].getAttribute("columnWidth")),bt=parseFloat(ft.getAttribute("columnWidth"));Ye.remove(nt[ot]),Ye.setAttribute("columnWidth",mt+bt+"%",ft)}}removeEmptyRows(u,this)||removeEmptyColumns(u,this)})}splitCellVertically(u,t=2){const N=this.editor.model,pe=u.parent.parent,Le=parseInt(u.getAttribute("rowspan")||"1"),Ye=parseInt(u.getAttribute("colspan")||"1");N.change(nt=>{if(Ye>1){const{newCellsSpan:ot,updatedSpan:ft}=breakSpanEvenly(Ye,t);updateNumericAttribute("colspan",ft,u,nt);const mt={};ot>1&&(mt.colspan=ot),Le>1&&(mt.rowspan=Le);const bt=Ye>t?t-1:Ye-1;createCells(bt,nt,nt.createPositionAfter(u),mt)}if(Ye<t){const ot=t-Ye,ft=[...new TableWalker(pe)],{column:mt}=ft.find(({cell:Ct})=>Ct===u),bt=ft.filter(({cell:Ct,cellWidth:Tt,column:At})=>{const It=Ct!==u&&At===mt,Pt=At<mt&&At+Tt>mt;return It||Pt});for(const{cell:Ct,cellWidth:Tt}of bt)nt.setAttribute("colspan",Tt+ot,Ct);const yt={};Le>1&&(yt.rowspan=Le),createCells(ot,nt,nt.createPositionAfter(u),yt);const _t=pe.getAttribute("headingColumns")||0;_t>mt&&updateNumericAttribute("headingColumns",_t+ot,pe,nt)}})}splitCellHorizontally(u,t=2){const N=this.editor.model,me=u.parent,pe=me.parent,Le=pe.getChildIndex(me),Ye=parseInt(u.getAttribute("rowspan")||"1"),nt=parseInt(u.getAttribute("colspan")||"1");N.change(ot=>{if(Ye>1){const ft=[...new TableWalker(pe,{startRow:Le,endRow:Le+Ye-1,includeAllSlots:!0})],{newCellsSpan:mt,updatedSpan:bt}=breakSpanEvenly(Ye,t);updateNumericAttribute("rowspan",bt,u,ot);const{column:yt}=ft.find(({cell:Tt})=>Tt===u),_t={};mt>1&&(_t.rowspan=mt),nt>1&&(_t.colspan=nt);let Ct=0;for(const Tt of ft){const{column:At,row:It}=Tt,Pt=It>=Le+bt,Bt=At===yt;Ct>=mt&&Bt&&(Ct=0),Pt&&Bt&&(Ct||createCells(1,ot,Tt.getPositionBefore(),_t),Ct++)}}if(Ye<t){const ft=t-Ye,mt=[...new TableWalker(pe,{startRow:0,endRow:Le})];for(const{cell:_t,cellHeight:Ct,row:Tt}of mt)if(_t!==u&&Tt+Ct>Le){const At=Ct+ft;ot.setAttribute("rowspan",At,_t)}const bt={};nt>1&&(bt.colspan=nt),createEmptyRows(ot,pe,Le+1,ft,1,bt);const yt=pe.getAttribute("headingRows")||0;yt>Le&&updateNumericAttribute("headingRows",yt+ft,pe,ot)}})}getColumns(u){return[...u.getChild(0).getChildren()].filter(N=>N.is("element","tableCell")).reduce((N,me)=>{const pe=parseInt(me.getAttribute("colspan")||"1");return N+pe},0)}getRows(u){return Array.from(u.getChildren()).reduce((t,N)=>N.is("element","tableRow")?t+1:t,0)}createTableWalker(u,t={}){return new TableWalker(u,t)}getSelectedTableCells(u){const t=[];for(const N of this.sortRanges(u.getRanges())){const me=N.getContainedElement();me&&me.is("element","tableCell")&&t.push(me)}return t}getTableCellsContainingSelection(u){const t=[];for(const N of u.getRanges()){const me=N.start.findAncestor("tableCell");me&&t.push(me)}return t}getSelectionAffectedTableCells(u){const t=this.getSelectedTableCells(u);return t.length?t:this.getTableCellsContainingSelection(u)}getRowIndexes(u){const t=u.map(N=>N.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(u){const t=u[0].findAncestor("table"),me=[...new TableWalker(t)].filter(pe=>u.includes(pe.cell)).map(pe=>pe.column);return this._getFirstLastIndexesObject(me)}isSelectionRectangular(u){if(u.length<2||!this._areCellInTheSameTableSection(u))return!1;const t=new Set,N=new Set;let me=0;for(const Le of u){const{row:Ye,column:nt}=this.getCellLocation(Le),ot=parseInt(Le.getAttribute("rowspan"))||1,ft=parseInt(Le.getAttribute("colspan"))||1;t.add(Ye),N.add(nt),ot>1&&t.add(Ye+ot-1),ft>1&&N.add(nt+ft-1),me+=ot*ft}return getBiggestRectangleArea(t,N)==me}sortRanges(u){return Array.from(u).sort(compareRangeOrder)}_getFirstLastIndexesObject(u){const t=u.sort((pe,Le)=>pe-Le),N=t[0],me=t[t.length-1];return{first:N,last:me}}_areCellInTheSameTableSection(u){const t=u[0].findAncestor("table"),N=this.getRowIndexes(u),me=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(N,me))return!1;const pe=this.getColumnIndexes(u),Le=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(pe,Le)}_areIndexesInSameSection({first:u,last:t},N){const me=u<N,pe=t<N;return me===pe}}function createEmptyRows(de,u,t,N,me,pe={}){for(let Le=0;Le<N;Le++){const Ye=de.createElement("tableRow");de.insert(Ye,u,t),createCells(me,de,de.createPositionAt(Ye,"end"),pe)}}function createCells(de,u,t,N={}){for(let me=0;me<de;me++)createEmptyTableCell(u,t,N)}function breakSpanEvenly(de,u){if(de<u)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(de/u),N=de-t*u+t;return{newCellsSpan:t,updatedSpan:N}}function adjustHeadingColumns(de,u,t){const N=de.getAttribute("headingColumns")||0;if(N&&u.first<N){const me=Math.min(N-1,u.last)-u.first+1;t.setAttribute("headingColumns",N-me,de)}}function updateHeadingRows(de,{first:u,last:t},N){const me=de.getAttribute("headingRows")||0;if(u<me){const pe=t<me?me-(t-u+1):u;updateNumericAttribute("headingRows",pe,de,N,0)}}function getCellsToMoveAndTrimOnRemoveRow(de,{first:u,last:t}){const N=new Map,me=[];for(const{row:pe,column:Le,cellHeight:Ye,cell:nt}of new TableWalker(de,{endRow:t})){const ot=pe+Ye-1;if(pe>=u&&pe<=t&&ot>t){const bt=t-pe+1,yt=Ye-bt;N.set(Le,{cell:nt,rowspan:yt})}if(pe<u&&ot>=u){let bt;ot>=t?bt=t-u+1:bt=ot-u+1,me.push({cell:nt,rowspan:Ye-bt})}}return{cellsToMove:N,cellsToTrim:me}}function moveCellsToRow(de,u,t,N){const pe=[...new TableWalker(de,{includeAllSlots:!0,row:u})],Le=de.getChild(u);let Ye;for(const{column:nt,cell:ot,isAnchor:ft}of pe)if(t.has(nt)){const{cell:mt,rowspan:bt}=t.get(nt),yt=Ye?N.createPositionAfter(Ye):N.createPositionAt(Le,0);N.move(N.createRangeOn(mt),yt),updateNumericAttribute("rowspan",bt,mt,N),Ye=mt}else ft&&(Ye=ot)}function compareRangeOrder(de,u){const t=de.start,N=u.start;return t.isBefore(N)?-1:1}function getBiggestRectangleArea(de,u){const t=Array.from(de.values()),N=Array.from(u.values()),me=Math.max(...t),pe=Math.min(...t),Le=Math.max(...N),Ye=Math.min(...N);return(me-pe+1)*(Le-Ye+1)}class MergeCellsCommand extends Command{refresh(){const u=this.editor.plugins.get(TableUtils),t=u.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=u.isSelectionRectangular(t)}execute(){const u=this.editor.model,t=this.editor.plugins.get(TableUtils);u.change(N=>{const me=t.getSelectedTableCells(u.document.selection),pe=me.shift(),{mergeWidth:Le,mergeHeight:Ye}=getMergeDimensions(pe,me,t);updateNumericAttribute("colspan",Le,pe,N),updateNumericAttribute("rowspan",Ye,pe,N);for(const ot of me)mergeTableCells(ot,pe,N);const nt=pe.findAncestor("table");removeEmptyRowsColumns(nt,t),N.setSelection(pe,"in")})}}function mergeTableCells(de,u,t){isEmpty$1(de)||(isEmpty$1(u)&&t.remove(t.createRangeIn(u)),t.move(t.createRangeIn(de),t.createPositionAt(u,"end"))),t.remove(de)}function isEmpty$1(de){const u=de.getChild(0);return de.childCount==1&&u.is("element","paragraph")&&u.isEmpty}function getMergeDimensions(de,u,t){let N=0,me=0;for(const ot of u){const{row:ft,column:mt}=t.getCellLocation(ot);N=getMaxOffset(ot,mt,N,"colspan"),me=getMaxOffset(ot,ft,me,"rowspan")}const{row:pe,column:Le}=t.getCellLocation(de),Ye=N-Le,nt=me-pe;return{mergeWidth:Ye,mergeHeight:nt}}function getMaxOffset(de,u,t,N){const me=parseInt(de.getAttribute(N)||"1");return Math.max(t,u+me)}class SelectRowCommand extends Command{constructor(u){super(u),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const u=this.editor.model,t=this.editor.plugins.get("TableUtils"),N=t.getSelectionAffectedTableCells(u.document.selection),me=t.getRowIndexes(N),pe=N[0].findAncestor("table"),Le=[];for(let Ye=me.first;Ye<=me.last;Ye++)for(const nt of pe.getChild(Ye).getChildren())Le.push(u.createRangeOn(nt));u.change(Ye=>{Ye.setSelection(Le)})}}class SelectColumnCommand extends Command{constructor(u){super(u),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const u=this.editor.plugins.get("TableUtils"),t=this.editor.model,N=u.getSelectionAffectedTableCells(t.document.selection),me=N[0],pe=N.pop(),Le=me.findAncestor("table"),Ye=u.getCellLocation(me),nt=u.getCellLocation(pe),ot=Math.min(Ye.column,nt.column),ft=Math.max(Ye.column,nt.column),mt=[];for(const bt of new TableWalker(Le,{startColumn:ot,endColumn:ft}))mt.push(t.createRangeOn(bt.cell));t.change(bt=>{bt.setSelection(mt)})}}function injectTableLayoutPostFixer(de){de.document.registerPostFixer(u=>tableLayoutPostFixer(u,de))}function tableLayoutPostFixer(de,u){const t=u.document.differ.getChanges();let N=!1;const me=new Set;for(const pe of t){let Le=null;pe.type=="insert"&&pe.name=="table"&&(Le=pe.position.nodeAfter),(pe.type=="insert"||pe.type=="remove")&&(pe.name=="tableRow"||pe.name=="tableCell")&&(Le=pe.position.findAncestor("table")),isTableAttributeEntry(pe)&&(Le=pe.range.start.findAncestor("table")),Le&&!me.has(Le)&&(N=fixTableCellsRowspan(Le,de)||N,N=fixTableRowsSizes(Le,de)||N,me.add(Le))}return N}function fixTableCellsRowspan(de,u){let t=!1;const N=findCellsToTrim(de);if(N.length){t=!0;for(const me of N)updateNumericAttribute("rowspan",me.rowspan,me.cell,u,1)}return t}function fixTableRowsSizes(de,u){let t=!1;const N=getChildrenLengths(de),me=[];for(const[nt,ot]of N.entries())!ot&&de.getChild(nt).is("element","tableRow")&&me.push(nt);if(me.length){t=!0;for(const nt of me.reverse())u.remove(de.getChild(nt)),N.splice(nt,1)}const pe=N.filter((nt,ot)=>de.getChild(ot).is("element","tableRow")),Le=pe[0];if(!pe.every(nt=>nt===Le)){const nt=pe.reduce((ot,ft)=>ft>ot?ft:ot,0);for(const[ot,ft]of pe.entries()){const mt=nt-ft;if(mt){for(let bt=0;bt<mt;bt++)createEmptyTableCell(u,u.createPositionAt(de.getChild(ot),"end"));t=!0}}}return t}function findCellsToTrim(de){const u=parseInt(de.getAttribute("headingRows")||"0"),t=Array.from(de.getChildren()).reduce((me,pe)=>pe.is("element","tableRow")?me+1:me,0),N=[];for(const{row:me,cell:pe,cellHeight:Le}of new TableWalker(de)){if(Le<2)continue;const nt=me<u?u:t;if(me+Le>nt){const ot=nt-me;N.push({cell:pe,rowspan:ot})}}return N}function getChildrenLengths(de){const u=new Array(de.childCount).fill(0);for(const{rowIndex:t}of new TableWalker(de,{includeAllSlots:!0}))u[t]++;return u}function isTableAttributeEntry(de){if(de.type!=="attribute")return!1;const u=de.attributeKey;return u==="headingRows"||u==="colspan"||u==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCellParagraphPostFixer(de){de.document.registerPostFixer(u=>tableCellContentsPostFixer(u,de))}function tableCellContentsPostFixer(de,u){const t=u.document.differ.getChanges();let N=!1;for(const me of t)me.type=="insert"&&me.name=="table"&&(N=fixTable(me.position.nodeAfter,de)||N),me.type=="insert"&&me.name=="tableRow"&&(N=fixTableRow(me.position.nodeAfter,de)||N),me.type=="insert"&&me.name=="tableCell"&&(N=fixTableCellContent(me.position.nodeAfter,de)||N),(me.type=="remove"||me.type=="insert")&&checkTableCellChange(me)&&(N=fixTableCellContent(me.position.parent,de)||N);return N}function fixTable(de,u){let t=!1;for(const N of de.getChildren())N.is("element","tableRow")&&(t=fixTableRow(N,u)||t);return t}function fixTableRow(de,u){let t=!1;for(const N of de.getChildren())t=fixTableCellContent(N,u)||t;return t}function fixTableCellContent(de,u){if(de.childCount==0)return u.insertElement("paragraph",de),!0;const t=Array.from(de.getChildren()).filter(N=>N.is("$text"));for(const N of t)u.wrap(u.createRangeOn(N),"paragraph");return!!t.length}function checkTableCellChange(de){return de.position.parent.is("element","tableCell")?de.type=="insert"&&de.name=="$text"||de.type=="remove":!1}function tableHeadingsRefreshHandler(de,u){const t=de.document.differ;for(const N of t.getChanges()){let me,pe=!1;if(N.type=="attribute"){const ot=N.range.start.nodeAfter;if(!ot||!ot.is("element","table")||N.attributeKey!="headingRows"&&N.attributeKey!="headingColumns")continue;me=ot,pe=N.attributeKey=="headingRows"}else(N.name=="tableRow"||N.name=="tableCell")&&(me=N.position.findAncestor("table"),pe=N.name=="tableRow");if(!me)continue;const Le=me.getAttribute("headingRows")||0,Ye=me.getAttribute("headingColumns")||0,nt=new TableWalker(me);for(const ot of nt){const mt=ot.row<Le||ot.column<Ye?"th":"td",bt=u.mapper.toViewElement(ot.cell);bt&&bt.is("element")&&bt.name!=mt&&u.reconvertItem(pe?ot.cell.parent:ot.cell)}}}function tableCellRefreshHandler(de,u){const t=de.document.differ,N=new Set;for(const me of t.getChanges()){const pe=me.type=="attribute"?me.range.start.parent:me.position.parent;pe.is("element","tableCell")&&N.add(pe)}for(const me of N.values()){const pe=Array.from(me.getChildren()).filter(Le=>shouldRefresh(Le,u.mapper));for(const Le of pe)u.reconvertItem(Le)}}function shouldRefresh(de,u){if(!de.is("element","paragraph"))return!1;const t=u.toViewElement(de);return t?isSingleParagraphWithoutAttributes(de)!==t.is("element","span"):!1}class TableEditing extends Plugin{constructor(t){super(t);xt(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils]}init(){const t=this.editor,N=t.model,me=N.schema,pe=t.conversion,Le=t.plugins.get(TableUtils);me.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),me.register("tableRow",{allowIn:"table",isLimit:!0}),me.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),pe.for("upcast").add(upcastTableFigure()),pe.for("upcast").add(upcastTable()),pe.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(Le,{asWidget:!0,additionalSlots:this._additionalSlots})}),pe.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(Le,{additionalSlots:this._additionalSlots})}),pe.for("upcast").elementToElement({model:"tableRow",view:"tr"}),pe.for("upcast").add(skipEmptyTableRow()),pe.for("downcast").elementToElement({model:"tableRow",view:downcastRow()}),pe.for("upcast").elementToElement({model:"tableCell",view:"td"}),pe.for("upcast").elementToElement({model:"tableCell",view:"th"}),pe.for("upcast").add(ensureParagraphInTableCell("td")),pe.for("upcast").add(ensureParagraphInTableCell("th")),pe.for("editingDowncast").elementToElement({model:"tableCell",view:downcastCell({asWidget:!0})}),pe.for("dataDowncast").elementToElement({model:"tableCell",view:downcastCell()}),pe.for("editingDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell({asWidget:!0}),converterPriority:"high"}),pe.for("dataDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell(),converterPriority:"high"}),pe.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),pe.for("upcast").attributeToAttribute({model:{key:"colspan",value:upcastCellSpan("colspan")},view:"colspan"}),pe.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),pe.for("upcast").attributeToAttribute({model:{key:"rowspan",value:upcastCellSpan("rowspan")},view:"rowspan"}),t.config.define("table.defaultHeadings.rows",0),t.config.define("table.defaultHeadings.columns",0),t.commands.add("insertTable",new InsertTableCommand(t)),t.commands.add("insertTableRowAbove",new InsertRowCommand(t,{order:"above"})),t.commands.add("insertTableRowBelow",new InsertRowCommand(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new InsertColumnCommand(t,{order:"left"})),t.commands.add("insertTableColumnRight",new InsertColumnCommand(t,{order:"right"})),t.commands.add("removeTableRow",new RemoveRowCommand(t)),t.commands.add("removeTableColumn",new RemoveColumnCommand(t)),t.commands.add("splitTableCellVertically",new SplitCellCommand(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new SplitCellCommand(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new MergeCellsCommand(t)),t.commands.add("mergeTableCellRight",new MergeCellCommand(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new MergeCellCommand(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new MergeCellCommand(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new MergeCellCommand(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new SetHeaderColumnCommand(t)),t.commands.add("setTableRowHeader",new SetHeaderRowCommand(t)),t.commands.add("selectTableRow",new SelectRowCommand(t)),t.commands.add("selectTableColumn",new SelectColumnCommand(t)),injectTableLayoutPostFixer(N),injectTableCellParagraphPostFixer(N),this.listenTo(N.document,"change:data",()=>{tableHeadingsRefreshHandler(N,t.editing),tableCellRefreshHandler(N,t.editing)})}registerAdditionalSlot(t){this._additionalSlots.push(t)}}function upcastCellSpan(de){return u=>{const t=parseInt(u.getAttribute(de));return Number.isNaN(t)||t<=0?null:t}}class InsertTableView extends View{constructor(t){super(t);xt(this,"items");xt(this,"keystrokes");xt(this,"focusTracker");const N=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(me,pe)=>`${pe}  ${me}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":N.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:N.to("label")}]}],on:{mousedown:N.to(me=>{me.preventDefault()}),click:N.to(()=>{this.fire("execute")})}}),this.on("boxover",(me,pe)=>{const{row:Le,column:Ye}=pe.target.dataset;this.items.get((parseInt(Le,10)-1)*10+(parseInt(Ye,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(me,pe,Le)=>{if(!Le)return;const{row:Ye,column:nt}=Le.dataset;this.set({rows:parseInt(Ye),columns:parseInt(nt)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const t=this.rows,N=this.columns;this.items.map((me,pe)=>{const Le=Math.floor(pe/10),Ye=pe%10,nt=Le<t&&Ye<N;me.set("isOn",nt)})}_createGridButton(t,N,me,pe){const Le=new ButtonView(t);return Le.set({label:pe,class:"ck-insert-table-dropdown-grid-box"}),Le.extendTemplate({attributes:{"data-row":N,"data-column":me}}),Le}_createGridCollection(){const t=[];for(let N=0;N<100;N++){const me=Math.floor(N/10),pe=N%10,Le=`${me+1}  ${pe+1}`;t.push(this._createGridButton(this.locale,me+1,pe+1,Le))}return this.createCollection(t)}}var tableColumnIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tableRowIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',tableMergeCellIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class TableUI extends Plugin{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const u=this.editor,t=this.editor.t,me=u.locale.contentLanguageDirection==="ltr";u.ui.componentFactory.add("insertTable",pe=>{const Le=u.commands.get("insertTable"),Ye=createDropdown(pe);Ye.bind("isEnabled").to(Le),Ye.buttonView.set({icon:icons.table,label:t("Insert table"),tooltip:!0});let nt;return Ye.on("change:isOpen",()=>{nt||(nt=new InsertTableView(pe),Ye.panelView.children.add(nt),nt.delegate("execute").to(Ye),Ye.on("execute",()=>{u.execute("insertTable",{rows:nt.rows,columns:nt.columns}),u.editing.view.focus()}))}),Ye}),u.ui.componentFactory.add("menuBar:insertTable",pe=>{const Le=u.commands.get("insertTable"),Ye=new MenuBarMenuView(pe),nt=new InsertTableView(pe);return nt.delegate("execute").to(Ye),Ye.on("change:isOpen",(ot,ft,mt)=>{mt||nt.reset()}),nt.on("execute",()=>{u.execute("insertTable",{rows:nt.rows,columns:nt.columns}),u.editing.view.focus()}),Ye.buttonView.set({label:t("Table"),icon:icons.table}),Ye.panelView.children.add(nt),Ye.bind("isEnabled").to(Le),Ye}),u.ui.componentFactory.add("tableColumn",pe=>{const Le=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:me?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:me?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),tableColumnIcon,Le,pe)}),u.ui.componentFactory.add("tableRow",pe=>{const Le=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),tableRowIcon,Le,pe)}),u.ui.componentFactory.add("mergeTableCells",pe=>{const Le=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:me?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:me?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),tableMergeCellIcon,Le,pe)})}_prepareDropdown(u,t,N,me){const pe=this.editor,Le=createDropdown(me),Ye=this._fillDropdownWithListOptions(Le,N);return Le.buttonView.set({label:u,icon:t,tooltip:!0}),Le.bind("isEnabled").toMany(Ye,"isEnabled",(...nt)=>nt.some(ot=>ot)),this.listenTo(Le,"execute",nt=>{pe.execute(nt.source.commandName),nt.source instanceof SwitchButtonView||pe.editing.view.focus()}),Le}_prepareMergeSplitButtonDropdown(u,t,N,me){const pe=this.editor,Le=createDropdown(me,SplitButtonView),Ye="mergeTableCells",nt=pe.commands.get(Ye),ot=this._fillDropdownWithListOptions(Le,N);return Le.buttonView.set({label:u,icon:t,tooltip:!0,isEnabled:!0}),Le.bind("isEnabled").toMany([nt,...ot],"isEnabled",(...ft)=>ft.some(mt=>mt)),this.listenTo(Le.buttonView,"execute",()=>{pe.execute(Ye),pe.editing.view.focus()}),this.listenTo(Le,"execute",ft=>{pe.execute(ft.source.commandName),pe.editing.view.focus()}),Le}_fillDropdownWithListOptions(u,t){const N=this.editor,me=[],pe=new Collection;for(const Le of t)addListOption(Le,N,me,pe);return addListToDropdown(u,pe),me}}function addListOption(de,u,t,N){if(de.type==="button"||de.type==="switchbutton"){const me=de.model=new Model(de.model),{commandName:pe,bindIsOn:Le}=de.model,Ye=u.commands.get(pe);t.push(Ye),me.set({commandName:pe}),me.bind("isEnabled").to(Ye),Le&&me.bind("isOn").to(Ye,"value"),me.set({withText:!0})}N.add(de)}class TableSelection extends Plugin{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils,TableUtils]}init(){const u=this.editor,t=u.model,N=u.editing.view;this.listenTo(t,"deleteContent",(me,pe)=>this._handleDeleteContent(me,pe),{priority:"high"}),this.listenTo(N.document,"insertText",(me,pe)=>this._handleInsertTextEvent(me,pe),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const u=this.editor.plugins.get(TableUtils),t=this.editor.model.document.selection,N=u.getSelectedTableCells(t);return N.length==0?null:N}getSelectionAsFragment(){const u=this.editor.plugins.get(TableUtils),t=this.getSelectedTableCells();return t?this.editor.model.change(N=>{const me=N.createDocumentFragment(),{first:pe,last:Le}=u.getColumnIndexes(t),{first:Ye,last:nt}=u.getRowIndexes(t),ot=t[0].findAncestor("table");let ft=nt,mt=Le;if(u.isSelectionRectangular(t)){const _t={firstColumn:pe,lastColumn:Le,firstRow:Ye,lastRow:nt};ft=adjustLastRowIndex(ot,_t),mt=adjustLastColumnIndex(ot,_t)}const yt=cropTableToDimensions(ot,{startRow:Ye,startColumn:pe,endRow:ft,endColumn:mt},N);return N.insert(yt,me,0),me}):null}setCellSelection(u,t){const N=this._getCellsToSelect(u,t);this.editor.model.change(me=>{me.setSelection(N.cells.map(pe=>me.createRangeOn(pe)),{backward:N.backward})})}getFocusCell(){const N=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return N&&N.is("element","tableCell")?N:null}getAnchorCell(){const u=this.editor.model.document.selection,N=first(u.getRanges()).getContainedElement();return N&&N.is("element","tableCell")?N:null}_defineSelectionConverter(){const u=this.editor,t=new Set;u.conversion.for("editingDowncast").add(me=>me.on("selection",(pe,Le,Ye)=>{const nt=Ye.writer;N(nt);const ot=this.getSelectedTableCells();if(!ot)return;for(const mt of ot){const bt=Ye.mapper.toViewElement(mt);nt.addClass("ck-editor__editable_selected",bt),t.add(bt)}const ft=Ye.mapper.toViewElement(ot[ot.length-1]);nt.setSelection(ft,0)},{priority:"lowest"}));function N(me){for(const pe of t)me.removeClass("ck-editor__editable_selected",pe);t.clear()}}_enablePluginDisabling(){const u=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;u.model.change(N=>{const me=N.createPositionAt(t[0],0),pe=u.model.schema.getNearestSelectionRange(me);N.setSelection(pe)})}})}_handleDeleteContent(u,t){const N=this.editor.plugins.get(TableUtils),me=t[0],pe=t[1],Le=this.editor.model,Ye=!pe||pe.direction=="backward",nt=N.getSelectedTableCells(me);nt.length&&(u.stop(),Le.change(ot=>{const ft=nt[Ye?nt.length-1:0];Le.change(bt=>{for(const yt of nt)Le.deleteContent(bt.createSelection(yt,"in"))});const mt=Le.schema.getNearestSelectionRange(ot.createPositionAt(ft,0));me.is("documentSelection")?ot.setSelection(mt):me.setTo(mt)}))}_handleInsertTextEvent(u,t){const N=this.editor,me=this.getSelectedTableCells();if(!me)return;const pe=N.editing.view,Le=N.editing.mapper,Ye=me.map(nt=>pe.createRangeOn(Le.toViewElement(nt)));t.selection=pe.createSelection(Ye)}_getCellsToSelect(u,t){const N=this.editor.plugins.get("TableUtils"),me=N.getCellLocation(u),pe=N.getCellLocation(t),Le=Math.min(me.row,pe.row),Ye=Math.max(me.row,pe.row),nt=Math.min(me.column,pe.column),ot=Math.max(me.column,pe.column),ft=new Array(Ye-Le+1).fill(null).map(()=>[]),mt={startRow:Le,endRow:Ye,startColumn:nt,endColumn:ot};for(const{row:_t,cell:Ct}of new TableWalker(u.findAncestor("table"),mt))ft[_t-Le].push(Ct);const bt=pe.row<me.row,yt=pe.column<me.column;return bt&&ft.reverse(),yt&&ft.forEach(_t=>_t.reverse()),{cells:ft.flat(),backward:bt||yt}}}class TableClipboard extends Plugin{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,TableSelection,TableUtils]}init(){const u=this.editor,t=u.editing.view.document;this.listenTo(t,"copy",(N,me)=>this._onCopyCut(N,me)),this.listenTo(t,"cut",(N,me)=>this._onCopyCut(N,me)),this.listenTo(u.model,"insertContent",(N,[me,pe])=>this._onInsertContent(N,me,pe),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(u,t){const N=this.editor.editing.view,me=this.editor.plugins.get(TableSelection),pe=this.editor.plugins.get(ClipboardMarkersUtils);me.getSelectedTableCells()&&(u.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),u.stop(),this.editor.model.enqueueChange({isUndoable:u.name==="cut"},()=>{const Le=pe._copySelectedFragmentWithMarkers(u.name,this.editor.model.document.selection,()=>me.getSelectionAsFragment());N.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(Le),method:u.name})})))}_onInsertContent(u,t,N){if(N&&!N.is("documentSelection"))return;const me=this.editor.model,pe=this.editor.plugins.get(TableUtils),Le=this.editor.plugins.get(ClipboardMarkersUtils),Ye=this.getTableIfOnlyTableInContent(t,me);if(!Ye)return;const nt=pe.getSelectionAffectedTableCells(me.document.selection);if(!nt.length){removeEmptyRowsColumns(Ye,pe);return}u.stop(),t.is("documentFragment")?Le._pasteMarkersIntoTransformedElement(t.markers,ot=>this._replaceSelectedCells(Ye,nt,ot)):this.editor.model.change(ot=>{this._replaceSelectedCells(Ye,nt,ot)})}_replaceSelectedCells(u,t,N){const me=this.editor.plugins.get(TableUtils),pe={width:me.getColumns(u),height:me.getRows(u)},Le=prepareTableForPasting(t,pe,N,me),Ye=Le.lastRow-Le.firstRow+1,nt=Le.lastColumn-Le.firstColumn+1,ot={startRow:0,startColumn:0,endRow:Math.min(Ye,pe.height)-1,endColumn:Math.min(nt,pe.width)-1};u=cropTableToDimensions(u,ot,N);const ft=t[0].findAncestor("table"),mt=this._replaceSelectedCellsWithPasted(u,pe,ft,Le,N);if(this.editor.plugins.get("TableSelection").isEnabled){const bt=me.sortRanges(mt.map(yt=>N.createRangeOn(yt)));N.setSelection(bt)}else N.setSelection(mt[0],0);return ft}_replaceSelectedCellsWithPasted(u,t,N,me,pe){const{width:Le,height:Ye}=t,nt=createLocationMap(u,Le,Ye),ot=[...new TableWalker(N,{startRow:me.firstRow,endRow:me.lastRow,startColumn:me.firstColumn,endColumn:me.lastColumn,includeAllSlots:!0})],ft=[];let mt;for(const Tt of ot){const{row:At,column:It}=Tt;It===me.firstColumn&&(mt=Tt.getPositionBefore());const Pt=At-me.firstRow,Bt=It-me.firstColumn,Ot=nt[Pt%Ye][Bt%Le],Nt=Ot?pe.cloneElement(Ot):null,Lt=this._replaceTableSlotCell(Tt,Nt,mt,pe);Lt&&(trimTableCellIfNeeded(Lt,At,It,me.lastRow,me.lastColumn,pe),ft.push(Lt),mt=pe.createPositionAfter(Lt))}const bt=parseInt(N.getAttribute("headingRows")||"0"),yt=parseInt(N.getAttribute("headingColumns")||"0"),_t=me.firstRow<bt&&bt<=me.lastRow,Ct=me.firstColumn<yt&&yt<=me.lastColumn;if(_t){const Tt={first:me.firstColumn,last:me.lastColumn},At=doHorizontalSplit(N,bt,Tt,pe,me.firstRow);ft.push(...At)}if(Ct){const Tt={first:me.firstRow,last:me.lastRow},At=doVerticalSplit(N,yt,Tt,pe);ft.push(...At)}return ft}_replaceTableSlotCell(u,t,N,me){const{cell:pe,isAnchor:Le}=u;return Le&&me.remove(pe),t?(me.insert(t,N),t):null}getTableIfOnlyTableInContent(u,t){if(!u.is("documentFragment")&&!u.is("element"))return null;if(u.is("element","table"))return u;if(u.childCount==1&&u.getChild(0).is("element","table"))return u.getChild(0);const N=t.createRangeIn(u);for(const me of N.getItems())if(me.is("element","table")){const pe=t.createRange(N.start,t.createPositionBefore(me));if(t.hasContent(pe,{ignoreWhitespaces:!0}))return null;const Le=t.createRange(t.createPositionAfter(me),N.end);return t.hasContent(Le,{ignoreWhitespaces:!0})?null:me}return null}}function prepareTableForPasting(de,u,t,N){const me=de[0].findAncestor("table"),pe=N.getColumnIndexes(de),Le=N.getRowIndexes(de),Ye={firstColumn:pe.first,lastColumn:pe.last,firstRow:Le.first,lastRow:Le.last},nt=de.length===1;return nt&&(Ye.lastRow+=u.height-1,Ye.lastColumn+=u.width-1,expandTableSize(me,Ye.lastRow+1,Ye.lastColumn+1,N)),nt||!N.isSelectionRectangular(de)?splitCellsToRectangularSelection(me,Ye,t):(Ye.lastRow=adjustLastRowIndex(me,Ye),Ye.lastColumn=adjustLastColumnIndex(me,Ye)),Ye}function expandTableSize(de,u,t,N){const me=N.getColumns(de),pe=N.getRows(de);t>me&&N.insertColumns(de,{at:me,columns:t-me}),u>pe&&N.insertRows(de,{at:pe,rows:u-pe})}function createLocationMap(de,u,t){const N=new Array(t).fill(null).map(()=>new Array(u).fill(null));for(const{column:me,row:pe,cell:Le}of new TableWalker(de))N[pe][me]=Le;return N}function splitCellsToRectangularSelection(de,u,t){const{firstRow:N,lastRow:me,firstColumn:pe,lastColumn:Le}=u,Ye={first:N,last:me},nt={first:pe,last:Le};doVerticalSplit(de,pe,Ye,t),doVerticalSplit(de,Le+1,Ye,t),doHorizontalSplit(de,N,nt,t),doHorizontalSplit(de,me+1,nt,t,N)}function doHorizontalSplit(de,u,t,N,me=0){return u<1?void 0:getVerticallyOverlappingCells(de,u,me).filter(({column:Ye,cellWidth:nt})=>isAffectedBySelection(Ye,nt,t)).map(({cell:Ye})=>splitHorizontally(Ye,u,N))}function doVerticalSplit(de,u,t,N){return u<1?void 0:getHorizontallyOverlappingCells(de,u).filter(({row:Le,cellHeight:Ye})=>isAffectedBySelection(Le,Ye,t)).map(({cell:Le,column:Ye})=>splitVertically(Le,Ye,u,N))}function isAffectedBySelection(de,u,t){const N=de+u-1,{first:me,last:pe}=t,Le=de>=me&&de<=pe,Ye=de<me&&N>=me;return Le||Ye}class TableKeyboard extends Plugin{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){const u=this.editor,N=u.editing.view.document,me=u.t;this.listenTo(N,"arrowKey",(...pe)=>this._onArrowKey(...pe),{context:"table"}),this.listenTo(N,"tab",(...pe)=>this._handleTabOnSelectedTable(...pe),{context:"figure"}),this.listenTo(N,"tab",(...pe)=>this._handleTab(...pe),{context:["th","td"]}),u.accessibility.addKeystrokeInfoGroup({id:"table",label:me("Keystrokes that can be used in a table cell"),keystrokes:[{label:me("Move the selection to the next cell"),keystroke:"Tab"},{label:me("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:me("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:me("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(u,t){const N=this.editor,pe=N.model.document.selection.getSelectedElement();!pe||!pe.is("element","table")||(t.preventDefault(),t.stopPropagation(),u.stop(),N.model.change(Le=>{Le.setSelection(Le.createRangeIn(pe.getChild(0).getChild(0)))}))}_handleTab(u,t){const N=this.editor,me=this.editor.plugins.get(TableUtils),pe=this.editor.plugins.get("TableSelection"),Le=N.model.document.selection,Ye=!t.shiftKey;let nt=me.getTableCellsContainingSelection(Le)[0];if(nt||(nt=pe.getFocusCell()),!nt)return;t.preventDefault(),t.stopPropagation(),u.stop();const ot=nt.parent,ft=ot.parent,mt=ft.getChildIndex(ot),bt=ot.getChildIndex(nt),yt=bt===0;if(!Ye&&yt&&mt===0){N.model.change(At=>{At.setSelection(At.createRangeOn(ft))});return}const _t=bt===ot.childCount-1,Ct=mt===me.getRows(ft)-1;if(Ye&&Ct&&_t&&(N.execute("insertTableRowBelow"),mt===me.getRows(ft)-1)){N.model.change(At=>{At.setSelection(At.createRangeOn(ft))});return}let Tt;if(Ye&&_t)Tt=ft.getChild(mt+1).getChild(0);else if(!Ye&&yt){const At=ft.getChild(mt-1);Tt=At.getChild(At.childCount-1)}else Tt=ot.getChild(bt+(Ye?1:-1));N.model.change(At=>{At.setSelection(At.createRangeIn(Tt))})}_onArrowKey(u,t){const N=this.editor,me=t.keyCode,pe=getLocalizedArrowKeyCodeDirection(me,N.locale.contentLanguageDirection);this._handleArrowKeys(pe,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),u.stop())}_handleArrowKeys(u,t){const N=this.editor.plugins.get(TableUtils),me=this.editor.plugins.get("TableSelection"),pe=this.editor.model,Le=pe.document.selection,Ye=["right","down"].includes(u),nt=N.getSelectedTableCells(Le);if(nt.length){let ft;return t?ft=me.getFocusCell():ft=Ye?nt[nt.length-1]:nt[0],this._navigateFromCellInDirection(ft,u,t),!0}const ot=Le.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!ot)return!1;if(!Le.isCollapsed)if(t){if(Le.isBackward==Ye&&!Le.containsEntireContent(ot))return!1}else{const ft=Le.getSelectedElement();if(!ft||!pe.schema.isObject(ft))return!1}return this._isSelectionAtCellEdge(Le,ot,Ye)?(this._navigateFromCellInDirection(ot,u,t),!0):!1}_isSelectionAtCellEdge(u,t,N){const me=this.editor.model,pe=this.editor.model.schema,Le=N?u.getLastPosition():u.getFirstPosition();if(!pe.getLimitElement(Le).is("element","tableCell"))return me.createPositionAt(t,N?"end":0).isTouching(Le);const Ye=me.createSelection(Le);return me.modifySelection(Ye,{direction:N?"forward":"backward"}),Le.isEqual(Ye.focus)}_navigateFromCellInDirection(u,t,N=!1){const me=this.editor.model,pe=u.findAncestor("table"),Le=[...new TableWalker(pe,{includeAllSlots:!0})],{row:Ye,column:nt}=Le[Le.length-1],ot=Le.find(({cell:It})=>It==u);let{row:ft,column:mt}=ot;switch(t){case"left":mt--;break;case"up":ft--;break;case"right":mt+=ot.cellWidth;break;case"down":ft+=ot.cellHeight;break}const bt=ft<0||ft>Ye,yt=mt<0&&ft<=0,_t=mt>nt&&ft>=Ye;if(bt||yt||_t){me.change(It=>{It.setSelection(It.createRangeOn(pe))});return}mt<0?(mt=N?0:nt,ft--):mt>nt&&(mt=N?nt:0,ft++);const Ct=Le.find(It=>It.row==ft&&It.column==mt).cell,Tt=["right","down"].includes(t),At=this.editor.plugins.get("TableSelection");if(N&&At.isEnabled){const It=At.getAnchorCell()||u;At.setCellSelection(It,Ct)}else{const It=me.createPositionAt(Ct,Tt?0:"end");me.change(Pt=>{Pt.setSelection(It)})}}}class MouseEventsObserver extends DomEventObserver{constructor(){super(...arguments);xt(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(t){this.fire(t.type,t)}}class TableMouse extends Plugin{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){this.editor.editing.view.addObserver(MouseEventsObserver),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const u=this.editor,t=u.plugins.get(TableUtils);let N=!1;const me=u.plugins.get(TableSelection);this.listenTo(u.editing.view.document,"mousedown",(pe,Le)=>{const Ye=u.model.document.selection;if(!this.isEnabled||!me.isEnabled||!Le.domEvent.shiftKey)return;const nt=me.getAnchorCell()||t.getTableCellsContainingSelection(Ye)[0];if(!nt)return;const ot=this._getModelTableCellFromDomEvent(Le);ot&&haveSameTableParent(nt,ot)&&(N=!0,me.setCellSelection(nt,ot),Le.preventDefault())}),this.listenTo(u.editing.view.document,"mouseup",()=>{N=!1}),this.listenTo(u.editing.view.document,"selectionChange",pe=>{N&&pe.stop()},{priority:"highest"})}_enableMouseDragSelection(){const u=this.editor;let t,N,me=!1,pe=!1;const Le=u.plugins.get(TableSelection);this.listenTo(u.editing.view.document,"mousedown",(Ye,nt)=>{!this.isEnabled||!Le.isEnabled||nt.domEvent.shiftKey||nt.domEvent.ctrlKey||nt.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(nt))}),this.listenTo(u.editing.view.document,"mousemove",(Ye,nt)=>{if(!nt.domEvent.buttons||!t)return;const ot=this._getModelTableCellFromDomEvent(nt);ot&&haveSameTableParent(t,ot)&&(N=ot,!me&&N!=t&&(me=!0)),me&&(pe=!0,Le.setCellSelection(t,N),nt.preventDefault())}),this.listenTo(u.editing.view.document,"mouseup",()=>{me=!1,pe=!1,t=null,N=null}),this.listenTo(u.editing.view.document,"selectionChange",Ye=>{pe&&Ye.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(u){const t=u.target,N=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(N).parent.findAncestor("tableCell",{includeSelf:!0})}}function haveSameTableParent(de,u){return de.parent.parent==u.parent.parent}class Table extends Plugin{static get requires(){return[TableEditing,TableUI,TableSelection,TableMouse,TableKeyboard,TableClipboard,Widget]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function getSelectionAffectedTableWidget(de){const u=getSelectedTableWidget(de);return u||getTableWidgetAncestor(de)}function getSelectedTableWidget(de){const u=de.getSelectedElement();return u&&isTableWidget(u)?u:null}function getTableWidgetAncestor(de){const u=de.getFirstPosition();if(!u)return null;let t=u.parent;for(;t;){if(t.is("element")&&isTableWidget(t))return t;t=t.parent}return null}function isTableWidget(de){return!!de.getCustomProperty("table")&&isWidget(de)}class TableToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const u=this.editor,t=u.t,N=u.plugins.get(WidgetToolbarRepository),me=u.config.get("table.contentToolbar"),pe=u.config.get("table.tableToolbar");me&&N.register("tableContent",{ariaLabel:t("Table toolbar"),items:me,getRelatedElement:getTableWidgetAncestor}),pe&&N.register("table",{ariaLabel:t("Table toolbar"),items:pe,getRelatedElement:getSelectedTableWidget})}}class ColorInputView extends View{constructor(t,N){super(t);xt(this,"options");xt(this,"focusTracker");xt(this,"focusCycler");xt(this,"_focusables");xt(this,"dropdownView");xt(this,"inputView");xt(this,"keystrokes");xt(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=N,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new KeystrokeHandler,this._stillTyping=!1,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(me,pe,Le)=>this._setInputValue(Le))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(t=>{this.focusTracker.add(t.element),this._focusables.add(t)}),this.keystrokes.listenTo(this.element)}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const t=this.locale,N=t.t,me=this.bindTemplate,pe=this._createColorSelector(t),Le=createDropdown(t),Ye=new View;return Ye.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:me.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",me.if("value","ck-hidden",nt=>nt!="")]}}]}),Le.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),Le.buttonView.children.add(Ye),Le.buttonView.label=N("Color picker"),Le.buttonView.tooltip=!0,Le.panelPosition=t.uiLanguageDirection==="rtl"?"se":"sw",Le.panelView.children.add(pe),Le.bind("isEnabled").to(this,"isReadOnly",nt=>!nt),Le.on("change:isOpen",(nt,ot,ft)=>{ft&&(pe.updateSelectedColors(),pe.showColorGridsFragment())}),Le}_createInputTextView(){const t=this.locale,N=new InputTextView(t);return N.extendTemplate({on:{blur:N.bindTemplate.to("blur")}}),N.value=this.value,N.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(N),N.on("input",()=>{const me=N.element.value,pe=this.options.colorDefinitions.find(Le=>me===Le.label);this._stillTyping=!0,this.value=pe&&pe.color||me}),N.on("blur",()=>{this._stillTyping=!1,this._setInputValue(N.element.value)}),N.delegate("input").to(this),N}_createColorSelector(t){const N=t.t,me=this.options.defaultColorValue||"",pe=N(me?"Restore default":"Remove color"),Le=new ColorSelectorView(t,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:pe,colorPickerLabel:N("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});Le.appendUI(),Le.on("execute",(nt,ot)=>{if(ot.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=ot.value||me,this.fire("input"),ot.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let Ye=this.value;return Le.on("colorPicker:cancel",()=>{this.value=Ye,this.fire("input"),this.dropdownView.isOpen=!1}),Le.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{Ye=this.value}),Le.bind("selectedColor").to(this,"value"),Le}_setInputValue(t){if(!this._stillTyping){const N=normalizeColor(t),me=this.options.colorDefinitions.find(pe=>N===normalizeColor(pe.color));me?this.inputView.value=me.label:this.inputView.value=t||""}}}function normalizeColor(de){return de.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const isEmpty=de=>de==="";function getBorderStyleLabels(de){return{none:de("None"),solid:de("Solid"),dotted:de("Dotted"),dashed:de("Dashed"),double:de("Double"),groove:de("Groove"),ridge:de("Ridge"),inset:de("Inset"),outset:de("Outset")}}function getLocalizedColorErrorText(de){return de('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function getLocalizedLengthErrorText(de){return de('The value is invalid. Try "10px" or "2em" or simply "2".')}function colorFieldValidator(de){return de=de.trim().toLowerCase(),isEmpty(de)||isColor(de)}function lengthFieldValidator(de){return de=de.trim(),isEmpty(de)||isNumberString(de)||isLength(de)||isPercentage(de)}function lineWidthFieldValidator(de){return de=de.trim(),isEmpty(de)||isNumberString(de)||isLength(de)}function getBorderStyleDefinitions(de,u){const t=new Collection,N=getBorderStyleLabels(de.t);for(const me in N){const pe={type:"button",model:new Model({_borderStyleValue:me,label:N[me],role:"menuitemradio",withText:!0})};me==="none"?pe.model.bind("isOn").to(de,"borderStyle",Le=>u==="none"?!Le:Le===me):pe.model.bind("isOn").to(de,"borderStyle",Le=>Le===me),t.add(pe)}return t}function fillToolbar(de){const{view:u,icons:t,toolbar:N,labels:me,propertyName:pe,nameToValue:Le,defaultValue:Ye}=de;for(const nt in me){const ot=new ButtonView(u.locale);ot.set({role:"radio",isToggleable:!0,label:me[nt],icon:t[nt],tooltip:me[nt]});const ft=Le?Le(nt):nt;ot.bind("isOn").to(u,pe,mt=>{let bt=mt;return mt===""&&Ye&&(bt=Ye),ft===bt}),ot.on("execute",()=>{u[pe]=ft}),N.items.add(ot)}}const defaultColors=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function getLabeledColorInputCreator(de){return(u,t,N)=>{const me=new ColorInputView(u.locale,{colorDefinitions:colorConfigToColorGridDefinitions(de.colorConfig),columns:de.columns,defaultColorValue:de.defaultColorValue,colorPickerConfig:de.colorPickerConfig});return me.inputView.set({id:t,ariaDescribedById:N}),me.bind("isReadOnly").to(u,"isEnabled",pe=>!pe),me.bind("hasError").to(u,"errorText",pe=>!!pe),me.on("input",()=>{u.errorText=null}),u.bind("isEmpty","isFocused").to(me),me}}function isNumberString(de){const u=parseFloat(de);return!Number.isNaN(u)&&de===String(u)}function colorConfigToColorGridDefinitions(de){return de.map(u=>({color:u.model,label:u.label,options:{hasBorder:u.hasBorder}}))}class FormRowView extends View{constructor(t,N={}){super(t);xt(this,"children");const me=this.bindTemplate;this.set("class",N.class||null),this.children=this.createCollection(),N.children&&N.children.forEach(pe=>this.children.add(pe)),this.set("_role",null),this.set("_ariaLabelledBy",null),N.labelView&&this.set({_role:"group",_ariaLabelledBy:N.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",me.to("class")],role:me.to("_role"),"aria-labelledby":me.to("_ariaLabelledBy")},children:this.children})}}class TableCellPropertiesView extends View{constructor(t,N){super(t);xt(this,"options");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"children");xt(this,"borderStyleDropdown");xt(this,"borderWidthInput");xt(this,"borderColorInput");xt(this,"backgroundInput");xt(this,"paddingInput");xt(this,"widthInput");xt(this,"heightInput");xt(this,"horizontalAlignmentToolbar");xt(this,"verticalAlignmentToolbar");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"_focusables");xt(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=N;const{borderStyleDropdown:me,borderWidthInput:pe,borderColorInput:Le,borderRowLabel:Ye}=this._createBorderFields(),{backgroundRowLabel:nt,backgroundInput:ot}=this._createBackgroundFields(),{widthInput:ft,operatorLabel:mt,heightInput:bt,dimensionsLabel:yt}=this._createDimensionFields(),{horizontalAlignmentToolbar:_t,verticalAlignmentToolbar:Ct,alignmentLabel:Tt}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=me,this.borderWidthInput=pe,this.borderColorInput=Le,this.backgroundInput=ot,this.paddingInput=this._createPaddingField(),this.widthInput=ft,this.heightInput=bt,this.horizontalAlignmentToolbar=_t,this.verticalAlignmentToolbar=Ct;const{saveButtonView:At,cancelButtonView:It}=this._createActionButtons();this.saveButtonView=At,this.cancelButtonView=It,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(t,{label:this.t("Cell properties")})),this.children.add(new FormRowView(t,{labelView:Ye,children:[Ye,me,Le,pe],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(t,{labelView:nt,children:[nt,ot],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(t,{children:[new FormRowView(t,{labelView:yt,children:[yt,ft,mt,bt],class:"ck-table-form__dimensions-row"}),new FormRowView(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new FormRowView(t,{labelView:Tt,children:[Tt,_t,Ct],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new FormRowView(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableCellProperties,N={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},me=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:N.color,colorPickerConfig:this.options.colorPickerConfig}),pe=this.locale,Le=this.t,Ye=Le("Style"),nt=new LabelView(pe);nt.text=Le("Border");const ot=getBorderStyleLabels(Le),ft=new LabeledFieldView(pe,createLabeledDropdown);ft.set({label:Ye,class:"ck-table-form__border-style"}),ft.fieldView.buttonView.set({ariaLabel:Ye,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:Ye}),ft.fieldView.buttonView.bind("label").to(this,"borderStyle",yt=>ot[yt||"none"]),ft.fieldView.on("execute",yt=>{this.borderStyle=yt.source._borderStyleValue}),ft.bind("isEmpty").to(this,"borderStyle",yt=>!yt),addListToDropdown(ft.fieldView,getBorderStyleDefinitions(this,N.style),{role:"menu",ariaLabel:Ye});const mt=new LabeledFieldView(pe,createLabeledInputText);mt.set({label:Le("Width"),class:"ck-table-form__border-width"}),mt.fieldView.bind("value").to(this,"borderWidth"),mt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),mt.fieldView.on("input",()=>{this.borderWidth=mt.fieldView.element.value});const bt=new LabeledFieldView(pe,me);return bt.set({label:Le("Color"),class:"ck-table-form__border-color"}),bt.fieldView.bind("value").to(this,"borderColor"),bt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),bt.fieldView.on("input",()=>{this.borderColor=bt.fieldView.value}),this.on("change:borderStyle",(yt,_t,Ct,Tt)=>{isBorderStyleSet$1(Ct)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet$1(Tt)||(this.borderColor=N.color,this.borderWidth=N.width)}),{borderRowLabel:nt,borderStyleDropdown:ft,borderColorInput:bt,borderWidthInput:mt}}_createBackgroundFields(){const t=this.locale,N=this.t,me=new LabelView(t);me.text=N("Background");const pe=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),Le=new LabeledFieldView(t,pe);return Le.set({label:N("Color"),class:"ck-table-cell-properties-form__background"}),Le.fieldView.bind("value").to(this,"backgroundColor"),Le.fieldView.on("input",()=>{this.backgroundColor=Le.fieldView.value}),{backgroundRowLabel:me,backgroundInput:Le}}_createDimensionFields(){const t=this.locale,N=this.t,me=new LabelView(t);me.text=N("Dimensions");const pe=new LabeledFieldView(t,createLabeledInputText);pe.set({label:N("Width"),class:"ck-table-form__dimensions-row__width"}),pe.fieldView.bind("value").to(this,"width"),pe.fieldView.on("input",()=>{this.width=pe.fieldView.element.value});const Le=new View(t);Le.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const Ye=new LabeledFieldView(t,createLabeledInputText);return Ye.set({label:N("Height"),class:"ck-table-form__dimensions-row__height"}),Ye.fieldView.bind("value").to(this,"height"),Ye.fieldView.on("input",()=>{this.height=Ye.fieldView.element.value}),{dimensionsLabel:me,widthInput:pe,operatorLabel:Le,heightInput:Ye}}_createPaddingField(){const t=this.locale,N=this.t,me=new LabeledFieldView(t,createLabeledInputText);return me.set({label:N("Padding"),class:"ck-table-cell-properties-form__padding"}),me.fieldView.bind("value").to(this,"padding"),me.fieldView.on("input",()=>{this.padding=me.fieldView.element.value}),me}_createAlignmentFields(){const t=this.locale,N=this.t,me=new LabelView(t),pe={left:icons.alignLeft,center:icons.alignCenter,right:icons.alignRight,justify:icons.alignJustify,top:icons.alignTop,middle:icons.alignMiddle,bottom:icons.alignBottom};me.text=N("Table cell text alignment");const Le=new ToolbarView(t),Ye=t.contentLanguageDirection==="rtl";Le.set({isCompact:!0,role:"radiogroup",ariaLabel:N("Horizontal text alignment toolbar")}),fillToolbar({view:this,icons:pe,toolbar:Le,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:ot=>{if(Ye){if(ot==="left")return"right";if(ot==="right")return"left"}return ot},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const nt=new ToolbarView(t);return nt.set({isCompact:!0,role:"radiogroup",ariaLabel:N("Vertical text alignment toolbar")}),fillToolbar({view:this,icons:pe,toolbar:nt,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:Le,verticalAlignmentToolbar:nt,alignmentLabel:me}}_createActionButtons(){const t=this.locale,N=this.t,me=new ButtonView(t),pe=new ButtonView(t),Le=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return me.set({label:N("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),me.bind("isEnabled").toMany(Le,"errorText",(...Ye)=>Ye.every(nt=>!nt)),pe.set({label:N("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),pe.delegate("execute").to(this,"cancel"),{saveButtonView:me,cancelButtonView:pe}}get _horizontalAlignmentLabels(){const t=this.locale,N=this.t,me=N("Align cell text to the left"),pe=N("Align cell text to the center"),Le=N("Align cell text to the right"),Ye=N("Justify cell text");return t.uiLanguageDirection==="rtl"?{right:Le,center:pe,left:me,justify:Ye}:{left:me,center:pe,right:Le,justify:Ye}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("Align cell text to the top"),middle:t("Align cell text to the middle"),bottom:t("Align cell text to the bottom")}}}function isBorderStyleSet$1(de){return de!=="none"}const BALLOON_POSITIONS=[BalloonPanelView.defaultPositions.northArrowSouth,BalloonPanelView.defaultPositions.northArrowSouthWest,BalloonPanelView.defaultPositions.northArrowSouthEast,BalloonPanelView.defaultPositions.southArrowNorth,BalloonPanelView.defaultPositions.southArrowNorthWest,BalloonPanelView.defaultPositions.southArrowNorthEast,BalloonPanelView.defaultPositions.viewportStickyNorth];function repositionContextualBalloon(de,u){const t=de.plugins.get("ContextualBalloon"),N=de.editing.view.document.selection;let me;u==="cell"?getTableWidgetAncestor(N)&&(me=getBalloonCellPositionData(de)):getSelectionAffectedTableWidget(N)&&(me=getBalloonTablePositionData(de)),me&&t.updatePosition(me)}function getBalloonTablePositionData(de){const u=de.model.document.selection,t=getSelectionAffectedTable(u),N=de.editing.mapper.toViewElement(t);return{target:de.editing.view.domConverter.mapViewToDom(N),positions:BALLOON_POSITIONS}}function getBalloonCellPositionData(de){const u=de.editing.mapper,t=de.editing.view.domConverter,N=de.model.document.selection;if(N.rangeCount>1)return{target:()=>createBoundingRect(N.getRanges(),de),positions:BALLOON_POSITIONS};const me=getTableCellAtPosition(N.getFirstPosition()),pe=u.toViewElement(me);return{target:t.mapViewToDom(pe),positions:BALLOON_POSITIONS}}function getTableCellAtPosition(de){return de.nodeAfter&&de.nodeAfter.is("element","tableCell")?de.nodeAfter:de.findAncestor("tableCell")}function createBoundingRect(de,u){const t=u.editing.mapper,N=u.editing.view.domConverter,me=Array.from(de).map(pe=>{const Le=getTableCellAtPosition(pe.start),Ye=t.toViewElement(Le);return new Rect(N.mapViewToDom(Ye))});return Rect.getBoundingRect(me)}var tableCellProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function getSingleValue(de){if(!de||!isObject$2(de))return de;const{top:u,right:t,bottom:N,left:me}=de;if(u==t&&t==N&&N==me)return u}function addDefaultUnitToNumericValue(de,u){const t=parseFloat(de);return Number.isNaN(t)||String(t)!==String(de)?de:`${t}${u}`}function getNormalizedDefaultProperties(de,u={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...de};return u.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),u.includePaddingProperty&&!t.padding&&(t.padding=""),u.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),u.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=u.isRightToLeftContent?"right":"left"),t}function getNormalizedDefaultTableProperties(de,u){return getNormalizedDefaultProperties({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...de},u)}function getNormalizedDefaultCellProperties(de,u){return getNormalizedDefaultProperties({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...de},u)}const ERROR_TEXT_TIMEOUT$1=500,propertyToCommandMap$1={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class TableCellPropertiesUI extends Plugin{constructor(t){super(t);xt(this,"_defaultTableCellProperties");xt(this,"_balloon");xt(this,"view");xt(this,"_undoStepBatch");xt(this,"_isReady");t.config.define("table.tableCellProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.t;this._defaultTableCellProperties=getNormalizedDefaultCellProperties(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"}),this._balloon=t.plugins.get(ContextualBalloon),this.view=null,this._isReady=!1,t.ui.componentFactory.add("tableCellProperties",me=>{const pe=new ButtonView(me);pe.set({label:N("Cell properties"),icon:tableCellProperties,tooltip:!0}),this.listenTo(pe,"execute",()=>this._showView());const Le=Object.values(propertyToCommandMap$1).map(Ye=>t.commands.get(Ye));return pe.bind("isEnabled").toMany(Le,"isEnabled",(...Ye)=>Ye.some(nt=>nt)),pe})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const t=this.editor,N=t.config.get("table.tableCellProperties"),me=normalizeColorOptions(N.borderColors),pe=getLocalizedColorOptions(t.locale,me),Le=normalizeColorOptions(N.backgroundColors),Ye=getLocalizedColorOptions(t.locale,Le),nt=N.colorPicker!==!1,ot=new TableCellPropertiesView(t.locale,{borderColors:pe,backgroundColors:Ye,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:nt?N.colorPicker||{}:!1}),ft=t.t;ot.render(),this.listenTo(ot,"submit",()=>{this._hideView()}),this.listenTo(ot,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),ot.keystrokes.set("Esc",(yt,_t)=>{this._hideView(),_t()}),clickOutsideHandler({emitter:ot,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const mt=getLocalizedColorErrorText(ft),bt=getLocalizedLengthErrorText(ft);return ot.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),ot.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ot.borderColorInput,commandName:"tableCellBorderColor",errorText:mt,validator:colorFieldValidator})),ot.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ot.borderWidthInput,commandName:"tableCellBorderWidth",errorText:bt,validator:lineWidthFieldValidator})),ot.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:ot.paddingInput,commandName:"tableCellPadding",errorText:bt,validator:lengthFieldValidator})),ot.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ot.widthInput,commandName:"tableCellWidth",errorText:bt,validator:lengthFieldValidator})),ot.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ot.heightInput,commandName:"tableCellHeight",errorText:bt,validator:lengthFieldValidator})),ot.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ot.backgroundInput,commandName:"tableCellBackgroundColor",errorText:mt,validator:colorFieldValidator})),ot.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),ot.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),ot}_fillViewFormFromCommandValues(){const t=this.editor.commands,N=t.get("tableCellBorderStyle");Object.entries(propertyToCommandMap$1).map(([me,pe])=>{const Le=this._defaultTableCellProperties[me]||"";return[me,t.get(pe).value||Le]}).forEach(([me,pe])=>{(me==="borderColor"||me==="borderWidth")&&N.value==="none"||this.view.set(me,pe)}),this._isReady=!0}_showView(){const t=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonCellPositionData(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,N=t.editing.view.document;getTableWidgetAncestor(N.selection)?this._isViewVisible&&repositionContextualBalloon(t,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(N,me,pe)=>{this._isReady&&this.editor.execute(t,{value:pe,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:N,viewField:me,validator:pe,errorText:Le}=t,Ye=debounce(()=>{me.errorText=Le},ERROR_TEXT_TIMEOUT$1);return(nt,ot,ft)=>{Ye.cancel(),this._isReady&&(pe(ft)?(this.editor.execute(N,{value:ft,batch:this._undoStepBatch}),me.errorText=null):Ye())}}}class TableCellPropertyCommand extends Command{constructor(t,N,me){super(t);xt(this,"attributeName");xt(this,"_defaultValue");this.attributeName=N,this._defaultValue=me}refresh(){const t=this.editor,me=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t.model.document.selection);this.isEnabled=!!me.length,this.value=this._getSingleValue(me)}execute(t={}){const{value:N,batch:me}=t,pe=this.editor.model,Ye=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(pe.document.selection),nt=this._getValueToSet(N);pe.enqueueChange(me,ot=>{nt?Ye.forEach(ft=>ot.setAttribute(this.attributeName,nt,ft)):Ye.forEach(ft=>ot.removeAttribute(this.attributeName,ft))})}_getAttribute(t){if(!t)return;const N=t.getAttribute(this.attributeName);if(N!==this._defaultValue)return N}_getValueToSet(t){if(t!==this._defaultValue)return t}_getSingleValue(t){const N=this._getAttribute(t[0]);return t.every(pe=>this._getAttribute(pe)===N)?N:void 0}}class TableCellWidthCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellWidth",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableCellWidthEditing extends Plugin{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const u=this.editor,t=getNormalizedDefaultCellProperties(u.config.get("table.tableCellProperties.defaultProperties"));enableProperty$1(u.model.schema,u.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),u.commands.add("tableCellWidth",new TableCellWidthCommand(u,t.width))}}class TableCellPaddingCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellPadding",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableCellHeightCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellHeight",t)}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableCellBackgroundColorCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBackgroundColor",t)}}class TableCellVerticalAlignmentCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellVerticalAlignment",t)}}class TableCellHorizontalAlignmentCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellHorizontalAlignment",t)}}class TableCellBorderStyleCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderStyle",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableCellBorderColorCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderColor",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableCellBorderWidthCommand extends TableCellPropertyCommand{constructor(u,t){super(u,"tableCellBorderWidth",t)}_getAttribute(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}const VALIGN_VALUES_REG_EXP=/^(top|middle|bottom)$/,ALIGN_VALUES_REG_EXP$1=/^(left|center|right|justify)$/;class TableCellPropertiesEditing extends Plugin{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing,TableCellWidthEditing]}init(){const u=this.editor,t=u.model.schema,N=u.conversion;u.config.define("table.tableCellProperties.defaultProperties",{});const me=getNormalizedDefaultCellProperties(u.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:u.locale.contentLanguageDirection==="rtl"});u.data.addStyleProcessorRules(addBorderRules),enableBorderProperties$1(t,N,{color:me.borderColor,style:me.borderStyle,width:me.borderWidth}),u.commands.add("tableCellBorderStyle",new TableCellBorderStyleCommand(u,me.borderStyle)),u.commands.add("tableCellBorderColor",new TableCellBorderColorCommand(u,me.borderColor)),u.commands.add("tableCellBorderWidth",new TableCellBorderWidthCommand(u,me.borderWidth)),enableProperty$1(t,N,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:me.height}),u.commands.add("tableCellHeight",new TableCellHeightCommand(u,me.height)),u.data.addStyleProcessorRules(addPaddingRules),enableProperty$1(t,N,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:me.padding}),u.commands.add("tableCellPadding",new TableCellPaddingCommand(u,me.padding)),u.data.addStyleProcessorRules(addBackgroundRules),enableProperty$1(t,N,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:me.backgroundColor}),u.commands.add("tableCellBackgroundColor",new TableCellBackgroundColorCommand(u,me.backgroundColor)),enableHorizontalAlignmentProperty(t,N,me.horizontalAlignment),u.commands.add("tableCellHorizontalAlignment",new TableCellHorizontalAlignmentCommand(u,me.horizontalAlignment)),enableVerticalAlignmentProperty(t,N,me.verticalAlignment),u.commands.add("tableCellVerticalAlignment",new TableCellVerticalAlignmentCommand(u,me.verticalAlignment))}}function enableBorderProperties$1(de,u,t){const N={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};de.extend("tableCell",{allowAttributes:Object.values(N)}),upcastBorderStyles(u,"td",N,t),upcastBorderStyles(u,"th",N,t),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:N.style,styleName:"border-style"}),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:N.color,styleName:"border-color"}),downcastAttributeToStyle(u,{modelElement:"tableCell",modelAttribute:N.width,styleName:"border-width"})}function enableHorizontalAlignmentProperty(de,u,t){de.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:N=>({key:"style",value:{"text-align":N}})}),u.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:N=>{const me=N.getStyle("text-align");return me===t?null:me}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:N=>{const me=N.getAttribute("align");return me===t?null:me}}})}function enableVerticalAlignmentProperty(de,u,t){de.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:N=>({key:"style",value:{"vertical-align":N}})}),u.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:N=>{const me=N.getStyle("vertical-align");return me===t?null:me}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:N=>{const me=N.getAttribute("valign");return me===t?null:me}}})}class TableCellProperties extends Plugin{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCellPropertiesEditing,TableCellPropertiesUI]}}class TablePropertyCommand extends Command{constructor(t,N,me){super(t);xt(this,"attributeName");xt(this,"_defaultValue");this.attributeName=N,this._defaultValue=me}refresh(){const N=this.editor.model.document.selection,me=getSelectionAffectedTable(N);this.isEnabled=!!me,this.value=this._getValue(me)}execute(t={}){const N=this.editor.model,me=N.document.selection,{value:pe,batch:Le}=t,Ye=getSelectionAffectedTable(me),nt=this._getValueToSet(pe);N.enqueueChange(Le,ot=>{nt?ot.setAttribute(this.attributeName,nt,Ye):ot.removeAttribute(this.attributeName,Ye)})}_getValue(t){if(!t)return;const N=t.getAttribute(this.attributeName);if(N!==this._defaultValue)return N}_getValueToSet(t){if(t!==this._defaultValue)return t}}class TableBackgroundColorCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBackgroundColor",t)}}class TableBorderColorCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderColor",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableBorderStyleCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderStyle",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class TableBorderWidthCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableBorderWidth",t)}_getValue(u){if(!u)return;const t=getSingleValue(u.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(u){const t=addDefaultUnitToNumericValue(u,"px");if(t!==this._defaultValue)return t}}class TableWidthCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableWidth",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableHeightCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableHeight",t)}_getValueToSet(u){if(u=addDefaultUnitToNumericValue(u,"px"),u!==this._defaultValue)return u}}class TableAlignmentCommand extends TablePropertyCommand{constructor(u,t){super(u,"tableAlignment",t)}}const ALIGN_VALUES_REG_EXP=/^(left|center|right)$/,FLOAT_VALUES_REG_EXP=/^(left|none|right)$/;class TablePropertiesEditing extends Plugin{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const u=this.editor,t=u.model.schema,N=u.conversion;u.config.define("table.tableProperties.defaultProperties",{});const me=getNormalizedDefaultTableProperties(u.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});u.data.addStyleProcessorRules(addBorderRules),enableBorderProperties(t,N,{color:me.borderColor,style:me.borderStyle,width:me.borderWidth}),u.commands.add("tableBorderColor",new TableBorderColorCommand(u,me.borderColor)),u.commands.add("tableBorderStyle",new TableBorderStyleCommand(u,me.borderStyle)),u.commands.add("tableBorderWidth",new TableBorderWidthCommand(u,me.borderWidth)),enableAlignmentProperty(t,N,me.alignment),u.commands.add("tableAlignment",new TableAlignmentCommand(u,me.alignment)),enableTableToFigureProperty(t,N,{modelAttribute:"tableWidth",styleName:"width",defaultValue:me.width}),u.commands.add("tableWidth",new TableWidthCommand(u,me.width)),enableTableToFigureProperty(t,N,{modelAttribute:"tableHeight",styleName:"height",defaultValue:me.height}),u.commands.add("tableHeight",new TableHeightCommand(u,me.height)),u.data.addStyleProcessorRules(addBackgroundRules),enableProperty(t,N,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:me.backgroundColor}),u.commands.add("tableBackgroundColor",new TableBackgroundColorCommand(u,me.backgroundColor))}}function enableBorderProperties(de,u,t){const N={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};de.extend("table",{allowAttributes:Object.values(N)}),upcastBorderStyles(u,"table",N,t),downcastTableAttribute(u,{modelAttribute:N.color,styleName:"border-color"}),downcastTableAttribute(u,{modelAttribute:N.style,styleName:"border-style"}),downcastTableAttribute(u,{modelAttribute:N.width,styleName:"border-width"})}function enableAlignmentProperty(de,u,t){de.extend("table",{allowAttributes:["tableAlignment"]}),u.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:N=>({key:"style",value:{float:N==="center"?"none":N}}),converterPriority:"high"}),u.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:FLOAT_VALUES_REG_EXP}},model:{key:"tableAlignment",value:N=>{let me=N.getStyle("float");return me==="none"&&(me="center"),me===t?null:me}}}).attributeToAttribute({view:{attributes:{align:ALIGN_VALUES_REG_EXP}},model:{name:"table",key:"tableAlignment",value:N=>{const me=N.getAttribute("align");return me===t?null:me}}})}function enableProperty(de,u,t){const{modelAttribute:N}=t;de.extend("table",{allowAttributes:[N]}),upcastStyleToAttribute(u,{viewElement:"table",...t}),downcastTableAttribute(u,t)}function enableTableToFigureProperty(de,u,t){const{modelAttribute:N}=t;de.extend("table",{allowAttributes:[N]}),upcastStyleToAttribute(u,{viewElement:/^(table|figure)$/,shouldUpcast:me=>!(me.name=="table"&&me.parent.name=="figure"),...t}),downcastAttributeToStyle(u,{modelElement:"table",...t})}class TablePropertiesView extends View{constructor(t,N){super(t);xt(this,"options");xt(this,"focusTracker");xt(this,"keystrokes");xt(this,"children");xt(this,"borderStyleDropdown");xt(this,"borderWidthInput");xt(this,"borderColorInput");xt(this,"backgroundInput");xt(this,"widthInput");xt(this,"heightInput");xt(this,"alignmentToolbar");xt(this,"saveButtonView");xt(this,"cancelButtonView");xt(this,"_focusables");xt(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=N;const{borderStyleDropdown:me,borderWidthInput:pe,borderColorInput:Le,borderRowLabel:Ye}=this._createBorderFields(),{backgroundRowLabel:nt,backgroundInput:ot}=this._createBackgroundFields(),{widthInput:ft,operatorLabel:mt,heightInput:bt,dimensionsLabel:yt}=this._createDimensionFields(),{alignmentToolbar:_t,alignmentLabel:Ct}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=me,this.borderWidthInput=pe,this.borderColorInput=Le,this.backgroundInput=ot,this.widthInput=ft,this.heightInput=bt,this.alignmentToolbar=_t;const{saveButtonView:Tt,cancelButtonView:At}=this._createActionButtons();this.saveButtonView=Tt,this.cancelButtonView=At,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(t,{label:this.t("Table properties")})),this.children.add(new FormRowView(t,{labelView:Ye,children:[Ye,me,Le,pe],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(t,{labelView:nt,children:[nt,ot],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(t,{children:[new FormRowView(t,{labelView:yt,children:[yt,ft,mt,bt],class:"ck-table-form__dimensions-row"}),new FormRowView(t,{labelView:Ct,children:[Ct,_t],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new FormRowView(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableProperties,N={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},me=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:N.color,colorPickerConfig:this.options.colorPickerConfig}),pe=this.locale,Le=this.t,Ye=Le("Style"),nt=new LabelView(pe);nt.text=Le("Border");const ot=getBorderStyleLabels(Le),ft=new LabeledFieldView(pe,createLabeledDropdown);ft.set({label:Ye,class:"ck-table-form__border-style"}),ft.fieldView.buttonView.set({ariaLabel:Ye,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:Ye}),ft.fieldView.buttonView.bind("label").to(this,"borderStyle",yt=>ot[yt||"none"]),ft.fieldView.on("execute",yt=>{this.borderStyle=yt.source._borderStyleValue}),ft.bind("isEmpty").to(this,"borderStyle",yt=>!yt),addListToDropdown(ft.fieldView,getBorderStyleDefinitions(this,N.style),{role:"menu",ariaLabel:Ye});const mt=new LabeledFieldView(pe,createLabeledInputText);mt.set({label:Le("Width"),class:"ck-table-form__border-width"}),mt.fieldView.bind("value").to(this,"borderWidth"),mt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),mt.fieldView.on("input",()=>{this.borderWidth=mt.fieldView.element.value});const bt=new LabeledFieldView(pe,me);return bt.set({label:Le("Color"),class:"ck-table-form__border-color"}),bt.fieldView.bind("value").to(this,"borderColor"),bt.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),bt.fieldView.on("input",()=>{this.borderColor=bt.fieldView.value}),this.on("change:borderStyle",(yt,_t,Ct,Tt)=>{isBorderStyleSet(Ct)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet(Tt)||(this.borderColor=N.color,this.borderWidth=N.width)}),{borderRowLabel:nt,borderStyleDropdown:ft,borderColorInput:bt,borderWidthInput:mt}}_createBackgroundFields(){const t=this.locale,N=this.t,me=new LabelView(t);me.text=N("Background");const pe=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),Le=new LabeledFieldView(t,pe);return Le.set({label:N("Color"),class:"ck-table-properties-form__background"}),Le.fieldView.bind("value").to(this,"backgroundColor"),Le.fieldView.on("input",()=>{this.backgroundColor=Le.fieldView.value}),{backgroundRowLabel:me,backgroundInput:Le}}_createDimensionFields(){const t=this.locale,N=this.t,me=new LabelView(t);me.text=N("Dimensions");const pe=new LabeledFieldView(t,createLabeledInputText);pe.set({label:N("Width"),class:"ck-table-form__dimensions-row__width"}),pe.fieldView.bind("value").to(this,"width"),pe.fieldView.on("input",()=>{this.width=pe.fieldView.element.value});const Le=new View(t);Le.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const Ye=new LabeledFieldView(t,createLabeledInputText);return Ye.set({label:N("Height"),class:"ck-table-form__dimensions-row__height"}),Ye.fieldView.bind("value").to(this,"height"),Ye.fieldView.on("input",()=>{this.height=Ye.fieldView.element.value}),{dimensionsLabel:me,widthInput:pe,operatorLabel:Le,heightInput:Ye}}_createAlignmentFields(){const t=this.locale,N=this.t,me=new LabelView(t);me.text=N("Alignment");const pe=new ToolbarView(t);return pe.set({role:"radiogroup",isCompact:!0,ariaLabel:N("Table alignment toolbar")}),fillToolbar({view:this,icons:{left:icons.objectLeft,center:icons.objectCenter,right:icons.objectRight},toolbar:pe,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:me,alignmentToolbar:pe}}_createActionButtons(){const t=this.locale,N=this.t,me=new ButtonView(t),pe=new ButtonView(t),Le=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return me.set({label:N("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),me.bind("isEnabled").toMany(Le,"errorText",(...Ye)=>Ye.every(nt=>!nt)),pe.set({label:N("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),pe.delegate("execute").to(this,"cancel"),{saveButtonView:me,cancelButtonView:pe}}get _alignmentLabels(){const t=this.locale,N=this.t,me=N("Align table to the left"),pe=N("Center table"),Le=N("Align table to the right");return t.uiLanguageDirection==="rtl"?{right:Le,center:pe,left:me}:{left:me,center:pe,right:Le}}}function isBorderStyleSet(de){return de!=="none"}var tableProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const ERROR_TEXT_TIMEOUT=500,propertyToCommandMap={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class TablePropertiesUI extends Plugin{constructor(t){super(t);xt(this,"_defaultTableProperties");xt(this,"_balloon");xt(this,"view",null);xt(this,"_undoStepBatch");xt(this,"_isReady");t.config.define("table.tableProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,N=t.t;this._defaultTableProperties=getNormalizedDefaultTableProperties(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=t.plugins.get(ContextualBalloon),t.ui.componentFactory.add("tableProperties",me=>{const pe=new ButtonView(me);pe.set({label:N("Table properties"),icon:tableProperties,tooltip:!0}),this.listenTo(pe,"execute",()=>this._showView());const Le=Object.values(propertyToCommandMap).map(Ye=>t.commands.get(Ye));return pe.bind("isEnabled").toMany(Le,"isEnabled",(...Ye)=>Ye.some(nt=>nt)),pe})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const t=this.editor,N=t.config.get("table.tableProperties"),me=normalizeColorOptions(N.borderColors),pe=getLocalizedColorOptions(t.locale,me),Le=normalizeColorOptions(N.backgroundColors),Ye=getLocalizedColorOptions(t.locale,Le),nt=N.colorPicker!==!1,ot=new TablePropertiesView(t.locale,{borderColors:pe,backgroundColors:Ye,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:nt?N.colorPicker||{}:!1}),ft=t.t;ot.render(),this.listenTo(ot,"submit",()=>{this._hideView()}),this.listenTo(ot,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),ot.keystrokes.set("Esc",(yt,_t)=>{this._hideView(),_t()}),clickOutsideHandler({emitter:ot,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const mt=getLocalizedColorErrorText(ft),bt=getLocalizedLengthErrorText(ft);return ot.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),ot.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ot.borderColorInput,commandName:"tableBorderColor",errorText:mt,validator:colorFieldValidator})),ot.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ot.borderWidthInput,commandName:"tableBorderWidth",errorText:bt,validator:lineWidthFieldValidator})),ot.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ot.backgroundInput,commandName:"tableBackgroundColor",errorText:mt,validator:colorFieldValidator})),ot.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ot.widthInput,commandName:"tableWidth",errorText:bt,validator:lengthFieldValidator})),ot.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ot.heightInput,commandName:"tableHeight",errorText:bt,validator:lengthFieldValidator})),ot.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),ot}_fillViewFormFromCommandValues(){const t=this.editor.commands,N=t.get("tableBorderStyle");Object.entries(propertyToCommandMap).map(([me,pe])=>{const Le=me,Ye=this._defaultTableProperties[Le]||"";return[Le,t.get(pe).value||Ye]}).forEach(([me,pe])=>{(me==="borderColor"||me==="borderWidth")&&N.value==="none"||this.view.set(me,pe)}),this._isReady=!0}_showView(){const t=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonTablePositionData(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,N=t.editing.view.document;getSelectionAffectedTableWidget(N.selection)?this._isViewVisible&&repositionContextualBalloon(t,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(N,me,pe)=>{this._isReady&&this.editor.execute(t,{value:pe,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:N,viewField:me,validator:pe,errorText:Le}=t,Ye=debounce(()=>{me.errorText=Le},ERROR_TEXT_TIMEOUT);return(nt,ot,ft)=>{Ye.cancel(),this._isReady&&(pe(ft)?(this.editor.execute(N,{value:ft,batch:this._undoStepBatch}),me.errorText=null):Ye())}}}class TableProperties extends Plugin{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TablePropertiesEditing,TablePropertiesUI]}}class TableWidthsCommand extends Command{refresh(){this.isEnabled=!0}execute(u={}){const{model:t,plugins:N}=this.editor;let{table:me=t.document.selection.getSelectedElement(),columnWidths:pe,tableWidth:Le}=u;pe&&(pe=Array.isArray(pe)?pe:pe.split(",")),t.change(Ye=>{Le?Ye.setAttribute("tableWidth",Le,me):Ye.removeAttribute("tableWidth",me);const nt=N.get("TableColumnResizeEditing").getColumnGroupElement(me);if(!pe&&!nt)return;if(!pe)return Ye.remove(nt);const ot=normalizeColumnWidths(pe);if(nt)Array.from(nt.getChildren()).forEach((ft,mt)=>Ye.setAttribute("columnWidth",ot[mt],ft));else{const ft=Ye.createElement("tableColumnGroup");ot.forEach(mt=>Ye.appendElement("tableColumn",{columnWidth:mt},ft)),Ye.append(ft,me)}})}}function upcastColgroupElement(de){return u=>u.on("element:colgroup",(t,N,me)=>{const pe=N.modelCursor.findAncestor("table"),Le=getColumnGroupElement(pe);if(!Le)return;const Ye=getTableColumnElements(Le),nt=de.getColumns(pe);let ot=translateColSpanAttribute(Le,me.writer);ot=Array.from({length:nt},(ft,mt)=>ot[mt]||"auto"),(ot.length!=Ye.length||ot.includes("auto"))&&updateColumnElements(Ye,Le,normalizeColumnWidths(ot),me.writer)},{priority:"low"})}function downcastTableResizedClass(){return de=>de.on("insert:table",(u,t,N)=>{const me=N.writer,pe=t.item,Le=N.mapper.toViewElement(pe),Ye=Le.is("element","table")?Le:Array.from(Le.getChildren()).find(ot=>ot.is("element","table"));getColumnGroupElement(pe)?me.addClass("ck-table-resized",Ye):me.removeClass("ck-table-resized",Ye)},{priority:"low"})}class TableColumnResizeEditing extends Plugin{constructor(t){super(t);xt(this,"_isResizingActive");xt(this,"_resizingData");xt(this,"_domEmitter");xt(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(DomEmitterMixin()),this._tableUtilsPlugin=t.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(N,me,pe)=>{const Le=pe?"removeClass":"addClass";t.editing.view.change(Ye=>{for(const nt of t.editing.view.document.roots)Ye[Le]("ck-column-resize_disabled",t.editing.view.document.getRoot(nt.rootName))})})}static get requires(){return[TableEditing,TableUtils]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const t=this.editor,N=t.plugins.get("TableColumnResize");t.plugins.get("TableEditing").registerAdditionalSlot({filter:Le=>Le.is("element","tableColumnGroup"),positionOffset:0});const pe=new TableWidthsCommand(t);t.commands.add("resizeTableWidth",pe),t.commands.add("resizeColumnWidths",pe),this.bind("_isResizingAllowed").to(t,"isReadOnly",N,"isEnabled",pe,"isEnabled",(Le,Ye,nt)=>!Le&&Ye&&nt)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(t){return getColumnGroupElement(t)}getTableColumnElements(t){return getTableColumnElements(t)}getTableColumnsWidths(t){return getTableColumnsWidths(t)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const N=this.editor.model;N.document.registerPostFixer(Le=>{let Ye=!1;for(const nt of getChangedResizedTables(N)){const ot=this.getColumnGroupElement(nt),ft=this.getTableColumnElements(ot),mt=this.getTableColumnsWidths(ot);let bt=normalizeColumnWidths(mt);bt=me(bt,nt,this),!isEqual(mt,bt)&&(updateColumnElements(ft,ot,bt,Le),Ye=!0)}return Ye});function me(Le,Ye,nt){const ot=nt._tableUtilsPlugin.getColumns(Ye);if(ot-Le.length===0)return Le;const mt=Le.map(yt=>Number(yt.replace("%",""))),bt=pe(nt.editor.model.document.differ,Ye);for(const yt of bt){const _t=ot-mt.length;if(_t===0)continue;const Ct=_t>0,Tt=nt._tableUtilsPlugin.getCellLocation(yt).column;if(Ct){const At=getColumnMinWidthAsPercentage(Ye,nt.editor),It=createFilledArray(_t,At);mt.splice(Tt,0,...It)}else{const At=mt.splice(Tt,Math.abs(_t));mt[Tt]+=sumArray(At)}}return mt.map(yt=>yt+"%")}function pe(Le,Ye){const nt=new Set;for(const ot of Le.getChanges())if(ot.type=="insert"&&ot.position.nodeAfter&&ot.position.nodeAfter.name=="tableCell"&&ot.position.nodeAfter.getAncestors().includes(Ye))nt.add(ot.position.nodeAfter);else if(ot.type=="remove"){const ft=ot.position.nodeBefore||ot.position.nodeAfter;ft.name=="tableCell"&&ft.getAncestors().includes(Ye)&&nt.add(ft)}return nt}}_registerConverters(){const N=this.editor.conversion;N.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:me=>me.getStyle("width")}}),N.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:me=>({name:"figure",key:"style",value:{width:me}})}),N.elementToElement({model:"tableColumnGroup",view:"colgroup"}),N.elementToElement({model:"tableColumn",view:"col"}),N.for("downcast").add(downcastTableResizedClass()),N.for("upcast").add(upcastColgroupElement(this._tableUtilsPlugin)),N.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:me=>{const pe=me.getStyle("width");return!pe||!pe.endsWith("%")&&!pe.endsWith("pt")?"auto":pe}}}),N.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),N.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:me=>({key:"style",value:{width:me}})})}_registerResizingListeners(){const t=this.editor.editing.view;t.addObserver(MouseEventsObserver),t.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(global$1.window.document,"mousemove",throttle(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(global$1.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(t,N){const me=N.target;if(!me.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const pe=this.editor,Le=pe.editing.mapper.toModelElement(me.findAncestor("figure"));if(!pe.model.canEditAt(Le))return;N.preventDefault(),t.stop();const Ye=ft(Le,this._tableUtilsPlugin,pe),nt=me.findAncestor("table"),ot=pe.editing.view;Array.from(nt.getChildren()).find(yt=>yt.is("element","colgroup"))||ot.change(yt=>{mt(yt,Ye,nt)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(N,Ye),ot.change(yt=>bt(yt,nt,this._resizingData));function ft(yt,_t,Ct){const Tt=Array(_t.getColumns(yt)),At=new TableWalker(yt);for(const It of At){const Pt=Ct.editing.mapper.toViewElement(It.cell),Bt=Ct.editing.view.domConverter.mapViewToDom(Pt),Ot=getDomCellOuterWidth(Bt);(!Tt[It.column]||Ot<Tt[It.column])&&(Tt[It.column]=toPrecision(Ot))}return Tt}function mt(yt,_t,Ct){const Tt=yt.createContainerElement("colgroup");for(let At=0;At<_t.length;At++){const It=yt.createEmptyElement("col"),Pt=`${toPrecision(_t[At]/sumArray(_t)*100)}%`;yt.setStyle("width",Pt,It),yt.insert(yt.createPositionAt(Tt,"end"),It)}yt.insert(yt.createPositionAt(Ct,0),Tt)}function bt(yt,_t,Ct){const Tt=Ct.widths.viewFigureWidth/Ct.widths.viewFigureParentWidth;yt.addClass("ck-table-resized",_t),yt.addClass("ck-table-column-resizer__active",Ct.elements.viewResizer),yt.setStyle("width",`${toPrecision(Tt*100)}%`,_t.findAncestor("figure"))}}_onMouseMoveHandler(t,N){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:me,flags:{isRightEdge:pe,isTableCentered:Le,isLtrContent:Ye},elements:{viewFigure:nt,viewLeftColumn:ot,viewRightColumn:ft},widths:{viewFigureParentWidth:mt,tableWidth:bt,leftColumnWidth:yt,rightColumnWidth:_t}}=this._resizingData,Ct=-yt+COLUMN_MIN_WIDTH_IN_PIXELS,Tt=pe?mt-bt:_t-COLUMN_MIN_WIDTH_IN_PIXELS,At=(Ye?1:-1)*(pe&&Le?2:1),It=clamp((N.clientX-me)*At,Math.min(Ct,0),Math.max(Tt,0));It!==0&&this.editor.editing.view.change(Pt=>{const Bt=toPrecision((yt+It)*100/bt);if(Pt.setStyle("width",`${Bt}%`,ot),pe){const Ot=toPrecision((bt+It)*100/mt);Pt.setStyle("width",`${Ot}%`,nt)}else{const Ot=toPrecision((_t-It)*100/bt);Pt.setStyle("width",`${Ot}%`,ft)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:t,modelTable:N,viewFigure:me,viewColgroup:pe}=this._resizingData.elements,Le=this.editor,Ye=Le.editing.view,nt=this.getColumnGroupElement(N),ot=Array.from(pe.getChildren()).filter(Tt=>Tt.is("view:element")),ft=nt?this.getTableColumnsWidths(nt):null,mt=ot.map(Tt=>Tt.getStyle("width")),bt=!isEqual(ft,mt),yt=N.getAttribute("tableWidth"),_t=me.getStyle("width"),Ct=yt!==_t;(bt||Ct)&&(this._isResizingAllowed?Le.execute("resizeTableWidth",{table:N,tableWidth:`${toPrecision(_t)}%`,columnWidths:mt}):Ye.change(Tt=>{if(ft)for(const At of ot)Tt.setStyle("width",ft.shift(),At);else Tt.remove(pe);Ct&&(yt?Tt.setStyle("width",yt,me):Tt.removeStyle("width",me)),!ft&&!yt&&Tt.removeClass("ck-table-resized",[...me.getChildren()].find(At=>At.name==="table"))})),Ye.change(Tt=>{Tt.removeClass("ck-table-column-resizer__active",t)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(t,N){const me=this.editor,pe=t.domEvent.clientX,Le=t.target,Ye=Le.findAncestor("td")||Le.findAncestor("th"),nt=me.editing.mapper.toModelElement(Ye),ot=nt.findAncestor("table"),ft=getColumnEdgesIndexes(nt,this._tableUtilsPlugin).rightEdge,mt=this._tableUtilsPlugin.getColumns(ot)-1,bt=ft===mt,yt=!ot.hasAttribute("tableAlignment"),_t=me.locale.contentLanguageDirection!=="rtl",Ct=Ye.findAncestor("table"),Tt=Ct.findAncestor("figure"),At=[...Ct.getChildren()].find(kt=>kt.is("element","colgroup")),It=At.getChild(ft),Pt=bt?void 0:At.getChild(ft+1),Bt=getElementWidthInPixels(me.editing.view.domConverter.mapViewToDom(Tt.parent)),Ot=getElementWidthInPixels(me.editing.view.domConverter.mapViewToDom(Tt)),Nt=getTableWidthInPixels(ot,me),Lt=N[ft],Et=bt?void 0:N[ft+1];return{columnPosition:pe,flags:{isRightEdge:bt,isTableCentered:yt,isLtrContent:_t},elements:{viewResizer:Le,modelTable:ot,viewFigure:Tt,viewColgroup:At,viewLeftColumn:It,viewRightColumn:Pt},widths:{viewFigureParentWidth:Bt,viewFigureWidth:Ot,tableWidth:Nt,leftColumnWidth:Lt,rightColumnWidth:Et}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(t=>{t.on("insert:tableCell",(N,me,pe)=>{const Le=me.item,Ye=pe.mapper.toViewElement(Le),nt=pe.writer;nt.insert(nt.createPositionAt(Ye,"end"),nt.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class TableColumnResize extends Plugin{static get requires(){return[TableColumnResizeEditing,TableCellWidthEditing]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelElementToPlainText(de){if(de.is("$text")||de.is("$textProxy"))return de.data;const u=de;let t="",N=null;for(const me of u.getChildren()){const pe=modelElementToPlainText(me);N&&N.is("element")&&(t+=`
`),t+=pe,N=me}return t}class WordCount extends Plugin{constructor(t){super(t);xt(this,"_config");xt(this,"_outputView");xt(this,"_wordsMatchRegExp");this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=t.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=env.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9-]+\S?)+/gu}static get pluginName(){return"WordCount"}static get isOfficialPlugin(){return!0}init(){this.editor.model.document.on("change:data",throttle(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(N,me)=>{this._config.onUpdate(me)}),isElement$2(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const t=this.editor,N=t.t,me=t.config.get("wordCount.displayWords"),pe=t.config.get("wordCount.displayCharacters"),Le=Template.bind(this,this),Ye=[];return this._outputView||(this._outputView=new View,(me||me===void 0)&&(this.bind("_wordsLabel").to(this,"words",nt=>N("Words: %0",nt)),Ye.push({tag:"div",children:[{text:[Le.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(pe||pe===void 0)&&(this.bind("_charactersLabel").to(this,"characters",nt=>N("Characters: %0",nt)),Ye.push({tag:"div",children:[{text:[Le.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:Ye}),this._outputView.render()),this._outputView.element}_getText(){let t="";for(const N of this.editor.model.document.getRoots())t!==""&&(t+=`
`),t+=modelElementToPlainText(N);return t}_getCharacters(t){return t.replace(/\n/g,"").length}_getWords(t){return(t.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const t=this._getText(),N=this.words=this._getWords(t),me=this.characters=this._getCharacters(t);this.fire("update",{words:N,characters:me})}}const a$3={paintRoller:`<svg viewBox="0 0 20 20" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V3Z"/><path d="M16 3.25a1.5 1.5 0 0 1 1.5 1.5v1.7a2.25 2.25 0 0 1-1.932 2.226l-4.424.632a.75.75 0 0 0-.644.743V11a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1v-.95a2.25 2.25 0 0 1 1.932-2.226l4.424-.632A.75.75 0 0 0 16 6.449V3.25Z"/></svg>
`};function d$1(de,u){const t=de.t;switch(u){case"Export to PDF":return t("Export to PDF");case"An error occurred while generating the PDF.":return t("An error occurred while generating the PDF.");case"PDF export started":return t("PDF export started");case"PDF export failed":return t("PDF export failed");case"PDF export successful":return t("PDF export successful");case"Exporting PDF document":return t("Exporting PDF document");default:return u}}let e$3=class extends Command{constructor(u){super(u),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(u={}){const t=this.editor,N=u.converterUrl||"https://pdf-converter.cke-cs.com/v1/convert/",me=u.dataCallback||(Ye=>Ye.data.get()),pe=t.plugins.get("ExportPdf"),Le=u.token||pe._token;return this.isBusy=!0,this.refresh(),collectStylesheets(u.stylesheets||["EDITOR_STYLES"]).then(async Ye=>{if(t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export started")),t.plugins.has("MergeFields")){u.converterOptions||(u.converterOptions={});const ft=t.plugins.get("MergeFieldsEditing"),mt=ft.previewMode,{prefix:bt,suffix:yt}=t.config.get("mergeFields"),_t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP88B8AAuUB8e2ujYwAAAAASUVORK5CYII=",Ct={prefix:bt,suffix:yt,data:{}};if(mt==="$labels")for(const Tt of ft.getMergeFieldsIds())ft.getMergeFieldType(Tt)==="image"?Ct.data[Tt]=_t:Ct.data[Tt]=ft.wrapInAffixes(ft.getLabel(Tt)||Tt);else{const Tt=mt==="$defaultValues"?ft.getDefaultValues():ft.getDataSetValues(mt,!0);for(const At of Object.entries(Tt)){const[It,Pt]=At;ft.getMergeFieldType(It)==="image"?Ct.data[It]=Pt!==null?Pt:_t:Ct.data[It]=Pt!==null?Pt:ft.getLabel(It)||It}}u.converterOptions.merge_fields=Ct}const nt={html:`<html>
						<head>
							<title>CKEditor 5 PDF document</title>
							<meta charset="utf-8">
						</head>
						<body>
							<div class="ck-content" dir="`+t.locale.contentLanguageDirection+`">
								`+await me(t)+`
							</div>
						</body>
					</html>`,css:Ye,options:u.converterOptions},ot={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/pdf",...Le?{Authorization:Le.value}:null,"x-cs-app-id":u.appID||"cke5"},body:JSON.stringify(nt)};return window.fetch(N,ot).then(ft=>{if(ft.status!==200)throw ft;return ft.blob()}).then(ft=>{t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export successful"));const mt=typeof u.fileName=="function"?u.fileName():u.fileName;this._downloadFile(ft,mt||"document.pdf")})}).catch(Ye=>{const nt=t.plugins.get("Notification");throw t.ui.ariaLiveAnnouncer.announce(d$1(t.locale,"PDF export failed"),{politeness:"assertive"}),nt.showWarning(d$1(t.locale,"An error occurred while generating the PDF.")),Ye}).finally(()=>{this.isBusy=!1,this.refresh()})}_downloadFile(u,t){const N=document.createElement("a");N.href=window.URL.createObjectURL(u),N.download=t,N.click(),N.remove()}},s$3=class extends Plugin{static get pluginName(){return"ExportPdfUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("exportPdf",()=>{const t=this._createButton(ButtonView),N=u.commands.get("exportPdf");return t.set({tooltip:!0}),t.bind("isOn").to(N,"isBusy"),t}),u.ui.componentFactory.add("menuBar:exportPdf",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,N=t.config.get("exportPdf")||{},me=t.commands.get("exportPdf"),pe=new u(t.locale),Le=new SpinnerView;return pe.children.add(Le),Le.bind("isVisible").to(me,"isBusy"),pe.iconView.bind("isVisible").to(me,"isBusy",Ye=>!Ye),pe.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v6.5h1.5v-5h8v5h5V11H19V4.5ZM14 2l3.3 3H14V2Z"/><path d="m12.452 18.5 1.25 1.5H3v-3h1.5v1.5h7.952Z"/><path d="M19.826 16.843a.75.75 0 1 0-1.152-.96L17.5 17.29V13H16v4.29l-1.174-1.408a.75.75 0 1 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path d="M1.63 14.24V12.3h.88c.66 0 1.14-.15 1.46-.45.32-.3.48-.71.48-1.24 0-.52-.15-.91-.44-1.2C3.7 9.15 3.28 9 2.69 9H0v5.24h1.63Zm.4-3h-.4v-1.17h.46c.3 0 .5.05.62.17.1.11.16.25.16.42 0 .16-.06.3-.19.41-.13.11-.34.16-.66.16l.01.01Zm5.7 3c.28 0 .6-.05.96-.14.26-.07.5-.21.73-.42.22-.2.4-.47.53-.77.12-.31.19-.75.19-1.3 0-.37-.04-.7-.13-1.02a2.3 2.3 0 0 0-.42-.84c-.19-.24-.43-.43-.72-.56C8.57 9.06 8.2 9 7.72 9h-2.4v5.24H7.73Zm-.4-1.19h-.4v-2.86h.4c.43 0 .73.1.91.3.18.2.27.59.27 1.14 0 .42-.04.73-.12.91a.76.76 0 0 1-.34.4c-.14.07-.38.11-.72.11Zm5.3 1.2V12.1h2.02v-1.06h-2.03v-.91H15V9h-4v5.24h1.62l.01.01Z"/></svg>
`}),pe.bind("isEnabled").to(me,"isEnabled"),pe.bind("label").to(me,"isBusy",Ye=>d$1(t.locale,Ye?"Exporting PDF document":"Export to PDF")),this.listenTo(pe,"execute",()=>{t.execute("exportPdf",N),t.editing.view.focus()}),pe}},o$3=class extends Plugin{constructor(){super(...arguments);xt(this,"_token")}static get pluginName(){return"ExportPdf"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["CloudServices",Notification,s$3]}init(){const t=this.editor,N=t.config.get("exportPdf")||{};t.commands.add("exportPdf",new e$3(t));const me=t.plugins.get("CloudServices");N.tokenUrl===!1?this._token=null:N.tokenUrl?me.registerTokenUrl(N.tokenUrl).then(pe=>{this._token=pe}):this._token=me.token}};function a$2(de,u={}){const t=de.plugins.has("Users"),N=de.plugins.has("CommentsRepository"),me=de.plugins.has("TrackChanges"),pe=u;if(t&&N){const Le=function(Ye){const nt={};if(!Ye.length)return nt;for(const ot of Ye)ot.comments.map(ft=>{nt[ot.id]===void 0&&(nt[ot.id]=[]),nt[ot.id].push({author:ft.author.name,content:ft.content,created:ft.createdAt,is_resolved:ot.isResolved})});return nt}(de.plugins.get("CommentsRepository").getCommentThreads({skipNotAttached:!0,skipEmpty:!0}));Object.keys(Le).length&&(pe.comments=Le)}if(t&&me){const Le=de.plugins.get("TrackChanges"),Ye=de.plugins.get("Users"),nt=function(ot,ft){const mt={};if(!ot.length||!ft.length)return mt;for(const{id:bt,createdAt:yt,authorId:_t,attributes:Ct}of ot){const Tt=Ct&&Ct["@external"],At=Tt?Tt.authorName:ft.get(_t).name;mt[bt]={author:At,created:yt}}return mt}(Le.getSuggestions({toJSON:!0}),Ye.users);Object.keys(nt).length&&(pe.suggestions=nt)}return(pe.suggestions||pe.comments)&&(pe.timezone=new Intl.DateTimeFormat().resolvedOptions().timeZone),pe}function m$3(de,u={}){const t=de.plugins.has("Users"),N=de.plugins.has("CommentsRepository"),me=de.plugins.has("TrackChanges"),pe=de.plugins.has("MergeFields"),Le=de.locale.contentLanguage,Ye=u,nt={};if(Ye.document=Ye.document||{},Ye.document.language=Ye.document.language||Le,t&&N){const ot=function(ft){const mt=[];if(!ft.length)return mt;for(const bt of ft){const yt=bt.comments.map(_t=>({author:_t.author.name,content:_t.content,created_at:_t.createdAt}));mt.push({thread_id:bt.id,is_resolved:bt.isResolved,comments:yt})}return mt}(de.plugins.get("CommentsRepository").getCommentThreads({skipNotAttached:!0,skipEmpty:!0}));ot.length&&(nt.comment_threads=ot)}if(t&&me){const ot=de.plugins.get("TrackChanges"),ft=de.plugins.get("Users"),mt=function(bt,yt){return!bt.length||!yt.length?[]:bt.map(({id:_t,createdAt:Ct,authorId:Tt,attributes:At})=>{const It=At&&At["@external"];return{id:_t,author:It?It.authorName:yt.get(Tt).name,created_at:Ct}})}(ot.getSuggestions({toJSON:!0}),ft.users);mt.length&&(nt.suggestions=mt)}if(pe){const ot=de.plugins.get("MergeFieldsEditing"),ft=ot.previewMode,{prefix:mt,suffix:bt}=de.config.get("mergeFields");if(Ye.merge_fields={prefix:mt,suffix:bt},ft!=="$labels"){Ye.merge_fields.data={};const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP88B8AAuUB8e2ujYwAAAAASUVORK5CYII=",_t=ft==="$defaultValues"?ot.getDefaultValues():ot.getDataSetValues(ft,!0);for(const Ct of Object.entries(_t)){const[Tt,At]=Ct;ot.getMergeFieldType(Tt)==="image"?Ye.merge_fields.data[Tt]=At!==null?At:yt:Ye.merge_fields.data[Tt]=At!==null?At:ot.getLabel(Tt)||Tt}}}return(nt.comment_threads||nt.suggestions)&&(Ye.timezone=new Intl.DateTimeFormat().resolvedOptions().timeZone,Ye.collaboration_features=nt),Ye}function p$1(de,u){const t=de.t;switch(u){case"Export to Word":return t("Export to Word");case"An error occurred while generating the Word file.":return t("An error occurred while generating the Word file.");case"Word document export started":return t("Word document export started");case"Word document export failed":return t("Word document export failed");case"Word document export successful":return t("Word document export successful");case"Exporting Word document":return t("Exporting Word document");default:return u}}const h$2=["orientation","margin_top","margin_right","margin_bottom","margin_left","format","header","footer","comments","suggestions"];let e$2=class extends Command{constructor(u){super(u),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(u={}){const t=this.editor,N=u.version||2,me=N===1,pe=u.converterUrl||(me?"https://docx-converter.cke-cs.com/v1/convert":"https://docx-converter.cke-cs.com/v2/convert/html-docx"),Le=u.converterOptions||{},Ye=t.plugins.get("ExportWord"),nt=u.token||Ye._token,ot=Le.auto_pagination===!0,ft=u.dataCallback||(mt=>mt.data.get({pagination:ot}));return N===2&&function(mt){for(const bt of h$2)if(mt[bt]!==void 0)return!0;return!1}(Le)&&logWarning("export-word-v1-api-is-deprecated"),this.isBusy=!0,this.refresh(),collectStylesheets(u.stylesheets||["EDITOR_STYLES"]).then(async mt=>{t.ui.ariaLiveAnnouncer.announce(p$1(t.locale,"Word document export started"));const bt=await ft(t),yt={html:'<div class="ck-content" dir="'+t.locale.contentLanguageDirection+'">'+bt+"</div>",css:mt,[me?"options":"config"]:{...Le,...me?a$2(t,Le):m$3(t,Le)}},_t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/docx",...nt?{Authorization:nt.value}:null},body:JSON.stringify(yt)};return window.fetch(pe,_t).then(Ct=>{if(Ct.status!==200)throw Ct;return Ct.blob()}).then(Ct=>{t.ui.ariaLiveAnnouncer.announce(p$1(t.locale,"Word document export successful"));const Tt=typeof u.fileName=="function"?u.fileName():u.fileName;this._downloadFile(Ct,Tt||"document.docx")})}).catch(mt=>{const bt=t.plugins.get("Notification");throw t.ui.ariaLiveAnnouncer.announce(p$1(t.locale,"Word document export failed"),{politeness:"assertive"}),bt.showWarning(p$1(t.locale,"An error occurred while generating the Word file.")),mt}).finally(()=>{this.isBusy=!1,this.refresh()})}_downloadFile(u,t){const N=document.createElement("a");N.href=window.URL.createObjectURL(u),N.download=t,N.click(),N.remove()}},o$2=class extends Plugin{static get pluginName(){return"ExportWordUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("exportWord",()=>{const t=u.commands.get("exportWord"),N=this._createButton(ButtonView);return N.set({tooltip:!0}),N.bind("isOn").to(t,"isBusy"),N}),u.ui.componentFactory.add("menuBar:exportWord",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(u){const t=this.editor,N=t.config.get("exportWord")||{},me=t.commands.get("exportWord"),pe=new u(t.locale),Le=new SpinnerView;return pe.children.add(Le),Le.bind("isVisible").to(me,"isBusy"),pe.iconView.bind("isVisible").to(me,"isBusy",Ye=>!Ye),pe.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.826 16.843a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path d="m14 0 5 4.5v9.741a2.737 2.737 0 0 0-1.5-.617V6.5h-5v-5h-8v3H3V0h11Zm0 2v3h3.3L14 2Z"/><path d="M3 17.5h6.746c.1.22.23.429.391.623l.731.877H3v-1.5Z"/><path d="M8.5 6a1.5 1.5 0 0 1 1.493 1.356L10 7.5v7a1.5 1.5 0 0 1-1.356 1.493L8.5 16h-7a1.5 1.5 0 0 1-1.493-1.356L0 14.5v-7a1.5 1.5 0 0 1 1.356-1.493L1.5 6h7ZM7.483 8.795l-.042.088-.986 2.534-.947-2.528-.043-.092a.601.601 0 0 0-1.042.008l-.042.093-.883 2.465-.937-2.475-.042-.089a.6.6 0 0 0-1.107.42l.027.093 1.514 4 .044.092a.6.6 0 0 0 1.041-.01l.041-.092.88-2.458.925 2.467.046.096a.6.6 0 0 0 1.032 0l.043-.09 1.554-4 .028-.093a.6.6 0 0 0-1.104-.43v.001Z"/></svg>
`}),pe.bind("isEnabled").to(me,"isEnabled"),pe.bind("label").to(me,"isBusy",Ye=>p$1(t.locale,Ye?"Exporting Word document":"Export to Word")),this.listenTo(pe,"execute",()=>{t.execute("exportWord",N),t.editing.view.focus()}),pe}},s$2=class extends Plugin{constructor(){super(...arguments);xt(this,"_token")}static get pluginName(){return"ExportWord"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["CloudServices",Notification,o$2]}init(){const t=this.editor,N=t.config.get("exportWord")||{};t.commands.add("exportWord",new e$2(t));const me=t.plugins.get("CloudServices");N.tokenUrl===!1?this._token=null:N.tokenUrl?me.registerTokenUrl(N.tokenUrl).then(pe=>{this._token=pe}):this._token=me.token}};const c$1="copyFormat",e$1="pasteFormat",b$1="ck-format-painter-active";class r extends Command{constructor(u){super(u),this.value=void 0,this.on("change:isEnabled",(t,N,me)=>{me||this.reset()}),this.on("change:value",()=>u.commands.get(e$1).refresh())}execute(){this.value=this._getFormattingAttributes()}reset(){this.value=void 0}_getFormattingAttributes(){const u=this.editor.model,t=u.document.selection;return Object.fromEntries(Array.from(t.getAttributes()).filter(([N])=>u.schema.getAttributeProperties(N).isFormatting))}}let o$1=class extends Command{constructor(u){super(u),this._removeFormatCommand=new _(u)}execute(u={}){const t=this.editor.model,N=t.document.selection,me=Array.from(N.getRanges()),pe=N.isCollapsed?[this._createRangeOnEntireWord(t,N)]:me;t.change(Le=>{Le.setSelection(pe),this._removeFormatCommand.execute();for(const Ye in u)for(const nt of t.schema.getValidRanges(pe,Ye))Le.setAttribute(Ye,u[Ye],nt);Le.setSelection(me)})}_createRangeOnEntireWord(u,t){const N=u.createSelection(t);u.modifySelection(N,{unit:"word",direction:"backward"});const me=N.getFirstPosition();u.modifySelection(N,{unit:"word",direction:"forward"});const pe=N.getLastPosition();return u.createRange(me,pe)}};class _ extends Command{execute(){const u=this.editor.model,t=u.schema;u.change(N=>{for(const me of this._getFormattingItems(u.document.selection,t))if(me.is("selection"))for(const pe of this._getFormattingAttributes(me,t))N.removeSelectionAttribute(pe);else{const pe=N.createRangeOn(me);for(const Le of this._getFormattingAttributes(me,t))N.removeAttribute(Le,pe)}})}*_getFormattingItems(u,t){const N=me=>!!first(this._getFormattingAttributes(me,t));for(const me of u.getRanges())for(const pe of me.getItems())!t.isBlock(pe)&&N(pe)&&(yield pe);for(const me of u.getSelectedBlocks())N(me)&&(yield me);N(u)&&(yield u)}*_getFormattingAttributes(u,t){for(const[N]of u.getAttributes()){const me=t.getAttributeProperties(N);me&&me.isFormatting&&(yield N)}}}let a$1=class extends Plugin{constructor(){super(...arguments);xt(this,"licenseKey");xt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"FormatPainterEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const t=this.editor;t.commands.add(c$1,new r(t)),t.commands.add(e$1,new o$1(t)),this.licenseKey=this.editor.config.get("licenseKey");const N=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let me;for(const pe in N){const Le=pe,Ye=N[Le];if(Ye=="formatPainterLicenseKeyValid"||Ye=="formatPainterLicenseKeyInvalid"||Ye=="formatPainterLicenseKeyExpired"||Ye=="formatPainterLicenseKeyDomainLimit"||Ye=="formatPainterLicenseKeyNotAllowed"||Ye=="formatPainterLicenseKeyEvaluationLimit"||Ye=="formatPainterLicenseKeyTrialLimit"||Ye=="formatPainterLicenseKeyUsageLimit"){delete N[Le],me=Ye,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}me=="formatPainterLicenseKeyInvalid"&&N._showLicenseError("invalid"),me=="formatPainterLicenseKeyExpired"&&N._showLicenseError("expired"),me=="formatPainterLicenseKeyDomainLimit"&&N._showLicenseError("domainLimit"),me=="formatPainterLicenseKeyNotAllowed"&&N._showLicenseError("featureNotAllowed","FormatPainter"),me=="formatPainterLicenseKeyEvaluationLimit"&&N._showLicenseError("evaluationLimit"),me=="formatPainterLicenseKeyTrialLimit"&&N._showLicenseError("trialLimit"),me=="formatPainterLicenseKeyUsageLimit"&&N._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}};function C$1(de,u){const t=de.t;switch(u){case"Paint formatting":return t("Paint formatting");case"Copy text formatting":return t("Copy text formatting");case"Paste text formatting":return t("Paste text formatting");case"Continuous painting":return t("Continuous painting");case"Keeps the painter on after setting the formatting.":return t("Keeps the painter on after setting the formatting.");case"Formatting copied.":return t("Formatting copied.");case"Pasted formatting.":return t("Pasted formatting.");default:return u}}let m$2=class extends DomEmitterMixin(Plugin){static get pluginName(){return"FormatPainterUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.editing.view.addObserver(ClickObserver),u.accessibility.addKeystrokeInfos({keystrokes:[{label:C$1(u.locale,"Copy text formatting"),keystroke:"Ctrl+Alt+C"},{label:C$1(u.locale,"Paste text formatting"),keystroke:"Ctrl+Alt+V"}]}),u.ui.componentFactory.add("formatPainter",t=>{const N=createDropdown(t,SplitButtonView),me=u.commands.get(c$1);N.buttonView.set({label:C$1(u.locale,"Paint formatting"),icon:a$3.paintRoller,keystroke:"Ctrl+Alt+C",tooltip:!0}),N.class="ck-format-painter-dropdown",me&&(N.bind("isEnabled").to(me,"isEnabled"),this.listenTo(me,"change:isEnabled",(Ye,nt,ot)=>{ot||this._finishPainting()}),N.buttonView.bind("isOn").to(me,"value",Ye=>!!Ye),this.listenTo(u,"destroy",()=>this._toggleSpecialCursor(!1)),this.listenTo(me,"change:value",(Ye,nt,ot)=>{this._toggleSpecialCursor(!!ot)}));const pe=new Model({withText:!0,label:C$1(u.locale,"Continuous painting"),tooltip:C$1(u.locale,"Keeps the painter on after setting the formatting."),isOn:!1,role:"menuitemcheckbox"});addListToDropdown(N,new Collection([{type:"switchbutton",model:pe}]),{role:"menu"});const Le=()=>{this._copyFormatting(),this.listenTo(global$1.window.document,"mouseup",()=>{this._pasteFormatting(),pe.isOn||this._finishPainting()})};return this.listenTo(N,"execute",()=>{pe.isOn=!pe.isOn}),this.listenTo(N.buttonView,"execute",()=>{u.editing.view.focus(),N.buttonView.isOn?this._finishPainting():Le()}),u.keystrokes.set("Ctrl+Alt+C",(Ye,nt)=>{Le(),pe.isOn=!0,nt()},{priority:"high"}),u.keystrokes.set("Ctrl+Alt+V",(Ye,nt)=>{N.buttonView.isOn&&(this._pasteFormatting(),pe.isOn||this._finishPainting(),nt())},{priority:"high"}),u.keystrokes.set("Esc",(Ye,nt)=>{N.buttonView.isOn&&(pe.isOn=!1,this._finishPainting(),nt())}),N})}afterInit(){(async function(u){const t=Et([117,70,89,106,54,97,108,51,109,78,66,112,110,83,67,104,105,98,80,103,100,85,48,86,68,90,115,107,76,114,53,72,88,73,79,118,81,116,121,113,77,57,120,65,52,111,87,84,122,101,69,56,55,82,74,75,71,102,49,119,99,50]),N=1808401739,me=1808622603^N,pe=window[Et([68,97,116,101])][Et([110,111,119])](),Le=u[Et([101,100,105,116,111,114])],Ye=new window[Et([80,114,111,109,105,115,101])](kt=>{Le[Et([111,110,99,101])](Et([114,101,97,100,121]),kt)}),nt={[Et([107,116,121])]:Et([69,67]),[Et([117,115,101])]:Et([115,105,103]),[Et([99,114,118])]:Et([80,45,50,53,54]),[Et([120])]:Et([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[Et([121])]:Et([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[Et([97,108,103])]:Et([69,83,50,53,54])},ot=Le[Et([99,111,110,102,105,103])][Et([103,101,116])](Et([108,105,99,101,110,115,101,75,101,121]));async function ft(){let kt,St=null,$t=null;try{return ot==Et([71,80,76])?Et([78,111,116,65,108,108,111,119,101,100]):(kt=Tt(),kt?(kt[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&($t=mt(kt[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])],kt[Et([106,116,105])])),await At()?Ut()?zt()?Et([69,120,112,105,114,101,100]):qt()?(kt[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([101,118,97,108,117,97,116,105,111,110])&&(St=bt(Et([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),kt[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([116,114,105,97,108])&&(St=bt(Et([84,114,105,97,108,76,105,109,105,116]))),await Zt()):Et([68,111,109,97,105,110,76,105,109,105,116]):Et([78,111,116,65,108,108,111,119,101,100]):Et([73,110,118,97,108,105,100])):Et([73,110,118,97,108,105,100]))}catch{return Et([73,110,118,97,108,105,100])}function zt(){const Dt=[Et([101,118,97,108,117,97,116,105,111,110]),Et([116,114,105,97,108])][Et([105,110,99,108,117,100,101,115])](kt[Et([108,105,99,101,110,115,101,84,121,112,101])])?pe/1e3:3600*me;return kt[Et([101,120,112])]<Dt}function Ut(){const Dt=kt[Et([102,101,97,116,117,114,101,115])];return!!Dt&&(!!Dt[Et([105,110,99,108,117,100,101,115])](Et([42]))||!!Dt[Et([105,110,99,108,117,100,101,115])](Et([70,80]))||!!Dt[Et([105,110,99,108,117,100,101,115])](Et([80,80])))}function qt(){const Dt=kt[Et([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!Dt||Dt[Et([108,101,110,103,116,104])]==0)return!0;const{hostname:jt}=new URL(window[Et([108,111,99,97,116,105,111,110])].href);if(Dt[Et([105,110,99,108,117,100,101,115])](jt))return!0;const en=jt[Et([115,112,108,105,116])](Et([46]));return Dt[Et([102,105,108,116,101,114])](Kt=>Kt[Et([105,110,99,108,117,100,101,115])](Et([42])))[Et([109,97,112])](Kt=>Kt[Et([115,112,108,105,116])](Et([46])))[Et([115,111,109,101])](Kt=>en[Et([101,118,101,114,121])]((Vt,Jt)=>Kt[Jt]===Vt||Kt[Jt]===Et([42])))}function Zt(){return St&&$t?new window[Et([80,114,111,109,105,115,101])]((Dt,jt)=>{St[Et([116,104,101,110])](Dt,jt),$t[Et([116,104,101,110])](en=>{en!=Et([86,97,108,105,100])&&Dt(en)},jt)}):St||$t||Et([86,97,108,105,100])}}function mt(kt,St){return new window[Et([80,114,111,109,105,115,101])](Ut=>{if($t())return Ut(Et([86,97,108,105,100]));zt(),Le[Et([100,101,99,111,114,97,116,101])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let qt=!1;const Zt=uid();function Dt(en){return!!en&&(typeof en===Et([111,98,106,101,99,116])||typeof en===Et([102,117,110,99,116,105,111,110]))&&typeof en[Et([116,104,101,110])]===Et([102,117,110,99,116,105,111,110])&&typeof en[Et([99,97,116,99,104])]===Et([102,117,110,99,116,105,111,110])}function jt(en){ln(en)[Et([116,104,101,110])](tn=>!tn||tn[Et([115,116,97,116,117,115])]!=Et([111,107])?Et([85,115,97,103,101,76,105,109,105,116]):Ot(Bt(Zt+St))!=tn[Et([118,101,114,105,102,105,99,97,116,105,111,110])]?Et([85,115,97,103,101,76,105,109,105,116]):Et([86,97,108,105,100]))[Et([116,104,101,110])](tn=>(Vt(),tn),()=>{const tn=Jt();return tn==null?(Vt(),Et([86,97,108,105,100])):Et(pe-tn>(1338409291^N)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[Et([116,104,101,110])](Ut)[Et([99,97,116,99,104])](()=>{Ut(Et([85,115,97,103,101,76,105,109,105,116]))});const Kt=1811737547^N;function Vt(){const tn=Et([108,108,99,116,45])+Ot(Bt(kt)),an=Nt(Ot(window[Et([77,97,116,104])][Et([99,101,105,108])](pe/Kt)));window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([115,101,116,73,116,101,109])](tn,an)}function Jt(){const tn=Et([108,108,99,116,45])+Ot(Bt(kt)),an=window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([103,101,116,73,116,101,109])](tn);return an?window[Et([112,97,114,115,101,73,110,116])](Nt(an),16)*Kt:null}function ln(tn){return new window[Et([80,114,111,109,105,115,101])]((an,cn)=>{tn[Et([116,104,101,110])](an,cn),window[Et([115,101,116,84,105,109,101,111,117,116])](cn,1808519563^N)})}}Le[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(en,Kt)=>{if(Kt[0]!=kt)return Ut(Et([85,115,97,103,101,76,105,109,105,116]));Kt[1]={...Kt[1],[Et([114,101,113,117,101,115,116,73,100])]:Zt}},{[Et([112,114,105,111,114,105,116,121])]:Et([104,105,103,104])}),Le[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),en=>{Dt(en[Et([114,101,116,117,114,110])])&&(qt=!0,jt(en[Et([114,101,116,117,114,110])]))},{[Et([112,114,105,111,114,105,116,121])]:Et([108,111,119])}),Ye[Et([116,104,101,110])](()=>{qt||Ut(Et([85,115,97,103,101,76,105,109,105,116]))})});function $t(){return Le[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==Et([97,117,116,111])}function zt(){Le[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=Et([97,117,116,111])}}function bt(kt){const St=[new window[Et([80,114,111,109,105,115,101])]($t=>setTimeout($t,1807956871^N)),Ye[Et([116,104,101,110])](()=>new window[Et([80,114,111,109,105,115,101])]($t=>{let zt=0;Le[Et([109,111,100,101,108])][Et([111,110])](Et([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(Ut,qt)=>{qt[0][Et([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&zt++,zt==(1808401587^N)&&($t(),Ut[Et([111,102,102])]())})}))];return window[Et([80,114,111,109,105,115,101])][Et([114,97,99,101])](St)[Et([116,104,101,110])](()=>kt)}async function yt(){await Ye,Le[Et([109,111,100,101,108])][Et([99,104,97,110,103,101])]=Lt,Le[Et([109,111,100,101,108])][Et([101,110,113,117,101,117,101,67,104,97,110,103,101])]=Lt,Le[Et([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](Et([109,111,100,101,108]))}function _t(kt){const St=Ct();Le[St]=Et([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121])+kt,kt!=Et([86,97,108,105,100])&&yt()}function Ct(){const kt=window[Et([83,116,114,105,110,103])](window[Et([112,101,114,102,111,114,109,97,110,99,101])][Et([110,111,119])]())[Et([114,101,112,108,97,99,101])](Et([46]),"");let St=Et([117]);for(let $t=0;$t<kt[Et([108,101,110,103,116,104])];$t+=2){let zt=window[Et([112,97,114,115,101,73,110,116])](kt[Et([115,117,98,115,116,114,105,110,103])]($t,$t+2));zt>=t[Et([108,101,110,103,116,104])]&&(zt-=t[Et([108,101,110,103,116,104])]),St+=t[zt]}return St}function Tt(){const kt=ot[Et([115,112,108,105,116])](Et([46]));if(kt[Et([108,101,110,103,116,104])]!=3)return null;return St(kt[1]);function St($t){const zt=It($t);return zt&&Ut()?zt:null;function Ut(){const qt=zt[Et([106,116,105])],Zt=window[Et([112,97,114,115,101,73,110,116])](qt[Et([115,117,98,115,116,114,105,110,103])](qt[Et([108,101,110,103,116,104])]-8),16),Dt={...zt,[Et([106,116,105])]:qt[Et([115,117,98,115,116,114,105,110,103])](0,qt[Et([108,101,110,103,116,104])]-8)};return delete Dt[Et([118,99])],Bt(Dt)==Zt}}}async function At(){let kt=!0;try{const zt=ot[Et([115,112,108,105,116])](Et([46])),[Ut,qt,Zt]=zt;return St(Ut),await $t(Ut,qt,Zt),kt}catch{return!1}function St(zt){const Ut=It(zt);Ut&&Ut[Et([97,108,103])]==Et([69,83,50,53,54])||(kt=!1)}async function $t(zt,Ut,qt){const Zt=window[Et([85,105,110,116,56,65,114,114,97,121])][Et([102,114,111,109])](Pt(qt),Kt=>Kt[Et([99,104,97,114,67,111,100,101,65,116])](0)),Dt=new window[Et([84,101,120,116,69,110,99,111,100,101,114])]()[Et([101,110,99,111,100,101])](zt+Et([46])+Ut),jt=window[Et([99,114,121,112,116,111])][Et([115,117,98,116,108,101])];if(!jt)return;const en=await jt[Et([105,109,112,111,114,116,75,101,121])](Et([106,119,107]),nt,{[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([110,97,109,101,100,67,117,114,118,101])]:Et([80,45,50,53,54])},!1,[Et([118,101,114,105,102,121])]);await jt[Et([118,101,114,105,102,121])]({[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([104,97,115,104])]:{[Et([110,97,109,101])]:Et([83,72,65,45,50,53,54])}},en,Zt,Dt)||(kt=!1)}}function It(kt){return kt[Et([115,116,97,114,116,115,87,105,116,104])](Et([101,121]))?JSON[Et([112,97,114,115,101])](Pt(kt)):null}function Pt(kt){return window[Et([97,116,111,98])](kt[Et([114,101,112,108,97,99,101])](/-/g,Et([43]))[Et([114,101,112,108,97,99,101])](/_/g,Et([47])))}function Bt(kt){let St=5381;function $t(Ut){for(let qt=0;qt<Ut[Et([108,101,110,103,116,104])];qt++){const Zt=Ut[Et([99,104,97,114,67,111,100,101,65,116])](qt);St=(St<<5)+St+Zt,St&=St}}function zt(Ut){Array[Et([105,115,65,114,114,97,121])](Ut)?Ut[Et([102,111,114,69,97,99,104])](zt):Ut&&typeof Ut==Et([111,98,106,101,99,116])?Object[Et([101,110,116,114,105,101,115])](Ut)[Et([115,111,114,116])]()[Et([102,111,114,69,97,99,104])](([qt,Zt])=>{$t(qt),zt(Zt)}):$t(window[Et([83,116,114,105,110,103])](Ut))}return zt(kt),St>>>0}function Ot(kt){return kt[Et([116,111,83,116,114,105,110,103])](16)[Et([112,97,100,83,116,97,114,116])](8,Et([48]))}function Nt(kt){return kt[Et([115,112,108,105,116])]("")[Et([114,101,118,101,114,115,101])]()[Et([106,111,105,110])]("")}function Lt(){}function Et(kt){return kt.map(St=>String.fromCharCode(St)).join("")}_t(await ft())})(this)}_toggleSpecialCursor(u){this.editor.editing.view.change(t=>{for(const N of this.editor.editing.view.document.roots)u?t.addClass(b$1,N):t.removeClass(b$1,N)})}_copyFormatting(){const{editor:u}=this;u.execute(c$1),u.ui.ariaLiveAnnouncer.announce(C$1(u.locale,"Formatting copied."))}_pasteFormatting(){const{editor:u}=this,t=u.commands.get(c$1).value;u.execute(e$1,t),u.ui.ariaLiveAnnouncer.announce(C$1(u.locale,"Pasted formatting."))}_finishPainting(){this.editor.commands.get(c$1).reset(),this.stopListening(global$1.window.document,"mouseup")}};class n extends Plugin{static get requires(){return[a$1,m$2]}static get pluginName(){return"FormatPainter"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}}function p(de,u){const t=de.t;switch(u){case"Import from Word":return t("Import from Word");case"An error occurred while importing the Word file.":return t("An error occurred while importing the Word file.");case"Importing Word document":return t("Importing Word document");default:return u}}let i$3=class extends Plugin{static get pluginName(){return"ImportWordUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const u=this.editor;u.ui.componentFactory.add("importWord",()=>{const t=this._createButton(FileDialogButtonView),N=u.commands.get("importWord");return t.bind("isOn").to(N,"isBusy"),t.tooltip=!0,t}),u.ui.componentFactory.add("menuBar:importWord",()=>this._createButton(MenuBarMenuListItemFileDialogButtonView))}_createButton(u){const t=this.editor,N=t.commands.get("importWord"),me=new u(t.locale),pe=new SpinnerView;return me.set({acceptedType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.wordprocessingml.template"}),me.set({icon:`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14 0 5 4.5v8.892l-1.5-1.8V6.5h-5v-5h-8v3H3V0h11Zm0 2v3h3.3L14 2Z"/><path d="M10.74 18a2.76 2.76 0 0 1-.469-.5H3V19h9.25v-.374A2.737 2.737 0 0 1 10.74 18Z"/><path d="M8.5 6a1.5 1.5 0 0 1 1.493 1.356L10 7.5v7a1.5 1.5 0 0 1-1.356 1.493L8.5 16h-7a1.5 1.5 0 0 1-1.493-1.356L0 14.5v-7a1.5 1.5 0 0 1 1.356-1.493L1.5 6h7ZM7.483 8.795l-.042.088-.986 2.534-.947-2.528-.043-.092a.601.601 0 0 0-1.042.008l-.042.093-.883 2.465-.937-2.475-.042-.089a.6.6 0 0 0-1.107.42l.027.093 1.514 4 .044.092a.6.6 0 0 0 1.041-.01l.041-.092.88-2.458.925 2.467.046.096a.602.602 0 0 0 1.032 0l.043-.09 1.554-4 .028-.093a.6.6 0 0 0-1.104-.43v.001ZM11.674 15.407a.75.75 0 1 0 1.152.96L14 14.96V20h1.5v-5.04l1.174 1.408a.75.75 0 1 0 1.152-.96l-2.346-2.816a.95.95 0 0 0-1.46 0l-2.346 2.815Z"/></svg>
`}),me.bind("isEnabled").to(N),me.bind("label").to(N,"isBusy",Le=>p(t.locale,Le?"Importing Word document":"Import from Word")),pe.bind("isVisible").to(N,"isBusy"),me.iconView.bind("isVisible").to(N,"isBusy",Le=>!Le),me.children.add(pe),me.on("done",(Le,Ye)=>{t.execute("importWord",Ye[0],{}),t.editing.view.focus()}),me}};class d extends Command{constructor(t){super(t);xt(this,"_importMarker");xt(this,"_undoStepBatch");xt(this,"_abortController");this.set("isBusy",!1),this._importMarker=null,this._undoStepBatch=null,this._abortController=null,this.on("dataInsert",(N,me)=>{const pe=new DataTransfer;pe.setData("text/html",me.html);const Le=this._importMarker.getRange();this.editor.model.enqueueChange(this._undoStepBatch,Ye=>{this._importMarker.stopListening(),Ye.setSelection(Le),t.editing.view.document.fire("clipboardInput",{dataTransfer:pe})})},{priority:"low"})}refresh(){this.isEnabled=this._checkEnabled()}execute(t,N={}){if(this.isBusy)return Promise.resolve();const me=this.editor.config.get("importWord");if(this.editor.plugins.has("MergeFields")){const{prefix:Le,suffix:Ye}=this.editor.config.get("mergeFields");N.merge_fields={prefix:Le,suffix:Ye}}const pe={url:me.converterUrl,file:t,serviceConfig:{...N,formatting:me.formatting,timezone:new Intl.DateTimeFormat().resolvedOptions().timeZone}};return this._prepareForImport(),this._sendImportRequest(pe).then(this._handleImportResponse.bind(this)).catch(this._handleImportFailure.bind(this)).finally(this._cleanUpAfterImport.bind(this))}_checkEnabled(){if(this.isBusy)return!1;const t=this.editor.model,N=t.schema,me=t.document.selection,pe=first(me.getSelectedBlocks());return!!pe&&N.checkChild(pe.parent,"paragraph")}_prepareForImport(){const t=this.editor,N=t.model,me=N.document.selection;this._abortController=new AbortController,this._undoStepBatch=t.model.createBatch({isUndoable:!0}),N.enqueueChange(this._undoStepBatch,pe=>{me.isCollapsed||N.deleteContent(me,{leaveUnmerged:!0});const Le=me.getFirstPosition(),Ye=first(me.getSelectedBlocks());let nt;nt=Ye.is("element","paragraph")&&Ye.isEmpty?Le:Le.isAtStart?N.createPositionBefore(Ye):Le.isAtEnd?N.createPositionAfter(Ye):pe.split(Le).position,this._importMarker=pe.addMarker("importWord:"+uid(),{usingOperation:!1,affectsData:!1,range:new Range(nt)}),this._importMarker.on("change:range",()=>{this._importMarker.getRange().root.rootName==="$graveyard"&&this._abortController.abort()})}),this.isBusy=!0,this.refresh()}_cleanUpAfterImport(){const t=this.editor.model;t.markers.has(this._importMarker)&&t.enqueueChange(this._undoStepBatch,N=>{N.removeMarker(this._importMarker)}),this._importMarker=null,this._undoStepBatch=null,this._abortController=null,this.isBusy=!1,this.refresh()}_sendImportRequest({url:t,file:N,serviceConfig:me}){const pe=this.editor.plugins.get("ImportWordEditing").getToken(),Le=new FormData;Le.set("config",JSON.stringify(me)),Le.set("file",N);const Ye={method:"POST",headers:{},body:Le,signal:this._abortController.signal};return pe&&(Ye.headers.Authorization=pe.value),fetch(t,Ye)}_handleImportResponse(t){return t.ok?t.json().then(N=>{this.editor.model.markers.has(this._importMarker)&&this._importMarker.getRange().root.rootName!=="$graveyard"&&this.fire("dataInsert",N)}):Promise.reject()}_handleImportFailure(){if(this._abortController.signal.aborted)return void logWarning("import-word-plugin-import-cancelled");const t=this.editor,N=p(t.locale,"An error occurred while importing the Word file.");t.plugins.get("Notification").showWarning(N),logError("import-word-plugin-conversion-failed")}}class e extends Plugin{constructor(t){super(t);xt(this,"_token");this._token=null}static get pluginName(){return"ImportWordEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[Notification,ClipboardPipeline,"CloudServices"]}async init(){const t=this.editor;t.config.define("importWord",{converterUrl:"https://docx-converter.cke-cs.com/v2/convert/docx-html",tokenUrl:(t.config.get("cloudServices")||{}).tokenUrl,formatting:{resets:"none",defaults:"none",styles:"inline"}}),t.commands.add("importWord",new d(t));const{tokenUrl:N}=t.config.get("importWord");if(N){const{tokenUrl:me}=t.config.get("cloudServices")||{};this._token=N===me?t.plugins.get("CloudServices").token:await t.plugins.get("CloudServices").registerTokenUrl(N)}}getToken(){return this._token}}class o extends Plugin{static get pluginName(){return"ImportWord"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[e,i$3]}}let h$1=class extends Command{constructor(t,N,me){super(t);xt(this,"defaultListMarkerStyle");xt(this,"_listDefinitions");xt(this,"_listUtils");this.defaultListMarkerStyle=N,this._listDefinitions=me,this._listUtils=this.editor.plugins.get("ListUtils")}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const N=this.editor.model,me=t.listMarkerStyle||this.defaultListMarkerStyle;N.change(()=>{const pe=this._getListTypeFromListMarkerStyle(me);if(!pe)return;const Le=pe+"List";this.editor.execute(Le,{additionalAttributes:{listMarkerStyle:me}})})}_getValue(){const t=first(this.editor.model.document.selection.getSelectedBlocks());return this._listUtils.isListItemBlock(t)?t.getAttribute("listMarkerStyle"):null}_checkEnabled(){const t=this.editor,N=t.commands.get("customNumberedList"),me=t.commands.get("customBulletedList");return N.isEnabled||me.isEnabled}_getListTypeFromListMarkerStyle(t){const N=this._listDefinitions.find(me=>me.listMarkerStyle==t);return N?N.listType:null}},i$2=class extends Plugin{constructor(t){super(t);xt(this,"_listDefinitions");const N=this.editor.config.get("listMultiLevel.listDefinitions")||[];this._listDefinitions=[{listType:"customNumbered",listMarkerStyle:"legal",className:"legal-list",listMarkers:[{marker:me=>me+"."}]},...N]}static get pluginName(){return"MultiLevelListEditing"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["ListEditing"]}init(){const t=this.editor,N=t.model,me=t.editing.view,pe=t.plugins.get("ListEditing");t.commands.add("multiLevelList",new h$1(t,"legal",this._listDefinitions)),N.schema.extend("$listItem",{allowAttributes:["listMarkerStyle","listMarker"]}),N.schema.addAttributeCheck((Ye,nt)=>{const ot=Ye.last;if(nt=="listMarker"||nt=="listMarkerStyle")return!(!ot.getAttribute("listItemId")||!this._listDefinitions.find(ft=>ft.listType==ot.getAttribute("listType")))&&void 0});for(const Ye of this._listDefinitions)t.conversion.for("upcast").add(nt=>{nt.on("element:"+(Ye.listType=="customNumbered"?"ol":"ul"),m$1(Ye,N.schema),{priority:"low"})}),pe.registerDowncastStrategy({scope:"list",attributeName:"listMarkerStyle",setAttributeOnDowncast(nt,ot,ft){ot==Ye.listMarkerStyle?(nt.addClass(["multi-level-list",Ye.className],ft),nt.setStyle("list-style-type","none",ft)):(nt.removeClass(["multi-level-list",Ye.className],ft),nt.removeStyle("list-style-type",ft))}}),pe.registerDowncastStrategy({scope:"itemMarker",attributeName:"listMarker",createElement(nt,ot,{dataPipeline:ft}){if(!ot.hasAttribute("listMarker")||ot.getAttribute("listType")!=Ye.listType||ot.getAttribute("listMarkerStyle")!=Ye.listMarkerStyle)return null;const mt=ot.getAttribute("listMarker")+" ";return nt.createUIElement("span",{class:"multi-level-list__marker",...!ft&&{contenteditable:"false","data-multi-level-list-marker":mt}},function(bt){const yt=this.toDomElement(bt);return ft&&yt.appendChild(bt.createTextNode(mt)),yt})},canInjectMarkerIntoElement:nt=>N.schema.checkChild(nt,"$text")&&N.schema.checkChild(nt,"$inlineObject")&&!N.schema.isLimit(nt)&&nt.getAttribute("listType")==Ye.listType&&nt.getAttribute("listMarkerStyle")==Ye.listMarkerStyle});t.conversion.for("upcast").add(Ye=>{Ye.on("element:span",function(nt){return(ot,ft,{writer:mt,consumable:bt})=>{const yt=ft.modelCursor,_t=yt.parent,Ct=ft.viewItem;if(bt.consume(Ct,{name:!0,classes:"multi-level-list__marker"})&&yt.isAtStart&&_t.hasAttribute("listType")&&Ct.childCount>0){const Tt=nt.createRangeIn(Ct);let At="";for(const It of Tt.getItems())It.is("$textProxy")&&(At+=It.data.trim(),bt.consume(It.textNode));mt.setAttribute("listMarker",At.trim(),_t)}}}(me))}),pe.on("postFixer",(Ye,{listNodes:nt,writer:ot})=>{const ft=[];for(const{node:mt,previousNodeInList:bt}of nt){const yt=mt.getAttribute("listType"),_t=mt.getAttribute("listMarkerStyle")||(yt=="customNumbered"?"legal":void 0),Ct=this._listDefinitions.find(It=>It.listType==yt&&It.listMarkerStyle==_t);if(yt!="customNumbered"&&yt!="customBulleted"&&(mt.hasAttribute("listMarker")&&(ot.removeAttribute("listMarker",mt),Ye.return=!0),mt.hasAttribute("listMarkerStyle")&&(ot.removeAttribute("listMarkerStyle",mt),Ye.return=!0)),!Ct){yt!="customBulleted"||_t||(ot.setAttribute("listType","bulleted",mt),Ye.return=!0);continue}mt.hasAttribute("listMarkerStyle")||(ot.setAttribute("listMarkerStyle",_t,mt),Ye.return=!0);const Tt=mt.getAttribute("listIndent");if(bt&&bt.getAttribute("listItemId")==mt.getAttribute("listItemId"))continue;ft.length=Tt+1,bt||ft[Tt]?bt&&bt.getAttribute("listType")!=Ct.listType?ft[Tt]=1:ft[Tt]++:ft[Tt]=mt.getAttribute("listStart")||1;const At=f$1(Tt,Ct,ft);mt.getAttribute("listMarker")!=At&&(ot.setAttribute("listMarker",At,mt),Ye.return=!0)}});const Le=t.editing.view.document;this.listenTo(Le,"clipboardOutput",(Ye,nt)=>{const ot=new Matcher({name:"span",classes:"multi-level-list__marker"}),ft=new Matcher({name:"ol",classes:"multi-level-list",styles:{"list-style-type":"none"}}),mt=new UpcastWriter(nt.content.document),bt=[];for(const yt of mt.createRangeIn(nt.content).getItems())yt.is("element")&&ot.match(yt)&&bt.push(yt),yt.is("element")&&ft.match(yt)&&mt.removeStyle("list-style-type",yt);for(const yt of bt)mt.remove(yt)})}afterInit(){(async function(t){const N=kt([82,55,77,70,68,115,80,105,69,50,122,109,65,99,88,67,73,54,110,52,72,107,90,49,103,84,119,85,104,117,56,53,111,116,81,98,121,66,57,78,83,108,89,97,114,86,102,79,51,71,75,120,74,101,112,48,76,106,100,87,113,118]),me=383068201,pe=382880105^me,Le=window[kt([68,97,116,101])][kt([110,111,119])](),Ye=t[kt([101,100,105,116,111,114])],nt=new window[kt([80,114,111,109,105,115,101])](St=>{Ye[kt([111,110,99,101])](kt([114,101,97,100,121]),St)}),ot={[kt([107,116,121])]:kt([69,67]),[kt([117,115,101])]:kt([115,105,103]),[kt([99,114,118])]:kt([80,45,50,53,54]),[kt([120])]:kt([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[kt([121])]:kt([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[kt([97,108,103])]:kt([69,83,50,53,54])},ft=Ye[kt([99,111,110,102,105,103])][kt([103,101,116])](kt([108,105,99,101,110,115,101,75,101,121]));async function mt(){let St,$t=null,zt=null;try{return ft==kt([71,80,76])?kt([78,111,116,65,108,108,111,119,101,100]):(St=At(),St?(St[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(zt=bt(St[kt([117,115,97,103,101,69,110,100,112,111,105,110,116])],St[kt([106,116,105])])),await It()?qt()?Ut()?kt([69,120,112,105,114,101,100]):Zt()?(St[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([101,118,97,108,117,97,116,105,111,110])&&($t=yt(kt([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),St[kt([108,105,99,101,110,115,101,84,121,112,101])]==kt([116,114,105,97,108])&&($t=yt(kt([84,114,105,97,108,76,105,109,105,116]))),await Dt()):kt([68,111,109,97,105,110,76,105,109,105,116]):kt([78,111,116,65,108,108,111,119,101,100]):kt([73,110,118,97,108,105,100])):kt([73,110,118,97,108,105,100]))}catch{return kt([73,110,118,97,108,105,100])}function Ut(){const jt=[kt([101,118,97,108,117,97,116,105,111,110]),kt([116,114,105,97,108])][kt([105,110,99,108,117,100,101,115])](St[kt([108,105,99,101,110,115,101,84,121,112,101])])?Le/1e3:3600*pe;return St[kt([101,120,112])]<jt}function qt(){const jt=St[kt([102,101,97,116,117,114,101,115])];return!!jt&&(!!jt[kt([105,110,99,108,117,100,101,115])](kt([42]))||!!jt[kt([105,110,99,108,117,100,101,115])](kt([77,76,76])))}function Zt(){const jt=St[kt([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!jt||jt[kt([108,101,110,103,116,104])]==0)return!0;const{hostname:en}=new URL(window[kt([108,111,99,97,116,105,111,110])].href);if(jt[kt([105,110,99,108,117,100,101,115])](en))return!0;const Kt=en[kt([115,112,108,105,116])](kt([46]));return jt[kt([102,105,108,116,101,114])](Vt=>Vt[kt([105,110,99,108,117,100,101,115])](kt([42])))[kt([109,97,112])](Vt=>Vt[kt([115,112,108,105,116])](kt([46])))[kt([115,111,109,101])](Vt=>Kt[kt([101,118,101,114,121])]((Jt,ln)=>Vt[ln]===Jt||Vt[ln]===kt([42])))}function Dt(){return $t&&zt?new window[kt([80,114,111,109,105,115,101])]((jt,en)=>{$t[kt([116,104,101,110])](jt,en),zt[kt([116,104,101,110])](Kt=>{Kt!=kt([86,97,108,105,100])&&jt(Kt)},en)}):$t||zt||kt([86,97,108,105,100])}}function bt(St,$t){return new window[kt([80,114,111,109,105,115,101])](qt=>{if(zt())return qt(kt([86,97,108,105,100]));Ut(),Ye[kt([100,101,99,111,114,97,116,101])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let Zt=!1;const Dt=uid();function jt(Kt){return!!Kt&&(typeof Kt===kt([111,98,106,101,99,116])||typeof Kt===kt([102,117,110,99,116,105,111,110]))&&typeof Kt[kt([116,104,101,110])]===kt([102,117,110,99,116,105,111,110])&&typeof Kt[kt([99,97,116,99,104])]===kt([102,117,110,99,116,105,111,110])}function en(Kt){tn(Kt)[kt([116,104,101,110])](an=>!an||an[kt([115,116,97,116,117,115])]!=kt([111,107])?kt([85,115,97,103,101,76,105,109,105,116]):Nt(Ot(Dt+$t))!=an[kt([118,101,114,105,102,105,99,97,116,105,111,110])]?kt([85,115,97,103,101,76,105,109,105,116]):kt([86,97,108,105,100]))[kt([116,104,101,110])](an=>(Jt(),an),()=>{const an=ln();return an==null?(Jt(),kt([86,97,108,105,100])):kt(Le-an>(853126185^me)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[kt([116,104,101,110])](qt)[kt([99,97,116,99,104])](()=>{qt(kt([85,115,97,103,101,76,105,109,105,116]))});const Vt=384026281^me;function Jt(){const an=kt([108,108,99,116,45])+Nt(Ot(St)),cn=Lt(Nt(window[kt([77,97,116,104])][kt([99,101,105,108])](Le/Vt)));window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([115,101,116,73,116,101,109])](an,cn)}function ln(){const an=kt([108,108,99,116,45])+Nt(Ot(St)),cn=window[kt([108,111,99,97,108,83,116,111,114,97,103,101])][kt([103,101,116,73,116,101,109])](an);return cn?window[kt([112,97,114,115,101,73,110,116])](Lt(cn),16)*Vt:null}function tn(an){return new window[kt([80,114,111,109,105,115,101])]((cn,un)=>{an[kt([116,104,101,110])](cn,un),window[kt([115,101,116,84,105,109,101,111,117,116])](un,383057129^me)})}}Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(Kt,Vt)=>{if(Vt[0]!=St)return qt(kt([85,115,97,103,101,76,105,109,105,116]));Vt[1]={...Vt[1],[kt([114,101,113,117,101,115,116,73,100])]:Dt}},{[kt([112,114,105,111,114,105,116,121])]:kt([104,105,103,104])}),Ye[kt([111,110])](kt([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),Kt=>{jt(Kt[kt([114,101,116,117,114,110])])&&(Zt=!0,en(Kt[kt([114,101,116,117,114,110])]))},{[kt([112,114,105,111,114,105,116,121])]:kt([108,111,119])}),nt[kt([116,104,101,110])](()=>{Zt||qt(kt([85,115,97,103,101,76,105,109,105,116]))})});function zt(){return Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==kt([97,117,116,111])}function Ut(){Ye[kt([101,100,105,116,105,110,103])][kt([118,105,101,119])][kt([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=kt([97,117,116,111])}}function yt(St){const $t=[new window[kt([80,114,111,109,105,115,101])](zt=>setTimeout(zt,383522533^me)),nt[kt([116,104,101,110])](()=>new window[kt([80,114,111,109,105,115,101])](zt=>{let Ut=0;Ye[kt([109,111,100,101,108])][kt([111,110])](kt([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(qt,Zt)=>{Zt[0][kt([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&Ut++,Ut==(383068625^me)&&(zt(),qt[kt([111,102,102])]())})}))];return window[kt([80,114,111,109,105,115,101])][kt([114,97,99,101])]($t)[kt([116,104,101,110])](()=>St)}async function _t(){await nt,Ye[kt([109,111,100,101,108])][kt([99,104,97,110,103,101])]=Et,Ye[kt([109,111,100,101,108])][kt([101,110,113,117,101,117,101,67,104,97,110,103,101])]=Et,Ye[kt([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](kt([109,111,100,101,108]))}function Ct(St){const $t=Tt();Ye[$t]=kt([109,117,108,116,105,76,101,118,101,108,76,105,115,116,76,105,99,101,110,115,101,75,101,121])+St,St!=kt([86,97,108,105,100])&&_t()}function Tt(){const St=window[kt([83,116,114,105,110,103])](window[kt([112,101,114,102,111,114,109,97,110,99,101])][kt([110,111,119])]())[kt([114,101,112,108,97,99,101])](kt([46]),"");let $t=kt([82]);for(let zt=0;zt<St[kt([108,101,110,103,116,104])];zt+=2){let Ut=window[kt([112,97,114,115,101,73,110,116])](St[kt([115,117,98,115,116,114,105,110,103])](zt,zt+2));Ut>=N[kt([108,101,110,103,116,104])]&&(Ut-=N[kt([108,101,110,103,116,104])]),$t+=N[Ut]}return $t}function At(){const St=ft[kt([115,112,108,105,116])](kt([46]));if(St[kt([108,101,110,103,116,104])]!=3)return null;return $t(St[1]);function $t(zt){const Ut=Pt(zt);return Ut&&qt()?Ut:null;function qt(){const Zt=Ut[kt([106,116,105])],Dt=window[kt([112,97,114,115,101,73,110,116])](Zt[kt([115,117,98,115,116,114,105,110,103])](Zt[kt([108,101,110,103,116,104])]-8),16),jt={...Ut,[kt([106,116,105])]:Zt[kt([115,117,98,115,116,114,105,110,103])](0,Zt[kt([108,101,110,103,116,104])]-8)};return delete jt[kt([118,99])],Ot(jt)==Dt}}}async function It(){let St=!0;try{const Ut=ft[kt([115,112,108,105,116])](kt([46])),[qt,Zt,Dt]=Ut;return $t(qt),await zt(qt,Zt,Dt),St}catch{return!1}function $t(Ut){const qt=Pt(Ut);qt&&qt[kt([97,108,103])]==kt([69,83,50,53,54])||(St=!1)}async function zt(Ut,qt,Zt){const Dt=window[kt([85,105,110,116,56,65,114,114,97,121])][kt([102,114,111,109])](Bt(Zt),Vt=>Vt[kt([99,104,97,114,67,111,100,101,65,116])](0)),jt=new window[kt([84,101,120,116,69,110,99,111,100,101,114])]()[kt([101,110,99,111,100,101])](Ut+kt([46])+qt),en=window[kt([99,114,121,112,116,111])][kt([115,117,98,116,108,101])];if(!en)return;const Kt=await en[kt([105,109,112,111,114,116,75,101,121])](kt([106,119,107]),ot,{[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([110,97,109,101,100,67,117,114,118,101])]:kt([80,45,50,53,54])},!1,[kt([118,101,114,105,102,121])]);await en[kt([118,101,114,105,102,121])]({[kt([110,97,109,101])]:kt([69,67,68,83,65]),[kt([104,97,115,104])]:{[kt([110,97,109,101])]:kt([83,72,65,45,50,53,54])}},Kt,Dt,jt)||(St=!1)}}function Pt(St){return St[kt([115,116,97,114,116,115,87,105,116,104])](kt([101,121]))?JSON[kt([112,97,114,115,101])](Bt(St)):null}function Bt(St){return window[kt([97,116,111,98])](St[kt([114,101,112,108,97,99,101])](/-/g,kt([43]))[kt([114,101,112,108,97,99,101])](/_/g,kt([47])))}function Ot(St){let $t=5381;function zt(qt){for(let Zt=0;Zt<qt[kt([108,101,110,103,116,104])];Zt++){const Dt=qt[kt([99,104,97,114,67,111,100,101,65,116])](Zt);$t=($t<<5)+$t+Dt,$t&=$t}}function Ut(qt){Array[kt([105,115,65,114,114,97,121])](qt)?qt[kt([102,111,114,69,97,99,104])](Ut):qt&&typeof qt==kt([111,98,106,101,99,116])?Object[kt([101,110,116,114,105,101,115])](qt)[kt([115,111,114,116])]()[kt([102,111,114,69,97,99,104])](([Zt,Dt])=>{zt(Zt),Ut(Dt)}):zt(window[kt([83,116,114,105,110,103])](qt))}return Ut(St),$t>>>0}function Nt(St){return St[kt([116,111,83,116,114,105,110,103])](16)[kt([112,97,100,83,116,97,114,116])](8,kt([48]))}function Lt(St){return St[kt([115,112,108,105,116])]("")[kt([114,101,118,101,114,115,101])]()[kt([106,111,105,110])]("")}function Et(){}function kt(St){return St.map($t=>String.fromCharCode($t)).join("")}Ct(await mt())})(this)}};function f$1(de,u,t){let N=u.listMarkers[de%u.listMarkers.length];if(N.showMarkerPath===void 0||N.showMarkerPath)return t.slice(0,de+1).map((me,pe)=>(N=u.listMarkers[pe%u.listMarkers.length],w(N.marker,me))).join("");{const me=t[t.length-1];return w(N.marker,me)}}function w(de,u){return typeof de=="function"?de(u):de}function m$1(de,u){return(t,N,me)=>{const pe=N.viewItem;if(N.modelRange||Object.assign(N,me.convertChildren(N.viewItem,N.modelCursor)),!me.consumable.test(pe,{classes:de.className}))return;const Le=Array.from(N.modelRange.getItems({shallow:!0})).filter(nt=>u.checkAttribute(nt,"listItemId"));if(!Le.length)return;me.consumable.consume(pe,{classes:de.className}),me.consumable.consume(pe,{classes:"multi-level-list"}),me.consumable.consume(pe,{styles:"list-style-type"});const Ye=Le[0].getAttribute("listIndent");for(const nt of Le)nt.getAttribute("listIndent")==Ye&&(me.writer.setAttribute("listType",de.listType,nt),me.writer.setAttribute("listMarkerStyle",de.listMarkerStyle,nt))}}function K(de,u){const t=de.t,N=de.t;switch(u){case"Start at":return t("Start at");case"Start index must be greater than 0.":return t("Start index must be greater than 0.");case"Invalid start index value.":return t("Invalid start index value.");case"List properties":return t("List properties");case"Multi-level List":return N("Multi-level List");case"Multi-level list styles toolbar":return N("Multi-level list styles toolbar");default:return u}}class C extends View{constructor(t,{enabledProperties:N,styleButtonViews:me,styleGridAriaLabel:pe}){super(t);xt(this,"children");xt(this,"stylesView",null);xt(this,"additionalPropertiesCollapsibleView",null);xt(this,"startIndexFieldView",null);xt(this,"focusTracker",new FocusTracker);xt(this,"keystrokes",new KeystrokeHandler);xt(this,"focusables",new ViewCollection);xt(this,"focusCycler");const Le=["ck","ck-multi-level-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),N.styles?(this.stylesView=this._createStylesView(me,pe),this.children.add(this.stylesView)):Le.push("ck-multi-level-list-properties_without-styles"),N.startIndex&&(this._addListPropertyViews(N),Le.push("ck-multi-level-list-properties_with-multi-level-properties")),this.setTemplate({tag:"div",attributes:{class:Le},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),this.startIndexFieldView&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=N=>N.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,N){const me=new View(this.locale);return me.children=me.createCollection(),me.children.addMany(t),me.setTemplate({tag:"div",attributes:{"aria-label":N,class:["ck","ck-multi-level-list-styles"]},children:me.children}),me.children.delegate("execute").to(this),me.focus=function(){this.children.first.focus()},me.focusTracker=new FocusTracker,me.keystrokes=new KeystrokeHandler,me.render(),me.keystrokes.listenTo(me.element),me}_addListPropertyViews(t){const N=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),N.push(this.startIndexFieldView)),t.styles?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,N),this.additionalPropertiesCollapsibleView.set({label:K(this.locale,"List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(N,"isEnabled",(...me)=>me.some(pe=>pe)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(me,pe,Le)=>{Le||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(N)}_createStartIndexField(){const t=new LabeledFieldView(this.locale,createLabeledInputNumber);return t.set({label:K(this.locale,"Start at"),class:"ck-multi-level-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const N=t.fieldView.element,me=N.valueAsNumber;Number.isNaN(me)?t.errorText=K(this.locale,"Invalid start index value."):N.checkValidity()?this.fire("listStart",{startIndex:me}):t.errorText=K(this.locale,"Start index must be greater than 0.")}),t}}var b='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.85 6.5a.75.75 0 0 1 0-1.5h9.5a.75.75 0 1 1 0 1.5h-9.5Z"/><path d="M3 8V2.7H.5v1h1V8H3Z"/><path d="M13.42 14.185a.75.75 0 0 0 .53 1.28h3.4a.75.75 0 1 0 0-1.5h-3.4a.75.75 0 0 0-.53.22Z"/><path d="M5.636 8.035V6.8H4.4v1.235h1.236Z"/><path d="M9 17.865v-5.3H6.5v1h1v4.3H9Z"/><path d="M11.636 17.9v-1.235H10.4V17.9h1.236Z"/><path d="M3.2 17.865v-5.3H.7v1h1v4.3h1.5Z"/><path d="M5.836 17.9v-1.235H4.6V17.9h1.236Z"/></svg>';let l$1=class extends Plugin{constructor(){super(...arguments);xt(this,"licenseKey");xt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"MultiLevelListUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("multiLevelList",function({editor:me,parentCommandName:pe,buttonLabel:Le,buttonIcon:Ye,styleGridAriaLabel:nt,styleDefinitions:ot}){const ft=me.commands.get(pe),mt=me.config.get("list.properties")||{},bt=me.plugins.has("ListProperties"),yt=mt.startIndex;return!bt||!yt?_t=>{const Ct=new ButtonView(_t);return Ct.set({label:Le,icon:Ye,tooltip:!0,isToggleable:!0}),Ct.bind("isOn").to(ft,"value",Tt=>!!Tt),Ct.on("execute",()=>{me.execute(pe),me.editing.view.focus()}),Ct}:_t=>{const Ct=createDropdown(_t,SplitButtonView),Tt=Ct.buttonView;return Ct.bind("isEnabled").to(ft),Ct.class="ck-list-styles-dropdown",Tt.on("execute",()=>{me.execute(pe),me.editing.view.focus()}),Tt.set({label:Le,icon:Ye,tooltip:!0,isToggleable:!0}),Tt.bind("isOn").to(ft,"value",At=>!!At),Ct.once("change:isOpen",()=>{const At=function({editor:It,dropdownView:Pt,styleDefinitions:Bt,styleGridAriaLabel:Ot}){const Nt=It.locale,Lt=It.config.get("list.properties"),Et=null;Lt.reversed=!1,Bt.length||(Lt.styles=!1);const kt=new C(Nt,{styleGridAriaLabel:Ot,enabledProperties:Lt,styleButtonViews:Et});if(Lt.startIndex){const St=It.commands.get("listStart");kt.startIndexFieldView.bind("isEnabled").to(St),kt.startIndexFieldView.fieldView.bind("value").to(St),kt.on("listStart",($t,zt)=>It.execute("listStart",zt))}return kt.delegate("execute").to(Pt),kt}({editor:me,dropdownView:Ct,styleGridAriaLabel:nt,styleDefinitions:ot});Ct.panelView.children.add(At)}),Ct.on("execute",()=>{me.editing.view.focus()}),Ct}}({editor:t,parentCommandName:"multiLevelList",buttonLabel:K(t.locale,"Multi-level List"),buttonIcon:b,styleGridAriaLabel:K(t.locale,"Multi-level list styles toolbar"),styleDefinitions:[]})),t.ui.componentFactory.add("menuBar:multiLevelList",()=>{const me=t.commands.get("multiLevelList"),pe=new MenuBarMenuListItemButtonView(t.locale);return pe.set({label:K(t.locale,"Multi-level List"),icon:b}),pe.bind("isEnabled").to(me),pe.bind("isOn").to(me,"value",Le=>!!Le),pe.on("execute",()=>{t.execute("multiLevelList"),t.editing.view.focus()}),pe}),this.licenseKey=this.editor.config.get("licenseKey");const N=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let me;for(const pe in N){const Le=pe,Ye=N[Le];if(Ye=="multiLevelListLicenseKeyValid"||Ye=="multiLevelListLicenseKeyInvalid"||Ye=="multiLevelListLicenseKeyExpired"||Ye=="multiLevelListLicenseKeyDomainLimit"||Ye=="multiLevelListLicenseKeyNotAllowed"||Ye=="multiLevelListLicenseKeyEvaluationLimit"||Ye=="multiLevelListLicenseKeyTrialLimit"||Ye=="multiLevelListLicenseKeyUsageLimit"){delete N[Le],me=Ye,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}me=="multiLevelListLicenseKeyInvalid"&&N._showLicenseError("invalid"),me=="multiLevelListLicenseKeyExpired"&&N._showLicenseError("expired"),me=="multiLevelListLicenseKeyDomainLimit"&&N._showLicenseError("domainLimit"),me=="multiLevelListLicenseKeyNotAllowed"&&N._showLicenseError("featureNotAllowed","MultiLevelList"),me=="multiLevelListLicenseKeyEvaluationLimit"&&N._showLicenseError("evaluationLimit"),me=="multiLevelListLicenseKeyTrialLimit"&&N._showLicenseError("trialLimit"),me=="multiLevelListLicenseKeyUsageLimit"&&N._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}},s$1=class extends Plugin{static get pluginName(){return"MultiLevelList"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[i$2,l$1]}};const m=/<meta\s*name="?generator"?\s*content="?microsoft\s*excel\s*\d+"?\/?>/i;function l(de){return m.test(de)}const S=/^(?<tagName>(?!\.)[\w-]+)?(\.(?<className>[\w-]+))?$/i;function x(de,u){const t=new Map;for(const[N,me]of u){if(!N.tagName&&!N.className)continue;const pe=!N.tagName||de.name===N.tagName,Le=!N.className||de.hasClass(N.className);pe&&Le&&t.set(N,me)}return t}function h(de){const u={};for(let t=0;t<de.length;t++){const N=de[t],me=de.getPropertyValue(N);me!=="initial"&&(u[N]=me)}return u}function O(de){const u=de.split(",").map(N=>N.trim()),t=[];for(const N of u){const me=S.exec(N);me&&t.push(me.groups)}return t}function y(de){const u={};for(const t of de)Object.assign(u,t);return u}class c extends MSWordNormalizer{execute(u){const{body:t,styles:N}=u._parsedData,me=new UpcastWriter(t.document),pe=me.createRangeIn(t),Le=function(nt){const ot={};for(const ft of nt)for(const mt of ft.cssRules)if(mt instanceof CSSStyleRule){const bt=h(mt.style);ot[mt.selectorText]=Object.assign({},ot[mt.selectorText]||{},bt)}return ot}(N),Ye=function(nt){const ot=new Map;for(const ft in nt){const mt=O(ft),bt=nt[ft];for(const yt of mt)ot.set(yt,bt)}return ot}(Le);for(const nt of pe){if(nt.type!=="elementStart")continue;const ot=x(nt.item,Ye);if(ot.size){const ft=y(Array.from(ot.values()));for(const mt in ft){const bt=nt.item;bt.hasStyle(mt)||me.setStyle(mt,ft[mt],bt)}}}u.content=t}isActive(u){return super.isActive(u)||l(u)}}let i$1=class extends Plugin{static get pluginName(){return"PasteFromOfficeEnhancedInliner"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const u=this.editor,t=u.plugins.get("ClipboardPipeline"),N=u.editing.view.document,me=new c(N);t.on("inputTransformation",(pe,Le)=>{const Ye=Le.dataTransfer.getData("text/html");me.isActive(Ye)&&(Le._parsedData||(Le._parsedData=parseHtml(Ye,N.stylesProcessor)),me.execute(Le))},{priority:priorities.get("high")+11})}afterInit(){(async function(u){const t=Et([121,55,85,122,89,113,117,98,53,108,99,52,67,71,82,72,78,116,105,106,68,109,87,112,83,66,70,86,77,80,115,100,76,110,54,48,51,73,49,79,104,57,97,69,118,74,120,103,114,119,107,81,84,102,50,56,88,101,111,75,65,90]),N=1846868564,me=1846778644^N,pe=window[Et([68,97,116,101])][Et([110,111,119])](),Le=u[Et([101,100,105,116,111,114])],Ye=new window[Et([80,114,111,109,105,115,101])](kt=>{Le[Et([111,110,99,101])](Et([114,101,97,100,121]),kt)}),nt={[Et([107,116,121])]:Et([69,67]),[Et([117,115,101])]:Et([115,105,103]),[Et([99,114,118])]:Et([80,45,50,53,54]),[Et([120])]:Et([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[Et([121])]:Et([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[Et([97,108,103])]:Et([69,83,50,53,54])},ot=Le[Et([99,111,110,102,105,103])][Et([103,101,116])](Et([108,105,99,101,110,115,101,75,101,121]));async function ft(){let kt,St=null,$t=null;try{return ot==Et([71,80,76])?Et([78,111,116,65,108,108,111,119,101,100]):(kt=Tt(),kt?(kt[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&($t=mt(kt[Et([117,115,97,103,101,69,110,100,112,111,105,110,116])],kt[Et([106,116,105])])),await At()?Ut()?zt()?Et([69,120,112,105,114,101,100]):qt()?(kt[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([101,118,97,108,117,97,116,105,111,110])&&(St=bt(Et([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),kt[Et([108,105,99,101,110,115,101,84,121,112,101])]==Et([116,114,105,97,108])&&(St=bt(Et([84,114,105,97,108,76,105,109,105,116]))),await Zt()):Et([68,111,109,97,105,110,76,105,109,105,116]):Et([78,111,116,65,108,108,111,119,101,100]):Et([73,110,118,97,108,105,100])):Et([73,110,118,97,108,105,100]))}catch{return Et([73,110,118,97,108,105,100])}function zt(){const Dt=[Et([101,118,97,108,117,97,116,105,111,110]),Et([116,114,105,97,108])][Et([105,110,99,108,117,100,101,115])](kt[Et([108,105,99,101,110,115,101,84,121,112,101])])?pe/1e3:3600*me;return kt[Et([101,120,112])]<Dt}function Ut(){const Dt=kt[Et([102,101,97,116,117,114,101,115])];return!!Dt&&(!!Dt[Et([105,110,99,108,117,100,101,115])](Et([42]))||!!Dt[Et([105,110,99,108,117,100,101,115])](Et([80,79,69]))||!!Dt[Et([105,110,99,108,117,100,101,115])](Et([80,80])))}function qt(){const Dt=kt[Et([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!Dt||Dt[Et([108,101,110,103,116,104])]==0)return!0;const{hostname:jt}=new URL(window[Et([108,111,99,97,116,105,111,110])].href);if(Dt[Et([105,110,99,108,117,100,101,115])](jt))return!0;const en=jt[Et([115,112,108,105,116])](Et([46]));return Dt[Et([102,105,108,116,101,114])](Kt=>Kt[Et([105,110,99,108,117,100,101,115])](Et([42])))[Et([109,97,112])](Kt=>Kt[Et([115,112,108,105,116])](Et([46])))[Et([115,111,109,101])](Kt=>en[Et([101,118,101,114,121])]((Vt,Jt)=>Kt[Jt]===Vt||Kt[Jt]===Et([42])))}function Zt(){return St&&$t?new window[Et([80,114,111,109,105,115,101])]((Dt,jt)=>{St[Et([116,104,101,110])](Dt,jt),$t[Et([116,104,101,110])](en=>{en!=Et([86,97,108,105,100])&&Dt(en)},jt)}):St||$t||Et([86,97,108,105,100])}}function mt(kt,St){return new window[Et([80,114,111,109,105,115,101])](Ut=>{if($t())return Ut(Et([86,97,108,105,100]));zt(),Le[Et([100,101,99,111,114,97,116,101])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let qt=!1;const Zt=uid();function Dt(en){return!!en&&(typeof en===Et([111,98,106,101,99,116])||typeof en===Et([102,117,110,99,116,105,111,110]))&&typeof en[Et([116,104,101,110])]===Et([102,117,110,99,116,105,111,110])&&typeof en[Et([99,97,116,99,104])]===Et([102,117,110,99,116,105,111,110])}function jt(en){ln(en)[Et([116,104,101,110])](tn=>!tn||tn[Et([115,116,97,116,117,115])]!=Et([111,107])?Et([85,115,97,103,101,76,105,109,105,116]):Ot(Bt(Zt+St))!=tn[Et([118,101,114,105,102,105,99,97,116,105,111,110])]?Et([85,115,97,103,101,76,105,109,105,116]):Et([86,97,108,105,100]))[Et([116,104,101,110])](tn=>(Vt(),tn),()=>{const tn=Jt();return tn==null?(Vt(),Et([86,97,108,105,100])):Et(pe-tn>(1243119188^N)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[Et([116,104,101,110])](Ut)[Et([99,97,116,99,104])](()=>{Ut(Et([85,115,97,103,101,76,105,109,105,116]))});const Kt=1847727316^N;function Vt(){const tn=Et([108,108,99,116,45])+Ot(Bt(kt)),an=Nt(Ot(window[Et([77,97,116,104])][Et([99,101,105,108])](pe/Kt)));window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([115,101,116,73,116,101,109])](tn,an)}function Jt(){const tn=Et([108,108,99,116,45])+Ot(Bt(kt)),an=window[Et([108,111,99,97,108,83,116,111,114,97,103,101])][Et([103,101,116,73,116,101,109])](tn);return an?window[Et([112,97,114,115,101,73,110,116])](Nt(an),16)*Kt:null}function ln(tn){return new window[Et([80,114,111,109,105,115,101])]((an,cn)=>{tn[Et([116,104,101,110])](an,cn),window[Et([115,101,116,84,105,109,101,111,117,116])](cn,1846881940^N)})}}Le[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(en,Kt)=>{if(Kt[0]!=kt)return Ut(Et([85,115,97,103,101,76,105,109,105,116]));Kt[1]={...Kt[1],[Et([114,101,113,117,101,115,116,73,100])]:Zt}},{[Et([112,114,105,111,114,105,116,121])]:Et([104,105,103,104])}),Le[Et([111,110])](Et([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),en=>{Dt(en[Et([114,101,116,117,114,110])])&&(qt=!0,jt(en[Et([114,101,116,117,114,110])]))},{[Et([112,114,105,111,114,105,116,121])]:Et([108,111,119])}),Ye[Et([116,104,101,110])](()=>{qt||Ut(Et([85,115,97,103,101,76,105,109,105,116]))})});function $t(){return Le[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==Et([97,117,116,111])}function zt(){Le[Et([101,100,105,116,105,110,103])][Et([118,105,101,119])][Et([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=Et([97,117,116,111])}}function bt(kt){const St=[new window[Et([80,114,111,109,105,115,101])]($t=>setTimeout($t,1847444632^N)),Ye[Et([116,104,101,110])](()=>new window[Et([80,114,111,109,105,115,101])]($t=>{let zt=0;Le[Et([109,111,100,101,108])][Et([111,110])](Et([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(Ut,qt)=>{qt[0][Et([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&zt++,zt==(1846868908^N)&&($t(),Ut[Et([111,102,102])]())})}))];return window[Et([80,114,111,109,105,115,101])][Et([114,97,99,101])](St)[Et([116,104,101,110])](()=>kt)}async function yt(){await Ye,Le[Et([109,111,100,101,108])][Et([99,104,97,110,103,101])]=Lt,Le[Et([109,111,100,101,108])][Et([101,110,113,117,101,117,101,67,104,97,110,103,101])]=Lt,Le[Et([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](Et([109,111,100,101,108]))}function _t(kt){const St=Ct();Le[St]=Et([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121])+kt,kt!=Et([86,97,108,105,100])&&yt()}function Ct(){const kt=window[Et([83,116,114,105,110,103])](window[Et([112,101,114,102,111,114,109,97,110,99,101])][Et([110,111,119])]())[Et([114,101,112,108,97,99,101])](Et([46]),"");let St=Et([121]);for(let $t=0;$t<kt[Et([108,101,110,103,116,104])];$t+=2){let zt=window[Et([112,97,114,115,101,73,110,116])](kt[Et([115,117,98,115,116,114,105,110,103])]($t,$t+2));zt>=t[Et([108,101,110,103,116,104])]&&(zt-=t[Et([108,101,110,103,116,104])]),St+=t[zt]}return St}function Tt(){const kt=ot[Et([115,112,108,105,116])](Et([46]));if(kt[Et([108,101,110,103,116,104])]!=3)return null;return St(kt[1]);function St($t){const zt=It($t);return zt&&Ut()?zt:null;function Ut(){const qt=zt[Et([106,116,105])],Zt=window[Et([112,97,114,115,101,73,110,116])](qt[Et([115,117,98,115,116,114,105,110,103])](qt[Et([108,101,110,103,116,104])]-8),16),Dt={...zt,[Et([106,116,105])]:qt[Et([115,117,98,115,116,114,105,110,103])](0,qt[Et([108,101,110,103,116,104])]-8)};return delete Dt[Et([118,99])],Bt(Dt)==Zt}}}async function At(){let kt=!0;try{const zt=ot[Et([115,112,108,105,116])](Et([46])),[Ut,qt,Zt]=zt;return St(Ut),await $t(Ut,qt,Zt),kt}catch{return!1}function St(zt){const Ut=It(zt);Ut&&Ut[Et([97,108,103])]==Et([69,83,50,53,54])||(kt=!1)}async function $t(zt,Ut,qt){const Zt=window[Et([85,105,110,116,56,65,114,114,97,121])][Et([102,114,111,109])](Pt(qt),Kt=>Kt[Et([99,104,97,114,67,111,100,101,65,116])](0)),Dt=new window[Et([84,101,120,116,69,110,99,111,100,101,114])]()[Et([101,110,99,111,100,101])](zt+Et([46])+Ut),jt=window[Et([99,114,121,112,116,111])][Et([115,117,98,116,108,101])];if(!jt)return;const en=await jt[Et([105,109,112,111,114,116,75,101,121])](Et([106,119,107]),nt,{[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([110,97,109,101,100,67,117,114,118,101])]:Et([80,45,50,53,54])},!1,[Et([118,101,114,105,102,121])]);await jt[Et([118,101,114,105,102,121])]({[Et([110,97,109,101])]:Et([69,67,68,83,65]),[Et([104,97,115,104])]:{[Et([110,97,109,101])]:Et([83,72,65,45,50,53,54])}},en,Zt,Dt)||(kt=!1)}}function It(kt){return kt[Et([115,116,97,114,116,115,87,105,116,104])](Et([101,121]))?JSON[Et([112,97,114,115,101])](Pt(kt)):null}function Pt(kt){return window[Et([97,116,111,98])](kt[Et([114,101,112,108,97,99,101])](/-/g,Et([43]))[Et([114,101,112,108,97,99,101])](/_/g,Et([47])))}function Bt(kt){let St=5381;function $t(Ut){for(let qt=0;qt<Ut[Et([108,101,110,103,116,104])];qt++){const Zt=Ut[Et([99,104,97,114,67,111,100,101,65,116])](qt);St=(St<<5)+St+Zt,St&=St}}function zt(Ut){Array[Et([105,115,65,114,114,97,121])](Ut)?Ut[Et([102,111,114,69,97,99,104])](zt):Ut&&typeof Ut==Et([111,98,106,101,99,116])?Object[Et([101,110,116,114,105,101,115])](Ut)[Et([115,111,114,116])]()[Et([102,111,114,69,97,99,104])](([qt,Zt])=>{$t(qt),zt(Zt)}):$t(window[Et([83,116,114,105,110,103])](Ut))}return zt(kt),St>>>0}function Ot(kt){return kt[Et([116,111,83,116,114,105,110,103])](16)[Et([112,97,100,83,116,97,114,116])](8,Et([48]))}function Nt(kt){return kt[Et([115,112,108,105,116])]("")[Et([114,101,118,101,114,115,101])]()[Et([106,111,105,110])]("")}function Lt(){}function Et(kt){return kt.map(St=>String.fromCharCode(St)).join("")}_t(await ft())})(this)}};const L=["color","font-family","font-size","text-decoration","text-decoration-line","font-weight","font-style","vertical-align"],E=["color","font-family","font-size"],F={"font-style":[["italic","i"]],"font-weight":[["medium","strong"],["bold","strong"],["bolder","strong"],[de=>Number(de)>=600,"strong"]],"text-decoration":[["underline","u"],["line-through","s"]],"text-decoration-line":[["underline","u"],["line-through","s"]],"vertical-align":[["sub","sub"],["super","sup"]]};function P(de){return L.includes(de)}function v(de,u,t){const{spanStyles:N,stylesToBeHtmlElements:me}=function(pe,Le){const Ye={},nt={};return Le.forEach(ot=>{const ft=pe.getStyle(ot);if(ft){if(function(mt){return E.includes(mt)}(ot))Ye[ot]=ft;else if(function(mt){return mt in F}(ot)){const mt=ft.split(" ");F[ot].forEach(([bt,yt])=>{for(const _t of mt)(typeof bt=="function"&&bt(_t)||bt===_t)&&(nt[ot]=[...nt[ot]||[],[bt,yt]])})}}}),{spanStyles:Ye,stylesToBeHtmlElements:nt}}(de,t);(function(pe,Le,Ye){for(const nt in Ye)Ye[nt].forEach(([,ot])=>{const ft=Le.createElement(ot,[],pe.getChildren());Le.insertChild(0,ft,pe)}),Le.removeStyle(nt,pe)})(de,u,me),function(pe,Le,Ye){if(!Object.keys(Ye).length)return;const nt=Le.createElement("span",[],pe.getChildren());Le.setStyle(Ye,nt),Le.insertChild(0,nt,pe),Le.removeStyle(Object.keys(Ye),pe)}(de,u,N)}class f extends MSWordNormalizer{execute(u){const{body:t}=u._parsedData,N=new UpcastWriter(t.document),me=N.createRangeIn(t),pe=new Document$1(N.document.stylesProcessor),Le=[...new DomConverter(pe).blockElements,"font"],Ye=me.getItems();for(const ot of Ye)ot.is("element")&&Le.includes(ot.name)&&v(ot,N,(nt=ot,Array.from(nt.getStyleNames()).filter(P)));var nt;u.content=t}isActive(u){return super.isActive(u)||l(u)}}class s extends Plugin{constructor(){super(...arguments);xt(this,"licenseKey");xt(this,"_licenseKeyCheckInterval")}static get pluginName(){return"PasteFromOfficeEnhancedPropagator"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const t=this.editor,N=t.plugins.get("ClipboardPipeline"),me=t.editing.view.document,pe=new f(me);N.on("inputTransformation",(Ye,nt)=>{const ot=nt.dataTransfer.getData("text/html");pe.isActive(ot)&&(nt._parsedData||(nt._parsedData=parseHtml(ot,me.stylesProcessor)),pe.execute(nt))},{priority:priorities.get("high")+10}),this.licenseKey=this.editor.config.get("licenseKey");const Le=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let Ye;for(const nt in Le){const ot=nt,ft=Le[ot];if(ft=="pasteFromOfficeEnhancedLicenseKeyValid"||ft=="pasteFromOfficeEnhancedLicenseKeyInvalid"||ft=="pasteFromOfficeEnhancedLicenseKeyExpired"||ft=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"||ft=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"||ft=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"||ft=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"||ft=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"){delete Le[ot],Ye=ft,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}Ye=="pasteFromOfficeEnhancedLicenseKeyInvalid"&&Le._showLicenseError("invalid"),Ye=="pasteFromOfficeEnhancedLicenseKeyExpired"&&Le._showLicenseError("expired"),Ye=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"&&Le._showLicenseError("domainLimit"),Ye=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"&&Le._showLicenseError("featureNotAllowed","PasteFromOfficeEnhanced"),Ye=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"&&Le._showLicenseError("evaluationLimit"),Ye=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"&&Le._showLicenseError("trialLimit"),Ye=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"&&Le._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}}class a extends Plugin{static get pluginName(){return"PasteFromOfficeEnhanced"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice",i$1,s]}}var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=de;function de(u,t){for(var N=new Array(arguments.length-1),me=0,pe=2,Le=!0;pe<arguments.length;)N[me++]=arguments[pe++];return new Promise(function(nt,ot){N[me]=function(mt){if(Le)if(Le=!1,mt)ot(mt);else{for(var bt=new Array(arguments.length-1),yt=0;yt<bt.length;)bt[yt++]=arguments[yt];nt.apply(null,bt)}};try{u.apply(t||null,N)}catch(ft){Le&&(Le=!1,ot(ft))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(de){var u=de;u.length=function(Ye){var nt=Ye.length;if(!nt)return 0;for(var ot=0;--nt%4>1&&Ye.charAt(nt)==="=";)++ot;return Math.ceil(Ye.length*3)/4-ot};for(var t=new Array(64),N=new Array(123),me=0;me<64;)N[t[me]=me<26?me+65:me<52?me+71:me<62?me-4:me-59|43]=me++;u.encode=function(Ye,nt,ot){for(var ft=null,mt=[],bt=0,yt=0,_t;nt<ot;){var Ct=Ye[nt++];switch(yt){case 0:mt[bt++]=t[Ct>>2],_t=(Ct&3)<<4,yt=1;break;case 1:mt[bt++]=t[_t|Ct>>4],_t=(Ct&15)<<2,yt=2;break;case 2:mt[bt++]=t[_t|Ct>>6],mt[bt++]=t[Ct&63],yt=0;break}bt>8191&&((ft||(ft=[])).push(String.fromCharCode.apply(String,mt)),bt=0)}return yt&&(mt[bt++]=t[_t],mt[bt++]=61,yt===1&&(mt[bt++]=61)),ft?(bt&&ft.push(String.fromCharCode.apply(String,mt.slice(0,bt))),ft.join("")):String.fromCharCode.apply(String,mt.slice(0,bt))};var pe="invalid encoding";u.decode=function(Ye,nt,ot){for(var ft=ot,mt=0,bt,yt=0;yt<Ye.length;){var _t=Ye.charCodeAt(yt++);if(_t===61&&mt>1)break;if((_t=N[_t])===void 0)throw Error(pe);switch(mt){case 0:bt=_t,mt=1;break;case 1:nt[ot++]=bt<<2|(_t&48)>>4,bt=_t,mt=2;break;case 2:nt[ot++]=(bt&15)<<4|(_t&60)>>2,bt=_t,mt=3;break;case 3:nt[ot++]=(bt&3)<<6|_t,mt=0;break}}if(mt===1)throw Error(pe);return ot-ft},u.test=function(Ye){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Ye)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=de;function de(){this._listeners={}}return de.prototype.on=function(t,N,me){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:N,ctx:me||this}),this},de.prototype.off=function(t,N){if(t===void 0)this._listeners={};else if(N===void 0)this._listeners[t]=[];else for(var me=this._listeners[t],pe=0;pe<me.length;)me[pe].fn===N?me.splice(pe,1):++pe;return this},de.prototype.emit=function(t){var N=this._listeners[t];if(N){for(var me=[],pe=1;pe<arguments.length;)me.push(arguments[pe++]);for(pe=0;pe<N.length;)N[pe].fn.apply(N[pe++].ctx,me)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=de(de);function de(pe){return typeof Float32Array<"u"?function(){var Le=new Float32Array([-0]),Ye=new Uint8Array(Le.buffer),nt=Ye[3]===128;function ot(yt,_t,Ct){Le[0]=yt,_t[Ct]=Ye[0],_t[Ct+1]=Ye[1],_t[Ct+2]=Ye[2],_t[Ct+3]=Ye[3]}function ft(yt,_t,Ct){Le[0]=yt,_t[Ct]=Ye[3],_t[Ct+1]=Ye[2],_t[Ct+2]=Ye[1],_t[Ct+3]=Ye[0]}pe.writeFloatLE=nt?ot:ft,pe.writeFloatBE=nt?ft:ot;function mt(yt,_t){return Ye[0]=yt[_t],Ye[1]=yt[_t+1],Ye[2]=yt[_t+2],Ye[3]=yt[_t+3],Le[0]}function bt(yt,_t){return Ye[3]=yt[_t],Ye[2]=yt[_t+1],Ye[1]=yt[_t+2],Ye[0]=yt[_t+3],Le[0]}pe.readFloatLE=nt?mt:bt,pe.readFloatBE=nt?bt:mt}():function(){function Le(nt,ot,ft,mt){var bt=ot<0?1:0;if(bt&&(ot=-ot),ot===0)nt(1/ot>0?0:2147483648,ft,mt);else if(isNaN(ot))nt(2143289344,ft,mt);else if(ot>34028234663852886e22)nt((bt<<31|2139095040)>>>0,ft,mt);else if(ot<11754943508222875e-54)nt((bt<<31|Math.round(ot/1401298464324817e-60))>>>0,ft,mt);else{var yt=Math.floor(Math.log(ot)/Math.LN2),_t=Math.round(ot*Math.pow(2,-yt)*8388608)&8388607;nt((bt<<31|yt+127<<23|_t)>>>0,ft,mt)}}pe.writeFloatLE=Le.bind(null,u),pe.writeFloatBE=Le.bind(null,t);function Ye(nt,ot,ft){var mt=nt(ot,ft),bt=(mt>>31)*2+1,yt=mt>>>23&255,_t=mt&8388607;return yt===255?_t?NaN:bt*(1/0):yt===0?bt*1401298464324817e-60*_t:bt*Math.pow(2,yt-150)*(_t+8388608)}pe.readFloatLE=Ye.bind(null,N),pe.readFloatBE=Ye.bind(null,me)}(),typeof Float64Array<"u"?function(){var Le=new Float64Array([-0]),Ye=new Uint8Array(Le.buffer),nt=Ye[7]===128;function ot(yt,_t,Ct){Le[0]=yt,_t[Ct]=Ye[0],_t[Ct+1]=Ye[1],_t[Ct+2]=Ye[2],_t[Ct+3]=Ye[3],_t[Ct+4]=Ye[4],_t[Ct+5]=Ye[5],_t[Ct+6]=Ye[6],_t[Ct+7]=Ye[7]}function ft(yt,_t,Ct){Le[0]=yt,_t[Ct]=Ye[7],_t[Ct+1]=Ye[6],_t[Ct+2]=Ye[5],_t[Ct+3]=Ye[4],_t[Ct+4]=Ye[3],_t[Ct+5]=Ye[2],_t[Ct+6]=Ye[1],_t[Ct+7]=Ye[0]}pe.writeDoubleLE=nt?ot:ft,pe.writeDoubleBE=nt?ft:ot;function mt(yt,_t){return Ye[0]=yt[_t],Ye[1]=yt[_t+1],Ye[2]=yt[_t+2],Ye[3]=yt[_t+3],Ye[4]=yt[_t+4],Ye[5]=yt[_t+5],Ye[6]=yt[_t+6],Ye[7]=yt[_t+7],Le[0]}function bt(yt,_t){return Ye[7]=yt[_t],Ye[6]=yt[_t+1],Ye[5]=yt[_t+2],Ye[4]=yt[_t+3],Ye[3]=yt[_t+4],Ye[2]=yt[_t+5],Ye[1]=yt[_t+6],Ye[0]=yt[_t+7],Le[0]}pe.readDoubleLE=nt?mt:bt,pe.readDoubleBE=nt?bt:mt}():function(){function Le(nt,ot,ft,mt,bt,yt){var _t=mt<0?1:0;if(_t&&(mt=-mt),mt===0)nt(0,bt,yt+ot),nt(1/mt>0?0:2147483648,bt,yt+ft);else if(isNaN(mt))nt(0,bt,yt+ot),nt(2146959360,bt,yt+ft);else if(mt>17976931348623157e292)nt(0,bt,yt+ot),nt((_t<<31|2146435072)>>>0,bt,yt+ft);else{var Ct;if(mt<22250738585072014e-324)Ct=mt/5e-324,nt(Ct>>>0,bt,yt+ot),nt((_t<<31|Ct/4294967296)>>>0,bt,yt+ft);else{var Tt=Math.floor(Math.log(mt)/Math.LN2);Tt===1024&&(Tt=1023),Ct=mt*Math.pow(2,-Tt),nt(Ct*4503599627370496>>>0,bt,yt+ot),nt((_t<<31|Tt+1023<<20|Ct*1048576&1048575)>>>0,bt,yt+ft)}}}pe.writeDoubleLE=Le.bind(null,u,0,4),pe.writeDoubleBE=Le.bind(null,t,4,0);function Ye(nt,ot,ft,mt,bt){var yt=nt(mt,bt+ot),_t=nt(mt,bt+ft),Ct=(_t>>31)*2+1,Tt=_t>>>20&2047,At=4294967296*(_t&1048575)+yt;return Tt===2047?At?NaN:Ct*(1/0):Tt===0?Ct*5e-324*At:Ct*Math.pow(2,Tt-1075)*(At+4503599627370496)}pe.readDoubleLE=Ye.bind(null,N,0,4),pe.readDoubleBE=Ye.bind(null,me,4,0)}(),pe}function u(pe,Le,Ye){Le[Ye]=pe&255,Le[Ye+1]=pe>>>8&255,Le[Ye+2]=pe>>>16&255,Le[Ye+3]=pe>>>24}function t(pe,Le,Ye){Le[Ye]=pe>>>24,Le[Ye+1]=pe>>>16&255,Le[Ye+2]=pe>>>8&255,Le[Ye+3]=pe&255}function N(pe,Le){return(pe[Le]|pe[Le+1]<<8|pe[Le+2]<<16|pe[Le+3]<<24)>>>0}function me(pe,Le){return(pe[Le]<<24|pe[Le+1]<<16|pe[Le+2]<<8|pe[Le+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(de){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(de){var u=de;u.length=function(N){for(var me=0,pe=0,Le=0;Le<N.length;++Le)pe=N.charCodeAt(Le),pe<128?me+=1:pe<2048?me+=2:(pe&64512)===55296&&(N.charCodeAt(Le+1)&64512)===56320?(++Le,me+=4):me+=3;return me},u.read=function(N,me,pe){var Le=pe-me;if(Le<1)return"";for(var Ye=null,nt=[],ot=0,ft;me<pe;)ft=N[me++],ft<128?nt[ot++]=ft:ft>191&&ft<224?nt[ot++]=(ft&31)<<6|N[me++]&63:ft>239&&ft<365?(ft=((ft&7)<<18|(N[me++]&63)<<12|(N[me++]&63)<<6|N[me++]&63)-65536,nt[ot++]=55296+(ft>>10),nt[ot++]=56320+(ft&1023)):nt[ot++]=(ft&15)<<12|(N[me++]&63)<<6|N[me++]&63,ot>8191&&((Ye||(Ye=[])).push(String.fromCharCode.apply(String,nt)),ot=0);return Ye?(ot&&Ye.push(String.fromCharCode.apply(String,nt.slice(0,ot))),Ye.join("")):String.fromCharCode.apply(String,nt.slice(0,ot))},u.write=function(N,me,pe){for(var Le=pe,Ye,nt,ot=0;ot<N.length;++ot)Ye=N.charCodeAt(ot),Ye<128?me[pe++]=Ye:Ye<2048?(me[pe++]=Ye>>6|192,me[pe++]=Ye&63|128):(Ye&64512)===55296&&((nt=N.charCodeAt(ot+1))&64512)===56320?(Ye=65536+((Ye&1023)<<10)+(nt&1023),++ot,me[pe++]=Ye>>18|240,me[pe++]=Ye>>12&63|128,me[pe++]=Ye>>6&63|128,me[pe++]=Ye&63|128):(me[pe++]=Ye>>12|224,me[pe++]=Ye>>6&63|128,me[pe++]=Ye&63|128);return pe-Le}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=de;function de(u,t,N){var me=N||8192,pe=me>>>1,Le=null,Ye=me;return function(ot){if(ot<1||ot>pe)return u(ot);Ye+ot>me&&(Le=u(me),Ye=0);var ft=t.call(Le,Ye,Ye+=ot);return Ye&7&&(Ye=(Ye|7)+1),ft}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=u;var de=requireMinimal$1();function u(pe,Le){this.lo=pe>>>0,this.hi=Le>>>0}var t=u.zero=new u(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var N=u.zeroHash="\0\0\0\0\0\0\0\0";u.fromNumber=function(Le){if(Le===0)return t;var Ye=Le<0;Ye&&(Le=-Le);var nt=Le>>>0,ot=(Le-nt)/4294967296>>>0;return Ye&&(ot=~ot>>>0,nt=~nt>>>0,++nt>4294967295&&(nt=0,++ot>4294967295&&(ot=0))),new u(nt,ot)},u.from=function(Le){if(typeof Le=="number")return u.fromNumber(Le);if(de.isString(Le))if(de.Long)Le=de.Long.fromString(Le);else return u.fromNumber(parseInt(Le,10));return Le.low||Le.high?new u(Le.low>>>0,Le.high>>>0):t},u.prototype.toNumber=function(Le){if(!Le&&this.hi>>>31){var Ye=~this.lo+1>>>0,nt=~this.hi>>>0;return Ye||(nt=nt+1>>>0),-(Ye+nt*4294967296)}return this.lo+this.hi*4294967296},u.prototype.toLong=function(Le){return de.Long?new de.Long(this.lo|0,this.hi|0,!!Le):{low:this.lo|0,high:this.hi|0,unsigned:!!Le}};var me=String.prototype.charCodeAt;return u.fromHash=function(Le){return Le===N?t:new u((me.call(Le,0)|me.call(Le,1)<<8|me.call(Le,2)<<16|me.call(Le,3)<<24)>>>0,(me.call(Le,4)|me.call(Le,5)<<8|me.call(Le,6)<<16|me.call(Le,7)<<24)>>>0)},u.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},u.prototype.zzEncode=function(){var Le=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Le)>>>0,this.lo=(this.lo<<1^Le)>>>0,this},u.prototype.zzDecode=function(){var Le=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Le)>>>0,this.hi=(this.hi>>>1^Le)>>>0,this},u.prototype.length=function(){var Le=this.lo,Ye=(this.lo>>>28|this.hi<<4)>>>0,nt=this.hi>>>24;return nt===0?Ye===0?Le<16384?Le<128?1:2:Le<2097152?3:4:Ye<16384?Ye<128?5:6:Ye<2097152?7:8:nt<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(de){var u=de;u.asPromise=requireAspromise(),u.base64=requireBase64(),u.EventEmitter=requireEventemitter(),u.float=requireFloat(),u.inquire=requireInquire(),u.utf8=requireUtf8(),u.pool=requirePool(),u.LongBits=requireLongbits(),u.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),u.global=u.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||function(pe){return typeof pe=="number"&&isFinite(pe)&&Math.floor(pe)===pe},u.isString=function(pe){return typeof pe=="string"||pe instanceof String},u.isObject=function(pe){return pe&&typeof pe=="object"},u.isset=u.isSet=function(pe,Le){var Ye=pe[Le];return Ye!=null&&pe.hasOwnProperty(Le)?typeof Ye!="object"||(Array.isArray(Ye)?Ye.length:Object.keys(Ye).length)>0:!1},u.Buffer=function(){try{var me=u.inquire("buffer").Buffer;return me.prototype.utf8Write?me:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=function(pe){return typeof pe=="number"?u.Buffer?u._Buffer_allocUnsafe(pe):new u.Array(pe):u.Buffer?u._Buffer_from(pe):typeof Uint8Array>"u"?pe:new Uint8Array(pe)},u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=function(pe){return pe?u.LongBits.from(pe).toHash():u.LongBits.zeroHash},u.longFromHash=function(pe,Le){var Ye=u.LongBits.fromHash(pe);return u.Long?u.Long.fromBits(Ye.lo,Ye.hi,Le):Ye.toNumber(!!Le)};function t(me,pe,Le){for(var Ye=Object.keys(pe),nt=0;nt<Ye.length;++nt)(me[Ye[nt]]===void 0||!Le)&&(me[Ye[nt]]=pe[Ye[nt]]);return me}u.merge=t,u.lcFirst=function(pe){return pe.charAt(0).toLowerCase()+pe.substring(1)};function N(me){function pe(Le,Ye){if(!(this instanceof pe))return new pe(Le,Ye);Object.defineProperty(this,"message",{get:function(){return Le}}),Error.captureStackTrace?Error.captureStackTrace(this,pe):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Ye&&t(this,Ye)}return pe.prototype=Object.create(Error.prototype,{constructor:{value:pe,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return me},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),pe}u.newError=N,u.ProtocolError=N("ProtocolError"),u.oneOfGetter=function(pe){for(var Le={},Ye=0;Ye<pe.length;++Ye)Le[pe[Ye]]=1;return function(){for(var nt=Object.keys(this),ot=nt.length-1;ot>-1;--ot)if(Le[nt[ot]]===1&&this[nt[ot]]!==void 0&&this[nt[ot]]!==null)return nt[ot]}},u.oneOfSetter=function(pe){return function(Le){for(var Ye=0;Ye<pe.length;++Ye)pe[Ye]!==Le&&delete this[pe[Ye]]}},u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var me=u.Buffer;if(!me){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=me.from!==Uint8Array.from&&me.from||function(Le,Ye){return new me(Le,Ye)},u._Buffer_allocUnsafe=me.allocUnsafe||function(Le){return new me(Le)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=nt;var de=requireMinimal$1(),u,t=de.LongBits,N=de.base64,me=de.utf8;function pe(Tt,At,It){this.fn=Tt,this.len=At,this.next=void 0,this.val=It}function Le(){}function Ye(Tt){this.head=Tt.head,this.tail=Tt.tail,this.len=Tt.len,this.next=Tt.states}function nt(){this.len=0,this.head=new pe(Le,0,0),this.tail=this.head,this.states=null}var ot=function(){return de.Buffer?function(){return(nt.create=function(){return new u})()}:function(){return new nt}};nt.create=ot(),nt.alloc=function(At){return new de.Array(At)},de.Array!==Array&&(nt.alloc=de.pool(nt.alloc,de.Array.prototype.subarray)),nt.prototype._push=function(At,It,Pt){return this.tail=this.tail.next=new pe(At,It,Pt),this.len+=It,this};function ft(Tt,At,It){At[It]=Tt&255}function mt(Tt,At,It){for(;Tt>127;)At[It++]=Tt&127|128,Tt>>>=7;At[It]=Tt}function bt(Tt,At){this.len=Tt,this.next=void 0,this.val=At}bt.prototype=Object.create(pe.prototype),bt.prototype.fn=mt,nt.prototype.uint32=function(At){return this.len+=(this.tail=this.tail.next=new bt((At=At>>>0)<128?1:At<16384?2:At<2097152?3:At<268435456?4:5,At)).len,this},nt.prototype.int32=function(At){return At<0?this._push(yt,10,t.fromNumber(At)):this.uint32(At)},nt.prototype.sint32=function(At){return this.uint32((At<<1^At>>31)>>>0)};function yt(Tt,At,It){for(;Tt.hi;)At[It++]=Tt.lo&127|128,Tt.lo=(Tt.lo>>>7|Tt.hi<<25)>>>0,Tt.hi>>>=7;for(;Tt.lo>127;)At[It++]=Tt.lo&127|128,Tt.lo=Tt.lo>>>7;At[It++]=Tt.lo}nt.prototype.uint64=function(At){var It=t.from(At);return this._push(yt,It.length(),It)},nt.prototype.int64=nt.prototype.uint64,nt.prototype.sint64=function(At){var It=t.from(At).zzEncode();return this._push(yt,It.length(),It)},nt.prototype.bool=function(At){return this._push(ft,1,At?1:0)};function _t(Tt,At,It){At[It]=Tt&255,At[It+1]=Tt>>>8&255,At[It+2]=Tt>>>16&255,At[It+3]=Tt>>>24}nt.prototype.fixed32=function(At){return this._push(_t,4,At>>>0)},nt.prototype.sfixed32=nt.prototype.fixed32,nt.prototype.fixed64=function(At){var It=t.from(At);return this._push(_t,4,It.lo)._push(_t,4,It.hi)},nt.prototype.sfixed64=nt.prototype.fixed64,nt.prototype.float=function(At){return this._push(de.float.writeFloatLE,4,At)},nt.prototype.double=function(At){return this._push(de.float.writeDoubleLE,8,At)};var Ct=de.Array.prototype.set?function(At,It,Pt){It.set(At,Pt)}:function(At,It,Pt){for(var Bt=0;Bt<At.length;++Bt)It[Pt+Bt]=At[Bt]};return nt.prototype.bytes=function(At){var It=At.length>>>0;if(!It)return this._push(ft,1,0);if(de.isString(At)){var Pt=nt.alloc(It=N.length(At));N.decode(At,Pt,0),At=Pt}return this.uint32(It)._push(Ct,It,At)},nt.prototype.string=function(At){var It=me.length(At);return It?this.uint32(It)._push(me.write,It,At):this._push(ft,1,0)},nt.prototype.fork=function(){return this.states=new Ye(this),this.head=this.tail=new pe(Le,0,0),this.len=0,this},nt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new pe(Le,0,0),this.len=0),this},nt.prototype.ldelim=function(){var At=this.head,It=this.tail,Pt=this.len;return this.reset().uint32(Pt),Pt&&(this.tail.next=At.next,this.tail=It,this.len+=Pt),this},nt.prototype.finish=function(){for(var At=this.head.next,It=this.constructor.alloc(this.len),Pt=0;At;)At.fn(At.val,It,Pt),Pt+=At.len,At=At.next;return It},nt._configure=function(Tt){u=Tt,nt.create=ot(),u._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=t;var de=requireWriter();(t.prototype=Object.create(de.prototype)).constructor=t;var u=requireMinimal$1();function t(){de.call(this)}t._configure=function(){t.alloc=u._Buffer_allocUnsafe,t.writeBytesBuffer=u.Buffer&&u.Buffer.prototype instanceof Uint8Array&&u.Buffer.prototype.set.name==="set"?function(pe,Le,Ye){Le.set(pe,Ye)}:function(pe,Le,Ye){if(pe.copy)pe.copy(Le,Ye,0,pe.length);else for(var nt=0;nt<pe.length;)Le[Ye++]=pe[nt++]}},t.prototype.bytes=function(pe){u.isString(pe)&&(pe=u._Buffer_from(pe,"base64"));var Le=pe.length>>>0;return this.uint32(Le),Le&&this._push(t.writeBytesBuffer,Le,pe),this};function N(me,pe,Le){me.length<40?u.utf8.write(me,pe,Le):pe.utf8Write?pe.utf8Write(me,Le):pe.write(me,Le)}return t.prototype.string=function(pe){var Le=u.Buffer.byteLength(pe);return this.uint32(Le),Le&&this._push(N,Le,pe),this},t._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=pe;var de=requireMinimal$1(),u,t=de.LongBits,N=de.utf8;function me(mt,bt){return RangeError("index out of range: "+mt.pos+" + "+(bt||1)+" > "+mt.len)}function pe(mt){this.buf=mt,this.pos=0,this.len=mt.length}var Le=typeof Uint8Array<"u"?function(bt){if(bt instanceof Uint8Array||Array.isArray(bt))return new pe(bt);throw Error("illegal buffer")}:function(bt){if(Array.isArray(bt))return new pe(bt);throw Error("illegal buffer")},Ye=function(){return de.Buffer?function(yt){return(pe.create=function(Ct){return de.Buffer.isBuffer(Ct)?new u(Ct):Le(Ct)})(yt)}:Le};pe.create=Ye(),pe.prototype._slice=de.Array.prototype.subarray||de.Array.prototype.slice,pe.prototype.uint32=function(){var bt=4294967295;return function(){if(bt=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(bt=(bt|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(bt=(bt|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return bt;if((this.pos+=5)>this.len)throw this.pos=this.len,me(this,10);return bt}}(),pe.prototype.int32=function(){return this.uint32()|0},pe.prototype.sint32=function(){var bt=this.uint32();return bt>>>1^-(bt&1)|0};function nt(){var mt=new t(0,0),bt=0;if(this.len-this.pos>4){for(;bt<4;++bt)if(mt.lo=(mt.lo|(this.buf[this.pos]&127)<<bt*7)>>>0,this.buf[this.pos++]<128)return mt;if(mt.lo=(mt.lo|(this.buf[this.pos]&127)<<28)>>>0,mt.hi=(mt.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return mt;bt=0}else{for(;bt<3;++bt){if(this.pos>=this.len)throw me(this);if(mt.lo=(mt.lo|(this.buf[this.pos]&127)<<bt*7)>>>0,this.buf[this.pos++]<128)return mt}return mt.lo=(mt.lo|(this.buf[this.pos++]&127)<<bt*7)>>>0,mt}if(this.len-this.pos>4){for(;bt<5;++bt)if(mt.hi=(mt.hi|(this.buf[this.pos]&127)<<bt*7+3)>>>0,this.buf[this.pos++]<128)return mt}else for(;bt<5;++bt){if(this.pos>=this.len)throw me(this);if(mt.hi=(mt.hi|(this.buf[this.pos]&127)<<bt*7+3)>>>0,this.buf[this.pos++]<128)return mt}throw Error("invalid varint encoding")}pe.prototype.bool=function(){return this.uint32()!==0};function ot(mt,bt){return(mt[bt-4]|mt[bt-3]<<8|mt[bt-2]<<16|mt[bt-1]<<24)>>>0}pe.prototype.fixed32=function(){if(this.pos+4>this.len)throw me(this,4);return ot(this.buf,this.pos+=4)},pe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw me(this,4);return ot(this.buf,this.pos+=4)|0};function ft(){if(this.pos+8>this.len)throw me(this,8);return new t(ot(this.buf,this.pos+=4),ot(this.buf,this.pos+=4))}return pe.prototype.float=function(){if(this.pos+4>this.len)throw me(this,4);var bt=de.float.readFloatLE(this.buf,this.pos);return this.pos+=4,bt},pe.prototype.double=function(){if(this.pos+8>this.len)throw me(this,4);var bt=de.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,bt},pe.prototype.bytes=function(){var bt=this.uint32(),yt=this.pos,_t=this.pos+bt;if(_t>this.len)throw me(this,bt);if(this.pos+=bt,Array.isArray(this.buf))return this.buf.slice(yt,_t);if(yt===_t){var Ct=de.Buffer;return Ct?Ct.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,yt,_t)},pe.prototype.string=function(){var bt=this.bytes();return N.read(bt,0,bt.length)},pe.prototype.skip=function(bt){if(typeof bt=="number"){if(this.pos+bt>this.len)throw me(this,bt);this.pos+=bt}else do if(this.pos>=this.len)throw me(this);while(this.buf[this.pos++]&128);return this},pe.prototype.skipType=function(mt){switch(mt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(mt=this.uint32()&7)!==4;)this.skipType(mt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+mt+" at offset "+this.pos)}return this},pe._configure=function(mt){u=mt,pe.create=Ye(),u._configure();var bt=de.Long?"toLong":"toNumber";de.merge(pe.prototype,{int64:function(){return nt.call(this)[bt](!1)},uint64:function(){return nt.call(this)[bt](!0)},sint64:function(){return nt.call(this).zzDecode()[bt](!1)},fixed64:function(){return ft.call(this)[bt](!0)},sfixed64:function(){return ft.call(this)[bt](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=t;var de=requireReader();(t.prototype=Object.create(de.prototype)).constructor=t;var u=requireMinimal$1();function t(N){de.call(this,N)}return t._configure=function(){u.Buffer&&(t.prototype._slice=u.Buffer.prototype.slice)},t.prototype.string=function(){var me=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+me,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+me,this.len))},t._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=u;var de=requireMinimal$1();(u.prototype=Object.create(de.EventEmitter.prototype)).constructor=u;function u(t,N,me){if(typeof t!="function")throw TypeError("rpcImpl must be a function");de.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!N,this.responseDelimited=!!me}return u.prototype.rpcCall=function t(N,me,pe,Le,Ye){if(!Le)throw TypeError("request must be specified");var nt=this;if(!Ye)return de.asPromise(t,nt,N,me,pe,Le);if(!nt.rpcImpl){setTimeout(function(){Ye(Error("already ended"))},0);return}try{return nt.rpcImpl(N,me[nt.requestDelimited?"encodeDelimited":"encode"](Le).finish(),function(ft,mt){if(ft)return nt.emit("error",ft,N),Ye(ft);if(mt===null){nt.end(!0);return}if(!(mt instanceof pe))try{mt=pe[nt.responseDelimited?"decodeDelimited":"decode"](mt)}catch(bt){return nt.emit("error",bt,N),Ye(bt)}return nt.emit("data",mt,N),Ye(null,mt)})}catch(ot){nt.emit("error",ot,N),setTimeout(function(){Ye(ot)},0);return}},u.prototype.end=function(N){return this.rpcImpl&&(N||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(de){var u=de;u.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(de){var u=de;u.build="minimal",u.Writer=requireWriter(),u.BufferWriter=requireWriter_buffer(),u.Reader=requireReader(),u.BufferReader=requireReader_buffer(),u.util=requireMinimal$1(),u.rpc=requireRpc(),u.roots=requireRoots(),u.configure=t;function t(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}t()}(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}requireMinimal();const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(de=>{PACKET_TYPES_REVERSE[PACKET_TYPES[de]]=de});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=de=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(de):de&&de.buffer instanceof ArrayBuffer,encodePacket=({type:de,data:u},t,N)=>withNativeBlob$1&&u instanceof Blob?t?N(u):encodeBlobAsBase64(u,N):withNativeArrayBuffer$2&&(u instanceof ArrayBuffer||isView$1(u))?t?N(u):encodeBlobAsBase64(new Blob([u]),N):N(PACKET_TYPES[de]+(u||"")),encodeBlobAsBase64=(de,u)=>{const t=new FileReader;return t.onload=function(){const N=t.result.split(",")[1];u("b"+(N||""))},t.readAsDataURL(de)};function toArray(de){return de instanceof Uint8Array?de:de instanceof ArrayBuffer?new Uint8Array(de):new Uint8Array(de.buffer,de.byteOffset,de.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(de,u){if(withNativeBlob$1&&de.data instanceof Blob)return de.data.arrayBuffer().then(toArray).then(u);if(withNativeArrayBuffer$2&&(de.data instanceof ArrayBuffer||isView$1(de.data)))return u(toArray(de.data));encodePacket(de,!1,t=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),u(TEXT_ENCODER.encode(t))})}const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let de=0;de<chars.length;de++)lookup$1[chars.charCodeAt(de)]=de;const decode$1=de=>{let u=de.length*.75,t=de.length,N,me=0,pe,Le,Ye,nt;de[de.length-1]==="="&&(u--,de[de.length-2]==="="&&u--);const ot=new ArrayBuffer(u),ft=new Uint8Array(ot);for(N=0;N<t;N+=4)pe=lookup$1[de.charCodeAt(N)],Le=lookup$1[de.charCodeAt(N+1)],Ye=lookup$1[de.charCodeAt(N+2)],nt=lookup$1[de.charCodeAt(N+3)],ft[me++]=pe<<2|Le>>4,ft[me++]=(Le&15)<<4|Ye>>2,ft[me++]=(Ye&3)<<6|nt&63;return ot},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(de,u)=>{if(typeof de!="string")return{type:"message",data:mapBinary(de,u)};const t=de.charAt(0);return t==="b"?{type:"message",data:decodeBase64Packet(de.substring(1),u)}:PACKET_TYPES_REVERSE[t]?de.length>1?{type:PACKET_TYPES_REVERSE[t],data:de.substring(1)}:{type:PACKET_TYPES_REVERSE[t]}:ERROR_PACKET},decodeBase64Packet=(de,u)=>{if(withNativeArrayBuffer$1){const t=decode$1(de);return mapBinary(t,u)}else return{base64:!0,data:de}},mapBinary=(de,u)=>{switch(u){case"blob":return de instanceof Blob?de:new Blob([de]);case"arraybuffer":default:return de instanceof ArrayBuffer?de:de.buffer}},SEPARATOR="",encodePayload=(de,u)=>{const t=de.length,N=new Array(t);let me=0;de.forEach((pe,Le)=>{encodePacket(pe,!1,Ye=>{N[Le]=Ye,++me===t&&u(N.join(SEPARATOR))})})},decodePayload=(de,u)=>{const t=de.split(SEPARATOR),N=[];for(let me=0;me<t.length;me++){const pe=decodePacket(t[me],u);if(N.push(pe),pe.type==="error")break}return N};function createPacketEncoderStream(){return new TransformStream({transform(de,u){encodePacketToBinary(de,t=>{const N=t.length;let me;if(N<126)me=new Uint8Array(1),new DataView(me.buffer).setUint8(0,N);else if(N<65536){me=new Uint8Array(3);const pe=new DataView(me.buffer);pe.setUint8(0,126),pe.setUint16(1,N)}else{me=new Uint8Array(9);const pe=new DataView(me.buffer);pe.setUint8(0,127),pe.setBigUint64(1,BigInt(N))}de.data&&typeof de.data!="string"&&(me[0]|=128),u.enqueue(me),u.enqueue(t)})}})}let TEXT_DECODER;function totalLength(de){return de.reduce((u,t)=>u+t.length,0)}function concatChunks(de,u){if(de[0].length===u)return de.shift();const t=new Uint8Array(u);let N=0;for(let me=0;me<u;me++)t[me]=de[0][N++],N===de[0].length&&(de.shift(),N=0);return de.length&&N<de[0].length&&(de[0]=de[0].slice(N)),t}function createPacketDecoderStream(de,u){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const t=[];let N=0,me=-1,pe=!1;return new TransformStream({transform(Le,Ye){for(t.push(Le);;){if(N===0){if(totalLength(t)<1)break;const nt=concatChunks(t,1);pe=(nt[0]&128)===128,me=nt[0]&127,me<126?N=3:me===126?N=1:N=2}else if(N===1){if(totalLength(t)<2)break;const nt=concatChunks(t,2);me=new DataView(nt.buffer,nt.byteOffset,nt.length).getUint16(0),N=3}else if(N===2){if(totalLength(t)<8)break;const nt=concatChunks(t,8),ot=new DataView(nt.buffer,nt.byteOffset,nt.length),ft=ot.getUint32(0);if(ft>Math.pow(2,21)-1){Ye.enqueue(ERROR_PACKET);break}me=ft*Math.pow(2,32)+ot.getUint32(4),N=3}else{if(totalLength(t)<me)break;const nt=concatChunks(t,me);Ye.enqueue(decodePacket(pe?nt:TEXT_DECODER.decode(nt),u)),N=0}if(me===0||me>de){Ye.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(de){if(de)return mixin(de)}function mixin(de){for(var u in Emitter.prototype)de[u]=Emitter.prototype[u];return de}Emitter.prototype.on=Emitter.prototype.addEventListener=function(de,u){return this._callbacks=this._callbacks||{},(this._callbacks["$"+de]=this._callbacks["$"+de]||[]).push(u),this};Emitter.prototype.once=function(de,u){function t(){this.off(de,t),u.apply(this,arguments)}return t.fn=u,this.on(de,t),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(de,u){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+de];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+de],this;for(var N,me=0;me<t.length;me++)if(N=t[me],N===u||N.fn===u){t.splice(me,1);break}return t.length===0&&delete this._callbacks["$"+de],this};Emitter.prototype.emit=function(de){this._callbacks=this._callbacks||{};for(var u=new Array(arguments.length-1),t=this._callbacks["$"+de],N=1;N<arguments.length;N++)u[N-1]=arguments[N];if(t){t=t.slice(0);for(var N=0,me=t.length;N<me;++N)t[N].apply(this,u)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(de){return this._callbacks=this._callbacks||{},this._callbacks["$"+de]||[]};Emitter.prototype.hasListeners=function(de){return!!this.listeners(de).length};const globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function pick(de,...u){return u.reduce((t,N)=>(de.hasOwnProperty(N)&&(t[N]=de[N]),t),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(de,u){u.useNativeTimers?(de.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),de.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(de.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),de.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(de){return typeof de=="string"?utf8Length(de):Math.ceil((de.byteLength||de.size)*BASE64_OVERHEAD)}function utf8Length(de){let u=0,t=0;for(let N=0,me=de.length;N<me;N++)u=de.charCodeAt(N),u<128?t+=1:u<2048?t+=2:u<55296||u>=57344?t+=3:(N++,t+=4);return t}function encode$1(de){let u="";for(let t in de)de.hasOwnProperty(t)&&(u.length&&(u+="&"),u+=encodeURIComponent(t)+"="+encodeURIComponent(de[t]));return u}function decode(de){let u={},t=de.split("&");for(let N=0,me=t.length;N<me;N++){let pe=t[N].split("=");u[decodeURIComponent(pe[0])]=decodeURIComponent(pe[1])}return u}class TransportError extends Error{constructor(u,t,N){super(u),this.description=t,this.context=N,this.type="TransportError"}}class Transport extends Emitter{constructor(u){super(),this.writable=!1,installTimerFunctions(this,u),this.opts=u,this.query=u.query,this.socket=u.socket}onError(u,t,N){return super.emitReserved("error",new TransportError(u,t,N)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(u){this.readyState==="open"&&this.write(u)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(u){const t=decodePacket(u,this.socket.binaryType);this.onPacket(t)}onPacket(u){super.emitReserved("packet",u)}onClose(u){this.readyState="closed",super.emitReserved("close",u)}pause(u){}createUri(u,t={}){return u+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const u=this.opts.hostname;return u.indexOf(":")===-1?u:"["+u+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(u){const t=encode$1(u);return t.length?"?"+t:""}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let seed=0,i=0,prev;function encode(de){let u="";do u=alphabet[de%length]+u,de=Math.floor(de/length);while(de>0);return u}function yeast(){const de=encode(+new Date);return de!==prev?(seed=0,prev=de):de+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(de){}const hasCORS=value;function XHR(de){const u=de.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!u||hasCORS))return new XMLHttpRequest}catch{}if(!u)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function createCookieJar(){}function empty(){}const hasXHR2=function(){return new XHR({xdomain:!1}).responseType!=null}();class Polling extends Transport{constructor(u){if(super(u),this.polling=!1,typeof location<"u"){const N=location.protocol==="https:";let me=location.port;me||(me=N?"443":"80"),this.xd=typeof location<"u"&&u.hostname!==location.hostname||me!==u.port}const t=u&&u.forceBase64;this.supportsBinary=hasXHR2&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(u){this.readyState="pausing";const t=()=>{this.readyState="paused",u()};if(this.polling||!this.writable){let N=0;this.polling&&(N++,this.once("pollComplete",function(){--N||t()})),this.writable||(N++,this.once("drain",function(){--N||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(u){const t=N=>{if(this.readyState==="opening"&&N.type==="open"&&this.onOpen(),N.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(N)};decodePayload(u,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const u=()=>{this.write([{type:"close"}])};this.readyState==="open"?u():this.once("open",u)}write(u){this.writable=!1,encodePayload(u,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const u=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=yeast()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(u,t)}request(u={}){return Object.assign(u,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Request$1(this.uri(),u)}doWrite(u,t){const N=this.request({method:"POST",data:u});N.on("success",t),N.on("error",(me,pe)=>{this.onError("xhr post error",me,pe)})}doPoll(){const u=this.request();u.on("data",this.onData.bind(this)),u.on("error",(t,N)=>{this.onError("xhr poll error",t,N)}),this.pollXhr=u}}let Request$1=class ol extends Emitter{constructor(u,t){super(),installTimerFunctions(this,t),this.opts=t,this.method=t.method||"GET",this.uri=u,this.data=t.data!==void 0?t.data:null,this.create()}create(){var u;const t=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const N=this.xhr=new XHR(t);try{N.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){N.setDisableHeaderCheck&&N.setDisableHeaderCheck(!0);for(let me in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(me)&&N.setRequestHeader(me,this.opts.extraHeaders[me])}}catch{}if(this.method==="POST")try{N.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{N.setRequestHeader("Accept","*/*")}catch{}(u=this.opts.cookieJar)===null||u===void 0||u.addCookies(N),"withCredentials"in N&&(N.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(N.timeout=this.opts.requestTimeout),N.onreadystatechange=()=>{var me;N.readyState===3&&((me=this.opts.cookieJar)===null||me===void 0||me.parseCookies(N)),N.readyState===4&&(N.status===200||N.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof N.status=="number"?N.status:0)},0))},N.send(this.data)}catch(me){this.setTimeoutFn(()=>{this.onError(me)},0);return}typeof document<"u"&&(this.index=ol.requestsCount++,ol.requests[this.index]=this)}onError(u){this.emitReserved("error",u,this.xhr),this.cleanup(!0)}cleanup(u){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=empty,u)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ol.requests[this.index],this.xhr=null}}onLoad(){const u=this.xhr.responseText;u!==null&&(this.emitReserved("data",u),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Request$1.requestsCount=0;Request$1.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const de="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(de,unloadHandler,!1)}}function unloadHandler(){for(let de in Request$1.requests)Request$1.requests.hasOwnProperty(de)&&Request$1.requests[de].abort()}const nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?u=>Promise.resolve().then(u):(u,t)=>t(u,0),WebSocket=globalThisShim.WebSocket||globalThisShim.MozWebSocket,usingBrowserWebSocket=!0,defaultBinaryType="arraybuffer",isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class WS extends Transport{constructor(u){super(u),this.supportsBinary=!u.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const u=this.uri(),t=this.opts.protocols,N=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(N.headers=this.opts.extraHeaders);try{this.ws=usingBrowserWebSocket&&!isReactNative?t?new WebSocket(u,t):new WebSocket(u):new WebSocket(u,t,N)}catch(me){return this.emitReserved("error",me)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=u=>this.onClose({description:"websocket connection closed",context:u}),this.ws.onmessage=u=>this.onData(u.data),this.ws.onerror=u=>this.onError("websocket error",u)}write(u){this.writable=!1;for(let t=0;t<u.length;t++){const N=u[t],me=t===u.length-1;encodePacket(N,this.supportsBinary,pe=>{const Le={};try{usingBrowserWebSocket&&this.ws.send(pe)}catch{}me&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const u=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=yeast()),this.supportsBinary||(t.b64=1),this.createUri(u,t)}check(){return!!WebSocket}}class WT extends Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(u=>{this.onError("webtransport error",u)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(u=>{const t=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),N=u.readable.pipeThrough(t).getReader(),me=createPacketEncoderStream();me.readable.pipeTo(u.writable),this.writer=me.writable.getWriter();const pe=()=>{N.read().then(({done:Ye,value:nt})=>{Ye||(this.onPacket(nt),pe())}).catch(Ye=>{})};pe();const Le={type:"open"};this.query.sid&&(Le.data=`{"sid":"${this.query.sid}"}`),this.writer.write(Le).then(()=>this.onOpen())})}))}write(u){this.writable=!1;for(let t=0;t<u.length;t++){const N=u[t],me=t===u.length-1;this.writer.write(N).then(()=>{me&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var u;(u=this.transport)===null||u===void 0||u.close()}}const transports={websocket:WS,webtransport:WT,polling:Polling},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(de){if(de.length>2e3)throw"URI too long";const u=de,t=de.indexOf("["),N=de.indexOf("]");t!=-1&&N!=-1&&(de=de.substring(0,t)+de.substring(t,N).replace(/:/g,";")+de.substring(N,de.length));let me=re.exec(de||""),pe={},Le=14;for(;Le--;)pe[parts[Le]]=me[Le]||"";return t!=-1&&N!=-1&&(pe.source=u,pe.host=pe.host.substring(1,pe.host.length-1).replace(/;/g,":"),pe.authority=pe.authority.replace("[","").replace("]","").replace(/;/g,":"),pe.ipv6uri=!0),pe.pathNames=pathNames(pe,pe.path),pe.queryKey=queryKey(pe,pe.query),pe}function pathNames(de,u){const t=/\/{2,9}/g,N=u.replace(t,"/").split("/");return(u.slice(0,1)=="/"||u.length===0)&&N.splice(0,1),u.slice(-1)=="/"&&N.splice(N.length-1,1),N}function queryKey(de,u){const t={};return u.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(N,me,pe){me&&(t[me]=pe)}),t}let Socket$1=class Yr extends Emitter{constructor(u,t={}){super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],u&&typeof u=="object"&&(t=u,u=null),u?(u=parse(u),t.hostname=u.host,t.secure=u.protocol==="https"||u.protocol==="wss",t.port=u.port,u.query&&(t.query=u.query)):t.host&&(t.hostname=parse(t.host).host),installTimerFunctions(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(u){const t=Object.assign({},this.opts.query);t.EIO=protocol$1,t.transport=u,this.id&&(t.sid=this.id);const N=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[u]);return new transports[u](N)}open(){let u;if(this.opts.rememberUpgrade&&Yr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)u="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else u=this.transports[0];this.readyState="opening";try{u=this.createTransport(u)}catch{this.transports.shift(),this.open();return}u.open(),this.setTransport(u)}setTransport(u){this.transport&&this.transport.removeAllListeners(),this.transport=u,u.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(u){let t=this.createTransport(u),N=!1;Yr.priorWebsocketSuccess=!1;const me=()=>{N||(t.send([{type:"ping",data:"probe"}]),t.once("packet",mt=>{if(!N)if(mt.type==="pong"&&mt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Yr.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{N||this.readyState!=="closed"&&(ft(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const bt=new Error("probe error");bt.transport=t.name,this.emitReserved("upgradeError",bt)}}))};function pe(){N||(N=!0,ft(),t.close(),t=null)}const Le=mt=>{const bt=new Error("probe error: "+mt);bt.transport=t.name,pe(),this.emitReserved("upgradeError",bt)};function Ye(){Le("transport closed")}function nt(){Le("socket closed")}function ot(mt){t&&mt.name!==t.name&&pe()}const ft=()=>{t.removeListener("open",me),t.removeListener("error",Le),t.removeListener("close",Ye),this.off("close",nt),this.off("upgrading",ot)};t.once("open",me),t.once("error",Le),t.once("close",Ye),this.once("close",nt),this.once("upgrading",ot),this.upgrades.indexOf("webtransport")!==-1&&u!=="webtransport"?this.setTimeoutFn(()=>{N||t.open()},200):t.open()}onOpen(){if(this.readyState="open",Yr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let u=0;const t=this.upgrades.length;for(;u<t;u++)this.probe(this.upgrades[u])}}onPacket(u){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",u),this.emitReserved("heartbeat"),this.resetPingTimeout(),u.type){case"open":this.onHandshake(JSON.parse(u.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=u.data,this.onError(t);break;case"message":this.emitReserved("data",u.data),this.emitReserved("message",u.data);break}}onHandshake(u){this.emitReserved("handshake",u),this.id=u.sid,this.transport.query.sid=u.sid,this.upgrades=this.filterUpgrades(u.upgrades),this.pingInterval=u.pingInterval,this.pingTimeout=u.pingTimeout,this.maxPayload=u.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const u=this.getWritablePackets();this.transport.send(u),this.prevBufferLen=u.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let N=0;N<this.writeBuffer.length;N++){const me=this.writeBuffer[N].data;if(me&&(t+=byteLength(me)),N>0&&t>this.maxPayload)return this.writeBuffer.slice(0,N);t+=2}return this.writeBuffer}write(u,t,N){return this.sendPacket("message",u,t,N),this}send(u,t,N){return this.sendPacket("message",u,t,N),this}sendPacket(u,t,N,me){if(typeof t=="function"&&(me=t,t=void 0),typeof N=="function"&&(me=N,N=null),this.readyState==="closing"||this.readyState==="closed")return;N=N||{},N.compress=N.compress!==!1;const pe={type:u,data:t,options:N};this.emitReserved("packetCreate",pe),this.writeBuffer.push(pe),me&&this.once("flush",me),this.flush()}close(){const u=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),u()},N=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?N():u()}):this.upgrading?N():u()),this}onError(u){Yr.priorWebsocketSuccess=!1,this.emitReserved("error",u),this.onClose("transport error",u)}onClose(u,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",u,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(u){const t=[];let N=0;const me=u.length;for(;N<me;N++)~this.transports.indexOf(u[N])&&t.push(u[N]);return t}};Socket$1.protocol=protocol$1;function url(de,u="",t){let N=de;t=t||typeof location<"u"&&location,de==null&&(de=t.protocol+"//"+t.host),typeof de=="string"&&(de.charAt(0)==="/"&&(de.charAt(1)==="/"?de=t.protocol+de:de=t.host+de),/^(https?|wss?):\/\//.test(de)||(typeof t<"u"?de=t.protocol+"//"+de:de="https://"+de),N=parse(de)),N.port||(/^(http|ws)$/.test(N.protocol)?N.port="80":/^(http|ws)s$/.test(N.protocol)&&(N.port="443")),N.path=N.path||"/";const pe=N.host.indexOf(":")!==-1?"["+N.host+"]":N.host;return N.id=N.protocol+"://"+pe+":"+N.port+u,N.href=N.protocol+"://"+pe+(t&&t.port===N.port?"":":"+N.port),N}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=de=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(de):de.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString.call(File)==="[object FileConstructor]";function isBinary(de){return withNativeArrayBuffer&&(de instanceof ArrayBuffer||isView(de))||withNativeBlob&&de instanceof Blob||withNativeFile&&de instanceof File}function hasBinary(de,u){if(!de||typeof de!="object")return!1;if(Array.isArray(de)){for(let t=0,N=de.length;t<N;t++)if(hasBinary(de[t]))return!0;return!1}if(isBinary(de))return!0;if(de.toJSON&&typeof de.toJSON=="function"&&arguments.length===1)return hasBinary(de.toJSON(),!0);for(const t in de)if(Object.prototype.hasOwnProperty.call(de,t)&&hasBinary(de[t]))return!0;return!1}function deconstructPacket(de){const u=[],t=de.data,N=de;return N.data=_deconstructPacket(t,u),N.attachments=u.length,{packet:N,buffers:u}}function _deconstructPacket(de,u){if(!de)return de;if(isBinary(de)){const t={_placeholder:!0,num:u.length};return u.push(de),t}else if(Array.isArray(de)){const t=new Array(de.length);for(let N=0;N<de.length;N++)t[N]=_deconstructPacket(de[N],u);return t}else if(typeof de=="object"&&!(de instanceof Date)){const t={};for(const N in de)Object.prototype.hasOwnProperty.call(de,N)&&(t[N]=_deconstructPacket(de[N],u));return t}return de}function reconstructPacket(de,u){return de.data=_reconstructPacket(de.data,u),delete de.attachments,de}function _reconstructPacket(de,u){if(!de)return de;if(de&&de._placeholder===!0){if(typeof de.num=="number"&&de.num>=0&&de.num<u.length)return u[de.num];throw new Error("illegal attachments")}else if(Array.isArray(de))for(let t=0;t<de.length;t++)de[t]=_reconstructPacket(de[t],u);else if(typeof de=="object")for(const t in de)Object.prototype.hasOwnProperty.call(de,t)&&(de[t]=_reconstructPacket(de[t],u));return de}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType;(function(de){de[de.CONNECT=0]="CONNECT",de[de.DISCONNECT=1]="DISCONNECT",de[de.EVENT=2]="EVENT",de[de.ACK=3]="ACK",de[de.CONNECT_ERROR=4]="CONNECT_ERROR",de[de.BINARY_EVENT=5]="BINARY_EVENT",de[de.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));let Encoder$1=class{constructor(u){this.replacer=u}encode(u){return(u.type===PacketType.EVENT||u.type===PacketType.ACK)&&hasBinary(u)?this.encodeAsBinary({type:u.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:u.nsp,data:u.data,id:u.id}):[this.encodeAsString(u)]}encodeAsString(u){let t=""+u.type;return(u.type===PacketType.BINARY_EVENT||u.type===PacketType.BINARY_ACK)&&(t+=u.attachments+"-"),u.nsp&&u.nsp!=="/"&&(t+=u.nsp+","),u.id!=null&&(t+=u.id),u.data!=null&&(t+=JSON.stringify(u.data,this.replacer)),t}encodeAsBinary(u){const t=deconstructPacket(u),N=this.encodeAsString(t.packet),me=t.buffers;return me.unshift(N),me}};function isObject(de){return Object.prototype.toString.call(de)==="[object Object]"}let Decoder$1=class bm extends Emitter{constructor(u){super(),this.reviver=u}add(u){let t;if(typeof u=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(u);const N=t.type===PacketType.BINARY_EVENT;N||t.type===PacketType.BINARY_ACK?(t.type=N?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(isBinary(u)||u.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(u),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+u)}decodeString(u){let t=0;const N={type:Number(u.charAt(0))};if(PacketType[N.type]===void 0)throw new Error("unknown packet type "+N.type);if(N.type===PacketType.BINARY_EVENT||N.type===PacketType.BINARY_ACK){const pe=t+1;for(;u.charAt(++t)!=="-"&&t!=u.length;);const Le=u.substring(pe,t);if(Le!=Number(Le)||u.charAt(t)!=="-")throw new Error("Illegal attachments");N.attachments=Number(Le)}if(u.charAt(t+1)==="/"){const pe=t+1;for(;++t&&!(u.charAt(t)===","||t===u.length););N.nsp=u.substring(pe,t)}else N.nsp="/";const me=u.charAt(t+1);if(me!==""&&Number(me)==me){const pe=t+1;for(;++t;){const Le=u.charAt(t);if(Le==null||Number(Le)!=Le){--t;break}if(t===u.length)break}N.id=Number(u.substring(pe,t+1))}if(u.charAt(++t)){const pe=this.tryParse(u.substr(t));if(bm.isPayloadValid(N.type,pe))N.data=pe;else throw new Error("invalid payload")}return N}tryParse(u){try{return JSON.parse(u,this.reviver)}catch{return!1}}static isPayloadValid(u,t){switch(u){case PacketType.CONNECT:return isObject(t);case PacketType.DISCONNECT:return t===void 0;case PacketType.CONNECT_ERROR:return typeof t=="string"||isObject(t);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&RESERVED_EVENTS$1.indexOf(t[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class BinaryReconstructor{constructor(u){this.packet=u,this.buffers=[],this.reconPack=u}takeBinaryData(u){if(this.buffers.push(u),this.buffers.length===this.reconPack.attachments){const t=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Decoder$1,Encoder:Encoder$1,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(de,u,t){return de.on(u,t),function(){de.off(u,t)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(u,t,N){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=u,this.nsp=t,N&&N.auth&&(this.auth=N.auth),this._opts=Object.assign({},N),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const u=this.io;this.subs=[on(u,"open",this.onopen.bind(this)),on(u,"packet",this.onpacket.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...u){return u.unshift("message"),this.emit.apply(this,u),this}emit(u,...t){if(RESERVED_EVENTS.hasOwnProperty(u))throw new Error('"'+u.toString()+'" is a reserved event name');if(t.unshift(u),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const N={type:PacketType.EVENT,data:t};if(N.options={},N.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const Le=this.ids++,Ye=t.pop();this._registerAckCallback(Le,Ye),N.id=Le}const me=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!me||!this.connected)||(this.connected?(this.notifyOutgoingListeners(N),this.packet(N)):this.sendBuffer.push(N)),this.flags={},this}_registerAckCallback(u,t){var N;const me=(N=this.flags.timeout)!==null&&N!==void 0?N:this._opts.ackTimeout;if(me===void 0){this.acks[u]=t;return}const pe=this.io.setTimeoutFn(()=>{delete this.acks[u];for(let Le=0;Le<this.sendBuffer.length;Le++)this.sendBuffer[Le].id===u&&this.sendBuffer.splice(Le,1);t.call(this,new Error("operation has timed out"))},me);this.acks[u]=(...Le)=>{this.io.clearTimeoutFn(pe),t.apply(this,[null,...Le])}}emitWithAck(u,...t){const N=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((me,pe)=>{t.push((Le,Ye)=>N?Le?pe(Le):me(Ye):me(Le)),this.emit(u,...t)})}_addToQueue(u){let t;typeof u[u.length-1]=="function"&&(t=u.pop());const N={id:this._queueSeq++,tryCount:0,pending:!1,args:u,flags:Object.assign({fromQueue:!0},this.flags)};u.push((me,...pe)=>N!==this._queue[0]?void 0:(me!==null?N.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(me)):(this._queue.shift(),t&&t(null,...pe)),N.pending=!1,this._drainQueue())),this._queue.push(N),this._drainQueue()}_drainQueue(u=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!u||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(u){u.nsp=this.nsp,this.io._packet(u)}onopen(){typeof this.auth=="function"?this.auth(u=>{this._sendConnectPacket(u)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(u){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},u):u})}onerror(u){this.connected||this.emitReserved("connect_error",u)}onclose(u,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",u,t)}onpacket(u){if(u.nsp===this.nsp)switch(u.type){case PacketType.CONNECT:u.data&&u.data.sid?this.onconnect(u.data.sid,u.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(u);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(u);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const N=new Error(u.data.message);N.data=u.data.data,this.emitReserved("connect_error",N);break}}onevent(u){const t=u.data||[];u.id!=null&&t.push(this.ack(u.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(u){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const N of t)N.apply(this,u)}super.emit.apply(this,u),this._pid&&u.length&&typeof u[u.length-1]=="string"&&(this._lastOffset=u[u.length-1])}ack(u){const t=this;let N=!1;return function(...me){N||(N=!0,t.packet({type:PacketType.ACK,id:u,data:me}))}}onack(u){const t=this.acks[u.id];typeof t=="function"&&(t.apply(this,u.data),delete this.acks[u.id])}onconnect(u,t){this.id=u,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(u=>this.emitEvent(u)),this.receiveBuffer=[],this.sendBuffer.forEach(u=>{this.notifyOutgoingListeners(u),this.packet(u)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(u=>u()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(u){return this.flags.compress=u,this}get volatile(){return this.flags.volatile=!0,this}timeout(u){return this.flags.timeout=u,this}onAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(u),this}prependAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(u),this}offAny(u){if(!this._anyListeners)return this;if(u){const t=this._anyListeners;for(let N=0;N<t.length;N++)if(u===t[N])return t.splice(N,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(u),this}prependAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(u),this}offAnyOutgoing(u){if(!this._anyOutgoingListeners)return this;if(u){const t=this._anyOutgoingListeners;for(let N=0;N<t.length;N++)if(u===t[N])return t.splice(N,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(u){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const N of t)N.apply(this,u.data)}}}function Backoff(de){de=de||{},this.ms=de.min||100,this.max=de.max||1e4,this.factor=de.factor||2,this.jitter=de.jitter>0&&de.jitter<=1?de.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var de=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var u=Math.random(),t=Math.floor(u*this.jitter*de);de=(Math.floor(u*10)&1)==0?de-t:de+t}return Math.min(de,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(de){this.ms=de};Backoff.prototype.setMax=function(de){this.max=de};Backoff.prototype.setJitter=function(de){this.jitter=de};class Manager extends Emitter{constructor(u,t){var N;super(),this.nsps={},this.subs=[],u&&typeof u=="object"&&(t=u,u=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,installTimerFunctions(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((N=t.randomizationFactor)!==null&&N!==void 0?N:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=u;const me=t.parser||parser;this.encoder=new me.Encoder,this.decoder=new me.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(u){return arguments.length?(this._reconnection=!!u,this):this._reconnection}reconnectionAttempts(u){return u===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=u,this)}reconnectionDelay(u){var t;return u===void 0?this._reconnectionDelay:(this._reconnectionDelay=u,(t=this.backoff)===null||t===void 0||t.setMin(u),this)}randomizationFactor(u){var t;return u===void 0?this._randomizationFactor:(this._randomizationFactor=u,(t=this.backoff)===null||t===void 0||t.setJitter(u),this)}reconnectionDelayMax(u){var t;return u===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=u,(t=this.backoff)===null||t===void 0||t.setMax(u),this)}timeout(u){return arguments.length?(this._timeout=u,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(u){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const t=this.engine,N=this;this._readyState="opening",this.skipReconnect=!1;const me=on(t,"open",function(){N.onopen(),u&&u()}),pe=Ye=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",Ye),u?u(Ye):this.maybeReconnectOnOpen()},Le=on(t,"error",pe);if(this._timeout!==!1){const Ye=this._timeout,nt=this.setTimeoutFn(()=>{me(),pe(new Error("timeout")),t.close()},Ye);this.opts.autoUnref&&nt.unref(),this.subs.push(()=>{this.clearTimeoutFn(nt)})}return this.subs.push(me),this.subs.push(Le),this}connect(u){return this.open(u)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const u=this.engine;this.subs.push(on(u,"ping",this.onping.bind(this)),on(u,"data",this.ondata.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(u){try{this.decoder.add(u)}catch(t){this.onclose("parse error",t)}}ondecoded(u){nextTick(()=>{this.emitReserved("packet",u)},this.setTimeoutFn)}onerror(u){this.emitReserved("error",u)}socket(u,t){let N=this.nsps[u];return N?this._autoConnect&&!N.active&&N.connect():(N=new Socket(this,u,t),this.nsps[u]=N),N}_destroy(u){const t=Object.keys(this.nsps);for(const N of t)if(this.nsps[N].active)return;this._close()}_packet(u){const t=this.encoder.encode(u);for(let N=0;N<t.length;N++)this.engine.write(t[N],u.options)}cleanup(){this.subs.forEach(u=>u()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(u,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",u,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const u=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const N=this.setTimeoutFn(()=>{u.skipReconnect||(this.emitReserved("reconnect_attempt",u.backoff.attempts),!u.skipReconnect&&u.open(me=>{me?(u._reconnecting=!1,u.reconnect(),this.emitReserved("reconnect_error",me)):u.onreconnect()}))},t);this.opts.autoUnref&&N.unref(),this.subs.push(()=>{this.clearTimeoutFn(N)})}}onreconnect(){const u=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",u)}}const cache={};function lookup(de,u){typeof de=="object"&&(u=de,de=void 0),u=u||{};const t=url(de,u.path||"/socket.io"),N=t.source,me=t.id,pe=t.path,Le=cache[me]&&pe in cache[me].nsps,Ye=u.forceNew||u["force new connection"]||u.multiplex===!1||Le;let nt;return Ye?nt=new Manager(N,u):(cache[me]||(cache[me]=new Manager(N,u)),nt=cache[me]),t.query&&!u.query&&(u.query=t.queryKey),nt.socket(t.path,u)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});var requiresPort,hasRequiredRequiresPort;function requireRequiresPort(){return hasRequiredRequiresPort||(hasRequiredRequiresPort=1,requiresPort=function(u,t){if(t=t.split(":")[0],u=+u,!u)return!1;switch(t){case"http":case"ws":return u!==80;case"https":case"wss":return u!==443;case"ftp":return u!==21;case"gopher":return u!==70;case"file":return!1}return u!==0}),requiresPort}var querystringify={},hasRequiredQuerystringify;function requireQuerystringify(){if(hasRequiredQuerystringify)return querystringify;hasRequiredQuerystringify=1;var de=Object.prototype.hasOwnProperty,u;function t(Le){try{return decodeURIComponent(Le.replace(/\+/g," "))}catch{return null}}function N(Le){try{return encodeURIComponent(Le)}catch{return null}}function me(Le){for(var Ye=/([^=?#&]+)=?([^&]*)/g,nt={},ot;ot=Ye.exec(Le);){var ft=t(ot[1]),mt=t(ot[2]);ft===null||mt===null||ft in nt||(nt[ft]=mt)}return nt}function pe(Le,Ye){Ye=Ye||"";var nt=[],ot,ft;typeof Ye!="string"&&(Ye="?");for(ft in Le)if(de.call(Le,ft)){if(ot=Le[ft],!ot&&(ot===null||ot===u||isNaN(ot))&&(ot=""),ft=N(ft),ot=N(ot),ft===null||ot===null)continue;nt.push(ft+"="+ot)}return nt.length?Ye+nt.join("&"):""}return querystringify.stringify=pe,querystringify.parse=me,querystringify}var urlParse,hasRequiredUrlParse;function requireUrlParse(){if(hasRequiredUrlParse)return urlParse;hasRequiredUrlParse=1;var de=requireRequiresPort(),u=requireQuerystringify(),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,N=/[\n\r\t]/g,me=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,pe=/:\d+$/,Le=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ye=/^[a-zA-Z]:/;function nt(It){return(It||"").toString().replace(t,"")}var ot=[["#","hash"],["?","query"],function(Pt,Bt){return bt(Bt.protocol)?Pt.replace(/\\/g,"/"):Pt},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ft={hash:1,query:1};function mt(It){var Pt;typeof window<"u"?Pt=window:typeof commonjsGlobal<"u"?Pt=commonjsGlobal:typeof self<"u"?Pt=self:Pt={};var Bt=Pt.location||{};It=It||Bt;var Ot={},Nt=typeof It,Lt;if(It.protocol==="blob:")Ot=new Ct(unescape(It.pathname),{});else if(Nt==="string"){Ot=new Ct(It,{});for(Lt in ft)delete Ot[Lt]}else if(Nt==="object"){for(Lt in It)Lt in ft||(Ot[Lt]=It[Lt]);Ot.slashes===void 0&&(Ot.slashes=me.test(It.href))}return Ot}function bt(It){return It==="file:"||It==="ftp:"||It==="http:"||It==="https:"||It==="ws:"||It==="wss:"}function yt(It,Pt){It=nt(It),It=It.replace(N,""),Pt=Pt||{};var Bt=Le.exec(It),Ot=Bt[1]?Bt[1].toLowerCase():"",Nt=!!Bt[2],Lt=!!Bt[3],Et=0,kt;return Nt?Lt?(kt=Bt[2]+Bt[3]+Bt[4],Et=Bt[2].length+Bt[3].length):(kt=Bt[2]+Bt[4],Et=Bt[2].length):Lt?(kt=Bt[3]+Bt[4],Et=Bt[3].length):kt=Bt[4],Ot==="file:"?Et>=2&&(kt=kt.slice(2)):bt(Ot)?kt=Bt[4]:Ot?Nt&&(kt=kt.slice(2)):Et>=2&&bt(Pt.protocol)&&(kt=Bt[4]),{protocol:Ot,slashes:Nt||bt(Ot),slashesCount:Et,rest:kt}}function _t(It,Pt){if(It==="")return Pt;for(var Bt=(Pt||"/").split("/").slice(0,-1).concat(It.split("/")),Ot=Bt.length,Nt=Bt[Ot-1],Lt=!1,Et=0;Ot--;)Bt[Ot]==="."?Bt.splice(Ot,1):Bt[Ot]===".."?(Bt.splice(Ot,1),Et++):Et&&(Ot===0&&(Lt=!0),Bt.splice(Ot,1),Et--);return Lt&&Bt.unshift(""),(Nt==="."||Nt==="..")&&Bt.push(""),Bt.join("/")}function Ct(It,Pt,Bt){if(It=nt(It),It=It.replace(N,""),!(this instanceof Ct))return new Ct(It,Pt,Bt);var Ot,Nt,Lt,Et,kt,St,$t=ot.slice(),zt=typeof Pt,Ut=this,qt=0;for(zt!=="object"&&zt!=="string"&&(Bt=Pt,Pt=null),Bt&&typeof Bt!="function"&&(Bt=u.parse),Pt=mt(Pt),Nt=yt(It||"",Pt),Ot=!Nt.protocol&&!Nt.slashes,Ut.slashes=Nt.slashes||Ot&&Pt.slashes,Ut.protocol=Nt.protocol||Pt.protocol||"",It=Nt.rest,(Nt.protocol==="file:"&&(Nt.slashesCount!==2||Ye.test(It))||!Nt.slashes&&(Nt.protocol||Nt.slashesCount<2||!bt(Ut.protocol)))&&($t[3]=[/(.*)/,"pathname"]);qt<$t.length;qt++){if(Et=$t[qt],typeof Et=="function"){It=Et(It,Ut);continue}Lt=Et[0],St=Et[1],Lt!==Lt?Ut[St]=It:typeof Lt=="string"?(kt=Lt==="@"?It.lastIndexOf(Lt):It.indexOf(Lt),~kt&&(typeof Et[2]=="number"?(Ut[St]=It.slice(0,kt),It=It.slice(kt+Et[2])):(Ut[St]=It.slice(kt),It=It.slice(0,kt)))):(kt=Lt.exec(It))&&(Ut[St]=kt[1],It=It.slice(0,kt.index)),Ut[St]=Ut[St]||Ot&&Et[3]&&Pt[St]||"",Et[4]&&(Ut[St]=Ut[St].toLowerCase())}Bt&&(Ut.query=Bt(Ut.query)),Ot&&Pt.slashes&&Ut.pathname.charAt(0)!=="/"&&(Ut.pathname!==""||Pt.pathname!=="")&&(Ut.pathname=_t(Ut.pathname,Pt.pathname)),Ut.pathname.charAt(0)!=="/"&&bt(Ut.protocol)&&(Ut.pathname="/"+Ut.pathname),de(Ut.port,Ut.protocol)||(Ut.host=Ut.hostname,Ut.port=""),Ut.username=Ut.password="",Ut.auth&&(kt=Ut.auth.indexOf(":"),~kt?(Ut.username=Ut.auth.slice(0,kt),Ut.username=encodeURIComponent(decodeURIComponent(Ut.username)),Ut.password=Ut.auth.slice(kt+1),Ut.password=encodeURIComponent(decodeURIComponent(Ut.password))):Ut.username=encodeURIComponent(decodeURIComponent(Ut.auth)),Ut.auth=Ut.password?Ut.username+":"+Ut.password:Ut.username),Ut.origin=Ut.protocol!=="file:"&&bt(Ut.protocol)&&Ut.host?Ut.protocol+"//"+Ut.host:"null",Ut.href=Ut.toString()}function Tt(It,Pt,Bt){var Ot=this;switch(It){case"query":typeof Pt=="string"&&Pt.length&&(Pt=(Bt||u.parse)(Pt)),Ot[It]=Pt;break;case"port":Ot[It]=Pt,de(Pt,Ot.protocol)?Pt&&(Ot.host=Ot.hostname+":"+Pt):(Ot.host=Ot.hostname,Ot[It]="");break;case"hostname":Ot[It]=Pt,Ot.port&&(Pt+=":"+Ot.port),Ot.host=Pt;break;case"host":Ot[It]=Pt,pe.test(Pt)?(Pt=Pt.split(":"),Ot.port=Pt.pop(),Ot.hostname=Pt.join(":")):(Ot.hostname=Pt,Ot.port="");break;case"protocol":Ot.protocol=Pt.toLowerCase(),Ot.slashes=!Bt;break;case"pathname":case"hash":if(Pt){var Nt=It==="pathname"?"/":"#";Ot[It]=Pt.charAt(0)!==Nt?Nt+Pt:Pt}else Ot[It]=Pt;break;case"username":case"password":Ot[It]=encodeURIComponent(Pt);break;case"auth":var Lt=Pt.indexOf(":");~Lt?(Ot.username=Pt.slice(0,Lt),Ot.username=encodeURIComponent(decodeURIComponent(Ot.username)),Ot.password=Pt.slice(Lt+1),Ot.password=encodeURIComponent(decodeURIComponent(Ot.password))):Ot.username=encodeURIComponent(decodeURIComponent(Pt))}for(var Et=0;Et<ot.length;Et++){var kt=ot[Et];kt[4]&&(Ot[kt[1]]=Ot[kt[1]].toLowerCase())}return Ot.auth=Ot.password?Ot.username+":"+Ot.password:Ot.username,Ot.origin=Ot.protocol!=="file:"&&bt(Ot.protocol)&&Ot.host?Ot.protocol+"//"+Ot.host:"null",Ot.href=Ot.toString(),Ot}function At(It){(!It||typeof It!="function")&&(It=u.stringify);var Pt,Bt=this,Ot=Bt.host,Nt=Bt.protocol;Nt&&Nt.charAt(Nt.length-1)!==":"&&(Nt+=":");var Lt=Nt+(Bt.protocol&&Bt.slashes||bt(Bt.protocol)?"//":"");return Bt.username?(Lt+=Bt.username,Bt.password&&(Lt+=":"+Bt.password),Lt+="@"):Bt.password?(Lt+=":"+Bt.password,Lt+="@"):Bt.protocol!=="file:"&&bt(Bt.protocol)&&!Ot&&Bt.pathname!=="/"&&(Lt+="@"),(Ot[Ot.length-1]===":"||pe.test(Bt.hostname)&&!Bt.port)&&(Ot+=":"),Lt+=Ot+Bt.pathname,Pt=typeof Bt.query=="object"?It(Bt.query):Bt.query,Pt&&(Lt+=Pt.charAt(0)!=="?"?"?"+Pt:Pt),Bt.hash&&(Lt+=Bt.hash),Lt}return Ct.prototype={set:Tt,toString:At},Ct.extractProtocol=yt,Ct.location=mt,Ct.trimLeft=nt,Ct.qs=u,urlParse=Ct,urlParse}requireUrlParse();const Be=["tableCellBorderWidth","tableCellBorderColor","tableCellBorderStyle","tableCellHorizontalAlignment","tableCellVerticalAlignment","tableCellBackgroundColor","tableCellPadding"];Object.fromEntries(Be.map(de=>[de,null]));function App(){const[de,u]=reactExports.useState(""),[t,N]=reactExports.useState(["Protocol_Document_Template.docx","sample.docx"]),[me,pe]=reactExports.useState(""),[Le,Ye]=reactExports.useState(null),[nt,ot]=reactExports.useState({top:0,left:0,visible:!1}),ft=reactExports.useRef(""),[mt,bt]=reactExports.useState(""),[yt,_t]=reactExports.useState(""),[Ct,Tt]=reactExports.useState(!1),[At,It]=reactExports.useState(!1),Pt=reactExports.useRef(null);console.log(N);const Bt=(St,$t)=>{u($t.getData())},Ot=St=>{clearTimeout(Pt.current),Pt.current=setTimeout(()=>{var zt,Ut;const $t=(Ut=(zt=St==null?void 0:St.model)==null?void 0:zt.document)==null?void 0:Ut.selection;if($t)if($t.isCollapsed)ot(qt=>({...qt,visible:!1})),bt(""),_t(""),It(!1);else try{const qt=St.data.stringify(St.model.getSelectedContent($t));ft.current=qt;const Zt=document.createElement("div");Zt.innerHTML=qt;const Dt=Zt.innerText.trim();bt(Dt),_t(""),St.editing.view.change(()=>{const jt=St.editing.view.document.selection;if(jt==null?void 0:jt.getFirstRange()){const Kt=window.getSelection();if(Kt&&Kt.rangeCount>0){const Vt=Kt.getRangeAt(0).getBoundingClientRect();ot({top:Vt.top+window.scrollY-40,left:Vt.left+window.scrollX,visible:!0})}}})}catch(qt){console.warn("Selection handling error:",qt)}},60)};reactExports.useEffect(()=>{if(!Le)return;const St=()=>Ot(Le);return Le.model.document.selection.on("change",St),()=>{clearTimeout(Pt.current),Le.model.document.selection.off("change",St)}},[Le]),reactExports.useEffect(()=>{Le&&Le.model.document.selection.on("change",()=>Ot(Le))},[Le]),reactExports.useEffect(()=>{if(Le){const St=()=>Ot(Le);return Le.model.document.selection.on("change",St),()=>Le.model.document.selection.off("change",St)}},[Le]);const Nt=St=>{const $t=window.scrollY;St(),window.scrollTo(0,$t)};reactExports.useEffect(()=>{Le&&Le.model.document.selection.on("change",()=>{Nt(()=>Ot(Le))})},[Le]);const Lt=async St=>{u("");const $t=St.target.value;if(pe($t),Le)try{const Ut=await fetch(`/CKEditor/${$t}`);if(!Ut.ok)throw new Error(`Failed to fetch file: ${Ut.statusText}`);const qt=await Ut.blob(),Zt=new File([qt],$t,{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});Le.execute("importWord",Zt)}catch(zt){console.error("Error loading file:",zt),alert("An error occurred while importing the Word file.")}},Et=async()=>{Tt(!0),It(!0),ot({top:0,left:0,visible:!1});try{const St=await axios.post("https://smart-suggest.azurewebsites.net/rag/stream/1/kesimpta",{sentence:mt},{headers:{"Content-Type":"application/x-www-form-urlencoded"}});St.status===200?(Tt(!1),_t(St.data.corrected_sentence)):(console.error("API response error:",St),alert("Failed to fetch suggestion."))}catch(St){console.error("Fetch error:",St),alert("Error fetching suggestion.")}},kt=()=>{if(Le&&ft.current&&yt){let $t=new DOMParser().parseFromString(Le.getData(),"text/html"),zt=qt=>{qt.nodeType===Node.TEXT_NODE?qt.nodeValue=qt.nodeValue.replace(mt,yt):qt.childNodes.forEach(zt)};zt($t.body);let Ut=$t.body.innerHTML;Le.setData(Ut),u(Ut),ot({visible:!1}),bt(""),_t(""),It(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",padding:"1rem"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"75vw",height:"84vh",minHeight:"84vh"},children:[jsxRuntimeExports.jsx(CKEditor,{editor:ClassicEditor,config:{licenseKey:"eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjE3NDQ0MTU5OTksImp0aSI6IjRmZjg0YTQ0LWQzODktNDcxZS05NjMyLTIyNzJhZjhlOWJlMSIsInVzYWdlRW5kcG9pbnQiOiJodHRwczovL3Byb3h5LWV2ZW50LmNrZWRpdG9yLmNvbSIsImRpc3RyaWJ1dGlvbkNoYW5uZWwiOlsiY2xvdWQiLCJkcnVwYWwiLCJzaCJdLCJ3aGl0ZUxhYmVsIjp0cnVlLCJsaWNlbnNlVHlwZSI6InRyaWFsIiwiZmVhdHVyZXMiOlsiKiJdLCJ2YyI6IjQwMTQyMGNkIn0.5dxVePK1-qdrqjzrCJdPVdoBTdWJq2T-QDFUkDlQUxsjliIuPOTAmsiZjKfCK29OPeUf1_b_vqxfWgazgPCFQw",toolbar:["importWord","exportPdf","exportWord","|","undo","redo","|","fontFamily","fontSize","fontColor","highlight","formatPainter","|","heading","|","bold","italic","underline","strikethrough","|","alignment","outdent","indent","|","link","insertTable","tableCellProperties","tableProperties","mergeTableCells","tableColumn","tableRow","|","mediaEmbed","ImageInsert","|","bulletedList","numberedList","todoList","multiLevelList","|","codeBlock","blockQuote","|","subscript","superscript","horizontalLine","|","removeFormat","findAndReplace","specialCharacters","|"],plugins:[e,i$3,o,n,s$1,a,o$3,s$2,Alignment,Autoformat,BlockQuote,Bold,Code,CodeBlock,Clipboard,Essentials,FindAndReplace,Font,FontColor,FontFamily,FontSize,Heading,Highlight,HorizontalLine,Image,ImageCaption,ImageInsert,ImageUpload,ImageResize,ImageStyle,ImageToolbar,Base64UploadAdapter,Indent,IndentBlock,Italic,Link,List,ListProperties,MediaEmbed,MediaEmbedToolbar,Paragraph,PasteFromOffice,RemoveFormat,SpecialCharacters,Strikethrough,Subscript,Superscript,Table,TableCellProperties,TableProperties,TableToolbar,TableColumnResize,TextTransformation,TableSelection,TableMouse,TableKeyboard,TableUI,TableUtils,TableClipboard,TodoList,Underline,Undo,WordCount,Mention,Bookmark,CloudServices],fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif","Comic Sans MS, cursive","Impact, Charcoal, sans-serif","Roboto, sans-serif","Open Sans, sans-serif","Lora, serif","Montserrat, sans-serif","Poppins, sans-serif","Nunito, sans-serif","Raleway, sans-serif","Inter, sans-serif","Fira Sans, sans-serif","DM Sans, sans-serif","Playfair Display, serif","Merriweather, serif","EB Garamond, serif","Crimson Text, serif","Libre Baskerville, serif","Source Sans Pro, sans-serif","Work Sans, sans-serif","Rubik, sans-serif","Manrope, sans-serif","Lexend, sans-serif","Jost, sans-serif","Quicksand, sans-serif","Titillium Web, sans-serif","Ubuntu, sans-serif","Oxygen, sans-serif","Heebo, sans-serif","Assistant, sans-serif","Overpass, sans-serif","Cairo, sans-serif","Tajawal, sans-serif","Barlow, sans-serif","Karla, sans-serif","Signika, sans-serif","Varela Round, sans-serif","Hind, sans-serif","Questrial, sans-serif","Bitter, serif","Alegreya, serif","Cormorant, serif","Spectral, serif","Source Serif Pro, serif","Inknut Antiqua, serif","PT Serif, serif","Neuton, serif","Vollkorn, serif","Domine, serif","Prata, serif","Tinos, serif","Abhaya Libre, serif","Martel, serif","Faustina, serif","Gentium Book Basic, serif","Sorts Mill Goudy, serif"],supportAllValues:!0},fontSize:{options:["10px","12px","14px","16px","18px","20px","24px","28px","32px","36px"],supportAllValues:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"],tableProperties:{style:"display: table;"},tableSelection:{enable:!0}},image:{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}},pasteFromOffice:{removeStyles:!1,keepFormatting:!0}},data:de,onChange:Bt,onReady:St=>Ye(St),onError:St=>console.error("CKEditor Error:",St)}),nt.visible&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:`${nt.top}px`,left:`${nt.left}px`,background:"#fff",border:"1px solid #ddd",padding:"5px 10px",boxShadow:"0px 2px 5px rgba(0,0,0,0.2)",borderRadius:"5px",zIndex:1e3,cursor:"pointer",transition:"top 0.2s ease-out, left 0.2s ease-out"},onClick:Et,children:" Suggestion"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.5rem"},children:[jsxRuntimeExports.jsx("h3",{style:{textAlign:"left",margin:"0",color:"#1565c0"},children:"Select File :"}),jsxRuntimeExports.jsx(FormControl,{style:{minWidth:200,backgroundColor:"white"},children:jsxRuntimeExports.jsxs(Select,{labelId:"file-select-label",value:me,onChange:Lt,displayEmpty:!0,children:[jsxRuntimeExports.jsx(MenuItem,{value:"",disabled:!0,children:"-- Select a file --"}),t.map((St,$t)=>jsxRuntimeExports.jsx(MenuItem,{value:St,children:St},$t))]})})]}),jsxRuntimeExports.jsxs("div",{children:[de&&jsxRuntimeExports.jsx("h3",{style:{textAlign:"left",margin:"0",color:"#1565c0"},children:"Suggestion(s) :"}),de&&jsxRuntimeExports.jsxs("div",{style:{border:"0.5px solid #cbcbcb",borderRadius:"5px",padding:"0.5rem",marginTop:"0.5rem",backgroundColor:"white"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.2rem",marginBottom:"0.7rem"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:"bold",margin:"0",minWidth:"120px"},children:"Selected Text :"}),jsxRuntimeExports.jsx("p",{style:{margin:"0"},children:mt||"No text selected"})]}),At&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.2rem",marginBottom:"0.7rem"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:"bold",margin:"0",minWidth:"100px"},children:"Suggestion :"}),jsxRuntimeExports.jsx("p",{style:{margin:"0"},children:Ct?jsxRuntimeExports.jsx(CircularProgress,{size:15}):yt})]}),yt&&jsxRuntimeExports.jsx("button",{style:{backgroundColor:"darkgreen",color:"white",padding:"0.3rem 0.8rem",borderRadius:"0.2rem",cursor:"pointer"},onClick:kt,children:"REPLACE"})]})]})]})]})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default Bp();
